function wR(e,t){for(var r=0;r<t.length;r++){const u=t[r];if(typeof u!="string"&&!Array.isArray(u)){for(const a in u)if(a!=="default"&&!(a in e)){const f=Object.getOwnPropertyDescriptor(u,a);f&&Object.defineProperty(e,a,f.get?f:{enumerable:!0,get:()=>u[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))u(a);new MutationObserver(a=>{for(const f of a)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&u(m)}).observe(document,{childList:!0,subtree:!0});function r(a){const f={};return a.integrity&&(f.integrity=a.integrity),a.referrerPolicy&&(f.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?f.credentials="include":a.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(a){if(a.ep)return;a.ep=!0;const f=r(a);fetch(a.href,f)}})();function gv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var G1={exports:{}},D_={};var zE;function SR(){if(zE)return D_;zE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(u,a,f){var m=null;if(f!==void 0&&(m=""+f),a.key!==void 0&&(m=""+a.key),"key"in a){f={};for(var c in a)c!=="key"&&(f[c]=a[c])}else f=a;return a=f.ref,{$$typeof:e,type:u,key:m,ref:a!==void 0?a:null,props:f}}return D_.Fragment=t,D_.jsx=r,D_.jsxs=r,D_}var IE;function TR(){return IE||(IE=1,G1.exports=SR()),G1.exports}var me=TR(),H1={exports:{}},Qn={};var kE;function ER(){if(kE)return Qn;kE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),k=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),X=Symbol.iterator;function J(Oe){return Oe===null||typeof Oe!="object"?null:(Oe=X&&Oe[X]||Oe["@@iterator"],typeof Oe=="function"?Oe:null)}var ce={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,ae={};function Me(Oe,pt,Mt){this.props=Oe,this.context=pt,this.refs=ae,this.updater=Mt||ce}Me.prototype.isReactComponent={},Me.prototype.setState=function(Oe,pt){if(typeof Oe!="object"&&typeof Oe!="function"&&Oe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Oe,pt,"setState")},Me.prototype.forceUpdate=function(Oe){this.updater.enqueueForceUpdate(this,Oe,"forceUpdate")};function Ae(){}Ae.prototype=Me.prototype;function we(Oe,pt,Mt){this.props=Oe,this.context=pt,this.refs=ae,this.updater=Mt||ce}var xe=we.prototype=new Ae;xe.constructor=we,ee(xe,Me.prototype),xe.isPureReactComponent=!0;var Se=Array.isArray;function Fe(){}var Ue={H:null,A:null,T:null,S:null},it=Object.prototype.hasOwnProperty;function Rt(Oe,pt,Mt){var It=Mt.ref;return{$$typeof:e,type:Oe,key:pt,ref:It!==void 0?It:null,props:Mt}}function Pt(Oe,pt){return Rt(Oe.type,pt,Oe.props)}function $t(Oe){return typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===e}function Zt(Oe){var pt={"=":"=0",":":"=2"};return"$"+Oe.replace(/[=:]/g,function(Mt){return pt[Mt]})}var cn=/\/+/g;function ln(Oe,pt){return typeof Oe=="object"&&Oe!==null&&Oe.key!=null?Zt(""+Oe.key):pt.toString(36)}function xn(Oe){switch(Oe.status){case"fulfilled":return Oe.value;case"rejected":throw Oe.reason;default:switch(typeof Oe.status=="string"?Oe.then(Fe,Fe):(Oe.status="pending",Oe.then(function(pt){Oe.status==="pending"&&(Oe.status="fulfilled",Oe.value=pt)},function(pt){Oe.status==="pending"&&(Oe.status="rejected",Oe.reason=pt)})),Oe.status){case"fulfilled":return Oe.value;case"rejected":throw Oe.reason}}throw Oe}function Ge(Oe,pt,Mt,It,Nt){var Ft=typeof Oe;(Ft==="undefined"||Ft==="boolean")&&(Oe=null);var At=!1;if(Oe===null)At=!0;else switch(Ft){case"bigint":case"string":case"number":At=!0;break;case"object":switch(Oe.$$typeof){case e:case t:At=!0;break;case B:return At=Oe._init,Ge(At(Oe._payload),pt,Mt,It,Nt)}}if(At)return Nt=Nt(Oe),At=It===""?"."+ln(Oe,0):It,Se(Nt)?(Mt="",At!=null&&(Mt=At.replace(cn,"$&/")+"/"),Ge(Nt,pt,Mt,"",function(Dn){return Dn})):Nt!=null&&($t(Nt)&&(Nt=Pt(Nt,Mt+(Nt.key==null||Oe&&Oe.key===Nt.key?"":(""+Nt.key).replace(cn,"$&/")+"/")+At)),pt.push(Nt)),1;At=0;var un=It===""?".":It+":";if(Se(Oe))for(var Cn=0;Cn<Oe.length;Cn++)It=Oe[Cn],Ft=un+ln(It,Cn),At+=Ge(It,pt,Mt,Ft,Nt);else if(Cn=J(Oe),typeof Cn=="function")for(Oe=Cn.call(Oe),Cn=0;!(It=Oe.next()).done;)It=It.value,Ft=un+ln(It,Cn++),At+=Ge(It,pt,Mt,Ft,Nt);else if(Ft==="object"){if(typeof Oe.then=="function")return Ge(xn(Oe),pt,Mt,It,Nt);throw pt=String(Oe),Error("Objects are not valid as a React child (found: "+(pt==="[object Object]"?"object with keys {"+Object.keys(Oe).join(", ")+"}":pt)+"). If you meant to render a collection of children, use an array instead.")}return At}function mt(Oe,pt,Mt){if(Oe==null)return Oe;var It=[],Nt=0;return Ge(Oe,It,"","",function(Ft){return pt.call(Mt,Ft,Nt++)}),It}function qe(Oe){if(Oe._status===-1){var pt=Oe._result;pt=pt(),pt.then(function(Mt){(Oe._status===0||Oe._status===-1)&&(Oe._status=1,Oe._result=Mt)},function(Mt){(Oe._status===0||Oe._status===-1)&&(Oe._status=2,Oe._result=Mt)}),Oe._status===-1&&(Oe._status=0,Oe._result=pt)}if(Oe._status===1)return Oe._result.default;throw Oe._result}var Bt=typeof reportError=="function"?reportError:function(Oe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Oe=="object"&&Oe!==null&&typeof Oe.message=="string"?String(Oe.message):String(Oe),error:Oe});if(!window.dispatchEvent(pt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Oe);return}console.error(Oe)},jt={map:mt,forEach:function(Oe,pt,Mt){mt(Oe,function(){pt.apply(this,arguments)},Mt)},count:function(Oe){var pt=0;return mt(Oe,function(){pt++}),pt},toArray:function(Oe){return mt(Oe,function(pt){return pt})||[]},only:function(Oe){if(!$t(Oe))throw Error("React.Children.only expected to receive a single React element child.");return Oe}};return Qn.Activity=Z,Qn.Children=jt,Qn.Component=Me,Qn.Fragment=r,Qn.Profiler=a,Qn.PureComponent=we,Qn.StrictMode=u,Qn.Suspense=z,Qn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ue,Qn.__COMPILER_RUNTIME={__proto__:null,c:function(Oe){return Ue.H.useMemoCache(Oe)}},Qn.cache=function(Oe){return function(){return Oe.apply(null,arguments)}},Qn.cacheSignal=function(){return null},Qn.cloneElement=function(Oe,pt,Mt){if(Oe==null)throw Error("The argument must be a React element, but you passed "+Oe+".");var It=ee({},Oe.props),Nt=Oe.key;if(pt!=null)for(Ft in pt.key!==void 0&&(Nt=""+pt.key),pt)!it.call(pt,Ft)||Ft==="key"||Ft==="__self"||Ft==="__source"||Ft==="ref"&&pt.ref===void 0||(It[Ft]=pt[Ft]);var Ft=arguments.length-2;if(Ft===1)It.children=Mt;else if(1<Ft){for(var At=Array(Ft),un=0;un<Ft;un++)At[un]=arguments[un+2];It.children=At}return Rt(Oe.type,Nt,It)},Qn.createContext=function(Oe){return Oe={$$typeof:m,_currentValue:Oe,_currentValue2:Oe,_threadCount:0,Provider:null,Consumer:null},Oe.Provider=Oe,Oe.Consumer={$$typeof:f,_context:Oe},Oe},Qn.createElement=function(Oe,pt,Mt){var It,Nt={},Ft=null;if(pt!=null)for(It in pt.key!==void 0&&(Ft=""+pt.key),pt)it.call(pt,It)&&It!=="key"&&It!=="__self"&&It!=="__source"&&(Nt[It]=pt[It]);var At=arguments.length-2;if(At===1)Nt.children=Mt;else if(1<At){for(var un=Array(At),Cn=0;Cn<At;Cn++)un[Cn]=arguments[Cn+2];Nt.children=un}if(Oe&&Oe.defaultProps)for(It in At=Oe.defaultProps,At)Nt[It]===void 0&&(Nt[It]=At[It]);return Rt(Oe,Ft,Nt)},Qn.createRef=function(){return{current:null}},Qn.forwardRef=function(Oe){return{$$typeof:c,render:Oe}},Qn.isValidElement=$t,Qn.lazy=function(Oe){return{$$typeof:B,_payload:{_status:-1,_result:Oe},_init:qe}},Qn.memo=function(Oe,pt){return{$$typeof:k,type:Oe,compare:pt===void 0?null:pt}},Qn.startTransition=function(Oe){var pt=Ue.T,Mt={};Ue.T=Mt;try{var It=Oe(),Nt=Ue.S;Nt!==null&&Nt(Mt,It),typeof It=="object"&&It!==null&&typeof It.then=="function"&&It.then(Fe,Bt)}catch(Ft){Bt(Ft)}finally{pt!==null&&Mt.types!==null&&(pt.types=Mt.types),Ue.T=pt}},Qn.unstable_useCacheRefresh=function(){return Ue.H.useCacheRefresh()},Qn.use=function(Oe){return Ue.H.use(Oe)},Qn.useActionState=function(Oe,pt,Mt){return Ue.H.useActionState(Oe,pt,Mt)},Qn.useCallback=function(Oe,pt){return Ue.H.useCallback(Oe,pt)},Qn.useContext=function(Oe){return Ue.H.useContext(Oe)},Qn.useDebugValue=function(){},Qn.useDeferredValue=function(Oe,pt){return Ue.H.useDeferredValue(Oe,pt)},Qn.useEffect=function(Oe,pt){return Ue.H.useEffect(Oe,pt)},Qn.useEffectEvent=function(Oe){return Ue.H.useEffectEvent(Oe)},Qn.useId=function(){return Ue.H.useId()},Qn.useImperativeHandle=function(Oe,pt,Mt){return Ue.H.useImperativeHandle(Oe,pt,Mt)},Qn.useInsertionEffect=function(Oe,pt){return Ue.H.useInsertionEffect(Oe,pt)},Qn.useLayoutEffect=function(Oe,pt){return Ue.H.useLayoutEffect(Oe,pt)},Qn.useMemo=function(Oe,pt){return Ue.H.useMemo(Oe,pt)},Qn.useOptimistic=function(Oe,pt){return Ue.H.useOptimistic(Oe,pt)},Qn.useReducer=function(Oe,pt,Mt){return Ue.H.useReducer(Oe,pt,Mt)},Qn.useRef=function(Oe){return Ue.H.useRef(Oe)},Qn.useState=function(Oe){return Ue.H.useState(Oe)},Qn.useSyncExternalStore=function(Oe,pt,Mt){return Ue.H.useSyncExternalStore(Oe,pt,Mt)},Qn.useTransition=function(){return Ue.H.useTransition()},Qn.version="19.2.4",Qn}var PE;function w2(){return PE||(PE=1,H1.exports=ER()),H1.exports}var de=w2();const uh=gv(de),aM=wR({__proto__:null,default:uh},[de]);var W1={exports:{}},L_={},X1={exports:{}},Y1={};var DE;function AR(){return DE||(DE=1,(function(e){function t(Ge,mt){var qe=Ge.length;Ge.push(mt);e:for(;0<qe;){var Bt=qe-1>>>1,jt=Ge[Bt];if(0<a(jt,mt))Ge[Bt]=mt,Ge[qe]=jt,qe=Bt;else break e}}function r(Ge){return Ge.length===0?null:Ge[0]}function u(Ge){if(Ge.length===0)return null;var mt=Ge[0],qe=Ge.pop();if(qe!==mt){Ge[0]=qe;e:for(var Bt=0,jt=Ge.length,Oe=jt>>>1;Bt<Oe;){var pt=2*(Bt+1)-1,Mt=Ge[pt],It=pt+1,Nt=Ge[It];if(0>a(Mt,qe))It<jt&&0>a(Nt,Mt)?(Ge[Bt]=Nt,Ge[It]=qe,Bt=It):(Ge[Bt]=Mt,Ge[pt]=qe,Bt=pt);else if(It<jt&&0>a(Nt,qe))Ge[Bt]=Nt,Ge[It]=qe,Bt=It;else break e}}return mt}function a(Ge,mt){var qe=Ge.sortIndex-mt.sortIndex;return qe!==0?qe:Ge.id-mt.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var m=Date,c=m.now();e.unstable_now=function(){return m.now()-c}}var z=[],k=[],B=1,Z=null,X=3,J=!1,ce=!1,ee=!1,ae=!1,Me=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,we=typeof setImmediate<"u"?setImmediate:null;function xe(Ge){for(var mt=r(k);mt!==null;){if(mt.callback===null)u(k);else if(mt.startTime<=Ge)u(k),mt.sortIndex=mt.expirationTime,t(z,mt);else break;mt=r(k)}}function Se(Ge){if(ee=!1,xe(Ge),!ce)if(r(z)!==null)ce=!0,Fe||(Fe=!0,Zt());else{var mt=r(k);mt!==null&&xn(Se,mt.startTime-Ge)}}var Fe=!1,Ue=-1,it=5,Rt=-1;function Pt(){return ae?!0:!(e.unstable_now()-Rt<it)}function $t(){if(ae=!1,Fe){var Ge=e.unstable_now();Rt=Ge;var mt=!0;try{e:{ce=!1,ee&&(ee=!1,Ae(Ue),Ue=-1),J=!0;var qe=X;try{t:{for(xe(Ge),Z=r(z);Z!==null&&!(Z.expirationTime>Ge&&Pt());){var Bt=Z.callback;if(typeof Bt=="function"){Z.callback=null,X=Z.priorityLevel;var jt=Bt(Z.expirationTime<=Ge);if(Ge=e.unstable_now(),typeof jt=="function"){Z.callback=jt,xe(Ge),mt=!0;break t}Z===r(z)&&u(z),xe(Ge)}else u(z);Z=r(z)}if(Z!==null)mt=!0;else{var Oe=r(k);Oe!==null&&xn(Se,Oe.startTime-Ge),mt=!1}}break e}finally{Z=null,X=qe,J=!1}mt=void 0}}finally{mt?Zt():Fe=!1}}}var Zt;if(typeof we=="function")Zt=function(){we($t)};else if(typeof MessageChannel<"u"){var cn=new MessageChannel,ln=cn.port2;cn.port1.onmessage=$t,Zt=function(){ln.postMessage(null)}}else Zt=function(){Me($t,0)};function xn(Ge,mt){Ue=Me(function(){Ge(e.unstable_now())},mt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ge){Ge.callback=null},e.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):it=0<Ge?Math.floor(1e3/Ge):5},e.unstable_getCurrentPriorityLevel=function(){return X},e.unstable_next=function(Ge){switch(X){case 1:case 2:case 3:var mt=3;break;default:mt=X}var qe=X;X=mt;try{return Ge()}finally{X=qe}},e.unstable_requestPaint=function(){ae=!0},e.unstable_runWithPriority=function(Ge,mt){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var qe=X;X=Ge;try{return mt()}finally{X=qe}},e.unstable_scheduleCallback=function(Ge,mt,qe){var Bt=e.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?Bt+qe:Bt):qe=Bt,Ge){case 1:var jt=-1;break;case 2:jt=250;break;case 5:jt=1073741823;break;case 4:jt=1e4;break;default:jt=5e3}return jt=qe+jt,Ge={id:B++,callback:mt,priorityLevel:Ge,startTime:qe,expirationTime:jt,sortIndex:-1},qe>Bt?(Ge.sortIndex=qe,t(k,Ge),r(z)===null&&Ge===r(k)&&(ee?(Ae(Ue),Ue=-1):ee=!0,xn(Se,qe-Bt))):(Ge.sortIndex=jt,t(z,Ge),ce||J||(ce=!0,Fe||(Fe=!0,Zt()))),Ge},e.unstable_shouldYield=Pt,e.unstable_wrapCallback=function(Ge){var mt=X;return function(){var qe=X;X=mt;try{return Ge.apply(this,arguments)}finally{X=qe}}}})(Y1)),Y1}var LE;function CR(){return LE||(LE=1,X1.exports=AR()),X1.exports}var K1={exports:{}},Ns={};var RE;function MR(){if(RE)return Ns;RE=1;var e=w2();function t(z){var k="https://react.dev/errors/"+z;if(1<arguments.length){k+="?args[]="+encodeURIComponent(arguments[1]);for(var B=2;B<arguments.length;B++)k+="&args[]="+encodeURIComponent(arguments[B])}return"Minified React error #"+z+"; visit "+k+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var u={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function f(z,k,B){var Z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:Z==null?null:""+Z,children:z,containerInfo:k,implementation:B}}var m=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(z,k){if(z==="font")return"";if(typeof k=="string")return k==="use-credentials"?k:""}return Ns.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,Ns.createPortal=function(z,k){var B=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!k||k.nodeType!==1&&k.nodeType!==9&&k.nodeType!==11)throw Error(t(299));return f(z,k,null,B)},Ns.flushSync=function(z){var k=m.T,B=u.p;try{if(m.T=null,u.p=2,z)return z()}finally{m.T=k,u.p=B,u.d.f()}},Ns.preconnect=function(z,k){typeof z=="string"&&(k?(k=k.crossOrigin,k=typeof k=="string"?k==="use-credentials"?k:"":void 0):k=null,u.d.C(z,k))},Ns.prefetchDNS=function(z){typeof z=="string"&&u.d.D(z)},Ns.preinit=function(z,k){if(typeof z=="string"&&k&&typeof k.as=="string"){var B=k.as,Z=c(B,k.crossOrigin),X=typeof k.integrity=="string"?k.integrity:void 0,J=typeof k.fetchPriority=="string"?k.fetchPriority:void 0;B==="style"?u.d.S(z,typeof k.precedence=="string"?k.precedence:void 0,{crossOrigin:Z,integrity:X,fetchPriority:J}):B==="script"&&u.d.X(z,{crossOrigin:Z,integrity:X,fetchPriority:J,nonce:typeof k.nonce=="string"?k.nonce:void 0})}},Ns.preinitModule=function(z,k){if(typeof z=="string")if(typeof k=="object"&&k!==null){if(k.as==null||k.as==="script"){var B=c(k.as,k.crossOrigin);u.d.M(z,{crossOrigin:B,integrity:typeof k.integrity=="string"?k.integrity:void 0,nonce:typeof k.nonce=="string"?k.nonce:void 0})}}else k==null&&u.d.M(z)},Ns.preload=function(z,k){if(typeof z=="string"&&typeof k=="object"&&k!==null&&typeof k.as=="string"){var B=k.as,Z=c(B,k.crossOrigin);u.d.L(z,B,{crossOrigin:Z,integrity:typeof k.integrity=="string"?k.integrity:void 0,nonce:typeof k.nonce=="string"?k.nonce:void 0,type:typeof k.type=="string"?k.type:void 0,fetchPriority:typeof k.fetchPriority=="string"?k.fetchPriority:void 0,referrerPolicy:typeof k.referrerPolicy=="string"?k.referrerPolicy:void 0,imageSrcSet:typeof k.imageSrcSet=="string"?k.imageSrcSet:void 0,imageSizes:typeof k.imageSizes=="string"?k.imageSizes:void 0,media:typeof k.media=="string"?k.media:void 0})}},Ns.preloadModule=function(z,k){if(typeof z=="string")if(k){var B=c(k.as,k.crossOrigin);u.d.m(z,{as:typeof k.as=="string"&&k.as!=="script"?k.as:void 0,crossOrigin:B,integrity:typeof k.integrity=="string"?k.integrity:void 0})}else u.d.m(z)},Ns.requestFormReset=function(z){u.d.r(z)},Ns.unstable_batchedUpdates=function(z,k){return z(k)},Ns.useFormState=function(z,k,B){return m.H.useFormState(z,k,B)},Ns.useFormStatus=function(){return m.H.useHostTransitionStatus()},Ns.version="19.2.4",Ns}var OE;function oM(){if(OE)return K1.exports;OE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),K1.exports=MR(),K1.exports}var NE;function zR(){if(NE)return L_;NE=1;var e=CR(),t=w2(),r=oM();function u(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function f(l){var d=l,v=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(v=d.return),l=d.return;while(l)}return d.tag===3?v:null}function m(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function z(l){if(f(l)!==l)throw Error(u(188))}function k(l){var d=l.alternate;if(!d){if(d=f(l),d===null)throw Error(u(188));return d!==l?null:l}for(var v=l,E=d;;){var R=v.return;if(R===null)break;var $=R.alternate;if($===null){if(E=R.return,E!==null){v=E;continue}break}if(R.child===$.child){for($=R.child;$;){if($===v)return z(R),l;if($===E)return z(R),d;$=$.sibling}throw Error(u(188))}if(v.return!==E.return)v=R,E=$;else{for(var Q=!1,pe=R.child;pe;){if(pe===v){Q=!0,v=R,E=$;break}if(pe===E){Q=!0,E=R,v=$;break}pe=pe.sibling}if(!Q){for(pe=$.child;pe;){if(pe===v){Q=!0,v=$,E=R;break}if(pe===E){Q=!0,E=$,v=R;break}pe=pe.sibling}if(!Q)throw Error(u(189))}}if(v.alternate!==E)throw Error(u(190))}if(v.tag!==3)throw Error(u(188));return v.stateNode.current===v?l:d}function B(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=B(l),d!==null)return d;l=l.sibling}return null}var Z=Object.assign,X=Symbol.for("react.element"),J=Symbol.for("react.transitional.element"),ce=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),ae=Symbol.for("react.strict_mode"),Me=Symbol.for("react.profiler"),Ae=Symbol.for("react.consumer"),we=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),Rt=Symbol.for("react.activity"),Pt=Symbol.for("react.memo_cache_sentinel"),$t=Symbol.iterator;function Zt(l){return l===null||typeof l!="object"?null:(l=$t&&l[$t]||l["@@iterator"],typeof l=="function"?l:null)}var cn=Symbol.for("react.client.reference");function ln(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===cn?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case ee:return"Fragment";case Me:return"Profiler";case ae:return"StrictMode";case Se:return"Suspense";case Fe:return"SuspenseList";case Rt:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case ce:return"Portal";case we:return l.displayName||"Context";case Ae:return(l._context.displayName||"Context")+".Consumer";case xe:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Ue:return d=l.displayName||null,d!==null?d:ln(l.type)||"Memo";case it:d=l._payload,l=l._init;try{return ln(l(d))}catch{}}return null}var xn=Array.isArray,Ge=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe={pending:!1,data:null,method:null,action:null},Bt=[],jt=-1;function Oe(l){return{current:l}}function pt(l){0>jt||(l.current=Bt[jt],Bt[jt]=null,jt--)}function Mt(l,d){jt++,Bt[jt]=l.current,l.current=d}var It=Oe(null),Nt=Oe(null),Ft=Oe(null),At=Oe(null);function un(l,d){switch(Mt(Ft,d),Mt(Nt,l),Mt(It,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?Wh(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=Wh(d),l=c_(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}pt(It),Mt(It,l)}function Cn(){pt(It),pt(Nt),pt(Ft)}function Dn(l){l.memoizedState!==null&&Mt(At,l);var d=It.current,v=c_(d,l.type);d!==v&&(Mt(Nt,l),Mt(It,v))}function Wn(l){Nt.current===l&&(pt(It),pt(Nt)),At.current===l&&(pt(At),qf._currentValue=qe)}var Bn,Cr;function bi(l){if(Bn===void 0)try{throw Error()}catch(v){var d=v.stack.trim().match(/\n( *(at )?)/);Bn=d&&d[1]||"",Cr=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bn+l+Cr}var qr=!1;function da(l,d){if(!l||qr)return"";qr=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(d){var zt=function(){throw Error()};if(Object.defineProperty(zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(zt,[])}catch(gt){var dt=gt}Reflect.construct(l,[],zt)}else{try{zt.call()}catch(gt){dt=gt}l.call(zt.prototype)}}else{try{throw Error()}catch(gt){dt=gt}(zt=l())&&typeof zt.catch=="function"&&zt.catch(function(){})}}catch(gt){if(gt&&dt&&typeof gt.stack=="string")return[gt.stack,dt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=E.DetermineComponentFrameRoot(),Q=$[0],pe=$[1];if(Q&&pe){var je=Q.split(`
`),ut=pe.split(`
`);for(R=E=0;E<je.length&&!je[E].includes("DetermineComponentFrameRoot");)E++;for(;R<ut.length&&!ut[R].includes("DetermineComponentFrameRoot");)R++;if(E===je.length||R===ut.length)for(E=je.length-1,R=ut.length-1;1<=E&&0<=R&&je[E]!==ut[R];)R--;for(;1<=E&&0<=R;E--,R--)if(je[E]!==ut[R]){if(E!==1||R!==1)do if(E--,R--,0>R||je[E]!==ut[R]){var xt=`
`+je[E].replace(" at new "," at ");return l.displayName&&xt.includes("<anonymous>")&&(xt=xt.replace("<anonymous>",l.displayName)),xt}while(1<=E&&0<=R);break}}}finally{qr=!1,Error.prepareStackTrace=v}return(v=l?l.displayName||l.name:"")?bi(v):""}function Pi(l,d){switch(l.tag){case 26:case 27:case 5:return bi(l.type);case 16:return bi("Lazy");case 13:return l.child!==d&&d!==null?bi("Suspense Fallback"):bi("Suspense");case 19:return bi("SuspenseList");case 0:case 15:return da(l.type,!1);case 11:return da(l.type.render,!1);case 1:return da(l.type,!0);case 31:return bi("Activity");default:return""}}function Ao(l){try{var d="",v=null;do d+=Pi(l,v),v=l,l=l.return;while(l);return d}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var Fs=Object.prototype.hasOwnProperty,Us=e.unstable_scheduleCallback,Co=e.unstable_cancelCallback,Mo=e.unstable_shouldYield,Kl=e.unstable_requestPaint,na=e.unstable_now,Xa=e.unstable_getCurrentPriorityLevel,Xe=e.unstable_ImmediatePriority,se=e.unstable_UserBlockingPriority,oe=e.unstable_NormalPriority,ge=e.unstable_LowPriority,Re=e.unstable_IdlePriority,$e=e.log,et=e.unstable_setDisableYieldValue,He=null,Be=null;function tt(l){if(typeof $e=="function"&&et(l),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(He,l)}catch{}}var vt=Math.clz32?Math.clz32:an,_t=Math.log,Xt=Math.LN2;function an(l){return l>>>=0,l===0?32:31-(_t(l)/Xt|0)|0}var Sn=256,pi=262144,ti=4194304;function Ke(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ei(l,d,v){var E=l.pendingLanes;if(E===0)return 0;var R=0,$=l.suspendedLanes,Q=l.pingedLanes;l=l.warmLanes;var pe=E&134217727;return pe!==0?(E=pe&~$,E!==0?R=Ke(E):(Q&=pe,Q!==0?R=Ke(Q):v||(v=pe&~l,v!==0&&(R=Ke(v))))):(pe=E&~$,pe!==0?R=Ke(pe):Q!==0?R=Ke(Q):v||(v=E&~l,v!==0&&(R=Ke(v)))),R===0?0:d!==0&&d!==R&&(d&$)===0&&($=R&-R,v=d&-d,$>=v||$===32&&(v&4194048)!==0)?d:R}function Mr(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function Mn(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ai(){var l=ti;return ti<<=1,(ti&62914560)===0&&(ti=4194304),l}function Gr(l){for(var d=[],v=0;31>v;v++)d.push(l);return d}function xi(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function hr(l,d,v,E,R,$){var Q=l.pendingLanes;l.pendingLanes=v,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=v,l.entangledLanes&=v,l.errorRecoveryDisabledLanes&=v,l.shellSuspendCounter=0;var pe=l.entanglements,je=l.expirationTimes,ut=l.hiddenUpdates;for(v=Q&~v;0<v;){var xt=31-vt(v),zt=1<<xt;pe[xt]=0,je[xt]=-1;var dt=ut[xt];if(dt!==null)for(ut[xt]=null,xt=0;xt<dt.length;xt++){var gt=dt[xt];gt!==null&&(gt.lane&=-536870913)}v&=~zt}E!==0&&Di(l,E,0),$!==0&&R===0&&l.tag!==0&&(l.suspendedLanes|=$&~(Q&~d))}function Di(l,d,v){l.pendingLanes|=d,l.suspendedLanes&=~d;var E=31-vt(d);l.entangledLanes|=d,l.entanglements[E]=l.entanglements[E]|1073741824|v&261930}function zr(l,d){var v=l.entangledLanes|=d;for(l=l.entanglements;v;){var E=31-vt(v),R=1<<E;R&d|l[E]&d&&(l[E]|=d),v&=~R}}function qc(l,d){var v=d&-d;return v=(v&42)!==0?1:Ta(v),(v&(l.suspendedLanes|d))!==0?0:v}function Ta(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function ot(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function fa(){var l=mt.p;return l!==0?l:(l=window.event,l===void 0?32:Wd(l.type))}function pa(l,d){var v=mt.p;try{return mt.p=l,d()}finally{mt.p=v}}var zo=Math.random().toString(36).slice(2),Li="__reactFiber$"+zo,Lt="__reactProps$"+zo,zn="__reactContainer$"+zo,En="__reactEvents$"+zo,Ya="__reactListeners$"+zo,xh="__reactHandles$"+zo,ps="__reactResources$"+zo,In="__reactMarker$"+zo;function Jl(l){delete l[Li],delete l[Lt],delete l[En],delete l[Ya],delete l[xh]}function Zo(l){var d=l[Li];if(d)return d;for(var v=l.parentNode;v;){if(d=v[zn]||v[Li]){if(v=d.alternate,d.child!==null||v!==null&&v.child!==null)for(l=Wp(l);l!==null;){if(v=l[Li])return v;l=Wp(l)}return d}l=v,v=l.parentNode}return null}function Vs(l){if(l=l[Li]||l[zn]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function _o(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(u(33))}function ms(l){var d=l[ps];return d||(d=l[ps]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function dr(l){l[In]=!0}var Gc=new Set,Ea={};function ri(l,d){qo(l,d),qo(l+"Capture",d)}function qo(l,d){for(Ea[l]=d,l=0;l<d.length;l++)Gc.add(d[l])}var gs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ql={},Zs={};function $a(l){return Fs.call(Zs,l)?!0:Fs.call(Ql,l)?!1:gs.test(l)?Zs[l]=!0:(Ql[l]=!0,!1)}function ai(l,d,v){if($a(d))if(v===null)l.removeAttribute(d);else{switch(typeof v){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var E=d.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+v)}}function wi(l,d,v){if(v===null)l.removeAttribute(d);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+v)}}function ja(l,d,v,E){if(E===null)l.removeAttribute(v);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(v);return}l.setAttributeNS(d,v,""+E)}}function Xn(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function vl(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function wh(l,d,v){var E=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var R=E.get,$=E.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return R.call(this)},set:function(Q){v=""+Q,$.call(this,Q)}}),Object.defineProperty(l,d,{enumerable:E.enumerable}),{getValue:function(){return v},setValue:function(Q){v=""+Q},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Nn(l){if(!l._valueTracker){var d=vl(l)?"checked":"value";l._valueTracker=wh(l,d,""+l[d])}}function fr(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var v=d.getValue(),E="";return l&&(E=vl(l)?l.checked?"true":"false":l.value),l=E,l!==v?(d.setValue(l),!0):!1}function ec(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var wu=/[\n"\\]/g;function Xi(l){return l.replace(wu,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Su(l,d,v,E,R,$,Q,pe){l.name="",Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?l.type=Q:l.removeAttribute("type"),d!=null?Q==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Xn(d)):l.value!==""+Xn(d)&&(l.value=""+Xn(d)):Q!=="submit"&&Q!=="reset"||l.removeAttribute("value"),d!=null?Go(l,Q,Xn(d)):v!=null?Go(l,Q,Xn(v)):E!=null&&l.removeAttribute("value"),R==null&&$!=null&&(l.defaultChecked=!!$),R!=null&&(l.checked=R&&typeof R!="function"&&typeof R!="symbol"),pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?l.name=""+Xn(pe):l.removeAttribute("name")}function tc(l,d,v,E,R,$,Q,pe){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(l.type=$),d!=null||v!=null){if(!($!=="submit"&&$!=="reset"||d!=null)){Nn(l);return}v=v!=null?""+Xn(v):"",d=d!=null?""+Xn(d):v,pe||d===l.value||(l.value=d),l.defaultValue=d}E=E??R,E=typeof E!="function"&&typeof E!="symbol"&&!!E,l.checked=pe?l.checked:!!E,l.defaultChecked=!!E,Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(l.name=Q),Nn(l)}function Go(l,d,v){d==="number"&&ec(l.ownerDocument)===l||l.defaultValue===""+v||(l.defaultValue=""+v)}function Vi(l,d,v,E){if(l=l.options,d){d={};for(var R=0;R<v.length;R++)d["$"+v[R]]=!0;for(v=0;v<l.length;v++)R=d.hasOwnProperty("$"+l[v].value),l[v].selected!==R&&(l[v].selected=R),R&&E&&(l[v].defaultSelected=!0)}else{for(v=""+Xn(v),d=null,R=0;R<l.length;R++){if(l[R].value===v){l[R].selected=!0,E&&(l[R].defaultSelected=!0);return}d!==null||l[R].disabled||(d=l[R])}d!==null&&(d.selected=!0)}}function bl(l,d,v){if(d!=null&&(d=""+Xn(d),d!==l.value&&(l.value=d),v==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=v!=null?""+Xn(v):""}function ys(l,d,v,E){if(d==null){if(E!=null){if(v!=null)throw Error(u(92));if(xn(E)){if(1<E.length)throw Error(u(93));E=E[0]}v=E}v==null&&(v=""),d=v}v=Xn(d),l.defaultValue=v,E=l.textContent,E===v&&E!==""&&E!==null&&(l.value=E),Nn(l)}function vo(l,d){if(d){var v=l.firstChild;if(v&&v===l.lastChild&&v.nodeType===3){v.nodeValue=d;return}}l.textContent=d}var Sh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ho(l,d,v){var E=d.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?E?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":E?l.setProperty(d,v):typeof v!="number"||v===0||Sh.has(d)?d==="float"?l.cssFloat=v:l[d]=(""+v).trim():l[d]=v+"px"}function Hc(l,d,v){if(d!=null&&typeof d!="object")throw Error(u(62));if(l=l.style,v!=null){for(var E in v)!v.hasOwnProperty(E)||d!=null&&d.hasOwnProperty(E)||(E.indexOf("--")===0?l.setProperty(E,""):E==="float"?l.cssFloat="":l[E]="");for(var R in d)E=d[R],d.hasOwnProperty(R)&&v[R]!==E&&Ho(l,R,E)}else for(var $ in d)d.hasOwnProperty($)&&Ho(l,$,d[$])}function qs(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ln(l){return xl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Ka(){}var Th=null;function nc(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Hr=null,hn=null;function li(l){var d=Vs(l);if(d&&(l=d.stateNode)){var v=l[Lt]||null;e:switch(l=d.stateNode,d.type){case"input":if(Su(l,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),d=v.name,v.type==="radio"&&d!=null){for(v=l;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Xi(""+d)+'"][type="radio"]'),d=0;d<v.length;d++){var E=v[d];if(E!==l&&E.form===l.form){var R=E[Lt]||null;if(!R)throw Error(u(90));Su(E,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(d=0;d<v.length;d++)E=v[d],E.form===l.form&&fr(E)}break e;case"textarea":bl(l,v.value,v.defaultValue);break e;case"select":d=v.value,d!=null&&Vi(l,!!v.multiple,d,!1)}}}var Jt=!1;function Mi(l,d,v){if(Jt)return l(d,v);Jt=!0;try{var E=l(d);return E}finally{if(Jt=!1,(Hr!==null||hn!==null)&&(Bp(),Hr&&(d=Hr,l=hn,hn=Hr=null,li(d),l)))for(d=0;d<l.length;d++)li(l[d])}}function Ja(l,d){var v=l.stateNode;if(v===null)return null;var E=v[Lt]||null;if(E===null)return null;v=E[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(l=l.type,E=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!E;break e;default:l=!1}if(l)return null;if(v&&typeof v!="function")throw Error(u(231,d,typeof v));return v}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ma=!1;if(Ji)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){ma=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{ma=!1}var Ba=null,Qa=null,Un=null;function eo(){if(Un)return Un;var l,d=Qa,v=d.length,E,R="value"in Ba?Ba.value:Ba.textContent,$=R.length;for(l=0;l<v&&d[l]===R[l];l++);var Q=v-l;for(E=1;E<=Q&&d[v-E]===R[$-E];E++);return Un=R.slice(l,1<E?1-E:void 0)}function to(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function wl(){return!0}function Fa(){return!1}function Ir(l){function d(v,E,R,$,Q){this._reactName=v,this._targetInst=R,this.type=E,this.nativeEvent=$,this.target=Q,this.currentTarget=null;for(var pe in l)l.hasOwnProperty(pe)&&(v=l[pe],this[pe]=v?v($):$[pe]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?wl:Fa,this.isPropagationStopped=Fa,this}return Z(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),d}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tu=Ir(ga),Sl=Z({},ga,{view:0,detail:0}),Zn=Ir(Sl),zi,ia,$n,kn=Z({},Sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cu,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==$n&&($n&&l.type==="mousemove"?(zi=l.screenX-$n.screenX,ia=l.screenY-$n.screenY):ia=zi=0,$n=l),zi)},movementY:function(l){return"movementY"in l?l.movementY:ia}}),ic=Ir(kn),Kn=Z({},kn,{dataTransfer:0}),Eu=Ir(Kn),bo=Z({},Sl,{relatedTarget:0}),Tl=Ir(bo),El=Z({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),Eh=Ir(El),Au=Z({},ga,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Io=Ir(Au),mp=Z({},ga,{data:0}),Ah=Ir(mp),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gs(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Yi[l])?!!d[l]:!1}function Cu(){return Gs}var Wc=Z({},Sl,{key:function(l){if(l.key){var d=xr[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=to(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Xo[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cu,charCode:function(l){return l.type==="keypress"?to(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?to(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),rr=Ir(Wc),sf=Z({},kn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ch=Ir(sf),Mh=Z({},Sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cu}),gp=Ir(Mh),rc=Z({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mu=Ir(rc),Hs=Z({},kn,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Ws=Ir(Hs),zu=Z({},ga,{newState:0,oldState:0}),_s=Ir(zu),ya=[9,13,27,32],pr=Ji&&"CompositionEvent"in window,ac=null;Ji&&"documentMode"in document&&(ac=document.documentMode);var Xc=Ji&&"TextEvent"in window&&!ac,Al=Ji&&(!pr||ac&&8<ac&&11>=ac),vs=" ",lf=!1;function Iu(l,d){switch(l){case"keyup":return ya.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vd(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Yo=!1;function no(l,d){switch(l){case"compositionend":return vd(d);case"keypress":return d.which!==32?null:(lf=!0,vs);case"textInput":return l=d.data,l===vs&&lf?null:l;default:return null}}function oc(l,d){if(Yo)return l==="compositionend"||!pr&&Iu(l,d)?(l=eo(),Un=Qa=Ba=null,Yo=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Al&&d.locale!=="ko"?null:d.data;default:return null}}var cf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ko(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!cf[l.type]:d==="textarea"}function zh(l,d,v,E){Hr?hn?hn.push(E):hn=[E]:Hr=E,d=Zp(d,"onChange"),0<d.length&&(v=new Tu("onChange","change",null,v,E),l.push({event:v,listeners:d}))}var Po=null,Yc=null;function Kc(l){M0(l,0)}function Jc(l){var d=_o(l);if(fr(d))return l}function Ko(l,d){if(l==="change")return d}var bd=!1;if(Ji){var Do;if(Ji){var Jo="oninput"in document;if(!Jo){var xd=document.createElement("div");xd.setAttribute("oninput","return;"),Jo=typeof xd.oninput=="function"}Do=Jo}else Do=!1;bd=Do&&(!document.documentMode||9<document.documentMode)}function sc(){Po&&(Po.detachEvent("onpropertychange",uf),Yc=Po=null)}function uf(l){if(l.propertyName==="value"&&Jc(Yc)){var d=[];zh(d,Yc,l,nc(l)),Mi(Kc,d)}}function Xs(l,d,v){l==="focusin"?(sc(),Po=d,Yc=v,Po.attachEvent("onpropertychange",uf)):l==="focusout"&&sc()}function hf(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Jc(Yc)}function bs(l,d){if(l==="click")return Jc(d)}function df(l,d){if(l==="input"||l==="change")return Jc(d)}function Qo(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var _a=typeof Object.is=="function"?Object.is:Qo;function Ys(l,d){if(_a(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var v=Object.keys(l),E=Object.keys(d);if(v.length!==E.length)return!1;for(E=0;E<v.length;E++){var R=v[E];if(!Fs.call(d,R)||!_a(l[R],d[R]))return!1}return!0}function io(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Cl(l,d){var v=io(l);l=0;for(var E;v;){if(v.nodeType===3){if(E=l+v.textContent.length,l<=d&&E>=d)return{node:v,offset:d-l};l=E}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=io(v)}}function Qc(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?Qc(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function lc(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=ec(l.document);d instanceof l.HTMLIFrameElement;){try{var v=typeof d.contentWindow.location.href=="string"}catch{v=!1}if(v)l=d.contentWindow;else break;d=ec(l.document)}return d}function xs(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var cc=Ji&&"documentMode"in document&&11>=document.documentMode,ro=null,eu=null,ku=null,uc=!1;function ff(l,d,v){var E=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;uc||ro==null||ro!==ec(E)||(E=ro,"selectionStart"in E&&xs(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),ku&&Ys(ku,E)||(ku=E,E=Zp(eu,"onSelect"),0<E.length&&(d=new Tu("onSelect","select",null,d,v),l.push({event:d,listeners:E}),d.target=ro)))}function Ml(l,d){var v={};return v[l.toLowerCase()]=d.toLowerCase(),v["Webkit"+l]="webkit"+d,v["Moz"+l]="moz"+d,v}var hc={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionrun:Ml("Transition","TransitionRun"),transitionstart:Ml("Transition","TransitionStart"),transitioncancel:Ml("Transition","TransitionCancel"),transitionend:Ml("Transition","TransitionEnd")},Ih={},ci={};Ji&&(ci=document.createElement("div").style,"AnimationEvent"in window||(delete hc.animationend.animation,delete hc.animationiteration.animation,delete hc.animationstart.animation),"TransitionEvent"in window||delete hc.transitionend.transition);function Wr(l){if(Ih[l])return Ih[l];if(!hc[l])return l;var d=hc[l],v;for(v in d)if(d.hasOwnProperty(v)&&v in ci)return Ih[l]=d[v];return l}var zl=Wr("animationend"),Pu=Wr("animationiteration"),dc=Wr("animationstart"),fc=Wr("transitionrun"),tu=Wr("transitionstart"),nu=Wr("transitioncancel"),va=Wr("transitionend"),wd=new Map,Ks="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ks.push("scrollEnd");function ao(l,d){wd.set(l,d),ri(d,[l])}var es=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ua=[],ba=0,Il=0;function kl(){for(var l=ba,d=Il=ba=0;d<l;){var v=Ua[d];Ua[d++]=null;var E=Ua[d];Ua[d++]=null;var R=Ua[d];Ua[d++]=null;var $=Ua[d];if(Ua[d++]=null,E!==null&&R!==null){var Q=E.pending;Q===null?R.next=R:(R.next=Q.next,Q.next=R),E.pending=R}$!==0&&pc(v,R,$)}}function Js(l,d,v,E){Ua[ba++]=l,Ua[ba++]=d,Ua[ba++]=v,Ua[ba++]=E,Il|=E,l.lanes|=E,l=l.alternate,l!==null&&(l.lanes|=E)}function Pl(l,d,v,E){return Js(l,d,v,E),mc(l)}function Va(l,d){return Js(l,null,null,d),mc(l)}function pc(l,d,v){l.lanes|=v;var E=l.alternate;E!==null&&(E.lanes|=v);for(var R=!1,$=l.return;$!==null;)$.childLanes|=v,E=$.alternate,E!==null&&(E.childLanes|=v),$.tag===22&&(l=$.stateNode,l===null||l._visibility&1||(R=!0)),l=$,$=$.return;return l.tag===3?($=l.stateNode,R&&d!==null&&(R=31-vt(v),l=$.hiddenUpdates,E=l[R],E===null?l[R]=[d]:E.push(d),d.lane=v|536870912),$):null}function mc(l){if(50<jp)throw jp=0,Hy=null,Error(u(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Rn={};function kh(l,d,v,E){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oo(l,d,v,E){return new kh(l,d,v,E)}function Du(l){return l=l.prototype,!(!l||!l.isReactComponent)}function so(l,d){var v=l.alternate;return v===null?(v=oo(l.tag,d,l.key,l.mode),v.elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=d,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=l.flags&65011712,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,d=l.dependencies,v.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v.refCleanup=l.refCleanup,v}function Sd(l,d){l.flags&=65011714;var v=l.alternate;return v===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=v.childLanes,l.lanes=v.lanes,l.child=v.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=v.memoizedProps,l.memoizedState=v.memoizedState,l.updateQueue=v.updateQueue,l.type=v.type,d=v.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Lu(l,d,v,E,R,$){var Q=0;if(E=l,typeof l=="function")Du(l)&&(Q=1);else if(typeof l=="string")Q=Lg(l,v,It.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case Rt:return l=oo(31,v,d,R),l.elementType=Rt,l.lanes=$,l;case ee:return Dl(v.children,R,$,d);case ae:Q=8,R|=24;break;case Me:return l=oo(12,v,d,R|2),l.elementType=Me,l.lanes=$,l;case Se:return l=oo(13,v,d,R),l.elementType=Se,l.lanes=$,l;case Fe:return l=oo(19,v,d,R),l.elementType=Fe,l.lanes=$,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case we:Q=10;break e;case Ae:Q=9;break e;case xe:Q=11;break e;case Ue:Q=14;break e;case it:Q=16,E=null;break e}Q=29,v=Error(u(130,l===null?"null":typeof l,"")),E=null}return d=oo(Q,v,d,R),d.elementType=l,d.type=E,d.lanes=$,d}function Dl(l,d,v,E){return l=oo(7,l,E,d),l.lanes=v,l}function Ph(l,d,v){return l=oo(6,l,null,d),l.lanes=v,l}function Ru(l){var d=oo(18,null,null,0);return d.stateNode=l,d}function Ll(l,d,v){return d=oo(4,l.children!==null?l.children:[],l.key,d),d.lanes=v,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var g=new WeakMap;function T(l,d){if(typeof l=="object"&&l!==null){var v=g.get(l);return v!==void 0?v:(d={value:l,source:d,stack:Ao(d)},g.set(l,d),d)}return{value:l,source:d,stack:Ao(d)}}var P=[],U=0,K=null,he=0,De=[],We=0,ht=null,Ct=1,Wt="";function gn(l,d){P[U++]=he,P[U++]=K,K=l,he=d}function qn(l,d,v){De[We++]=Ct,De[We++]=Wt,De[We++]=ht,ht=l;var E=Ct;l=Wt;var R=32-vt(E)-1;E&=~(1<<R),v+=1;var $=32-vt(d)+R;if(30<$){var Q=R-R%5;$=(E&(1<<Q)-1).toString(32),E>>=Q,R-=Q,Ct=1<<32-vt(d)+R|v<<R|E,Wt=$+l}else Ct=1<<$|v<<R|E,Wt=l}function kr(l){l.return!==null&&(gn(l,1),qn(l,1,0))}function mr(l){for(;l===K;)K=P[--U],P[U]=null,he=P[--U],P[U]=null;for(;l===ht;)ht=De[--We],De[We]=null,Wt=De[--We],De[We]=null,Ct=De[--We],De[We]=null}function lo(l,d){De[We++]=Ct,De[We++]=Wt,De[We++]=ht,Ct=d.id,Wt=d.overflow,ht=l}var Ci=null,ui=null,Jn=!1,Qs=null,xo=!1,er=Error(u(519));function co(l){var d=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw el(T(d,l)),er}function Za(l){var d=l.stateNode,v=l.type,E=l.memoizedProps;switch(d[Li]=l,d[Lt]=E,v){case"dialog":yi("cancel",d),yi("close",d);break;case"iframe":case"object":case"embed":yi("load",d);break;case"video":case"audio":for(v=0;v<Hh.length;v++)yi(Hh[v],d);break;case"source":yi("error",d);break;case"img":case"image":case"link":yi("error",d),yi("load",d);break;case"details":yi("toggle",d);break;case"input":yi("invalid",d),tc(d,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":yi("invalid",d);break;case"textarea":yi("invalid",d),ys(d,E.value,E.defaultValue,E.children)}v=E.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||d.textContent===""+v||E.suppressHydrationWarning===!0||s_(d.textContent,v)?(E.popover!=null&&(yi("beforetoggle",d),yi("toggle",d)),E.onScroll!=null&&yi("scroll",d),E.onScrollEnd!=null&&yi("scrollend",d),E.onClick!=null&&(d.onclick=Ka),d=!0):d=!1,d||co(l,!0)}function ar(l){for(Ci=l.return;Ci;)switch(Ci.tag){case 5:case 31:case 13:xo=!1;return;case 27:case 3:xo=!0;return;default:Ci=Ci.return}}function wo(l){if(l!==Ci)return!1;if(!Jn)return ar(l),Jn=!0,!1;var d=l.tag,v;if((v=d!==3&&d!==27)&&((v=d===5)&&(v=l.type,v=!(v!=="form"&&v!=="button")||Cg(l.type,l.memoizedProps)),v=!v),v&&ui&&co(l),ar(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(317));ui=Da(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(317));ui=Da(l)}else d===27?(d=ui,Yh(l.type)?(l=cs,cs=null,ui=l):ui=d):ui=Ci?dl(l.stateNode.nextSibling):null;return!0}function ws(){ui=Ci=null,Jn=!1}function Ss(){var l=Qs;return l!==null&&(Ds===null?Ds=l:Ds.push.apply(Ds,l),Qs=null),l}function el(l){Qs===null?Qs=[l]:Qs.push(l)}var ts=Oe(null),So=null,Ts=null;function gc(l,d,v){Mt(ts,d._currentValue),d._currentValue=v}function Rl(l){l._currentValue=ts.current,pt(ts)}function pf(l,d,v){for(;l!==null;){var E=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,E!==null&&(E.childLanes|=d)):E!==null&&(E.childLanes&d)!==d&&(E.childLanes|=d),l===v)break;l=l.return}}function mf(l,d,v,E){var R=l.child;for(R!==null&&(R.return=l);R!==null;){var $=R.dependencies;if($!==null){var Q=R.child;$=$.firstContext;e:for(;$!==null;){var pe=$;$=R;for(var je=0;je<d.length;je++)if(pe.context===d[je]){$.lanes|=v,pe=$.alternate,pe!==null&&(pe.lanes|=v),pf($.return,v,l),E||(Q=null);break e}$=pe.next}}else if(R.tag===18){if(Q=R.return,Q===null)throw Error(u(341));Q.lanes|=v,$=Q.alternate,$!==null&&($.lanes|=v),pf(Q,v,l),Q=null}else Q=R.child;if(Q!==null)Q.return=R;else for(Q=R;Q!==null;){if(Q===l){Q=null;break}if(R=Q.sibling,R!==null){R.return=Q.return,Q=R;break}Q=Q.return}R=Q}}function ns(l,d,v,E){l=null;for(var R=d,$=!1;R!==null;){if(!$){if((R.flags&524288)!==0)$=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var Q=R.alternate;if(Q===null)throw Error(u(387));if(Q=Q.memoizedProps,Q!==null){var pe=R.type;_a(R.pendingProps.value,Q.value)||(l!==null?l.push(pe):l=[pe])}}else if(R===At.current){if(Q=R.alternate,Q===null)throw Error(u(387));Q.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(l!==null?l.push(qf):l=[qf])}R=R.return}l!==null&&mf(d,l,v,E),d.flags|=262144}function Dh(l){for(l=l.firstContext;l!==null;){if(!_a(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function yc(l){So=l,Ts=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Xr(l){return gf(So,l)}function Td(l,d){return So===null&&yc(l),gf(l,d)}function gf(l,d){var v=d._currentValue;if(d={context:d,memoizedValue:v,next:null},Ts===null){if(l===null)throw Error(u(308));Ts=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Ts=Ts.next=d;return v}var yp=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(v,E){l.push(E)}};this.abort=function(){d.aborted=!0,l.forEach(function(v){return v()})}},Um=e.unstable_scheduleCallback,_p=e.unstable_NormalPriority,Br={$$typeof:we,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ol(){return{controller:new yp,data:new Map,refCount:0}}function Lh(l){l.refCount--,l.refCount===0&&Um(_p,function(){l.controller.abort()})}var uo=null,is=0,Ou=0,ho=null;function Iy(l,d){if(uo===null){var v=uo=[];is=0,Ou=n_(),ho={status:"pending",value:void 0,then:function(E){v.push(E)}}}return is++,d.then(Rh,Rh),d}function Rh(){if(--is===0&&uo!==null){ho!==null&&(ho.status="fulfilled");var l=uo;uo=null,Ou=0,ho=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function Ed(l,d){var v=[],E={status:"pending",value:null,reason:null,then:function(R){v.push(R)}};return l.then(function(){E.status="fulfilled",E.value=d;for(var R=0;R<v.length;R++)(0,v[R])(d)},function(R){for(E.status="rejected",E.reason=R,R=0;R<v.length;R++)(0,v[R])(void 0)}),E}var xa=Ge.S;Ge.S=function(l,d){h0=na(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Iy(l,d),xa!==null&&xa(l,d)};var tl=Oe(null);function yf(){var l=tl.current;return l!==null?l:_r.pooledCache}function _f(l,d){d===null?Mt(tl,tl.current):Mt(tl,d.pool)}function Vm(){var l=yf();return l===null?null:{parent:Br._currentValue,pool:l}}var nl=Error(u(460)),iu=Error(u(474)),Lo=Error(u(542)),Yt={then:function(){}};function Ad(l){return l=l.status,l==="fulfilled"||l==="rejected"}function vf(l,d,v){switch(v=l[v],v===void 0?l.push(d):v!==d&&(d.then(Ka,Ka),d=v),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,bf(l),l;default:if(typeof d.status=="string")d.then(Ka,Ka);else{if(l=_r,l!==null&&100<l.shellSuspendCounter)throw Error(u(482));l=d,l.status="pending",l.then(function(E){if(d.status==="pending"){var R=d;R.status="fulfilled",R.value=E}},function(E){if(d.status==="pending"){var R=d;R.status="rejected",R.reason=E}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,bf(l),l}throw il=d,nl}}function Es(l){try{var d=l._init;return d(l._payload)}catch(v){throw v!==null&&typeof v=="object"&&typeof v.then=="function"?(il=v,nl):v}}var il=null;function Oh(){if(il===null)throw Error(u(459));var l=il;return il=null,l}function bf(l){if(l===nl||l===Lo)throw Error(u(483))}var Nl=null,Nu=0;function Cd(l){var d=Nu;return Nu+=1,Nl===null&&(Nl=[]),vf(Nl,l,d)}function $l(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function xf(l,d){throw d.$$typeof===X?Error(u(525)):(l=Object.prototype.toString.call(d),Error(u(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function Md(l){function d(Ye,Ze){if(l){var lt=Ye.deletions;lt===null?(Ye.deletions=[Ze],Ye.flags|=16):lt.push(Ze)}}function v(Ye,Ze){if(!l)return null;for(;Ze!==null;)d(Ye,Ze),Ze=Ze.sibling;return null}function E(Ye){for(var Ze=new Map;Ye!==null;)Ye.key!==null?Ze.set(Ye.key,Ye):Ze.set(Ye.index,Ye),Ye=Ye.sibling;return Ze}function R(Ye,Ze){return Ye=so(Ye,Ze),Ye.index=0,Ye.sibling=null,Ye}function $(Ye,Ze,lt){return Ye.index=lt,l?(lt=Ye.alternate,lt!==null?(lt=lt.index,lt<Ze?(Ye.flags|=67108866,Ze):lt):(Ye.flags|=67108866,Ze)):(Ye.flags|=1048576,Ze)}function Q(Ye){return l&&Ye.alternate===null&&(Ye.flags|=67108866),Ye}function pe(Ye,Ze,lt,Tt){return Ze===null||Ze.tag!==6?(Ze=Ph(lt,Ye.mode,Tt),Ze.return=Ye,Ze):(Ze=R(Ze,lt),Ze.return=Ye,Ze)}function je(Ye,Ze,lt,Tt){var Tn=lt.type;return Tn===ee?xt(Ye,Ze,lt.props.children,Tt,lt.key):Ze!==null&&(Ze.elementType===Tn||typeof Tn=="object"&&Tn!==null&&Tn.$$typeof===it&&Es(Tn)===Ze.type)?(Ze=R(Ze,lt.props),$l(Ze,lt),Ze.return=Ye,Ze):(Ze=Lu(lt.type,lt.key,lt.props,null,Ye.mode,Tt),$l(Ze,lt),Ze.return=Ye,Ze)}function ut(Ye,Ze,lt,Tt){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==lt.containerInfo||Ze.stateNode.implementation!==lt.implementation?(Ze=Ll(lt,Ye.mode,Tt),Ze.return=Ye,Ze):(Ze=R(Ze,lt.children||[]),Ze.return=Ye,Ze)}function xt(Ye,Ze,lt,Tt,Tn){return Ze===null||Ze.tag!==7?(Ze=Dl(lt,Ye.mode,Tt,Tn),Ze.return=Ye,Ze):(Ze=R(Ze,lt),Ze.return=Ye,Ze)}function zt(Ye,Ze,lt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=Ph(""+Ze,Ye.mode,lt),Ze.return=Ye,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case J:return lt=Lu(Ze.type,Ze.key,Ze.props,null,Ye.mode,lt),$l(lt,Ze),lt.return=Ye,lt;case ce:return Ze=Ll(Ze,Ye.mode,lt),Ze.return=Ye,Ze;case it:return Ze=Es(Ze),zt(Ye,Ze,lt)}if(xn(Ze)||Zt(Ze))return Ze=Dl(Ze,Ye.mode,lt,null),Ze.return=Ye,Ze;if(typeof Ze.then=="function")return zt(Ye,Cd(Ze),lt);if(Ze.$$typeof===we)return zt(Ye,Td(Ye,Ze),lt);xf(Ye,Ze)}return null}function dt(Ye,Ze,lt,Tt){var Tn=Ze!==null?Ze.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Tn!==null?null:pe(Ye,Ze,""+lt,Tt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case J:return lt.key===Tn?je(Ye,Ze,lt,Tt):null;case ce:return lt.key===Tn?ut(Ye,Ze,lt,Tt):null;case it:return lt=Es(lt),dt(Ye,Ze,lt,Tt)}if(xn(lt)||Zt(lt))return Tn!==null?null:xt(Ye,Ze,lt,Tt,null);if(typeof lt.then=="function")return dt(Ye,Ze,Cd(lt),Tt);if(lt.$$typeof===we)return dt(Ye,Ze,Td(Ye,lt),Tt);xf(Ye,lt)}return null}function gt(Ye,Ze,lt,Tt,Tn){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return Ye=Ye.get(lt)||null,pe(Ze,Ye,""+Tt,Tn);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case J:return Ye=Ye.get(Tt.key===null?lt:Tt.key)||null,je(Ze,Ye,Tt,Tn);case ce:return Ye=Ye.get(Tt.key===null?lt:Tt.key)||null,ut(Ze,Ye,Tt,Tn);case it:return Tt=Es(Tt),gt(Ye,Ze,lt,Tt,Tn)}if(xn(Tt)||Zt(Tt))return Ye=Ye.get(lt)||null,xt(Ze,Ye,Tt,Tn,null);if(typeof Tt.then=="function")return gt(Ye,Ze,lt,Cd(Tt),Tn);if(Tt.$$typeof===we)return gt(Ye,Ze,lt,Td(Ze,Tt),Tn);xf(Ze,Tt)}return null}function dn(Ye,Ze,lt,Tt){for(var Tn=null,Bi=null,fn=Ze,wn=Ze=0,hi=null;fn!==null&&wn<lt.length;wn++){fn.index>wn?(hi=fn,fn=null):hi=fn.sibling;var Ni=dt(Ye,fn,lt[wn],Tt);if(Ni===null){fn===null&&(fn=hi);break}l&&fn&&Ni.alternate===null&&d(Ye,fn),Ze=$(Ni,Ze,wn),Bi===null?Tn=Ni:Bi.sibling=Ni,Bi=Ni,fn=hi}if(wn===lt.length)return v(Ye,fn),Jn&&gn(Ye,wn),Tn;if(fn===null){for(;wn<lt.length;wn++)fn=zt(Ye,lt[wn],Tt),fn!==null&&(Ze=$(fn,Ze,wn),Bi===null?Tn=fn:Bi.sibling=fn,Bi=fn);return Jn&&gn(Ye,wn),Tn}for(fn=E(fn);wn<lt.length;wn++)hi=gt(fn,Ye,wn,lt[wn],Tt),hi!==null&&(l&&hi.alternate!==null&&fn.delete(hi.key===null?wn:hi.key),Ze=$(hi,Ze,wn),Bi===null?Tn=hi:Bi.sibling=hi,Bi=hi);return l&&fn.forEach(function(rh){return d(Ye,rh)}),Jn&&gn(Ye,wn),Tn}function An(Ye,Ze,lt,Tt){if(lt==null)throw Error(u(151));for(var Tn=null,Bi=null,fn=Ze,wn=Ze=0,hi=null,Ni=lt.next();fn!==null&&!Ni.done;wn++,Ni=lt.next()){fn.index>wn?(hi=fn,fn=null):hi=fn.sibling;var rh=dt(Ye,fn,Ni.value,Tt);if(rh===null){fn===null&&(fn=hi);break}l&&fn&&rh.alternate===null&&d(Ye,fn),Ze=$(rh,Ze,wn),Bi===null?Tn=rh:Bi.sibling=rh,Bi=rh,fn=hi}if(Ni.done)return v(Ye,fn),Jn&&gn(Ye,wn),Tn;if(fn===null){for(;!Ni.done;wn++,Ni=lt.next())Ni=zt(Ye,Ni.value,Tt),Ni!==null&&(Ze=$(Ni,Ze,wn),Bi===null?Tn=Ni:Bi.sibling=Ni,Bi=Ni);return Jn&&gn(Ye,wn),Tn}for(fn=E(fn);!Ni.done;wn++,Ni=lt.next())Ni=gt(fn,Ye,wn,Ni.value,Tt),Ni!==null&&(l&&Ni.alternate!==null&&fn.delete(Ni.key===null?wn:Ni.key),Ze=$(Ni,Ze,wn),Bi===null?Tn=Ni:Bi.sibling=Ni,Bi=Ni);return l&&fn.forEach(function(z_){return d(Ye,z_)}),Jn&&gn(Ye,wn),Tn}function nr(Ye,Ze,lt,Tt){if(typeof lt=="object"&&lt!==null&&lt.type===ee&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case J:e:{for(var Tn=lt.key;Ze!==null;){if(Ze.key===Tn){if(Tn=lt.type,Tn===ee){if(Ze.tag===7){v(Ye,Ze.sibling),Tt=R(Ze,lt.props.children),Tt.return=Ye,Ye=Tt;break e}}else if(Ze.elementType===Tn||typeof Tn=="object"&&Tn!==null&&Tn.$$typeof===it&&Es(Tn)===Ze.type){v(Ye,Ze.sibling),Tt=R(Ze,lt.props),$l(Tt,lt),Tt.return=Ye,Ye=Tt;break e}v(Ye,Ze);break}else d(Ye,Ze);Ze=Ze.sibling}lt.type===ee?(Tt=Dl(lt.props.children,Ye.mode,Tt,lt.key),Tt.return=Ye,Ye=Tt):(Tt=Lu(lt.type,lt.key,lt.props,null,Ye.mode,Tt),$l(Tt,lt),Tt.return=Ye,Ye=Tt)}return Q(Ye);case ce:e:{for(Tn=lt.key;Ze!==null;){if(Ze.key===Tn)if(Ze.tag===4&&Ze.stateNode.containerInfo===lt.containerInfo&&Ze.stateNode.implementation===lt.implementation){v(Ye,Ze.sibling),Tt=R(Ze,lt.children||[]),Tt.return=Ye,Ye=Tt;break e}else{v(Ye,Ze);break}else d(Ye,Ze);Ze=Ze.sibling}Tt=Ll(lt,Ye.mode,Tt),Tt.return=Ye,Ye=Tt}return Q(Ye);case it:return lt=Es(lt),nr(Ye,Ze,lt,Tt)}if(xn(lt))return dn(Ye,Ze,lt,Tt);if(Zt(lt)){if(Tn=Zt(lt),typeof Tn!="function")throw Error(u(150));return lt=Tn.call(lt),An(Ye,Ze,lt,Tt)}if(typeof lt.then=="function")return nr(Ye,Ze,Cd(lt),Tt);if(lt.$$typeof===we)return nr(Ye,Ze,Td(Ye,lt),Tt);xf(Ye,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Ze!==null&&Ze.tag===6?(v(Ye,Ze.sibling),Tt=R(Ze,lt),Tt.return=Ye,Ye=Tt):(v(Ye,Ze),Tt=Ph(lt,Ye.mode,Tt),Tt.return=Ye,Ye=Tt),Q(Ye)):v(Ye,Ze)}return function(Ye,Ze,lt,Tt){try{Nu=0;var Tn=nr(Ye,Ze,lt,Tt);return Nl=null,Tn}catch(fn){if(fn===nl||fn===Lo)throw fn;var Bi=oo(29,fn,null,Ye.mode);return Bi.lanes=Tt,Bi.return=Ye,Bi}}}var jl=Md(!0),vp=Md(!1),Bl=!1;function wf(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zd(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Fl(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function _c(l,d,v){var E=l.updateQueue;if(E===null)return null;if(E=E.shared,(Gi&2)!==0){var R=E.pending;return R===null?d.next=d:(d.next=R.next,R.next=d),E.pending=d,d=mc(l),pc(l,null,v),d}return Js(l,E,d,v),mc(l)}function As(l,d,v){if(d=d.updateQueue,d!==null&&(d=d.shared,(v&4194048)!==0)){var E=d.lanes;E&=l.pendingLanes,v|=E,d.lanes=v,zr(l,v)}}function Ri(l,d){var v=l.updateQueue,E=l.alternate;if(E!==null&&(E=E.updateQueue,v===E)){var R=null,$=null;if(v=v.firstBaseUpdate,v!==null){do{var Q={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};$===null?R=$=Q:$=$.next=Q,v=v.next}while(v!==null);$===null?R=$=d:$=$.next=d}else R=$=d;v={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:$,shared:E.shared,callbacks:E.callbacks},l.updateQueue=v;return}l=v.lastBaseUpdate,l===null?v.firstBaseUpdate=d:l.next=d,v.lastBaseUpdate=d}var bp=!1;function vc(){if(bp){var l=ho;if(l!==null)throw l}}function ru(l,d,v,E){bp=!1;var R=l.updateQueue;Bl=!1;var $=R.firstBaseUpdate,Q=R.lastBaseUpdate,pe=R.shared.pending;if(pe!==null){R.shared.pending=null;var je=pe,ut=je.next;je.next=null,Q===null?$=ut:Q.next=ut,Q=je;var xt=l.alternate;xt!==null&&(xt=xt.updateQueue,pe=xt.lastBaseUpdate,pe!==Q&&(pe===null?xt.firstBaseUpdate=ut:pe.next=ut,xt.lastBaseUpdate=je))}if($!==null){var zt=R.baseState;Q=0,xt=ut=je=null,pe=$;do{var dt=pe.lane&-536870913,gt=dt!==pe.lane;if(gt?(gi&dt)===dt:(E&dt)===dt){dt!==0&&dt===Ou&&(bp=!0),xt!==null&&(xt=xt.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var dn=l,An=pe;dt=d;var nr=v;switch(An.tag){case 1:if(dn=An.payload,typeof dn=="function"){zt=dn.call(nr,zt,dt);break e}zt=dn;break e;case 3:dn.flags=dn.flags&-65537|128;case 0:if(dn=An.payload,dt=typeof dn=="function"?dn.call(nr,zt,dt):dn,dt==null)break e;zt=Z({},zt,dt);break e;case 2:Bl=!0}}dt=pe.callback,dt!==null&&(l.flags|=64,gt&&(l.flags|=8192),gt=R.callbacks,gt===null?R.callbacks=[dt]:gt.push(dt))}else gt={lane:dt,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},xt===null?(ut=xt=gt,je=zt):xt=xt.next=gt,Q|=dt;if(pe=pe.next,pe===null){if(pe=R.shared.pending,pe===null)break;gt=pe,pe=gt.next,gt.next=null,R.lastBaseUpdate=gt,R.shared.pending=null}}while(!0);xt===null&&(je=zt),R.baseState=je,R.firstBaseUpdate=ut,R.lastBaseUpdate=xt,$===null&&(R.shared.lanes=0),Ku|=Q,l.lanes=Q,l.memoizedState=zt}}function Id(l,d){if(typeof l!="function")throw Error(u(191,l));l.call(d)}function Sf(l,d){var v=l.callbacks;if(v!==null)for(l.callbacks=null,l=0;l<v.length;l++)Id(v[l],d)}var $u=Oe(null),kd=Oe(0);function xp(l,d){l=Yu,Mt(kd,l),Mt($u,d),Yu=l|d.baseLanes}function rs(){Mt(kd,Yu),Mt($u,$u.current)}function ju(){Yu=kd.current,pt($u),pt(kd)}var en=Oe(null),on=null;function Cs(l){var d=l.alternate;Mt(Pr,Pr.current&1),Mt(en,l),on===null&&(d===null||$u.current!==null||d.memoizedState!==null)&&(on=l)}function Nh(l){Mt(Pr,Pr.current),Mt(en,l),on===null&&(on=l)}function Pd(l){l.tag===22?(Mt(Pr,Pr.current),Mt(en,l),on===null&&(on=l)):Fr()}function Fr(){Mt(Pr,Pr.current),Mt(en,en.current)}function wr(l){pt(en),on===l&&(on=null),pt(Pr)}var Pr=Oe(0);function Dd(l){for(var d=l;d!==null;){if(d.tag===13){var v=d.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||$o(v)||aa(v)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var bc=0,Gn=null,Ii=null,Vn=null,gr=!1,Ms=!1,rl=!1,Bu=0,Fu=0,xc=null,wp=0;function or(){throw Error(u(321))}function al(l,d){if(d===null)return!1;for(var v=0;v<d.length&&v<l.length;v++)if(!_a(l[v],d[v]))return!1;return!0}function $h(l,d,v,E,R,$){return bc=$,Gn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Ge.H=l===null||l.memoizedState===null?qi:Yr,rl=!1,$=v(E,R),rl=!1,Ms&&($=Ld(d,v,E,R)),jh(l),$}function jh(l){Ge.H=Oi;var d=Ii!==null&&Ii.next!==null;if(bc=0,Vn=Ii=Gn=null,gr=!1,Fu=0,xc=null,d)throw Error(u(300));l===null||Ma||(l=l.dependencies,l!==null&&Dh(l)&&(Ma=!0))}function Ld(l,d,v,E){Gn=l;var R=0;do{if(Ms&&(xc=null),Fu=0,Ms=!1,25<=R)throw Error(u(301));if(R+=1,Vn=Ii=null,l.updateQueue!=null){var $=l.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}Ge.H=ra,$=d(v,E)}while(Ms);return $}function Rd(){var l=Ge.H,d=l.useState()[0];return d=typeof d.then=="function"?Uu(d):d,l=l.useState()[0],(Ii!==null?Ii.memoizedState:null)!==l&&(Gn.flags|=1024),d}function Od(){var l=Bu!==0;return Bu=0,l}function au(l,d,v){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~v}function wc(l){if(gr){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}gr=!1}bc=0,Vn=Ii=Gn=null,Ms=!1,Fu=Bu=0,xc=null}function qa(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?Gn.memoizedState=Vn=l:Vn=Vn.next=l,Vn}function yr(){if(Ii===null){var l=Gn.alternate;l=l!==null?l.memoizedState:null}else l=Ii.next;var d=Vn===null?Gn.memoizedState:Vn.next;if(d!==null)Vn=d,Ii=l;else{if(l===null)throw Gn.alternate===null?Error(u(467)):Error(u(310));Ii=l,l={memoizedState:Ii.memoizedState,baseState:Ii.baseState,baseQueue:Ii.baseQueue,queue:Ii.queue,next:null},Vn===null?Gn.memoizedState=Vn=l:Vn=Vn.next=l}return Vn}function Ul(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uu(l){var d=Fu;return Fu+=1,xc===null&&(xc=[]),l=vf(xc,l,d),d=Gn,(Vn===null?d.memoizedState:Vn.next)===null&&(d=d.alternate,Ge.H=d===null||d.memoizedState===null?qi:Yr),l}function Vu(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Uu(l);if(l.$$typeof===we)return Xr(l)}throw Error(u(438,String(l)))}function Bh(l){var d=null,v=Gn.updateQueue;if(v!==null&&(d=v.memoCache),d==null){var E=Gn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(d={data:E.data.map(function(R){return R.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),v===null&&(v=Ul(),Gn.updateQueue=v),v.memoCache=d,v=d.data[d.index],v===void 0)for(v=d.data[d.index]=Array(l),E=0;E<l;E++)v[E]=Pt;return d.index++,v}function ol(l,d){return typeof d=="function"?d(l):d}function S(l){var d=yr();return i(d,Ii,l)}function i(l,d,v){var E=l.queue;if(E===null)throw Error(u(311));E.lastRenderedReducer=v;var R=l.baseQueue,$=E.pending;if($!==null){if(R!==null){var Q=R.next;R.next=$.next,$.next=Q}d.baseQueue=R=$,E.pending=null}if($=l.baseState,R===null)l.memoizedState=$;else{d=R.next;var pe=Q=null,je=null,ut=d,xt=!1;do{var zt=ut.lane&-536870913;if(zt!==ut.lane?(gi&zt)===zt:(bc&zt)===zt){var dt=ut.revertLane;if(dt===0)je!==null&&(je=je.next={lane:0,revertLane:0,gesture:null,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),zt===Ou&&(xt=!0);else if((bc&dt)===dt){ut=ut.next,dt===Ou&&(xt=!0);continue}else zt={lane:0,revertLane:ut.revertLane,gesture:null,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},je===null?(pe=je=zt,Q=$):je=je.next=zt,Gn.lanes|=dt,Ku|=dt;zt=ut.action,rl&&v($,zt),$=ut.hasEagerState?ut.eagerState:v($,zt)}else dt={lane:zt,revertLane:ut.revertLane,gesture:ut.gesture,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},je===null?(pe=je=dt,Q=$):je=je.next=dt,Gn.lanes|=zt,Ku|=zt;ut=ut.next}while(ut!==null&&ut!==d);if(je===null?Q=$:je.next=pe,!_a($,l.memoizedState)&&(Ma=!0,xt&&(v=ho,v!==null)))throw v;l.memoizedState=$,l.baseState=Q,l.baseQueue=je,E.lastRenderedState=$}return R===null&&(E.lanes=0),[l.memoizedState,E.dispatch]}function h(l){var d=yr(),v=d.queue;if(v===null)throw Error(u(311));v.lastRenderedReducer=l;var E=v.dispatch,R=v.pending,$=d.memoizedState;if(R!==null){v.pending=null;var Q=R=R.next;do $=l($,Q.action),Q=Q.next;while(Q!==R);_a($,d.memoizedState)||(Ma=!0),d.memoizedState=$,d.baseQueue===null&&(d.baseState=$),v.lastRenderedState=$}return[$,E]}function y(l,d,v){var E=Gn,R=yr(),$=Jn;if($){if(v===void 0)throw Error(u(407));v=v()}else v=d();var Q=!_a((Ii||R).memoizedState,v);if(Q&&(R.memoizedState=v,Ma=!0),R=R.queue,at(M.bind(null,E,R,l),[l]),R.getSnapshot!==d||Q||Vn!==null&&Vn.memoizedState.tag&1){if(E.flags|=2048,ze(9,{destroy:void 0},A.bind(null,E,R,v,d),null),_r===null)throw Error(u(349));$||(bc&127)!==0||b(E,d,v)}return v}function b(l,d,v){l.flags|=16384,l={getSnapshot:d,value:v},d=Gn.updateQueue,d===null?(d=Ul(),Gn.updateQueue=d,d.stores=[l]):(v=d.stores,v===null?d.stores=[l]:v.push(l))}function A(l,d,v,E){d.value=v,d.getSnapshot=E,D(d)&&N(l)}function M(l,d,v){return v(function(){D(d)&&N(l)})}function D(l){var d=l.getSnapshot;l=l.value;try{var v=d();return!_a(l,v)}catch{return!0}}function N(l){var d=Va(l,2);d!==null&&Rs(d,l,2)}function F(l){var d=qa();if(typeof l=="function"){var v=l;if(l=v(),rl){tt(!0);try{v()}finally{tt(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:l},d}function q(l,d,v,E){return l.baseState=v,i(l,Ii,typeof E=="function"?E:ol)}function Y(l,d,v,E,R){if(as(l))throw Error(u(485));if(l=d.action,l!==null){var $={payload:R,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Q){$.listeners.push(Q)}};Ge.T!==null?v(!0):$.isTransition=!1,E($),v=d.pending,v===null?($.next=d.pending=$,W(d,$)):($.next=v.next,d.pending=v.next=$)}}function W(l,d){var v=d.action,E=d.payload,R=l.state;if(d.isTransition){var $=Ge.T,Q={};Ge.T=Q;try{var pe=v(R,E),je=Ge.S;je!==null&&je(Q,pe),ie(l,d,pe)}catch(ut){_e(l,d,ut)}finally{$!==null&&Q.types!==null&&($.types=Q.types),Ge.T=$}}else try{$=v(R,E),ie(l,d,$)}catch(ut){_e(l,d,ut)}}function ie(l,d,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(E){le(l,d,E)},function(E){return _e(l,d,E)}):le(l,d,v)}function le(l,d,v){d.status="fulfilled",d.value=v,be(d),l.state=v,d=l.pending,d!==null&&(v=d.next,v===d?l.pending=null:(v=v.next,d.next=v,W(l,v)))}function _e(l,d,v){var E=l.pending;if(l.pending=null,E!==null){E=E.next;do d.status="rejected",d.reason=v,be(d),d=d.next;while(d!==E)}l.action=null}function be(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function ve(l,d){return d}function Ee(l,d){if(Jn){var v=_r.formState;if(v!==null){e:{var E=Gn;if(Jn){if(ui){t:{for(var R=ui,$=xo;R.nodeType!==8;){if(!$){R=null;break t}if(R=dl(R.nextSibling),R===null){R=null;break t}}$=R.data,R=$==="F!"||$==="F"?R:null}if(R){ui=dl(R.nextSibling),E=R.data==="F!";break e}}co(E)}E=!1}E&&(d=v[0])}}return v=qa(),v.memoizedState=v.baseState=d,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ve,lastRenderedState:d},v.queue=E,v=Fh.bind(null,Gn,E),E.dispatch=v,E=F(!1),$=Oo.bind(null,Gn,!1,E.queue),E=qa(),R={state:d,dispatch:null,action:l,pending:null},E.queue=R,v=Y.bind(null,Gn,R,$,v),R.dispatch=v,E.memoizedState=l,[d,v,!1]}function Pe(l){var d=yr();return Te(d,Ii,l)}function Te(l,d,v){if(d=i(l,d,ve)[0],l=S(ol)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var E=Uu(d)}catch(Q){throw Q===nl?Lo:Q}else E=d;d=yr();var R=d.queue,$=R.dispatch;return v!==d.memoizedState&&(Gn.flags|=2048,ze(9,{destroy:void 0},ke.bind(null,R,v),null)),[E,$,l]}function ke(l,d){l.action=d}function Ne(l){var d=yr(),v=Ii;if(v!==null)return Te(d,v,l);yr(),d=d.memoizedState,v=yr();var E=v.queue.dispatch;return v.memoizedState=l,[d,E,!1]}function ze(l,d,v,E){return l={tag:l,create:v,deps:E,inst:d,next:null},d=Gn.updateQueue,d===null&&(d=Ul(),Gn.updateQueue=d),v=d.lastEffect,v===null?d.lastEffect=l.next=l:(E=v.next,v.next=l,l.next=E,d.lastEffect=l),l}function Ve(){return yr().memoizedState}function st(l,d,v,E){var R=qa();Gn.flags|=l,R.memoizedState=ze(1|d,{destroy:void 0},v,E===void 0?null:E)}function Je(l,d,v,E){var R=yr();E=E===void 0?null:E;var $=R.memoizedState.inst;Ii!==null&&E!==null&&al(E,Ii.memoizedState.deps)?R.memoizedState=ze(d,$,v,E):(Gn.flags|=l,R.memoizedState=ze(1|d,$,v,E))}function rt(l,d){st(8390656,8,l,d)}function at(l,d){Je(2048,8,l,d)}function Dt(l){Gn.flags|=4;var d=Gn.updateQueue;if(d===null)d=Ul(),Gn.updateQueue=d,d.events=[l];else{var v=d.events;v===null?d.events=[l]:v.push(l)}}function Ot(l){var d=yr().memoizedState;return Dt({ref:d,nextImpl:l}),function(){if((Gi&2)!==0)throw Error(u(440));return d.impl.apply(void 0,arguments)}}function wt(l,d){return Je(4,2,l,d)}function Ut(l,d){return Je(4,4,l,d)}function On(l,d){if(typeof d=="function"){l=l();var v=d(l);return function(){typeof v=="function"?v():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function ki(l,d,v){v=v!=null?v.concat([l]):null,Je(4,4,On.bind(null,d,l),v)}function Ki(){}function Zi(l,d){var v=yr();d=d===void 0?null:d;var E=v.memoizedState;return d!==null&&al(d,E[1])?E[0]:(v.memoizedState=[l,d],l)}function sr(l,d){var v=yr();d=d===void 0?null:d;var E=v.memoizedState;if(d!==null&&al(d,E[1]))return E[0];if(E=l(),rl){tt(!0);try{l()}finally{tt(!1)}}return v.memoizedState=[E,d],E}function $i(l,d,v){return v===void 0||(bc&1073741824)!==0&&(gi&261930)===0?l.memoizedState=d:(l.memoizedState=v,l=f0(),Gn.lanes|=l,Ku|=l,v)}function Sr(l,d,v,E){return _a(v,d)?v:$u.current!==null?(l=$i(l,v,E),_a(l,d)||(Ma=!0),l):(bc&42)===0||(bc&1073741824)!==0&&(gi&261930)===0?(Ma=!0,l.memoizedState=v):(l=f0(),Gn.lanes|=l,Ku|=l,d)}function lr(l,d,v,E,R){var $=mt.p;mt.p=$!==0&&8>$?$:8;var Q=Ge.T,pe={};Ge.T=pe,Oo(l,!1,d,v);try{var je=R(),ut=Ge.S;if(ut!==null&&ut(pe,je),je!==null&&typeof je=="object"&&typeof je.then=="function"){var xt=Ed(je,E);ll(l,d,xt,Ls(l))}else ll(l,d,E,Ls(l))}catch(zt){ll(l,d,{then:function(){},status:"rejected",reason:zt},Ls())}finally{mt.p=$,Q!==null&&pe.types!==null&&(Q.types=pe.types),Ge.T=Q}}function Aa(){}function Dr(l,d,v,E){if(l.tag!==5)throw Error(u(476));var R=Lr(l).queue;lr(l,R,d,qe,v===null?Aa:function(){return Ca(l),v(E)})}function Lr(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:qe,baseState:qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:qe},next:null};var v={};return d.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:v},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function Ca(l){var d=Lr(l);d.next===null&&(d=l.alternate.memoizedState),ll(l,d.next.queue,{},Ls())}function Vl(){return Xr(qf)}function Zl(){return yr().memoizedState}function sl(){return yr().memoizedState}function Ro(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var v=Ls();l=Fl(v);var E=_c(d,l,v);E!==null&&(Rs(E,d,v),As(E,d,v)),d={cache:Ol()},l.payload=d;return}d=d.return}}function Zu(l,d,v){var E=Ls();v={lane:E,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},as(l)?zs(d,v):(v=Pl(l,d,v,E),v!==null&&(Rs(v,l,E),Is(v,d,E)))}function Fh(l,d,v){var E=Ls();ll(l,d,v,E)}function ll(l,d,v,E){var R={lane:E,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null};if(as(l))zs(d,R);else{var $=l.alternate;if(l.lanes===0&&($===null||$.lanes===0)&&($=d.lastRenderedReducer,$!==null))try{var Q=d.lastRenderedState,pe=$(Q,v);if(R.hasEagerState=!0,R.eagerState=pe,_a(pe,Q))return Js(l,d,R,0),_r===null&&kl(),!1}catch{}if(v=Pl(l,d,R,E),v!==null)return Rs(v,l,E),Is(v,d,E),!0}return!1}function Oo(l,d,v,E){if(E={lane:2,revertLane:n_(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},as(l)){if(d)throw Error(u(479))}else d=Pl(l,v,E,2),d!==null&&Rs(d,l,2)}function as(l){var d=l.alternate;return l===Gn||d!==null&&d===Gn}function zs(l,d){Ms=gr=!0;var v=l.pending;v===null?d.next=d:(d.next=v.next,v.next=d),l.pending=d}function Is(l,d,v){if((v&4194048)!==0){var E=d.lanes;E&=l.pendingLanes,v|=E,d.lanes=v,zr(l,v)}}var Oi={readContext:Xr,use:Vu,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useLayoutEffect:or,useInsertionEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useSyncExternalStore:or,useId:or,useHostTransitionStatus:or,useFormState:or,useActionState:or,useOptimistic:or,useMemoCache:or,useCacheRefresh:or};Oi.useEffectEvent=or;var qi={readContext:Xr,use:Vu,useCallback:function(l,d){return qa().memoizedState=[l,d===void 0?null:d],l},useContext:Xr,useEffect:rt,useImperativeHandle:function(l,d,v){v=v!=null?v.concat([l]):null,st(4194308,4,On.bind(null,d,l),v)},useLayoutEffect:function(l,d){return st(4194308,4,l,d)},useInsertionEffect:function(l,d){st(4,2,l,d)},useMemo:function(l,d){var v=qa();d=d===void 0?null:d;var E=l();if(rl){tt(!0);try{l()}finally{tt(!1)}}return v.memoizedState=[E,d],E},useReducer:function(l,d,v){var E=qa();if(v!==void 0){var R=v(d);if(rl){tt(!0);try{v(d)}finally{tt(!1)}}}else R=d;return E.memoizedState=E.baseState=R,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:R},E.queue=l,l=l.dispatch=Zu.bind(null,Gn,l),[E.memoizedState,l]},useRef:function(l){var d=qa();return l={current:l},d.memoizedState=l},useState:function(l){l=F(l);var d=l.queue,v=Fh.bind(null,Gn,d);return d.dispatch=v,[l.memoizedState,v]},useDebugValue:Ki,useDeferredValue:function(l,d){var v=qa();return $i(v,l,d)},useTransition:function(){var l=F(!1);return l=lr.bind(null,Gn,l.queue,!0,!1),qa().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,v){var E=Gn,R=qa();if(Jn){if(v===void 0)throw Error(u(407));v=v()}else{if(v=d(),_r===null)throw Error(u(349));(gi&127)!==0||b(E,d,v)}R.memoizedState=v;var $={value:v,getSnapshot:d};return R.queue=$,rt(M.bind(null,E,$,l),[l]),E.flags|=2048,ze(9,{destroy:void 0},A.bind(null,E,$,v,d),null),v},useId:function(){var l=qa(),d=_r.identifierPrefix;if(Jn){var v=Wt,E=Ct;v=(E&~(1<<32-vt(E)-1)).toString(32)+v,d="_"+d+"R_"+v,v=Bu++,0<v&&(d+="H"+v.toString(32)),d+="_"}else v=wp++,d="_"+d+"r_"+v.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:Vl,useFormState:Ee,useActionState:Ee,useOptimistic:function(l){var d=qa();d.memoizedState=d.baseState=l;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=v,d=Oo.bind(null,Gn,!0,v),v.dispatch=d,[l,d]},useMemoCache:Bh,useCacheRefresh:function(){return qa().memoizedState=Ro.bind(null,Gn)},useEffectEvent:function(l){var d=qa(),v={impl:l};return d.memoizedState=v,function(){if((Gi&2)!==0)throw Error(u(440));return v.impl.apply(void 0,arguments)}}},Yr={readContext:Xr,use:Vu,useCallback:Zi,useContext:Xr,useEffect:at,useImperativeHandle:ki,useInsertionEffect:wt,useLayoutEffect:Ut,useMemo:sr,useReducer:S,useRef:Ve,useState:function(){return S(ol)},useDebugValue:Ki,useDeferredValue:function(l,d){var v=yr();return Sr(v,Ii.memoizedState,l,d)},useTransition:function(){var l=S(ol)[0],d=yr().memoizedState;return[typeof l=="boolean"?l:Uu(l),d]},useSyncExternalStore:y,useId:Zl,useHostTransitionStatus:Vl,useFormState:Pe,useActionState:Pe,useOptimistic:function(l,d){var v=yr();return q(v,Ii,l,d)},useMemoCache:Bh,useCacheRefresh:sl};Yr.useEffectEvent=Ot;var ra={readContext:Xr,use:Vu,useCallback:Zi,useContext:Xr,useEffect:at,useImperativeHandle:ki,useInsertionEffect:wt,useLayoutEffect:Ut,useMemo:sr,useReducer:h,useRef:Ve,useState:function(){return h(ol)},useDebugValue:Ki,useDeferredValue:function(l,d){var v=yr();return Ii===null?$i(v,l,d):Sr(v,Ii.memoizedState,l,d)},useTransition:function(){var l=h(ol)[0],d=yr().memoizedState;return[typeof l=="boolean"?l:Uu(l),d]},useSyncExternalStore:y,useId:Zl,useHostTransitionStatus:Vl,useFormState:Ne,useActionState:Ne,useOptimistic:function(l,d){var v=yr();return Ii!==null?q(v,Ii,l,d):(v.baseState=l,[l,v.queue.dispatch])},useMemoCache:Bh,useCacheRefresh:sl};ra.useEffectEvent=Ot;function Tf(l,d,v,E){d=l.memoizedState,v=v(E,d),v=v==null?d:Z({},d,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var Ef={enqueueSetState:function(l,d,v){l=l._reactInternals;var E=Ls(),R=Fl(E);R.payload=d,v!=null&&(R.callback=v),d=_c(l,R,E),d!==null&&(Rs(d,l,E),As(d,l,E))},enqueueReplaceState:function(l,d,v){l=l._reactInternals;var E=Ls(),R=Fl(E);R.tag=1,R.payload=d,v!=null&&(R.callback=v),d=_c(l,R,E),d!==null&&(Rs(d,l,E),As(d,l,E))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var v=Ls(),E=Fl(v);E.tag=2,d!=null&&(E.callback=d),d=_c(l,E,v),d!==null&&(Rs(d,l,v),As(d,l,v))}};function ou(l,d,v,E,R,$,Q){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(E,$,Q):d.prototype&&d.prototype.isPureReactComponent?!Ys(v,E)||!Ys(R,$):!0}function Zm(l,d,v,E){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(v,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(v,E),d.state!==l&&Ef.enqueueReplaceState(d,d.state,null)}function su(l,d){var v=d;if("ref"in d){v={};for(var E in d)E!=="ref"&&(v[E]=d[E])}if(l=l.defaultProps){v===d&&(v=Z({},v));for(var R in l)v[R]===void 0&&(v[R]=l[R])}return v}function Af(l){es(l)}function Sc(l){console.error(l)}function Tc(l){es(l)}function cl(l,d){try{var v=l.onUncaughtError;v(d.value,{componentStack:d.stack})}catch(E){setTimeout(function(){throw E})}}function Cf(l,d,v){try{var E=l.onCaughtError;E(v.value,{componentStack:v.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function Nd(l,d,v){return v=Fl(v),v.tag=3,v.payload={element:null},v.callback=function(){cl(l,d)},v}function $d(l){return l=Fl(l),l.tag=3,l}function jd(l,d,v,E){var R=v.type.getDerivedStateFromError;if(typeof R=="function"){var $=E.value;l.payload=function(){return R($)},l.callback=function(){Cf(d,v,E)}}var Q=v.stateNode;Q!==null&&typeof Q.componentDidCatch=="function"&&(l.callback=function(){Cf(d,v,E),typeof R!="function"&&(Ju===null?Ju=new Set([this]):Ju.add(this));var pe=E.stack;this.componentDidCatch(E.value,{componentStack:pe!==null?pe:""})})}function qm(l,d,v,E,R){if(v.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(d=v.alternate,d!==null&&ns(d,v,R,!0),v=en.current,v!==null){switch(v.tag){case 31:case 13:return on===null?Fp():v.alternate===null&&Kr===0&&(Kr=3),v.flags&=-257,v.flags|=65536,v.lanes=R,E===Yt?v.flags|=16384:(d=v.updateQueue,d===null?v.updateQueue=new Set([E]):d.add(E),gg(l,E,R)),!1;case 22:return v.flags|=65536,E===Yt?v.flags|=16384:(d=v.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([E])},v.updateQueue=d):(v=d.retryQueue,v===null?d.retryQueue=new Set([E]):v.add(E)),gg(l,E,R)),!1}throw Error(u(435,v.tag))}return gg(l,E,R),Fp(),!1}if(Jn)return d=en.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=R,E!==er&&(l=Error(u(422),{cause:E}),el(T(l,v)))):(E!==er&&(d=Error(u(423),{cause:E}),el(T(d,v))),l=l.current.alternate,l.flags|=65536,R&=-R,l.lanes|=R,E=T(E,v),R=Nd(l.stateNode,E,R),Ri(l,R),Kr!==4&&(Kr=2)),!1;var $=Error(u(520),{cause:E});if($=T($,v),Np===null?Np=[$]:Np.push($),Kr!==4&&(Kr=2),d===null)return!0;E=T(E,v),v=d;do{switch(v.tag){case 3:return v.flags|=65536,l=R&-R,v.lanes|=l,l=Nd(v.stateNode,E,l),Ri(v,l),!1;case 1:if(d=v.type,$=v.stateNode,(v.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Ju===null||!Ju.has($))))return v.flags|=65536,R&=-R,v.lanes|=R,R=$d(R),jd(R,l,v,E),Ri(v,R),!1}v=v.return}while(v!==null);return!1}var Gm=Error(u(461)),Ma=!1;function Ga(l,d,v,E){d.child=l===null?vp(d,null,v,E):jl(d,l.child,v,E)}function Yv(l,d,v,E,R){v=v.render;var $=d.ref;if("ref"in E){var Q={};for(var pe in E)pe!=="ref"&&(Q[pe]=E[pe])}else Q=E;return yc(d),E=$h(l,d,v,Q,$,R),pe=Od(),l!==null&&!Ma?(au(l,d,R),cu(l,d,R)):(Jn&&pe&&kr(d),d.flags|=1,Ga(l,d,E,R),d.child)}function Hm(l,d,v,E,R){if(l===null){var $=v.type;return typeof $=="function"&&!Du($)&&$.defaultProps===void 0&&v.compare===null?(d.tag=15,d.type=$,ky(l,d,$,E,R)):(l=Lu(v.type,null,E,d,d.mode,R),l.ref=d.ref,l.return=d,d.child=l)}if($=l.child,!Ep(l,R)){var Q=$.memoizedProps;if(v=v.compare,v=v!==null?v:Ys,v(Q,E)&&l.ref===d.ref)return cu(l,d,R)}return d.flags|=1,l=so($,E),l.ref=d.ref,l.return=d,d.child=l}function ky(l,d,v,E,R){if(l!==null){var $=l.memoizedProps;if(Ys($,E)&&l.ref===d.ref)if(Ma=!1,d.pendingProps=E=$,Ep(l,R))(l.flags&131072)!==0&&(Ma=!0);else return d.lanes=l.lanes,cu(l,d,R)}return Dy(l,d,v,E,R)}function Py(l,d,v,E){var R=E.children,$=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((d.flags&128)!==0){if($=$!==null?$.baseLanes|v:v,l!==null){for(E=d.child=l.child,R=0;E!==null;)R=R|E.lanes|E.childLanes,E=E.sibling;E=R&~$}else E=0,d.child=null;return Kv(l,d,$,v,E)}if((v&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&_f(d,$!==null?$.cachePool:null),$!==null?xp(d,$):rs(),Pd(d);else return E=d.lanes=536870912,Kv(l,d,$!==null?$.baseLanes|v:v,v,E)}else $!==null?(_f(d,$.cachePool),xp(d,$),Fr(),d.memoizedState=null):(l!==null&&_f(d,null),rs(),Fr());return Ga(l,d,R,v),d.child}function lu(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function Kv(l,d,v,E,R){var $=yf();return $=$===null?null:{parent:Br._currentValue,pool:$},d.memoizedState={baseLanes:v,cachePool:$},l!==null&&_f(d,null),rs(),Pd(d),l!==null&&ns(l,d,E,!0),d.childLanes=R,null}function qu(l,d){return d=Jm({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function Sp(l,d,v){return jl(d,l.child,null,v),l=qu(d,d.pendingProps),l.flags|=2,wr(d),d.memoizedState=null,l}function Wm(l,d,v){var E=d.pendingProps,R=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(Jn){if(E.mode==="hidden")return l=qu(d,E),d.lanes=536870912,lu(null,l);if(Nh(d),(l=ui)?(l=Kh(l,xo),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:ht!==null?{id:Ct,overflow:Wt}:null,retryLane:536870912,hydrationErrors:null},v=Ru(l),v.return=d,d.child=v,Ci=d,ui=null)):l=null,l===null)throw co(d);return d.lanes=536870912,null}return qu(d,E)}var $=l.memoizedState;if($!==null){var Q=$.dehydrated;if(Nh(d),R)if(d.flags&256)d.flags&=-257,d=Sp(l,d,v);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(u(558));else if(Ma||ns(l,d,v,!1),R=(v&l.childLanes)!==0,Ma||R){if(E=_r,E!==null&&(Q=qc(E,v),Q!==0&&Q!==$.retryLane))throw $.retryLane=Q,Va(l,Q),Rs(E,l,Q),Gm;Fp(),d=Sp(l,d,v)}else l=$.treeContext,ui=dl(Q.nextSibling),Ci=d,Jn=!0,Qs=null,xo=!1,l!==null&&lo(d,l),d=qu(d,E),d.flags|=4096;return d}return l=so(l.child,{mode:E.mode,children:E.children}),l.ref=d.ref,d.child=l,l.return=d,l}function Xm(l,d){var v=d.ref;if(v===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(u(284));(l===null||l.ref!==v)&&(d.flags|=4194816)}}function Dy(l,d,v,E,R){return yc(d),v=$h(l,d,v,E,void 0,R),E=Od(),l!==null&&!Ma?(au(l,d,R),cu(l,d,R)):(Jn&&E&&kr(d),d.flags|=1,Ga(l,d,v,R),d.child)}function Jv(l,d,v,E,R,$){return yc(d),d.updateQueue=null,v=Ld(d,E,v,R),jh(l),E=Od(),l!==null&&!Ma?(au(l,d,$),cu(l,d,$)):(Jn&&E&&kr(d),d.flags|=1,Ga(l,d,v,$),d.child)}function Qv(l,d,v,E,R){if(yc(d),d.stateNode===null){var $=Rn,Q=v.contextType;typeof Q=="object"&&Q!==null&&($=Xr(Q)),$=new v(E,$),d.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=Ef,d.stateNode=$,$._reactInternals=d,$=d.stateNode,$.props=E,$.state=d.memoizedState,$.refs={},wf(d),Q=v.contextType,$.context=typeof Q=="object"&&Q!==null?Xr(Q):Rn,$.state=d.memoizedState,Q=v.getDerivedStateFromProps,typeof Q=="function"&&(Tf(d,v,Q,E),$.state=d.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(Q=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),Q!==$.state&&Ef.enqueueReplaceState($,$.state,null),ru(d,E,$,R),vc(),$.state=d.memoizedState),typeof $.componentDidMount=="function"&&(d.flags|=4194308),E=!0}else if(l===null){$=d.stateNode;var pe=d.memoizedProps,je=su(v,pe);$.props=je;var ut=$.context,xt=v.contextType;Q=Rn,typeof xt=="object"&&xt!==null&&(Q=Xr(xt));var zt=v.getDerivedStateFromProps;xt=typeof zt=="function"||typeof $.getSnapshotBeforeUpdate=="function",pe=d.pendingProps!==pe,xt||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(pe||ut!==Q)&&Zm(d,$,E,Q),Bl=!1;var dt=d.memoizedState;$.state=dt,ru(d,E,$,R),vc(),ut=d.memoizedState,pe||dt!==ut||Bl?(typeof zt=="function"&&(Tf(d,v,zt,E),ut=d.memoizedState),(je=Bl||ou(d,v,je,E,dt,ut,Q))?(xt||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(d.flags|=4194308)):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=E,d.memoizedState=ut),$.props=E,$.state=ut,$.context=Q,E=je):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),E=!1)}else{$=d.stateNode,zd(l,d),Q=d.memoizedProps,xt=su(v,Q),$.props=xt,zt=d.pendingProps,dt=$.context,ut=v.contextType,je=Rn,typeof ut=="object"&&ut!==null&&(je=Xr(ut)),pe=v.getDerivedStateFromProps,(ut=typeof pe=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(Q!==zt||dt!==je)&&Zm(d,$,E,je),Bl=!1,dt=d.memoizedState,$.state=dt,ru(d,E,$,R),vc();var gt=d.memoizedState;Q!==zt||dt!==gt||Bl||l!==null&&l.dependencies!==null&&Dh(l.dependencies)?(typeof pe=="function"&&(Tf(d,v,pe,E),gt=d.memoizedState),(xt=Bl||ou(d,v,xt,E,dt,gt,je)||l!==null&&l.dependencies!==null&&Dh(l.dependencies))?(ut||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(E,gt,je),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(E,gt,je)),typeof $.componentDidUpdate=="function"&&(d.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof $.componentDidUpdate!="function"||Q===l.memoizedProps&&dt===l.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&dt===l.memoizedState||(d.flags|=1024),d.memoizedProps=E,d.memoizedState=gt),$.props=E,$.state=gt,$.context=je,E=xt):(typeof $.componentDidUpdate!="function"||Q===l.memoizedProps&&dt===l.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&dt===l.memoizedState||(d.flags|=1024),E=!1)}return $=E,Xm(l,d),E=(d.flags&128)!==0,$||E?($=d.stateNode,v=E&&typeof v.getDerivedStateFromError!="function"?null:$.render(),d.flags|=1,l!==null&&E?(d.child=jl(d,l.child,null,R),d.child=jl(d,null,v,R)):Ga(l,d,v,R),d.memoizedState=$.state,l=d.child):l=cu(l,d,R),l}function e0(l,d,v,E){return ws(),d.flags|=256,Ga(l,d,v,E),d.child}var Ym={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tp(l){return{baseLanes:l,cachePool:Vm()}}function Km(l,d,v){return l=l!==null?l.childLanes&~v:0,d&&(l|=To),l}function Ly(l,d,v){var E=d.pendingProps,R=!1,$=(d.flags&128)!==0,Q;if((Q=$)||(Q=l!==null&&l.memoizedState===null?!1:(Pr.current&2)!==0),Q&&(R=!0,d.flags&=-129),Q=(d.flags&32)!==0,d.flags&=-33,l===null){if(Jn){if(R?Cs(d):Fr(),(l=ui)?(l=Kh(l,xo),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:ht!==null?{id:Ct,overflow:Wt}:null,retryLane:536870912,hydrationErrors:null},v=Ru(l),v.return=d,d.child=v,Ci=d,ui=null)):l=null,l===null)throw co(d);return aa(l)?d.lanes=32:d.lanes=536870912,null}var pe=E.children;return E=E.fallback,R?(Fr(),R=d.mode,pe=Jm({mode:"hidden",children:pe},R),E=Dl(E,R,v,null),pe.return=d,E.return=d,pe.sibling=E,d.child=pe,E=d.child,E.memoizedState=Tp(v),E.childLanes=Km(l,Q,v),d.memoizedState=Ym,lu(null,E)):(Cs(d),Ry(d,pe))}var je=l.memoizedState;if(je!==null&&(pe=je.dehydrated,pe!==null)){if($)d.flags&256?(Cs(d),d.flags&=-257,d=Qm(l,d,v)):d.memoizedState!==null?(Fr(),d.child=l.child,d.flags|=128,d=null):(Fr(),pe=E.fallback,R=d.mode,E=Jm({mode:"visible",children:E.children},R),pe=Dl(pe,R,v,null),pe.flags|=2,E.return=d,pe.return=d,E.sibling=pe,d.child=E,jl(d,l.child,null,v),E=d.child,E.memoizedState=Tp(v),E.childLanes=Km(l,Q,v),d.memoizedState=Ym,d=lu(null,E));else if(Cs(d),aa(pe)){if(Q=pe.nextSibling&&pe.nextSibling.dataset,Q)var ut=Q.dgst;Q=ut,E=Error(u(419)),E.stack="",E.digest=Q,el({value:E,source:null,stack:null}),d=Qm(l,d,v)}else if(Ma||ns(l,d,v,!1),Q=(v&l.childLanes)!==0,Ma||Q){if(Q=_r,Q!==null&&(E=qc(Q,v),E!==0&&E!==je.retryLane))throw je.retryLane=E,Va(l,E),Rs(Q,l,E),Gm;$o(pe)||Fp(),d=Qm(l,d,v)}else $o(pe)?(d.flags|=192,d.child=l.child,d=null):(l=je.treeContext,ui=dl(pe.nextSibling),Ci=d,Jn=!0,Qs=null,xo=!1,l!==null&&lo(d,l),d=Ry(d,E.children),d.flags|=4096);return d}return R?(Fr(),pe=E.fallback,R=d.mode,je=l.child,ut=je.sibling,E=so(je,{mode:"hidden",children:E.children}),E.subtreeFlags=je.subtreeFlags&65011712,ut!==null?pe=so(ut,pe):(pe=Dl(pe,R,v,null),pe.flags|=2),pe.return=d,E.return=d,E.sibling=pe,d.child=E,lu(null,E),E=d.child,pe=l.child.memoizedState,pe===null?pe=Tp(v):(R=pe.cachePool,R!==null?(je=Br._currentValue,R=R.parent!==je?{parent:je,pool:je}:R):R=Vm(),pe={baseLanes:pe.baseLanes|v,cachePool:R}),E.memoizedState=pe,E.childLanes=Km(l,Q,v),d.memoizedState=Ym,lu(l.child,E)):(Cs(d),v=l.child,l=v.sibling,v=so(v,{mode:"visible",children:E.children}),v.return=d,v.sibling=null,l!==null&&(Q=d.deletions,Q===null?(d.deletions=[l],d.flags|=16):Q.push(l)),d.child=v,d.memoizedState=null,v)}function Ry(l,d){return d=Jm({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function Jm(l,d){return l=oo(22,l,null,d),l.lanes=0,l}function Qm(l,d,v){return jl(d,l.child,null,v),l=Ry(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function Oy(l,d,v){l.lanes|=d;var E=l.alternate;E!==null&&(E.lanes|=d),pf(l.return,d,v)}function Ny(l,d,v,E,R,$){var Q=l.memoizedState;Q===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:v,tailMode:R,treeForkCount:$}:(Q.isBackwards=d,Q.rendering=null,Q.renderingStartTime=0,Q.last=E,Q.tail=v,Q.tailMode=R,Q.treeForkCount=$)}function eg(l,d,v){var E=d.pendingProps,R=E.revealOrder,$=E.tail;E=E.children;var Q=Pr.current,pe=(Q&2)!==0;if(pe?(Q=Q&1|2,d.flags|=128):Q&=1,Mt(Pr,Q),Ga(l,d,E,v),E=Jn?he:0,!pe&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Oy(l,v,d);else if(l.tag===19)Oy(l,v,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(R){case"forwards":for(v=d.child,R=null;v!==null;)l=v.alternate,l!==null&&Dd(l)===null&&(R=v),v=v.sibling;v=R,v===null?(R=d.child,d.child=null):(R=v.sibling,v.sibling=null),Ny(d,!1,R,v,$,E);break;case"backwards":case"unstable_legacy-backwards":for(v=null,R=d.child,d.child=null;R!==null;){if(l=R.alternate,l!==null&&Dd(l)===null){d.child=R;break}l=R.sibling,R.sibling=v,v=R,R=l}Ny(d,!0,v,null,$,E);break;case"together":Ny(d,!1,null,null,void 0,E);break;default:d.memoizedState=null}return d.child}function cu(l,d,v){if(l!==null&&(d.dependencies=l.dependencies),Ku|=d.lanes,(v&d.childLanes)===0)if(l!==null){if(ns(l,d,v,!1),(v&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(u(153));if(d.child!==null){for(l=d.child,v=so(l,l.pendingProps),d.child=v,v.return=d;l.sibling!==null;)l=l.sibling,v=v.sibling=so(l,l.pendingProps),v.return=d;v.sibling=null}return d.child}function Ep(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Dh(l)))}function Ap(l,d,v){switch(d.tag){case 3:un(d,d.stateNode.containerInfo),gc(d,Br,l.memoizedState.cache),ws();break;case 27:case 5:Dn(d);break;case 4:un(d,d.stateNode.containerInfo);break;case 10:gc(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,Nh(d),null;break;case 13:var E=d.memoizedState;if(E!==null)return E.dehydrated!==null?(Cs(d),d.flags|=128,null):(v&d.child.childLanes)!==0?Ly(l,d,v):(Cs(d),l=cu(l,d,v),l!==null?l.sibling:null);Cs(d);break;case 19:var R=(l.flags&128)!==0;if(E=(v&d.childLanes)!==0,E||(ns(l,d,v,!1),E=(v&d.childLanes)!==0),R){if(E)return eg(l,d,v);d.flags|=128}if(R=d.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),Mt(Pr,Pr.current),E)break;return null;case 22:return d.lanes=0,Py(l,d,v,d.pendingProps);case 24:gc(d,Br,l.memoizedState.cache)}return cu(l,d,v)}function No(l,d,v){if(l!==null)if(l.memoizedProps!==d.pendingProps)Ma=!0;else{if(!Ep(l,v)&&(d.flags&128)===0)return Ma=!1,Ap(l,d,v);Ma=(l.flags&131072)!==0}else Ma=!1,Jn&&(d.flags&1048576)!==0&&qn(d,he,d.index);switch(d.lanes=0,d.tag){case 16:e:{var E=d.pendingProps;if(l=Es(d.elementType),d.type=l,typeof l=="function")Du(l)?(E=su(l,E),d.tag=1,d=Qv(null,d,l,E,v)):(d.tag=0,d=Dy(null,d,l,E,v));else{if(l!=null){var R=l.$$typeof;if(R===xe){d.tag=11,d=Yv(null,d,l,E,v);break e}else if(R===Ue){d.tag=14,d=Hm(null,d,l,E,v);break e}}throw d=ln(l)||l,Error(u(306,d,""))}}return d;case 0:return Dy(l,d,d.type,d.pendingProps,v);case 1:return E=d.type,R=su(E,d.pendingProps),Qv(l,d,E,R,v);case 3:e:{if(un(d,d.stateNode.containerInfo),l===null)throw Error(u(387));E=d.pendingProps;var $=d.memoizedState;R=$.element,zd(l,d),ru(d,E,null,v);var Q=d.memoizedState;if(E=Q.cache,gc(d,Br,E),E!==$.cache&&mf(d,[Br],v,!0),vc(),E=Q.element,$.isDehydrated)if($={element:E,isDehydrated:!1,cache:Q.cache},d.updateQueue.baseState=$,d.memoizedState=$,d.flags&256){d=e0(l,d,E,v);break e}else if(E!==R){R=T(Error(u(424)),d),el(R),d=e0(l,d,E,v);break e}else for(l=d.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,ui=dl(l.firstChild),Ci=d,Jn=!0,Qs=null,xo=!0,v=vp(d,null,E,v),d.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(ws(),E===R){d=cu(l,d,v);break e}Ga(l,d,E,v)}d=d.child}return d;case 26:return Xm(l,d),l===null?(v=y_(d.type,null,d.pendingProps,null))?d.memoizedState=v:Jn||(v=d.type,l=d.pendingProps,E=Hp(Ft.current).createElement(v),E[Li]=d,E[Lt]=l,Wa(E,v,l),dr(E),d.stateNode=E):d.memoizedState=y_(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Dn(d),l===null&&Jn&&(E=d.stateNode=L0(d.type,d.pendingProps,Ft.current),Ci=d,xo=!0,R=ui,Yh(d.type)?(cs=R,ui=dl(E.firstChild)):ui=R),Ga(l,d,d.pendingProps.children,v),Xm(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Jn&&((R=E=ui)&&(E=fo(E,d.type,d.pendingProps,xo),E!==null?(d.stateNode=E,Ci=d,ui=dl(E.firstChild),xo=!1,R=!0):R=!1),R||co(d)),Dn(d),R=d.type,$=d.pendingProps,Q=l!==null?l.memoizedProps:null,E=$.children,Cg(R,$)?E=null:Q!==null&&Cg(R,Q)&&(d.flags|=32),d.memoizedState!==null&&(R=$h(l,d,Rd,null,null,v),qf._currentValue=R),Xm(l,d),Ga(l,d,E,v),d.child;case 6:return l===null&&Jn&&((l=v=ui)&&(v=zc(v,d.pendingProps,xo),v!==null?(d.stateNode=v,Ci=d,ui=null,l=!0):l=!1),l||co(d)),null;case 13:return Ly(l,d,v);case 4:return un(d,d.stateNode.containerInfo),E=d.pendingProps,l===null?d.child=jl(d,null,E,v):Ga(l,d,E,v),d.child;case 11:return Yv(l,d,d.type,d.pendingProps,v);case 7:return Ga(l,d,d.pendingProps,v),d.child;case 8:return Ga(l,d,d.pendingProps.children,v),d.child;case 12:return Ga(l,d,d.pendingProps.children,v),d.child;case 10:return E=d.pendingProps,gc(d,d.type,E.value),Ga(l,d,E.children,v),d.child;case 9:return R=d.type._context,E=d.pendingProps.children,yc(d),R=Xr(R),E=E(R),d.flags|=1,Ga(l,d,E,v),d.child;case 14:return Hm(l,d,d.type,d.pendingProps,v);case 15:return ky(l,d,d.type,d.pendingProps,v);case 19:return eg(l,d,v);case 31:return Wm(l,d,v);case 22:return Py(l,d,v,d.pendingProps);case 24:return yc(d),E=Xr(Br),l===null?(R=yf(),R===null&&(R=_r,$=Ol(),R.pooledCache=$,$.refCount++,$!==null&&(R.pooledCacheLanes|=v),R=$),d.memoizedState={parent:E,cache:R},wf(d),gc(d,Br,R)):((l.lanes&v)!==0&&(zd(l,d),ru(d,null,null,v),vc()),R=l.memoizedState,$=d.memoizedState,R.parent!==E?(R={parent:E,cache:E},d.memoizedState=R,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=R),gc(d,Br,E)):(E=$.cache,gc(d,Br,E),E!==R.cache&&mf(d,[Br],v,!0))),Ga(l,d,d.pendingProps.children,v),d.child;case 29:throw d.pendingProps}throw Error(u(156,d.tag))}function uu(l){l.flags|=4}function Cp(l,d,v,E,R){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(R&335544128)===R)if(l.stateNode.complete)l.flags|=8192;else if(Xy())l.flags|=8192;else throw il=Yt,iu}else l.flags&=-16777217}function t0(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!Kp(d))if(Xy())l.flags|=8192;else throw il=Yt,iu}function Mp(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Ai():536870912,l.lanes|=d,Zd|=d)}function zp(l,d){if(!Jn)switch(l.tailMode){case"hidden":d=l.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var E=null;v!==null;)v.alternate!==null&&(E=v),v=v.sibling;E===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:E.sibling=null}}function Rr(l){var d=l.alternate!==null&&l.alternate.child===l.child,v=0,E=0;if(d)for(var R=l.child;R!==null;)v|=R.lanes|R.childLanes,E|=R.subtreeFlags&65011712,E|=R.flags&65011712,R.return=l,R=R.sibling;else for(R=l.child;R!==null;)v|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=l,R=R.sibling;return l.subtreeFlags|=E,l.childLanes=v,d}function n0(l,d,v){var E=d.pendingProps;switch(mr(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rr(d),null;case 1:return Rr(d),null;case 3:return v=d.stateNode,E=null,l!==null&&(E=l.memoizedState.cache),d.memoizedState.cache!==E&&(d.flags|=2048),Rl(Br),Cn(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(l===null||l.child===null)&&(wo(d)?uu(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ss())),Rr(d),null;case 26:var R=d.type,$=d.memoizedState;return l===null?(uu(d),$!==null?(Rr(d),t0(d,$)):(Rr(d),Cp(d,R,null,E,v))):$?$!==l.memoizedState?(uu(d),Rr(d),t0(d,$)):(Rr(d),d.flags&=-16777217):(l=l.memoizedProps,l!==E&&uu(d),Rr(d),Cp(d,R,l,E,v)),null;case 27:if(Wn(d),v=Ft.current,R=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==E&&uu(d);else{if(!E){if(d.stateNode===null)throw Error(u(166));return Rr(d),null}l=It.current,wo(d)?Za(d):(l=L0(R,E,v),d.stateNode=l,uu(d))}return Rr(d),null;case 5:if(Wn(d),R=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==E&&uu(d);else{if(!E){if(d.stateNode===null)throw Error(u(166));return Rr(d),null}if($=It.current,wo(d))Za(d);else{var Q=Hp(Ft.current);switch($){case 1:$=Q.createElementNS("http://www.w3.org/2000/svg",R);break;case 2:$=Q.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;default:switch(R){case"svg":$=Q.createElementNS("http://www.w3.org/2000/svg",R);break;case"math":$=Q.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;case"script":$=Q.createElement("div"),$.innerHTML="<script><\/script>",$=$.removeChild($.firstChild);break;case"select":$=typeof E.is=="string"?Q.createElement("select",{is:E.is}):Q.createElement("select"),E.multiple?$.multiple=!0:E.size&&($.size=E.size);break;default:$=typeof E.is=="string"?Q.createElement(R,{is:E.is}):Q.createElement(R)}}$[Li]=d,$[Lt]=E;e:for(Q=d.child;Q!==null;){if(Q.tag===5||Q.tag===6)$.appendChild(Q.stateNode);else if(Q.tag!==4&&Q.tag!==27&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===d)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===d)break e;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}d.stateNode=$;e:switch(Wa($,R,E),R){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&uu(d)}}return Rr(d),Cp(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,v),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==E&&uu(d);else{if(typeof E!="string"&&d.stateNode===null)throw Error(u(166));if(l=Ft.current,wo(d)){if(l=d.stateNode,v=d.memoizedProps,E=null,R=Ci,R!==null)switch(R.tag){case 27:case 5:E=R.memoizedProps}l[Li]=d,l=!!(l.nodeValue===v||E!==null&&E.suppressHydrationWarning===!0||s_(l.nodeValue,v)),l||co(d,!0)}else l=Hp(l).createTextNode(E),l[Li]=d,d.stateNode=l}return Rr(d),null;case 31:if(v=d.memoizedState,l===null||l.memoizedState!==null){if(E=wo(d),v!==null){if(l===null){if(!E)throw Error(u(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(557));l[Li]=d}else ws(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Rr(d),l=!1}else v=Ss(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=v),l=!0;if(!l)return d.flags&256?(wr(d),d):(wr(d),null);if((d.flags&128)!==0)throw Error(u(558))}return Rr(d),null;case 13:if(E=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(R=wo(d),E!==null&&E.dehydrated!==null){if(l===null){if(!R)throw Error(u(318));if(R=d.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(u(317));R[Li]=d}else ws(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Rr(d),R=!1}else R=Ss(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=R),R=!0;if(!R)return d.flags&256?(wr(d),d):(wr(d),null)}return wr(d),(d.flags&128)!==0?(d.lanes=v,d):(v=E!==null,l=l!==null&&l.memoizedState!==null,v&&(E=d.child,R=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(R=E.alternate.memoizedState.cachePool.pool),$=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&($=E.memoizedState.cachePool.pool),$!==R&&(E.flags|=2048)),v!==l&&v&&(d.child.flags|=8192),Mp(d,d.updateQueue),Rr(d),null);case 4:return Cn(),l===null&&a_(d.stateNode.containerInfo),Rr(d),null;case 10:return Rl(d.type),Rr(d),null;case 19:if(pt(Pr),E=d.memoizedState,E===null)return Rr(d),null;if(R=(d.flags&128)!==0,$=E.rendering,$===null)if(R)zp(E,!1);else{if(Kr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if($=Dd(l),$!==null){for(d.flags|=128,zp(E,!1),l=$.updateQueue,d.updateQueue=l,Mp(d,l),d.subtreeFlags=0,l=v,v=d.child;v!==null;)Sd(v,l),v=v.sibling;return Mt(Pr,Pr.current&1|2),Jn&&gn(d,E.treeForkCount),d.child}l=l.sibling}E.tail!==null&&na()>$p&&(d.flags|=128,R=!0,zp(E,!1),d.lanes=4194304)}else{if(!R)if(l=Dd($),l!==null){if(d.flags|=128,R=!0,l=l.updateQueue,d.updateQueue=l,Mp(d,l),zp(E,!0),E.tail===null&&E.tailMode==="hidden"&&!$.alternate&&!Jn)return Rr(d),null}else 2*na()-E.renderingStartTime>$p&&v!==536870912&&(d.flags|=128,R=!0,zp(E,!1),d.lanes=4194304);E.isBackwards?($.sibling=d.child,d.child=$):(l=E.last,l!==null?l.sibling=$:d.child=$,E.last=$)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=na(),l.sibling=null,v=Pr.current,Mt(Pr,R?v&1|2:v&1),Jn&&gn(d,E.treeForkCount),l):(Rr(d),null);case 22:case 23:return wr(d),ju(),E=d.memoizedState!==null,l!==null?l.memoizedState!==null!==E&&(d.flags|=8192):E&&(d.flags|=8192),E?(v&536870912)!==0&&(d.flags&128)===0&&(Rr(d),d.subtreeFlags&6&&(d.flags|=8192)):Rr(d),v=d.updateQueue,v!==null&&Mp(d,v.retryQueue),v=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),E=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),E!==v&&(d.flags|=2048),l!==null&&pt(tl),null;case 24:return v=null,l!==null&&(v=l.memoizedState.cache),d.memoizedState.cache!==v&&(d.flags|=2048),Rl(Br),Rr(d),null;case 25:return null;case 30:return null}throw Error(u(156,d.tag))}function z1(l,d){switch(mr(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Rl(Br),Cn(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return Wn(d),null;case 31:if(d.memoizedState!==null){if(wr(d),d.alternate===null)throw Error(u(340));ws()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(wr(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(u(340));ws()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return pt(Pr),null;case 4:return Cn(),null;case 10:return Rl(d.type),null;case 22:case 23:return wr(d),ju(),l!==null&&pt(tl),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Rl(Br),null;case 25:return null;default:return null}}function tg(l,d){switch(mr(d),d.tag){case 3:Rl(Br),Cn();break;case 26:case 27:case 5:Wn(d);break;case 4:Cn();break;case 31:d.memoizedState!==null&&wr(d);break;case 13:wr(d);break;case 19:pt(Pr);break;case 10:Rl(d.type);break;case 22:case 23:wr(d),ju(),l!==null&&pt(tl);break;case 24:Rl(Br)}}function Mf(l,d){try{var v=d.updateQueue,E=v!==null?v.lastEffect:null;if(E!==null){var R=E.next;v=R;do{if((v.tag&l)===l){E=void 0;var $=v.create,Q=v.inst;E=$(),Q.destroy=E}v=v.next}while(v!==R)}}catch(pe){Hi(d,d.return,pe)}}function Gu(l,d,v){try{var E=d.updateQueue,R=E!==null?E.lastEffect:null;if(R!==null){var $=R.next;E=$;do{if((E.tag&l)===l){var Q=E.inst,pe=Q.destroy;if(pe!==void 0){Q.destroy=void 0,R=d;var je=v,ut=pe;try{ut()}catch(xt){Hi(R,je,xt)}}}E=E.next}while(E!==$)}}catch(xt){Hi(d,d.return,xt)}}function i0(l){var d=l.updateQueue;if(d!==null){var v=l.stateNode;try{Sf(d,v)}catch(E){Hi(l,l.return,E)}}}function r0(l,d,v){v.props=su(l.type,l.memoizedProps),v.state=l.memoizedState;try{v.componentWillUnmount()}catch(E){Hi(l,d,E)}}function Ip(l,d){try{var v=l.ref;if(v!==null){switch(l.tag){case 26:case 27:case 5:var E=l.stateNode;break;case 30:E=l.stateNode;break;default:E=l.stateNode}typeof v=="function"?l.refCleanup=v(E):v.current=E}}catch(R){Hi(l,d,R)}}function ul(l,d){var v=l.ref,E=l.refCleanup;if(v!==null)if(typeof E=="function")try{E()}catch(R){Hi(l,d,R)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(R){Hi(l,d,R)}else v.current=null}function ng(l){var d=l.type,v=l.memoizedProps,E=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":v.autoFocus&&E.focus();break e;case"img":v.src?E.src=v.src:v.srcSet&&(E.srcset=v.srcSet)}}catch(R){Hi(l,l.return,R)}}function ig(l,d,v){try{var E=l.stateNode;P0(E,l.type,v,d),E[Lt]=d}catch(R){Hi(l,l.return,R)}}function Uh(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Yh(l.type)||l.tag===4}function Bd(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Uh(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Yh(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function $y(l,d,v){var E=l.tag;if(E===5||E===6)l=l.stateNode,d?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(l,d):(d=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,d.appendChild(l),v=v._reactRootContainer,v!=null||d.onclick!==null||(d.onclick=Ka));else if(E!==4&&(E===27&&Yh(l.type)&&(v=l.stateNode,d=null),l=l.child,l!==null))for($y(l,d,v),l=l.sibling;l!==null;)$y(l,d,v),l=l.sibling}function rg(l,d,v){var E=l.tag;if(E===5||E===6)l=l.stateNode,d?v.insertBefore(l,d):v.appendChild(l);else if(E!==4&&(E===27&&Yh(l.type)&&(v=l.stateNode),l=l.child,l!==null))for(rg(l,d,v),l=l.sibling;l!==null;)rg(l,d,v),l=l.sibling}function a0(l){var d=l.stateNode,v=l.memoizedProps;try{for(var E=l.type,R=d.attributes;R.length;)d.removeAttributeNode(R[0]);Wa(d,E,v),d[Li]=l,d[Lt]=v}catch($){Hi(l,l.return,$)}}var Hu=!1,za=!1,jy=!1,o0=typeof WeakSet=="function"?WeakSet:Set,Ia=null;function I1(l,d){if(l=l.containerInfo,Gp=nm,l=lc(l),xs(l)){if("selectionStart"in l)var v={start:l.selectionStart,end:l.selectionEnd};else e:{v=(v=l.ownerDocument)&&v.defaultView||window;var E=v.getSelection&&v.getSelection();if(E&&E.rangeCount!==0){v=E.anchorNode;var R=E.anchorOffset,$=E.focusNode;E=E.focusOffset;try{v.nodeType,$.nodeType}catch{v=null;break e}var Q=0,pe=-1,je=-1,ut=0,xt=0,zt=l,dt=null;t:for(;;){for(var gt;zt!==v||R!==0&&zt.nodeType!==3||(pe=Q+R),zt!==$||E!==0&&zt.nodeType!==3||(je=Q+E),zt.nodeType===3&&(Q+=zt.nodeValue.length),(gt=zt.firstChild)!==null;)dt=zt,zt=gt;for(;;){if(zt===l)break t;if(dt===v&&++ut===R&&(pe=Q),dt===$&&++xt===E&&(je=Q),(gt=zt.nextSibling)!==null)break;zt=dt,dt=zt.parentNode}zt=gt}v=pe===-1||je===-1?null:{start:pe,end:je}}else v=null}v=v||{start:0,end:0}}else v=null;for(l_={focusedElem:l,selectionRange:v},nm=!1,Ia=d;Ia!==null;)if(d=Ia,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Ia=l;else for(;Ia!==null;){switch(d=Ia,$=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(v=0;v<l.length;v++)R=l[v],R.ref.impl=R.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&$!==null){l=void 0,v=d,R=$.memoizedProps,$=$.memoizedState,E=v.stateNode;try{var dn=su(v.type,R);l=E.getSnapshotBeforeUpdate(dn,$),E.__reactInternalSnapshotBeforeUpdate=l}catch(An){Hi(v,v.return,An)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,v=l.nodeType,v===9)Mc(l);else if(v===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Mc(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(u(163))}if(l=d.sibling,l!==null){l.return=d.return,Ia=l;break}Ia=d.return}}function By(l,d,v){var E=v.flags;switch(v.tag){case 0:case 11:case 15:Ps(l,v),E&4&&Mf(5,v);break;case 1:if(Ps(l,v),E&4)if(l=v.stateNode,d===null)try{l.componentDidMount()}catch(Q){Hi(v,v.return,Q)}else{var R=su(v.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(R,d,l.__reactInternalSnapshotBeforeUpdate)}catch(Q){Hi(v,v.return,Q)}}E&64&&i0(v),E&512&&Ip(v,v.return);break;case 3:if(Ps(l,v),E&64&&(l=v.updateQueue,l!==null)){if(d=null,v.child!==null)switch(v.child.tag){case 27:case 5:d=v.child.stateNode;break;case 1:d=v.child.stateNode}try{Sf(l,d)}catch(Q){Hi(v,v.return,Q)}}break;case 27:d===null&&E&4&&a0(v);case 26:case 5:Ps(l,v),d===null&&E&4&&ng(v),E&512&&Ip(v,v.return);break;case 12:Ps(l,v);break;case 31:Ps(l,v),E&4&&kp(l,v);break;case 13:Ps(l,v),E&4&&Pp(l,v),E&64&&(l=v.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(v=Ky.bind(null,v),Pa(l,v))));break;case 22:if(E=v.memoizedState!==null||Hu,!E){d=d!==null&&d.memoizedState!==null||za,R=Hu;var $=za;Hu=E,(za=d)&&!$?Wu(l,v,(v.subtreeFlags&8772)!==0):Ps(l,v),Hu=R,za=$}break;case 30:break;default:Ps(l,v)}}function zf(l){var d=l.alternate;d!==null&&(l.alternate=null,zf(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Jl(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Ur=null,Si=!1;function ks(l,d,v){for(v=v.child;v!==null;)Fy(l,d,v),v=v.sibling}function Fy(l,d,v){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(He,v)}catch{}switch(v.tag){case 26:za||ul(v,d),ks(l,d,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:za||ul(v,d);var E=Ur,R=Si;Yh(v.type)&&(Ur=v.stateNode,Si=!1),ks(l,d,v),Uf(v.stateNode),Ur=E,Si=R;break;case 5:za||ul(v,d);case 6:if(E=Ur,R=Si,Ur=null,ks(l,d,v),Ur=E,Si=R,Ur!==null)if(Si)try{(Ur.nodeType===9?Ur.body:Ur.nodeName==="HTML"?Ur.ownerDocument.body:Ur).removeChild(v.stateNode)}catch($){Hi(v,d,$)}else try{Ur.removeChild(v.stateNode)}catch($){Hi(v,d,$)}break;case 18:Ur!==null&&(Si?(l=Ur,D0(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,v.stateNode),nd(l)):D0(Ur,v.stateNode));break;case 4:E=Ur,R=Si,Ur=v.stateNode.containerInfo,Si=!0,ks(l,d,v),Ur=E,Si=R;break;case 0:case 11:case 14:case 15:Gu(2,v,d),za||Gu(4,v,d),ks(l,d,v);break;case 1:za||(ul(v,d),E=v.stateNode,typeof E.componentWillUnmount=="function"&&r0(v,d,E)),ks(l,d,v);break;case 21:ks(l,d,v);break;case 22:za=(E=za)||v.memoizedState!==null,ks(l,d,v),za=E;break;default:ks(l,d,v)}}function kp(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{nd(l)}catch(v){Hi(d,d.return,v)}}}function Pp(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{nd(l)}catch(v){Hi(d,d.return,v)}}function Dp(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new o0),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new o0),d;default:throw Error(u(435,l.tag))}}function Lp(l,d){var v=Dp(l);d.forEach(function(E){if(!v.has(E)){v.add(E);var R=D1.bind(null,l,E);E.then(R,R)}})}function os(l,d){var v=d.deletions;if(v!==null)for(var E=0;E<v.length;E++){var R=v[E],$=l,Q=d,pe=Q;e:for(;pe!==null;){switch(pe.tag){case 27:if(Yh(pe.type)){Ur=pe.stateNode,Si=!1;break e}break;case 5:Ur=pe.stateNode,Si=!1;break e;case 3:case 4:Ur=pe.stateNode.containerInfo,Si=!0;break e}pe=pe.return}if(Ur===null)throw Error(u(160));Fy($,Q,R),Ur=null,Si=!1,$=R.alternate,$!==null&&($.return=null),R.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)ag(d,l),d=d.sibling}var ss=null;function ag(l,d){var v=l.alternate,E=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:os(d,l),Ha(l),E&4&&(Gu(3,l,l.return),Mf(3,l),Gu(5,l,l.return));break;case 1:os(d,l),Ha(l),E&512&&(za||v===null||ul(v,v.return)),E&64&&Hu&&(l=l.updateQueue,l!==null&&(E=l.callbacks,E!==null&&(v=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=v===null?E:v.concat(E))));break;case 26:var R=ss;if(os(d,l),Ha(l),E&512&&(za||v===null||ul(v,v.return)),E&4){var $=v!==null?v.memoizedState:null;if(E=l.memoizedState,v===null)if(E===null)if(l.stateNode===null){e:{E=l.type,v=l.memoizedProps,R=R.ownerDocument||R;t:switch(E){case"title":$=R.getElementsByTagName("title")[0],(!$||$[In]||$[Li]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=R.createElement(E),R.head.insertBefore($,R.querySelector("head > title"))),Wa($,E,v),$[Li]=l,dr($),E=$;break e;case"link":var Q=x_("link","href",R).get(E+(v.href||""));if(Q){for(var pe=0;pe<Q.length;pe++)if($=Q[pe],$.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&$.getAttribute("rel")===(v.rel==null?null:v.rel)&&$.getAttribute("title")===(v.title==null?null:v.title)&&$.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){Q.splice(pe,1);break t}}$=R.createElement(E),Wa($,E,v),R.head.appendChild($);break;case"meta":if(Q=x_("meta","content",R).get(E+(v.content||""))){for(pe=0;pe<Q.length;pe++)if($=Q[pe],$.getAttribute("content")===(v.content==null?null:""+v.content)&&$.getAttribute("name")===(v.name==null?null:v.name)&&$.getAttribute("property")===(v.property==null?null:v.property)&&$.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&$.getAttribute("charset")===(v.charSet==null?null:v.charSet)){Q.splice(pe,1);break t}}$=R.createElement(E),Wa($,E,v),R.head.appendChild($);break;default:throw Error(u(468,E))}$[Li]=l,dr($),E=$}l.stateNode=E}else Yp(R,l.type,l.stateNode);else l.stateNode=b_(R,E,l.memoizedProps);else $!==E?($===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):$.count--,E===null?Yp(R,l.type,l.stateNode):b_(R,E,l.memoizedProps)):E===null&&l.stateNode!==null&&ig(l,l.memoizedProps,v.memoizedProps)}break;case 27:os(d,l),Ha(l),E&512&&(za||v===null||ul(v,v.return)),v!==null&&E&4&&ig(l,l.memoizedProps,v.memoizedProps);break;case 5:if(os(d,l),Ha(l),E&512&&(za||v===null||ul(v,v.return)),l.flags&32){R=l.stateNode;try{vo(R,"")}catch(dn){Hi(l,l.return,dn)}}E&4&&l.stateNode!=null&&(R=l.memoizedProps,ig(l,R,v!==null?v.memoizedProps:R)),E&1024&&(jy=!0);break;case 6:if(os(d,l),Ha(l),E&4){if(l.stateNode===null)throw Error(u(162));E=l.memoizedProps,v=l.stateNode;try{v.nodeValue=E}catch(dn){Hi(l,l.return,dn)}}break;case 3:if(Dg=null,R=ss,ss=Ig(d.containerInfo),os(d,l),ss=R,Ha(l),E&4&&v!==null&&v.memoizedState.isDehydrated)try{nd(d.containerInfo)}catch(dn){Hi(l,l.return,dn)}jy&&(jy=!1,Rp(l));break;case 4:E=ss,ss=Ig(l.stateNode.containerInfo),os(d,l),Ha(l),ss=E;break;case 12:os(d,l),Ha(l);break;case 31:os(d,l),Ha(l),E&4&&(E=l.updateQueue,E!==null&&(l.updateQueue=null,Lp(l,E)));break;case 13:os(d,l),Ha(l),l.child.flags&8192&&l.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(lg=na()),E&4&&(E=l.updateQueue,E!==null&&(l.updateQueue=null,Lp(l,E)));break;case 22:R=l.memoizedState!==null;var je=v!==null&&v.memoizedState!==null,ut=Hu,xt=za;if(Hu=ut||R,za=xt||je,os(d,l),za=xt,Hu=ut,Ha(l),E&8192)e:for(d=l.stateNode,d._visibility=R?d._visibility&-2:d._visibility|1,R&&(v===null||je||Hu||za||Ec(l)),v=null,d=l;;){if(d.tag===5||d.tag===26){if(v===null){je=v=d;try{if($=je.stateNode,R)Q=$.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none";else{pe=je.stateNode;var zt=je.memoizedProps.style,dt=zt!=null&&zt.hasOwnProperty("display")?zt.display:null;pe.style.display=dt==null||typeof dt=="boolean"?"":(""+dt).trim()}}catch(dn){Hi(je,je.return,dn)}}}else if(d.tag===6){if(v===null){je=d;try{je.stateNode.nodeValue=R?"":je.memoizedProps}catch(dn){Hi(je,je.return,dn)}}}else if(d.tag===18){if(v===null){je=d;try{var gt=je.stateNode;R?Yn(gt,!0):Yn(je.stateNode,!1)}catch(dn){Hi(je,je.return,dn)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;v===d&&(v=null),d=d.return}v===d&&(v=null),d.sibling.return=d.return,d=d.sibling}E&4&&(E=l.updateQueue,E!==null&&(v=E.retryQueue,v!==null&&(E.retryQueue=null,Lp(l,v))));break;case 19:os(d,l),Ha(l),E&4&&(E=l.updateQueue,E!==null&&(l.updateQueue=null,Lp(l,E)));break;case 30:break;case 21:break;default:os(d,l),Ha(l)}}function Ha(l){var d=l.flags;if(d&2){try{for(var v,E=l.return;E!==null;){if(Uh(E)){v=E;break}E=E.return}if(v==null)throw Error(u(160));switch(v.tag){case 27:var R=v.stateNode,$=Bd(l);rg(l,$,R);break;case 5:var Q=v.stateNode;v.flags&32&&(vo(Q,""),v.flags&=-33);var pe=Bd(l);rg(l,pe,Q);break;case 3:case 4:var je=v.stateNode.containerInfo,ut=Bd(l);$y(l,ut,je);break;default:throw Error(u(161))}}catch(xt){Hi(l,l.return,xt)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function Rp(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;Rp(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Ps(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)By(l,d.alternate,d),d=d.sibling}function Ec(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:Gu(4,d,d.return),Ec(d);break;case 1:ul(d,d.return);var v=d.stateNode;typeof v.componentWillUnmount=="function"&&r0(d,d.return,v),Ec(d);break;case 27:Uf(d.stateNode);case 26:case 5:ul(d,d.return),Ec(d);break;case 22:d.memoizedState===null&&Ec(d);break;case 30:Ec(d);break;default:Ec(d)}l=l.sibling}}function Wu(l,d,v){for(v=v&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var E=d.alternate,R=l,$=d,Q=$.flags;switch($.tag){case 0:case 11:case 15:Wu(R,$,v),Mf(4,$);break;case 1:if(Wu(R,$,v),E=$,R=E.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(ut){Hi(E,E.return,ut)}if(E=$,R=E.updateQueue,R!==null){var pe=E.stateNode;try{var je=R.shared.hiddenCallbacks;if(je!==null)for(R.shared.hiddenCallbacks=null,R=0;R<je.length;R++)Id(je[R],pe)}catch(ut){Hi(E,E.return,ut)}}v&&Q&64&&i0($),Ip($,$.return);break;case 27:a0($);case 26:case 5:Wu(R,$,v),v&&E===null&&Q&4&&ng($),Ip($,$.return);break;case 12:Wu(R,$,v);break;case 31:Wu(R,$,v),v&&Q&4&&kp(R,$);break;case 13:Wu(R,$,v),v&&Q&4&&Pp(R,$);break;case 22:$.memoizedState===null&&Wu(R,$,v),Ip($,$.return);break;case 30:break;default:Wu(R,$,v)}d=d.sibling}}function og(l,d){var v=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==v&&(l!=null&&l.refCount++,v!=null&&Lh(v))}function Xu(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Lh(l))}function Ac(l,d,v,E){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Uy(l,d,v,E),d=d.sibling}function Uy(l,d,v,E){var R=d.flags;switch(d.tag){case 0:case 11:case 15:Ac(l,d,v,E),R&2048&&Mf(9,d);break;case 1:Ac(l,d,v,E);break;case 3:Ac(l,d,v,E),R&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Lh(l)));break;case 12:if(R&2048){Ac(l,d,v,E),l=d.stateNode;try{var $=d.memoizedProps,Q=$.id,pe=$.onPostCommit;typeof pe=="function"&&pe(Q,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(je){Hi(d,d.return,je)}}else Ac(l,d,v,E);break;case 31:Ac(l,d,v,E);break;case 13:Ac(l,d,v,E);break;case 23:break;case 22:$=d.stateNode,Q=d.alternate,d.memoizedState!==null?$._visibility&2?Ac(l,d,v,E):Fd(l,d):$._visibility&2?Ac(l,d,v,E):($._visibility|=2,hu(l,d,v,E,(d.subtreeFlags&10256)!==0||!1)),R&2048&&og(Q,d);break;case 24:Ac(l,d,v,E),R&2048&&Xu(d.alternate,d);break;default:Ac(l,d,v,E)}}function hu(l,d,v,E,R){for(R=R&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var $=l,Q=d,pe=v,je=E,ut=Q.flags;switch(Q.tag){case 0:case 11:case 15:hu($,Q,pe,je,R),Mf(8,Q);break;case 23:break;case 22:var xt=Q.stateNode;Q.memoizedState!==null?xt._visibility&2?hu($,Q,pe,je,R):Fd($,Q):(xt._visibility|=2,hu($,Q,pe,je,R)),R&&ut&2048&&og(Q.alternate,Q);break;case 24:hu($,Q,pe,je,R),R&&ut&2048&&Xu(Q.alternate,Q);break;default:hu($,Q,pe,je,R)}d=d.sibling}}function Fd(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var v=l,E=d,R=E.flags;switch(E.tag){case 22:Fd(v,E),R&2048&&og(E.alternate,E);break;case 24:Fd(v,E),R&2048&&Xu(E.alternate,E);break;default:Fd(v,E)}d=d.sibling}}var If=8192;function Ud(l,d,v){if(l.subtreeFlags&If)for(l=l.child;l!==null;)s0(l,d,v),l=l.sibling}function s0(l,d,v){switch(l.tag){case 26:Ud(l,d,v),l.flags&If&&l.memoizedState!==null&&w_(v,ss,l.memoizedState,l.memoizedProps);break;case 5:Ud(l,d,v);break;case 3:case 4:var E=ss;ss=Ig(l.stateNode.containerInfo),Ud(l,d,v),ss=E;break;case 22:l.memoizedState===null&&(E=l.alternate,E!==null&&E.memoizedState!==null?(E=If,If=16777216,Ud(l,d,v),If=E):Ud(l,d,v));break;default:Ud(l,d,v)}}function l0(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Op(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var v=0;v<d.length;v++){var E=d[v];Ia=E,kf(E,l)}l0(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)c0(l),l=l.sibling}function c0(l){switch(l.tag){case 0:case 11:case 15:Op(l),l.flags&2048&&Gu(9,l,l.return);break;case 3:Op(l);break;case 12:Op(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,sg(l)):Op(l);break;default:Op(l)}}function sg(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var v=0;v<d.length;v++){var E=d[v];Ia=E,kf(E,l)}l0(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:Gu(8,d,d.return),sg(d);break;case 22:v=d.stateNode,v._visibility&2&&(v._visibility&=-3,sg(d));break;default:sg(d)}l=l.sibling}}function kf(l,d){for(;Ia!==null;){var v=Ia;switch(v.tag){case 0:case 11:case 15:Gu(8,v,d);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var E=v.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Lh(v.memoizedState.cache)}if(E=v.child,E!==null)E.return=v,Ia=E;else e:for(v=l;Ia!==null;){E=Ia;var R=E.sibling,$=E.return;if(zf(E),E===v){Ia=null;break e}if(R!==null){R.return=$,Ia=R;break e}Ia=$}}}var k1={getCacheForType:function(l){var d=Xr(Br),v=d.data.get(l);return v===void 0&&(v=l(),d.data.set(l,v)),v},cacheSignal:function(){return Xr(Br).controller.signal}},u0=typeof WeakMap=="function"?WeakMap:Map,Gi=0,_r=null,mi=null,gi=0,tr=0,ls=null,ql=!1,Vh=!1,Vy=!1,Yu=0,Kr=0,Ku=0,Vd=0,Zy=0,To=0,Zd=0,Np=null,Ds=null,qy=!1,lg=0,h0=0,$p=1/0,Pf=null,Ju=null,ka=0,Qu=null,Df=null,Gl=0,Gy=0,cg=null,d0=null,jp=0,Hy=null;function Ls(){return(Gi&2)!==0&&gi!==0?gi&-gi:Ge.T!==null?n_():fa()}function f0(){if(To===0)if((gi&536870912)===0||Jn){var l=pi;pi<<=1,(pi&3932160)===0&&(pi=262144),To=l}else To=536870912;return l=en.current,l!==null&&(l.flags|=32),To}function Rs(l,d,v){(l===_r&&(tr===2||tr===9)||l.cancelPendingCommit!==null)&&(Rf(l,0),Zh(l,gi,To,!1)),xi(l,v),((Gi&2)===0||l!==_r)&&(l===_r&&((Gi&2)===0&&(Vd|=v),Kr===4&&Zh(l,gi,To,!1)),Cc(l))}function wa(l,d,v){if((Gi&6)!==0)throw Error(u(327));var E=!v&&(d&127)===0&&(d&l.expiredLanes)===0||Mr(l,d),R=E?Of(l,d):dg(l,d,!0),$=E;do{if(R===0){Vh&&!E&&Zh(l,d,0,!1);break}else{if(v=l.current.alternate,$&&!P1(v)){R=dg(l,d,!1),$=!1;continue}if(R===2){if($=d,l.errorRecoveryDisabledLanes&$)var Q=0;else Q=l.pendingLanes&-536870913,Q=Q!==0?Q:Q&536870912?536870912:0;if(Q!==0){d=Q;e:{var pe=l;R=Np;var je=pe.current.memoizedState.isDehydrated;if(je&&(Rf(pe,Q).flags|=256),Q=dg(pe,Q,!1),Q!==2){if(Vy&&!je){pe.errorRecoveryDisabledLanes|=$,Vd|=$,R=4;break e}$=Ds,Ds=R,$!==null&&(Ds===null?Ds=$:Ds.push.apply(Ds,$))}R=Q}if($=!1,R!==2)continue}}if(R===1){Rf(l,0),Zh(l,d,0,!0);break}e:{switch(E=l,$=R,$){case 0:case 1:throw Error(u(345));case 4:if((d&4194048)!==d)break;case 6:Zh(E,d,To,!ql);break e;case 2:Ds=null;break;case 3:case 5:break;default:throw Error(u(329))}if((d&62914560)===d&&(R=lg+300-na(),10<R)){if(Zh(E,d,To,!ql),Ei(E,0,!0)!==0)break e;Gl=d,E.timeoutHandle=zg(Lf.bind(null,E,v,Ds,Pf,qy,d,To,Vd,Zd,ql,$,"Throttled",-0,0),R);break e}Lf(E,v,Ds,Pf,qy,d,To,Vd,Zd,ql,$,null,-0,0)}}break}while(!0);Cc(l)}function Lf(l,d,v,E,R,$,Q,pe,je,ut,xt,zt,dt,gt){if(l.timeoutHandle=-1,zt=d.subtreeFlags,zt&8192||(zt&16785408)===16785408){zt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ka},s0(d,$,zt);var dn=($&62914560)===$?lg-na():($&4194048)===$?h0-na():0;if(dn=S_(zt,dn),dn!==null){Gl=$,l.cancelPendingCommit=dn(_0.bind(null,l,d,$,v,E,R,Q,pe,je,xt,zt,null,dt,gt)),Zh(l,$,Q,!ut);return}}_0(l,d,$,v,E,R,Q,pe,je)}function P1(l){for(var d=l;;){var v=d.tag;if((v===0||v===11||v===15)&&d.flags&16384&&(v=d.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var E=0;E<v.length;E++){var R=v[E],$=R.getSnapshot;R=R.value;try{if(!_a($(),R))return!1}catch{return!1}}if(v=d.child,d.subtreeFlags&16384&&v!==null)v.return=d,d=v;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Zh(l,d,v,E){d&=~Zy,d&=~Vd,l.suspendedLanes|=d,l.pingedLanes&=~d,E&&(l.warmLanes|=d),E=l.expirationTimes;for(var R=d;0<R;){var $=31-vt(R),Q=1<<$;E[$]=-1,R&=~Q}v!==0&&Di(l,v,d)}function Bp(){return(Gi&6)===0?(hl(0),!1):!0}function ug(){if(mi!==null){if(tr===0)var l=mi.return;else l=mi,Ts=So=null,wc(l),Nl=null,Nu=0,l=mi;for(;l!==null;)tg(l.alternate,l),l=l.return;mi=null}}function Rf(l,d){var v=l.timeoutHandle;v!==-1&&(l.timeoutHandle=-1,u_(v)),v=l.cancelPendingCommit,v!==null&&(l.cancelPendingCommit=null,v()),Gl=0,ug(),_r=l,mi=v=so(l.current,null),gi=d,tr=0,ls=null,ql=!1,Vh=Mr(l,d),Vy=!1,Zd=To=Zy=Vd=Ku=Kr=0,Ds=Np=null,qy=!1,(d&8)!==0&&(d|=d&32);var E=l.entangledLanes;if(E!==0)for(l=l.entanglements,E&=d;0<E;){var R=31-vt(E),$=1<<R;d|=l[R],E&=~$}return Yu=d,kl(),v}function Wy(l,d){Gn=null,Ge.H=Oi,d===nl||d===Lo?(d=Oh(),tr=3):d===iu?(d=Oh(),tr=4):tr=d===Gm?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,ls=d,mi===null&&(Kr=1,cl(l,T(d,l.current)))}function Xy(){var l=en.current;return l===null?!0:(gi&4194048)===gi?on===null:(gi&62914560)===gi||(gi&536870912)!==0?l===on:!1}function qd(){var l=Ge.H;return Ge.H=Oi,l===null?Oi:l}function hg(){var l=Ge.A;return Ge.A=k1,l}function Fp(){Kr=4,ql||(gi&4194048)!==gi&&en.current!==null||(Vh=!0),(Ku&134217727)===0&&(Vd&134217727)===0||_r===null||Zh(_r,gi,To,!1)}function dg(l,d,v){var E=Gi;Gi|=2;var R=qd(),$=hg();(_r!==l||gi!==d)&&(Pf=null,Rf(l,d)),d=!1;var Q=Kr;e:do try{if(tr!==0&&mi!==null){var pe=mi,je=ls;switch(tr){case 8:ug(),Q=6;break e;case 3:case 2:case 9:case 6:en.current===null&&(d=!0);var ut=tr;if(tr=0,ls=null,Nf(l,pe,je,ut),v&&Vh){Q=0;break e}break;default:ut=tr,tr=0,ls=null,Nf(l,pe,je,ut)}}fg(),Q=Kr;break}catch(xt){Wy(l,xt)}while(!0);return d&&l.shellSuspendCounter++,Ts=So=null,Gi=E,Ge.H=R,Ge.A=$,mi===null&&(_r=null,gi=0,kl()),Q}function fg(){for(;mi!==null;)m0(mi)}function Of(l,d){var v=Gi;Gi|=2;var E=qd(),R=hg();_r!==l||gi!==d?(Pf=null,$p=na()+500,Rf(l,d)):Vh=Mr(l,d);e:do try{if(tr!==0&&mi!==null){d=mi;var $=ls;t:switch(tr){case 1:tr=0,ls=null,Nf(l,d,$,1);break;case 2:case 9:if(Ad($)){tr=0,ls=null,g0(d);break}d=function(){tr!==2&&tr!==9||_r!==l||(tr=7),Cc(l)},$.then(d,d);break e;case 3:tr=7;break e;case 4:tr=5;break e;case 7:Ad($)?(tr=0,ls=null,g0(d)):(tr=0,ls=null,Nf(l,d,$,7));break;case 5:var Q=null;switch(mi.tag){case 26:Q=mi.memoizedState;case 5:case 27:var pe=mi;if(Q?Kp(Q):pe.stateNode.complete){tr=0,ls=null;var je=pe.sibling;if(je!==null)mi=je;else{var ut=pe.return;ut!==null?(mi=ut,pg(ut)):mi=null}break t}}tr=0,ls=null,Nf(l,d,$,5);break;case 6:tr=0,ls=null,Nf(l,d,$,6);break;case 8:ug(),Kr=6;break e;default:throw Error(u(462))}}p0();break}catch(xt){Wy(l,xt)}while(!0);return Ts=So=null,Ge.H=E,Ge.A=R,Gi=v,mi!==null?0:(_r=null,gi=0,kl(),Kr)}function p0(){for(;mi!==null&&!Mo();)m0(mi)}function m0(l){var d=No(l.alternate,l,Yu);l.memoizedProps=l.pendingProps,d===null?pg(l):mi=d}function g0(l){var d=l,v=d.alternate;switch(d.tag){case 15:case 0:d=Jv(v,d,d.pendingProps,d.type,void 0,gi);break;case 11:d=Jv(v,d,d.pendingProps,d.type.render,d.ref,gi);break;case 5:wc(d);default:tg(v,d),d=mi=Sd(d,Yu),d=No(v,d,Yu)}l.memoizedProps=l.pendingProps,d===null?pg(l):mi=d}function Nf(l,d,v,E){Ts=So=null,wc(d),Nl=null,Nu=0;var R=d.return;try{if(qm(l,R,d,v,gi)){Kr=1,cl(l,T(v,l.current)),mi=null;return}}catch($){if(R!==null)throw mi=R,$;Kr=1,cl(l,T(v,l.current)),mi=null;return}d.flags&32768?(Jn||E===1?l=!0:Vh||(gi&536870912)!==0?l=!1:(ql=l=!0,(E===2||E===9||E===3||E===6)&&(E=en.current,E!==null&&E.tag===13&&(E.flags|=16384))),y0(d,l)):pg(d)}function pg(l){var d=l;do{if((d.flags&32768)!==0){y0(d,ql);return}l=d.return;var v=n0(d.alternate,d,Yu);if(v!==null){mi=v;return}if(d=d.sibling,d!==null){mi=d;return}mi=d=l}while(d!==null);Kr===0&&(Kr=5)}function y0(l,d){do{var v=z1(l.alternate,l);if(v!==null){v.flags&=32767,mi=v;return}if(v=l.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!d&&(l=l.sibling,l!==null)){mi=l;return}mi=l=v}while(l!==null);Kr=6,mi=null}function _0(l,d,v,E,R,$,Q,pe,je){l.cancelPendingCommit=null;do mg();while(ka!==0);if((Gi&6)!==0)throw Error(u(327));if(d!==null){if(d===l.current)throw Error(u(177));if($=d.lanes|d.childLanes,$|=Il,hr(l,v,$,Q,pe,je),l===_r&&(mi=_r=null,gi=0),Df=d,Qu=l,Gl=v,Gy=$,cg=R,d0=E,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,T0(oe,function(){return S0(),null})):(l.callbackNode=null,l.callbackPriority=0),E=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||E){E=Ge.T,Ge.T=null,R=mt.p,mt.p=2,Q=Gi,Gi|=4;try{I1(l,d,v)}finally{Gi=Q,mt.p=R,Ge.T=E}}ka=1,v0(),b0(),x0()}}function v0(){if(ka===1){ka=0;var l=Qu,d=Df,v=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||v){v=Ge.T,Ge.T=null;var E=mt.p;mt.p=2;var R=Gi;Gi|=4;try{ag(d,l);var $=l_,Q=lc(l.containerInfo),pe=$.focusedElem,je=$.selectionRange;if(Q!==pe&&pe&&pe.ownerDocument&&Qc(pe.ownerDocument.documentElement,pe)){if(je!==null&&xs(pe)){var ut=je.start,xt=je.end;if(xt===void 0&&(xt=ut),"selectionStart"in pe)pe.selectionStart=ut,pe.selectionEnd=Math.min(xt,pe.value.length);else{var zt=pe.ownerDocument||document,dt=zt&&zt.defaultView||window;if(dt.getSelection){var gt=dt.getSelection(),dn=pe.textContent.length,An=Math.min(je.start,dn),nr=je.end===void 0?An:Math.min(je.end,dn);!gt.extend&&An>nr&&(Q=nr,nr=An,An=Q);var Ye=Cl(pe,An),Ze=Cl(pe,nr);if(Ye&&Ze&&(gt.rangeCount!==1||gt.anchorNode!==Ye.node||gt.anchorOffset!==Ye.offset||gt.focusNode!==Ze.node||gt.focusOffset!==Ze.offset)){var lt=zt.createRange();lt.setStart(Ye.node,Ye.offset),gt.removeAllRanges(),An>nr?(gt.addRange(lt),gt.extend(Ze.node,Ze.offset)):(lt.setEnd(Ze.node,Ze.offset),gt.addRange(lt))}}}}for(zt=[],gt=pe;gt=gt.parentNode;)gt.nodeType===1&&zt.push({element:gt,left:gt.scrollLeft,top:gt.scrollTop});for(typeof pe.focus=="function"&&pe.focus(),pe=0;pe<zt.length;pe++){var Tt=zt[pe];Tt.element.scrollLeft=Tt.left,Tt.element.scrollTop=Tt.top}}nm=!!Gp,l_=Gp=null}finally{Gi=R,mt.p=E,Ge.T=v}}l.current=d,ka=2}}function b0(){if(ka===2){ka=0;var l=Qu,d=Df,v=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||v){v=Ge.T,Ge.T=null;var E=mt.p;mt.p=2;var R=Gi;Gi|=4;try{By(l,d.alternate,d)}finally{Gi=R,mt.p=E,Ge.T=v}}ka=3}}function x0(){if(ka===4||ka===3){ka=0,Kl();var l=Qu,d=Df,v=Gl,E=d0;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?ka=5:(ka=0,Df=Qu=null,w0(l,l.pendingLanes));var R=l.pendingLanes;if(R===0&&(Ju=null),ot(v),d=d.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(He,d,void 0,(d.current.flags&128)===128)}catch{}if(E!==null){d=Ge.T,R=mt.p,mt.p=2,Ge.T=null;try{for(var $=l.onRecoverableError,Q=0;Q<E.length;Q++){var pe=E[Q];$(pe.value,{componentStack:pe.stack})}}finally{Ge.T=d,mt.p=R}}(Gl&3)!==0&&mg(),Cc(l),R=l.pendingLanes,(v&261930)!==0&&(R&42)!==0?l===Hy?jp++:(jp=0,Hy=l):jp=0,hl(0)}}function w0(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Lh(d)))}function mg(){return v0(),b0(),x0(),S0()}function S0(){if(ka!==5)return!1;var l=Qu,d=Gy;Gy=0;var v=ot(Gl),E=Ge.T,R=mt.p;try{mt.p=32>v?32:v,Ge.T=null,v=cg,cg=null;var $=Qu,Q=Gl;if(ka=0,Df=Qu=null,Gl=0,(Gi&6)!==0)throw Error(u(331));var pe=Gi;if(Gi|=4,c0($.current),Uy($,$.current,Q,v),Gi=pe,hl(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(He,$)}catch{}return!0}finally{mt.p=R,Ge.T=E,w0(l,d)}}function Yy(l,d,v){d=T(v,d),d=Nd(l.stateNode,d,2),l=_c(l,d,2),l!==null&&(xi(l,2),Cc(l))}function Hi(l,d,v){if(l.tag===3)Yy(l,l,v);else for(;d!==null;){if(d.tag===3){Yy(d,l,v);break}else if(d.tag===1){var E=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ju===null||!Ju.has(E))){l=T(v,l),v=$d(2),E=_c(d,v,2),E!==null&&(jd(v,E,d,l),xi(E,2),Cc(E));break}}d=d.return}}function gg(l,d,v){var E=l.pingCache;if(E===null){E=l.pingCache=new u0;var R=new Set;E.set(d,R)}else R=E.get(d),R===void 0&&(R=new Set,E.set(d,R));R.has(v)||(Vy=!0,R.add(v),l=qh.bind(null,l,d,v),d.then(l,l))}function qh(l,d,v){var E=l.pingCache;E!==null&&E.delete(d),l.pingedLanes|=l.suspendedLanes&v,l.warmLanes&=~v,_r===l&&(gi&v)===v&&(Kr===4||Kr===3&&(gi&62914560)===gi&&300>na()-lg?(Gi&2)===0&&Rf(l,0):Zy|=v,Zd===gi&&(Zd=0)),Cc(l)}function Up(l,d){d===0&&(d=Ai()),l=Va(l,d),l!==null&&(xi(l,d),Cc(l))}function Ky(l){var d=l.memoizedState,v=0;d!==null&&(v=d.retryLane),Up(l,v)}function D1(l,d){var v=0;switch(l.tag){case 31:case 13:var E=l.stateNode,R=l.memoizedState;R!==null&&(v=R.retryLane);break;case 19:E=l.stateNode;break;case 22:E=l.stateNode._retryCache;break;default:throw Error(u(314))}E!==null&&E.delete(d),Up(l,v)}function T0(l,d){return Us(l,d)}var yg=null,$f=null,Jy=!1,_g=!1,Qy=!1,eh=0;function Cc(l){l!==$f&&l.next===null&&($f===null?yg=$f=l:$f=$f.next=l),_g=!0,Jy||(Jy=!0,t_())}function hl(l,d){if(!Qy&&_g){Qy=!0;do for(var v=!1,E=yg;E!==null;){if(l!==0){var R=E.pendingLanes;if(R===0)var $=0;else{var Q=E.suspendedLanes,pe=E.pingedLanes;$=(1<<31-vt(42|l)+1)-1,$&=R&~(Q&~pe),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(v=!0,Vp(E,$))}else $=gi,$=Ei(E,E===_r?$:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),($&3)===0||Mr(E,$)||(v=!0,Vp(E,$));E=E.next}while(v);Qy=!1}}function Gh(){e_()}function e_(){_g=Jy=!1;var l=0;eh!==0&&Mg()&&(l=eh);for(var d=na(),v=null,E=yg;E!==null;){var R=E.next,$=vg(E,d);$===0?(E.next=null,v===null?yg=R:v.next=R,R===null&&($f=v)):(v=E,(l!==0||($&3)!==0)&&(_g=!0)),E=R}ka!==0&&ka!==5||hl(l),eh!==0&&(eh=0)}function vg(l,d){for(var v=l.suspendedLanes,E=l.pingedLanes,R=l.expirationTimes,$=l.pendingLanes&-62914561;0<$;){var Q=31-vt($),pe=1<<Q,je=R[Q];je===-1?((pe&v)===0||(pe&E)!==0)&&(R[Q]=Mn(pe,d)):je<=d&&(l.expiredLanes|=pe),$&=~pe}if(d=_r,v=gi,v=Ei(l,l===d?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),E=l.callbackNode,v===0||l===d&&(tr===2||tr===9)||l.cancelPendingCommit!==null)return E!==null&&E!==null&&Co(E),l.callbackNode=null,l.callbackPriority=0;if((v&3)===0||Mr(l,v)){if(d=v&-v,d===l.callbackPriority)return d;switch(E!==null&&Co(E),ot(v)){case 2:case 8:v=se;break;case 32:v=oe;break;case 268435456:v=Re;break;default:v=oe}return E=E0.bind(null,l),v=Us(v,E),l.callbackPriority=d,l.callbackNode=v,d}return E!==null&&E!==null&&Co(E),l.callbackPriority=2,l.callbackNode=null,2}function E0(l,d){if(ka!==0&&ka!==5)return l.callbackNode=null,l.callbackPriority=0,null;var v=l.callbackNode;if(mg()&&l.callbackNode!==v)return null;var E=gi;return E=Ei(l,l===_r?E:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),E===0?null:(wa(l,E,d),vg(l,na()),l.callbackNode!=null&&l.callbackNode===v?E0.bind(null,l):null)}function Vp(l,d){if(mg())return null;wa(l,d,!0)}function t_(){d_(function(){(Gi&6)!==0?Us(Xe,Gh):e_()})}function n_(){if(eh===0){var l=Ou;l===0&&(l=Sn,Sn<<=1,(Sn&261888)===0&&(Sn=256)),eh=l}return eh}function bg(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Ln(""+l)}function xg(l,d){var v=d.ownerDocument.createElement("input");return v.name=d.name,v.value=d.value,l.id&&v.setAttribute("form",l.id),d.parentNode.insertBefore(v,d),l=new FormData(l),v.parentNode.removeChild(v),l}function jf(l,d,v,E,R){if(d==="submit"&&v&&v.stateNode===R){var $=bg((R[Lt]||null).action),Q=E.submitter;Q&&(d=(d=Q[Lt]||null)?bg(d.formAction):Q.getAttribute("formAction"),d!==null&&($=d,Q=null));var pe=new Tu("action","action",null,E,R);l.push({event:pe,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(eh!==0){var je=Q?xg(R,Q):new FormData(R);Dr(v,{pending:!0,data:je,method:R.method,action:$},null,je)}}else typeof $=="function"&&(pe.preventDefault(),je=Q?xg(R,Q):new FormData(R),Dr(v,{pending:!0,data:je,method:R.method,action:$},$,je))},currentTarget:R}]})}}for(var wg=0;wg<Ks.length;wg++){var Sg=Ks[wg],i_=Sg.toLowerCase(),A0=Sg[0].toUpperCase()+Sg.slice(1);ao(i_,"on"+A0)}ao(zl,"onAnimationEnd"),ao(Pu,"onAnimationIteration"),ao(dc,"onAnimationStart"),ao("dblclick","onDoubleClick"),ao("focusin","onFocus"),ao("focusout","onBlur"),ao(fc,"onTransitionRun"),ao(tu,"onTransitionStart"),ao(nu,"onTransitionCancel"),ao(va,"onTransitionEnd"),qo("onMouseEnter",["mouseout","mouseover"]),qo("onMouseLeave",["mouseout","mouseover"]),qo("onPointerEnter",["pointerout","pointerover"]),qo("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hh));function M0(l,d){d=(d&4)!==0;for(var v=0;v<l.length;v++){var E=l[v],R=E.event;E=E.listeners;e:{var $=void 0;if(d)for(var Q=E.length-1;0<=Q;Q--){var pe=E[Q],je=pe.instance,ut=pe.currentTarget;if(pe=pe.listener,je!==$&&R.isPropagationStopped())break e;$=pe,R.currentTarget=ut;try{$(R)}catch(xt){es(xt)}R.currentTarget=null,$=je}else for(Q=0;Q<E.length;Q++){if(pe=E[Q],je=pe.instance,ut=pe.currentTarget,pe=pe.listener,je!==$&&R.isPropagationStopped())break e;$=pe,R.currentTarget=ut;try{$(R)}catch(xt){es(xt)}R.currentTarget=null,$=je}}}}function yi(l,d){var v=d[En];v===void 0&&(v=d[En]=new Set);var E=l+"__bubble";v.has(E)||(Eg(d,l,2,!1),v.add(E))}function r_(l,d,v){var E=0;d&&(E|=4),Eg(v,l,E,d)}var Tg="_reactListening"+Math.random().toString(36).slice(2);function a_(l){if(!l[Tg]){l[Tg]=!0,Gc.forEach(function(v){v!=="selectionchange"&&(C0.has(v)||r_(v,!1,l),r_(v,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Tg]||(d[Tg]=!0,r_("selectionchange",!1,d))}}function Eg(l,d,v,E){switch(Wd(d)){case 2:var R=im;break;case 8:R=U0;break;default:R=E_}v=R.bind(null,d,v,l),R=void 0,!ma||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(R=!0),E?R!==void 0?l.addEventListener(d,v,{capture:!0,passive:R}):l.addEventListener(d,v,!0):R!==void 0?l.addEventListener(d,v,{passive:R}):l.addEventListener(d,v,!1)}function du(l,d,v,E,R){var $=E;if((d&1)===0&&(d&2)===0&&E!==null)e:for(;;){if(E===null)return;var Q=E.tag;if(Q===3||Q===4){var pe=E.stateNode.containerInfo;if(pe===R)break;if(Q===4)for(Q=E.return;Q!==null;){var je=Q.tag;if((je===3||je===4)&&Q.stateNode.containerInfo===R)return;Q=Q.return}for(;pe!==null;){if(Q=Zo(pe),Q===null)return;if(je=Q.tag,je===5||je===6||je===26||je===27){E=$=Q;continue e}pe=pe.parentNode}}E=E.return}Mi(function(){var ut=$,xt=nc(v),zt=[];e:{var dt=wd.get(l);if(dt!==void 0){var gt=Tu,dn=l;switch(l){case"keypress":if(to(v)===0)break e;case"keydown":case"keyup":gt=rr;break;case"focusin":dn="focus",gt=Tl;break;case"focusout":dn="blur",gt=Tl;break;case"beforeblur":case"afterblur":gt=Tl;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=gp;break;case zl:case Pu:case dc:gt=Eh;break;case va:gt=Mu;break;case"scroll":case"scrollend":gt=Zn;break;case"wheel":gt=Ws;break;case"copy":case"cut":case"paste":gt=Io;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=Ch;break;case"toggle":case"beforetoggle":gt=_s}var An=(d&4)!==0,nr=!An&&(l==="scroll"||l==="scrollend"),Ye=An?dt!==null?dt+"Capture":null:dt;An=[];for(var Ze=ut,lt;Ze!==null;){var Tt=Ze;if(lt=Tt.stateNode,Tt=Tt.tag,Tt!==5&&Tt!==26&&Tt!==27||lt===null||Ye===null||(Tt=Ja(Ze,Ye),Tt!=null&&An.push(Bf(Ze,Tt,lt))),nr)break;Ze=Ze.return}0<An.length&&(dt=new gt(dt,dn,null,v,xt),zt.push({event:dt,listeners:An}))}}if((d&7)===0){e:{if(dt=l==="mouseover"||l==="pointerover",gt=l==="mouseout"||l==="pointerout",dt&&v!==Th&&(dn=v.relatedTarget||v.fromElement)&&(Zo(dn)||dn[zn]))break e;if((gt||dt)&&(dt=xt.window===xt?xt:(dt=xt.ownerDocument)?dt.defaultView||dt.parentWindow:window,gt?(dn=v.relatedTarget||v.toElement,gt=ut,dn=dn?Zo(dn):null,dn!==null&&(nr=f(dn),An=dn.tag,dn!==nr||An!==5&&An!==27&&An!==6)&&(dn=null)):(gt=null,dn=ut),gt!==dn)){if(An=ic,Tt="onMouseLeave",Ye="onMouseEnter",Ze="mouse",(l==="pointerout"||l==="pointerover")&&(An=Ch,Tt="onPointerLeave",Ye="onPointerEnter",Ze="pointer"),nr=gt==null?dt:_o(gt),lt=dn==null?dt:_o(dn),dt=new An(Tt,Ze+"leave",gt,v,xt),dt.target=nr,dt.relatedTarget=lt,Tt=null,Zo(xt)===ut&&(An=new An(Ye,Ze+"enter",dn,v,xt),An.target=lt,An.relatedTarget=nr,Tt=An),nr=Tt,gt&&dn)t:{for(An=z0,Ye=gt,Ze=dn,lt=0,Tt=Ye;Tt;Tt=An(Tt))lt++;Tt=0;for(var Tn=Ze;Tn;Tn=An(Tn))Tt++;for(;0<lt-Tt;)Ye=An(Ye),lt--;for(;0<Tt-lt;)Ze=An(Ze),Tt--;for(;lt--;){if(Ye===Ze||Ze!==null&&Ye===Ze.alternate){An=Ye;break t}Ye=An(Ye),Ze=An(Ze)}An=null}else An=null;gt!==null&&o_(zt,dt,gt,An,!1),dn!==null&&nr!==null&&o_(zt,nr,dn,An,!0)}}e:{if(dt=ut?_o(ut):window,gt=dt.nodeName&&dt.nodeName.toLowerCase(),gt==="select"||gt==="input"&&dt.type==="file")var Bi=Ko;else if(ko(dt))if(bd)Bi=df;else{Bi=hf;var fn=Xs}else gt=dt.nodeName,!gt||gt.toLowerCase()!=="input"||dt.type!=="checkbox"&&dt.type!=="radio"?ut&&qs(ut.elementType)&&(Bi=Ko):Bi=bs;if(Bi&&(Bi=Bi(l,ut))){zh(zt,Bi,v,xt);break e}fn&&fn(l,dt,ut),l==="focusout"&&ut&&dt.type==="number"&&ut.memoizedProps.value!=null&&Go(dt,"number",dt.value)}switch(fn=ut?_o(ut):window,l){case"focusin":(ko(fn)||fn.contentEditable==="true")&&(ro=fn,eu=ut,ku=null);break;case"focusout":ku=eu=ro=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,ff(zt,v,xt);break;case"selectionchange":if(cc)break;case"keydown":case"keyup":ff(zt,v,xt)}var wn;if(pr)e:{switch(l){case"compositionstart":var hi="onCompositionStart";break e;case"compositionend":hi="onCompositionEnd";break e;case"compositionupdate":hi="onCompositionUpdate";break e}hi=void 0}else Yo?Iu(l,v)&&(hi="onCompositionEnd"):l==="keydown"&&v.keyCode===229&&(hi="onCompositionStart");hi&&(Al&&v.locale!=="ko"&&(Yo||hi!=="onCompositionStart"?hi==="onCompositionEnd"&&Yo&&(wn=eo()):(Ba=xt,Qa="value"in Ba?Ba.value:Ba.textContent,Yo=!0)),fn=Zp(ut,hi),0<fn.length&&(hi=new Ah(hi,l,null,v,xt),zt.push({event:hi,listeners:fn}),wn?hi.data=wn:(wn=vd(v),wn!==null&&(hi.data=wn)))),(wn=Xc?no(l,v):oc(l,v))&&(hi=Zp(ut,"onBeforeInput"),0<hi.length&&(fn=new Ah("onBeforeInput","beforeinput",null,v,xt),zt.push({event:fn,listeners:hi}),fn.data=wn)),jf(zt,l,ut,v,xt)}M0(zt,d)})}function Bf(l,d,v){return{instance:l,listener:d,currentTarget:v}}function Zp(l,d){for(var v=d+"Capture",E=[];l!==null;){var R=l,$=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||$===null||(R=Ja(l,v),R!=null&&E.unshift(Bf(l,R,$)),R=Ja(l,d),R!=null&&E.push(Bf(l,R,$))),l.tag===3)return E;l=l.return}return[]}function z0(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function o_(l,d,v,E,R){for(var $=d._reactName,Q=[];v!==null&&v!==E;){var pe=v,je=pe.alternate,ut=pe.stateNode;if(pe=pe.tag,je!==null&&je===E)break;pe!==5&&pe!==26&&pe!==27||ut===null||(je=ut,R?(ut=Ja(v,$),ut!=null&&Q.unshift(Bf(v,ut,je))):R||(ut=Ja(v,$),ut!=null&&Q.push(Bf(v,ut,je)))),v=v.return}Q.length!==0&&l.push({event:d,listeners:Q})}var I0=/\r\n?/g,k0=/\u0000|\uFFFD/g;function qp(l){return(typeof l=="string"?l:""+l).replace(I0,`
`).replace(k0,"")}function s_(l,d){return d=qp(d),qp(l)===d}function ji(l,d,v,E,R,$){switch(v){case"children":typeof E=="string"?d==="body"||d==="textarea"&&E===""||vo(l,E):(typeof E=="number"||typeof E=="bigint")&&d!=="body"&&vo(l,""+E);break;case"className":wi(l,"class",E);break;case"tabIndex":wi(l,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":wi(l,v,E);break;case"style":Hc(l,E,$);break;case"data":if(d!=="object"){wi(l,"data",E);break}case"src":case"href":if(E===""&&(d!=="a"||v!=="href")){l.removeAttribute(v);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){l.removeAttribute(v);break}E=Ln(""+E),l.setAttribute(v,E);break;case"action":case"formAction":if(typeof E=="function"){l.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(v==="formAction"?(d!=="input"&&ji(l,d,"name",R.name,R,null),ji(l,d,"formEncType",R.formEncType,R,null),ji(l,d,"formMethod",R.formMethod,R,null),ji(l,d,"formTarget",R.formTarget,R,null)):(ji(l,d,"encType",R.encType,R,null),ji(l,d,"method",R.method,R,null),ji(l,d,"target",R.target,R,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){l.removeAttribute(v);break}E=Ln(""+E),l.setAttribute(v,E);break;case"onClick":E!=null&&(l.onclick=Ka);break;case"onScroll":E!=null&&yi("scroll",l);break;case"onScrollEnd":E!=null&&yi("scrollend",l);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(u(61));if(v=E.__html,v!=null){if(R.children!=null)throw Error(u(60));l.innerHTML=v}}break;case"multiple":l.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":l.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){l.removeAttribute("xlink:href");break}v=Ln(""+E),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?l.setAttribute(v,""+E):l.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?l.setAttribute(v,""):l.removeAttribute(v);break;case"capture":case"download":E===!0?l.setAttribute(v,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?l.setAttribute(v,E):l.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?l.setAttribute(v,E):l.removeAttribute(v);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?l.removeAttribute(v):l.setAttribute(v,E);break;case"popover":yi("beforetoggle",l),yi("toggle",l),ai(l,"popover",E);break;case"xlinkActuate":ja(l,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":ja(l,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":ja(l,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":ja(l,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":ja(l,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":ja(l,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":ja(l,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":ja(l,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":ja(l,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":ai(l,"is",E);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=Wo.get(v)||v,ai(l,v,E))}}function Ag(l,d,v,E,R,$){switch(v){case"style":Hc(l,E,$);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(u(61));if(v=E.__html,v!=null){if(R.children!=null)throw Error(u(60));l.innerHTML=v}}break;case"children":typeof E=="string"?vo(l,E):(typeof E=="number"||typeof E=="bigint")&&vo(l,""+E);break;case"onScroll":E!=null&&yi("scroll",l);break;case"onScrollEnd":E!=null&&yi("scrollend",l);break;case"onClick":E!=null&&(l.onclick=Ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ea.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(R=v.endsWith("Capture"),d=v.slice(2,R?v.length-7:void 0),$=l[Lt]||null,$=$!=null?$[v]:null,typeof $=="function"&&l.removeEventListener(d,$,R),typeof E=="function")){typeof $!="function"&&$!==null&&(v in l?l[v]=null:l.hasAttribute(v)&&l.removeAttribute(v)),l.addEventListener(d,E,R);break e}v in l?l[v]=E:E===!0?l.setAttribute(v,""):ai(l,v,E)}}}function Wa(l,d,v){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yi("error",l),yi("load",l);var E=!1,R=!1,$;for($ in v)if(v.hasOwnProperty($)){var Q=v[$];if(Q!=null)switch($){case"src":E=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,d));default:ji(l,d,$,Q,v,null)}}R&&ji(l,d,"srcSet",v.srcSet,v,null),E&&ji(l,d,"src",v.src,v,null);return;case"input":yi("invalid",l);var pe=$=Q=R=null,je=null,ut=null;for(E in v)if(v.hasOwnProperty(E)){var xt=v[E];if(xt!=null)switch(E){case"name":R=xt;break;case"type":Q=xt;break;case"checked":je=xt;break;case"defaultChecked":ut=xt;break;case"value":$=xt;break;case"defaultValue":pe=xt;break;case"children":case"dangerouslySetInnerHTML":if(xt!=null)throw Error(u(137,d));break;default:ji(l,d,E,xt,v,null)}}tc(l,$,pe,je,ut,Q,R,!1);return;case"select":yi("invalid",l),E=Q=$=null;for(R in v)if(v.hasOwnProperty(R)&&(pe=v[R],pe!=null))switch(R){case"value":$=pe;break;case"defaultValue":Q=pe;break;case"multiple":E=pe;default:ji(l,d,R,pe,v,null)}d=$,v=Q,l.multiple=!!E,d!=null?Vi(l,!!E,d,!1):v!=null&&Vi(l,!!E,v,!0);return;case"textarea":yi("invalid",l),$=R=E=null;for(Q in v)if(v.hasOwnProperty(Q)&&(pe=v[Q],pe!=null))switch(Q){case"value":E=pe;break;case"defaultValue":R=pe;break;case"children":$=pe;break;case"dangerouslySetInnerHTML":if(pe!=null)throw Error(u(91));break;default:ji(l,d,Q,pe,v,null)}ys(l,E,R,$);return;case"option":for(je in v)v.hasOwnProperty(je)&&(E=v[je],E!=null)&&(je==="selected"?l.selected=E&&typeof E!="function"&&typeof E!="symbol":ji(l,d,je,E,v,null));return;case"dialog":yi("beforetoggle",l),yi("toggle",l),yi("cancel",l),yi("close",l);break;case"iframe":case"object":yi("load",l);break;case"video":case"audio":for(E=0;E<Hh.length;E++)yi(Hh[E],l);break;case"image":yi("error",l),yi("load",l);break;case"details":yi("toggle",l);break;case"embed":case"source":case"link":yi("error",l),yi("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ut in v)if(v.hasOwnProperty(ut)&&(E=v[ut],E!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,d));default:ji(l,d,ut,E,v,null)}return;default:if(qs(d)){for(xt in v)v.hasOwnProperty(xt)&&(E=v[xt],E!==void 0&&Ag(l,d,xt,E,v,void 0));return}}for(pe in v)v.hasOwnProperty(pe)&&(E=v[pe],E!=null&&ji(l,d,pe,E,v,null))}function P0(l,d,v,E){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,$=null,Q=null,pe=null,je=null,ut=null,xt=null;for(gt in v){var zt=v[gt];if(v.hasOwnProperty(gt)&&zt!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":je=zt;default:E.hasOwnProperty(gt)||ji(l,d,gt,null,E,zt)}}for(var dt in E){var gt=E[dt];if(zt=v[dt],E.hasOwnProperty(dt)&&(gt!=null||zt!=null))switch(dt){case"type":$=gt;break;case"name":R=gt;break;case"checked":ut=gt;break;case"defaultChecked":xt=gt;break;case"value":Q=gt;break;case"defaultValue":pe=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(u(137,d));break;default:gt!==zt&&ji(l,d,dt,gt,E,zt)}}Su(l,Q,pe,je,ut,xt,$,R);return;case"select":gt=Q=pe=dt=null;for($ in v)if(je=v[$],v.hasOwnProperty($)&&je!=null)switch($){case"value":break;case"multiple":gt=je;default:E.hasOwnProperty($)||ji(l,d,$,null,E,je)}for(R in E)if($=E[R],je=v[R],E.hasOwnProperty(R)&&($!=null||je!=null))switch(R){case"value":dt=$;break;case"defaultValue":pe=$;break;case"multiple":Q=$;default:$!==je&&ji(l,d,R,$,E,je)}d=pe,v=Q,E=gt,dt!=null?Vi(l,!!v,dt,!1):!!E!=!!v&&(d!=null?Vi(l,!!v,d,!0):Vi(l,!!v,v?[]:"",!1));return;case"textarea":gt=dt=null;for(pe in v)if(R=v[pe],v.hasOwnProperty(pe)&&R!=null&&!E.hasOwnProperty(pe))switch(pe){case"value":break;case"children":break;default:ji(l,d,pe,null,E,R)}for(Q in E)if(R=E[Q],$=v[Q],E.hasOwnProperty(Q)&&(R!=null||$!=null))switch(Q){case"value":dt=R;break;case"defaultValue":gt=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(u(91));break;default:R!==$&&ji(l,d,Q,R,E,$)}bl(l,dt,gt);return;case"option":for(var dn in v)dt=v[dn],v.hasOwnProperty(dn)&&dt!=null&&!E.hasOwnProperty(dn)&&(dn==="selected"?l.selected=!1:ji(l,d,dn,null,E,dt));for(je in E)dt=E[je],gt=v[je],E.hasOwnProperty(je)&&dt!==gt&&(dt!=null||gt!=null)&&(je==="selected"?l.selected=dt&&typeof dt!="function"&&typeof dt!="symbol":ji(l,d,je,dt,E,gt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var An in v)dt=v[An],v.hasOwnProperty(An)&&dt!=null&&!E.hasOwnProperty(An)&&ji(l,d,An,null,E,dt);for(ut in E)if(dt=E[ut],gt=v[ut],E.hasOwnProperty(ut)&&dt!==gt&&(dt!=null||gt!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(u(137,d));break;default:ji(l,d,ut,dt,E,gt)}return;default:if(qs(d)){for(var nr in v)dt=v[nr],v.hasOwnProperty(nr)&&dt!==void 0&&!E.hasOwnProperty(nr)&&Ag(l,d,nr,void 0,E,dt);for(xt in E)dt=E[xt],gt=v[xt],!E.hasOwnProperty(xt)||dt===gt||dt===void 0&&gt===void 0||Ag(l,d,xt,dt,E,gt);return}}for(var Ye in v)dt=v[Ye],v.hasOwnProperty(Ye)&&dt!=null&&!E.hasOwnProperty(Ye)&&ji(l,d,Ye,null,E,dt);for(zt in E)dt=E[zt],gt=v[zt],!E.hasOwnProperty(zt)||dt===gt||dt==null&&gt==null||ji(l,d,zt,dt,E,gt)}function Os(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ff(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,v=performance.getEntriesByType("resource"),E=0;E<v.length;E++){var R=v[E],$=R.transferSize,Q=R.initiatorType,pe=R.duration;if($&&pe&&Os(Q)){for(Q=0,pe=R.responseEnd,E+=1;E<v.length;E++){var je=v[E],ut=je.startTime;if(ut>pe)break;var xt=je.transferSize,zt=je.initiatorType;xt&&Os(zt)&&(je=je.responseEnd,Q+=xt*(je<pe?1:(pe-ut)/(je-ut)))}if(--E,d+=8*($+Q)/(R.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var Gp=null,l_=null;function Hp(l){return l.nodeType===9?l:l.ownerDocument}function Wh(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c_(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function Cg(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Xh=null;function Mg(){var l=window.event;return l&&l.type==="popstate"?l===Xh?!1:(Xh=l,!0):(Xh=null,!1)}var zg=typeof setTimeout=="function"?setTimeout:void 0,u_=typeof clearTimeout=="function"?clearTimeout:void 0,h_=typeof Promise=="function"?Promise:void 0,d_=typeof queueMicrotask=="function"?queueMicrotask:typeof h_<"u"?function(l){return h_.resolve(null).then(l).catch(f_)}:zg;function f_(l){setTimeout(function(){throw l})}function Yh(l){return l==="head"}function D0(l,d){var v=d,E=0;do{var R=v.nextSibling;if(l.removeChild(v),R&&R.nodeType===8)if(v=R.data,v==="/$"||v==="/&"){if(E===0){l.removeChild(R),nd(d);return}E--}else if(v==="$"||v==="$?"||v==="$~"||v==="$!"||v==="&")E++;else if(v==="html")Uf(l.ownerDocument.documentElement);else if(v==="head"){v=l.ownerDocument.head,Uf(v);for(var $=v.firstChild;$;){var Q=$.nextSibling,pe=$.nodeName;$[In]||pe==="SCRIPT"||pe==="STYLE"||pe==="LINK"&&$.rel.toLowerCase()==="stylesheet"||v.removeChild($),$=Q}}else v==="body"&&Uf(l.ownerDocument.body);v=R}while(v);nd(d)}function Yn(l,d){var v=l;l=0;do{var E=v.nextSibling;if(v.nodeType===1?d?(v._stashedDisplay=v.style.display,v.style.display="none"):(v.style.display=v._stashedDisplay||"",v.getAttribute("style")===""&&v.removeAttribute("style")):v.nodeType===3&&(d?(v._stashedText=v.nodeValue,v.nodeValue=""):v.nodeValue=v._stashedText||""),E&&E.nodeType===8)if(v=E.data,v==="/$"){if(l===0)break;l--}else v!=="$"&&v!=="$?"&&v!=="$~"&&v!=="$!"||l++;v=E}while(v)}function Mc(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var v=d;switch(d=d.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":Mc(v),Jl(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}l.removeChild(v)}}function fo(l,d,v,E){for(;l.nodeType===1;){var R=v;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!E&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(E){if(!l[In])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if($=l.getAttribute("rel"),$==="stylesheet"&&l.hasAttribute("data-precedence"))break;if($!==R.rel||l.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||l.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||l.getAttribute("title")!==(R.title==null?null:R.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if($=l.getAttribute("src"),($!==(R.src==null?null:R.src)||l.getAttribute("type")!==(R.type==null?null:R.type)||l.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&$&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var $=R.name==null?null:""+R.name;if(R.type==="hidden"&&l.getAttribute("name")===$)return l}else return l;if(l=dl(l.nextSibling),l===null)break}return null}function zc(l,d,v){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!v||(l=dl(l.nextSibling),l===null))return null;return l}function Kh(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=dl(l.nextSibling),l===null))return null;return l}function $o(l){return l.data==="$?"||l.data==="$~"}function aa(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function Pa(l,d){var v=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||v.readyState!=="loading")d();else{var E=function(){d(),v.removeEventListener("DOMContentLoaded",E)};v.addEventListener("DOMContentLoaded",E),l._reactRetry=E}}function dl(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var cs=null;function Da(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var v=l.data;if(v==="/$"||v==="/&"){if(d===0)return dl(l.nextSibling);d--}else v!=="$"&&v!=="$!"&&v!=="$?"&&v!=="$~"&&v!=="&"||d++}l=l.nextSibling}return null}function Wp(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var v=l.data;if(v==="$"||v==="$!"||v==="$?"||v==="$~"||v==="&"){if(d===0)return l;d--}else v!=="/$"&&v!=="/&"||d++}l=l.previousSibling}return null}function L0(l,d,v){switch(d=Hp(v),l){case"html":if(l=d.documentElement,!l)throw Error(u(452));return l;case"head":if(l=d.head,!l)throw Error(u(453));return l;case"body":if(l=d.body,!l)throw Error(u(454));return l;default:throw Error(u(451))}}function Uf(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Jl(l)}var po=new Map,Gd=new Set;function Ig(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var fu=mt.d;mt.d={f:R0,r:O0,D:m_,C:jo,L:Ic,m:Bo,X:kg,S:Qh,M:g_};function R0(){var l=fu.f(),d=Bp();return l||d}function O0(l){var d=Vs(l);d!==null&&d.tag===5&&d.type==="form"?Ca(d):fu.r(l)}var Jh=typeof document>"u"?null:document;function p_(l,d,v){var E=Jh;if(E&&typeof d=="string"&&d){var R=Xi(d);R='link[rel="'+l+'"][href="'+R+'"]',typeof v=="string"&&(R+='[crossorigin="'+v+'"]'),Gd.has(R)||(Gd.add(R),l={rel:l,crossOrigin:v,href:d},E.querySelector(R)===null&&(d=E.createElement("link"),Wa(d,"link",l),dr(d),E.head.appendChild(d)))}}function m_(l){fu.D(l),p_("dns-prefetch",l,null)}function jo(l,d){fu.C(l,d),p_("preconnect",l,d)}function Ic(l,d,v){fu.L(l,d,v);var E=Jh;if(E&&l&&d){var R='link[rel="preload"][as="'+Xi(d)+'"]';d==="image"&&v&&v.imageSrcSet?(R+='[imagesrcset="'+Xi(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(R+='[imagesizes="'+Xi(v.imageSizes)+'"]')):R+='[href="'+Xi(l)+'"]';var $=R;switch(d){case"style":$=Hd(l);break;case"script":$=th(l)}po.has($)||(l=Z({rel:"preload",href:d==="image"&&v&&v.imageSrcSet?void 0:l,as:d},v),po.set($,l),E.querySelector(R)!==null||d==="style"&&E.querySelector(Vf($))||d==="script"&&E.querySelector(Zf($))||(d=E.createElement("link"),Wa(d,"link",l),dr(d),E.head.appendChild(d)))}}function Bo(l,d){fu.m(l,d);var v=Jh;if(v&&l){var E=d&&typeof d.as=="string"?d.as:"script",R='link[rel="modulepreload"][as="'+Xi(E)+'"][href="'+Xi(l)+'"]',$=R;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=th(l)}if(!po.has($)&&(l=Z({rel:"modulepreload",href:l},d),po.set($,l),v.querySelector(R)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(Zf($)))return}E=v.createElement("link"),Wa(E,"link",l),dr(E),v.head.appendChild(E)}}}function Qh(l,d,v){fu.S(l,d,v);var E=Jh;if(E&&l){var R=ms(E).hoistableStyles,$=Hd(l);d=d||"default";var Q=R.get($);if(!Q){var pe={loading:0,preload:null};if(Q=E.querySelector(Vf($)))pe.loading=5;else{l=Z({rel:"stylesheet",href:l,"data-precedence":d},v),(v=po.get($))&&Xp(l,v);var je=Q=E.createElement("link");dr(je),Wa(je,"link",l),je._p=new Promise(function(ut,xt){je.onload=ut,je.onerror=xt}),je.addEventListener("load",function(){pe.loading|=1}),je.addEventListener("error",function(){pe.loading|=2}),pe.loading|=4,nh(Q,d,E)}Q={type:"stylesheet",instance:Q,count:1,state:pe},R.set($,Q)}}}function kg(l,d){fu.X(l,d);var v=Jh;if(v&&l){var E=ms(v).hoistableScripts,R=th(l),$=E.get(R);$||($=v.querySelector(Zf(R)),$||(l=Z({src:l,async:!0},d),(d=po.get(R))&&Pg(l,d),$=v.createElement("script"),dr($),Wa($,"link",l),v.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},E.set(R,$))}}function g_(l,d){fu.M(l,d);var v=Jh;if(v&&l){var E=ms(v).hoistableScripts,R=th(l),$=E.get(R);$||($=v.querySelector(Zf(R)),$||(l=Z({src:l,async:!0,type:"module"},d),(d=po.get(R))&&Pg(l,d),$=v.createElement("script"),dr($),Wa($,"link",l),v.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},E.set(R,$))}}function y_(l,d,v,E){var R=(R=Ft.current)?Ig(R):null;if(!R)throw Error(u(446));switch(l){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(d=Hd(v.href),v=ms(R).hoistableStyles,E=v.get(d),E||(E={type:"style",instance:null,count:0,state:null},v.set(d,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){l=Hd(v.href);var $=ms(R).hoistableStyles,Q=$.get(l);if(Q||(R=R.ownerDocument||R,Q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(l,Q),($=R.querySelector(Vf(l)))&&!$._p&&(Q.instance=$,Q.state.loading=5),po.has(l)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},po.set(l,v),$||v_(R,l,v,Q.state))),d&&E===null)throw Error(u(528,""));return Q}if(d&&E!==null)throw Error(u(529,""));return null;case"script":return d=v.async,v=v.src,typeof v=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=th(v),v=ms(R).hoistableScripts,E=v.get(d),E||(E={type:"script",instance:null,count:0,state:null},v.set(d,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,l))}}function Hd(l){return'href="'+Xi(l)+'"'}function Vf(l){return'link[rel="stylesheet"]['+l+"]"}function __(l){return Z({},l,{"data-precedence":l.precedence,precedence:null})}function v_(l,d,v,E){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?E.loading=1:(d=l.createElement("link"),E.preload=d,d.addEventListener("load",function(){return E.loading|=1}),d.addEventListener("error",function(){return E.loading|=2}),Wa(d,"link",v),dr(d),l.head.appendChild(d))}function th(l){return'[src="'+Xi(l)+'"]'}function Zf(l){return"script[async]"+l}function b_(l,d,v){if(d.count++,d.instance===null)switch(d.type){case"style":var E=l.querySelector('style[data-href~="'+Xi(v.href)+'"]');if(E)return d.instance=E,dr(E),E;var R=Z({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return E=(l.ownerDocument||l).createElement("style"),dr(E),Wa(E,"style",R),nh(E,v.precedence,l),d.instance=E;case"stylesheet":R=Hd(v.href);var $=l.querySelector(Vf(R));if($)return d.state.loading|=4,d.instance=$,dr($),$;E=__(v),(R=po.get(R))&&Xp(E,R),$=(l.ownerDocument||l).createElement("link"),dr($);var Q=$;return Q._p=new Promise(function(pe,je){Q.onload=pe,Q.onerror=je}),Wa($,"link",E),d.state.loading|=4,nh($,v.precedence,l),d.instance=$;case"script":return $=th(v.src),(R=l.querySelector(Zf($)))?(d.instance=R,dr(R),R):(E=v,(R=po.get($))&&(E=Z({},v),Pg(E,R)),l=l.ownerDocument||l,R=l.createElement("script"),dr(R),Wa(R,"link",E),l.head.appendChild(R),d.instance=R);case"void":return null;default:throw Error(u(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(E=d.instance,d.state.loading|=4,nh(E,v.precedence,l));return d.instance}function nh(l,d,v){for(var E=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=E.length?E[E.length-1]:null,$=R,Q=0;Q<E.length;Q++){var pe=E[Q];if(pe.dataset.precedence===d)$=pe;else if($!==R)break}$?$.parentNode.insertBefore(l,$.nextSibling):(d=v.nodeType===9?v.head:v,d.insertBefore(l,d.firstChild))}function Xp(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function Pg(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var Dg=null;function x_(l,d,v){if(Dg===null){var E=new Map,R=Dg=new Map;R.set(v,E)}else R=Dg,E=R.get(v),E||(E=new Map,R.set(v,E));if(E.has(l))return E;for(E.set(l,null),v=v.getElementsByTagName(l),R=0;R<v.length;R++){var $=v[R];if(!($[In]||$[Li]||l==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var Q=$.getAttribute(d)||"";Q=l+Q;var pe=E.get(Q);pe?pe.push($):E.set(Q,[$])}}return E}function Yp(l,d,v){l=l.ownerDocument||l,l.head.insertBefore(v,d==="title"?l.querySelector("head > title"):null)}function Lg(l,d,v){if(v===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;return d.rel==="stylesheet"?(l=d.disabled,typeof d.precedence=="string"&&l==null):!0;case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function Kp(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function w_(l,d,v,E){if(v.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var R=Hd(E.href),$=d.querySelector(Vf(R));if($){d=$._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=Qp.bind(l),d.then(l,l)),v.state.loading|=4,v.instance=$,dr($);return}$=d.ownerDocument||d,E=__(E),(R=po.get(R))&&Xp(E,R),$=$.createElement("link"),dr($);var Q=$;Q._p=new Promise(function(pe,je){Q.onload=pe,Q.onerror=je}),Wa($,"link",E),v.instance=$}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(v,d),(d=v.state.preload)&&(v.state.loading&3)===0&&(l.count++,v=Qp.bind(l),d.addEventListener("load",v),d.addEventListener("error",v))}}var Jp=0;function S_(l,d){return l.stylesheets&&l.count===0&&tm(l,l.stylesheets),0<l.count||0<l.imgCount?function(v){var E=setTimeout(function(){if(l.stylesheets&&tm(l,l.stylesheets),l.unsuspend){var $=l.unsuspend;l.unsuspend=null,$()}},6e4+d);0<l.imgBytes&&Jp===0&&(Jp=62500*Ff());var R=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&tm(l,l.stylesheets),l.unsuspend)){var $=l.unsuspend;l.unsuspend=null,$()}},(l.imgBytes>Jp?50:800)+d);return l.unsuspend=v,function(){l.unsuspend=null,clearTimeout(E),clearTimeout(R)}}:null}function Qp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tm(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var em=null;function tm(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,em=new Map,d.forEach(N0,l),em=null,Qp.call(l))}function N0(l,d){if(!(d.state.loading&4)){var v=em.get(l);if(v)var E=v.get(null);else{v=new Map,em.set(l,v);for(var R=l.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<R.length;$++){var Q=R[$];(Q.nodeName==="LINK"||Q.getAttribute("media")!=="not all")&&(v.set(Q.dataset.precedence,Q),E=Q)}E&&v.set(null,E)}R=d.instance,Q=R.getAttribute("data-precedence"),$=v.get(Q)||E,$===E&&v.set(null,R),v.set(Q,R),this.count++,E=Qp.bind(this),R.addEventListener("load",E),R.addEventListener("error",E),$?$.parentNode.insertBefore(R,$.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(R,l.firstChild)),d.state.loading|=4}}var qf={$$typeof:we,Provider:null,Consumer:null,_currentValue:qe,_currentValue2:qe,_threadCount:0};function L1(l,d,v,E,R,$,Q,pe,je){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gr(0),this.hiddenUpdates=Gr(null),this.identifierPrefix=E,this.onUncaughtError=R,this.onCaughtError=$,this.onRecoverableError=Q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=je,this.incompleteTransitions=new Map}function T_(l,d,v,E,R,$,Q,pe,je,ut,xt,zt){return l=new L1(l,d,v,Q,je,ut,xt,zt,pe),d=1,$===!0&&(d|=24),$=oo(3,null,null,d),l.current=$,$.stateNode=l,d=Ol(),d.refCount++,l.pooledCache=d,d.refCount++,$.memoizedState={element:E,isDehydrated:v,cache:d},wf($),l}function $0(l){return l?(l=Rn,l):Rn}function j0(l,d,v,E,R,$){R=$0(R),E.context===null?E.context=R:E.pendingContext=R,E=Fl(d),E.payload={element:v},$=$===void 0?null:$,$!==null&&(E.callback=$),v=_c(l,E,d),v!==null&&(Rs(v,l,d),As(v,l,d))}function Rg(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<d?v:d}}function Og(l,d){Rg(l,d),(l=l.alternate)&&Rg(l,d)}function B0(l){if(l.tag===13||l.tag===31){var d=Va(l,67108864);d!==null&&Rs(d,l,67108864),Og(l,67108864)}}function F0(l){if(l.tag===13||l.tag===31){var d=Ls();d=Ta(d);var v=Va(l,d);v!==null&&Rs(v,l,d),Og(l,d)}}var nm=!0;function im(l,d,v,E){var R=Ge.T;Ge.T=null;var $=mt.p;try{mt.p=2,E_(l,d,v,E)}finally{mt.p=$,Ge.T=R}}function U0(l,d,v,E){var R=Ge.T;Ge.T=null;var $=mt.p;try{mt.p=8,E_(l,d,v,E)}finally{mt.p=$,Ge.T=R}}function E_(l,d,v,E){if(nm){var R=rm(E);if(R===null)du(l,d,E,Gf,v),V0(l,E);else if(O1(R,l,d,v,E))E.stopPropagation();else if(V0(l,E),d&4&&-1<R1.indexOf(l)){for(;R!==null;){var $=Vs(R);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var Q=Ke($.pendingLanes);if(Q!==0){var pe=$;for(pe.pendingLanes|=2,pe.entangledLanes|=2;Q;){var je=1<<31-vt(Q);pe.entanglements[1]|=je,Q&=~je}Cc($),(Gi&6)===0&&($p=na()+500,hl(0))}}break;case 31:case 13:pe=Va($,2),pe!==null&&Rs(pe,$,2),Bp(),Og($,2)}if($=rm(E),$===null&&du(l,d,E,Gf,v),$===R)break;R=$}R!==null&&E.stopPropagation()}else du(l,d,E,null,v)}}function rm(l){return l=nc(l),Ng(l)}var Gf=null;function Ng(l){if(Gf=null,l=Zo(l),l!==null){var d=f(l);if(d===null)l=null;else{var v=d.tag;if(v===13){if(l=m(d),l!==null)return l;l=null}else if(v===31){if(l=c(d),l!==null)return l;l=null}else if(v===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Gf=l,null}function Wd(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xa()){case Xe:return 2;case se:return 8;case oe:case ge:return 32;case Re:return 268435456;default:return 32}default:return 32}}var $g=!1,ed=null,Hl=null,td=null,am=new Map,Hf=new Map,ih=[],R1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V0(l,d){switch(l){case"focusin":case"focusout":ed=null;break;case"dragenter":case"dragleave":Hl=null;break;case"mouseover":case"mouseout":td=null;break;case"pointerover":case"pointerout":am.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hf.delete(d.pointerId)}}function om(l,d,v,E,R,$){return l===null||l.nativeEvent!==$?(l={blockedOn:d,domEventName:v,eventSystemFlags:E,nativeEvent:$,targetContainers:[R]},d!==null&&(d=Vs(d),d!==null&&B0(d)),l):(l.eventSystemFlags|=E,d=l.targetContainers,R!==null&&d.indexOf(R)===-1&&d.push(R),l)}function O1(l,d,v,E,R){switch(d){case"focusin":return ed=om(ed,l,d,v,E,R),!0;case"dragenter":return Hl=om(Hl,l,d,v,E,R),!0;case"mouseover":return td=om(td,l,d,v,E,R),!0;case"pointerover":var $=R.pointerId;return am.set($,om(am.get($)||null,l,d,v,E,R)),!0;case"gotpointercapture":return $=R.pointerId,Hf.set($,om(Hf.get($)||null,l,d,v,E,R)),!0}return!1}function Z0(l){var d=Zo(l.target);if(d!==null){var v=f(d);if(v!==null){if(d=v.tag,d===13){if(d=m(v),d!==null){l.blockedOn=d,pa(l.priority,function(){F0(v)});return}}else if(d===31){if(d=c(v),d!==null){l.blockedOn=d,pa(l.priority,function(){F0(v)});return}}else if(d===3&&v.stateNode.current.memoizedState.isDehydrated){l.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}l.blockedOn=null}function sm(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var v=rm(l.nativeEvent);if(v===null){v=l.nativeEvent;var E=new v.constructor(v.type,v);Th=E,v.target.dispatchEvent(E),Th=null}else return d=Vs(v),d!==null&&B0(d),l.blockedOn=v,!1;d.shift()}return!0}function q0(l,d,v){sm(l)&&v.delete(d)}function lm(){$g=!1,ed!==null&&sm(ed)&&(ed=null),Hl!==null&&sm(Hl)&&(Hl=null),td!==null&&sm(td)&&(td=null),am.forEach(q0),Hf.forEach(q0)}function jg(l,d){l.blockedOn===d&&(l.blockedOn=null,$g||($g=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lm)))}var Bg=null;function G0(l){Bg!==l&&(Bg=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Bg===l&&(Bg=null);for(var d=0;d<l.length;d+=3){var v=l[d],E=l[d+1],R=l[d+2];if(typeof E!="function"){if(Ng(E||v)===null)continue;break}var $=Vs(v);$!==null&&(l.splice(d,3),d-=3,Dr($,{pending:!0,data:R,method:v.method,action:E},E,R))}}))}function nd(l){function d(je){return jg(je,l)}ed!==null&&jg(ed,l),Hl!==null&&jg(Hl,l),td!==null&&jg(td,l),am.forEach(d),Hf.forEach(d);for(var v=0;v<ih.length;v++){var E=ih[v];E.blockedOn===l&&(E.blockedOn=null)}for(;0<ih.length&&(v=ih[0],v.blockedOn===null);)Z0(v),v.blockedOn===null&&ih.shift();if(v=(l.ownerDocument||l).$$reactFormReplay,v!=null)for(E=0;E<v.length;E+=3){var R=v[E],$=v[E+1],Q=R[Lt]||null;if(typeof $=="function")Q||G0(v);else if(Q){var pe=null;if($&&$.hasAttribute("formAction")){if(R=$,Q=$[Lt]||null)pe=Q.formAction;else if(Ng(R)!==null)continue}else pe=Q.action;typeof pe=="function"?v[E+1]=pe:(v.splice(E,3),E-=3),G0(v)}}}function A_(){function l($){$.canIntercept&&$.info==="react-transition"&&$.intercept({handler:function(){return new Promise(function(Q){return R=Q})},focusReset:"manual",scroll:"manual"})}function d(){R!==null&&(R(),R=null),E||setTimeout(v,20)}function v(){if(!E&&!navigation.transition){var $=navigation.currentEntry;$&&$.url!=null&&navigation.navigate($.url,{state:$.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,R=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(v,100),function(){E=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),R!==null&&(R(),R=null)}}}function C_(l){this._internalRoot=l}Fg.prototype.render=C_.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(u(409));var v=d.current,E=Ls();j0(v,E,l,d,null,null)},Fg.prototype.unmount=C_.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;j0(l.current,2,null,l,null,null),Bp(),d[zn]=null}};function Fg(l){this._internalRoot=l}Fg.prototype.unstable_scheduleHydration=function(l){if(l){var d=fa();l={blockedOn:null,target:l,priority:d};for(var v=0;v<ih.length&&d!==0&&d<ih[v].priority;v++);ih.splice(v,0,l),v===0&&Z0(l)}};var M_=t.version;if(M_!=="19.2.4")throw Error(u(527,M_,"19.2.4"));mt.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(u(188)):(l=Object.keys(l).join(","),Error(u(268,l)));return l=k(d),l=l!==null?B(l):null,l=l===null?null:l.stateNode,l};var H0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Ge,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ug.isDisabled&&Ug.supportsFiber)try{He=Ug.inject(H0),Be=Ug}catch{}}return L_.createRoot=function(l,d){if(!a(l))throw Error(u(299));var v=!1,E="",R=Af,$=Sc,Q=Tc;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onUncaughtError!==void 0&&(R=d.onUncaughtError),d.onCaughtError!==void 0&&($=d.onCaughtError),d.onRecoverableError!==void 0&&(Q=d.onRecoverableError)),d=T_(l,1,!1,null,null,v,E,null,R,$,Q,A_),l[zn]=d.current,a_(l),new C_(d)},L_.hydrateRoot=function(l,d,v){if(!a(l))throw Error(u(299));var E=!1,R="",$=Af,Q=Sc,pe=Tc,je=null;return v!=null&&(v.unstable_strictMode===!0&&(E=!0),v.identifierPrefix!==void 0&&(R=v.identifierPrefix),v.onUncaughtError!==void 0&&($=v.onUncaughtError),v.onCaughtError!==void 0&&(Q=v.onCaughtError),v.onRecoverableError!==void 0&&(pe=v.onRecoverableError),v.formState!==void 0&&(je=v.formState)),d=T_(l,1,!0,d,v??null,E,R,je,$,Q,pe,A_),d.context=$0(null),v=d.current,E=Ls(),E=Ta(E),R=Fl(E),R.callback=null,_c(v,R,E),v=E,d.current.lanes=v,xi(d,v),Cc(d),l[zn]=d.current,a_(l),new Fg(d)},L_.version="19.2.4",L_}var $E;function IR(){if($E)return W1.exports;$E=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),W1.exports=zR(),W1.exports}var kR=IR();function sM(e){var t,r,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=sM(e[t]))&&(u&&(u+=" "),u+=r)}else for(r in e)e[r]&&(u&&(u+=" "),u+=r);return u}function oy(){for(var e,t,r=0,u="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=sM(e))&&(u&&(u+=" "),u+=t);return u}function gd({children:e,title:t,childrenClassName:r,className:u}){return me.jsxs("div",{className:oy("p-4 rounded-xl bg-linear-to-br from-card to-card/60 bg-card shadow-md flex flex-col gap-4 2xl:h-full border dark:border-none",u),children:[me.jsx("h2",{className:"text-2xl font-semibold",children:t}),me.jsx("div",{className:oy(r,"animate-[fade-in_1s_ease-out_forwards] 2xl:flex-1"),children:e})]})}var yv=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},PR={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},DR=class{#e=PR;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},bm=new DR;function LR(e){setTimeout(e,0)}var Im=typeof window>"u"||"Deno"in globalThis;function Wl(){}function RR(e,t){return typeof e=="function"?e(t):e}function Sw(e){return typeof e=="number"&&e>=0&&e!==1/0}function lM(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ep(e,t){return typeof e=="function"?e(t):e}function yu(e,t){return typeof e=="function"?e(t):e}function jE(e,t){const{type:r="all",exact:u,fetchStatus:a,predicate:f,queryKey:m,stale:c}=e;if(m){if(u){if(t.queryHash!==S2(m,t.options))return!1}else if(!K_(t.queryKey,m))return!1}if(r!=="all"){const z=t.isActive();if(r==="active"&&!z||r==="inactive"&&z)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||a&&a!==t.state.fetchStatus||f&&!f(t))}function BE(e,t){const{exact:r,status:u,predicate:a,mutationKey:f}=e;if(f){if(!t.options.mutationKey)return!1;if(r){if(Y_(t.options.mutationKey)!==Y_(f))return!1}else if(!K_(t.options.mutationKey,f))return!1}return!(u&&t.state.status!==u||a&&!a(t))}function S2(e,t){return(t?.queryKeyHashFn||Y_)(e)}function Y_(e){return JSON.stringify(e,(t,r)=>Ew(r)?Object.keys(r).sort().reduce((u,a)=>(u[a]=r[a],u),{}):r)}function K_(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>K_(e[r],t[r])):!1}var OR=Object.prototype.hasOwnProperty;function cM(e,t,r=0){if(e===t)return e;if(r>500)return t;const u=FE(e)&&FE(t);if(!u&&!(Ew(e)&&Ew(t)))return t;const f=(u?e:Object.keys(e)).length,m=u?t:Object.keys(t),c=m.length,z=u?new Array(c):{};let k=0;for(let B=0;B<c;B++){const Z=u?B:m[B],X=e[Z],J=t[Z];if(X===J){z[Z]=X,(u?B<f:OR.call(e,Z))&&k++;continue}if(X===null||J===null||typeof X!="object"||typeof J!="object"){z[Z]=J;continue}const ce=cM(X,J,r+1);z[Z]=ce,ce===X&&k++}return f===c&&k===f?e:z}function Tw(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function FE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ew(e){if(!UE(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!UE(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function UE(e){return Object.prototype.toString.call(e)==="[object Object]"}function NR(e){return new Promise(t=>{bm.setTimeout(t,e)})}function Aw(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?cM(e,t):t}function $R(e,t,r=0){const u=[...e,t];return r&&u.length>r?u.slice(1):u}function jR(e,t,r=0){const u=[t,...e];return r&&u.length>r?u.slice(0,-1):u}var T2=Symbol();function uM(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===T2?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function hM(e,t){return typeof e=="function"?e(...t):!!e}function BR(e,t,r){let u=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??=t(),u||(u=!0,a.aborted?r():a.addEventListener("abort",r,{once:!0})),a)}),e}var FR=class extends yv{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Im&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},E2=new FR;function Cw(){let e,t;const r=new Promise((a,f)=>{e=a,t=f});r.status="pending",r.catch(()=>{});function u(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{u({status:"fulfilled",value:a}),e(a)},r.reject=a=>{u({status:"rejected",reason:a}),t(a)},r}var UR=LR;function VR(){let e=[],t=0,r=c=>{c()},u=c=>{c()},a=UR;const f=c=>{t?e.push(c):a(()=>{r(c)})},m=()=>{const c=e;e=[],c.length&&a(()=>{u(()=>{c.forEach(z=>{r(z)})})})};return{batch:c=>{let z;t++;try{z=c()}finally{t--,t||m()}return z},batchCalls:c=>(...z)=>{f(()=>{c(...z)})},schedule:f,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{u=c},setScheduler:c=>{a=c}}}var fs=VR(),ZR=class extends yv{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Im&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Ib=new ZR;function qR(e){return Math.min(1e3*2**e,3e4)}function dM(e){return(e??"online")==="online"?Ib.isOnline():!0}var Mw=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function fM(e){let t=!1,r=0,u;const a=Cw(),f=()=>a.status!=="pending",m=ee=>{if(!f()){const ae=new Mw(ee);X(ae),e.onCancel?.(ae)}},c=()=>{t=!0},z=()=>{t=!1},k=()=>E2.isFocused()&&(e.networkMode==="always"||Ib.isOnline())&&e.canRun(),B=()=>dM(e.networkMode)&&e.canRun(),Z=ee=>{f()||(u?.(),a.resolve(ee))},X=ee=>{f()||(u?.(),a.reject(ee))},J=()=>new Promise(ee=>{u=ae=>{(f()||k())&&ee(ae)},e.onPause?.()}).then(()=>{u=void 0,f()||e.onContinue?.()}),ce=()=>{if(f())return;let ee;const ae=r===0?e.initialPromise:void 0;try{ee=ae??e.fn()}catch(Me){ee=Promise.reject(Me)}Promise.resolve(ee).then(Z).catch(Me=>{if(f())return;const Ae=e.retry??(Im?0:3),we=e.retryDelay??qR,xe=typeof we=="function"?we(r,Me):we,Se=Ae===!0||typeof Ae=="number"&&r<Ae||typeof Ae=="function"&&Ae(r,Me);if(t||!Se){X(Me);return}r++,e.onFail?.(r,Me),NR(xe).then(()=>k()?void 0:J()).then(()=>{t?X(Me):ce()})})};return{promise:a,status:()=>a.status,cancel:m,continue:()=>(u?.(),a),cancelRetry:c,continueRetry:z,canStart:B,start:()=>(B()?ce():J().then(ce),a)}}var pM=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Sw(this.gcTime)&&(this.#e=bm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Im?1/0:300*1e3))}clearGcTimeout(){this.#e&&(bm.clearTimeout(this.#e),this.#e=void 0)}},GR=class extends pM{#e;#t;#n;#r;#i;#s;#o;constructor(e){super(),this.#o=!1,this.#s=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#n=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=ZE(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){if(this.options={...this.#s,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=ZE(this.options);t.data!==void 0&&(this.setState(VE(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const r=Aw(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#i?.promise;return this.#i?.cancel(e),t?t.then(Wl).catch(Wl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>yu(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===T2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ep(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!lM(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#i&&(this.#o?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(z=>z.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,u=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},a=()=>{const c=uM(this.options,t),k=(()=>{const B={client:this.#r,queryKey:this.queryKey,meta:this.meta};return u(B),B})();return this.#o=!1,this.options.persister?this.options.persister(c,k,this):c(k)},m=(()=>{const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:a};return u(c),c})();this.options.behavior?.onFetch(m,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==m.fetchOptions?.meta)&&this.#a({type:"fetch",meta:m.fetchOptions?.meta}),this.#i=fM({initialPromise:t?.initialPromise,fn:m.fetchFn,onCancel:c=>{c instanceof Mw&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(c,z)=>{this.#a({type:"failed",failureCount:c,error:z})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode,canRun:()=>!0});try{const c=await this.#i.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Mw){if(c.silent)return this.#i.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...mM(r.data,this.options),fetchMeta:e.meta??null};case"success":const u={...r,...VE(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?u:void 0,u;case"error":const a=e.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),fs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function mM(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:dM(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function VE(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ZE(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,u=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?u??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var gM=class extends yv{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=Cw(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#o;#a;#m;#d;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),qE(this.#t,this.options)?this.#h():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return zw(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return zw(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#x(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof yu(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),t._defaulted&&!Tw(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const u=this.hasListeners();u&&GE(this.#t,r,this.options,t)&&this.#h(),this.updateResult(),u&&(this.#t!==r||yu(this.options.enabled,this.#t)!==yu(t.enabled,this.#t)||ep(this.options.staleTime,this.#t)!==ep(t.staleTime,this.#t))&&this.#g();const a=this.#y();u&&(this.#t!==r||yu(this.options.enabled,this.#t)!==yu(t.enabled,this.#t)||a!==this.#l)&&this.#_(a)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return WR(this,r)&&(this.#r=r,this.#s=this.options,this.#i=this.#t.state),r}getCurrentResult(){return this.#r}trackResult(e,t){return new Proxy(e,{get:(r,u)=>(this.trackProp(u),t?.(u),u==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,u))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#h({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(e){this.#w();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Wl)),t}#g(){this.#b();const e=ep(this.options.staleTime,this.#t);if(Im||this.#r.isStale||!Sw(e))return;const r=lM(this.#r.dataUpdatedAt,e)+1;this.#c=bm.setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#_(e){this.#x(),this.#l=e,!(Im||yu(this.options.enabled,this.#t)===!1||!Sw(this.#l)||this.#l===0)&&(this.#u=bm.setInterval(()=>{(this.options.refetchIntervalInBackground||E2.isFocused())&&this.#h()},this.#l))}#v(){this.#g(),this.#_(this.#y())}#b(){this.#c&&(bm.clearTimeout(this.#c),this.#c=void 0)}#x(){this.#u&&(bm.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,u=this.options,a=this.#r,f=this.#i,m=this.#s,z=e!==r?e.state:this.#n,{state:k}=e;let B={...k},Z=!1,X;if(t._optimisticResults){const it=this.hasListeners(),Rt=!it&&qE(e,t),Pt=it&&GE(e,r,t,u);(Rt||Pt)&&(B={...B,...mM(k.data,e.options)}),t._optimisticResults==="isRestoring"&&(B.fetchStatus="idle")}let{error:J,errorUpdatedAt:ce,status:ee}=B;X=B.data;let ae=!1;if(t.placeholderData!==void 0&&X===void 0&&ee==="pending"){let it;a?.isPlaceholderData&&t.placeholderData===m?.placeholderData?(it=a.data,ae=!0):it=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,it!==void 0&&(ee="success",X=Aw(a?.data,it,t),Z=!0)}if(t.select&&X!==void 0&&!ae)if(a&&X===f?.data&&t.select===this.#m)X=this.#d;else try{this.#m=t.select,X=t.select(X),X=Aw(a?.data,X,t),this.#d=X,this.#a=null}catch(it){this.#a=it}this.#a&&(J=this.#a,X=this.#d,ce=Date.now(),ee="error");const Me=B.fetchStatus==="fetching",Ae=ee==="pending",we=ee==="error",xe=Ae&&Me,Se=X!==void 0,Ue={status:ee,fetchStatus:B.fetchStatus,isPending:Ae,isSuccess:ee==="success",isError:we,isInitialLoading:xe,isLoading:xe,data:X,dataUpdatedAt:B.dataUpdatedAt,error:J,errorUpdatedAt:ce,failureCount:B.fetchFailureCount,failureReason:B.fetchFailureReason,errorUpdateCount:B.errorUpdateCount,isFetched:B.dataUpdateCount>0||B.errorUpdateCount>0,isFetchedAfterMount:B.dataUpdateCount>z.dataUpdateCount||B.errorUpdateCount>z.errorUpdateCount,isFetching:Me,isRefetching:Me&&!Ae,isLoadingError:we&&!Se,isPaused:B.fetchStatus==="paused",isPlaceholderData:Z,isRefetchError:we&&Se,isStale:A2(e,t),refetch:this.refetch,promise:this.#o,isEnabled:yu(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const it=Ue.data!==void 0,Rt=Ue.status==="error"&&!it,Pt=cn=>{Rt?cn.reject(Ue.error):it&&cn.resolve(Ue.data)},$t=()=>{const cn=this.#o=Ue.promise=Cw();Pt(cn)},Zt=this.#o;switch(Zt.status){case"pending":e.queryHash===r.queryHash&&Pt(Zt);break;case"fulfilled":(Rt||Ue.data!==Zt.value)&&$t();break;case"rejected":(!Rt||Ue.error!==Zt.reason)&&$t();break}}return Ue}updateResult(){const e=this.#r,t=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#f=this.#t),Tw(t,e))return;this.#r=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:u}=this.options,a=typeof u=="function"?u():u;if(a==="all"||!a&&!this.#p.size)return!0;const f=new Set(a??this.#p);return this.options.throwOnError&&f.add("error"),Object.keys(this.#r).some(m=>{const c=m;return this.#r[c]!==e[c]&&f.has(c)})};this.#S({listeners:r()})}#w(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(e){fs.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function HR(e,t){return yu(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function qE(e,t){return HR(e,t)||e.state.data!==void 0&&zw(e,t,t.refetchOnMount)}function zw(e,t,r){if(yu(t.enabled,e)!==!1&&ep(t.staleTime,e)!=="static"){const u=typeof r=="function"?r(e):r;return u==="always"||u!==!1&&A2(e,t)}return!1}function GE(e,t,r,u){return(e!==t||yu(u.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&A2(e,r)}function A2(e,t){return yu(t.enabled,e)!==!1&&e.isStaleByTime(ep(t.staleTime,e))}function WR(e,t){return!Tw(e.getCurrentResult(),t)}function HE(e){return{onFetch:(t,r)=>{const u=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,f=t.state.data?.pages||[],m=t.state.data?.pageParams||[];let c={pages:[],pageParams:[]},z=0;const k=async()=>{let B=!1;const Z=ce=>{BR(ce,()=>t.signal,()=>B=!0)},X=uM(t.options,t.fetchOptions),J=async(ce,ee,ae)=>{if(B)return Promise.reject();if(ee==null&&ce.pages.length)return Promise.resolve(ce);const Ae=(()=>{const Fe={client:t.client,queryKey:t.queryKey,pageParam:ee,direction:ae?"backward":"forward",meta:t.options.meta};return Z(Fe),Fe})(),we=await X(Ae),{maxPages:xe}=t.options,Se=ae?jR:$R;return{pages:Se(ce.pages,we,xe),pageParams:Se(ce.pageParams,ee,xe)}};if(a&&f.length){const ce=a==="backward",ee=ce?XR:WE,ae={pages:f,pageParams:m},Me=ee(u,ae);c=await J(ae,Me,ce)}else{const ce=e??f.length;do{const ee=z===0?m[0]??u.initialPageParam:WE(u,c);if(z>0&&ee==null)break;c=await J(c,ee),z++}while(z<ce)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(k,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=k}}}function WE(e,{pages:t,pageParams:r}){const u=t.length-1;return t.length>0?e.getNextPageParam(t[u],t,r[u],r):void 0}function XR(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var YR=class extends pM{#e;#t;#n;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||KR(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#i({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=fM({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(f,m)=>{this.#i({type:"failed",failureCount:f,error:m})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const u=this.state.status==="pending",a=!this.#r.canStart();try{if(u)t();else{this.#i({type:"pending",variables:e,isPaused:a}),this.#n.config.onMutate&&await this.#n.config.onMutate(e,this,r);const m=await this.options.onMutate?.(e,r);m!==this.state.context&&this.#i({type:"pending",context:m,variables:e,isPaused:a})}const f=await this.#r.start();return await this.#n.config.onSuccess?.(f,e,this.state.context,this,r),await this.options.onSuccess?.(f,e,this.state.context,r),await this.#n.config.onSettled?.(f,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(f,null,e,this.state.context,r),this.#i({type:"success",data:f}),f}catch(f){try{await this.#n.config.onError?.(f,e,this.state.context,this,r)}catch(m){Promise.reject(m)}try{await this.options.onError?.(f,e,this.state.context,r)}catch(m){Promise.reject(m)}try{await this.#n.config.onSettled?.(void 0,f,this.state.variables,this.state.context,this,r)}catch(m){Promise.reject(m)}try{await this.options.onSettled?.(void 0,f,e,this.state.context,r)}catch(m){Promise.reject(m)}throw this.#i({type:"error",error:f}),f}finally{this.#n.runNext(this)}}#i(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),fs.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function KR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var JR=class extends yv{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,r){const u=new YR({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:r});return this.add(u),u}add(e){this.#e.add(e);const t=Y0(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Y0(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const u=r.indexOf(e);u!==-1&&r.splice(u,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Y0(e);if(typeof t=="string"){const u=this.#t.get(t)?.find(a=>a.state.status==="pending");return!u||u===e}else return!0}runNext(e){const t=Y0(e);return typeof t=="string"?this.#t.get(t)?.find(u=>u!==e&&u.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){fs.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>BE(t,r))}findAll(e={}){return this.getAll().filter(t=>BE(e,t))}notify(e){fs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return fs.batch(()=>Promise.all(e.map(t=>t.continue().catch(Wl))))}};function Y0(e){return e.options.scope?.id}var QR=class extends yv{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const u=t.queryKey,a=t.queryHash??S2(u,t);let f=this.get(a);return f||(f=new GR({client:e,queryKey:u,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(u)}),this.add(f)),f}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){fs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>jE(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>jE(e,r)):t}notify(e){fs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){fs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){fs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},eO=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(e={}){this.#e=e.queryCache||new QR,this.#t=e.mutationCache||new JR,this.#n=e.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=E2.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Ib.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),u=r.state.data;return u===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ep(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(u))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const u=r.data;return[t,u]})}setQueryData(e,t,r){const u=this.defaultQueryOptions({queryKey:e}),f=this.#e.get(u.queryHash)?.state.data,m=RR(t,f);if(m!==void 0)return this.#e.build(this,u).setData(m,{...r,manual:!0})}setQueriesData(e,t,r){return fs.batch(()=>this.#e.findAll(e).map(({queryKey:u})=>[u,this.setQueryData(u,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;fs.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return fs.batch(()=>(r.findAll(e).forEach(u=>{u.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},u=fs.batch(()=>this.#e.findAll(e).map(a=>a.cancel(r)));return Promise.all(u).then(Wl).catch(Wl)}invalidateQueries(e,t={}){return fs.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},u=fs.batch(()=>this.#e.findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let f=a.fetch(void 0,r);return r.throwOnError||(f=f.catch(Wl)),a.state.fetchStatus==="paused"?Promise.resolve():f}));return Promise.all(u).then(Wl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(ep(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Wl).catch(Wl)}fetchInfiniteQuery(e){return e.behavior=HE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Wl).catch(Wl)}ensureInfiniteQueryData(e){return e.behavior=HE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ib.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#r.set(Y_(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#r.values()],r={};return t.forEach(u=>{K_(e,u.queryKey)&&Object.assign(r,u.defaultOptions)}),r}setMutationDefaults(e,t){this.#i.set(Y_(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()],r={};return t.forEach(u=>{K_(e,u.mutationKey)&&Object.assign(r,u.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=S2(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===T2&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},yM=de.createContext(void 0),tO=e=>{const t=de.useContext(yM);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},nO=({client:e,children:t})=>(de.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),me.jsx(yM.Provider,{value:e,children:t})),_M=de.createContext(!1),iO=()=>de.useContext(_M);_M.Provider;function rO(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var aO=de.createContext(rO()),oO=()=>de.useContext(aO),sO=(e,t,r)=>{const u=r?.state.error&&typeof e.throwOnError=="function"?hM(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||u)&&(t.isReset()||(e.retryOnMount=!1))},lO=e=>{de.useEffect(()=>{e.clearReset()},[e])},cO=({result:e,errorResetBoundary:t,throwOnError:r,query:u,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&u&&(a&&e.data===void 0||hM(r,[e.error,u])),uO=(e,t)=>t.state.data===void 0,hO=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),u=e.staleTime;e.staleTime=typeof u=="function"?(...a)=>r(u(...a)):r(u),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},dO=(e,t)=>e.isLoading&&e.isFetching&&!t,fO=(e,t)=>e?.suspense&&t.isPending,XE=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function vM(e,t,r){const u=iO(),a=oO(),f=tO(),m=f.defaultQueryOptions(e);f.getDefaultOptions().queries?._experimental_beforeQuery?.(m);const c=f.getQueryCache().get(m.queryHash);m._optimisticResults=u?"isRestoring":"optimistic",hO(m),sO(m,a,c),lO(a);const z=!f.getQueryCache().get(m.queryHash),[k]=de.useState(()=>new t(f,m)),B=k.getOptimisticResult(m),Z=!u&&e.subscribed!==!1;if(de.useSyncExternalStore(de.useCallback(X=>{const J=Z?k.subscribe(fs.batchCalls(X)):Wl;return k.updateResult(),J},[k,Z]),()=>k.getCurrentResult(),()=>k.getCurrentResult()),de.useEffect(()=>{k.setOptions(m)},[m,k]),fO(m,B))throw XE(m,k,a);if(cO({result:B,errorResetBoundary:a,throwOnError:m.throwOnError,query:c,suspense:m.suspense}))throw B.error;return f.getDefaultOptions().queries?._experimental_afterQuery?.(m,B),m.experimental_prefetchInRender&&!Im&&dO(B,u)&&(z?XE(m,k,a):c?.promise)?.catch(Wl).finally(()=>{k.updateResult()}),m.notifyOnChangeProps?B:k.trackResult(B)}function pO(e,t){return vM(e,gM)}function _v(e,t){return vM({...e,enabled:!0,suspense:!0,throwOnError:uO,placeholderData:void 0},gM)}const bM=Object.freeze({status:"aborted"});function nt(e,t,r){function u(c,z){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:z,constr:m,traits:new Set},enumerable:!1}),c._zod.traits.has(e))return;c._zod.traits.add(e),t(c,z);const k=m.prototype,B=Object.keys(k);for(let Z=0;Z<B.length;Z++){const X=B[Z];X in c||(c[X]=k[X].bind(c))}}const a=r?.Parent??Object;class f extends a{}Object.defineProperty(f,"name",{value:e});function m(c){var z;const k=r?.Parent?new f:this;u(k,c),(z=k._zod).deferred??(z.deferred=[]);for(const B of k._zod.deferred)B();return k}return Object.defineProperty(m,"init",{value:u}),Object.defineProperty(m,Symbol.hasInstance,{value:c=>r?.Parent&&c instanceof r.Parent?!0:c?._zod?.traits?.has(e)}),Object.defineProperty(m,"name",{value:e}),m}const xM=Symbol("zod_brand");class Sm extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class nx extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const kb={};function js(e){return e&&Object.assign(kb,e),kb}function mO(e){return e}function gO(e){return e}function yO(e){}function _O(e){throw new Error("Unexpected value in exhaustive check")}function vO(e){}function C2(e){const t=Object.values(e).filter(u=>typeof u=="number");return Object.entries(e).filter(([u,a])=>t.indexOf(+u)===-1).map(([u,a])=>a)}function Gt(e,t="|"){return e.map(r=>jn(r)).join(t)}function Pb(e,t){return typeof t=="bigint"?t.toString():t}function vv(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function jm(e){return e==null}function ix(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function wM(e,t){const r=(e.toString().split(".")[1]||"").length,u=t.toString();let a=(u.split(".")[1]||"").length;if(a===0&&/\d?e-\d?/.test(u)){const z=u.match(/\d?e-(\d?)/);z?.[1]&&(a=Number.parseInt(z[1]))}const f=r>a?r:a,m=Number.parseInt(e.toFixed(f).replace(".","")),c=Number.parseInt(t.toFixed(f).replace(".",""));return m%c/10**f}const YE=Symbol("evaluating");function fi(e,t,r){let u;Object.defineProperty(e,t,{get(){if(u!==YE)return u===void 0&&(u=YE,u=r()),u},set(a){Object.defineProperty(e,t,{value:a})},configurable:!0})}function bO(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function up(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function yd(...e){const t={};for(const r of e){const u=Object.getOwnPropertyDescriptors(r);Object.assign(t,u)}return Object.defineProperties({},t)}function xO(e){return yd(e._zod.def)}function wO(e,t){return t?t.reduce((r,u)=>r?.[u],e):e}function SO(e){const t=Object.keys(e),r=t.map(u=>e[u]);return Promise.all(r).then(u=>{const a={};for(let f=0;f<t.length;f++)a[t[f]]=u[f];return a})}function TO(e=10){const t="abcdefghijklmnopqrstuvwxyz";let r="";for(let u=0;u<e;u++)r+=t[Math.floor(Math.random()*t.length)];return r}function Iw(e){return JSON.stringify(e)}function SM(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const M2="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function sy(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const TM=vv(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function km(e){if(sy(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const r=t.prototype;return!(sy(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function rx(e){return km(e)?{...e}:Array.isArray(e)?[...e]:e}function EO(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}const AO=e=>{const t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":e===null?"null":e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?"promise":typeof Map<"u"&&e instanceof Map?"map":typeof Set<"u"&&e instanceof Set?"set":typeof Date<"u"&&e instanceof Date?"date":typeof File<"u"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},Db=new Set(["string","number","symbol"]),EM=new Set(["string","number","bigint","boolean","symbol","undefined"]);function tf(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xu(e,t,r){const u=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(u._zod.parent=e),u}function kt(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function CO(e){let t;return new Proxy({},{get(r,u,a){return t??(t=e()),Reflect.get(t,u,a)},set(r,u,a,f){return t??(t=e()),Reflect.set(t,u,a,f)},has(r,u){return t??(t=e()),Reflect.has(t,u)},deleteProperty(r,u){return t??(t=e()),Reflect.deleteProperty(t,u)},ownKeys(r){return t??(t=e()),Reflect.ownKeys(t)},getOwnPropertyDescriptor(r,u){return t??(t=e()),Reflect.getOwnPropertyDescriptor(t,u)},defineProperty(r,u,a){return t??(t=e()),Reflect.defineProperty(t,u,a)}})}function jn(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}function AM(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const CM={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},MM={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function zM(e,t){const r=e._zod.def,u=r.checks;if(u&&u.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const f=yd(e._zod.def,{get shape(){const m={};for(const c in t){if(!(c in r.shape))throw new Error(`Unrecognized key: "${c}"`);t[c]&&(m[c]=r.shape[c])}return up(this,"shape",m),m},checks:[]});return xu(e,f)}function IM(e,t){const r=e._zod.def,u=r.checks;if(u&&u.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const f=yd(e._zod.def,{get shape(){const m={...e._zod.def.shape};for(const c in t){if(!(c in r.shape))throw new Error(`Unrecognized key: "${c}"`);t[c]&&delete m[c]}return up(this,"shape",m),m},checks:[]});return xu(e,f)}function kM(e,t){if(!km(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0){const f=e._zod.def.shape;for(const m in t)if(Object.getOwnPropertyDescriptor(f,m)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const a=yd(e._zod.def,{get shape(){const f={...e._zod.def.shape,...t};return up(this,"shape",f),f}});return xu(e,a)}function PM(e,t){if(!km(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r=yd(e._zod.def,{get shape(){const u={...e._zod.def.shape,...t};return up(this,"shape",u),u}});return xu(e,r)}function DM(e,t){const r=yd(e._zod.def,{get shape(){const u={...e._zod.def.shape,...t._zod.def.shape};return up(this,"shape",u),u},get catchall(){return t._zod.def.catchall},checks:[]});return xu(e,r)}function LM(e,t,r){const a=t._zod.def.checks;if(a&&a.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const m=yd(t._zod.def,{get shape(){const c=t._zod.def.shape,z={...c};if(r)for(const k in r){if(!(k in c))throw new Error(`Unrecognized key: "${k}"`);r[k]&&(z[k]=e?new e({type:"optional",innerType:c[k]}):c[k])}else for(const k in c)z[k]=e?new e({type:"optional",innerType:c[k]}):c[k];return up(this,"shape",z),z},checks:[]});return xu(t,m)}function RM(e,t,r){const u=yd(t._zod.def,{get shape(){const a=t._zod.def.shape,f={...a};if(r)for(const m in r){if(!(m in f))throw new Error(`Unrecognized key: "${m}"`);r[m]&&(f[m]=new e({type:"nonoptional",innerType:a[m]}))}else for(const m in a)f[m]=new e({type:"nonoptional",innerType:a[m]});return up(this,"shape",f),f}});return xu(t,u)}function xm(e,t=0){if(e.aborted===!0)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function fh(e,t){return t.map(r=>{var u;return(u=r).path??(u.path=[]),r.path.unshift(e),r})}function j_(e){return typeof e=="string"?e:e?.message}function bu(e,t,r){const u={...e,path:e.path??[]};if(!e.message){const a=j_(e.inst?._zod.def?.error?.(e))??j_(t?.error?.(e))??j_(r.customError?.(e))??j_(r.localeError?.(e))??"Invalid input";u.message=a}return delete u.inst,delete u.continue,t?.reportInput||delete u.input,u}function ax(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function ox(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Fn(e){const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"nan":"number";case"object":{if(e===null)return"null";if(Array.isArray(e))return"array";const r=e;if(r&&Object.getPrototypeOf(r)!==Object.prototype&&"constructor"in r&&r.constructor)return r.constructor.name}}return t}function ly(...e){const[t,r,u]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:u}:{...t}}function MO(e){return Object.entries(e).filter(([t,r])=>Number.isNaN(Number.parseInt(t,10))).map(t=>t[1])}function OM(e){const t=atob(e),r=new Uint8Array(t.length);for(let u=0;u<t.length;u++)r[u]=t.charCodeAt(u);return r}function NM(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function zO(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return OM(t+r)}function IO(e){return NM(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function kO(e){const t=e.replace(/^0x/,"");if(t.length%2!==0)throw new Error("Invalid hex string length");const r=new Uint8Array(t.length/2);for(let u=0;u<t.length;u+=2)r[u/2]=Number.parseInt(t.slice(u,u+2),16);return r}function PO(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}class DO{constructor(...t){}}const $M=Object.freeze(Object.defineProperty({__proto__:null,BIGINT_FORMAT_RANGES:MM,Class:DO,NUMBER_FORMAT_RANGES:CM,aborted:xm,allowsEval:TM,assert:vO,assertEqual:mO,assertIs:yO,assertNever:_O,assertNotEqual:gO,assignProp:up,base64ToUint8Array:OM,base64urlToUint8Array:zO,cached:vv,captureStackTrace:M2,cleanEnum:MO,cleanRegex:ix,clone:xu,cloneDef:xO,createTransparentProxy:CO,defineLazy:fi,esc:Iw,escapeRegex:tf,extend:kM,finalizeIssue:bu,floatSafeRemainder:wM,getElementAtPath:wO,getEnumValues:C2,getLengthableOrigin:ox,getParsedType:AO,getSizableOrigin:ax,hexToUint8Array:kO,isObject:sy,isPlainObject:km,issue:ly,joinValues:Gt,jsonStringifyReplacer:Pb,merge:DM,mergeDefs:yd,normalizeParams:kt,nullish:jm,numKeys:EO,objectClone:bO,omit:IM,optionalKeys:AM,parsedType:Fn,partial:LM,pick:zM,prefixIssues:fh,primitiveTypes:EM,promiseAllObject:SO,propertyKeyTypes:Db,randomString:TO,required:RM,safeExtend:PM,shallowClone:rx,slugify:SM,stringifyPrimitive:jn,uint8ArrayToBase64:NM,uint8ArrayToBase64url:IO,uint8ArrayToHex:PO,unwrapMessage:j_},Symbol.toStringTag,{value:"Module"})),jM=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Pb,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},z2=nt("$ZodError",jM),Uc=nt("$ZodError",jM,{Parent:Error});function I2(e,t=r=>r.message){const r={},u=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):u.push(t(a));return{formErrors:u,fieldErrors:r}}function k2(e,t=r=>r.message){const r={_errors:[]},u=a=>{for(const f of a.issues)if(f.code==="invalid_union"&&f.errors.length)f.errors.map(m=>u({issues:m}));else if(f.code==="invalid_key")u({issues:f.issues});else if(f.code==="invalid_element")u({issues:f.issues});else if(f.path.length===0)r._errors.push(t(f));else{let m=r,c=0;for(;c<f.path.length;){const z=f.path[c];c===f.path.length-1?(m[z]=m[z]||{_errors:[]},m[z]._errors.push(t(f))):m[z]=m[z]||{_errors:[]},m=m[z],c++}}};return u(e),r}function BM(e,t=r=>r.message){const r={errors:[]},u=(a,f=[])=>{var m,c;for(const z of a.issues)if(z.code==="invalid_union"&&z.errors.length)z.errors.map(k=>u({issues:k},z.path));else if(z.code==="invalid_key")u({issues:z.issues},z.path);else if(z.code==="invalid_element")u({issues:z.issues},z.path);else{const k=[...f,...z.path];if(k.length===0){r.errors.push(t(z));continue}let B=r,Z=0;for(;Z<k.length;){const X=k[Z],J=Z===k.length-1;typeof X=="string"?(B.properties??(B.properties={}),(m=B.properties)[X]??(m[X]={errors:[]}),B=B.properties[X]):(B.items??(B.items=[]),(c=B.items)[X]??(c[X]={errors:[]}),B=B.items[X]),J&&B.errors.push(t(z)),Z++}}};return u(e),r}function FM(e){const t=[],r=e.map(u=>typeof u=="object"?u.key:u);for(const u of r)typeof u=="number"?t.push(`[${u}]`):typeof u=="symbol"?t.push(`[${JSON.stringify(String(u))}]`):/[^\w$]/.test(u)?t.push(`[${JSON.stringify(u)}]`):(t.length&&t.push("."),t.push(u));return t.join("")}function UM(e){const t=[],r=[...e.issues].sort((u,a)=>(u.path??[]).length-(a.path??[]).length);for(const u of r)t.push(` ${u.message}`),u.path?.length&&t.push(`   at ${FM(u.path)}`);return t.join(`
`)}const bv=e=>(t,r,u,a)=>{const f=u?Object.assign(u,{async:!1}):{async:!1},m=t._zod.run({value:r,issues:[]},f);if(m instanceof Promise)throw new Sm;if(m.issues.length){const c=new(a?.Err??e)(m.issues.map(z=>bu(z,f,js())));throw M2(c,a?.callee),c}return m.value},kw=bv(Uc),xv=e=>async(t,r,u,a)=>{const f=u?Object.assign(u,{async:!0}):{async:!0};let m=t._zod.run({value:r,issues:[]},f);if(m instanceof Promise&&(m=await m),m.issues.length){const c=new(a?.Err??e)(m.issues.map(z=>bu(z,f,js())));throw M2(c,a?.callee),c}return m.value},Pw=xv(Uc),wv=e=>(t,r,u)=>{const a=u?{...u,async:!1}:{async:!1},f=t._zod.run({value:r,issues:[]},a);if(f instanceof Promise)throw new Sm;return f.issues.length?{success:!1,error:new(e??z2)(f.issues.map(m=>bu(m,a,js())))}:{success:!0,data:f.value}},VM=wv(Uc),Sv=e=>async(t,r,u)=>{const a=u?Object.assign(u,{async:!0}):{async:!0};let f=t._zod.run({value:r,issues:[]},a);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new e(f.issues.map(m=>bu(m,a,js())))}:{success:!0,data:f.value}},ZM=Sv(Uc),P2=e=>(t,r,u)=>{const a=u?Object.assign(u,{direction:"backward"}):{direction:"backward"};return bv(e)(t,r,a)},LO=P2(Uc),D2=e=>(t,r,u)=>bv(e)(t,r,u),RO=D2(Uc),L2=e=>async(t,r,u)=>{const a=u?Object.assign(u,{direction:"backward"}):{direction:"backward"};return xv(e)(t,r,a)},OO=L2(Uc),R2=e=>async(t,r,u)=>xv(e)(t,r,u),NO=R2(Uc),O2=e=>(t,r,u)=>{const a=u?Object.assign(u,{direction:"backward"}):{direction:"backward"};return wv(e)(t,r,a)},$O=O2(Uc),N2=e=>(t,r,u)=>wv(e)(t,r,u),jO=N2(Uc),$2=e=>async(t,r,u)=>{const a=u?Object.assign(u,{direction:"backward"}):{direction:"backward"};return Sv(e)(t,r,a)},BO=$2(Uc),j2=e=>async(t,r,u)=>Sv(e)(t,r,u),FO=j2(Uc),qM=/^[cC][^\s-]{8,}$/,GM=/^[0-9a-z]+$/,HM=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,WM=/^[0-9a-vA-V]{20}$/,XM=/^[A-Za-z0-9]{27}$/,YM=/^[a-zA-Z0-9_-]{21}$/,KM=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,UO=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,JM=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,cy=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,VO=cy(4),ZO=cy(6),qO=cy(7),QM=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,GO=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,HO=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ez=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,WO=ez,XO=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,YO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function tz(){return new RegExp(YO,"u")}const nz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,iz=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,rz=e=>{const t=tf(e??":");return new RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},az=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,oz=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sz=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,B2=/^[A-Za-z0-9_-]*$/,lz=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,cz=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,uz=/^\+[1-9]\d{6,14}$/,hz="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",dz=new RegExp(`^${hz}$`);function fz(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function pz(e){return new RegExp(`^${fz(e)}$`)}function mz(e){const t=fz({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const u=`${t}(?:${r.join("|")})`;return new RegExp(`^${hz}T(?:${u})$`)}const gz=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},yz=/^-?\d+n?$/,_z=/^-?\d+$/,F2=/^-?\d+(?:\.\d+)?$/,vz=/^(?:true|false)$/i,bz=/^null$/i,xz=/^undefined$/i,wz=/^[^A-Z]*$/,Sz=/^[^a-z]*$/,Tz=/^[0-9a-fA-F]*$/;function Tv(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function Ev(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}const KO=/^[0-9a-fA-F]{32}$/,JO=Tv(22,"=="),QO=Ev(22),e6=/^[0-9a-fA-F]{40}$/,t6=Tv(27,"="),n6=Ev(27),i6=/^[0-9a-fA-F]{64}$/,r6=Tv(43,"="),a6=Ev(43),o6=/^[0-9a-fA-F]{96}$/,s6=Tv(64,""),l6=Ev(64),c6=/^[0-9a-fA-F]{128}$/,u6=Tv(86,"=="),h6=Ev(86),U2=Object.freeze(Object.defineProperty({__proto__:null,base64:sz,base64url:B2,bigint:yz,boolean:vz,browserEmail:XO,cidrv4:az,cidrv6:oz,cuid:qM,cuid2:GM,date:dz,datetime:mz,domain:cz,duration:KM,e164:uz,email:QM,emoji:tz,extendedDuration:UO,guid:JM,hex:Tz,hostname:lz,html5Email:GO,idnEmail:WO,integer:_z,ipv4:nz,ipv6:iz,ksuid:XM,lowercase:wz,mac:rz,md5_base64:JO,md5_base64url:QO,md5_hex:KO,nanoid:YM,null:bz,number:F2,rfc5322Email:HO,sha1_base64:t6,sha1_base64url:n6,sha1_hex:e6,sha256_base64:r6,sha256_base64url:a6,sha256_hex:i6,sha384_base64:s6,sha384_base64url:l6,sha384_hex:o6,sha512_base64:u6,sha512_base64url:h6,sha512_hex:c6,string:gz,time:pz,ulid:HM,undefined:xz,unicodeEmail:ez,uppercase:Sz,uuid:cy,uuid4:VO,uuid6:ZO,uuid7:qO,xid:WM},Symbol.toStringTag,{value:"Module"})),ha=nt("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Ez={number:"number",bigint:"bigint",object:"date"},V2=nt("$ZodCheckLessThan",(e,t)=>{ha.init(e,t);const r=Ez[typeof t.value];e._zod.onattach.push(u=>{const a=u._zod.bag,f=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<f&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=u=>{(t.inclusive?u.value<=t.value:u.value<t.value)||u.issues.push({origin:r,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:u.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Z2=nt("$ZodCheckGreaterThan",(e,t)=>{ha.init(e,t);const r=Ez[typeof t.value];e._zod.onattach.push(u=>{const a=u._zod.bag,f=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>f&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=u=>{(t.inclusive?u.value>=t.value:u.value>t.value)||u.issues.push({origin:r,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:u.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Az=nt("$ZodCheckMultipleOf",(e,t)=>{ha.init(e,t),e._zod.onattach.push(r=>{var u;(u=r._zod.bag).multipleOf??(u.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):wM(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Cz=nt("$ZodCheckNumberFormat",(e,t)=>{ha.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),u=r?"int":"number",[a,f]=CM[t.format];e._zod.onattach.push(m=>{const c=m._zod.bag;c.format=t.format,c.minimum=a,c.maximum=f,r&&(c.pattern=_z)}),e._zod.check=m=>{const c=m.value;if(r){if(!Number.isInteger(c)){m.issues.push({expected:u,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?m.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:u,inclusive:!0,continue:!t.abort}):m.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:u,inclusive:!0,continue:!t.abort});return}}c<a&&m.issues.push({origin:"number",input:c,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),c>f&&m.issues.push({origin:"number",input:c,code:"too_big",maximum:f,inclusive:!0,inst:e,continue:!t.abort})}}),Mz=nt("$ZodCheckBigIntFormat",(e,t)=>{ha.init(e,t);const[r,u]=MM[t.format];e._zod.onattach.push(a=>{const f=a._zod.bag;f.format=t.format,f.minimum=r,f.maximum=u}),e._zod.check=a=>{const f=a.value;f<r&&a.issues.push({origin:"bigint",input:f,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),f>u&&a.issues.push({origin:"bigint",input:f,code:"too_big",maximum:u,inclusive:!0,inst:e,continue:!t.abort})}}),zz=nt("$ZodCheckMaxSize",(e,t)=>{var r;ha.init(e,t),(r=e._zod.def).when??(r.when=u=>{const a=u.value;return!jm(a)&&a.size!==void 0}),e._zod.onattach.push(u=>{const a=u._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(u._zod.bag.maximum=t.maximum)}),e._zod.check=u=>{const a=u.value;a.size<=t.maximum||u.issues.push({origin:ax(a),code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),Iz=nt("$ZodCheckMinSize",(e,t)=>{var r;ha.init(e,t),(r=e._zod.def).when??(r.when=u=>{const a=u.value;return!jm(a)&&a.size!==void 0}),e._zod.onattach.push(u=>{const a=u._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(u._zod.bag.minimum=t.minimum)}),e._zod.check=u=>{const a=u.value;a.size>=t.minimum||u.issues.push({origin:ax(a),code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),kz=nt("$ZodCheckSizeEquals",(e,t)=>{var r;ha.init(e,t),(r=e._zod.def).when??(r.when=u=>{const a=u.value;return!jm(a)&&a.size!==void 0}),e._zod.onattach.push(u=>{const a=u._zod.bag;a.minimum=t.size,a.maximum=t.size,a.size=t.size}),e._zod.check=u=>{const a=u.value,f=a.size;if(f===t.size)return;const m=f>t.size;u.issues.push({origin:ax(a),...m?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:u.value,inst:e,continue:!t.abort})}}),Pz=nt("$ZodCheckMaxLength",(e,t)=>{var r;ha.init(e,t),(r=e._zod.def).when??(r.when=u=>{const a=u.value;return!jm(a)&&a.length!==void 0}),e._zod.onattach.push(u=>{const a=u._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(u._zod.bag.maximum=t.maximum)}),e._zod.check=u=>{const a=u.value;if(a.length<=t.maximum)return;const m=ox(a);u.issues.push({origin:m,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),Dz=nt("$ZodCheckMinLength",(e,t)=>{var r;ha.init(e,t),(r=e._zod.def).when??(r.when=u=>{const a=u.value;return!jm(a)&&a.length!==void 0}),e._zod.onattach.push(u=>{const a=u._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(u._zod.bag.minimum=t.minimum)}),e._zod.check=u=>{const a=u.value;if(a.length>=t.minimum)return;const m=ox(a);u.issues.push({origin:m,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),Lz=nt("$ZodCheckLengthEquals",(e,t)=>{var r;ha.init(e,t),(r=e._zod.def).when??(r.when=u=>{const a=u.value;return!jm(a)&&a.length!==void 0}),e._zod.onattach.push(u=>{const a=u._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=u=>{const a=u.value,f=a.length;if(f===t.length)return;const m=ox(a),c=f>t.length;u.issues.push({origin:m,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:u.value,inst:e,continue:!t.abort})}}),Av=nt("$ZodCheckStringFormat",(e,t)=>{var r,u;ha.init(e,t),e._zod.onattach.push(a=>{const f=a._zod.bag;f.format=t.format,t.pattern&&(f.patterns??(f.patterns=new Set),f.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(u=e._zod).check??(u.check=()=>{})}),Rz=nt("$ZodCheckRegex",(e,t)=>{Av.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Oz=nt("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=wz),Av.init(e,t)}),Nz=nt("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Sz),Av.init(e,t)}),$z=nt("$ZodCheckIncludes",(e,t)=>{ha.init(e,t);const r=tf(t.includes),u=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=u,e._zod.onattach.push(a=>{const f=a._zod.bag;f.patterns??(f.patterns=new Set),f.patterns.add(u)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),jz=nt("$ZodCheckStartsWith",(e,t)=>{ha.init(e,t);const r=new RegExp(`^${tf(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(u=>{const a=u._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=u=>{u.value.startsWith(t.prefix)||u.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:u.value,inst:e,continue:!t.abort})}}),Bz=nt("$ZodCheckEndsWith",(e,t)=>{ha.init(e,t);const r=new RegExp(`.*${tf(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(u=>{const a=u._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=u=>{u.value.endsWith(t.suffix)||u.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:u.value,inst:e,continue:!t.abort})}});function KE(e,t,r){e.issues.length&&t.issues.push(...fh(r,e.issues))}const Fz=nt("$ZodCheckProperty",(e,t)=>{ha.init(e,t),e._zod.check=r=>{const u=t.schema._zod.run({value:r.value[t.property],issues:[]},{});if(u instanceof Promise)return u.then(a=>KE(a,r,t.property));KE(u,r,t.property)}}),Uz=nt("$ZodCheckMimeType",(e,t)=>{ha.init(e,t);const r=new Set(t.mime);e._zod.onattach.push(u=>{u._zod.bag.mime=t.mime}),e._zod.check=u=>{r.has(u.value.type)||u.issues.push({code:"invalid_value",values:t.mime,input:u.value.type,inst:e,continue:!t.abort})}}),Vz=nt("$ZodCheckOverwrite",(e,t)=>{ha.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class Zz{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const u=t.split(`
`).filter(m=>m),a=Math.min(...u.map(m=>m.length-m.trimStart().length)),f=u.map(m=>m.slice(a)).map(m=>" ".repeat(this.indent*2)+m);for(const m of f)this.content.push(m)}compile(){const t=Function,r=this?.args,a=[...(this?.content??[""]).map(f=>`  ${f}`)];return new t(...r,a.join(`
`))}}const qz={major:4,minor:3,patch:6},ei=nt("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=qz;const u=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&u.unshift(e);for(const a of u)for(const f of a._zod.onattach)f(e);if(u.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const a=(m,c,z)=>{let k=xm(m),B;for(const Z of c){if(Z._zod.def.when){if(!Z._zod.def.when(m))continue}else if(k)continue;const X=m.issues.length,J=Z._zod.check(m);if(J instanceof Promise&&z?.async===!1)throw new Sm;if(B||J instanceof Promise)B=(B??Promise.resolve()).then(async()=>{await J,m.issues.length!==X&&(k||(k=xm(m,X)))});else{if(m.issues.length===X)continue;k||(k=xm(m,X))}}return B?B.then(()=>m):m},f=(m,c,z)=>{if(xm(m))return m.aborted=!0,m;const k=a(c,u,z);if(k instanceof Promise){if(z.async===!1)throw new Sm;return k.then(B=>e._zod.parse(B,z))}return e._zod.parse(k,z)};e._zod.run=(m,c)=>{if(c.skipChecks)return e._zod.parse(m,c);if(c.direction==="backward"){const k=e._zod.parse({value:m.value,issues:[]},{...c,skipChecks:!0});return k instanceof Promise?k.then(B=>f(B,m,c)):f(k,m,c)}const z=e._zod.parse(m,c);if(z instanceof Promise){if(c.async===!1)throw new Sm;return z.then(k=>a(k,u,c))}return a(z,u,c)}}fi(e,"~standard",()=>({validate:a=>{try{const f=VM(e,a);return f.success?{value:f.data}:{issues:f.error?.issues}}catch{return ZM(e,a).then(m=>m.success?{value:m.data}:{issues:m.error?.issues})}},vendor:"zod",version:1}))}),Cv=nt("$ZodString",(e,t)=>{ei.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??gz(e._zod.bag),e._zod.parse=(r,u)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),$r=nt("$ZodStringFormat",(e,t)=>{Av.init(e,t),Cv.init(e,t)}),Gz=nt("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=JM),$r.init(e,t)}),Hz=nt("$ZodUUID",(e,t)=>{if(t.version){const u={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(u===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=cy(u))}else t.pattern??(t.pattern=cy());$r.init(e,t)}),Wz=nt("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=QM),$r.init(e,t)}),Xz=nt("$ZodURL",(e,t)=>{$r.init(e,t),e._zod.check=r=>{try{const u=r.value.trim(),a=new URL(u);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=a.href:r.value=u;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Yz=nt("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=tz()),$r.init(e,t)}),Kz=nt("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=YM),$r.init(e,t)}),Jz=nt("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=qM),$r.init(e,t)}),Qz=nt("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=GM),$r.init(e,t)}),eI=nt("$ZodULID",(e,t)=>{t.pattern??(t.pattern=HM),$r.init(e,t)}),tI=nt("$ZodXID",(e,t)=>{t.pattern??(t.pattern=WM),$r.init(e,t)}),nI=nt("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=XM),$r.init(e,t)}),iI=nt("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=mz(t)),$r.init(e,t)}),rI=nt("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=dz),$r.init(e,t)}),aI=nt("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=pz(t)),$r.init(e,t)}),oI=nt("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=KM),$r.init(e,t)}),sI=nt("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=nz),$r.init(e,t),e._zod.bag.format="ipv4"}),lI=nt("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=iz),$r.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),cI=nt("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=rz(t.delimiter)),$r.init(e,t),e._zod.bag.format="mac"}),uI=nt("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=az),$r.init(e,t)}),hI=nt("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=oz),$r.init(e,t),e._zod.check=r=>{const u=r.value.split("/");try{if(u.length!==2)throw new Error;const[a,f]=u;if(!f)throw new Error;const m=Number(f);if(`${m}`!==f)throw new Error;if(m<0||m>128)throw new Error;new URL(`http://[${a}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function q2(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const dI=nt("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=sz),$r.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{q2(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function fI(e){if(!B2.test(e))return!1;const t=e.replace(/[-_]/g,u=>u==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return q2(r)}const pI=nt("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=B2),$r.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{fI(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),mI=nt("$ZodE164",(e,t)=>{t.pattern??(t.pattern=uz),$r.init(e,t)});function gI(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[u]=r;if(!u)return!1;const a=JSON.parse(atob(u));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const yI=nt("$ZodJWT",(e,t)=>{$r.init(e,t),e._zod.check=r=>{gI(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),_I=nt("$ZodCustomStringFormat",(e,t)=>{$r.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),G2=nt("$ZodNumber",(e,t)=>{ei.init(e,t),e._zod.pattern=e._zod.bag.pattern??F2,e._zod.parse=(r,u)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const f=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...f?{received:f}:{}}),r}}),vI=nt("$ZodNumberFormat",(e,t)=>{Cz.init(e,t),G2.init(e,t)}),H2=nt("$ZodBoolean",(e,t)=>{ei.init(e,t),e._zod.pattern=vz,e._zod.parse=(r,u)=>{if(t.coerce)try{r.value=!!r.value}catch{}const a=r.value;return typeof a=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),r}}),W2=nt("$ZodBigInt",(e,t)=>{ei.init(e,t),e._zod.pattern=yz,e._zod.parse=(r,u)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch{}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),bI=nt("$ZodBigIntFormat",(e,t)=>{Mz.init(e,t),W2.init(e,t)}),xI=nt("$ZodSymbol",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>{const a=r.value;return typeof a=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:a,inst:e}),r}}),wI=nt("$ZodUndefined",(e,t)=>{ei.init(e,t),e._zod.pattern=xz,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(r,u)=>{const a=r.value;return typeof a>"u"||r.issues.push({expected:"undefined",code:"invalid_type",input:a,inst:e}),r}}),SI=nt("$ZodNull",(e,t)=>{ei.init(e,t),e._zod.pattern=bz,e._zod.values=new Set([null]),e._zod.parse=(r,u)=>{const a=r.value;return a===null||r.issues.push({expected:"null",code:"invalid_type",input:a,inst:e}),r}}),TI=nt("$ZodAny",(e,t)=>{ei.init(e,t),e._zod.parse=r=>r}),EI=nt("$ZodUnknown",(e,t)=>{ei.init(e,t),e._zod.parse=r=>r}),AI=nt("$ZodNever",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)}),CI=nt("$ZodVoid",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>{const a=r.value;return typeof a>"u"||r.issues.push({expected:"void",code:"invalid_type",input:a,inst:e}),r}}),MI=nt("$ZodDate",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>{if(t.coerce)try{r.value=new Date(r.value)}catch{}const a=r.value,f=a instanceof Date;return f&&!Number.isNaN(a.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:a,...f?{received:"Invalid Date"}:{},inst:e}),r}});function JE(e,t,r){e.issues.length&&t.issues.push(...fh(r,e.issues)),t.value[r]=e.value}const zI=nt("$ZodArray",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const f=[];for(let m=0;m<a.length;m++){const c=a[m],z=t.element._zod.run({value:c,issues:[]},u);z instanceof Promise?f.push(z.then(k=>JE(k,r,m))):JE(z,r,m)}return f.length?Promise.all(f).then(()=>r):r}});function Lb(e,t,r,u,a){if(e.issues.length){if(a&&!(r in u))return;t.issues.push(...fh(r,e.issues))}e.value===void 0?r in u&&(t.value[r]=void 0):t.value[r]=e.value}function II(e){const t=Object.keys(e.shape);for(const u of t)if(!e.shape?.[u]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const r=AM(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function kI(e,t,r,u,a,f){const m=[],c=a.keySet,z=a.catchall._zod,k=z.def.type,B=z.optout==="optional";for(const Z in t){if(c.has(Z))continue;if(k==="never"){m.push(Z);continue}const X=z.run({value:t[Z],issues:[]},u);X instanceof Promise?e.push(X.then(J=>Lb(J,r,Z,t,B))):Lb(X,r,Z,t,B)}return m.length&&r.issues.push({code:"unrecognized_keys",keys:m,input:t,inst:f}),e.length?Promise.all(e).then(()=>r):r}const PI=nt("$ZodObject",(e,t)=>{if(ei.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const c=t.shape;Object.defineProperty(t,"shape",{get:()=>{const z={...c};return Object.defineProperty(t,"shape",{value:z}),z}})}const u=vv(()=>II(t));fi(e._zod,"propValues",()=>{const c=t.shape,z={};for(const k in c){const B=c[k]._zod;if(B.values){z[k]??(z[k]=new Set);for(const Z of B.values)z[k].add(Z)}}return z});const a=sy,f=t.catchall;let m;e._zod.parse=(c,z)=>{m??(m=u.value);const k=c.value;if(!a(k))return c.issues.push({expected:"object",code:"invalid_type",input:k,inst:e}),c;c.value={};const B=[],Z=m.shape;for(const X of m.keys){const J=Z[X],ce=J._zod.optout==="optional",ee=J._zod.run({value:k[X],issues:[]},z);ee instanceof Promise?B.push(ee.then(ae=>Lb(ae,c,X,k,ce))):Lb(ee,c,X,k,ce)}return f?kI(B,k,c,z,u.value,e):B.length?Promise.all(B).then(()=>c):c}}),DI=nt("$ZodObjectJIT",(e,t)=>{PI.init(e,t);const r=e._zod.parse,u=vv(()=>II(t)),a=X=>{const J=new Zz(["shape","payload","ctx"]),ce=u.value,ee=we=>{const xe=Iw(we);return`shape[${xe}]._zod.run({ value: input[${xe}], issues: [] }, ctx)`};J.write("const input = payload.value;");const ae=Object.create(null);let Me=0;for(const we of ce.keys)ae[we]=`key_${Me++}`;J.write("const newResult = {};");for(const we of ce.keys){const xe=ae[we],Se=Iw(we),Ue=X[we]?._zod?.optout==="optional";J.write(`const ${xe} = ${ee(we)};`),Ue?J.write(`
        if (${xe}.issues.length) {
          if (${Se} in input) {
            payload.issues = payload.issues.concat(${xe}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${Se}, ...iss.path] : [${Se}]
            })));
          }
        }
        
        if (${xe}.value === undefined) {
          if (${Se} in input) {
            newResult[${Se}] = undefined;
          }
        } else {
          newResult[${Se}] = ${xe}.value;
        }
        
      `):J.write(`
        if (${xe}.issues.length) {
          payload.issues = payload.issues.concat(${xe}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Se}, ...iss.path] : [${Se}]
          })));
        }
        
        if (${xe}.value === undefined) {
          if (${Se} in input) {
            newResult[${Se}] = undefined;
          }
        } else {
          newResult[${Se}] = ${xe}.value;
        }
        
      `)}J.write("payload.value = newResult;"),J.write("return payload;");const Ae=J.compile();return(we,xe)=>Ae(X,we,xe)};let f;const m=sy,c=!kb.jitless,k=c&&TM.value,B=t.catchall;let Z;e._zod.parse=(X,J)=>{Z??(Z=u.value);const ce=X.value;return m(ce)?c&&k&&J?.async===!1&&J.jitless!==!0?(f||(f=a(t.shape)),X=f(X,J),B?kI([],ce,X,J,Z,e):X):r(X,J):(X.issues.push({expected:"object",code:"invalid_type",input:ce,inst:e}),X)}});function QE(e,t,r,u){for(const f of e)if(f.issues.length===0)return t.value=f.value,t;const a=e.filter(f=>!xm(f));return a.length===1?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(f=>f.issues.map(m=>bu(m,u,js())))}),t)}const sx=nt("$ZodUnion",(e,t)=>{ei.init(e,t),fi(e._zod,"optin",()=>t.options.some(a=>a._zod.optin==="optional")?"optional":void 0),fi(e._zod,"optout",()=>t.options.some(a=>a._zod.optout==="optional")?"optional":void 0),fi(e._zod,"values",()=>{if(t.options.every(a=>a._zod.values))return new Set(t.options.flatMap(a=>Array.from(a._zod.values)))}),fi(e._zod,"pattern",()=>{if(t.options.every(a=>a._zod.pattern)){const a=t.options.map(f=>f._zod.pattern);return new RegExp(`^(${a.map(f=>ix(f.source)).join("|")})$`)}});const r=t.options.length===1,u=t.options[0]._zod.run;e._zod.parse=(a,f)=>{if(r)return u(a,f);let m=!1;const c=[];for(const z of t.options){const k=z._zod.run({value:a.value,issues:[]},f);if(k instanceof Promise)c.push(k),m=!0;else{if(k.issues.length===0)return k;c.push(k)}}return m?Promise.all(c).then(z=>QE(z,a,e,f)):QE(c,a,e,f)}});function eA(e,t,r,u){const a=e.filter(f=>f.issues.length===0);return a.length===1?(t.value=a[0].value,t):(a.length===0?t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(f=>f.issues.map(m=>bu(m,u,js())))}):t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:[],inclusive:!1}),t)}const LI=nt("$ZodXor",(e,t)=>{sx.init(e,t),t.inclusive=!1;const r=t.options.length===1,u=t.options[0]._zod.run;e._zod.parse=(a,f)=>{if(r)return u(a,f);let m=!1;const c=[];for(const z of t.options){const k=z._zod.run({value:a.value,issues:[]},f);k instanceof Promise?(c.push(k),m=!0):c.push(k)}return m?Promise.all(c).then(z=>eA(z,a,e,f)):eA(c,a,e,f)}}),RI=nt("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,sx.init(e,t);const r=e._zod.parse;fi(e._zod,"propValues",()=>{const a={};for(const f of t.options){const m=f._zod.propValues;if(!m||Object.keys(m).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(f)}"`);for(const[c,z]of Object.entries(m)){a[c]||(a[c]=new Set);for(const k of z)a[c].add(k)}}return a});const u=vv(()=>{const a=t.options,f=new Map;for(const m of a){const c=m._zod.propValues?.[t.discriminator];if(!c||c.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(m)}"`);for(const z of c){if(f.has(z))throw new Error(`Duplicate discriminator value "${String(z)}"`);f.set(z,m)}}return f});e._zod.parse=(a,f)=>{const m=a.value;if(!sy(m))return a.issues.push({code:"invalid_type",expected:"object",input:m,inst:e}),a;const c=u.value.get(m?.[t.discriminator]);return c?c._zod.run(a,f):t.unionFallback?r(a,f):(a.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:m,path:[t.discriminator],inst:e}),a)}}),OI=nt("$ZodIntersection",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>{const a=r.value,f=t.left._zod.run({value:a,issues:[]},u),m=t.right._zod.run({value:a,issues:[]},u);return f instanceof Promise||m instanceof Promise?Promise.all([f,m]).then(([z,k])=>tA(r,z,k)):tA(r,f,m)}});function Dw(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(km(e)&&km(t)){const r=Object.keys(t),u=Object.keys(e).filter(f=>r.indexOf(f)!==-1),a={...e,...t};for(const f of u){const m=Dw(e[f],t[f]);if(!m.valid)return{valid:!1,mergeErrorPath:[f,...m.mergeErrorPath]};a[f]=m.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let u=0;u<e.length;u++){const a=e[u],f=t[u],m=Dw(a,f);if(!m.valid)return{valid:!1,mergeErrorPath:[u,...m.mergeErrorPath]};r.push(m.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function tA(e,t,r){const u=new Map;let a;for(const c of t.issues)if(c.code==="unrecognized_keys"){a??(a=c);for(const z of c.keys)u.has(z)||u.set(z,{}),u.get(z).l=!0}else e.issues.push(c);for(const c of r.issues)if(c.code==="unrecognized_keys")for(const z of c.keys)u.has(z)||u.set(z,{}),u.get(z).r=!0;else e.issues.push(c);const f=[...u].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(f.length&&a&&e.issues.push({...a,keys:f}),xm(e))return e;const m=Dw(t.value,r.value);if(!m.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(m.mergeErrorPath)}`);return e.value=m.data,e}const X2=nt("$ZodTuple",(e,t)=>{ei.init(e,t);const r=t.items;e._zod.parse=(u,a)=>{const f=u.value;if(!Array.isArray(f))return u.issues.push({input:f,inst:e,expected:"tuple",code:"invalid_type"}),u;u.value=[];const m=[],c=[...r].reverse().findIndex(B=>B._zod.optin!=="optional"),z=c===-1?0:r.length-c;if(!t.rest){const B=f.length>r.length,Z=f.length<z-1;if(B||Z)return u.issues.push({...B?{code:"too_big",maximum:r.length,inclusive:!0}:{code:"too_small",minimum:r.length},input:f,inst:e,origin:"array"}),u}let k=-1;for(const B of r){if(k++,k>=f.length&&k>=z)continue;const Z=B._zod.run({value:f[k],issues:[]},a);Z instanceof Promise?m.push(Z.then(X=>K0(X,u,k))):K0(Z,u,k)}if(t.rest){const B=f.slice(r.length);for(const Z of B){k++;const X=t.rest._zod.run({value:Z,issues:[]},a);X instanceof Promise?m.push(X.then(J=>K0(J,u,k))):K0(X,u,k)}}return m.length?Promise.all(m).then(()=>u):u}});function K0(e,t,r){e.issues.length&&t.issues.push(...fh(r,e.issues)),t.value[r]=e.value}const NI=nt("$ZodRecord",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>{const a=r.value;if(!km(a))return r.issues.push({expected:"record",code:"invalid_type",input:a,inst:e}),r;const f=[],m=t.keyType._zod.values;if(m){r.value={};const c=new Set;for(const k of m)if(typeof k=="string"||typeof k=="number"||typeof k=="symbol"){c.add(typeof k=="number"?k.toString():k);const B=t.valueType._zod.run({value:a[k],issues:[]},u);B instanceof Promise?f.push(B.then(Z=>{Z.issues.length&&r.issues.push(...fh(k,Z.issues)),r.value[k]=Z.value})):(B.issues.length&&r.issues.push(...fh(k,B.issues)),r.value[k]=B.value)}let z;for(const k in a)c.has(k)||(z=z??[],z.push(k));z&&z.length>0&&r.issues.push({code:"unrecognized_keys",input:a,inst:e,keys:z})}else{r.value={};for(const c of Reflect.ownKeys(a)){if(c==="__proto__")continue;let z=t.keyType._zod.run({value:c,issues:[]},u);if(z instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof c=="string"&&F2.test(c)&&z.issues.length){const Z=t.keyType._zod.run({value:Number(c),issues:[]},u);if(Z instanceof Promise)throw new Error("Async schemas not supported in object keys currently");Z.issues.length===0&&(z=Z)}if(z.issues.length){t.mode==="loose"?r.value[c]=a[c]:r.issues.push({code:"invalid_key",origin:"record",issues:z.issues.map(Z=>bu(Z,u,js())),input:c,path:[c],inst:e});continue}const B=t.valueType._zod.run({value:a[c],issues:[]},u);B instanceof Promise?f.push(B.then(Z=>{Z.issues.length&&r.issues.push(...fh(c,Z.issues)),r.value[z.value]=Z.value})):(B.issues.length&&r.issues.push(...fh(c,B.issues)),r.value[z.value]=B.value)}}return f.length?Promise.all(f).then(()=>r):r}}),$I=nt("$ZodMap",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>{const a=r.value;if(!(a instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:a,inst:e}),r;const f=[];r.value=new Map;for(const[m,c]of a){const z=t.keyType._zod.run({value:m,issues:[]},u),k=t.valueType._zod.run({value:c,issues:[]},u);z instanceof Promise||k instanceof Promise?f.push(Promise.all([z,k]).then(([B,Z])=>{nA(B,Z,r,m,a,e,u)})):nA(z,k,r,m,a,e,u)}return f.length?Promise.all(f).then(()=>r):r}});function nA(e,t,r,u,a,f,m){e.issues.length&&(Db.has(typeof u)?r.issues.push(...fh(u,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:a,inst:f,issues:e.issues.map(c=>bu(c,m,js()))})),t.issues.length&&(Db.has(typeof u)?r.issues.push(...fh(u,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:a,inst:f,key:u,issues:t.issues.map(c=>bu(c,m,js()))})),r.value.set(e.value,t.value)}const jI=nt("$ZodSet",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>{const a=r.value;if(!(a instanceof Set))return r.issues.push({input:a,inst:e,expected:"set",code:"invalid_type"}),r;const f=[];r.value=new Set;for(const m of a){const c=t.valueType._zod.run({value:m,issues:[]},u);c instanceof Promise?f.push(c.then(z=>iA(z,r))):iA(c,r)}return f.length?Promise.all(f).then(()=>r):r}});function iA(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}const BI=nt("$ZodEnum",(e,t)=>{ei.init(e,t);const r=C2(t.entries),u=new Set(r);e._zod.values=u,e._zod.pattern=new RegExp(`^(${r.filter(a=>Db.has(typeof a)).map(a=>typeof a=="string"?tf(a):a.toString()).join("|")})$`),e._zod.parse=(a,f)=>{const m=a.value;return u.has(m)||a.issues.push({code:"invalid_value",values:r,input:m,inst:e}),a}}),FI=nt("$ZodLiteral",(e,t)=>{if(ei.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const r=new Set(t.values);e._zod.values=r,e._zod.pattern=new RegExp(`^(${t.values.map(u=>typeof u=="string"?tf(u):u?tf(u.toString()):String(u)).join("|")})$`),e._zod.parse=(u,a)=>{const f=u.value;return r.has(f)||u.issues.push({code:"invalid_value",values:t.values,input:f,inst:e}),u}}),UI=nt("$ZodFile",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>{const a=r.value;return a instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:a,inst:e}),r}}),VI=nt("$ZodTransform",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>{if(u.direction==="backward")throw new nx(e.constructor.name);const a=t.transform(r.value,r);if(u.async)return(a instanceof Promise?a:Promise.resolve(a)).then(m=>(r.value=m,r));if(a instanceof Promise)throw new Sm;return r.value=a,r}});function rA(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Y2=nt("$ZodOptional",(e,t)=>{ei.init(e,t),e._zod.optin="optional",e._zod.optout="optional",fi(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),fi(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${ix(r.source)})?$`):void 0}),e._zod.parse=(r,u)=>{if(t.innerType._zod.optin==="optional"){const a=t.innerType._zod.run(r,u);return a instanceof Promise?a.then(f=>rA(f,r.value)):rA(a,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,u)}}),ZI=nt("$ZodExactOptional",(e,t)=>{Y2.init(e,t),fi(e._zod,"values",()=>t.innerType._zod.values),fi(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(r,u)=>t.innerType._zod.run(r,u)}),qI=nt("$ZodNullable",(e,t)=>{ei.init(e,t),fi(e._zod,"optin",()=>t.innerType._zod.optin),fi(e._zod,"optout",()=>t.innerType._zod.optout),fi(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${ix(r.source)}|null)$`):void 0}),fi(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,u)=>r.value===null?r:t.innerType._zod.run(r,u)}),GI=nt("$ZodDefault",(e,t)=>{ei.init(e,t),e._zod.optin="optional",fi(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,u)=>{if(u.direction==="backward")return t.innerType._zod.run(r,u);if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,u);return a instanceof Promise?a.then(f=>aA(f,t)):aA(a,t)}});function aA(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const HI=nt("$ZodPrefault",(e,t)=>{ei.init(e,t),e._zod.optin="optional",fi(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,u)=>(u.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,u))}),WI=nt("$ZodNonOptional",(e,t)=>{ei.init(e,t),fi(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(u=>u!==void 0)):void 0}),e._zod.parse=(r,u)=>{const a=t.innerType._zod.run(r,u);return a instanceof Promise?a.then(f=>oA(f,e)):oA(a,e)}});function oA(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const XI=nt("$ZodSuccess",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>{if(u.direction==="backward")throw new nx("ZodSuccess");const a=t.innerType._zod.run(r,u);return a instanceof Promise?a.then(f=>(r.value=f.issues.length===0,r)):(r.value=a.issues.length===0,r)}}),YI=nt("$ZodCatch",(e,t)=>{ei.init(e,t),fi(e._zod,"optin",()=>t.innerType._zod.optin),fi(e._zod,"optout",()=>t.innerType._zod.optout),fi(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,u)=>{if(u.direction==="backward")return t.innerType._zod.run(r,u);const a=t.innerType._zod.run(r,u);return a instanceof Promise?a.then(f=>(r.value=f.value,f.issues.length&&(r.value=t.catchValue({...r,error:{issues:f.issues.map(m=>bu(m,u,js()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(f=>bu(f,u,js()))},input:r.value}),r.issues=[]),r)}}),KI=nt("$ZodNaN",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:e,expected:"nan",code:"invalid_type"}),r)}),JI=nt("$ZodPipe",(e,t)=>{ei.init(e,t),fi(e._zod,"values",()=>t.in._zod.values),fi(e._zod,"optin",()=>t.in._zod.optin),fi(e._zod,"optout",()=>t.out._zod.optout),fi(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,u)=>{if(u.direction==="backward"){const f=t.out._zod.run(r,u);return f instanceof Promise?f.then(m=>J0(m,t.in,u)):J0(f,t.in,u)}const a=t.in._zod.run(r,u);return a instanceof Promise?a.then(f=>J0(f,t.out,u)):J0(a,t.out,u)}});function J0(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const K2=nt("$ZodCodec",(e,t)=>{ei.init(e,t),fi(e._zod,"values",()=>t.in._zod.values),fi(e._zod,"optin",()=>t.in._zod.optin),fi(e._zod,"optout",()=>t.out._zod.optout),fi(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,u)=>{if((u.direction||"forward")==="forward"){const f=t.in._zod.run(r,u);return f instanceof Promise?f.then(m=>Q0(m,t,u)):Q0(f,t,u)}else{const f=t.out._zod.run(r,u);return f instanceof Promise?f.then(m=>Q0(m,t,u)):Q0(f,t,u)}}});function Q0(e,t,r){if(e.issues.length)return e.aborted=!0,e;if((r.direction||"forward")==="forward"){const a=t.transform(e.value,e);return a instanceof Promise?a.then(f=>eb(e,f,t.out,r)):eb(e,a,t.out,r)}else{const a=t.reverseTransform(e.value,e);return a instanceof Promise?a.then(f=>eb(e,f,t.in,r)):eb(e,a,t.in,r)}}function eb(e,t,r,u){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},u)}const QI=nt("$ZodReadonly",(e,t)=>{ei.init(e,t),fi(e._zod,"propValues",()=>t.innerType._zod.propValues),fi(e._zod,"values",()=>t.innerType._zod.values),fi(e._zod,"optin",()=>t.innerType?._zod?.optin),fi(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(r,u)=>{if(u.direction==="backward")return t.innerType._zod.run(r,u);const a=t.innerType._zod.run(r,u);return a instanceof Promise?a.then(sA):sA(a)}});function sA(e){return e.value=Object.freeze(e.value),e}const ek=nt("$ZodTemplateLiteral",(e,t)=>{ei.init(e,t);const r=[];for(const u of t.parts)if(typeof u=="object"&&u!==null){if(!u._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...u._zod.traits].shift()}`);const a=u._zod.pattern instanceof RegExp?u._zod.pattern.source:u._zod.pattern;if(!a)throw new Error(`Invalid template literal part: ${u._zod.traits}`);const f=a.startsWith("^")?1:0,m=a.endsWith("$")?a.length-1:a.length;r.push(a.slice(f,m))}else if(u===null||EM.has(typeof u))r.push(tf(`${u}`));else throw new Error(`Invalid template literal part: ${u}`);e._zod.pattern=new RegExp(`^${r.join("")}$`),e._zod.parse=(u,a)=>typeof u.value!="string"?(u.issues.push({input:u.value,inst:e,expected:"string",code:"invalid_type"}),u):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(u.value)||u.issues.push({input:u.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source}),u)}),tk=nt("$ZodFunction",(e,t)=>(ei.init(e,t),e._def=t,e._zod.def=t,e.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...u){const a=e._def.input?kw(e._def.input,u):u,f=Reflect.apply(r,this,a);return e._def.output?kw(e._def.output,f):f}},e.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...u){const a=e._def.input?await Pw(e._def.input,u):u,f=await Reflect.apply(r,this,a);return e._def.output?await Pw(e._def.output,f):f}},e._zod.parse=(r,u)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:e}),r):(e._def.output&&e._def.output._zod.def.type==="promise"?r.value=e.implementAsync(r.value):r.value=e.implement(r.value),r),e.input=(...r)=>{const u=e.constructor;return Array.isArray(r[0])?new u({type:"function",input:new X2({type:"tuple",items:r[0],rest:r[1]}),output:e._def.output}):new u({type:"function",input:r[0],output:e._def.output})},e.output=r=>{const u=e.constructor;return new u({type:"function",input:e._def.input,output:r})},e)),nk=nt("$ZodPromise",(e,t)=>{ei.init(e,t),e._zod.parse=(r,u)=>Promise.resolve(r.value).then(a=>t.innerType._zod.run({value:a,issues:[]},u))}),ik=nt("$ZodLazy",(e,t)=>{ei.init(e,t),fi(e._zod,"innerType",()=>t.getter()),fi(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),fi(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),fi(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),fi(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(r,u)=>e._zod.innerType._zod.run(r,u)}),rk=nt("$ZodCustom",(e,t)=>{ha.init(e,t),ei.init(e,t),e._zod.parse=(r,u)=>r,e._zod.check=r=>{const u=r.value,a=t.fn(u);if(a instanceof Promise)return a.then(f=>lA(f,r,u,e));lA(a,r,u,e)}});function lA(e,t,r,u){if(!e){const a={code:"custom",input:r,inst:u,path:[...u._zod.def.path??[]],continue:!u._zod.def.abort};u._zod.def.params&&(a.params=u._zod.def.params),t.issues.push(ly(a))}}const d6=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(a){return e[a]??null}const r={regex:"",email:" ",url:"",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:"  ISO",time:"  ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:"   IPv4",cidrv6:"   IPv6",base64:"  base64-encoded",base64url:"  base64url-encoded",json_string:"   JSON",e164:"   E.164",jwt:"JWT",template_literal:""},u={nan:"NaN"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`  :   instanceof ${a.expected}    ${c}`:`  :   ${f}    ${c}`}case"invalid_value":return a.values.length===1?`  :   ${jn(a.values[0])}`:`  :     : ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`   :    ${a.origin??""} ${f} ${a.maximum.toString()} ${m.unit??""}`:`  :    ${a.origin??""} ${f} ${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`  :   ${a.origin}   ${f} ${a.minimum.toString()} ${m.unit}`:`  :   ${a.origin}   ${f} ${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`  :     "${a.prefix}"`:f.format==="ends_with"?`  :     "${f.suffix}"`:f.format==="includes"?`  :    "${f.includes}"`:f.format==="regex"?`  :     ${f.pattern}`:`${r[f.format]??a.format}  `}case"not_multiple_of":return`  :      ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"":""} ${a.keys.length>1?"":""}: ${Gt(a.keys," ")}`;case"invalid_key":return`    ${a.origin}`;case"invalid_union":return"  ";case"invalid_element":return`    ${a.origin}`;default:return"  "}}};function f6(){return{localeError:d6()}}const p6=()=>{const e={string:{unit:"simvol",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"element",verb:"olmaldr"},set:{unit:"element",verb:"olmaldr"}};function t(a){return e[a]??null}const r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},u={nan:"NaN"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Yanl dyr: gzlniln instanceof ${a.expected}, daxil olan ${c}`:`Yanl dyr: gzlniln ${f}, daxil olan ${c}`}case"invalid_value":return a.values.length===1?`Yanl dyr: gzlniln ${jn(a.values[0])}`:`Yanl seim: aadaklardan biri olmaldr: ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`ox byk: gzlniln ${a.origin??"dyr"} ${f}${a.maximum.toString()} ${m.unit??"element"}`:`ox byk: gzlniln ${a.origin??"dyr"} ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`ox kiik: gzlniln ${a.origin} ${f}${a.minimum.toString()} ${m.unit}`:`ox kiik: gzlniln ${a.origin} ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Yanl mtn: "${f.prefix}" il balamaldr`:f.format==="ends_with"?`Yanl mtn: "${f.suffix}" il bitmlidir`:f.format==="includes"?`Yanl mtn: "${f.includes}" daxil olmaldr`:f.format==="regex"?`Yanl mtn: ${f.pattern} ablonuna uyun olmaldr`:`Yanl ${r[f.format]??a.format}`}case"not_multiple_of":return`Yanl dd: ${a.divisor} il bln biln olmaldr`;case"unrecognized_keys":return`Tannmayan aar${a.keys.length>1?"lar":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`${a.origin} daxilind yanl aar`;case"invalid_union":return"Yanl dyr";case"invalid_element":return`${a.origin} daxilind yanl dyr`;default:return"Yanl dyr"}}};function m6(){return{localeError:p6()}}function cA(e,t,r,u){const a=Math.abs(e),f=a%10,m=a%100;return m>=11&&m<=19?u:f===1?t:f>=2&&f<=4?r:u}const g6=()=>{const e={string:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""}};function t(a){return e[a]??null}const r={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},u={nan:"NaN",number:"",array:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?` :  instanceof ${a.expected},  ${c}`:` :  ${f},  ${c}`}case"invalid_value":return a.values.length===1?` :  ${jn(a.values[0])}`:` :    ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);if(m){const c=Number(a.maximum),z=cA(c,m.unit.one,m.unit.few,m.unit.many);return` : ,  ${a.origin??""}  ${m.verb} ${f}${a.maximum.toString()} ${z}`}return` : ,  ${a.origin??""}   ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);if(m){const c=Number(a.minimum),z=cA(c,m.unit.one,m.unit.few,m.unit.many);return` : ,  ${a.origin}  ${m.verb} ${f}${a.minimum.toString()} ${z}`}return` : ,  ${a.origin}   ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?` :    "${f.prefix}"`:f.format==="ends_with"?` :    "${f.suffix}"`:f.format==="includes"?` :   "${f.includes}"`:f.format==="regex"?` :    ${f.pattern}`:` ${r[f.format]??a.format}`}case"not_multiple_of":return` :    ${a.divisor}`;case"unrecognized_keys":return` ${a.keys.length>1?"":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`   ${a.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${a.origin}`;default:return" "}}};function y6(){return{localeError:g6()}}const _6=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(a){return e[a]??null}const r={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},u={nan:"NaN",number:"",array:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?` :  instanceof ${a.expected},  ${c}`:` :  ${f},  ${c}`}case"invalid_value":return a.values.length===1?` :  ${jn(a.values[0])}`:` :    ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?` :   ${a.origin??""}   ${f}${a.maximum.toString()} ${m.unit??""}`:` :   ${a.origin??""}   ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?` :   ${a.origin}   ${f}${a.minimum.toString()} ${m.unit}`:` :   ${a.origin}   ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;if(f.format==="starts_with")return` :     "${f.prefix}"`;if(f.format==="ends_with")return` :     "${f.suffix}"`;if(f.format==="includes")return` :    "${f.includes}"`;if(f.format==="regex")return` :     ${f.pattern}`;let m="";return f.format==="emoji"&&(m=""),f.format==="datetime"&&(m=""),f.format==="date"&&(m=""),f.format==="time"&&(m=""),f.format==="duration"&&(m=""),`${m} ${r[f.format]??a.format}`}case"not_multiple_of":return` :      ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"":""} ${a.keys.length>1?"":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`   ${a.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${a.origin}`;default:return" "}}};function v6(){return{localeError:_6()}}const b6=()=>{const e={string:{unit:"carcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(a){return e[a]??null}const r={regex:"entrada",email:"adrea electrnica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adrea IPv4",ipv6:"adrea IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},u={nan:"NaN"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Tipus invlid: s'esperava instanceof ${a.expected}, s'ha rebut ${c}`:`Tipus invlid: s'esperava ${f}, s'ha rebut ${c}`}case"invalid_value":return a.values.length===1?`Valor invlid: s'esperava ${jn(a.values[0])}`:`Opci invlida: s'esperava una de ${Gt(a.values," o ")}`;case"too_big":{const f=a.inclusive?"com a mxim":"menys de",m=t(a.origin);return m?`Massa gran: s'esperava que ${a.origin??"el valor"} contingus ${f} ${a.maximum.toString()} ${m.unit??"elements"}`:`Massa gran: s'esperava que ${a.origin??"el valor"} fos ${f} ${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?"com a mnim":"ms de",m=t(a.origin);return m?`Massa petit: s'esperava que ${a.origin} contingus ${f} ${a.minimum.toString()} ${m.unit}`:`Massa petit: s'esperava que ${a.origin} fos ${f} ${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Format invlid: ha de comenar amb "${f.prefix}"`:f.format==="ends_with"?`Format invlid: ha d'acabar amb "${f.suffix}"`:f.format==="includes"?`Format invlid: ha d'incloure "${f.includes}"`:f.format==="regex"?`Format invlid: ha de coincidir amb el patr ${f.pattern}`:`Format invlid per a ${r[f.format]??a.format}`}case"not_multiple_of":return`Nmero invlid: ha de ser mltiple de ${a.divisor}`;case"unrecognized_keys":return`Clau${a.keys.length>1?"s":""} no reconeguda${a.keys.length>1?"s":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Clau invlida a ${a.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Element invlid a ${a.origin}`;default:return"Entrada invlida"}}};function x6(){return{localeError:b6()}}const w6=()=>{const e={string:{unit:"znak",verb:"mt"},file:{unit:"bajt",verb:"mt"},array:{unit:"prvk",verb:"mt"},set:{unit:"prvk",verb:"mt"}};function t(a){return e[a]??null}const r={regex:"regulrn vraz",email:"e-mailov adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a as ve formtu ISO",date:"datum ve formtu ISO",time:"as ve formtu ISO",duration:"doba trvn ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"etzec zakdovan ve formtu base64",base64url:"etzec zakdovan ve formtu base64url",json_string:"etzec ve formtu JSON",e164:"slo E.164",jwt:"JWT",template_literal:"vstup"},u={nan:"NaN",number:"slo",string:"etzec",function:"funkce",array:"pole"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Neplatn vstup: oekvno instanceof ${a.expected}, obdreno ${c}`:`Neplatn vstup: oekvno ${f}, obdreno ${c}`}case"invalid_value":return a.values.length===1?`Neplatn vstup: oekvno ${jn(a.values[0])}`:`Neplatn monost: oekvna jedna z hodnot ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Hodnota je pli velk: ${a.origin??"hodnota"} mus mt ${f}${a.maximum.toString()} ${m.unit??"prvk"}`:`Hodnota je pli velk: ${a.origin??"hodnota"} mus bt ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Hodnota je pli mal: ${a.origin??"hodnota"} mus mt ${f}${a.minimum.toString()} ${m.unit??"prvk"}`:`Hodnota je pli mal: ${a.origin??"hodnota"} mus bt ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Neplatn etzec: mus zanat na "${f.prefix}"`:f.format==="ends_with"?`Neplatn etzec: mus konit na "${f.suffix}"`:f.format==="includes"?`Neplatn etzec: mus obsahovat "${f.includes}"`:f.format==="regex"?`Neplatn etzec: mus odpovdat vzoru ${f.pattern}`:`Neplatn formt ${r[f.format]??a.format}`}case"not_multiple_of":return`Neplatn slo: mus bt nsobkem ${a.divisor}`;case"unrecognized_keys":return`Neznm kle: ${Gt(a.keys,", ")}`;case"invalid_key":return`Neplatn kl v ${a.origin}`;case"invalid_union":return"Neplatn vstup";case"invalid_element":return`Neplatn hodnota v ${a.origin}`;default:return"Neplatn vstup"}}};function S6(){return{localeError:w6()}}const T6=()=>{const e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}};function t(a){return e[a]??null}const r={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslt",date:"ISO-dato",time:"ISO-klokkeslt",duration:"ISO-varighed",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},u={nan:"NaN",string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"st",file:"fil"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Ugyldigt input: forventede instanceof ${a.expected}, fik ${c}`:`Ugyldigt input: forventede ${f}, fik ${c}`}case"invalid_value":return a.values.length===1?`Ugyldig vrdi: forventede ${jn(a.values[0])}`:`Ugyldigt valg: forventede en af flgende ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin),c=u[a.origin]??a.origin;return m?`For stor: forventede ${c??"value"} ${m.verb} ${f} ${a.maximum.toString()} ${m.unit??"elementer"}`:`For stor: forventede ${c??"value"} havde ${f} ${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin),c=u[a.origin]??a.origin;return m?`For lille: forventede ${c} ${m.verb} ${f} ${a.minimum.toString()} ${m.unit}`:`For lille: forventede ${c} havde ${f} ${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Ugyldig streng: skal starte med "${f.prefix}"`:f.format==="ends_with"?`Ugyldig streng: skal ende med "${f.suffix}"`:f.format==="includes"?`Ugyldig streng: skal indeholde "${f.includes}"`:f.format==="regex"?`Ugyldig streng: skal matche mnsteret ${f.pattern}`:`Ugyldig ${r[f.format]??a.format}`}case"not_multiple_of":return`Ugyldigt tal: skal vre deleligt med ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"Ukendte ngler":"Ukendt ngle"}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Ugyldig ngle i ${a.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig vrdi i ${a.origin}`;default:return"Ugyldigt input"}}};function E6(){return{localeError:T6()}}const A6=()=>{const e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(a){return e[a]??null}const r={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},u={nan:"NaN",number:"Zahl",array:"Array"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Ungltige Eingabe: erwartet instanceof ${a.expected}, erhalten ${c}`:`Ungltige Eingabe: erwartet ${f}, erhalten ${c}`}case"invalid_value":return a.values.length===1?`Ungltige Eingabe: erwartet ${jn(a.values[0])}`:`Ungltige Option: erwartet eine von ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Zu gro: erwartet, dass ${a.origin??"Wert"} ${f}${a.maximum.toString()} ${m.unit??"Elemente"} hat`:`Zu gro: erwartet, dass ${a.origin??"Wert"} ${f}${a.maximum.toString()} ist`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Zu klein: erwartet, dass ${a.origin} ${f}${a.minimum.toString()} ${m.unit} hat`:`Zu klein: erwartet, dass ${a.origin} ${f}${a.minimum.toString()} ist`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Ungltiger String: muss mit "${f.prefix}" beginnen`:f.format==="ends_with"?`Ungltiger String: muss mit "${f.suffix}" enden`:f.format==="includes"?`Ungltiger String: muss "${f.includes}" enthalten`:f.format==="regex"?`Ungltiger String: muss dem Muster ${f.pattern} entsprechen`:`Ungltig: ${r[f.format]??a.format}`}case"not_multiple_of":return`Ungltige Zahl: muss ein Vielfaches von ${a.divisor} sein`;case"unrecognized_keys":return`${a.keys.length>1?"Unbekannte Schlssel":"Unbekannter Schlssel"}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Ungltiger Schlssel in ${a.origin}`;case"invalid_union":return"Ungltige Eingabe";case"invalid_element":return`Ungltiger Wert in ${a.origin}`;default:return"Ungltige Eingabe"}}};function C6(){return{localeError:A6()}}const M6=()=>{const e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}};function t(a){return e[a]??null}const r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},u={nan:"NaN"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return`Invalid input: expected ${f}, received ${c}`}case"invalid_value":return a.values.length===1?`Invalid input: expected ${jn(a.values[0])}`:`Invalid option: expected one of ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Too big: expected ${a.origin??"value"} to have ${f}${a.maximum.toString()} ${m.unit??"elements"}`:`Too big: expected ${a.origin??"value"} to be ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Too small: expected ${a.origin} to have ${f}${a.minimum.toString()} ${m.unit}`:`Too small: expected ${a.origin} to be ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Invalid string: must start with "${f.prefix}"`:f.format==="ends_with"?`Invalid string: must end with "${f.suffix}"`:f.format==="includes"?`Invalid string: must include "${f.includes}"`:f.format==="regex"?`Invalid string: must match pattern ${f.pattern}`:`Invalid ${r[f.format]??a.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${a.divisor}`;case"unrecognized_keys":return`Unrecognized key${a.keys.length>1?"s":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Invalid key in ${a.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${a.origin}`;default:return"Invalid input"}}};function ak(){return{localeError:M6()}}const z6=()=>{const e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(a){return e[a]??null}const r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},u={nan:"NaN",number:"nombro",array:"tabelo",null:"senvalora"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Nevalida enigo: atendiis instanceof ${a.expected}, riceviis ${c}`:`Nevalida enigo: atendiis ${f}, riceviis ${c}`}case"invalid_value":return a.values.length===1?`Nevalida enigo: atendiis ${jn(a.values[0])}`:`Nevalida opcio: atendiis unu el ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Tro granda: atendiis ke ${a.origin??"valoro"} havu ${f}${a.maximum.toString()} ${m.unit??"elementojn"}`:`Tro granda: atendiis ke ${a.origin??"valoro"} havu ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Tro malgranda: atendiis ke ${a.origin} havu ${f}${a.minimum.toString()} ${m.unit}`:`Tro malgranda: atendiis ke ${a.origin} estu ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Nevalida karaktraro: devas komencii per "${f.prefix}"`:f.format==="ends_with"?`Nevalida karaktraro: devas finii per "${f.suffix}"`:f.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${f.includes}"`:f.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${f.pattern}`:`Nevalida ${r[f.format]??a.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${a.divisor}`;case"unrecognized_keys":return`Nekonata${a.keys.length>1?"j":""} losilo${a.keys.length>1?"j":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Nevalida losilo en ${a.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${a.origin}`;default:return"Nevalida enigo"}}};function I6(){return{localeError:z6()}}const k6=()=>{const e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function t(a){return e[a]??null}const r={regex:"entrada",email:"direccin de correo electrnico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duracin ISO",ipv4:"direccin IPv4",ipv6:"direccin IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},u={nan:"NaN",string:"texto",number:"nmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"nmero grande",symbol:"smbolo",undefined:"indefinido",null:"nulo",function:"funcin",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeracin",union:"unin",literal:"literal",promise:"promesa",void:"vaco",never:"nunca",unknown:"desconocido",any:"cualquiera"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Entrada invlida: se esperaba instanceof ${a.expected}, recibido ${c}`:`Entrada invlida: se esperaba ${f}, recibido ${c}`}case"invalid_value":return a.values.length===1?`Entrada invlida: se esperaba ${jn(a.values[0])}`:`Opcin invlida: se esperaba una de ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin),c=u[a.origin]??a.origin;return m?`Demasiado grande: se esperaba que ${c??"valor"} tuviera ${f}${a.maximum.toString()} ${m.unit??"elementos"}`:`Demasiado grande: se esperaba que ${c??"valor"} fuera ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin),c=u[a.origin]??a.origin;return m?`Demasiado pequeo: se esperaba que ${c} tuviera ${f}${a.minimum.toString()} ${m.unit}`:`Demasiado pequeo: se esperaba que ${c} fuera ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Cadena invlida: debe comenzar con "${f.prefix}"`:f.format==="ends_with"?`Cadena invlida: debe terminar en "${f.suffix}"`:f.format==="includes"?`Cadena invlida: debe incluir "${f.includes}"`:f.format==="regex"?`Cadena invlida: debe coincidir con el patrn ${f.pattern}`:`Invlido ${r[f.format]??a.format}`}case"not_multiple_of":return`Nmero invlido: debe ser mltiplo de ${a.divisor}`;case"unrecognized_keys":return`Llave${a.keys.length>1?"s":""} desconocida${a.keys.length>1?"s":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Llave invlida en ${u[a.origin]??a.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor invlido en ${u[a.origin]??a.origin}`;default:return"Entrada invlida"}}};function P6(){return{localeError:k6()}}const D6=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(a){return e[a]??null}const r={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ",date:" ",time:" ",duration:"  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},u={nan:"NaN",number:"",array:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?` :  instanceof ${a.expected}  ${c}  `:` :  ${f}  ${c}  `}case"invalid_value":return a.values.length===1?` :  ${jn(a.values[0])} `:` :    ${Gt(a.values,"|")} `;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?` : ${a.origin??""}  ${f}${a.maximum.toString()} ${m.unit??""} `:` : ${a.origin??""}  ${f}${a.maximum.toString()} `}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?` : ${a.origin}  ${f}${a.minimum.toString()} ${m.unit} `:` : ${a.origin}  ${f}${a.minimum.toString()} `}case"invalid_format":{const f=a;return f.format==="starts_with"?` :   "${f.prefix}"  `:f.format==="ends_with"?` :   "${f.suffix}"  `:f.format==="includes"?` :   "${f.includes}" `:f.format==="regex"?` :    ${f.pattern}   `:`${r[f.format]??a.format} `}case"not_multiple_of":return` :   ${a.divisor} `;case"unrecognized_keys":return`${a.keys.length>1?"":""} : ${Gt(a.keys,", ")}`;case"invalid_key":return`   ${a.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${a.origin}`;default:return" "}}};function L6(){return{localeError:D6()}}const R6=()=>{const e={string:{unit:"merkki",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"pivmrn"}};function t(a){return e[a]??null}const r={regex:"snnllinen lauseke",email:"shkpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-pivmr",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},u={nan:"NaN"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Virheellinen tyyppi: odotettiin instanceof ${a.expected}, oli ${c}`:`Virheellinen tyyppi: odotettiin ${f}, oli ${c}`}case"invalid_value":return a.values.length===1?`Virheellinen syte: tytyy olla ${jn(a.values[0])}`:`Virheellinen valinta: tytyy olla yksi seuraavista: ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Liian suuri: ${m.subject} tytyy olla ${f}${a.maximum.toString()} ${m.unit}`.trim():`Liian suuri: arvon tytyy olla ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Liian pieni: ${m.subject} tytyy olla ${f}${a.minimum.toString()} ${m.unit}`.trim():`Liian pieni: arvon tytyy olla ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Virheellinen syte: tytyy alkaa "${f.prefix}"`:f.format==="ends_with"?`Virheellinen syte: tytyy loppua "${f.suffix}"`:f.format==="includes"?`Virheellinen syte: tytyy sislt "${f.includes}"`:f.format==="regex"?`Virheellinen syte: tytyy vastata snnllist lauseketta ${f.pattern}`:`Virheellinen ${r[f.format]??a.format}`}case"not_multiple_of":return`Virheellinen luku: tytyy olla luvun ${a.divisor} monikerta`;case"unrecognized_keys":return`${a.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${Gt(a.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen syte"}}};function O6(){return{localeError:R6()}}const N6=()=>{const e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}};function t(a){return e[a]??null}const r={regex:"entre",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},u={nan:"NaN",number:"nombre",array:"tableau"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Entre invalide : instanceof ${a.expected} attendu, ${c} reu`:`Entre invalide : ${f} attendu, ${c} reu`}case"invalid_value":return a.values.length===1?`Entre invalide : ${jn(a.values[0])} attendu`:`Option invalide : une valeur parmi ${Gt(a.values,"|")} attendue`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Trop grand : ${a.origin??"valeur"} doit ${m.verb} ${f}${a.maximum.toString()} ${m.unit??"lment(s)"}`:`Trop grand : ${a.origin??"valeur"} doit tre ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Trop petit : ${a.origin} doit ${m.verb} ${f}${a.minimum.toString()} ${m.unit}`:`Trop petit : ${a.origin} doit tre ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Chane invalide : doit commencer par "${f.prefix}"`:f.format==="ends_with"?`Chane invalide : doit se terminer par "${f.suffix}"`:f.format==="includes"?`Chane invalide : doit inclure "${f.includes}"`:f.format==="regex"?`Chane invalide : doit correspondre au modle ${f.pattern}`:`${r[f.format]??a.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit tre un multiple de ${a.divisor}`;case"unrecognized_keys":return`Cl${a.keys.length>1?"s":""} non reconnue${a.keys.length>1?"s":""} : ${Gt(a.keys,", ")}`;case"invalid_key":return`Cl invalide dans ${a.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${a.origin}`;default:return"Entre invalide"}}};function $6(){return{localeError:N6()}}const j6=()=>{const e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}};function t(a){return e[a]??null}const r={regex:"entre",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},u={nan:"NaN"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Entre invalide : attendu instanceof ${a.expected}, reu ${c}`:`Entre invalide : attendu ${f}, reu ${c}`}case"invalid_value":return a.values.length===1?`Entre invalide : attendu ${jn(a.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"":"<",m=t(a.origin);return m?`Trop grand : attendu que ${a.origin??"la valeur"} ait ${f}${a.maximum.toString()} ${m.unit}`:`Trop grand : attendu que ${a.origin??"la valeur"} soit ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?"":">",m=t(a.origin);return m?`Trop petit : attendu que ${a.origin} ait ${f}${a.minimum.toString()} ${m.unit}`:`Trop petit : attendu que ${a.origin} soit ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Chane invalide : doit commencer par "${f.prefix}"`:f.format==="ends_with"?`Chane invalide : doit se terminer par "${f.suffix}"`:f.format==="includes"?`Chane invalide : doit inclure "${f.includes}"`:f.format==="regex"?`Chane invalide : doit correspondre au motif ${f.pattern}`:`${r[f.format]??a.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit tre un multiple de ${a.divisor}`;case"unrecognized_keys":return`Cl${a.keys.length>1?"s":""} non reconnue${a.keys.length>1?"s":""} : ${Gt(a.keys,", ")}`;case"invalid_key":return`Cl invalide dans ${a.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${a.origin}`;default:return"Entre invalide"}}};function B6(){return{localeError:j6()}}const F6=()=>{const e={string:{label:"",gender:"f"},number:{label:"",gender:"m"},boolean:{label:" ",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"",gender:"m"},array:{label:"",gender:"m"},object:{label:"",gender:"m"},null:{label:"  (null)",gender:"m"},undefined:{label:"   (undefined)",gender:"m"},symbol:{label:" (Symbol)",gender:"m"},function:{label:"",gender:"f"},map:{label:" (Map)",gender:"f"},set:{label:" (Set)",gender:"f"},file:{label:"",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"  ",gender:"m"},value:{label:"",gender:"m"}},t={string:{unit:"",shortLabel:"",longLabel:""},file:{unit:"",shortLabel:"",longLabel:""},array:{unit:"",shortLabel:"",longLabel:""},set:{unit:"",shortLabel:"",longLabel:""},number:{unit:"",shortLabel:"",longLabel:""}},r=k=>k?e[k]:void 0,u=k=>{const B=r(k);return B?B.label:k??e.unknown.label},a=k=>`${u(k)}`,f=k=>(r(k)?.gender??"m")==="f"?" ":" ",m=k=>k?t[k]??null:null,c={regex:{label:"",gender:"m"},email:{label:" ",gender:"f"},url:{label:" ",gender:"f"},emoji:{label:"'",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"  ISO",gender:"m"},date:{label:" ISO",gender:"m"},time:{label:" ISO",gender:"m"},duration:{label:"  ISO",gender:"m"},ipv4:{label:" IPv4",gender:"f"},ipv6:{label:" IPv6",gender:"f"},cidrv4:{label:" IPv4",gender:"m"},cidrv6:{label:" IPv6",gender:"m"},base64:{label:"  64",gender:"f"},base64url:{label:"  64  ",gender:"f"},json_string:{label:" JSON",gender:"f"},e164:{label:" E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"",gender:"m"},includes:{label:"",gender:"m"},lowercase:{label:"",gender:"m"},starts_with:{label:"",gender:"m"},uppercase:{label:"",gender:"m"}},z={nan:"NaN"};return k=>{switch(k.code){case"invalid_type":{const B=k.expected,Z=z[B??""]??u(B),X=Fn(k.input),J=z[X]??e[X]?.label??X;return/^[A-Z]/.test(k.expected)?`  :   instanceof ${k.expected},  ${J}`:`  :   ${Z},  ${J}`}case"invalid_value":{if(k.values.length===1)return`  :    ${jn(k.values[0])}`;const B=k.values.map(J=>jn(J));if(k.values.length===2)return`  :    ${B[0]}  ${B[1]}`;const Z=B[B.length-1];return`  :    ${B.slice(0,-1).join(", ")}  ${Z}`}case"too_big":{const B=m(k.origin),Z=a(k.origin??"value");if(k.origin==="string")return`${B?.longLabel??""} : ${Z}   ${k.maximum.toString()} ${B?.unit??""} ${k.inclusive?" ":" "}`.trim();if(k.origin==="number"){const ce=k.inclusive?`   -${k.maximum}`:` -${k.maximum}`;return` : ${Z}   ${ce}`}if(k.origin==="array"||k.origin==="set"){const ce=k.origin==="set"?"":"",ee=k.inclusive?`${k.maximum} ${B?.unit??""}  `:` -${k.maximum} ${B?.unit??""}`;return` : ${Z} ${ce}  ${ee}`.trim()}const X=k.inclusive?"<=":"<",J=f(k.origin??"value");return B?.unit?`${B.longLabel} : ${Z} ${J} ${X}${k.maximum.toString()} ${B.unit}`:`${B?.longLabel??""} : ${Z} ${J} ${X}${k.maximum.toString()}`}case"too_small":{const B=m(k.origin),Z=a(k.origin??"value");if(k.origin==="string")return`${B?.shortLabel??""} : ${Z}   ${k.minimum.toString()} ${B?.unit??""} ${k.inclusive?" ":""}`.trim();if(k.origin==="number"){const ce=k.inclusive?`   -${k.minimum}`:` -${k.minimum}`;return` : ${Z}   ${ce}`}if(k.origin==="array"||k.origin==="set"){const ce=k.origin==="set"?"":"";if(k.minimum===1&&k.inclusive){const ae=(k.origin==="set","  ");return` : ${Z} ${ce}  ${ae}`}const ee=k.inclusive?`${k.minimum} ${B?.unit??""}  `:` -${k.minimum} ${B?.unit??""}`;return` : ${Z} ${ce}  ${ee}`.trim()}const X=k.inclusive?">=":">",J=f(k.origin??"value");return B?.unit?`${B.shortLabel} : ${Z} ${J} ${X}${k.minimum.toString()} ${B.unit}`:`${B?.shortLabel??""} : ${Z} ${J} ${X}${k.minimum.toString()}`}case"invalid_format":{const B=k;if(B.format==="starts_with")return`    "${B.prefix}"`;if(B.format==="ends_with")return`    "${B.suffix}"`;if(B.format==="includes")return`   "${B.includes}"`;if(B.format==="regex")return`    ${B.pattern}`;const Z=c[B.format],X=Z?.label??B.format,ce=(Z?.gender??"m")==="f"?"":"";return`${X}  ${ce}`}case"not_multiple_of":return`  :     ${k.divisor}`;case"unrecognized_keys":return`${k.keys.length>1?"":""}  ${k.keys.length>1?"":""}: ${Gt(k.keys,", ")}`;case"invalid_key":return"   ";case"invalid_union":return"  ";case"invalid_element":return`   ${a(k.origin??"array")}`;default:return"  "}}};function U6(){return{localeError:F6()}}const V6=()=>{const e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(a){return e[a]??null}const r={regex:"bemenet",email:"email cm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idblyeg",date:"ISO dtum",time:"ISO id",duration:"ISO idintervallum",ipv4:"IPv4 cm",ipv6:"IPv6 cm",cidrv4:"IPv4 tartomny",cidrv6:"IPv6 tartomny",base64:"base64-kdolt string",base64url:"base64url-kdolt string",json_string:"JSON string",e164:"E.164 szm",jwt:"JWT",template_literal:"bemenet"},u={nan:"NaN",number:"szm",array:"tmb"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`rvnytelen bemenet: a vrt rtk instanceof ${a.expected}, a kapott rtk ${c}`:`rvnytelen bemenet: a vrt rtk ${f}, a kapott rtk ${c}`}case"invalid_value":return a.values.length===1?`rvnytelen bemenet: a vrt rtk ${jn(a.values[0])}`:`rvnytelen opci: valamelyik rtk vrt ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Tl nagy: ${a.origin??"rtk"} mrete tl nagy ${f}${a.maximum.toString()} ${m.unit??"elem"}`:`Tl nagy: a bemeneti rtk ${a.origin??"rtk"} tl nagy: ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Tl kicsi: a bemeneti rtk ${a.origin} mrete tl kicsi ${f}${a.minimum.toString()} ${m.unit}`:`Tl kicsi: a bemeneti rtk ${a.origin} tl kicsi ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`rvnytelen string: "${f.prefix}" rtkkel kell kezddnie`:f.format==="ends_with"?`rvnytelen string: "${f.suffix}" rtkkel kell vgzdnie`:f.format==="includes"?`rvnytelen string: "${f.includes}" rtket kell tartalmaznia`:f.format==="regex"?`rvnytelen string: ${f.pattern} mintnak kell megfelelnie`:`rvnytelen ${r[f.format]??a.format}`}case"not_multiple_of":return`rvnytelen szm: ${a.divisor} tbbszrsnek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${a.keys.length>1?"s":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`rvnytelen kulcs ${a.origin}`;case"invalid_union":return"rvnytelen bemenet";case"invalid_element":return`rvnytelen rtk: ${a.origin}`;default:return"rvnytelen bemenet"}}};function Z6(){return{localeError:V6()}}function uA(e,t,r){return Math.abs(e)===1?t:r}function Gg(e){if(!e)return"";const t=["","","","","","",""],r=e[e.length-1];return e+(t.includes(r)?"":"")}const q6=()=>{const e={string:{unit:{one:"",many:""},verb:""},file:{unit:{one:"",many:""},verb:""},array:{unit:{one:"",many:""},verb:""},set:{unit:{one:"",many:""},verb:""}};function t(a){return e[a]??null}const r={regex:"",email:". ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},u={nan:"NaN",number:"",array:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`    instanceof ${a.expected},   ${c}`:`    ${f},   ${c}`}case"invalid_value":return a.values.length===1?`    ${jn(a.values[1])}`:`      ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);if(m){const c=Number(a.maximum),z=uA(c,m.unit.one,m.unit.many);return`    ,  ${Gg(a.origin??"")}  ${f}${a.maximum.toString()} ${z}`}return`    ,  ${Gg(a.origin??"")}  ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);if(m){const c=Number(a.minimum),z=uA(c,m.unit.one,m.unit.many);return`    ,  ${Gg(a.origin)}  ${f}${a.minimum.toString()} ${z}`}return`    ,  ${Gg(a.origin)}  ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`     "${f.prefix}"-`:f.format==="ends_with"?`     "${f.suffix}"-`:f.format==="includes"?`     "${f.includes}"`:f.format==="regex"?`     ${f.pattern} `:` ${r[f.format]??a.format}`}case"not_multiple_of":return`      ${a.divisor}-`;case"unrecognized_keys":return` ${a.keys.length>1?"":""}. ${Gt(a.keys,", ")}`;case"invalid_key":return`  ${Gg(a.origin)}-`;case"invalid_union":return" ";case"invalid_element":return`  ${Gg(a.origin)}-`;default:return" "}}};function G6(){return{localeError:q6()}}const H6=()=>{const e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(a){return e[a]??null}const r={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},u={nan:"NaN"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Input tidak valid: diharapkan instanceof ${a.expected}, diterima ${c}`:`Input tidak valid: diharapkan ${f}, diterima ${c}`}case"invalid_value":return a.values.length===1?`Input tidak valid: diharapkan ${jn(a.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Terlalu besar: diharapkan ${a.origin??"value"} memiliki ${f}${a.maximum.toString()} ${m.unit??"elemen"}`:`Terlalu besar: diharapkan ${a.origin??"value"} menjadi ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Terlalu kecil: diharapkan ${a.origin} memiliki ${f}${a.minimum.toString()} ${m.unit}`:`Terlalu kecil: diharapkan ${a.origin} menjadi ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`String tidak valid: harus dimulai dengan "${f.prefix}"`:f.format==="ends_with"?`String tidak valid: harus berakhir dengan "${f.suffix}"`:f.format==="includes"?`String tidak valid: harus menyertakan "${f.includes}"`:f.format==="regex"?`String tidak valid: harus sesuai pola ${f.pattern}`:`${r[f.format]??a.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${a.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${a.keys.length>1?"s":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${a.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${a.origin}`;default:return"Input tidak valid"}}};function W6(){return{localeError:H6()}}const X6=()=>{const e={string:{unit:"stafi",verb:"a hafa"},file:{unit:"bti",verb:"a hafa"},array:{unit:"hluti",verb:"a hafa"},set:{unit:"hluti",verb:"a hafa"}};function t(a){return e[a]??null}const r={regex:"gildi",email:"netfang",url:"vefsl",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tmi",date:"ISO dagsetning",time:"ISO tmi",duration:"ISO tmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tlugildi",jwt:"JWT",template_literal:"gildi"},u={nan:"NaN",number:"nmer",array:"fylki"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Rangt gildi:  slst inn ${c} ar sem  a vera instanceof ${a.expected}`:`Rangt gildi:  slst inn ${c} ar sem  a vera ${f}`}case"invalid_value":return a.values.length===1?`Rangt gildi: gert r fyrir ${jn(a.values[0])}`:`gilt val: m vera eitt af eftirfarandi ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Of strt: gert er r fyrir a ${a.origin??"gildi"} hafi ${f}${a.maximum.toString()} ${m.unit??"hluti"}`:`Of strt: gert er r fyrir a ${a.origin??"gildi"} s ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Of lti: gert er r fyrir a ${a.origin} hafi ${f}${a.minimum.toString()} ${m.unit}`:`Of lti: gert er r fyrir a ${a.origin} s ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`gildur strengur: verur a byrja  "${f.prefix}"`:f.format==="ends_with"?`gildur strengur: verur a enda  "${f.suffix}"`:f.format==="includes"?`gildur strengur: verur a innihalda "${f.includes}"`:f.format==="regex"?`gildur strengur: verur a fylgja mynstri ${f.pattern}`:`Rangt ${r[f.format]??a.format}`}case"not_multiple_of":return`Rng tala: verur a vera margfeldi af ${a.divisor}`;case"unrecognized_keys":return`ekkt ${a.keys.length>1?"ir lyklar":"ur lykill"}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Rangur lykill  ${a.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi  ${a.origin}`;default:return"Rangt gildi"}}};function Y6(){return{localeError:X6()}}const K6=()=>{const e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(a){return e[a]??null}const r={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},u={nan:"NaN",number:"numero",array:"vettore"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Input non valido: atteso instanceof ${a.expected}, ricevuto ${c}`:`Input non valido: atteso ${f}, ricevuto ${c}`}case"invalid_value":return a.values.length===1?`Input non valido: atteso ${jn(a.values[0])}`:`Opzione non valida: atteso uno tra ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Troppo grande: ${a.origin??"valore"} deve avere ${f}${a.maximum.toString()} ${m.unit??"elementi"}`:`Troppo grande: ${a.origin??"valore"} deve essere ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Troppo piccolo: ${a.origin} deve avere ${f}${a.minimum.toString()} ${m.unit}`:`Troppo piccolo: ${a.origin} deve essere ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Stringa non valida: deve iniziare con "${f.prefix}"`:f.format==="ends_with"?`Stringa non valida: deve terminare con "${f.suffix}"`:f.format==="includes"?`Stringa non valida: deve includere "${f.includes}"`:f.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${f.pattern}`:`Invalid ${r[f.format]??a.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${a.divisor}`;case"unrecognized_keys":return`Chiav${a.keys.length>1?"i":"e"} non riconosciut${a.keys.length>1?"e":"a"}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${a.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${a.origin}`;default:return"Input non valido"}}};function J6(){return{localeError:K6()}}const Q6=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(a){return e[a]??null}const r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},u={nan:"NaN",number:"",array:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`: instanceof ${a.expected}${c}`:`: ${f}${c}`}case"invalid_value":return a.values.length===1?`: ${jn(a.values[0])}`:`: ${Gt(a.values,"")}`;case"too_big":{const f=a.inclusive?"":"",m=t(a.origin);return m?`: ${a.origin??""}${a.maximum.toString()}${m.unit??""}${f}`:`: ${a.origin??""}${a.maximum.toString()}${f}`}case"too_small":{const f=a.inclusive?"":"",m=t(a.origin);return m?`: ${a.origin}${a.minimum.toString()}${m.unit}${f}`:`: ${a.origin}${a.minimum.toString()}${f}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`: "${f.prefix}"`:f.format==="ends_with"?`: "${f.suffix}"`:f.format==="includes"?`: "${f.includes}"`:f.format==="regex"?`: ${f.pattern}`:`${r[f.format]??a.format}`}case"not_multiple_of":return`: ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"":""}: ${Gt(a.keys,"")}`;case"invalid_key":return`${a.origin}`;case"invalid_union":return"";case"invalid_element":return`${a.origin}`;default:return""}}};function e8(){return{localeError:Q6()}}const t8=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(a){return e[a]??null}const r={regex:"",email:"- ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"-",date:"",time:"",duration:"",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},u={nan:"NaN",number:"",string:"",boolean:"",function:"",array:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?` :  instanceof ${a.expected},  ${c}`:` :  ${f},  ${c}`}case"invalid_value":return a.values.length===1?` :  ${jn(a.values[0])}`:` :  - ${Gt(a.values,"|")}-`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?` :  ${a.origin??""} ${m.verb} ${f}${a.maximum.toString()} ${m.unit}`:` :  ${a.origin??""}  ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?` :  ${a.origin} ${m.verb} ${f}${a.minimum.toString()} ${m.unit}`:` :  ${a.origin}  ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?` :   "${f.prefix}"-`:f.format==="ends_with"?` :   "${f.suffix}"-`:f.format==="includes"?` :   "${f.includes}"-`:f.format==="regex"?` :    ${f.pattern}`:` ${r[f.format]??a.format}`}case"not_multiple_of":return` :   ${a.divisor}- `;case"unrecognized_keys":return` ${a.keys.length>1?"":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`  ${a.origin}-`;case"invalid_union":return" ";case"invalid_element":return`  ${a.origin}-`;default:return" "}}};function n8(){return{localeError:t8()}}const i8=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(a){return e[a]??null}const r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""},u={nan:"NaN",number:"",array:" (Array)",null:" (null)"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`  instanceof ${a.expected}  ${c}`:`  ${f}  ${c}`}case"invalid_value":return a.values.length===1?`  ${jn(a.values[0])}`:`  ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`  ${a.origin??""} ${f} ${a.maximum.toString()} ${m.unit??""}`:`  ${a.origin??""} ${f} ${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`  ${a.origin} ${f} ${a.minimum.toString()} ${m.unit}`:`  ${a.origin} ${f} ${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`  "${f.prefix}"`:f.format==="ends_with"?`  "${f.suffix}"`:f.format==="includes"?`  "${f.includes}"`:f.format==="regex"?`  ${f.pattern}`:` ${r[f.format]??a.format}`}case"not_multiple_of":return`  ${a.divisor}`;case"unrecognized_keys":return` ${Gt(a.keys,", ")}`;case"invalid_key":return` ${a.origin}`;case"invalid_union":return"";case"invalid_element":return` ${a.origin}`;default:return""}}};function ok(){return{localeError:i8()}}function r8(){return ok()}const a8=()=>{const e={string:{unit:"",verb:"to have"},file:{unit:"",verb:"to have"},array:{unit:"",verb:"to have"},set:{unit:"",verb:"to have"}};function t(a){return e[a]??null}const r={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},u={nan:"NaN"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?` :   instanceof ${a.expected},   ${c}`:` :   ${f},   ${c}`}case"invalid_value":return a.values.length===1?` :  ${jn(a.values[0])}  `:` : ${Gt(a.values," ")}   `;case"too_big":{const f=a.inclusive?"":"",m=f===""?" ":" ",c=t(a.origin),z=c?.unit??"";return c?`${a.origin??""}  : ${a.maximum.toString()}${z} ${f}${m}`:`${a.origin??""}  : ${a.maximum.toString()} ${f}${m}`}case"too_small":{const f=a.inclusive?"":"",m=f===""?" ":" ",c=t(a.origin),z=c?.unit??"";return c?`${a.origin??""}  : ${a.minimum.toString()}${z} ${f}${m}`:`${a.origin??""}  : ${a.minimum.toString()} ${f}${m}`}case"invalid_format":{const f=a;return f.format==="starts_with"?` : "${f.prefix}"()  `:f.format==="ends_with"?` : "${f.suffix}"()  `:f.format==="includes"?` : "${f.includes}"()  `:f.format==="regex"?` :  ${f.pattern}   `:` ${r[f.format]??a.format}`}case"not_multiple_of":return` : ${a.divisor}  `;case"unrecognized_keys":return`   : ${Gt(a.keys,", ")}`;case"invalid_key":return` : ${a.origin}`;case"invalid_union":return" ";case"invalid_element":return` : ${a.origin}`;default:return" "}}};function o8(){return{localeError:a8()}}const R_=e=>e.charAt(0).toUpperCase()+e.slice(1);function hA(e){const t=Math.abs(e),r=t%10,u=t%100;return u>=11&&u<=19||r===0?"many":r===1?"one":"few"}const s8=()=>{const e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli"},verb:{smaller:{inclusive:"turi bti ne ilgesn kaip",notInclusive:"turi bti trumpesn kaip"},bigger:{inclusive:"turi bti ne trumpesn kaip",notInclusive:"turi bti ilgesn kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait"},verb:{smaller:{inclusive:"turi bti ne didesnis kaip",notInclusive:"turi bti maesnis kaip"},bigger:{inclusive:"turi bti ne maesnis kaip",notInclusive:"turi bti didesnis kaip"}}},array:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}},set:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}}};function t(a,f,m,c){const z=e[a]??null;return z===null?z:{unit:z.unit[f],verb:z.verb[c][m?"inclusive":"notInclusive"]}}const r={regex:"vestis",email:"el. pato adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 ukoduota eilut",base64url:"base64url ukoduota eilut",json_string:"JSON eilut",e164:"E.164 numeris",jwt:"JWT",template_literal:"vestis"},u={nan:"NaN",number:"skaiius",bigint:"sveikasis skaiius",string:"eilut",boolean:"login reikm",undefined:"neapibrta reikm",function:"funkcija",symbol:"simbolis",array:"masyvas",object:"objektas",null:"nulin reikm"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Gautas tipas ${c}, o tiktasi - instanceof ${a.expected}`:`Gautas tipas ${c}, o tiktasi - ${f}`}case"invalid_value":return a.values.length===1?`Privalo bti ${jn(a.values[0])}`:`Privalo bti vienas i ${Gt(a.values,"|")} pasirinkim`;case"too_big":{const f=u[a.origin]??a.origin,m=t(a.origin,hA(Number(a.maximum)),a.inclusive??!1,"smaller");if(m?.verb)return`${R_(f??a.origin??"reikm")} ${m.verb} ${a.maximum.toString()} ${m.unit??"element"}`;const c=a.inclusive?"ne didesnis kaip":"maesnis kaip";return`${R_(f??a.origin??"reikm")} turi bti ${c} ${a.maximum.toString()} ${m?.unit}`}case"too_small":{const f=u[a.origin]??a.origin,m=t(a.origin,hA(Number(a.minimum)),a.inclusive??!1,"bigger");if(m?.verb)return`${R_(f??a.origin??"reikm")} ${m.verb} ${a.minimum.toString()} ${m.unit??"element"}`;const c=a.inclusive?"ne maesnis kaip":"didesnis kaip";return`${R_(f??a.origin??"reikm")} turi bti ${c} ${a.minimum.toString()} ${m?.unit}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Eilut privalo prasidti "${f.prefix}"`:f.format==="ends_with"?`Eilut privalo pasibaigti "${f.suffix}"`:f.format==="includes"?`Eilut privalo traukti "${f.includes}"`:f.format==="regex"?`Eilut privalo atitikti ${f.pattern}`:`Neteisingas ${r[f.format]??a.format}`}case"not_multiple_of":return`Skaiius privalo bti ${a.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpaint${a.keys.length>1?"i":"as"} rakt${a.keys.length>1?"ai":"as"}: ${Gt(a.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga vestis";case"invalid_element":{const f=u[a.origin]??a.origin;return`${R_(f??a.origin??"reikm")} turi klaiding vest`}default:return"Klaidinga vestis"}}};function l8(){return{localeError:s8()}}const c8=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(a){return e[a]??null}const r={regex:"",email:"  -",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},u={nan:"NaN",number:"",array:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?` :   instanceof ${a.expected},  ${c}`:` :   ${f},  ${c}`}case"invalid_value":return a.values.length===1?`Invalid input: expected ${jn(a.values[0])}`:` :    ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?` :   ${a.origin??""}   ${f}${a.maximum.toString()} ${m.unit??""}`:` :   ${a.origin??""}   ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?` :   ${a.origin}   ${f}${a.minimum.toString()} ${m.unit}`:` :   ${a.origin}   ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?` :     "${f.prefix}"`:f.format==="ends_with"?` :     "${f.suffix}"`:f.format==="includes"?` :    "${f.includes}"`:f.format==="regex"?` :      ${f.pattern}`:`Invalid ${r[f.format]??a.format}`}case"not_multiple_of":return` :      ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?" ":" "}: ${Gt(a.keys,", ")}`;case"invalid_key":return`   ${a.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${a.origin}`;default:return" "}}};function u8(){return{localeError:c8()}}const h8=()=>{const e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(a){return e[a]??null}const r={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},u={nan:"NaN",number:"nombor"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Input tidak sah: dijangka instanceof ${a.expected}, diterima ${c}`:`Input tidak sah: dijangka ${f}, diterima ${c}`}case"invalid_value":return a.values.length===1?`Input tidak sah: dijangka ${jn(a.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Terlalu besar: dijangka ${a.origin??"nilai"} ${m.verb} ${f}${a.maximum.toString()} ${m.unit??"elemen"}`:`Terlalu besar: dijangka ${a.origin??"nilai"} adalah ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Terlalu kecil: dijangka ${a.origin} ${m.verb} ${f}${a.minimum.toString()} ${m.unit}`:`Terlalu kecil: dijangka ${a.origin} adalah ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`String tidak sah: mesti bermula dengan "${f.prefix}"`:f.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${f.suffix}"`:f.format==="includes"?`String tidak sah: mesti mengandungi "${f.includes}"`:f.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${f.pattern}`:`${r[f.format]??a.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${a.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${Gt(a.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${a.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${a.origin}`;default:return"Input tidak sah"}}};function d8(){return{localeError:h8()}}const f8=()=>{const e={string:{unit:"tekens",verb:"heeft"},file:{unit:"bytes",verb:"heeft"},array:{unit:"elementen",verb:"heeft"},set:{unit:"elementen",verb:"heeft"}};function t(a){return e[a]??null}const r={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},u={nan:"NaN",number:"getal"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Ongeldige invoer: verwacht instanceof ${a.expected}, ontving ${c}`:`Ongeldige invoer: verwacht ${f}, ontving ${c}`}case"invalid_value":return a.values.length===1?`Ongeldige invoer: verwacht ${jn(a.values[0])}`:`Ongeldige optie: verwacht n van ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin),c=a.origin==="date"?"laat":a.origin==="string"?"lang":"groot";return m?`Te ${c}: verwacht dat ${a.origin??"waarde"} ${f}${a.maximum.toString()} ${m.unit??"elementen"} ${m.verb}`:`Te ${c}: verwacht dat ${a.origin??"waarde"} ${f}${a.maximum.toString()} is`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin),c=a.origin==="date"?"vroeg":a.origin==="string"?"kort":"klein";return m?`Te ${c}: verwacht dat ${a.origin} ${f}${a.minimum.toString()} ${m.unit} ${m.verb}`:`Te ${c}: verwacht dat ${a.origin} ${f}${a.minimum.toString()} is`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Ongeldige tekst: moet met "${f.prefix}" beginnen`:f.format==="ends_with"?`Ongeldige tekst: moet op "${f.suffix}" eindigen`:f.format==="includes"?`Ongeldige tekst: moet "${f.includes}" bevatten`:f.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${f.pattern}`:`Ongeldig: ${r[f.format]??a.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${a.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${a.keys.length>1?"s":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${a.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${a.origin}`;default:return"Ongeldige invoer"}}};function p8(){return{localeError:f8()}}const m8=()=>{const e={string:{unit:"tegn",verb:" ha"},file:{unit:"bytes",verb:" ha"},array:{unit:"elementer",verb:" inneholde"},set:{unit:"elementer",verb:" inneholde"}};function t(a){return e[a]??null}const r={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},u={nan:"NaN",number:"tall",array:"liste"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Ugyldig input: forventet instanceof ${a.expected}, fikk ${c}`:`Ugyldig input: forventet ${f}, fikk ${c}`}case"invalid_value":return a.values.length===1?`Ugyldig verdi: forventet ${jn(a.values[0])}`:`Ugyldig valg: forventet en av ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`For stor(t): forventet ${a.origin??"value"} til  ha ${f}${a.maximum.toString()} ${m.unit??"elementer"}`:`For stor(t): forventet ${a.origin??"value"} til  ha ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`For lite(n): forventet ${a.origin} til  ha ${f}${a.minimum.toString()} ${m.unit}`:`For lite(n): forventet ${a.origin} til  ha ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Ugyldig streng: m starte med "${f.prefix}"`:f.format==="ends_with"?`Ugyldig streng: m ende med "${f.suffix}"`:f.format==="includes"?`Ugyldig streng: m inneholde "${f.includes}"`:f.format==="regex"?`Ugyldig streng: m matche mnsteret ${f.pattern}`:`Ugyldig ${r[f.format]??a.format}`}case"not_multiple_of":return`Ugyldig tall: m vre et multiplum av ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"Ukjente nkler":"Ukjent nkkel"}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Ugyldig nkkel i ${a.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${a.origin}`;default:return"Ugyldig input"}}};function g8(){return{localeError:m8()}}const y8=()=>{const e={string:{unit:"harf",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"unsur",verb:"olmaldr"},set:{unit:"unsur",verb:"olmaldr"}};function t(a){return e[a]??null}const r={regex:"giren",email:"epostagh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengm",date:"ISO tarihi",time:"ISO zaman",duration:"ISO mddeti",ipv4:"IPv4 nin",ipv6:"IPv6 nin",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ifreli metin",base64url:"base64url-ifreli metin",json_string:"JSON metin",e164:"E.164 says",jwt:"JWT",template_literal:"giren"},u={nan:"NaN",number:"numara",array:"saf",null:"gayb"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Fsit giren: umulan instanceof ${a.expected}, alnan ${c}`:`Fsit giren: umulan ${f}, alnan ${c}`}case"invalid_value":return a.values.length===1?`Fsit giren: umulan ${jn(a.values[0])}`:`Fsit tercih: mteberler ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Fazla byk: ${a.origin??"value"}, ${f}${a.maximum.toString()} ${m.unit??"elements"} sahip olmalyd.`:`Fazla byk: ${a.origin??"value"}, ${f}${a.maximum.toString()} olmalyd.`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Fazla kk: ${a.origin}, ${f}${a.minimum.toString()} ${m.unit} sahip olmalyd.`:`Fazla kk: ${a.origin}, ${f}${a.minimum.toString()} olmalyd.`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Fsit metin: "${f.prefix}" ile balamal.`:f.format==="ends_with"?`Fsit metin: "${f.suffix}" ile bitmeli.`:f.format==="includes"?`Fsit metin: "${f.includes}" ihtiv etmeli.`:f.format==="regex"?`Fsit metin: ${f.pattern} nakna uymal.`:`Fsit ${r[f.format]??a.format}`}case"not_multiple_of":return`Fsit say: ${a.divisor} kat olmalyd.`;case"unrecognized_keys":return`Tannmayan anahtar ${a.keys.length>1?"s":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`${a.origin} iin tannmayan anahtar var.`;case"invalid_union":return"Giren tannamad.";case"invalid_element":return`${a.origin} iin tannmayan kymet var.`;default:return"Kymet tannamad."}}};function _8(){return{localeError:y8()}}const v8=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(a){return e[a]??null}const r={regex:"",email:"",url:"  ",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ",date:"",time:"",duration:"",ipv4:" IPv4 ",ipv6:" IPv6 ",cidrv4:" IPv4 ",cidrv6:" IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:" E.164 ",jwt:"JWT",template_literal:""},u={nan:"NaN",number:"",array:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?` :  instanceof ${a.expected} ,  ${c}  `:` :  ${f} ,  ${c}  `}case"invalid_value":return a.values.length===1?` :  ${jn(a.values[0])} `:` :    ${Gt(a.values,"|")}  `;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?` : ${a.origin??""}  ${f}${a.maximum.toString()} ${m.unit??""} `:` : ${a.origin??""}  ${f}${a.maximum.toString()} `}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?` : ${a.origin}  ${f}${a.minimum.toString()} ${m.unit} `:` : ${a.origin}  ${f}${a.minimum.toString()} `}case"invalid_format":{const f=a;return f.format==="starts_with"?` :   "${f.prefix}"   `:f.format==="ends_with"?` :   "${f.suffix}"    `:f.format==="includes"?` :  "${f.includes}" `:f.format==="regex"?` :   ${f.pattern}   `:`${r[f.format]??a.format}  `}case"not_multiple_of":return` :   ${a.divisor}  `;case"unrecognized_keys":return` ${a.keys.length>1?"":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`   ${a.origin} `;case"invalid_union":return" ";case"invalid_element":return`   ${a.origin} `;default:return" "}}};function b8(){return{localeError:v8()}}const x8=()=>{const e={string:{unit:"znakw",verb:"mie"},file:{unit:"bajtw",verb:"mie"},array:{unit:"elementw",verb:"mie"},set:{unit:"elementw",verb:"mie"}};function t(a){return e[a]??null}const r={regex:"wyraenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"cig znakw zakodowany w formacie base64",base64url:"cig znakw zakodowany w formacie base64url",json_string:"cig znakw w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejcie"},u={nan:"NaN",number:"liczba",array:"tablica"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Nieprawidowe dane wejciowe: oczekiwano instanceof ${a.expected}, otrzymano ${c}`:`Nieprawidowe dane wejciowe: oczekiwano ${f}, otrzymano ${c}`}case"invalid_value":return a.values.length===1?`Nieprawidowe dane wejciowe: oczekiwano ${jn(a.values[0])}`:`Nieprawidowa opcja: oczekiwano jednej z wartoci ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Za dua warto: oczekiwano, e ${a.origin??"warto"} bdzie mie ${f}${a.maximum.toString()} ${m.unit??"elementw"}`:`Zbyt du(y/a/e): oczekiwano, e ${a.origin??"warto"} bdzie wynosi ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Za maa warto: oczekiwano, e ${a.origin??"warto"} bdzie mie ${f}${a.minimum.toString()} ${m.unit??"elementw"}`:`Zbyt ma(y/a/e): oczekiwano, e ${a.origin??"warto"} bdzie wynosi ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Nieprawidowy cig znakw: musi zaczyna si od "${f.prefix}"`:f.format==="ends_with"?`Nieprawidowy cig znakw: musi koczy si na "${f.suffix}"`:f.format==="includes"?`Nieprawidowy cig znakw: musi zawiera "${f.includes}"`:f.format==="regex"?`Nieprawidowy cig znakw: musi odpowiada wzorcowi ${f.pattern}`:`Nieprawidow(y/a/e) ${r[f.format]??a.format}`}case"not_multiple_of":return`Nieprawidowa liczba: musi by wielokrotnoci ${a.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${a.keys.length>1?"s":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Nieprawidowy klucz w ${a.origin}`;case"invalid_union":return"Nieprawidowe dane wejciowe";case"invalid_element":return`Nieprawidowa warto w ${a.origin}`;default:return"Nieprawidowe dane wejciowe"}}};function w8(){return{localeError:x8()}}const S8=()=>{const e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(a){return e[a]??null}const r={regex:"padro",email:"endereo de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"durao ISO",ipv4:"endereo IPv4",ipv6:"endereo IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},u={nan:"NaN",number:"nmero",null:"nulo"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Tipo invlido: esperado instanceof ${a.expected}, recebido ${c}`:`Tipo invlido: esperado ${f}, recebido ${c}`}case"invalid_value":return a.values.length===1?`Entrada invlida: esperado ${jn(a.values[0])}`:`Opo invlida: esperada uma das ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Muito grande: esperado que ${a.origin??"valor"} tivesse ${f}${a.maximum.toString()} ${m.unit??"elementos"}`:`Muito grande: esperado que ${a.origin??"valor"} fosse ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Muito pequeno: esperado que ${a.origin} tivesse ${f}${a.minimum.toString()} ${m.unit}`:`Muito pequeno: esperado que ${a.origin} fosse ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Texto invlido: deve comear com "${f.prefix}"`:f.format==="ends_with"?`Texto invlido: deve terminar com "${f.suffix}"`:f.format==="includes"?`Texto invlido: deve incluir "${f.includes}"`:f.format==="regex"?`Texto invlido: deve corresponder ao padro ${f.pattern}`:`${r[f.format]??a.format} invlido`}case"not_multiple_of":return`Nmero invlido: deve ser mltiplo de ${a.divisor}`;case"unrecognized_keys":return`Chave${a.keys.length>1?"s":""} desconhecida${a.keys.length>1?"s":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Chave invlida em ${a.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor invlido em ${a.origin}`;default:return"Campo invlido"}}};function T8(){return{localeError:S8()}}function dA(e,t,r,u){const a=Math.abs(e),f=a%10,m=a%100;return m>=11&&m<=19?u:f===1?t:f>=2&&f<=4?r:u}const E8=()=>{const e={string:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""}};function t(a){return e[a]??null}const r={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},u={nan:"NaN",number:"",array:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?` :  instanceof ${a.expected},  ${c}`:` :  ${f},  ${c}`}case"invalid_value":return a.values.length===1?` :  ${jn(a.values[0])}`:` :    ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);if(m){const c=Number(a.maximum),z=dA(c,m.unit.one,m.unit.few,m.unit.many);return`  : ,  ${a.origin??""}   ${f}${a.maximum.toString()} ${z}`}return`  : ,  ${a.origin??""}  ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);if(m){const c=Number(a.minimum),z=dA(c,m.unit.one,m.unit.few,m.unit.many);return`  : ,  ${a.origin}   ${f}${a.minimum.toString()} ${z}`}return`  : ,  ${a.origin}  ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?` :    "${f.prefix}"`:f.format==="ends_with"?` :    "${f.suffix}"`:f.format==="includes"?` :   "${f.includes}"`:f.format==="regex"?` :    ${f.pattern}`:` ${r[f.format]??a.format}`}case"not_multiple_of":return` :    ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"":""} ${a.keys.length>1?"":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`   ${a.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${a.origin}`;default:return"  "}}};function A8(){return{localeError:E8()}}const C8=()=>{const e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(a){return e[a]??null}const r={regex:"vnos",email:"e-potni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in as",date:"ISO datum",time:"ISO as",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 tevilka",jwt:"JWT",template_literal:"vnos"},u={nan:"NaN",number:"tevilo",array:"tabela"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Neveljaven vnos: priakovano instanceof ${a.expected}, prejeto ${c}`:`Neveljaven vnos: priakovano ${f}, prejeto ${c}`}case"invalid_value":return a.values.length===1?`Neveljaven vnos: priakovano ${jn(a.values[0])}`:`Neveljavna monost: priakovano eno izmed ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Preveliko: priakovano, da bo ${a.origin??"vrednost"} imelo ${f}${a.maximum.toString()} ${m.unit??"elementov"}`:`Preveliko: priakovano, da bo ${a.origin??"vrednost"} ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Premajhno: priakovano, da bo ${a.origin} imelo ${f}${a.minimum.toString()} ${m.unit}`:`Premajhno: priakovano, da bo ${a.origin} ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Neveljaven niz: mora se zaeti z "${f.prefix}"`:f.format==="ends_with"?`Neveljaven niz: mora se konati z "${f.suffix}"`:f.format==="includes"?`Neveljaven niz: mora vsebovati "${f.includes}"`:f.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${f.pattern}`:`Neveljaven ${r[f.format]??a.format}`}case"not_multiple_of":return`Neveljavno tevilo: mora biti vekratnik ${a.divisor}`;case"unrecognized_keys":return`Neprepoznan${a.keys.length>1?"i kljui":" klju"}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Neveljaven klju v ${a.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${a.origin}`;default:return"Neveljaven vnos"}}};function M8(){return{localeError:C8()}}const z8=()=>{const e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehlla"},set:{unit:"objekt",verb:"att innehlla"}};function t(a){return e[a]??null}const r={regex:"reguljrt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad strng",base64url:"base64url-kodad strng",json_string:"JSON-strng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},u={nan:"NaN",number:"antal",array:"lista"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Ogiltig inmatning: frvntat instanceof ${a.expected}, fick ${c}`:`Ogiltig inmatning: frvntat ${f}, fick ${c}`}case"invalid_value":return a.values.length===1?`Ogiltig inmatning: frvntat ${jn(a.values[0])}`:`Ogiltigt val: frvntade en av ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Fr stor(t): frvntade ${a.origin??"vrdet"} att ha ${f}${a.maximum.toString()} ${m.unit??"element"}`:`Fr stor(t): frvntat ${a.origin??"vrdet"} att ha ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Fr lite(t): frvntade ${a.origin??"vrdet"} att ha ${f}${a.minimum.toString()} ${m.unit}`:`Fr lite(t): frvntade ${a.origin??"vrdet"} att ha ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Ogiltig strng: mste brja med "${f.prefix}"`:f.format==="ends_with"?`Ogiltig strng: mste sluta med "${f.suffix}"`:f.format==="includes"?`Ogiltig strng: mste innehlla "${f.includes}"`:f.format==="regex"?`Ogiltig strng: mste matcha mnstret "${f.pattern}"`:`Ogiltig(t) ${r[f.format]??a.format}`}case"not_multiple_of":return`Ogiltigt tal: mste vara en multipel av ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"Oknda nycklar":"Oknd nyckel"}: ${Gt(a.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${a.origin??"vrdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt vrde i ${a.origin??"vrdet"}`;default:return"Ogiltig input"}}};function I8(){return{localeError:z8()}}const k8=()=>{const e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(a){return e[a]??null}const r={regex:"",email:" ",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO  ",date:"ISO ",time:"ISO ",duration:"ISO  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:"input"},u={nan:"NaN",number:"",array:"",null:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?` :  instanceof ${a.expected},  ${c}`:` :  ${f},  ${c}`}case"invalid_value":return a.values.length===1?` :  ${jn(a.values[0])}`:` :  ${Gt(a.values,"|")}  `;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?` :  ${a.origin??""} ${f}${a.maximum.toString()} ${m.unit??""}   `:` :  ${a.origin??""} ${f}${a.maximum.toString()}   `}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?` :  ${a.origin} ${f}${a.minimum.toString()} ${m.unit}   `:` :  ${a.origin} ${f}${a.minimum.toString()}   `}case"invalid_format":{const f=a;return f.format==="starts_with"?` : "${f.prefix}"   `:f.format==="ends_with"?` : "${f.suffix}"   `:f.format==="includes"?` : "${f.includes}"   `:f.format==="regex"?` : ${f.pattern}   `:` ${r[f.format]??a.format}`}case"not_multiple_of":return` : ${a.divisor}    `;case"unrecognized_keys":return`  ${a.keys.length>1?"":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`${a.origin}   `;case"invalid_union":return" ";case"invalid_element":return`${a.origin}   `;default:return" "}}};function P8(){return{localeError:k8()}}const D8=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(a){return e[a]??null}const r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:" ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IP  IPv4",cidrv6:" IP  IPv6",base64:" Base64",base64url:" Base64  URL",json_string:" JSON",e164:" (E.164)",jwt:" JWT",template_literal:""},u={nan:"NaN",number:"",array:" (Array)",null:" (null)"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`:  instanceof ${a.expected}  ${c}`:`:  ${f}  ${c}`}case"invalid_value":return a.values.length===1?`:  ${jn(a.values[0])}`:`:  ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"":"",m=t(a.origin);return m?`: ${a.origin??""} ${f} ${a.maximum.toString()} ${m.unit??""}`:`: ${a.origin??""} ${f} ${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?"":"",m=t(a.origin);return m?`: ${a.origin} ${f} ${a.minimum.toString()} ${m.unit}`:`: ${a.origin} ${f} ${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`:  "${f.prefix}"`:f.format==="ends_with"?`:  "${f.suffix}"`:f.format==="includes"?`:  "${f.includes}" `:f.format==="regex"?`:  ${f.pattern}`:`: ${r[f.format]??a.format}`}case"not_multiple_of":return`:  ${a.divisor} `;case"unrecognized_keys":return`: ${Gt(a.keys,", ")}`;case"invalid_key":return` ${a.origin}`;case"invalid_union":return": ";case"invalid_element":return` ${a.origin}`;default:return""}}};function L8(){return{localeError:D8()}}const R8=()=>{const e={string:{unit:"karakter",verb:"olmal"},file:{unit:"bayt",verb:"olmal"},array:{unit:"e",verb:"olmal"},set:{unit:"e",verb:"olmal"}};function t(a){return e[a]??null}const r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO sre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral",cidrv6:"IPv6 aral",base64:"base64 ile ifrelenmi metin",base64url:"base64url ile ifrelenmi metin",json_string:"JSON dizesi",e164:"E.164 says",jwt:"JWT",template_literal:"ablon dizesi"},u={nan:"NaN"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Geersiz deer: beklenen instanceof ${a.expected}, alnan ${c}`:`Geersiz deer: beklenen ${f}, alnan ${c}`}case"invalid_value":return a.values.length===1?`Geersiz deer: beklenen ${jn(a.values[0])}`:`Geersiz seenek: aadakilerden biri olmal: ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`ok byk: beklenen ${a.origin??"deer"} ${f}${a.maximum.toString()} ${m.unit??"e"}`:`ok byk: beklenen ${a.origin??"deer"} ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`ok kk: beklenen ${a.origin} ${f}${a.minimum.toString()} ${m.unit}`:`ok kk: beklenen ${a.origin} ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Geersiz metin: "${f.prefix}" ile balamal`:f.format==="ends_with"?`Geersiz metin: "${f.suffix}" ile bitmeli`:f.format==="includes"?`Geersiz metin: "${f.includes}" iermeli`:f.format==="regex"?`Geersiz metin: ${f.pattern} desenine uymal`:`Geersiz ${r[f.format]??a.format}`}case"not_multiple_of":return`Geersiz say: ${a.divisor} ile tam blnebilmeli`;case"unrecognized_keys":return`Tannmayan anahtar${a.keys.length>1?"lar":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`${a.origin} iinde geersiz anahtar`;case"invalid_union":return"Geersiz deer";case"invalid_element":return`${a.origin} iinde geersiz deer`;default:return"Geersiz deer"}}};function O8(){return{localeError:R8()}}const N8=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(a){return e[a]??null}const r={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "},u={nan:"NaN",number:"",array:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`  :  instanceof ${a.expected},  ${c}`:`  :  ${f},  ${c}`}case"invalid_value":return a.values.length===1?`  :  ${jn(a.values[0])}`:` :    ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?` : ,  ${a.origin??""} ${m.verb} ${f}${a.maximum.toString()} ${m.unit??""}`:` : ,  ${a.origin??""}  ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?` : ,  ${a.origin} ${m.verb} ${f}${a.minimum.toString()} ${m.unit}`:` : ,  ${a.origin}  ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?` :    "${f.prefix}"`:f.format==="ends_with"?` :    "${f.suffix}"`:f.format==="includes"?` :   "${f.includes}"`:f.format==="regex"?` :    ${f.pattern}`:` ${r[f.format]??a.format}`}case"not_multiple_of":return` :    ${a.divisor}`;case"unrecognized_keys":return` ${a.keys.length>1?"":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`   ${a.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${a.origin}`;default:return"  "}}};function sk(){return{localeError:N8()}}function $8(){return sk()}const j8=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(a){return e[a]??null}const r={regex:" ",email:"  ",url:"  ",emoji:"",uuid:"   ",uuidv4:"     4",uuidv6:"     6",nanoid:"  ",guid:"   ",cuid:"   ",cuid2:"    2",ulid:"   ",xid:"  ",ksuid:"    ",datetime:"    ",date:"   ",time:"   ",duration:"   ",ipv4:"   4 ",ipv6:"   6 ",cidrv4:"   4 ",cidrv6:"   6 ",base64:" 64   ",base64url:" 64      ",json_string:"    ",e164:" 164 ",jwt:"  ",template_literal:" "},u={nan:"NaN",number:"",array:"",null:""};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`  : instanceof ${a.expected}   ${c}  `:`  : ${f}   ${c}  `}case"invalid_value":return a.values.length===1?`  : ${jn(a.values[0])}  `:` : ${Gt(a.values,"|")}     `;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?` : ${a.origin??""}  ${f}${a.maximum.toString()} ${m.unit??""}   `:` : ${a.origin??""}  ${f}${a.maximum.toString()}   `}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?` : ${a.origin}  ${f}${a.minimum.toString()} ${m.unit}   `:` : ${a.origin}  ${f}${a.minimum.toString()}   `}case"invalid_format":{const f=a;return f.format==="starts_with"?` : "${f.prefix}"    `:f.format==="ends_with"?` : "${f.suffix}"    `:f.format==="includes"?` : "${f.includes}"   `:f.format==="regex"?` :  ${f.pattern}    `:` ${r[f.format]??a.format}`}case"not_multiple_of":return` : ${a.divisor}    `;case"unrecognized_keys":return`   ${a.keys.length>1?"":""}: ${Gt(a.keys," ")}`;case"invalid_key":return`${a.origin}   `;case"invalid_union":return"  ";case"invalid_element":return`${a.origin}   `;default:return"  "}}};function B8(){return{localeError:j8()}}const F8=()=>{const e={string:{unit:"belgi",verb:"bolishi kerak"},file:{unit:"bayt",verb:"bolishi kerak"},array:{unit:"element",verb:"bolishi kerak"},set:{unit:"element",verb:"bolishi kerak"}};function t(a){return e[a]??null}const r={regex:"kirish",email:"elektron pochta manzili",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO sana va vaqti",date:"ISO sana",time:"ISO vaqt",duration:"ISO davomiylik",ipv4:"IPv4 manzil",ipv6:"IPv6 manzil",mac:"MAC manzil",cidrv4:"IPv4 diapazon",cidrv6:"IPv6 diapazon",base64:"base64 kodlangan satr",base64url:"base64url kodlangan satr",json_string:"JSON satr",e164:"E.164 raqam",jwt:"JWT",template_literal:"kirish"},u={nan:"NaN",number:"raqam",array:"massiv"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`Notogri kirish: kutilgan instanceof ${a.expected}, qabul qilingan ${c}`:`Notogri kirish: kutilgan ${f}, qabul qilingan ${c}`}case"invalid_value":return a.values.length===1?`Notogri kirish: kutilgan ${jn(a.values[0])}`:`Notogri variant: quyidagilardan biri kutilgan ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Juda katta: kutilgan ${a.origin??"qiymat"} ${f}${a.maximum.toString()} ${m.unit} ${m.verb}`:`Juda katta: kutilgan ${a.origin??"qiymat"} ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Juda kichik: kutilgan ${a.origin} ${f}${a.minimum.toString()} ${m.unit} ${m.verb}`:`Juda kichik: kutilgan ${a.origin} ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Notogri satr: "${f.prefix}" bilan boshlanishi kerak`:f.format==="ends_with"?`Notogri satr: "${f.suffix}" bilan tugashi kerak`:f.format==="includes"?`Notogri satr: "${f.includes}" ni oz ichiga olishi kerak`:f.format==="regex"?`Notogri satr: ${f.pattern} shabloniga mos kelishi kerak`:`Notogri ${r[f.format]??a.format}`}case"not_multiple_of":return`Notogri raqam: ${a.divisor} ning karralisi bolishi kerak`;case"unrecognized_keys":return`Nomalum kalit${a.keys.length>1?"lar":""}: ${Gt(a.keys,", ")}`;case"invalid_key":return`${a.origin} dagi kalit notogri`;case"invalid_union":return"Notogri kirish";case"invalid_element":return`${a.origin} da notogri qiymat`;default:return"Notogri kirish"}}};function U8(){return{localeError:F8()}}const V8=()=>{const e={string:{unit:"k t",verb:"c"},file:{unit:"byte",verb:"c"},array:{unit:"phn t",verb:"c"},set:{unit:"phn t",verb:"c"}};function t(a){return e[a]??null}const r={regex:"u vo",email:"a ch email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngy gi ISO",date:"ngy ISO",time:"gi ISO",duration:"khong thi gian ISO",ipv4:"a ch IPv4",ipv6:"a ch IPv6",cidrv4:"di IPv4",cidrv6:"di IPv6",base64:"chui m ha base64",base64url:"chui m ha base64url",json_string:"chui JSON",e164:"s E.164",jwt:"JWT",template_literal:"u vo"},u={nan:"NaN",number:"s",array:"mng"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`u vo khng hp l: mong i instanceof ${a.expected}, nhn c ${c}`:`u vo khng hp l: mong i ${f}, nhn c ${c}`}case"invalid_value":return a.values.length===1?`u vo khng hp l: mong i ${jn(a.values[0])}`:`Ty chn khng hp l: mong i mt trong cc gi tr ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`Qu ln: mong i ${a.origin??"gi tr"} ${m.verb} ${f}${a.maximum.toString()} ${m.unit??"phn t"}`:`Qu ln: mong i ${a.origin??"gi tr"} ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Qu nh: mong i ${a.origin} ${m.verb} ${f}${a.minimum.toString()} ${m.unit}`:`Qu nh: mong i ${a.origin} ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`Chui khng hp l: phi bt u bng "${f.prefix}"`:f.format==="ends_with"?`Chui khng hp l: phi kt thc bng "${f.suffix}"`:f.format==="includes"?`Chui khng hp l: phi bao gm "${f.includes}"`:f.format==="regex"?`Chui khng hp l: phi khp vi mu ${f.pattern}`:`${r[f.format]??a.format} khng hp l`}case"not_multiple_of":return`S khng hp l: phi l bi s ca ${a.divisor}`;case"unrecognized_keys":return`Kha khng c nhn dng: ${Gt(a.keys,", ")}`;case"invalid_key":return`Kha khng hp l trong ${a.origin}`;case"invalid_union":return"u vo khng hp l";case"invalid_element":return`Gi tr khng hp l trong ${a.origin}`;default:return"u vo khng hp l"}}};function Z8(){return{localeError:V8()}}const q8=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(a){return e[a]??null}const r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},u={nan:"NaN",number:"",array:"",null:"(null)"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?` instanceof ${a.expected} ${c}`:` ${f} ${c}`}case"invalid_value":return a.values.length===1?` ${jn(a.values[0])}`:` ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?` ${a.origin??""} ${f}${a.maximum.toString()} ${m.unit??""}`:` ${a.origin??""} ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?` ${a.origin} ${f}${a.minimum.toString()} ${m.unit}`:` ${a.origin} ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?` "${f.prefix}" `:f.format==="ends_with"?` "${f.suffix}" `:f.format==="includes"?` "${f.includes}"`:f.format==="regex"?` ${f.pattern}`:`${r[f.format]??a.format}`}case"not_multiple_of":return` ${a.divisor} `;case"unrecognized_keys":return`(key): ${Gt(a.keys,", ")}`;case"invalid_key":return`${a.origin} (key)`;case"invalid_union":return"";case"invalid_element":return`${a.origin} (value)`;default:return""}}};function G8(){return{localeError:q8()}}const H8=()=>{const e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(a){return e[a]??null}const r={regex:"",email:"",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64 ",base64url:"base64url ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},u={nan:"NaN"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?` instanceof ${a.expected} ${c}`:` ${f} ${c}`}case"invalid_value":return a.values.length===1?` ${jn(a.values[0])}`:` ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?` ${a.origin??""}  ${f}${a.maximum.toString()} ${m.unit??""}`:` ${a.origin??""}  ${f}${a.maximum.toString()}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?` ${a.origin}  ${f}${a.minimum.toString()} ${m.unit}`:` ${a.origin}  ${f}${a.minimum.toString()}`}case"invalid_format":{const f=a;return f.format==="starts_with"?` "${f.prefix}" `:f.format==="ends_with"?` "${f.suffix}" `:f.format==="includes"?` "${f.includes}"`:f.format==="regex"?` ${f.pattern}`:` ${r[f.format]??a.format}`}case"not_multiple_of":return` ${a.divisor} `;case"unrecognized_keys":return`${a.keys.length>1?"":""}${Gt(a.keys,"")}`;case"invalid_key":return`${a.origin} `;case"invalid_union":return"";case"invalid_element":return`${a.origin} `;default:return""}}};function W8(){return{localeError:H8()}}const X8=()=>{const e={string:{unit:"mi",verb:"n"},file:{unit:"bytes",verb:"n"},array:{unit:"nkan",verb:"n"},set:{unit:"nkan",verb:"n"}};function t(a){return e[a]??null}const r={regex:"r bwl",email:"drs ml",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"kk ISO",date:"j ISO",time:"kk ISO",duration:"kk t p ISO",ipv4:"drs IPv4",ipv6:"drs IPv6",cidrv4:"gbgb IPv4",cidrv6:"gbgb IPv6",base64:"r t a k n base64",base64url:"r base64url",json_string:"r JSON",e164:"nmb E.164",jwt:"JWT",template_literal:"r bwl"},u={nan:"NaN",number:"nmb",array:"akop"};return a=>{switch(a.code){case"invalid_type":{const f=u[a.expected]??a.expected,m=Fn(a.input),c=u[m]??m;return/^[A-Z]/.test(a.expected)?`bwl ae: a n lti fi instanceof ${a.expected}, m a r ${c}`:`bwl ae: a n lti fi ${f}, m a r ${c}`}case"invalid_value":return a.values.length===1?`bwl ae: a n lti fi ${jn(a.values[0])}`:`yn ae: yan kan lra ${Gt(a.values,"|")}`;case"too_big":{const f=a.inclusive?"<=":"<",m=t(a.origin);return m?`T p j: a n lti j p ${a.origin??"iye"} ${m.verb} ${f}${a.maximum} ${m.unit}`:`T p j: a n lti j ${f}${a.maximum}`}case"too_small":{const f=a.inclusive?">=":">",m=t(a.origin);return m?`Kr ju: a n lti j p ${a.origin} ${m.verb} ${f}${a.minimum} ${m.unit}`:`Kr ju: a n lti j ${f}${a.minimum}`}case"invalid_format":{const f=a;return f.format==="starts_with"?`r ae: gbd br pl "${f.prefix}"`:f.format==="ends_with"?`r ae: gbd par pl "${f.suffix}"`:f.format==="includes"?`r ae: gbd n "${f.includes}"`:f.format==="regex"?`r ae: gbd b pr mu ${f.pattern}`:`Ae: ${r[f.format]??a.format}`}case"not_multiple_of":return`Nmb ae: gbd j y ppn ti ${a.divisor}`;case"unrecognized_keys":return`Btn m: ${Gt(a.keys,", ")}`;case"invalid_key":return`Btn ae nn ${a.origin}`;case"invalid_union":return"bwl ae";case"invalid_element":return`Iye ae nn ${a.origin}`;default:return"bwl ae"}}};function Y8(){return{localeError:X8()}}const lk=Object.freeze(Object.defineProperty({__proto__:null,ar:f6,az:m6,be:y6,bg:v6,ca:x6,cs:S6,da:E6,de:C6,en:ak,eo:I6,es:P6,fa:L6,fi:O6,fr:$6,frCA:B6,he:U6,hu:Z6,hy:G6,id:W6,is:Y6,it:J6,ja:e8,ka:n8,kh:r8,km:ok,ko:o8,lt:l8,mk:u8,ms:d8,nl:p8,no:g8,ota:_8,pl:w8,ps:b8,pt:T8,ru:A8,sl:M8,sv:I8,ta:P8,th:L8,tr:O8,ua:$8,uk:sk,ur:B8,uz:U8,vi:Z8,yo:Y8,zhCN:G8,zhTW:W8},Symbol.toStringTag,{value:"Module"}));var fA;const ck=Symbol("ZodOutput"),uk=Symbol("ZodInput");class hk{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const u=r[0];return this._map.set(t,u),u&&typeof u=="object"&&"id"in u&&this._idmap.set(u.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const u={...this.get(r)??{}};delete u.id;const a={...u,...this._map.get(t)};return Object.keys(a).length?a:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function J2(){return new hk}(fA=globalThis).__zod_globalRegistry??(fA.__zod_globalRegistry=J2());const _u=globalThis.__zod_globalRegistry;function dk(e,t){return new e({type:"string",...kt(t)})}function fk(e,t){return new e({type:"string",coerce:!0,...kt(t)})}function Q2(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...kt(t)})}function Rb(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...kt(t)})}function eS(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...kt(t)})}function tS(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...kt(t)})}function nS(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...kt(t)})}function iS(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...kt(t)})}function lx(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...kt(t)})}function rS(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...kt(t)})}function aS(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...kt(t)})}function oS(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...kt(t)})}function sS(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...kt(t)})}function lS(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...kt(t)})}function cS(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...kt(t)})}function uS(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...kt(t)})}function hS(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...kt(t)})}function dS(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...kt(t)})}function pk(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...kt(t)})}function fS(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...kt(t)})}function pS(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...kt(t)})}function mS(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...kt(t)})}function gS(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...kt(t)})}function yS(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...kt(t)})}function _S(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...kt(t)})}const mk={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function gk(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...kt(t)})}function yk(e,t){return new e({type:"string",format:"date",check:"string_format",...kt(t)})}function _k(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...kt(t)})}function vk(e,t){return new e({type:"string",format:"duration",check:"string_format",...kt(t)})}function bk(e,t){return new e({type:"number",checks:[],...kt(t)})}function xk(e,t){return new e({type:"number",coerce:!0,checks:[],...kt(t)})}function wk(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...kt(t)})}function Sk(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...kt(t)})}function Tk(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...kt(t)})}function Ek(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...kt(t)})}function Ak(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...kt(t)})}function Ck(e,t){return new e({type:"boolean",...kt(t)})}function Mk(e,t){return new e({type:"boolean",coerce:!0,...kt(t)})}function zk(e,t){return new e({type:"bigint",...kt(t)})}function Ik(e,t){return new e({type:"bigint",coerce:!0,...kt(t)})}function kk(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...kt(t)})}function Pk(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...kt(t)})}function Dk(e,t){return new e({type:"symbol",...kt(t)})}function Lk(e,t){return new e({type:"undefined",...kt(t)})}function Rk(e,t){return new e({type:"null",...kt(t)})}function Ok(e){return new e({type:"any"})}function Nk(e){return new e({type:"unknown"})}function $k(e,t){return new e({type:"never",...kt(t)})}function jk(e,t){return new e({type:"void",...kt(t)})}function Bk(e,t){return new e({type:"date",...kt(t)})}function Fk(e,t){return new e({type:"date",coerce:!0,...kt(t)})}function Uk(e,t){return new e({type:"nan",...kt(t)})}function rp(e,t){return new V2({check:"less_than",...kt(t),value:e,inclusive:!1})}function vu(e,t){return new V2({check:"less_than",...kt(t),value:e,inclusive:!0})}function ap(e,t){return new Z2({check:"greater_than",...kt(t),value:e,inclusive:!1})}function Yl(e,t){return new Z2({check:"greater_than",...kt(t),value:e,inclusive:!0})}function vS(e){return ap(0,e)}function bS(e){return rp(0,e)}function xS(e){return vu(0,e)}function wS(e){return Yl(0,e)}function uy(e,t){return new Az({check:"multiple_of",...kt(t),value:e})}function by(e,t){return new zz({check:"max_size",...kt(t),maximum:e})}function op(e,t){return new Iz({check:"min_size",...kt(t),minimum:e})}function Mv(e,t){return new kz({check:"size_equals",...kt(t),size:e})}function zv(e,t){return new Pz({check:"max_length",...kt(t),maximum:e})}function Pm(e,t){return new Dz({check:"min_length",...kt(t),minimum:e})}function Iv(e,t){return new Lz({check:"length_equals",...kt(t),length:e})}function cx(e,t){return new Rz({check:"string_format",format:"regex",...kt(t),pattern:e})}function ux(e){return new Oz({check:"string_format",format:"lowercase",...kt(e)})}function hx(e){return new Nz({check:"string_format",format:"uppercase",...kt(e)})}function dx(e,t){return new $z({check:"string_format",format:"includes",...kt(t),includes:e})}function fx(e,t){return new jz({check:"string_format",format:"starts_with",...kt(t),prefix:e})}function px(e,t){return new Bz({check:"string_format",format:"ends_with",...kt(t),suffix:e})}function SS(e,t,r){return new Fz({check:"property",property:e,schema:t,...kt(r)})}function mx(e,t){return new Uz({check:"mime_type",mime:e,...kt(t)})}function of(e){return new Vz({check:"overwrite",tx:e})}function gx(e){return of(t=>t.normalize(e))}function yx(){return of(e=>e.trim())}function _x(){return of(e=>e.toLowerCase())}function vx(){return of(e=>e.toUpperCase())}function bx(){return of(e=>SM(e))}function Vk(e,t,r){return new e({type:"array",element:t,...kt(r)})}function K8(e,t,r){return new e({type:"union",options:t,...kt(r)})}function J8(e,t,r){return new e({type:"union",options:t,inclusive:!1,...kt(r)})}function Q8(e,t,r,u){return new e({type:"union",options:r,discriminator:t,...kt(u)})}function eN(e,t,r){return new e({type:"intersection",left:t,right:r})}function tN(e,t,r,u){const a=r instanceof ei,f=a?u:r,m=a?r:null;return new e({type:"tuple",items:t,rest:m,...kt(f)})}function nN(e,t,r,u){return new e({type:"record",keyType:t,valueType:r,...kt(u)})}function iN(e,t,r,u){return new e({type:"map",keyType:t,valueType:r,...kt(u)})}function rN(e,t,r){return new e({type:"set",valueType:t,...kt(r)})}function aN(e,t,r){const u=Array.isArray(t)?Object.fromEntries(t.map(a=>[a,a])):t;return new e({type:"enum",entries:u,...kt(r)})}function oN(e,t,r){return new e({type:"enum",entries:t,...kt(r)})}function sN(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...kt(r)})}function Zk(e,t){return new e({type:"file",...kt(t)})}function lN(e,t){return new e({type:"transform",transform:t})}function cN(e,t){return new e({type:"optional",innerType:t})}function uN(e,t){return new e({type:"nullable",innerType:t})}function hN(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return typeof r=="function"?r():rx(r)}})}function dN(e,t,r){return new e({type:"nonoptional",innerType:t,...kt(r)})}function fN(e,t){return new e({type:"success",innerType:t})}function pN(e,t,r){return new e({type:"catch",innerType:t,catchValue:typeof r=="function"?r:()=>r})}function mN(e,t,r){return new e({type:"pipe",in:t,out:r})}function gN(e,t){return new e({type:"readonly",innerType:t})}function yN(e,t,r){return new e({type:"template_literal",parts:t,...kt(r)})}function _N(e,t){return new e({type:"lazy",getter:t})}function vN(e,t){return new e({type:"promise",innerType:t})}function qk(e,t,r){const u=kt(r);return u.abort??(u.abort=!0),new e({type:"custom",check:"custom",fn:t,...u})}function Gk(e,t,r){return new e({type:"custom",check:"custom",fn:t,...kt(r)})}function Hk(e){const t=Wk(r=>(r.addIssue=u=>{if(typeof u=="string")r.issues.push(ly(u,r.value,t._zod.def));else{const a=u;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(ly(a))}},e(r.value,r)));return t}function Wk(e,t){const r=new ha({check:"custom",...kt(t)});return r._zod.check=e,r}function Xk(e){const t=new ha({check:"describe"});return t._zod.onattach=[r=>{const u=_u.get(r)??{};_u.add(r,{...u,description:e})}],t._zod.check=()=>{},t}function Yk(e){const t=new ha({check:"meta"});return t._zod.onattach=[r=>{const u=_u.get(r)??{};_u.add(r,{...u,...e})}],t._zod.check=()=>{},t}function Kk(e,t){const r=kt(t);let u=r.truthy??["true","1","yes","on","y","enabled"],a=r.falsy??["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(u=u.map(J=>typeof J=="string"?J.toLowerCase():J),a=a.map(J=>typeof J=="string"?J.toLowerCase():J));const f=new Set(u),m=new Set(a),c=e.Codec??K2,z=e.Boolean??H2,k=e.String??Cv,B=new k({type:"string",error:r.error}),Z=new z({type:"boolean",error:r.error}),X=new c({type:"pipe",in:B,out:Z,transform:((J,ce)=>{let ee=J;return r.case!=="sensitive"&&(ee=ee.toLowerCase()),f.has(ee)?!0:m.has(ee)?!1:(ce.issues.push({code:"invalid_value",expected:"stringbool",values:[...f,...m],input:ce.value,inst:X,continue:!1}),{})}),reverseTransform:((J,ce)=>J===!0?u[0]||"true":a[0]||"false"),error:r.error});return X}function kv(e,t,r,u={}){const a=kt(u),f={...kt(u),check:"string_format",type:"string",format:t,fn:typeof r=="function"?r:c=>r.test(c),...a};return r instanceof RegExp&&(f.pattern=r),new e(f)}function hy(e){let t=e?.target??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??_u,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function Er(e,t,r={path:[],schemaPath:[]}){var u;const a=e._zod.def,f=t.seen.get(e);if(f)return f.count++,r.schemaPath.includes(e)&&(f.cycle=r.path),f.schema;const m={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,m);const c=e._zod.toJSONSchema?.();if(c)m.schema=c;else{const B={...r,schemaPath:[...r.schemaPath,e],path:r.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,m.schema,B);else{const X=m.schema,J=t.processors[a.type];if(!J)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${a.type}`);J(e,t,X,B)}const Z=e._zod.parent;Z&&(m.ref||(m.ref=Z),Er(Z,t,B),t.seen.get(Z).isParent=!0)}const z=t.metadataRegistry.get(e);return z&&Object.assign(m.schema,z),t.io==="input"&&ml(e)&&(delete m.schema.examples,delete m.schema.default),t.io==="input"&&m.schema._prefault&&((u=m.schema).default??(u.default=m.schema._prefault)),delete m.schema._prefault,t.seen.get(e).schema}function dy(e,t){const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const u=new Map;for(const m of e.seen.entries()){const c=e.metadataRegistry.get(m[0])?.id;if(c){const z=u.get(c);if(z&&z!==m[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);u.set(c,m[0])}}const a=m=>{const c=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const Z=e.external.registry.get(m[0])?.id,X=e.external.uri??(ce=>ce);if(Z)return{ref:X(Z)};const J=m[1].defId??m[1].schema.id??`schema${e.counter++}`;return m[1].defId=J,{defId:J,ref:`${X("__shared")}#/${c}/${J}`}}if(m[1]===r)return{ref:"#"};const k=`#/${c}/`,B=m[1].schema.id??`__schema${e.counter++}`;return{defId:B,ref:k+B}},f=m=>{if(m[1].schema.$ref)return;const c=m[1],{ref:z,defId:k}=a(m);c.def={...c.schema},k&&(c.defId=k);const B=c.schema;for(const Z in B)delete B[Z];B.$ref=z};if(e.cycles==="throw")for(const m of e.seen.entries()){const c=m[1];if(c.cycle)throw new Error(`Cycle detected: #/${c.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const m of e.seen.entries()){const c=m[1];if(t===m[0]){f(m);continue}if(e.external){const k=e.external.registry.get(m[0])?.id;if(t!==m[0]&&k){f(m);continue}}if(e.metadataRegistry.get(m[0])?.id){f(m);continue}if(c.cycle){f(m);continue}if(c.count>1&&e.reused==="ref"){f(m);continue}}}function fy(e,t){const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const u=m=>{const c=e.seen.get(m);if(c.ref===null)return;const z=c.def??c.schema,k={...z},B=c.ref;if(c.ref=null,B){u(B);const X=e.seen.get(B),J=X.schema;if(J.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(z.allOf=z.allOf??[],z.allOf.push(J)):Object.assign(z,J),Object.assign(z,k),m._zod.parent===B)for(const ee in z)ee==="$ref"||ee==="allOf"||ee in k||delete z[ee];if(J.$ref&&X.def)for(const ee in z)ee==="$ref"||ee==="allOf"||ee in X.def&&JSON.stringify(z[ee])===JSON.stringify(X.def[ee])&&delete z[ee]}const Z=m._zod.parent;if(Z&&Z!==B){u(Z);const X=e.seen.get(Z);if(X?.schema.$ref&&(z.$ref=X.schema.$ref,X.def))for(const J in z)J==="$ref"||J==="allOf"||J in X.def&&JSON.stringify(z[J])===JSON.stringify(X.def[J])&&delete z[J]}e.override({zodSchema:m,jsonSchema:z,path:c.path??[]})};for(const m of[...e.seen.entries()].reverse())u(m[0]);const a={};if(e.target==="draft-2020-12"?a.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?a.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?a.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const m=e.external.registry.get(t)?.id;if(!m)throw new Error("Schema is missing an `id` property");a.$id=e.external.uri(m)}Object.assign(a,r.def??r.schema);const f=e.external?.defs??{};for(const m of e.seen.entries()){const c=m[1];c.def&&c.defId&&(f[c.defId]=c.def)}e.external||Object.keys(f).length>0&&(e.target==="draft-2020-12"?a.$defs=f:a.definitions=f);try{const m=JSON.parse(JSON.stringify(a));return Object.defineProperty(m,"~standard",{value:{...t["~standard"],jsonSchema:{input:J_(t,"input",e.processors),output:J_(t,"output",e.processors)}},enumerable:!1,writable:!1}),m}catch{throw new Error("Error converting schema to JSON.")}}function ml(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const u=e._zod.def;if(u.type==="transform")return!0;if(u.type==="array")return ml(u.element,r);if(u.type==="set")return ml(u.valueType,r);if(u.type==="lazy")return ml(u.getter(),r);if(u.type==="promise"||u.type==="optional"||u.type==="nonoptional"||u.type==="nullable"||u.type==="readonly"||u.type==="default"||u.type==="prefault")return ml(u.innerType,r);if(u.type==="intersection")return ml(u.left,r)||ml(u.right,r);if(u.type==="record"||u.type==="map")return ml(u.keyType,r)||ml(u.valueType,r);if(u.type==="pipe")return ml(u.in,r)||ml(u.out,r);if(u.type==="object"){for(const a in u.shape)if(ml(u.shape[a],r))return!0;return!1}if(u.type==="union"){for(const a of u.options)if(ml(a,r))return!0;return!1}if(u.type==="tuple"){for(const a of u.items)if(ml(a,r))return!0;return!!(u.rest&&ml(u.rest,r))}return!1}const Jk=(e,t={})=>r=>{const u=hy({...r,processors:t});return Er(e,u),dy(u,e),fy(u,e)},J_=(e,t,r={})=>u=>{const{libraryOptions:a,target:f}=u??{},m=hy({...a??{},target:f,io:t,processors:r});return Er(e,m),dy(m,e),fy(m,e)},bN={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Qk=(e,t,r,u)=>{const a=r;a.type="string";const{minimum:f,maximum:m,format:c,patterns:z,contentEncoding:k}=e._zod.bag;if(typeof f=="number"&&(a.minLength=f),typeof m=="number"&&(a.maxLength=m),c&&(a.format=bN[c]??c,a.format===""&&delete a.format,c==="time"&&delete a.format),k&&(a.contentEncoding=k),z&&z.size>0){const B=[...z];B.length===1?a.pattern=B[0].source:B.length>1&&(a.allOf=[...B.map(Z=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:Z.source}))])}},eP=(e,t,r,u)=>{const a=r,{minimum:f,maximum:m,format:c,multipleOf:z,exclusiveMaximum:k,exclusiveMinimum:B}=e._zod.bag;typeof c=="string"&&c.includes("int")?a.type="integer":a.type="number",typeof B=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(a.minimum=B,a.exclusiveMinimum=!0):a.exclusiveMinimum=B),typeof f=="number"&&(a.minimum=f,typeof B=="number"&&t.target!=="draft-04"&&(B>=f?delete a.minimum:delete a.exclusiveMinimum)),typeof k=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(a.maximum=k,a.exclusiveMaximum=!0):a.exclusiveMaximum=k),typeof m=="number"&&(a.maximum=m,typeof k=="number"&&t.target!=="draft-04"&&(k<=m?delete a.maximum:delete a.exclusiveMaximum)),typeof z=="number"&&(a.multipleOf=z)},tP=(e,t,r,u)=>{r.type="boolean"},nP=(e,t,r,u)=>{if(t.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},iP=(e,t,r,u)=>{if(t.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},rP=(e,t,r,u)=>{t.target==="openapi-3.0"?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},aP=(e,t,r,u)=>{if(t.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},oP=(e,t,r,u)=>{if(t.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},sP=(e,t,r,u)=>{r.not={}},lP=(e,t,r,u)=>{},cP=(e,t,r,u)=>{},uP=(e,t,r,u)=>{if(t.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},hP=(e,t,r,u)=>{const a=e._zod.def,f=C2(a.entries);f.every(m=>typeof m=="number")&&(r.type="number"),f.every(m=>typeof m=="string")&&(r.type="string"),r.enum=f},dP=(e,t,r,u)=>{const a=e._zod.def,f=[];for(const m of a.values)if(m===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof m=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");f.push(Number(m))}else f.push(m);if(f.length!==0)if(f.length===1){const m=f[0];r.type=m===null?"null":typeof m,t.target==="draft-04"||t.target==="openapi-3.0"?r.enum=[m]:r.const=m}else f.every(m=>typeof m=="number")&&(r.type="number"),f.every(m=>typeof m=="string")&&(r.type="string"),f.every(m=>typeof m=="boolean")&&(r.type="boolean"),f.every(m=>m===null)&&(r.type="null"),r.enum=f},fP=(e,t,r,u)=>{if(t.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},pP=(e,t,r,u)=>{const a=r,f=e._zod.pattern;if(!f)throw new Error("Pattern not found in template literal");a.type="string",a.pattern=f.source},mP=(e,t,r,u)=>{const a=r,f={type:"string",format:"binary",contentEncoding:"binary"},{minimum:m,maximum:c,mime:z}=e._zod.bag;m!==void 0&&(f.minLength=m),c!==void 0&&(f.maxLength=c),z?z.length===1?(f.contentMediaType=z[0],Object.assign(a,f)):(Object.assign(a,f),a.anyOf=z.map(k=>({contentMediaType:k}))):Object.assign(a,f)},gP=(e,t,r,u)=>{r.type="boolean"},yP=(e,t,r,u)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},_P=(e,t,r,u)=>{if(t.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},vP=(e,t,r,u)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},bP=(e,t,r,u)=>{if(t.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},xP=(e,t,r,u)=>{if(t.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},wP=(e,t,r,u)=>{const a=r,f=e._zod.def,{minimum:m,maximum:c}=e._zod.bag;typeof m=="number"&&(a.minItems=m),typeof c=="number"&&(a.maxItems=c),a.type="array",a.items=Er(f.element,t,{...u,path:[...u.path,"items"]})},SP=(e,t,r,u)=>{const a=r,f=e._zod.def;a.type="object",a.properties={};const m=f.shape;for(const k in m)a.properties[k]=Er(m[k],t,{...u,path:[...u.path,"properties",k]});const c=new Set(Object.keys(m)),z=new Set([...c].filter(k=>{const B=f.shape[k]._zod;return t.io==="input"?B.optin===void 0:B.optout===void 0}));z.size>0&&(a.required=Array.from(z)),f.catchall?._zod.def.type==="never"?a.additionalProperties=!1:f.catchall?f.catchall&&(a.additionalProperties=Er(f.catchall,t,{...u,path:[...u.path,"additionalProperties"]})):t.io==="output"&&(a.additionalProperties=!1)},TS=(e,t,r,u)=>{const a=e._zod.def,f=a.inclusive===!1,m=a.options.map((c,z)=>Er(c,t,{...u,path:[...u.path,f?"oneOf":"anyOf",z]}));f?r.oneOf=m:r.anyOf=m},TP=(e,t,r,u)=>{const a=e._zod.def,f=Er(a.left,t,{...u,path:[...u.path,"allOf",0]}),m=Er(a.right,t,{...u,path:[...u.path,"allOf",1]}),c=k=>"allOf"in k&&Object.keys(k).length===1,z=[...c(f)?f.allOf:[f],...c(m)?m.allOf:[m]];r.allOf=z},EP=(e,t,r,u)=>{const a=r,f=e._zod.def;a.type="array";const m=t.target==="draft-2020-12"?"prefixItems":"items",c=t.target==="draft-2020-12"||t.target==="openapi-3.0"?"items":"additionalItems",z=f.items.map((X,J)=>Er(X,t,{...u,path:[...u.path,m,J]})),k=f.rest?Er(f.rest,t,{...u,path:[...u.path,c,...t.target==="openapi-3.0"?[f.items.length]:[]]}):null;t.target==="draft-2020-12"?(a.prefixItems=z,k&&(a.items=k)):t.target==="openapi-3.0"?(a.items={anyOf:z},k&&a.items.anyOf.push(k),a.minItems=z.length,k||(a.maxItems=z.length)):(a.items=z,k&&(a.additionalItems=k));const{minimum:B,maximum:Z}=e._zod.bag;typeof B=="number"&&(a.minItems=B),typeof Z=="number"&&(a.maxItems=Z)},AP=(e,t,r,u)=>{const a=r,f=e._zod.def;a.type="object";const m=f.keyType,z=m._zod.bag?.patterns;if(f.mode==="loose"&&z&&z.size>0){const B=Er(f.valueType,t,{...u,path:[...u.path,"patternProperties","*"]});a.patternProperties={};for(const Z of z)a.patternProperties[Z.source]=B}else(t.target==="draft-07"||t.target==="draft-2020-12")&&(a.propertyNames=Er(f.keyType,t,{...u,path:[...u.path,"propertyNames"]})),a.additionalProperties=Er(f.valueType,t,{...u,path:[...u.path,"additionalProperties"]});const k=m._zod.values;if(k){const B=[...k].filter(Z=>typeof Z=="string"||typeof Z=="number");B.length>0&&(a.required=B)}},CP=(e,t,r,u)=>{const a=e._zod.def,f=Er(a.innerType,t,u),m=t.seen.get(e);t.target==="openapi-3.0"?(m.ref=a.innerType,r.nullable=!0):r.anyOf=[f,{type:"null"}]},MP=(e,t,r,u)=>{const a=e._zod.def;Er(a.innerType,t,u);const f=t.seen.get(e);f.ref=a.innerType},zP=(e,t,r,u)=>{const a=e._zod.def;Er(a.innerType,t,u);const f=t.seen.get(e);f.ref=a.innerType,r.default=JSON.parse(JSON.stringify(a.defaultValue))},IP=(e,t,r,u)=>{const a=e._zod.def;Er(a.innerType,t,u);const f=t.seen.get(e);f.ref=a.innerType,t.io==="input"&&(r._prefault=JSON.parse(JSON.stringify(a.defaultValue)))},kP=(e,t,r,u)=>{const a=e._zod.def;Er(a.innerType,t,u);const f=t.seen.get(e);f.ref=a.innerType;let m;try{m=a.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=m},PP=(e,t,r,u)=>{const a=e._zod.def,f=t.io==="input"?a.in._zod.def.type==="transform"?a.out:a.in:a.out;Er(f,t,u);const m=t.seen.get(e);m.ref=f},DP=(e,t,r,u)=>{const a=e._zod.def;Er(a.innerType,t,u);const f=t.seen.get(e);f.ref=a.innerType,r.readOnly=!0},LP=(e,t,r,u)=>{const a=e._zod.def;Er(a.innerType,t,u);const f=t.seen.get(e);f.ref=a.innerType},ES=(e,t,r,u)=>{const a=e._zod.def;Er(a.innerType,t,u);const f=t.seen.get(e);f.ref=a.innerType},RP=(e,t,r,u)=>{const a=e._zod.innerType;Er(a,t,u);const f=t.seen.get(e);f.ref=a},Lw={string:Qk,number:eP,boolean:tP,bigint:nP,symbol:iP,null:rP,undefined:aP,void:oP,never:sP,any:lP,unknown:cP,date:uP,enum:hP,literal:dP,nan:fP,template_literal:pP,file:mP,success:gP,custom:yP,function:_P,transform:vP,map:bP,set:xP,array:wP,object:SP,union:TS,intersection:TP,tuple:EP,record:AP,nullable:CP,nonoptional:MP,default:zP,prefault:IP,catch:kP,pipe:PP,readonly:DP,promise:LP,optional:ES,lazy:RP};function OP(e,t){if("_idmap"in e){const u=e,a=hy({...t,processors:Lw}),f={};for(const z of u._idmap.entries()){const[k,B]=z;Er(B,a)}const m={},c={registry:u,uri:t?.uri,defs:f};a.external=c;for(const z of u._idmap.entries()){const[k,B]=z;dy(a,B),m[k]=fy(a,B)}if(Object.keys(f).length>0){const z=a.target==="draft-2020-12"?"$defs":"definitions";m.__shared={[z]:f}}return{schemas:m}}const r=hy({...t,processors:Lw});return Er(e,r),dy(r,e),fy(r,e)}class xN{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(t){this.ctx.counter=t}get seen(){return this.ctx.seen}constructor(t){let r=t?.target??"draft-2020-12";r==="draft-4"&&(r="draft-04"),r==="draft-7"&&(r="draft-07"),this.ctx=hy({processors:Lw,target:r,...t?.metadata&&{metadata:t.metadata},...t?.unrepresentable&&{unrepresentable:t.unrepresentable},...t?.override&&{override:t.override},...t?.io&&{io:t.io}})}process(t,r={path:[],schemaPath:[]}){return Er(t,this.ctx,r)}emit(t,r){r&&(r.cycles&&(this.ctx.cycles=r.cycles),r.reused&&(this.ctx.reused=r.reused),r.external&&(this.ctx.external=r.external)),dy(this.ctx,t);const u=fy(this.ctx,t),{"~standard":a,...f}=u;return f}}const wN=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),SN=Object.freeze(Object.defineProperty({__proto__:null,$ZodAny:TI,$ZodArray:zI,$ZodAsyncError:Sm,$ZodBase64:dI,$ZodBase64URL:pI,$ZodBigInt:W2,$ZodBigIntFormat:bI,$ZodBoolean:H2,$ZodCIDRv4:uI,$ZodCIDRv6:hI,$ZodCUID:Jz,$ZodCUID2:Qz,$ZodCatch:YI,$ZodCheck:ha,$ZodCheckBigIntFormat:Mz,$ZodCheckEndsWith:Bz,$ZodCheckGreaterThan:Z2,$ZodCheckIncludes:$z,$ZodCheckLengthEquals:Lz,$ZodCheckLessThan:V2,$ZodCheckLowerCase:Oz,$ZodCheckMaxLength:Pz,$ZodCheckMaxSize:zz,$ZodCheckMimeType:Uz,$ZodCheckMinLength:Dz,$ZodCheckMinSize:Iz,$ZodCheckMultipleOf:Az,$ZodCheckNumberFormat:Cz,$ZodCheckOverwrite:Vz,$ZodCheckProperty:Fz,$ZodCheckRegex:Rz,$ZodCheckSizeEquals:kz,$ZodCheckStartsWith:jz,$ZodCheckStringFormat:Av,$ZodCheckUpperCase:Nz,$ZodCodec:K2,$ZodCustom:rk,$ZodCustomStringFormat:_I,$ZodDate:MI,$ZodDefault:GI,$ZodDiscriminatedUnion:RI,$ZodE164:mI,$ZodEmail:Wz,$ZodEmoji:Yz,$ZodEncodeError:nx,$ZodEnum:BI,$ZodError:z2,$ZodExactOptional:ZI,$ZodFile:UI,$ZodFunction:tk,$ZodGUID:Gz,$ZodIPv4:sI,$ZodIPv6:lI,$ZodISODate:rI,$ZodISODateTime:iI,$ZodISODuration:oI,$ZodISOTime:aI,$ZodIntersection:OI,$ZodJWT:yI,$ZodKSUID:nI,$ZodLazy:ik,$ZodLiteral:FI,$ZodMAC:cI,$ZodMap:$I,$ZodNaN:KI,$ZodNanoID:Kz,$ZodNever:AI,$ZodNonOptional:WI,$ZodNull:SI,$ZodNullable:qI,$ZodNumber:G2,$ZodNumberFormat:vI,$ZodObject:PI,$ZodObjectJIT:DI,$ZodOptional:Y2,$ZodPipe:JI,$ZodPrefault:HI,$ZodPromise:nk,$ZodReadonly:QI,$ZodRealError:Uc,$ZodRecord:NI,$ZodRegistry:hk,$ZodSet:jI,$ZodString:Cv,$ZodStringFormat:$r,$ZodSuccess:XI,$ZodSymbol:xI,$ZodTemplateLiteral:ek,$ZodTransform:VI,$ZodTuple:X2,$ZodType:ei,$ZodULID:eI,$ZodURL:Xz,$ZodUUID:Hz,$ZodUndefined:wI,$ZodUnion:sx,$ZodUnknown:EI,$ZodVoid:CI,$ZodXID:tI,$ZodXor:LI,$brand:xM,$constructor:nt,$input:uk,$output:ck,Doc:Zz,JSONSchema:wN,JSONSchemaGenerator:xN,NEVER:bM,TimePrecision:mk,_any:Ok,_array:Vk,_base64:mS,_base64url:gS,_bigint:zk,_boolean:Ck,_catch:pN,_check:Wk,_cidrv4:fS,_cidrv6:pS,_coercedBigint:Ik,_coercedBoolean:Mk,_coercedDate:Fk,_coercedNumber:xk,_coercedString:fk,_cuid:oS,_cuid2:sS,_custom:qk,_date:Bk,_decode:D2,_decodeAsync:R2,_default:hN,_discriminatedUnion:Q8,_e164:yS,_email:Q2,_emoji:rS,_encode:P2,_encodeAsync:L2,_endsWith:px,_enum:aN,_file:Zk,_float32:Sk,_float64:Tk,_gt:ap,_gte:Yl,_guid:Rb,_includes:dx,_int:wk,_int32:Ek,_int64:kk,_intersection:eN,_ipv4:hS,_ipv6:dS,_isoDate:yk,_isoDateTime:gk,_isoDuration:vk,_isoTime:_k,_jwt:_S,_ksuid:uS,_lazy:_N,_length:Iv,_literal:sN,_lowercase:ux,_lt:rp,_lte:vu,_mac:pk,_map:iN,_max:vu,_maxLength:zv,_maxSize:by,_mime:mx,_min:Yl,_minLength:Pm,_minSize:op,_multipleOf:uy,_nan:Uk,_nanoid:aS,_nativeEnum:oN,_negative:bS,_never:$k,_nonnegative:wS,_nonoptional:dN,_nonpositive:xS,_normalize:gx,_null:Rk,_nullable:uN,_number:bk,_optional:cN,_overwrite:of,_parse:bv,_parseAsync:xv,_pipe:mN,_positive:vS,_promise:vN,_property:SS,_readonly:gN,_record:nN,_refine:Gk,_regex:cx,_safeDecode:N2,_safeDecodeAsync:j2,_safeEncode:O2,_safeEncodeAsync:$2,_safeParse:wv,_safeParseAsync:Sv,_set:rN,_size:Mv,_slugify:bx,_startsWith:fx,_string:dk,_stringFormat:kv,_stringbool:Kk,_success:fN,_superRefine:Hk,_symbol:Dk,_templateLiteral:yN,_toLowerCase:_x,_toUpperCase:vx,_transform:lN,_trim:yx,_tuple:tN,_uint32:Ak,_uint64:Pk,_ulid:lS,_undefined:Lk,_union:K8,_unknown:Nk,_uppercase:hx,_url:lx,_uuid:eS,_uuidv4:tS,_uuidv6:nS,_uuidv7:iS,_void:jk,_xid:cS,_xor:J8,clone:xu,config:js,createStandardJSONSchemaMethod:J_,createToJSONSchemaMethod:Jk,decode:RO,decodeAsync:NO,describe:Xk,encode:LO,encodeAsync:OO,extractDefs:dy,finalize:fy,flattenError:I2,formatError:k2,globalConfig:kb,globalRegistry:_u,initializeContext:hy,isValidBase64:q2,isValidBase64URL:fI,isValidJWT:gI,locales:lk,meta:Yk,parse:kw,parseAsync:Pw,prettifyError:UM,process:Er,regexes:U2,registry:J2,safeDecode:jO,safeDecodeAsync:FO,safeEncode:$O,safeEncodeAsync:BO,safeParse:VM,safeParseAsync:ZM,toDotPath:FM,toJSONSchema:OP,treeifyError:BM,util:$M,version:qz},Symbol.toStringTag,{value:"Module"})),TN=Object.freeze(Object.defineProperty({__proto__:null,endsWith:px,gt:ap,gte:Yl,includes:dx,length:Iv,lowercase:ux,lt:rp,lte:vu,maxLength:zv,maxSize:by,mime:mx,minLength:Pm,minSize:op,multipleOf:uy,negative:bS,nonnegative:wS,nonpositive:xS,normalize:gx,overwrite:of,positive:vS,property:SS,regex:cx,size:Mv,slugify:bx,startsWith:fx,toLowerCase:_x,toUpperCase:vx,trim:yx,uppercase:hx},Symbol.toStringTag,{value:"Module"})),AS=nt("ZodISODateTime",(e,t)=>{iI.init(e,t),jr.init(e,t)});function NP(e){return gk(AS,e)}const CS=nt("ZodISODate",(e,t)=>{rI.init(e,t),jr.init(e,t)});function $P(e){return yk(CS,e)}const MS=nt("ZodISOTime",(e,t)=>{aI.init(e,t),jr.init(e,t)});function jP(e){return _k(MS,e)}const zS=nt("ZodISODuration",(e,t)=>{oI.init(e,t),jr.init(e,t)});function BP(e){return vk(zS,e)}const FP=Object.freeze(Object.defineProperty({__proto__:null,ZodISODate:CS,ZodISODateTime:AS,ZodISODuration:zS,ZodISOTime:MS,date:$P,datetime:NP,duration:BP,time:jP},Symbol.toStringTag,{value:"Module"})),UP=(e,t)=>{z2.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>k2(e,r)},flatten:{value:r=>I2(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,Pb,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,Pb,2)}},isEmpty:{get(){return e.issues.length===0}}})},EN=nt("ZodError",UP),Vc=nt("ZodError",UP,{Parent:Error}),VP=bv(Vc),ZP=xv(Vc),qP=wv(Vc),GP=Sv(Vc),HP=P2(Vc),WP=D2(Vc),XP=L2(Vc),YP=R2(Vc),KP=O2(Vc),JP=N2(Vc),QP=$2(Vc),e5=j2(Vc),si=nt("ZodType",(e,t)=>(ei.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:J_(e,"input"),output:J_(e,"output")}}),e.toJSONSchema=Jk(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(yd(t,{checks:[...t.checks??[],...r.map(u=>typeof u=="function"?{_zod:{check:u,def:{check:"custom"},onattach:[]}}:u)]}),{parent:!0}),e.with=e.check,e.clone=(r,u)=>xu(e,r,u),e.brand=()=>e,e.register=((r,u)=>(r.add(e,u),e)),e.parse=(r,u)=>VP(e,r,u,{callee:e.parse}),e.safeParse=(r,u)=>qP(e,r,u),e.parseAsync=async(r,u)=>ZP(e,r,u,{callee:e.parseAsync}),e.safeParseAsync=async(r,u)=>GP(e,r,u),e.spa=e.safeParseAsync,e.encode=(r,u)=>HP(e,r,u),e.decode=(r,u)=>WP(e,r,u),e.encodeAsync=async(r,u)=>XP(e,r,u),e.decodeAsync=async(r,u)=>YP(e,r,u),e.safeEncode=(r,u)=>KP(e,r,u),e.safeDecode=(r,u)=>JP(e,r,u),e.safeEncodeAsync=async(r,u)=>QP(e,r,u),e.safeDecodeAsync=async(r,u)=>e5(e,r,u),e.refine=(r,u)=>e.check(_T(r,u)),e.superRefine=r=>e.check(vT(r)),e.overwrite=r=>e.check(of(r)),e.optional=()=>ev(e),e.exactOptional=()=>eT(e),e.nullable=()=>tv(e),e.nullish=()=>ev(tv(e)),e.nonoptional=r=>oT(e,r),e.array=()=>ad(e),e.or=r=>Fx([e,r]),e.and=r=>ZS(e,r),e.transform=r=>nv(e,Vx(r)),e.default=r=>iT(e,r),e.prefault=r=>aT(e,r),e.catch=r=>cT(e,r),e.pipe=r=>nv(e,r),e.readonly=()=>dT(e),e.describe=r=>{const u=e.clone();return _u.add(u,{description:r}),u},Object.defineProperty(e,"description",{get(){return _u.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return _u.get(e);const u=e.clone();return _u.add(u,r[0]),u},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=r=>r(e),e)),xx=nt("_ZodString",(e,t)=>{Cv.init(e,t),si.init(e,t),e._zod.processJSONSchema=(u,a,f)=>Qk(e,u,a);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...u)=>e.check(cx(...u)),e.includes=(...u)=>e.check(dx(...u)),e.startsWith=(...u)=>e.check(fx(...u)),e.endsWith=(...u)=>e.check(px(...u)),e.min=(...u)=>e.check(Pm(...u)),e.max=(...u)=>e.check(zv(...u)),e.length=(...u)=>e.check(Iv(...u)),e.nonempty=(...u)=>e.check(Pm(1,...u)),e.lowercase=u=>e.check(ux(u)),e.uppercase=u=>e.check(hx(u)),e.trim=()=>e.check(yx()),e.normalize=(...u)=>e.check(gx(...u)),e.toLowerCase=()=>e.check(_x()),e.toUpperCase=()=>e.check(vx()),e.slugify=()=>e.check(bx())}),Pv=nt("ZodString",(e,t)=>{Cv.init(e,t),xx.init(e,t),e.email=r=>e.check(Q2(wx,r)),e.url=r=>e.check(lx(Dv,r)),e.jwt=r=>e.check(_S(Nx,r)),e.emoji=r=>e.check(rS(Sx,r)),e.guid=r=>e.check(Rb(Q_,r)),e.uuid=r=>e.check(eS(ld,r)),e.uuidv4=r=>e.check(tS(ld,r)),e.uuidv6=r=>e.check(nS(ld,r)),e.uuidv7=r=>e.check(iS(ld,r)),e.nanoid=r=>e.check(aS(Tx,r)),e.guid=r=>e.check(Rb(Q_,r)),e.cuid=r=>e.check(oS(Ex,r)),e.cuid2=r=>e.check(sS(Ax,r)),e.ulid=r=>e.check(lS(Cx,r)),e.base64=r=>e.check(mS(Lx,r)),e.base64url=r=>e.check(gS(Rx,r)),e.xid=r=>e.check(cS(Mx,r)),e.ksuid=r=>e.check(uS(zx,r)),e.ipv4=r=>e.check(hS(Ix,r)),e.ipv6=r=>e.check(dS(kx,r)),e.cidrv4=r=>e.check(fS(Px,r)),e.cidrv6=r=>e.check(pS(Dx,r)),e.e164=r=>e.check(yS(Ox,r)),e.datetime=r=>e.check(NP(r)),e.date=r=>e.check($P(r)),e.time=r=>e.check(jP(r)),e.duration=r=>e.check(BP(r))});function yl(e){return dk(Pv,e)}const jr=nt("ZodStringFormat",(e,t)=>{$r.init(e,t),xx.init(e,t)}),wx=nt("ZodEmail",(e,t)=>{Wz.init(e,t),jr.init(e,t)});function t5(e){return Q2(wx,e)}const Q_=nt("ZodGUID",(e,t)=>{Gz.init(e,t),jr.init(e,t)});function n5(e){return Rb(Q_,e)}const ld=nt("ZodUUID",(e,t)=>{Hz.init(e,t),jr.init(e,t)});function i5(e){return eS(ld,e)}function r5(e){return tS(ld,e)}function a5(e){return nS(ld,e)}function o5(e){return iS(ld,e)}const Dv=nt("ZodURL",(e,t)=>{Xz.init(e,t),jr.init(e,t)});function s5(e){return lx(Dv,e)}function l5(e){return lx(Dv,{protocol:/^https?$/,hostname:cz,...kt(e)})}const Sx=nt("ZodEmoji",(e,t)=>{Yz.init(e,t),jr.init(e,t)});function c5(e){return rS(Sx,e)}const Tx=nt("ZodNanoID",(e,t)=>{Kz.init(e,t),jr.init(e,t)});function u5(e){return aS(Tx,e)}const Ex=nt("ZodCUID",(e,t)=>{Jz.init(e,t),jr.init(e,t)});function h5(e){return oS(Ex,e)}const Ax=nt("ZodCUID2",(e,t)=>{Qz.init(e,t),jr.init(e,t)});function d5(e){return sS(Ax,e)}const Cx=nt("ZodULID",(e,t)=>{eI.init(e,t),jr.init(e,t)});function f5(e){return lS(Cx,e)}const Mx=nt("ZodXID",(e,t)=>{tI.init(e,t),jr.init(e,t)});function p5(e){return cS(Mx,e)}const zx=nt("ZodKSUID",(e,t)=>{nI.init(e,t),jr.init(e,t)});function m5(e){return uS(zx,e)}const Ix=nt("ZodIPv4",(e,t)=>{sI.init(e,t),jr.init(e,t)});function g5(e){return hS(Ix,e)}const IS=nt("ZodMAC",(e,t)=>{cI.init(e,t),jr.init(e,t)});function y5(e){return pk(IS,e)}const kx=nt("ZodIPv6",(e,t)=>{lI.init(e,t),jr.init(e,t)});function _5(e){return dS(kx,e)}const Px=nt("ZodCIDRv4",(e,t)=>{uI.init(e,t),jr.init(e,t)});function v5(e){return fS(Px,e)}const Dx=nt("ZodCIDRv6",(e,t)=>{hI.init(e,t),jr.init(e,t)});function b5(e){return pS(Dx,e)}const Lx=nt("ZodBase64",(e,t)=>{dI.init(e,t),jr.init(e,t)});function x5(e){return mS(Lx,e)}const Rx=nt("ZodBase64URL",(e,t)=>{pI.init(e,t),jr.init(e,t)});function w5(e){return gS(Rx,e)}const Ox=nt("ZodE164",(e,t)=>{mI.init(e,t),jr.init(e,t)});function S5(e){return yS(Ox,e)}const Nx=nt("ZodJWT",(e,t)=>{yI.init(e,t),jr.init(e,t)});function T5(e){return _S(Nx,e)}const xy=nt("ZodCustomStringFormat",(e,t)=>{_I.init(e,t),jr.init(e,t)});function E5(e,t,r={}){return kv(xy,e,t,r)}function A5(e){return kv(xy,"hostname",lz,e)}function C5(e){return kv(xy,"hex",Tz,e)}function M5(e,t){const r=t?.enc??"hex",u=`${e}_${r}`,a=U2[u];if(!a)throw new Error(`Unrecognized hash format: ${u}`);return kv(xy,u,a,t)}const Lv=nt("ZodNumber",(e,t)=>{G2.init(e,t),si.init(e,t),e._zod.processJSONSchema=(u,a,f)=>eP(e,u,a),e.gt=(u,a)=>e.check(ap(u,a)),e.gte=(u,a)=>e.check(Yl(u,a)),e.min=(u,a)=>e.check(Yl(u,a)),e.lt=(u,a)=>e.check(rp(u,a)),e.lte=(u,a)=>e.check(vu(u,a)),e.max=(u,a)=>e.check(vu(u,a)),e.int=u=>e.check(Ob(u)),e.safe=u=>e.check(Ob(u)),e.positive=u=>e.check(ap(0,u)),e.nonnegative=u=>e.check(Yl(0,u)),e.negative=u=>e.check(rp(0,u)),e.nonpositive=u=>e.check(vu(0,u)),e.multipleOf=(u,a)=>e.check(uy(u,a)),e.step=(u,a)=>e.check(uy(u,a)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function vn(e){return bk(Lv,e)}const Bm=nt("ZodNumberFormat",(e,t)=>{vI.init(e,t),Lv.init(e,t)});function Ob(e){return wk(Bm,e)}function z5(e){return Sk(Bm,e)}function I5(e){return Tk(Bm,e)}function k5(e){return Ek(Bm,e)}function P5(e){return Ak(Bm,e)}const Rv=nt("ZodBoolean",(e,t)=>{H2.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>tP(e,r,u)});function kS(e){return Ck(Rv,e)}const Ov=nt("ZodBigInt",(e,t)=>{W2.init(e,t),si.init(e,t),e._zod.processJSONSchema=(u,a,f)=>nP(e,u),e.gte=(u,a)=>e.check(Yl(u,a)),e.min=(u,a)=>e.check(Yl(u,a)),e.gt=(u,a)=>e.check(ap(u,a)),e.gte=(u,a)=>e.check(Yl(u,a)),e.min=(u,a)=>e.check(Yl(u,a)),e.lt=(u,a)=>e.check(rp(u,a)),e.lte=(u,a)=>e.check(vu(u,a)),e.max=(u,a)=>e.check(vu(u,a)),e.positive=u=>e.check(ap(BigInt(0),u)),e.negative=u=>e.check(rp(BigInt(0),u)),e.nonpositive=u=>e.check(vu(BigInt(0),u)),e.nonnegative=u=>e.check(Yl(BigInt(0),u)),e.multipleOf=(u,a)=>e.check(uy(u,a));const r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});function D5(e){return zk(Ov,e)}const $x=nt("ZodBigIntFormat",(e,t)=>{bI.init(e,t),Ov.init(e,t)});function L5(e){return kk($x,e)}function R5(e){return Pk($x,e)}const PS=nt("ZodSymbol",(e,t)=>{xI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>iP(e,r)});function O5(e){return Dk(PS,e)}const DS=nt("ZodUndefined",(e,t)=>{wI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>aP(e,r)});function N5(e){return Lk(DS,e)}const LS=nt("ZodNull",(e,t)=>{SI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>rP(e,r,u)});function RS(e){return Rk(LS,e)}const OS=nt("ZodAny",(e,t)=>{TI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>lP()});function $5(){return Ok(OS)}const NS=nt("ZodUnknown",(e,t)=>{EI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>cP()});function Dm(){return Nk(NS)}const $S=nt("ZodNever",(e,t)=>{AI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>sP(e,r,u)});function jx(e){return $k($S,e)}const jS=nt("ZodVoid",(e,t)=>{CI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>oP(e,r)});function j5(e){return jk(jS,e)}const Bx=nt("ZodDate",(e,t)=>{MI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(u,a,f)=>uP(e,u),e.min=(u,a)=>e.check(Yl(u,a)),e.max=(u,a)=>e.check(vu(u,a));const r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function B5(e){return Bk(Bx,e)}const BS=nt("ZodArray",(e,t)=>{zI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>wP(e,r,u,a),e.element=t.element,e.min=(r,u)=>e.check(Pm(r,u)),e.nonempty=r=>e.check(Pm(1,r)),e.max=(r,u)=>e.check(zv(r,u)),e.length=(r,u)=>e.check(Iv(r,u)),e.unwrap=()=>e.element});function ad(e,t){return Vk(BS,e,t)}function F5(e){const t=e._zod.def.shape;return Ux(Object.keys(t))}const Nv=nt("ZodObject",(e,t)=>{DI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>SP(e,r,u,a),fi(e,"shape",()=>t.shape),e.keyof=()=>Ux(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Dm()}),e.loose=()=>e.clone({...e._zod.def,catchall:Dm()}),e.strict=()=>e.clone({...e._zod.def,catchall:jx()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>kM(e,r),e.safeExtend=r=>PM(e,r),e.merge=r=>DM(e,r),e.pick=r=>zM(e,r),e.omit=r=>IM(e,r),e.partial=(...r)=>LM(Zx,e,r[0]),e.required=(...r)=>RM(qx,e,r[0])});function lh(e,t){const r={type:"object",shape:e??{},...kt(t)};return new Nv(r)}function U5(e,t){return new Nv({type:"object",shape:e,catchall:jx(),...kt(t)})}function V5(e,t){return new Nv({type:"object",shape:e,catchall:Dm(),...kt(t)})}const $v=nt("ZodUnion",(e,t)=>{sx.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>TS(e,r,u,a),e.options=t.options});function Fx(e,t){return new $v({type:"union",options:e,...kt(t)})}const FS=nt("ZodXor",(e,t)=>{$v.init(e,t),LI.init(e,t),e._zod.processJSONSchema=(r,u,a)=>TS(e,r,u,a),e.options=t.options});function Z5(e,t){return new FS({type:"union",options:e,inclusive:!1,...kt(t)})}const US=nt("ZodDiscriminatedUnion",(e,t)=>{$v.init(e,t),RI.init(e,t)});function q5(e,t,r){return new US({type:"union",options:t,discriminator:e,...kt(r)})}const VS=nt("ZodIntersection",(e,t)=>{OI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>TP(e,r,u,a)});function ZS(e,t){return new VS({type:"intersection",left:e,right:t})}const qS=nt("ZodTuple",(e,t)=>{X2.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>EP(e,r,u,a),e.rest=r=>e.clone({...e._zod.def,rest:r})});function GS(e,t,r){const u=t instanceof ei,a=u?r:t,f=u?t:null;return new qS({type:"tuple",items:e,rest:f,...kt(a)})}const jv=nt("ZodRecord",(e,t)=>{NI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>AP(e,r,u,a),e.keyType=t.keyType,e.valueType=t.valueType});function HS(e,t,r){return new jv({type:"record",keyType:e,valueType:t,...kt(r)})}function G5(e,t,r){const u=xu(e);return u._zod.values=void 0,new jv({type:"record",keyType:u,valueType:t,...kt(r)})}function H5(e,t,r){return new jv({type:"record",keyType:e,valueType:t,mode:"loose",...kt(r)})}const WS=nt("ZodMap",(e,t)=>{$I.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>bP(e,r),e.keyType=t.keyType,e.valueType=t.valueType,e.min=(...r)=>e.check(op(...r)),e.nonempty=r=>e.check(op(1,r)),e.max=(...r)=>e.check(by(...r)),e.size=(...r)=>e.check(Mv(...r))});function W5(e,t,r){return new WS({type:"map",keyType:e,valueType:t,...kt(r)})}const XS=nt("ZodSet",(e,t)=>{jI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>xP(e,r),e.min=(...r)=>e.check(op(...r)),e.nonempty=r=>e.check(op(1,r)),e.max=(...r)=>e.check(by(...r)),e.size=(...r)=>e.check(Mv(...r))});function X5(e,t){return new XS({type:"set",valueType:e,...kt(t)})}const py=nt("ZodEnum",(e,t)=>{BI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(u,a,f)=>hP(e,u,a),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(u,a)=>{const f={};for(const m of u)if(r.has(m))f[m]=t.entries[m];else throw new Error(`Key ${m} not found in enum`);return new py({...t,checks:[],...kt(a),entries:f})},e.exclude=(u,a)=>{const f={...t.entries};for(const m of u)if(r.has(m))delete f[m];else throw new Error(`Key ${m} not found in enum`);return new py({...t,checks:[],...kt(a),entries:f})}});function Ux(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(u=>[u,u])):e;return new py({type:"enum",entries:r,...kt(t)})}function Y5(e,t){return new py({type:"enum",entries:e,...kt(t)})}const YS=nt("ZodLiteral",(e,t)=>{FI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>dP(e,r,u),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function K5(e,t){return new YS({type:"literal",values:Array.isArray(e)?e:[e],...kt(t)})}const KS=nt("ZodFile",(e,t)=>{UI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>mP(e,r,u),e.min=(r,u)=>e.check(op(r,u)),e.max=(r,u)=>e.check(by(r,u)),e.mime=(r,u)=>e.check(mx(Array.isArray(r)?r:[r],u))});function J5(e){return Zk(KS,e)}const JS=nt("ZodTransform",(e,t)=>{VI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>vP(e,r),e._zod.parse=(r,u)=>{if(u.direction==="backward")throw new nx(e.constructor.name);r.addIssue=f=>{if(typeof f=="string")r.issues.push(ly(f,r.value,t));else{const m=f;m.fatal&&(m.continue=!1),m.code??(m.code="custom"),m.input??(m.input=r.value),m.inst??(m.inst=e),r.issues.push(ly(m))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(f=>(r.value=f,r)):(r.value=a,r)}});function Vx(e){return new JS({type:"transform",transform:e})}const Zx=nt("ZodOptional",(e,t)=>{Y2.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>ES(e,r,u,a),e.unwrap=()=>e._zod.def.innerType});function ev(e){return new Zx({type:"optional",innerType:e})}const QS=nt("ZodExactOptional",(e,t)=>{ZI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>ES(e,r,u,a),e.unwrap=()=>e._zod.def.innerType});function eT(e){return new QS({type:"optional",innerType:e})}const tT=nt("ZodNullable",(e,t)=>{qI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>CP(e,r,u,a),e.unwrap=()=>e._zod.def.innerType});function tv(e){return new tT({type:"nullable",innerType:e})}function Q5(e){return ev(tv(e))}const nT=nt("ZodDefault",(e,t)=>{GI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>zP(e,r,u,a),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function iT(e,t){return new nT({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():rx(t)}})}const rT=nt("ZodPrefault",(e,t)=>{HI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>IP(e,r,u,a),e.unwrap=()=>e._zod.def.innerType});function aT(e,t){return new rT({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():rx(t)}})}const qx=nt("ZodNonOptional",(e,t)=>{WI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>MP(e,r,u,a),e.unwrap=()=>e._zod.def.innerType});function oT(e,t){return new qx({type:"nonoptional",innerType:e,...kt(t)})}const sT=nt("ZodSuccess",(e,t)=>{XI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>gP(e,r,u),e.unwrap=()=>e._zod.def.innerType});function e4(e){return new sT({type:"success",innerType:e})}const lT=nt("ZodCatch",(e,t)=>{YI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>kP(e,r,u,a),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function cT(e,t){return new lT({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const uT=nt("ZodNaN",(e,t)=>{KI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>fP(e,r)});function t4(e){return Uk(uT,e)}const Gx=nt("ZodPipe",(e,t)=>{JI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>PP(e,r,u,a),e.in=t.in,e.out=t.out});function nv(e,t){return new Gx({type:"pipe",in:e,out:t})}const Hx=nt("ZodCodec",(e,t)=>{Gx.init(e,t),K2.init(e,t)});function n4(e,t,r){return new Hx({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}const hT=nt("ZodReadonly",(e,t)=>{QI.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>DP(e,r,u,a),e.unwrap=()=>e._zod.def.innerType});function dT(e){return new hT({type:"readonly",innerType:e})}const fT=nt("ZodTemplateLiteral",(e,t)=>{ek.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>pP(e,r,u)});function i4(e,t){return new fT({type:"template_literal",parts:e,...kt(t)})}const pT=nt("ZodLazy",(e,t)=>{ik.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>RP(e,r,u,a),e.unwrap=()=>e._zod.def.getter()});function mT(e){return new pT({type:"lazy",getter:e})}const gT=nt("ZodPromise",(e,t)=>{nk.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>LP(e,r,u,a),e.unwrap=()=>e._zod.def.innerType});function r4(e){return new gT({type:"promise",innerType:e})}const yT=nt("ZodFunction",(e,t)=>{tk.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>_P(e,r)});function Nb(e){return new yT({type:"function",input:Array.isArray(e?.input)?GS(e?.input):e?.input??ad(Dm()),output:e?.output??Dm()})}const Bv=nt("ZodCustom",(e,t)=>{rk.init(e,t),si.init(e,t),e._zod.processJSONSchema=(r,u,a)=>yP(e,r)});function a4(e){const t=new ha({check:"custom"});return t._zod.check=e,t}function o4(e,t){return qk(Bv,e??(()=>!0),t)}function _T(e,t={}){return Gk(Bv,e,t)}function vT(e){return Hk(e)}const s4=Xk,l4=Yk;function c4(e,t={}){const r=new Bv({type:"custom",check:"custom",fn:u=>u instanceof e,abort:!0,...kt(t)});return r._zod.bag.Class=e,r._zod.check=u=>{u.value instanceof e||u.issues.push({code:"invalid_type",expected:e.name,input:u.value,inst:r,path:[...r._zod.def.path??[]]})},r}const u4=(...e)=>Kk({Codec:Hx,Boolean:Rv,String:Pv},...e);function h4(e){const t=mT(()=>Fx([yl(e),vn(),kS(),RS(),ad(t),HS(yl(),t)]));return t}function d4(e,t){return nv(Vx(e),t)}const AN=Object.freeze(Object.defineProperty({__proto__:null,ZodAny:OS,ZodArray:BS,ZodBase64:Lx,ZodBase64URL:Rx,ZodBigInt:Ov,ZodBigIntFormat:$x,ZodBoolean:Rv,ZodCIDRv4:Px,ZodCIDRv6:Dx,ZodCUID:Ex,ZodCUID2:Ax,ZodCatch:lT,ZodCodec:Hx,ZodCustom:Bv,ZodCustomStringFormat:xy,ZodDate:Bx,ZodDefault:nT,ZodDiscriminatedUnion:US,ZodE164:Ox,ZodEmail:wx,ZodEmoji:Sx,ZodEnum:py,ZodExactOptional:QS,ZodFile:KS,ZodFunction:yT,ZodGUID:Q_,ZodIPv4:Ix,ZodIPv6:kx,ZodIntersection:VS,ZodJWT:Nx,ZodKSUID:zx,ZodLazy:pT,ZodLiteral:YS,ZodMAC:IS,ZodMap:WS,ZodNaN:uT,ZodNanoID:Tx,ZodNever:$S,ZodNonOptional:qx,ZodNull:LS,ZodNullable:tT,ZodNumber:Lv,ZodNumberFormat:Bm,ZodObject:Nv,ZodOptional:Zx,ZodPipe:Gx,ZodPrefault:rT,ZodPromise:gT,ZodReadonly:hT,ZodRecord:jv,ZodSet:XS,ZodString:Pv,ZodStringFormat:jr,ZodSuccess:sT,ZodSymbol:PS,ZodTemplateLiteral:fT,ZodTransform:JS,ZodTuple:qS,ZodType:si,ZodULID:Cx,ZodURL:Dv,ZodUUID:ld,ZodUndefined:DS,ZodUnion:$v,ZodUnknown:NS,ZodVoid:jS,ZodXID:Mx,ZodXor:FS,_ZodString:xx,_default:iT,_function:Nb,any:$5,array:ad,base64:x5,base64url:w5,bigint:D5,boolean:kS,catch:cT,check:a4,cidrv4:v5,cidrv6:b5,codec:n4,cuid:h5,cuid2:d5,custom:o4,date:B5,describe:s4,discriminatedUnion:q5,e164:S5,email:t5,emoji:c5,enum:Ux,exactOptional:eT,file:J5,float32:z5,float64:I5,function:Nb,guid:n5,hash:M5,hex:C5,hostname:A5,httpUrl:l5,instanceof:c4,int:Ob,int32:k5,int64:L5,intersection:ZS,ipv4:g5,ipv6:_5,json:h4,jwt:T5,keyof:F5,ksuid:m5,lazy:mT,literal:K5,looseObject:V5,looseRecord:H5,mac:y5,map:W5,meta:l4,nan:t4,nanoid:u5,nativeEnum:Y5,never:jx,nonoptional:oT,null:RS,nullable:tv,nullish:Q5,number:vn,object:lh,optional:ev,partialRecord:G5,pipe:nv,prefault:aT,preprocess:d4,promise:r4,readonly:dT,record:HS,refine:_T,set:X5,strictObject:U5,string:yl,stringFormat:E5,stringbool:u4,success:e4,superRefine:vT,symbol:O5,templateLiteral:i4,transform:Vx,tuple:GS,uint32:P5,uint64:R5,ulid:f5,undefined:N5,union:Fx,unknown:Dm,url:s5,uuid:i5,uuidv4:r5,uuidv6:a5,uuidv7:o5,void:j5,xid:p5,xor:Z5},Symbol.toStringTag,{value:"Module"})),CN={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function MN(e){js({customError:e})}function zN(){return js().customError}var Rw;Rw||(Rw={});const sn={...AN,...TN,iso:FP},IN=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"]);function kN(e,t){const r=e.$schema;return r==="https://json-schema.org/draft/2020-12/schema"?"draft-2020-12":r==="http://json-schema.org/draft-07/schema#"?"draft-7":r==="http://json-schema.org/draft-04/schema#"?"draft-4":t??"draft-2020-12"}function PN(e,t){if(!e.startsWith("#"))throw new Error("External $ref is not supported, only local refs (#/...) are allowed");const r=e.slice(1).split("/").filter(Boolean);if(r.length===0)return t.rootSchema;const u=t.version==="draft-2020-12"?"$defs":"definitions";if(r[0]===u){const a=r[1];if(!a||!t.defs[a])throw new Error(`Reference not found: ${e}`);return t.defs[a]}throw new Error(`Reference not found: ${e}`)}function f4(e,t){if(e.not!==void 0){if(typeof e.not=="object"&&Object.keys(e.not).length===0)return sn.never();throw new Error("not is not supported in Zod (except { not: {} } for never)")}if(e.unevaluatedItems!==void 0)throw new Error("unevaluatedItems is not supported");if(e.unevaluatedProperties!==void 0)throw new Error("unevaluatedProperties is not supported");if(e.if!==void 0||e.then!==void 0||e.else!==void 0)throw new Error("Conditional schemas (if/then/else) are not supported");if(e.dependentSchemas!==void 0||e.dependentRequired!==void 0)throw new Error("dependentSchemas and dependentRequired are not supported");if(e.$ref){const a=e.$ref;if(t.refs.has(a))return t.refs.get(a);if(t.processing.has(a))return sn.lazy(()=>{if(!t.refs.has(a))throw new Error(`Circular reference not resolved: ${a}`);return t.refs.get(a)});t.processing.add(a);const f=PN(a,t),m=$s(f,t);return t.refs.set(a,m),t.processing.delete(a),m}if(e.enum!==void 0){const a=e.enum;if(t.version==="openapi-3.0"&&e.nullable===!0&&a.length===1&&a[0]===null)return sn.null();if(a.length===0)return sn.never();if(a.length===1)return sn.literal(a[0]);if(a.every(m=>typeof m=="string"))return sn.enum(a);const f=a.map(m=>sn.literal(m));return f.length<2?f[0]:sn.union([f[0],f[1],...f.slice(2)])}if(e.const!==void 0)return sn.literal(e.const);const r=e.type;if(Array.isArray(r)){const a=r.map(f=>{const m={...e,type:f};return f4(m,t)});return a.length===0?sn.never():a.length===1?a[0]:sn.union(a)}if(!r)return sn.any();let u;switch(r){case"string":{let a=sn.string();if(e.format){const f=e.format;f==="email"?a=a.check(sn.email()):f==="uri"||f==="uri-reference"?a=a.check(sn.url()):f==="uuid"||f==="guid"?a=a.check(sn.uuid()):f==="date-time"?a=a.check(sn.iso.datetime()):f==="date"?a=a.check(sn.iso.date()):f==="time"?a=a.check(sn.iso.time()):f==="duration"?a=a.check(sn.iso.duration()):f==="ipv4"?a=a.check(sn.ipv4()):f==="ipv6"?a=a.check(sn.ipv6()):f==="mac"?a=a.check(sn.mac()):f==="cidr"?a=a.check(sn.cidrv4()):f==="cidr-v6"?a=a.check(sn.cidrv6()):f==="base64"?a=a.check(sn.base64()):f==="base64url"?a=a.check(sn.base64url()):f==="e164"?a=a.check(sn.e164()):f==="jwt"?a=a.check(sn.jwt()):f==="emoji"?a=a.check(sn.emoji()):f==="nanoid"?a=a.check(sn.nanoid()):f==="cuid"?a=a.check(sn.cuid()):f==="cuid2"?a=a.check(sn.cuid2()):f==="ulid"?a=a.check(sn.ulid()):f==="xid"?a=a.check(sn.xid()):f==="ksuid"&&(a=a.check(sn.ksuid()))}typeof e.minLength=="number"&&(a=a.min(e.minLength)),typeof e.maxLength=="number"&&(a=a.max(e.maxLength)),e.pattern&&(a=a.regex(new RegExp(e.pattern))),u=a;break}case"number":case"integer":{let a=r==="integer"?sn.number().int():sn.number();typeof e.minimum=="number"&&(a=a.min(e.minimum)),typeof e.maximum=="number"&&(a=a.max(e.maximum)),typeof e.exclusiveMinimum=="number"?a=a.gt(e.exclusiveMinimum):e.exclusiveMinimum===!0&&typeof e.minimum=="number"&&(a=a.gt(e.minimum)),typeof e.exclusiveMaximum=="number"?a=a.lt(e.exclusiveMaximum):e.exclusiveMaximum===!0&&typeof e.maximum=="number"&&(a=a.lt(e.maximum)),typeof e.multipleOf=="number"&&(a=a.multipleOf(e.multipleOf)),u=a;break}case"boolean":{u=sn.boolean();break}case"null":{u=sn.null();break}case"object":{const a={},f=e.properties||{},m=new Set(e.required||[]);for(const[z,k]of Object.entries(f)){const B=$s(k,t);a[z]=m.has(z)?B:B.optional()}if(e.propertyNames){const z=$s(e.propertyNames,t),k=e.additionalProperties&&typeof e.additionalProperties=="object"?$s(e.additionalProperties,t):sn.any();if(Object.keys(a).length===0){u=sn.record(z,k);break}const B=sn.object(a).passthrough(),Z=sn.looseRecord(z,k);u=sn.intersection(B,Z);break}if(e.patternProperties){const z=e.patternProperties,k=Object.keys(z),B=[];for(const X of k){const J=$s(z[X],t),ce=sn.string().regex(new RegExp(X));B.push(sn.looseRecord(ce,J))}const Z=[];if(Object.keys(a).length>0&&Z.push(sn.object(a).passthrough()),Z.push(...B),Z.length===0)u=sn.object({}).passthrough();else if(Z.length===1)u=Z[0];else{let X=sn.intersection(Z[0],Z[1]);for(let J=2;J<Z.length;J++)X=sn.intersection(X,Z[J]);u=X}break}const c=sn.object(a);e.additionalProperties===!1?u=c.strict():typeof e.additionalProperties=="object"?u=c.catchall($s(e.additionalProperties,t)):u=c.passthrough();break}case"array":{const a=e.prefixItems,f=e.items;if(a&&Array.isArray(a)){const m=a.map(z=>$s(z,t)),c=f&&typeof f=="object"&&!Array.isArray(f)?$s(f,t):void 0;c?u=sn.tuple(m).rest(c):u=sn.tuple(m),typeof e.minItems=="number"&&(u=u.check(sn.minLength(e.minItems))),typeof e.maxItems=="number"&&(u=u.check(sn.maxLength(e.maxItems)))}else if(Array.isArray(f)){const m=f.map(z=>$s(z,t)),c=e.additionalItems&&typeof e.additionalItems=="object"?$s(e.additionalItems,t):void 0;c?u=sn.tuple(m).rest(c):u=sn.tuple(m),typeof e.minItems=="number"&&(u=u.check(sn.minLength(e.minItems))),typeof e.maxItems=="number"&&(u=u.check(sn.maxLength(e.maxItems)))}else if(f!==void 0){const m=$s(f,t);let c=sn.array(m);typeof e.minItems=="number"&&(c=c.min(e.minItems)),typeof e.maxItems=="number"&&(c=c.max(e.maxItems)),u=c}else u=sn.array(sn.any());break}default:throw new Error(`Unsupported type: ${r}`)}return e.description&&(u=u.describe(e.description)),e.default!==void 0&&(u=u.default(e.default)),u}function $s(e,t){if(typeof e=="boolean")return e?sn.any():sn.never();let r=f4(e,t);const u=e.type||e.enum!==void 0||e.const!==void 0;if(e.anyOf&&Array.isArray(e.anyOf)){const c=e.anyOf.map(k=>$s(k,t)),z=sn.union(c);r=u?sn.intersection(r,z):z}if(e.oneOf&&Array.isArray(e.oneOf)){const c=e.oneOf.map(k=>$s(k,t)),z=sn.xor(c);r=u?sn.intersection(r,z):z}if(e.allOf&&Array.isArray(e.allOf))if(e.allOf.length===0)r=u?r:sn.any();else{let c=u?r:$s(e.allOf[0],t);const z=u?0:1;for(let k=z;k<e.allOf.length;k++)c=sn.intersection(c,$s(e.allOf[k],t));r=c}e.nullable===!0&&t.version==="openapi-3.0"&&(r=sn.nullable(r)),e.readOnly===!0&&(r=sn.readonly(r));const a={},f=["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"];for(const c of f)c in e&&(a[c]=e[c]);const m=["contentEncoding","contentMediaType","contentSchema"];for(const c of m)c in e&&(a[c]=e[c]);for(const c of Object.keys(e))IN.has(c)||(a[c]=e[c]);return Object.keys(a).length>0&&t.registry.add(r,a),r}function DN(e,t){if(typeof e=="boolean")return e?sn.any():sn.never();const r=kN(e,t?.defaultTarget),u=e.$defs||e.definitions||{},a={version:r,defs:u,refs:new Map,processing:new Set,rootSchema:e,registry:t?.registry??_u};return $s(e,a)}function LN(e){return fk(Pv,e)}function RN(e){return xk(Lv,e)}function ON(e){return Mk(Rv,e)}function NN(e){return Ik(Ov,e)}function $N(e){return Fk(Bx,e)}const jN=Object.freeze(Object.defineProperty({__proto__:null,bigint:NN,boolean:ON,date:$N,number:RN,string:LN},Symbol.toStringTag,{value:"Module"}));js(ak());const ea=Object.freeze(Object.defineProperty({__proto__:null,$brand:xM,$input:uk,$output:ck,NEVER:bM,TimePrecision:mk,ZodAny:OS,ZodArray:BS,ZodBase64:Lx,ZodBase64URL:Rx,ZodBigInt:Ov,ZodBigIntFormat:$x,ZodBoolean:Rv,ZodCIDRv4:Px,ZodCIDRv6:Dx,ZodCUID:Ex,ZodCUID2:Ax,ZodCatch:lT,ZodCodec:Hx,ZodCustom:Bv,ZodCustomStringFormat:xy,ZodDate:Bx,ZodDefault:nT,ZodDiscriminatedUnion:US,ZodE164:Ox,ZodEmail:wx,ZodEmoji:Sx,ZodEnum:py,ZodError:EN,ZodExactOptional:QS,ZodFile:KS,get ZodFirstPartyTypeKind(){return Rw},ZodFunction:yT,ZodGUID:Q_,ZodIPv4:Ix,ZodIPv6:kx,ZodISODate:CS,ZodISODateTime:AS,ZodISODuration:zS,ZodISOTime:MS,ZodIntersection:VS,ZodIssueCode:CN,ZodJWT:Nx,ZodKSUID:zx,ZodLazy:pT,ZodLiteral:YS,ZodMAC:IS,ZodMap:WS,ZodNaN:uT,ZodNanoID:Tx,ZodNever:$S,ZodNonOptional:qx,ZodNull:LS,ZodNullable:tT,ZodNumber:Lv,ZodNumberFormat:Bm,ZodObject:Nv,ZodOptional:Zx,ZodPipe:Gx,ZodPrefault:rT,ZodPromise:gT,ZodReadonly:hT,ZodRealError:Vc,ZodRecord:jv,ZodSet:XS,ZodString:Pv,ZodStringFormat:jr,ZodSuccess:sT,ZodSymbol:PS,ZodTemplateLiteral:fT,ZodTransform:JS,ZodTuple:qS,ZodType:si,ZodULID:Cx,ZodURL:Dv,ZodUUID:ld,ZodUndefined:DS,ZodUnion:$v,ZodUnknown:NS,ZodVoid:jS,ZodXID:Mx,ZodXor:FS,_ZodString:xx,_default:iT,_function:Nb,any:$5,array:ad,base64:x5,base64url:w5,bigint:D5,boolean:kS,catch:cT,check:a4,cidrv4:v5,cidrv6:b5,clone:xu,codec:n4,coerce:jN,config:js,core:SN,cuid:h5,cuid2:d5,custom:o4,date:B5,decode:WP,decodeAsync:YP,describe:s4,discriminatedUnion:q5,e164:S5,email:t5,emoji:c5,encode:HP,encodeAsync:XP,endsWith:px,enum:Ux,exactOptional:eT,file:J5,flattenError:I2,float32:z5,float64:I5,formatError:k2,fromJSONSchema:DN,function:Nb,getErrorMap:zN,globalRegistry:_u,gt:ap,gte:Yl,guid:n5,hash:M5,hex:C5,hostname:A5,httpUrl:l5,includes:dx,instanceof:c4,int:Ob,int32:k5,int64:L5,intersection:ZS,ipv4:g5,ipv6:_5,iso:FP,json:h4,jwt:T5,keyof:F5,ksuid:m5,lazy:mT,length:Iv,literal:K5,locales:lk,looseObject:V5,looseRecord:H5,lowercase:ux,lt:rp,lte:vu,mac:y5,map:W5,maxLength:zv,maxSize:by,meta:l4,mime:mx,minLength:Pm,minSize:op,multipleOf:uy,nan:t4,nanoid:u5,nativeEnum:Y5,negative:bS,never:jx,nonnegative:wS,nonoptional:oT,nonpositive:xS,normalize:gx,null:RS,nullable:tv,nullish:Q5,number:vn,object:lh,optional:ev,overwrite:of,parse:VP,parseAsync:ZP,partialRecord:G5,pipe:nv,positive:vS,prefault:aT,preprocess:d4,prettifyError:UM,promise:r4,property:SS,readonly:dT,record:HS,refine:_T,regex:cx,regexes:U2,registry:J2,safeDecode:JP,safeDecodeAsync:e5,safeEncode:KP,safeEncodeAsync:QP,safeParse:qP,safeParseAsync:GP,set:X5,setErrorMap:MN,size:Mv,slugify:bx,startsWith:fx,strictObject:U5,string:yl,stringFormat:E5,stringbool:u4,success:e4,superRefine:vT,symbol:O5,templateLiteral:i4,toJSONSchema:OP,toLowerCase:_x,toUpperCase:vx,transform:Vx,treeifyError:BM,trim:yx,tuple:GS,uint32:P5,uint64:R5,ulid:f5,undefined:N5,union:Fx,unknown:Dm,uppercase:hx,url:s5,util:$M,uuid:i5,uuidv4:r5,uuidv6:a5,uuidv7:o5,void:j5,xid:p5,xor:Z5},Symbol.toStringTag,{value:"Module"})),BN=ea.object({coord:ea.object({lat:ea.number(),lon:ea.number()}),list:ea.array(ea.object({dt:ea.number(),main:ea.object({aqi:ea.number()}),components:ea.object({co:ea.number(),no:ea.number(),no2:ea.number(),o3:ea.number(),so2:ea.number(),pm2_5:ea.number(),pm10:ea.number(),nh3:ea.number()})}))}),FN=ea.array(ea.object({name:ea.string(),lat:ea.number(),lon:ea.number(),country:ea.string(),state:ea.string().optional()})),UN=lh({lat:vn(),lon:vn(),timezone:yl(),timezone_offset:vn(),current:lh({dt:vn(),sunrise:vn(),sunset:vn(),temp:vn(),feels_like:vn(),pressure:vn(),humidity:vn(),dew_point:vn(),uvi:vn(),clouds:vn(),visibility:vn().optional(),wind_speed:vn(),wind_deg:vn(),wind_gust:vn().optional(),weather:ad(lh({id:vn(),main:yl(),description:yl(),icon:yl()}))}),hourly:ad(lh({dt:vn(),temp:vn(),feels_like:vn(),pressure:vn(),humidity:vn(),dew_point:vn(),uvi:vn(),clouds:vn(),visibility:vn().optional(),wind_speed:vn(),wind_deg:vn(),wind_gust:vn(),weather:ad(lh({id:vn(),main:yl(),description:yl(),icon:yl()})),pop:vn()})),daily:ad(lh({dt:vn(),sunrise:vn(),sunset:vn(),moonrise:vn(),moonset:vn(),moon_phase:vn(),summary:yl(),temp:lh({day:vn(),min:vn(),max:vn(),night:vn(),eve:vn(),morn:vn()}),feels_like:lh({day:vn(),night:vn(),eve:vn(),morn:vn()}),pressure:vn(),humidity:vn(),dew_point:vn(),wind_speed:vn(),wind_deg:vn(),wind_gust:vn(),weather:ad(lh({id:vn(),main:yl(),description:yl(),icon:yl()})),clouds:vn(),pop:vn(),rain:vn().optional(),uvi:vn()}))}),Wx="a0566e095cd90afd26c1dc52103ca1d0";async function Xx({lat:e,lon:t}){const u=await(await fetch(`https://api.openweathermap.org/data/3.0/onecall?lat=${e}&lon=${t}&exclude=minutely,alerts&units=metric&appid=${Wx}`)).json();return UN.parse(u)}async function VN(e){const r=await(await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=${Wx}`)).json();return FN.parse(r)}async function ZN({lat:e,lon:t}){const u=await(await fetch(`https://api.openweathermap.org/data/2.5/air_pollution?lat=${e}&lon=${t}&appid=${Wx}`)).json();return BN.parse(u)}function bT({src:e,className:t}){return me.jsx("img",{className:oy("size-8",t),src:`https://openweathermap.org/img/wn/${e}.png`,alt:"Weather icon"})}function qN({coords:{lat:e,lon:t}}){const{data:r}=_v({queryKey:["weather",e,t],queryFn:()=>Xx({lat:e,lon:t})});return me.jsx(gd,{childrenClassName:"flex flex-col gap-4 text-sm lg:text-md",title:"Daily forecast",children:r.daily.map(u=>me.jsxs("div",{className:"grid grid-cols-5 gap-4 items-left 2xl:justify-between",children:[me.jsx("p",{className:"",children:new Date(u.dt*1e3).toLocaleDateString(void 0,{weekday:"short"})}),me.jsx(bT,{src:u.weather[0].icon}),me.jsxs("p",{children:[Math.round(u.temp.day)," C"]}),me.jsxs("p",{className:"text-gray-500/75 ",children:[Math.round(u.temp.min)," C"]}),me.jsxs("p",{className:"text-gray-500/75 ",children:[Math.round(u.temp.max)," C"]})]},u.dt))})}function GN({coords:{lat:e,lon:t}}){const{data:r}=_v({queryKey:["weather",e,t],queryFn:()=>Xx({lat:e,lon:t})});return me.jsx(gd,{childrenClassName:"flex gap-6 overflow-x-scroll",title:"Hourly forecast(48 hours)",children:r.hourly.map(u=>me.jsxs("div",{className:"flex flex-col gap-2 items-center p-2 2xl:justify-between",children:[me.jsx("p",{className:"whitespace-nowrap 2xl:scale-110",children:new Date(u.dt*1e3).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}),me.jsx(bT,{className:"2xl:size-10",src:u.weather[0].icon}),me.jsxs("p",{className:" 2xl:scale-110",children:[Math.round(u.temp)," C"]})]},u.dt))})}function HN({coords:{lat:e,lon:t}}){const{data:r}=_v({queryKey:["weather",e,t],queryFn:()=>Xx({lat:e,lon:t})});return me.jsxs(gd,{title:"Current Weather",className:"md:pb-11",childrenClassName:"flex flex-col items-center gap-6 2xl:justify-between",children:[me.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[me.jsxs("h2",{className:"text-6xl font-semibold text-center items-center",children:[Math.round(r.current.temp)," C"]}),me.jsx(bT,{className:"size-14",src:r.current.weather[0].icon}),me.jsx("h3",{className:"capitalize text-xl",children:r.current.weather[0].description})]}),me.jsxs("div",{className:"flex flex-col gap-2",children:[me.jsx("p",{className:"text-xl text-center",children:"Local time: "}),me.jsx("h3",{className:"text-4xl font-semibold",children:new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:r.timezone}).format(new Date(r.current.dt*1e3))})]}),me.jsxs("div",{className:"flex justify-between w-full",children:[me.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[me.jsx("p",{className:"text-gray-500",children:"Feels like"}),me.jsxs("p",{children:[r.current.feels_like," C"]})]}),me.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[me.jsx("p",{className:"text-gray-500",children:"Humidity"}),me.jsxs("p",{children:[r.current.humidity," %"]})]}),me.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[me.jsx("p",{className:"text-gray-500",children:"Wind speed"}),me.jsxs("p",{children:[r.current.wind_speed," mph"]})]})]})]})}const WN=e=>de.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},de.createElement("path",{d:"M4 18H2M6.31412 12.3141L4.8999 10.8999M17.6858 12.3141L19.1 10.8999M22 18H20M7 18C7 15.2386 9.23858 13 12 13C14.7614 13 17 15.2386 17 18M22 22H2M16 6L12 2M12 2L8 6M12 2V9",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),XN=e=>de.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},de.createElement("path",{d:"M4 18H2M6.31412 12.3141L4.8999 10.8999M17.6858 12.3141L19.1 10.8999M22 18H20M7 18C7 15.2386 9.23858 13 12 13C14.7614 13 17 15.2386 17 18M22 22H2M16 5L12 9M12 9L8 5M12 9V2",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),YN=e=>de.createElement("svg",{fill:"#000000",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"100%",height:"100%",viewBox:"0 0 560.777 560.777",xmlSpace:"preserve",...e},de.createElement("g",null,de.createElement("path",{d:"M466.254,354.459c-52.122,0-94.526,42.405-94.526,94.519c0,52.122,42.404,94.526,94.526,94.526 s94.522-42.404,94.522-94.526C560.777,396.859,518.376,354.459,466.254,354.459z M482.86,394.727 c2.786-9.077,6.1-20.003,1.891-31.008c31.736,6.88,57.083,31.069,65.628,62.156c-3.784-0.032-7.719,0.01-11.821,0.061 c-17.366,0.201-37.057,0.416-50.105-5.675C477.283,414.8,478.753,408.121,482.86,394.727z M389.383,489.688l-0.191,0.153 c-6.492-12.199-10.193-26.103-10.193-40.869c0-24.092,9.82-45.929,25.665-61.741c3.752,1.036,8.513,1.708,13.524,2.418 c10.711,1.503,24.031,3.379,27.583,9.203c1.194,1.965,1.223,4.485,0.037,7.864c-2.049,6.776-9.353,8.993-17.819,11.564 c-11.826,3.594-26.546,8.07-25.337,28.567c0.583,7.342,6.501,14.175,12.773,21.408c9.572,11.052,15.532,18.893,11.248,26.91 c-1.741,3.355-4.896,5.302-9.376,5.769C407.458,501.977,394.457,495.849,389.383,489.688z M510.97,523.855 c-3.333-4.145-4.63-9.996-4.112-15.271c0.435-4.48,0.934-9.549-0.812-15.35c-2.927-8.396-11.159-13.685-19.121-18.795 c-6.474-4.14-12.573-8.06-14.179-12.647c-1.157-3.552-0.201-4.681,0.107-5.055c4.387-5.189,26.519-1.881,42.676,0.527 c16.008,2.395,29.986,4.476,37.388,1.741C549.744,486.557,533.704,510.228,510.97,523.855z M516.598,450.074 c-21.748-3.248-42.293-6.319-49.298,1.969c-2.576,3.048-3.071,7.08-1.447,12.069c2.465,7.033,9.927,11.817,17.143,16.442 c6.926,4.443,14.09,9.031,16.134,14.911c1.288,4.28,0.9,8.229,0.49,12.41c-0.598,6.146-1.256,13.091,4.821,19.536 c-11.547,5.643-24.498,8.82-38.187,8.82c-26.798,0-50.811-12.152-66.828-31.241c4.999,2.04,10.45,3.328,15.616,3.328 c1.018,0,2.021-0.047,3.011-0.149c6.958-0.732,12.167-4.065,15.056-9.614c6.936-12.993-3.234-24.712-12.19-35.06 c-5.227-6.025-10.632-12.26-11.023-17.156c-0.821-13.986,7.146-17.128,20.208-21.1c9.129-2.772,19.485-5.922,22.612-16.255 c1.881-5.335,1.629-10.016-0.742-13.908c-5.33-8.765-19.914-10.823-32.776-12.624c-2.777-0.393-5.47-0.771-7.878-1.195 c15.009-12.199,34.13-19.531,54.936-19.531c3.281,0,6.511,0.2,9.689,0.555c6.184,9.941,3.038,20.293-0.033,30.312 c-3.705,12.079-7.906,25.768,9.409,34.229c12.073,5.634,28.208,6.455,43.688,6.455c3.258,0,6.482-0.042,9.638-0.07 c4.699-0.056,9.175-0.098,13.403-0.032c0.943,5.134,1.461,10.407,1.461,15.803c0,0.909-0.028,1.815-0.061,2.711 C547.886,453.831,529.984,452.076,516.598,450.074z M252.598,189.903c8.501-53.2-27.867-103.413-81.072-111.921 c-53.203-8.499-103.416,27.867-111.917,81.067c-8.508,53.219,27.865,103.437,81.067,111.936 C193.877,279.492,244.09,243.122,252.598,189.903z M143.568,252.895c-43.235-6.917-72.78-47.707-65.871-90.947 c6.907-43.227,47.695-72.783,90.934-65.867c43.222,6.907,72.781,47.702,65.869,90.934 C227.589,230.259,186.794,259.802,143.568,252.895z M42.068,120.471c0,0,0,0-0.019,0c-0.458-0.07-0.922-0.214-1.36-0.443 l-23.434-11.98c-1.696-0.858-2.604-2.637-2.49-4.406c0.044-0.602,0.205-1.194,0.497-1.754c1.144-2.25,3.909-3.137,6.156-1.993 l23.457,11.985c2.24,1.152,3.139,3.916,1.981,6.165C45.94,119.85,43.982,120.774,42.068,120.471z M82.299,38.857 c-1.146-2.245-0.252-5.012,2.014-6.156c2.254-1.144,5.026-0.257,6.17,2.012l11.922,23.48c1.144,2.254,0.25,5.012-2.016,6.156 c-0.889,0.458-1.874,0.593-2.786,0.443c-1.396-0.219-2.672-1.087-3.365-2.45l-0.014-0.014L82.299,38.857z M242.844,86.686 c-1.783-1.797-1.773-4.695,0.019-6.483l18.628-18.598c1.792-1.792,4.707-1.778,6.485,0.019c1.783,1.783,1.773,4.681-0.023,6.473 L249.324,86.69c-1.081,1.078-2.562,1.503-3.958,1.274C244.431,87.82,243.56,87.4,242.844,86.686z M277.374,154.181 c-0.397-2.506,1.318-4.844,3.808-5.232l26.004-4.098c2.512-0.396,4.85,1.33,5.246,3.822c0.378,2.497-1.32,4.845-3.831,5.236 l-26.005,4.093c-0.483,0.08-0.971,0.075-1.428,0C279.261,157.691,277.684,156.188,277.374,154.181z M141.043,299.985l-4.156,25.995 c-0.396,2.502-2.74,4.201-5.248,3.8c-2.495-0.397-4.2-2.749-3.804-5.251l4.158-25.99c0.401-2.502,2.737-4.201,5.25-3.795 c0.616,0.094,1.195,0.312,1.71,0.63C140.467,296.321,141.339,298.114,141.043,299.985z M69.639,260.422 c0.889,0.887,1.34,2.072,1.33,3.249c0,1.167-0.445,2.348-1.349,3.234l-18.629,18.584c-1.076,1.083-2.562,1.503-3.953,1.283 c-0.936-0.153-1.816-0.573-2.532-1.292c-0.89-0.896-1.34-2.067-1.328-3.244c0-0.583,0.114-1.167,0.348-1.722 c0.21-0.55,0.556-1.064,1.003-1.512l18.629-18.598C64.965,258.612,67.861,258.635,69.639,260.422z M35.126,192.932 c0.38,2.492-1.321,4.845-3.83,5.232v0.005l-26.002,4.079c-0.483,0.075-0.971,0.075-1.428-0.004 c-1.907-0.303-3.505-1.797-3.815-3.808c-0.096-0.63-0.051-1.242,0.096-1.825c0.422-1.727,1.86-3.127,3.734-3.416l26.002-4.088 C32.396,188.713,34.744,190.439,35.126,192.932z M171.44,47.137v-0.019l4.151-25.986c0.401-2.506,2.739-4.205,5.253-3.799 c2.504,0.396,4.195,2.744,3.799,5.246l-4.161,26.01c-0.397,2.497-2.74,4.201-5.248,3.799 C172.745,51.986,171.039,49.639,171.44,47.137z M325.183,415.09c0.187,0.583,0.084,1.223-0.275,1.727 c-0.359,0.499-0.929,0.808-1.545,0.831l-19.952,0.593c-0.098,0-0.2,0-0.289-0.01c-0.957-0.117-1.713-0.91-1.736-1.899 c-0.032-1.092,0.821-2.002,1.914-2.035l14.435-0.425c-18.243-6.193-25.192-21.823-31.932-36.981 c-5.857-13.198-11.927-26.85-25.543-34.284c-6.959-4.094-14.237-6.604-21.268-9.026c-17.954-6.18-34.919-12.018-32.726-42.914 l3.937,0.285c-1.979,27.867,12.167,32.729,30.07,38.896c7.231,2.492,14.692,5.059,21.935,9.324 c14.734,8.042,21.077,22.309,27.202,36.114c6.729,15.153,13.129,29.51,30.145,35.008l-4.358-13.992 c-0.327-1.036,0.256-2.146,1.292-2.474c1.041-0.322,2.147,0.262,2.469,1.298L325.183,415.09z M371.597,367.84 c0.224,0.574,0.168,1.219-0.154,1.746c-0.322,0.522-0.868,0.872-1.484,0.933l-19.854,2.017c-0.149,0.014-0.299,0.014-0.438-0.005 c-0.9-0.107-1.639-0.826-1.727-1.76c-0.112-1.087,0.676-2.053,1.759-2.16l13.922-1.414c-2.529-1.783-5.399-2.997-8.392-4.267 c-5.357-2.268-10.902-4.615-14.743-10.463c-2.328-3.505-3.267-6.968-4.247-10.646c-0.471-1.746-0.961-3.585-1.643-5.517 c-2.482-7.075-4.635-7.444-10.375-8.438c-1.979-0.336-4.224-0.728-6.921-1.461c-13.609-3.724-15.317-9.343-17.292-15.854 c-1.04-3.454-2.23-7.365-5.53-11.757c-3.785-4.97-9.191-6.179-14.911-7.453c-6.926-1.549-14.081-3.146-18.071-11.588 c-2.049-4.2-3.12-8.209-4.056-11.738c-2.371-8.956-3.565-13.45-17.574-11.686l-0.497-3.92c17.429-2.18,19.499,5.586,21.889,14.594 c0.894,3.356,1.902,7.164,3.794,11.038c3.178,6.725,8.833,7.985,15.378,9.446c5.864,1.315,12.526,2.805,17.193,8.923 c3.729,4.966,5.083,9.423,6.165,13.003c1.844,6.048,3.053,10.043,14.548,13.188c2.516,0.677,4.662,1.051,6.553,1.382 c6.132,1.06,10.179,1.76,13.44,11.015c0.71,2.034,1.228,3.962,1.723,5.801c0.938,3.5,1.75,6.516,3.729,9.493 c3.188,4.858,7.953,6.87,12.989,9.007c3.066,1.298,6.193,2.638,9.063,4.645l-5.54-14.128c-0.396-1.013,0.107-2.16,1.12-2.553 c1.013-0.406,2.161,0.103,2.558,1.111L371.597,367.84z M275.107,214.746l-1.419-3.785l0.917-0.35 c0.151-0.056,3.78-1.405,7.756-0.924c1.988,0.233,3.741,0.887,5.213,1.928c3.104,2.226,4.807,6.044,5.068,11.364h0.056l0.065,0.994 c-0.103,5.026,1.046,8.429,3.407,10.118c0.919,0.653,2.044,1.06,3.355,1.213c1.815,0.215,3.604-0.098,4.635-0.34l0.131-0.056 c0.382-0.145,3.883-1.396,7.752-0.924c1.988,0.233,3.742,0.887,5.213,1.928c3.108,2.222,4.807,6.044,5.068,11.359h0.056 l0.065,1.003c-0.103,5.017,1.051,8.424,3.416,10.114c0.91,0.653,2.04,1.06,3.352,1.213c1.815,0.215,3.607-0.098,4.639-0.341 l0.117-0.056c0.154-0.056,3.78-1.404,7.757-0.924c1.987,0.233,3.747,0.887,5.218,1.928c3.107,2.226,4.807,6.048,5.068,11.383h0.051 l0.061,0.98c-0.088,5.027,1.051,8.429,3.417,10.114c0.919,0.653,2.044,1.06,3.355,1.208c1.815,0.215,3.603-0.098,4.634-0.34 l0.122-0.052c0.153-0.056,3.78-1.404,7.757-0.924c1.988,0.233,3.742,0.887,5.213,1.928c3.108,2.226,4.807,6.048,5.073,11.369h0.051 l0.065,0.993c-0.098,5.022,1.046,8.425,3.412,10.114c0.91,0.653,2.044,1.06,3.351,1.209c1.807,0.214,3.594-0.094,4.63-0.341 l0.135-0.057c0.388-0.14,3.889-1.395,7.748-0.929c1.992,0.233,3.747,0.887,5.218,1.933c3.108,2.227,4.812,6.049,5.073,11.388h0.047 l0.064,0.976c-0.023,1.357,0.075,2.558,0.243,3.658l3.271-13.361c0.257-1.055,1.325-1.708,2.385-1.451 c1.06,0.261,1.713,1.33,1.447,2.39l-4.971,20.302c-0.149,0.597-0.564,1.097-1.13,1.339c-0.569,0.247-1.218,0.22-1.754-0.084 l-17.395-9.786c-0.089-0.052-0.173-0.107-0.248-0.164c-0.756-0.593-0.993-1.661-0.508-2.524c0.536-0.952,1.745-1.284,2.692-0.752 l12.587,7.085l0.104,0.051c-0.388-1.395-0.631-2.936-0.719-4.652l-0.047,0.004l-0.07-0.998c0.098-5.036-1.045-8.447-3.412-10.118 c-2.128-1.508-5.898-1.368-7.989-0.863l-0.117,0.046c-0.153,0.057-3.78,1.405-7.761,0.929c-1.984-0.237-3.743-0.891-5.214-1.932 c-0.191-0.14-0.378-0.275-0.56-0.42c-2.758-2.264-4.275-5.946-4.518-10.958h-0.047l-0.07-0.98 c0.103-5.036-1.045-8.443-3.406-10.113c-0.915-0.649-2.049-1.06-3.36-1.214c-1.815-0.215-3.612,0.098-4.645,0.35l-0.106,0.052 c-0.154,0.056-3.781,1.4-7.757,0.929c-1.983-0.243-3.743-0.892-5.218-1.932c-0.196-0.14-0.393-0.294-0.565-0.434 c-2.744-2.25-4.261-5.918-4.503-10.93h-0.047l-0.075-0.999c0.103-5.036-1.04-8.443-3.402-10.119 c-2.138-1.512-5.899-1.367-7.989-0.868l-0.136,0.051c-0.383,0.145-3.883,1.391-7.747,0.924c-1.984-0.238-3.743-0.887-5.218-1.927 c-0.201-0.145-0.388-0.29-0.565-0.434c-2.753-2.259-4.266-5.937-4.508-10.954h-0.047l-0.074-0.98 c0.106-5.04-1.041-8.442-3.402-10.113c-0.915-0.649-2.045-1.055-3.361-1.213c-1.811-0.215-3.607,0.098-4.634,0.345l-0.126,0.051 c-0.388,0.145-3.883,1.391-7.752,0.929c-1.979-0.243-3.738-0.891-5.213-1.932c-0.201-0.145-0.393-0.294-0.574-0.434 c-2.74-2.25-4.257-5.932-4.494-10.949l-0.047-0.005l-0.08-0.98c0.107-5.041-1.04-8.443-3.399-10.114 c-0.919-0.648-2.047-1.055-3.355-1.213c-2.969-0.354-5.82,0.686-5.851,0.691L275.107,214.746z"}))),KN=e=>de.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},de.createElement("path",{d:"M11.0947 8.02658C11.5476 5.73111 13.5717 4 16 4C18.7614 4 21 6.23858 21 9C21 11.0345 19.7849 12.7852 18.0408 13.5659M11.0947 8.02658C9.24194 8.21766 7.68947 9.4193 7 11C4.6 11.375 3 13.3144 3 15.4137C3 17.9466 5.14903 20 7.8 20L15 20C17.2091 20 19 18.2719 19 16.1402C19 15.1829 18.6388 14.2698 18.0408 13.5659M11.0947 8.02658C11.265 8.00902 11.4378 8 11.6127 8C14.2747 8 16.4504 9.99072 16.6 12.5C17.1583 12.7354 17.6501 13.106 18.0408 13.5659",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),JN=e=>de.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},de.createElement("path",{d:"M21.9999 13.8509C21.8699 13.8509 21.7399 13.8209 21.6199 13.7409L19.1199 12.2409C17.8199 11.4609 16.1999 11.4609 14.8899 12.2409C13.1099 13.3109 10.8999 13.3109 9.11988 12.2409C7.81988 11.4609 6.19988 11.4609 4.88988 12.2409L2.38988 13.7409C2.02988 13.9509 1.56988 13.8409 1.35988 13.4809C1.14988 13.1309 1.25988 12.6609 1.61988 12.4509L4.11988 10.9509C5.89988 9.88094 8.10988 9.88094 9.88988 10.9509C11.1899 11.7309 12.8099 11.7309 14.1199 10.9509C15.8999 9.88094 18.1099 9.88094 19.8899 10.9509L22.3899 12.4509C22.7499 12.6609 22.8599 13.1209 22.6499 13.4809C22.4999 13.7209 22.2499 13.8509 21.9999 13.8509Z",fill:"#292D32"}),de.createElement("path",{d:"M7.00082 6.84832C6.00082 6.84832 5.00082 6.57832 4.11082 6.04832L1.61082 4.54832C1.26082 4.32832 1.14082 3.86832 1.36082 3.51832C1.57082 3.15832 2.03082 3.04832 2.39082 3.25832L4.89082 4.75832C6.19082 5.53832 7.81082 5.53832 9.12082 4.75832C10.9008 3.68832 13.1108 3.68832 14.8908 4.75832C16.1908 5.53832 17.8108 5.53832 19.1208 4.75832L21.6208 3.25832C21.9808 3.04832 22.4408 3.15832 22.6508 3.51832C22.8608 3.86832 22.7508 4.33832 22.3908 4.54832L19.8908 6.04832C18.1108 7.11832 15.9008 7.11832 14.1208 6.04832C12.8208 5.26832 11.2008 5.26832 9.89082 6.04832C9.00082 6.57832 8.00082 6.84832 7.00082 6.84832Z",fill:"#292D32"}),de.createElement("path",{d:"M21.9999 20.8509C21.8699 20.8509 21.7399 20.8209 21.6199 20.7409L19.1199 19.2409C17.8199 18.4609 16.1999 18.4609 14.8899 19.2409C13.1099 20.3109 10.8999 20.3109 9.11988 19.2409C7.81988 18.4609 6.19988 18.4609 4.88988 19.2409L2.38988 20.7409C2.02988 20.9509 1.56988 20.8409 1.35988 20.4809C1.14988 20.1309 1.25988 19.6609 1.61988 19.4509L4.11988 17.9509C5.89988 16.8809 8.10988 16.8809 9.88988 17.9509C11.1899 18.7309 12.8099 18.7309 14.1199 17.9509C15.8999 16.8809 18.1099 16.8809 19.8899 17.9509L22.3899 19.4509C22.7499 19.6609 22.8599 20.1209 22.6499 20.4809C22.4999 20.7209 22.2499 20.8509 21.9999 20.8509Z",fill:"#292D32"})),QN=e=>de.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},de.createElement("path",{d:"M12 9C11.4477 9 11 9.44771 11 10V15.2676C10.4022 15.6134 10 16.2597 10 17C10 18.1046 10.8954 19 12 19C13.1046 19 14 18.1046 14 17C14 16.2597 13.5978 15.6134 13 15.2676V10C13 9.44771 12.5523 9 12 9Z",fill:"#0F0F0F"}),de.createElement("path",{d:"M11 6C11 5.44772 11.4477 5 12 5C12.5523 5 13 5.44772 13 6C13 6.55228 12.5523 7 12 7C11.4477 7 11 6.55228 11 6Z",fill:"#0F0F0F"}),de.createElement("path",{d:"M16 7C15.4477 7 15 7.44772 15 8C15 8.55229 15.4477 9 16 9C16.5523 9 17 8.55229 17 8C17 7.44772 16.5523 7 16 7Z",fill:"#0F0F0F"}),de.createElement("path",{d:"M6 13C5.44772 13 5 12.5523 5 12C5 11.4477 5.44772 11 6 11C6.55228 11 7 11.4477 7 12C7 12.5523 6.55228 13 6 13Z",fill:"#0F0F0F"}),de.createElement("path",{d:"M7 8C7 8.55229 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7C7.44772 7 7 7.44772 7 8Z",fill:"#0F0F0F"}),de.createElement("path",{d:"M18 13C17.4477 13 17 12.5523 17 12C17 11.4477 17.4477 11 18 11C18.5523 11 19 11.4477 19 12C19 12.5523 18.5523 13 18 13Z",fill:"#0F0F0F"}),de.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM12 20.9932C7.03321 20.9932 3.00683 16.9668 3.00683 12C3.00683 7.03321 7.03321 3.00683 12 3.00683C16.9668 3.00683 20.9932 7.03321 20.9932 12C20.9932 16.9668 16.9668 20.9932 12 20.9932Z",fill:"#0F0F0F"})),e$=e=>de.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},de.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3C12.2652 3 12.5196 3.10536 12.7071 3.29289L19.7071 10.2929C20.0976 10.6834 20.0976 11.3166 19.7071 11.7071C19.3166 12.0976 18.6834 12.0976 18.2929 11.7071L13 6.41421V20C13 20.5523 12.5523 21 12 21C11.4477 21 11 20.5523 11 20V6.41421L5.70711 11.7071C5.31658 12.0976 4.68342 12.0976 4.29289 11.7071C3.90237 11.3166 3.90237 10.6834 4.29289 10.2929L11.2929 3.29289C11.4804 3.10536 11.7348 3 12 3Z",fill:"#000000"}));function t$({coords:{lat:e,lon:t}}){const{data:r}=_v({queryKey:["weather",e,t],queryFn:()=>Xx({lat:e,lon:t})});return me.jsx(gd,{childrenClassName:"grid grid-cols-1 md:grid-cols-2 gap-8",title:"Additional weather info",children:i$.map(({label:u,value:a,Icon:f})=>me.jsxs("div",{className:"flex justify-between",children:[me.jsxs("div",{className:"flex",children:[me.jsx("span",{className:"text-gray-500 ",children:u}),me.jsx(f,{className:"size-8  mx-4"})]}),me.jsx("span",{children:me.jsx(n$,{value:a,number:r.current[a]})})]},a))})}function n$({value:e,number:t}){return e==="sunrise"||e==="sunset"?new Date(t*1e3).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit",hour12:!1}):e==="wind_deg"?me.jsx(e$,{className:" size-8",style:{transform:`rotate(${t}deg)`}}):t}const i$=[{label:"Cloudiness (%)",value:"clouds",Icon:KN},{label:"UV index",value:"uvi",Icon:YN},{label:"Wind direction",value:"wind_deg",Icon:JN},{label:"Pressure (hPa)",value:"pressure",Icon:QN},{label:"Sunrise",value:"sunrise",Icon:WN},{label:"Sunset",value:"sunset",Icon:XN}];function r$(e,t){const r=de.useRef(t);de.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}var Fv=oM();const a$=gv(Fv),o$=1;function s$(e){return Object.freeze({__version:o$,map:e})}function l$(e,t){return Object.freeze({...e,...t})}const xT=de.createContext(null);function p4(){const e=de.use(xT);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function c$(e){function t(r,u){const{instance:a,context:f}=e(r).current;de.useImperativeHandle(u,()=>a);const{children:m}=r;return m==null?null:uh.createElement(xT,{value:f},m)}return de.forwardRef(t)}function u$(e){function t(r,u){const{instance:a}=e(r).current;return de.useImperativeHandle(u,()=>a),null}return de.forwardRef(t)}function h$(e,t){const r=de.useRef(void 0);de.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function m4(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}var B_={exports:{}};var d$=B_.exports,pA;function f$(){return pA||(pA=1,(function(e,t){(function(r,u){u(t)})(d$,(function(r){var u="1.9.4";function a(g){var T,P,U,K;for(P=1,U=arguments.length;P<U;P++){K=arguments[P];for(T in K)g[T]=K[T]}return g}var f=Object.create||(function(){function g(){}return function(T){return g.prototype=T,new g}})();function m(g,T){var P=Array.prototype.slice;if(g.bind)return g.bind.apply(g,P.call(arguments,1));var U=P.call(arguments,2);return function(){return g.apply(T,U.length?U.concat(P.call(arguments)):arguments)}}var c=0;function z(g){return"_leaflet_id"in g||(g._leaflet_id=++c),g._leaflet_id}function k(g,T,P){var U,K,he,De;return De=function(){U=!1,K&&(he.apply(P,K),K=!1)},he=function(){U?K=arguments:(g.apply(P,arguments),setTimeout(De,T),U=!0)},he}function B(g,T,P){var U=T[1],K=T[0],he=U-K;return g===U&&P?g:((g-K)%he+he)%he+K}function Z(){return!1}function X(g,T){if(T===!1)return g;var P=Math.pow(10,T===void 0?6:T);return Math.round(g*P)/P}function J(g){return g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")}function ce(g){return J(g).split(/\s+/)}function ee(g,T){Object.prototype.hasOwnProperty.call(g,"options")||(g.options=g.options?f(g.options):{});for(var P in T)g.options[P]=T[P];return g.options}function ae(g,T,P){var U=[];for(var K in g)U.push(encodeURIComponent(P?K.toUpperCase():K)+"="+encodeURIComponent(g[K]));return(!T||T.indexOf("?")===-1?"?":"&")+U.join("&")}var Me=/\{ *([\w_ -]+) *\}/g;function Ae(g,T){return g.replace(Me,function(P,U){var K=T[U];if(K===void 0)throw new Error("No value provided for variable "+P);return typeof K=="function"&&(K=K(T)),K})}var we=Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"};function xe(g,T){for(var P=0;P<g.length;P++)if(g[P]===T)return P;return-1}var Se="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Fe(g){return window["webkit"+g]||window["moz"+g]||window["ms"+g]}var Ue=0;function it(g){var T=+new Date,P=Math.max(0,16-(T-Ue));return Ue=T+P,window.setTimeout(g,P)}var Rt=window.requestAnimationFrame||Fe("RequestAnimationFrame")||it,Pt=window.cancelAnimationFrame||Fe("CancelAnimationFrame")||Fe("CancelRequestAnimationFrame")||function(g){window.clearTimeout(g)};function $t(g,T,P){if(P&&Rt===it)g.call(T);else return Rt.call(window,m(g,T))}function Zt(g){g&&Pt.call(window,g)}var cn={__proto__:null,extend:a,create:f,bind:m,get lastId(){return c},stamp:z,throttle:k,wrapNum:B,falseFn:Z,formatNum:X,trim:J,splitWords:ce,setOptions:ee,getParamString:ae,template:Ae,isArray:we,indexOf:xe,emptyImageUrl:Se,requestFn:Rt,cancelFn:Pt,requestAnimFrame:$t,cancelAnimFrame:Zt};function ln(){}ln.extend=function(g){var T=function(){ee(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=T.__super__=this.prototype,U=f(P);U.constructor=T,T.prototype=U;for(var K in this)Object.prototype.hasOwnProperty.call(this,K)&&K!=="prototype"&&K!=="__super__"&&(T[K]=this[K]);return g.statics&&a(T,g.statics),g.includes&&(xn(g.includes),a.apply(null,[U].concat(g.includes))),a(U,g),delete U.statics,delete U.includes,U.options&&(U.options=P.options?f(P.options):{},a(U.options,g.options)),U._initHooks=[],U.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var he=0,De=U._initHooks.length;he<De;he++)U._initHooks[he].call(this)}},T},ln.include=function(g){var T=this.prototype.options;return a(this.prototype,g),g.options&&(this.prototype.options=T,this.mergeOptions(g.options)),this},ln.mergeOptions=function(g){return a(this.prototype.options,g),this},ln.addInitHook=function(g){var T=Array.prototype.slice.call(arguments,1),P=typeof g=="function"?g:function(){this[g].apply(this,T)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function xn(g){if(!(typeof L>"u"||!L||!L.Mixin)){g=we(g)?g:[g];for(var T=0;T<g.length;T++)g[T]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ge={on:function(g,T,P){if(typeof g=="object")for(var U in g)this._on(U,g[U],T);else{g=ce(g);for(var K=0,he=g.length;K<he;K++)this._on(g[K],T,P)}return this},off:function(g,T,P){if(!arguments.length)delete this._events;else if(typeof g=="object")for(var U in g)this._off(U,g[U],T);else{g=ce(g);for(var K=arguments.length===1,he=0,De=g.length;he<De;he++)K?this._off(g[he]):this._off(g[he],T,P)}return this},_on:function(g,T,P,U){if(typeof T!="function"){console.warn("wrong listener type: "+typeof T);return}if(this._listens(g,T,P)===!1){P===this&&(P=void 0);var K={fn:T,ctx:P};U&&(K.once=!0),this._events=this._events||{},this._events[g]=this._events[g]||[],this._events[g].push(K)}},_off:function(g,T,P){var U,K,he;if(this._events&&(U=this._events[g],!!U)){if(arguments.length===1){if(this._firingCount)for(K=0,he=U.length;K<he;K++)U[K].fn=Z;delete this._events[g];return}if(typeof T!="function"){console.warn("wrong listener type: "+typeof T);return}var De=this._listens(g,T,P);if(De!==!1){var We=U[De];this._firingCount&&(We.fn=Z,this._events[g]=U=U.slice()),U.splice(De,1)}}},fire:function(g,T,P){if(!this.listens(g,P))return this;var U=a({},T,{type:g,target:this,sourceTarget:T&&T.sourceTarget||this});if(this._events){var K=this._events[g];if(K){this._firingCount=this._firingCount+1||1;for(var he=0,De=K.length;he<De;he++){var We=K[he],ht=We.fn;We.once&&this.off(g,ht,We.ctx),ht.call(We.ctx||this,U)}this._firingCount--}}return P&&this._propagateEvent(U),this},listens:function(g,T,P,U){typeof g!="string"&&console.warn('"string" type argument expected');var K=T;typeof T!="function"&&(U=!!T,K=void 0,P=void 0);var he=this._events&&this._events[g];if(he&&he.length&&this._listens(g,K,P)!==!1)return!0;if(U){for(var De in this._eventParents)if(this._eventParents[De].listens(g,T,P,U))return!0}return!1},_listens:function(g,T,P){if(!this._events)return!1;var U=this._events[g]||[];if(!T)return!!U.length;P===this&&(P=void 0);for(var K=0,he=U.length;K<he;K++)if(U[K].fn===T&&U[K].ctx===P)return K;return!1},once:function(g,T,P){if(typeof g=="object")for(var U in g)this._on(U,g[U],T,!0);else{g=ce(g);for(var K=0,he=g.length;K<he;K++)this._on(g[K],T,P,!0)}return this},addEventParent:function(g){return this._eventParents=this._eventParents||{},this._eventParents[z(g)]=g,this},removeEventParent:function(g){return this._eventParents&&delete this._eventParents[z(g)],this},_propagateEvent:function(g){for(var T in this._eventParents)this._eventParents[T].fire(g.type,a({layer:g.target,propagatedFrom:g.target},g),!0)}};Ge.addEventListener=Ge.on,Ge.removeEventListener=Ge.clearAllEventListeners=Ge.off,Ge.addOneTimeEventListener=Ge.once,Ge.fireEvent=Ge.fire,Ge.hasEventListeners=Ge.listens;var mt=ln.extend(Ge);function qe(g,T,P){this.x=P?Math.round(g):g,this.y=P?Math.round(T):T}var Bt=Math.trunc||function(g){return g>0?Math.floor(g):Math.ceil(g)};qe.prototype={clone:function(){return new qe(this.x,this.y)},add:function(g){return this.clone()._add(jt(g))},_add:function(g){return this.x+=g.x,this.y+=g.y,this},subtract:function(g){return this.clone()._subtract(jt(g))},_subtract:function(g){return this.x-=g.x,this.y-=g.y,this},divideBy:function(g){return this.clone()._divideBy(g)},_divideBy:function(g){return this.x/=g,this.y/=g,this},multiplyBy:function(g){return this.clone()._multiplyBy(g)},_multiplyBy:function(g){return this.x*=g,this.y*=g,this},scaleBy:function(g){return new qe(this.x*g.x,this.y*g.y)},unscaleBy:function(g){return new qe(this.x/g.x,this.y/g.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Bt(this.x),this.y=Bt(this.y),this},distanceTo:function(g){g=jt(g);var T=g.x-this.x,P=g.y-this.y;return Math.sqrt(T*T+P*P)},equals:function(g){return g=jt(g),g.x===this.x&&g.y===this.y},contains:function(g){return g=jt(g),Math.abs(g.x)<=Math.abs(this.x)&&Math.abs(g.y)<=Math.abs(this.y)},toString:function(){return"Point("+X(this.x)+", "+X(this.y)+")"}};function jt(g,T,P){return g instanceof qe?g:we(g)?new qe(g[0],g[1]):g==null?g:typeof g=="object"&&"x"in g&&"y"in g?new qe(g.x,g.y):new qe(g,T,P)}function Oe(g,T){if(g)for(var P=T?[g,T]:g,U=0,K=P.length;U<K;U++)this.extend(P[U])}Oe.prototype={extend:function(g){var T,P;if(!g)return this;if(g instanceof qe||typeof g[0]=="number"||"x"in g)T=P=jt(g);else if(g=pt(g),T=g.min,P=g.max,!T||!P)return this;return!this.min&&!this.max?(this.min=T.clone(),this.max=P.clone()):(this.min.x=Math.min(T.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(T.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(g){return jt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,g)},getBottomLeft:function(){return jt(this.min.x,this.max.y)},getTopRight:function(){return jt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(g){var T,P;return typeof g[0]=="number"||g instanceof qe?g=jt(g):g=pt(g),g instanceof Oe?(T=g.min,P=g.max):T=P=g,T.x>=this.min.x&&P.x<=this.max.x&&T.y>=this.min.y&&P.y<=this.max.y},intersects:function(g){g=pt(g);var T=this.min,P=this.max,U=g.min,K=g.max,he=K.x>=T.x&&U.x<=P.x,De=K.y>=T.y&&U.y<=P.y;return he&&De},overlaps:function(g){g=pt(g);var T=this.min,P=this.max,U=g.min,K=g.max,he=K.x>T.x&&U.x<P.x,De=K.y>T.y&&U.y<P.y;return he&&De},isValid:function(){return!!(this.min&&this.max)},pad:function(g){var T=this.min,P=this.max,U=Math.abs(T.x-P.x)*g,K=Math.abs(T.y-P.y)*g;return pt(jt(T.x-U,T.y-K),jt(P.x+U,P.y+K))},equals:function(g){return g?(g=pt(g),this.min.equals(g.getTopLeft())&&this.max.equals(g.getBottomRight())):!1}};function pt(g,T){return!g||g instanceof Oe?g:new Oe(g,T)}function Mt(g,T){if(g)for(var P=T?[g,T]:g,U=0,K=P.length;U<K;U++)this.extend(P[U])}Mt.prototype={extend:function(g){var T=this._southWest,P=this._northEast,U,K;if(g instanceof Nt)U=g,K=g;else if(g instanceof Mt){if(U=g._southWest,K=g._northEast,!U||!K)return this}else return g?this.extend(Ft(g)||It(g)):this;return!T&&!P?(this._southWest=new Nt(U.lat,U.lng),this._northEast=new Nt(K.lat,K.lng)):(T.lat=Math.min(U.lat,T.lat),T.lng=Math.min(U.lng,T.lng),P.lat=Math.max(K.lat,P.lat),P.lng=Math.max(K.lng,P.lng)),this},pad:function(g){var T=this._southWest,P=this._northEast,U=Math.abs(T.lat-P.lat)*g,K=Math.abs(T.lng-P.lng)*g;return new Mt(new Nt(T.lat-U,T.lng-K),new Nt(P.lat+U,P.lng+K))},getCenter:function(){return new Nt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Nt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Nt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(g){typeof g[0]=="number"||g instanceof Nt||"lat"in g?g=Ft(g):g=It(g);var T=this._southWest,P=this._northEast,U,K;return g instanceof Mt?(U=g.getSouthWest(),K=g.getNorthEast()):U=K=g,U.lat>=T.lat&&K.lat<=P.lat&&U.lng>=T.lng&&K.lng<=P.lng},intersects:function(g){g=It(g);var T=this._southWest,P=this._northEast,U=g.getSouthWest(),K=g.getNorthEast(),he=K.lat>=T.lat&&U.lat<=P.lat,De=K.lng>=T.lng&&U.lng<=P.lng;return he&&De},overlaps:function(g){g=It(g);var T=this._southWest,P=this._northEast,U=g.getSouthWest(),K=g.getNorthEast(),he=K.lat>T.lat&&U.lat<P.lat,De=K.lng>T.lng&&U.lng<P.lng;return he&&De},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(g,T){return g?(g=It(g),this._southWest.equals(g.getSouthWest(),T)&&this._northEast.equals(g.getNorthEast(),T)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function It(g,T){return g instanceof Mt?g:new Mt(g,T)}function Nt(g,T,P){if(isNaN(g)||isNaN(T))throw new Error("Invalid LatLng object: ("+g+", "+T+")");this.lat=+g,this.lng=+T,P!==void 0&&(this.alt=+P)}Nt.prototype={equals:function(g,T){if(!g)return!1;g=Ft(g);var P=Math.max(Math.abs(this.lat-g.lat),Math.abs(this.lng-g.lng));return P<=(T===void 0?1e-9:T)},toString:function(g){return"LatLng("+X(this.lat,g)+", "+X(this.lng,g)+")"},distanceTo:function(g){return un.distance(this,Ft(g))},wrap:function(){return un.wrapLatLng(this)},toBounds:function(g){var T=180*g/40075017,P=T/Math.cos(Math.PI/180*this.lat);return It([this.lat-T,this.lng-P],[this.lat+T,this.lng+P])},clone:function(){return new Nt(this.lat,this.lng,this.alt)}};function Ft(g,T,P){return g instanceof Nt?g:we(g)&&typeof g[0]!="object"?g.length===3?new Nt(g[0],g[1],g[2]):g.length===2?new Nt(g[0],g[1]):null:g==null?g:typeof g=="object"&&"lat"in g?new Nt(g.lat,"lng"in g?g.lng:g.lon,g.alt):T===void 0?null:new Nt(g,T,P)}var At={latLngToPoint:function(g,T){var P=this.projection.project(g),U=this.scale(T);return this.transformation._transform(P,U)},pointToLatLng:function(g,T){var P=this.scale(T),U=this.transformation.untransform(g,P);return this.projection.unproject(U)},project:function(g){return this.projection.project(g)},unproject:function(g){return this.projection.unproject(g)},scale:function(g){return 256*Math.pow(2,g)},zoom:function(g){return Math.log(g/256)/Math.LN2},getProjectedBounds:function(g){if(this.infinite)return null;var T=this.projection.bounds,P=this.scale(g),U=this.transformation.transform(T.min,P),K=this.transformation.transform(T.max,P);return new Oe(U,K)},infinite:!1,wrapLatLng:function(g){var T=this.wrapLng?B(g.lng,this.wrapLng,!0):g.lng,P=this.wrapLat?B(g.lat,this.wrapLat,!0):g.lat,U=g.alt;return new Nt(P,T,U)},wrapLatLngBounds:function(g){var T=g.getCenter(),P=this.wrapLatLng(T),U=T.lat-P.lat,K=T.lng-P.lng;if(U===0&&K===0)return g;var he=g.getSouthWest(),De=g.getNorthEast(),We=new Nt(he.lat-U,he.lng-K),ht=new Nt(De.lat-U,De.lng-K);return new Mt(We,ht)}},un=a({},At,{wrapLng:[-180,180],R:6371e3,distance:function(g,T){var P=Math.PI/180,U=g.lat*P,K=T.lat*P,he=Math.sin((T.lat-g.lat)*P/2),De=Math.sin((T.lng-g.lng)*P/2),We=he*he+Math.cos(U)*Math.cos(K)*De*De,ht=2*Math.atan2(Math.sqrt(We),Math.sqrt(1-We));return this.R*ht}}),Cn=6378137,Dn={R:Cn,MAX_LATITUDE:85.0511287798,project:function(g){var T=Math.PI/180,P=this.MAX_LATITUDE,U=Math.max(Math.min(P,g.lat),-P),K=Math.sin(U*T);return new qe(this.R*g.lng*T,this.R*Math.log((1+K)/(1-K))/2)},unproject:function(g){var T=180/Math.PI;return new Nt((2*Math.atan(Math.exp(g.y/this.R))-Math.PI/2)*T,g.x*T/this.R)},bounds:(function(){var g=Cn*Math.PI;return new Oe([-g,-g],[g,g])})()};function Wn(g,T,P,U){if(we(g)){this._a=g[0],this._b=g[1],this._c=g[2],this._d=g[3];return}this._a=g,this._b=T,this._c=P,this._d=U}Wn.prototype={transform:function(g,T){return this._transform(g.clone(),T)},_transform:function(g,T){return T=T||1,g.x=T*(this._a*g.x+this._b),g.y=T*(this._c*g.y+this._d),g},untransform:function(g,T){return T=T||1,new qe((g.x/T-this._b)/this._a,(g.y/T-this._d)/this._c)}};function Bn(g,T,P,U){return new Wn(g,T,P,U)}var Cr=a({},un,{code:"EPSG:3857",projection:Dn,transformation:(function(){var g=.5/(Math.PI*Dn.R);return Bn(g,.5,-g,.5)})()}),bi=a({},Cr,{code:"EPSG:900913"});function qr(g){return document.createElementNS("http://www.w3.org/2000/svg",g)}function da(g,T){var P="",U,K,he,De,We,ht;for(U=0,he=g.length;U<he;U++){for(We=g[U],K=0,De=We.length;K<De;K++)ht=We[K],P+=(K?"L":"M")+ht.x+" "+ht.y;P+=T?ot.svg?"z":"x":""}return P||"M0 0"}var Pi=document.documentElement.style,Ao="ActiveXObject"in window,Fs=Ao&&!document.addEventListener,Us="msLaunchUri"in navigator&&!("documentMode"in document),Co=Ta("webkit"),Mo=Ta("android"),Kl=Ta("android 2")||Ta("android 3"),na=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Xa=Mo&&Ta("Google")&&na<537&&!("AudioNode"in window),Xe=!!window.opera,se=!Us&&Ta("chrome"),oe=Ta("gecko")&&!Co&&!Xe&&!Ao,ge=!se&&Ta("safari"),Re=Ta("phantom"),$e="OTransition"in Pi,et=navigator.platform.indexOf("Win")===0,He=Ao&&"transition"in Pi,Be="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Kl,tt="MozPerspective"in Pi,vt=!window.L_DISABLE_3D&&(He||Be||tt)&&!$e&&!Re,_t=typeof orientation<"u"||Ta("mobile"),Xt=_t&&Co,an=_t&&Be,Sn=!window.PointerEvent&&window.MSPointerEvent,pi=!!(window.PointerEvent||Sn),ti="ontouchstart"in window||!!window.TouchEvent,Ke=!window.L_NO_TOUCH&&(ti||pi),Ei=_t&&Xe,Mr=_t&&oe,Mn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ai=(function(){var g=!1;try{var T=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("testPassiveEventSupport",Z,T),window.removeEventListener("testPassiveEventSupport",Z,T)}catch{}return g})(),Gr=(function(){return!!document.createElement("canvas").getContext})(),xi=!!(document.createElementNS&&qr("svg").createSVGRect),hr=!!xi&&(function(){var g=document.createElement("div");return g.innerHTML="<svg/>",(g.firstChild&&g.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Di=!xi&&(function(){try{var g=document.createElement("div");g.innerHTML='<v:shape adj="1"/>';var T=g.firstChild;return T.style.behavior="url(#default#VML)",T&&typeof T.adj=="object"}catch{return!1}})(),zr=navigator.platform.indexOf("Mac")===0,qc=navigator.platform.indexOf("Linux")===0;function Ta(g){return navigator.userAgent.toLowerCase().indexOf(g)>=0}var ot={ie:Ao,ielt9:Fs,edge:Us,webkit:Co,android:Mo,android23:Kl,androidStock:Xa,opera:Xe,chrome:se,gecko:oe,safari:ge,phantom:Re,opera12:$e,win:et,ie3d:He,webkit3d:Be,gecko3d:tt,any3d:vt,mobile:_t,mobileWebkit:Xt,mobileWebkit3d:an,msPointer:Sn,pointer:pi,touch:Ke,touchNative:ti,mobileOpera:Ei,mobileGecko:Mr,retina:Mn,passiveEvents:Ai,canvas:Gr,svg:xi,vml:Di,inlineSvg:hr,mac:zr,linux:qc},fa=ot.msPointer?"MSPointerDown":"pointerdown",pa=ot.msPointer?"MSPointerMove":"pointermove",zo=ot.msPointer?"MSPointerUp":"pointerup",Li=ot.msPointer?"MSPointerCancel":"pointercancel",Lt={touchstart:fa,touchmove:pa,touchend:zo,touchcancel:Li},zn={touchstart:ms,touchmove:_o,touchend:_o,touchcancel:_o},En={},Ya=!1;function xh(g,T,P){return T==="touchstart"&&Vs(),zn[T]?(P=zn[T].bind(this,P),g.addEventListener(Lt[T],P,!1),P):(console.warn("wrong event specified:",T),Z)}function ps(g,T,P){if(!Lt[T]){console.warn("wrong event specified:",T);return}g.removeEventListener(Lt[T],P,!1)}function In(g){En[g.pointerId]=g}function Jl(g){En[g.pointerId]&&(En[g.pointerId]=g)}function Zo(g){delete En[g.pointerId]}function Vs(){Ya||(document.addEventListener(fa,In,!0),document.addEventListener(pa,Jl,!0),document.addEventListener(zo,Zo,!0),document.addEventListener(Li,Zo,!0),Ya=!0)}function _o(g,T){if(T.pointerType!==(T.MSPOINTER_TYPE_MOUSE||"mouse")){T.touches=[];for(var P in En)T.touches.push(En[P]);T.changedTouches=[T],g(T)}}function ms(g,T){T.MSPOINTER_TYPE_TOUCH&&T.pointerType===T.MSPOINTER_TYPE_TOUCH&&Un(T),_o(g,T)}function dr(g){var T={},P,U;for(U in g)P=g[U],T[U]=P&&P.bind?P.bind(g):P;return g=T,T.type="dblclick",T.detail=2,T.isTrusted=!1,T._simulated=!0,T}var Gc=200;function Ea(g,T){g.addEventListener("dblclick",T);var P=0,U;function K(he){if(he.detail!==1){U=he.detail;return}if(!(he.pointerType==="mouse"||he.sourceCapabilities&&!he.sourceCapabilities.firesTouchEvents)){var De=to(he);if(!(De.some(function(ht){return ht instanceof HTMLLabelElement&&ht.attributes.for})&&!De.some(function(ht){return ht instanceof HTMLInputElement||ht instanceof HTMLSelectElement}))){var We=Date.now();We-P<=Gc?(U++,U===2&&T(dr(he))):U=1,P=We}}}return g.addEventListener("click",K),{dblclick:T,simDblclick:K}}function ri(g,T){g.removeEventListener("dblclick",T.dblclick),g.removeEventListener("click",T.simDblclick)}var qo=tc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),gs=tc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ql=gs==="webkitTransition"||gs==="OTransition"?gs+"End":"transitionend";function Zs(g){return typeof g=="string"?document.getElementById(g):g}function $a(g,T){var P=g.style[T]||g.currentStyle&&g.currentStyle[T];if((!P||P==="auto")&&document.defaultView){var U=document.defaultView.getComputedStyle(g,null);P=U?U[T]:null}return P==="auto"?null:P}function ai(g,T,P){var U=document.createElement(g);return U.className=T||"",P&&P.appendChild(U),U}function wi(g){var T=g.parentNode;T&&T.removeChild(g)}function ja(g){for(;g.firstChild;)g.removeChild(g.firstChild)}function Xn(g){var T=g.parentNode;T&&T.lastChild!==g&&T.appendChild(g)}function vl(g){var T=g.parentNode;T&&T.firstChild!==g&&T.insertBefore(g,T.firstChild)}function wh(g,T){if(g.classList!==void 0)return g.classList.contains(T);var P=wu(g);return P.length>0&&new RegExp("(^|\\s)"+T+"(\\s|$)").test(P)}function Nn(g,T){if(g.classList!==void 0)for(var P=ce(T),U=0,K=P.length;U<K;U++)g.classList.add(P[U]);else if(!wh(g,T)){var he=wu(g);ec(g,(he?he+" ":"")+T)}}function fr(g,T){g.classList!==void 0?g.classList.remove(T):ec(g,J((" "+wu(g)+" ").replace(" "+T+" "," ")))}function ec(g,T){g.className.baseVal===void 0?g.className=T:g.className.baseVal=T}function wu(g){return g.correspondingElement&&(g=g.correspondingElement),g.className.baseVal===void 0?g.className:g.className.baseVal}function Xi(g,T){"opacity"in g.style?g.style.opacity=T:"filter"in g.style&&Su(g,T)}function Su(g,T){var P=!1,U="DXImageTransform.Microsoft.Alpha";try{P=g.filters.item(U)}catch{if(T===1)return}T=Math.round(T*100),P?(P.Enabled=T!==100,P.Opacity=T):g.style.filter+=" progid:"+U+"(opacity="+T+")"}function tc(g){for(var T=document.documentElement.style,P=0;P<g.length;P++)if(g[P]in T)return g[P];return!1}function Go(g,T,P){var U=T||new qe(0,0);g.style[qo]=(ot.ie3d?"translate("+U.x+"px,"+U.y+"px)":"translate3d("+U.x+"px,"+U.y+"px,0)")+(P?" scale("+P+")":"")}function Vi(g,T){g._leaflet_pos=T,ot.any3d?Go(g,T):(g.style.left=T.x+"px",g.style.top=T.y+"px")}function bl(g){return g._leaflet_pos||new qe(0,0)}var ys,vo,Sh;if("onselectstart"in document)ys=function(){hn(window,"selectstart",Un)},vo=function(){Jt(window,"selectstart",Un)};else{var Ho=tc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ys=function(){if(Ho){var g=document.documentElement.style;Sh=g[Ho],g[Ho]="none"}},vo=function(){Ho&&(document.documentElement.style[Ho]=Sh,Sh=void 0)}}function Hc(){hn(window,"dragstart",Un)}function qs(){Jt(window,"dragstart",Un)}var Wo,xl;function Ln(g){for(;g.tabIndex===-1;)g=g.parentNode;g.style&&(Ka(),Wo=g,xl=g.style.outlineStyle,g.style.outlineStyle="none",hn(window,"keydown",Ka))}function Ka(){Wo&&(Wo.style.outlineStyle=xl,Wo=void 0,xl=void 0,Jt(window,"keydown",Ka))}function Th(g){do g=g.parentNode;while((!g.offsetWidth||!g.offsetHeight)&&g!==document.body);return g}function nc(g){var T=g.getBoundingClientRect();return{x:T.width/g.offsetWidth||1,y:T.height/g.offsetHeight||1,boundingClientRect:T}}var Hr={__proto__:null,TRANSFORM:qo,TRANSITION:gs,TRANSITION_END:Ql,get:Zs,getStyle:$a,create:ai,remove:wi,empty:ja,toFront:Xn,toBack:vl,hasClass:wh,addClass:Nn,removeClass:fr,setClass:ec,getClass:wu,setOpacity:Xi,testProp:tc,setTransform:Go,setPosition:Vi,getPosition:bl,get disableTextSelection(){return ys},get enableTextSelection(){return vo},disableImageDrag:Hc,enableImageDrag:qs,preventOutline:Ln,restoreOutline:Ka,getSizedParentNode:Th,getScale:nc};function hn(g,T,P,U){if(T&&typeof T=="object")for(var K in T)Ji(g,K,T[K],P);else{T=ce(T);for(var he=0,De=T.length;he<De;he++)Ji(g,T[he],P,U)}return this}var li="_leaflet_events";function Jt(g,T,P,U){if(arguments.length===1)Mi(g),delete g[li];else if(T&&typeof T=="object")for(var K in T)ma(g,K,T[K],P);else if(T=ce(T),arguments.length===2)Mi(g,function(We){return xe(T,We)!==-1});else for(var he=0,De=T.length;he<De;he++)ma(g,T[he],P,U);return this}function Mi(g,T){for(var P in g[li]){var U=P.split(/\d/)[0];(!T||T(U))&&ma(g,U,null,null,P)}}var Ja={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ji(g,T,P,U){var K=T+z(P)+(U?"_"+z(U):"");if(g[li]&&g[li][K])return this;var he=function(We){return P.call(U||g,We||window.event)},De=he;!ot.touchNative&&ot.pointer&&T.indexOf("touch")===0?he=xh(g,T,he):ot.touch&&T==="dblclick"?he=Ea(g,he):"addEventListener"in g?T==="touchstart"||T==="touchmove"||T==="wheel"||T==="mousewheel"?g.addEventListener(Ja[T]||T,he,ot.passiveEvents?{passive:!1}:!1):T==="mouseenter"||T==="mouseleave"?(he=function(We){We=We||window.event,ga(g,We)&&De(We)},g.addEventListener(Ja[T],he,!1)):g.addEventListener(T,De,!1):g.attachEvent("on"+T,he),g[li]=g[li]||{},g[li][K]=he}function ma(g,T,P,U,K){K=K||T+z(P)+(U?"_"+z(U):"");var he=g[li]&&g[li][K];if(!he)return this;!ot.touchNative&&ot.pointer&&T.indexOf("touch")===0?ps(g,T,he):ot.touch&&T==="dblclick"?ri(g,he):"removeEventListener"in g?g.removeEventListener(Ja[T]||T,he,!1):g.detachEvent("on"+T,he),g[li][K]=null}function Qi(g){return g.stopPropagation?g.stopPropagation():g.originalEvent?g.originalEvent._stopped=!0:g.cancelBubble=!0,this}function Ba(g){return Ji(g,"wheel",Qi),this}function Qa(g){return hn(g,"mousedown touchstart dblclick contextmenu",Qi),g._leaflet_disable_click=!0,this}function Un(g){return g.preventDefault?g.preventDefault():g.returnValue=!1,this}function eo(g){return Un(g),Qi(g),this}function to(g){if(g.composedPath)return g.composedPath();for(var T=[],P=g.target;P;)T.push(P),P=P.parentNode;return T}function wl(g,T){if(!T)return new qe(g.clientX,g.clientY);var P=nc(T),U=P.boundingClientRect;return new qe((g.clientX-U.left)/P.x-T.clientLeft,(g.clientY-U.top)/P.y-T.clientTop)}var Fa=ot.linux&&ot.chrome?window.devicePixelRatio:ot.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ir(g){return ot.edge?g.wheelDeltaY/2:g.deltaY&&g.deltaMode===0?-g.deltaY/Fa:g.deltaY&&g.deltaMode===1?-g.deltaY*20:g.deltaY&&g.deltaMode===2?-g.deltaY*60:g.deltaX||g.deltaZ?0:g.wheelDelta?(g.wheelDeltaY||g.wheelDelta)/2:g.detail&&Math.abs(g.detail)<32765?-g.detail*20:g.detail?g.detail/-32765*60:0}function ga(g,T){var P=T.relatedTarget;if(!P)return!0;try{for(;P&&P!==g;)P=P.parentNode}catch{return!1}return P!==g}var Tu={__proto__:null,on:hn,off:Jt,stopPropagation:Qi,disableScrollPropagation:Ba,disableClickPropagation:Qa,preventDefault:Un,stop:eo,getPropagationPath:to,getMousePosition:wl,getWheelDelta:Ir,isExternalTarget:ga,addListener:hn,removeListener:Jt},Sl=mt.extend({run:function(g,T,P,U){this.stop(),this._el=g,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(U||.5,.2),this._startPos=bl(g),this._offset=T.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$t(this._animate,this),this._step()},_step:function(g){var T=+new Date-this._startTime,P=this._duration*1e3;T<P?this._runFrame(this._easeOut(T/P),g):(this._runFrame(1),this._complete())},_runFrame:function(g,T){var P=this._startPos.add(this._offset.multiplyBy(g));T&&P._round(),Vi(this._el,P),this.fire("step")},_complete:function(){Zt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(g){return 1-Math.pow(1-g,this._easeOutPower)}}),Zn=mt.extend({options:{crs:Cr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(g,T){T=ee(this,T),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(g),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),T.maxBounds&&this.setMaxBounds(T.maxBounds),T.zoom!==void 0&&(this._zoom=this._limitZoom(T.zoom)),T.center&&T.zoom!==void 0&&this.setView(Ft(T.center),T.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=gs&&ot.any3d&&!ot.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),hn(this._proxy,Ql,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(g,T,P){if(T=T===void 0?this._zoom:this._limitZoom(T),g=this._limitCenter(Ft(g),T,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=a({animate:P.animate},P.zoom),P.pan=a({animate:P.animate,duration:P.duration},P.pan));var U=this._zoom!==T?this._tryAnimatedZoom&&this._tryAnimatedZoom(g,T,P.zoom):this._tryAnimatedPan(g,P.pan);if(U)return clearTimeout(this._sizeTimer),this}return this._resetView(g,T,P.pan&&P.pan.noMoveStart),this},setZoom:function(g,T){return this._loaded?this.setView(this.getCenter(),g,{zoom:T}):(this._zoom=g,this)},zoomIn:function(g,T){return g=g||(ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+g,T)},zoomOut:function(g,T){return g=g||(ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-g,T)},setZoomAround:function(g,T,P){var U=this.getZoomScale(T),K=this.getSize().divideBy(2),he=g instanceof qe?g:this.latLngToContainerPoint(g),De=he.subtract(K).multiplyBy(1-1/U),We=this.containerPointToLatLng(K.add(De));return this.setView(We,T,{zoom:P})},_getBoundsCenterZoom:function(g,T){T=T||{},g=g.getBounds?g.getBounds():It(g);var P=jt(T.paddingTopLeft||T.padding||[0,0]),U=jt(T.paddingBottomRight||T.padding||[0,0]),K=this.getBoundsZoom(g,!1,P.add(U));if(K=typeof T.maxZoom=="number"?Math.min(T.maxZoom,K):K,K===1/0)return{center:g.getCenter(),zoom:K};var he=U.subtract(P).divideBy(2),De=this.project(g.getSouthWest(),K),We=this.project(g.getNorthEast(),K),ht=this.unproject(De.add(We).divideBy(2).add(he),K);return{center:ht,zoom:K}},fitBounds:function(g,T){if(g=It(g),!g.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(g,T);return this.setView(P.center,P.zoom,T)},fitWorld:function(g){return this.fitBounds([[-90,-180],[90,180]],g)},panTo:function(g,T){return this.setView(g,this._zoom,{pan:T})},panBy:function(g,T){if(g=jt(g).round(),T=T||{},!g.x&&!g.y)return this.fire("moveend");if(T.animate!==!0&&!this.getSize().contains(g))return this._resetView(this.unproject(this.project(this.getCenter()).add(g)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Sl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),T.noMoveStart||this.fire("movestart"),T.animate!==!1){Nn(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(g).round();this._panAnim.run(this._mapPane,P,T.duration||.25,T.easeLinearity)}else this._rawPanBy(g),this.fire("move").fire("moveend");return this},flyTo:function(g,T,P){if(P=P||{},P.animate===!1||!ot.any3d)return this.setView(g,T,P);this._stop();var U=this.project(this.getCenter()),K=this.project(g),he=this.getSize(),De=this._zoom;g=Ft(g),T=T===void 0?De:T;var We=Math.max(he.x,he.y),ht=We*this.getZoomScale(De,T),Ct=K.distanceTo(U)||1,Wt=1.42,gn=Wt*Wt;function qn(ar){var wo=ar?-1:1,ws=ar?ht:We,Ss=ht*ht-We*We+wo*gn*gn*Ct*Ct,el=2*ws*gn*Ct,ts=Ss/el,So=Math.sqrt(ts*ts+1)-ts,Ts=So<1e-9?-18:Math.log(So);return Ts}function kr(ar){return(Math.exp(ar)-Math.exp(-ar))/2}function mr(ar){return(Math.exp(ar)+Math.exp(-ar))/2}function lo(ar){return kr(ar)/mr(ar)}var Ci=qn(0);function ui(ar){return We*(mr(Ci)/mr(Ci+Wt*ar))}function Jn(ar){return We*(mr(Ci)*lo(Ci+Wt*ar)-kr(Ci))/gn}function Qs(ar){return 1-Math.pow(1-ar,1.5)}var xo=Date.now(),er=(qn(1)-Ci)/Wt,co=P.duration?1e3*P.duration:1e3*er*.8;function Za(){var ar=(Date.now()-xo)/co,wo=Qs(ar)*er;ar<=1?(this._flyToFrame=$t(Za,this),this._move(this.unproject(U.add(K.subtract(U).multiplyBy(Jn(wo)/Ct)),De),this.getScaleZoom(We/ui(wo),De),{flyTo:!0})):this._move(g,T)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Za.call(this),this},flyToBounds:function(g,T){var P=this._getBoundsCenterZoom(g,T);return this.flyTo(P.center,P.zoom,T)},setMaxBounds:function(g){return g=It(g),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),g.isValid()?(this.options.maxBounds=g,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(g){var T=this.options.minZoom;return this.options.minZoom=g,this._loaded&&T!==g&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(g):this},setMaxZoom:function(g){var T=this.options.maxZoom;return this.options.maxZoom=g,this._loaded&&T!==g&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(g):this},panInsideBounds:function(g,T){this._enforcingBounds=!0;var P=this.getCenter(),U=this._limitCenter(P,this._zoom,It(g));return P.equals(U)||this.panTo(U,T),this._enforcingBounds=!1,this},panInside:function(g,T){T=T||{};var P=jt(T.paddingTopLeft||T.padding||[0,0]),U=jt(T.paddingBottomRight||T.padding||[0,0]),K=this.project(this.getCenter()),he=this.project(g),De=this.getPixelBounds(),We=pt([De.min.add(P),De.max.subtract(U)]),ht=We.getSize();if(!We.contains(he)){this._enforcingBounds=!0;var Ct=he.subtract(We.getCenter()),Wt=We.extend(he).getSize().subtract(ht);K.x+=Ct.x<0?-Wt.x:Wt.x,K.y+=Ct.y<0?-Wt.y:Wt.y,this.panTo(this.unproject(K),T),this._enforcingBounds=!1}return this},invalidateSize:function(g){if(!this._loaded)return this;g=a({animate:!1,pan:!0},g===!0?{animate:!0}:g);var T=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),U=T.divideBy(2).round(),K=P.divideBy(2).round(),he=U.subtract(K);return!he.x&&!he.y?this:(g.animate&&g.pan?this.panBy(he):(g.pan&&this._rawPanBy(he),this.fire("move"),g.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:T,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(g){if(g=this._locateOptions=a({timeout:1e4,watch:!1},g),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var T=m(this._handleGeolocationResponse,this),P=m(this._handleGeolocationError,this);return g.watch?this._locationWatchId=navigator.geolocation.watchPosition(T,P,g):navigator.geolocation.getCurrentPosition(T,P,g),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(g){if(this._container._leaflet_id){var T=g.code,P=g.message||(T===1?"permission denied":T===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:T,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(g){if(this._container._leaflet_id){var T=g.coords.latitude,P=g.coords.longitude,U=new Nt(T,P),K=U.toBounds(g.coords.accuracy*2),he=this._locateOptions;if(he.setView){var De=this.getBoundsZoom(K);this.setView(U,he.maxZoom?Math.min(De,he.maxZoom):De)}var We={latlng:U,bounds:K,timestamp:g.timestamp};for(var ht in g.coords)typeof g.coords[ht]=="number"&&(We[ht]=g.coords[ht]);this.fire("locationfound",We)}},addHandler:function(g,T){if(!T)return this;var P=this[g]=new T(this);return this._handlers.push(P),this.options[g]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wi(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Zt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var g;for(g in this._layers)this._layers[g].remove();for(g in this._panes)wi(this._panes[g]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(g,T){var P="leaflet-pane"+(g?" leaflet-"+g.replace("Pane","")+"-pane":""),U=ai("div",P,T||this._mapPane);return g&&(this._panes[g]=U),U},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var g=this.getPixelBounds(),T=this.unproject(g.getBottomLeft()),P=this.unproject(g.getTopRight());return new Mt(T,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(g,T,P){g=It(g),P=jt(P||[0,0]);var U=this.getZoom()||0,K=this.getMinZoom(),he=this.getMaxZoom(),De=g.getNorthWest(),We=g.getSouthEast(),ht=this.getSize().subtract(P),Ct=pt(this.project(We,U),this.project(De,U)).getSize(),Wt=ot.any3d?this.options.zoomSnap:1,gn=ht.x/Ct.x,qn=ht.y/Ct.y,kr=T?Math.max(gn,qn):Math.min(gn,qn);return U=this.getScaleZoom(kr,U),Wt&&(U=Math.round(U/(Wt/100))*(Wt/100),U=T?Math.ceil(U/Wt)*Wt:Math.floor(U/Wt)*Wt),Math.max(K,Math.min(he,U))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new qe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(g,T){var P=this._getTopLeftPoint(g,T);return new Oe(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(g){return this.options.crs.getProjectedBounds(g===void 0?this.getZoom():g)},getPane:function(g){return typeof g=="string"?this._panes[g]:g},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(g,T){var P=this.options.crs;return T=T===void 0?this._zoom:T,P.scale(g)/P.scale(T)},getScaleZoom:function(g,T){var P=this.options.crs;T=T===void 0?this._zoom:T;var U=P.zoom(g*P.scale(T));return isNaN(U)?1/0:U},project:function(g,T){return T=T===void 0?this._zoom:T,this.options.crs.latLngToPoint(Ft(g),T)},unproject:function(g,T){return T=T===void 0?this._zoom:T,this.options.crs.pointToLatLng(jt(g),T)},layerPointToLatLng:function(g){var T=jt(g).add(this.getPixelOrigin());return this.unproject(T)},latLngToLayerPoint:function(g){var T=this.project(Ft(g))._round();return T._subtract(this.getPixelOrigin())},wrapLatLng:function(g){return this.options.crs.wrapLatLng(Ft(g))},wrapLatLngBounds:function(g){return this.options.crs.wrapLatLngBounds(It(g))},distance:function(g,T){return this.options.crs.distance(Ft(g),Ft(T))},containerPointToLayerPoint:function(g){return jt(g).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(g){return jt(g).add(this._getMapPanePos())},containerPointToLatLng:function(g){var T=this.containerPointToLayerPoint(jt(g));return this.layerPointToLatLng(T)},latLngToContainerPoint:function(g){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ft(g)))},mouseEventToContainerPoint:function(g){return wl(g,this._container)},mouseEventToLayerPoint:function(g){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(g))},mouseEventToLatLng:function(g){return this.layerPointToLatLng(this.mouseEventToLayerPoint(g))},_initContainer:function(g){var T=this._container=Zs(g);if(T){if(T._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");hn(T,"scroll",this._onScroll,this),this._containerId=z(T)},_initLayout:function(){var g=this._container;this._fadeAnimated=this.options.fadeAnimation&&ot.any3d,Nn(g,"leaflet-container"+(ot.touch?" leaflet-touch":"")+(ot.retina?" leaflet-retina":"")+(ot.ielt9?" leaflet-oldie":"")+(ot.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var T=$a(g,"position");T!=="absolute"&&T!=="relative"&&T!=="fixed"&&T!=="sticky"&&(g.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var g=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Vi(this._mapPane,new qe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Nn(g.markerPane,"leaflet-zoom-hide"),Nn(g.shadowPane,"leaflet-zoom-hide"))},_resetView:function(g,T,P){Vi(this._mapPane,new qe(0,0));var U=!this._loaded;this._loaded=!0,T=this._limitZoom(T),this.fire("viewprereset");var K=this._zoom!==T;this._moveStart(K,P)._move(g,T)._moveEnd(K),this.fire("viewreset"),U&&this.fire("load")},_moveStart:function(g,T){return g&&this.fire("zoomstart"),T||this.fire("movestart"),this},_move:function(g,T,P,U){T===void 0&&(T=this._zoom);var K=this._zoom!==T;return this._zoom=T,this._lastCenter=g,this._pixelOrigin=this._getNewPixelOrigin(g),U?P&&P.pinch&&this.fire("zoom",P):((K||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(g){return g&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Zt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(g){Vi(this._mapPane,this._getMapPanePos().subtract(g))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(g){this._targets={},this._targets[z(this._container)]=this;var T=g?Jt:hn;T(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&T(window,"resize",this._onResize,this),ot.any3d&&this.options.transform3DLimit&&(g?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Zt(this._resizeRequest),this._resizeRequest=$t(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var g=this._getMapPanePos();Math.max(Math.abs(g.x),Math.abs(g.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(g,T){for(var P=[],U,K=T==="mouseout"||T==="mouseover",he=g.target||g.srcElement,De=!1;he;){if(U=this._targets[z(he)],U&&(T==="click"||T==="preclick")&&this._draggableMoved(U)){De=!0;break}if(U&&U.listens(T,!0)&&(K&&!ga(he,g)||(P.push(U),K))||he===this._container)break;he=he.parentNode}return!P.length&&!De&&!K&&this.listens(T,!0)&&(P=[this]),P},_isClickDisabled:function(g){for(;g&&g!==this._container;){if(g._leaflet_disable_click)return!0;g=g.parentNode}},_handleDOMEvent:function(g){var T=g.target||g.srcElement;if(!(!this._loaded||T._leaflet_disable_events||g.type==="click"&&this._isClickDisabled(T))){var P=g.type;P==="mousedown"&&Ln(T),this._fireDOMEvent(g,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(g,T,P){if(g.type==="click"){var U=a({},g);U.type="preclick",this._fireDOMEvent(U,U.type,P)}var K=this._findEventTargets(g,T);if(P){for(var he=[],De=0;De<P.length;De++)P[De].listens(T,!0)&&he.push(P[De]);K=he.concat(K)}if(K.length){T==="contextmenu"&&Un(g);var We=K[0],ht={originalEvent:g};if(g.type!=="keypress"&&g.type!=="keydown"&&g.type!=="keyup"){var Ct=We.getLatLng&&(!We._radius||We._radius<=10);ht.containerPoint=Ct?this.latLngToContainerPoint(We.getLatLng()):this.mouseEventToContainerPoint(g),ht.layerPoint=this.containerPointToLayerPoint(ht.containerPoint),ht.latlng=Ct?We.getLatLng():this.layerPointToLatLng(ht.layerPoint)}for(De=0;De<K.length;De++)if(K[De].fire(T,ht,!0),ht.originalEvent._stopped||K[De].options.bubblingMouseEvents===!1&&xe(this._mouseEvents,T)!==-1)return}},_draggableMoved:function(g){return g=g.dragging&&g.dragging.enabled()?g:this,g.dragging&&g.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var g=0,T=this._handlers.length;g<T;g++)this._handlers[g].disable()},whenReady:function(g,T){return this._loaded?g.call(T||this,{target:this}):this.on("load",g,T),this},_getMapPanePos:function(){return bl(this._mapPane)||new qe(0,0)},_moved:function(){var g=this._getMapPanePos();return g&&!g.equals([0,0])},_getTopLeftPoint:function(g,T){var P=g&&T!==void 0?this._getNewPixelOrigin(g,T):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(g,T){var P=this.getSize()._divideBy(2);return this.project(g,T)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(g,T,P){var U=this._getNewPixelOrigin(P,T);return this.project(g,T)._subtract(U)},_latLngBoundsToNewLayerBounds:function(g,T,P){var U=this._getNewPixelOrigin(P,T);return pt([this.project(g.getSouthWest(),T)._subtract(U),this.project(g.getNorthWest(),T)._subtract(U),this.project(g.getSouthEast(),T)._subtract(U),this.project(g.getNorthEast(),T)._subtract(U)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(g){return this.latLngToLayerPoint(g).subtract(this._getCenterLayerPoint())},_limitCenter:function(g,T,P){if(!P)return g;var U=this.project(g,T),K=this.getSize().divideBy(2),he=new Oe(U.subtract(K),U.add(K)),De=this._getBoundsOffset(he,P,T);return Math.abs(De.x)<=1&&Math.abs(De.y)<=1?g:this.unproject(U.add(De),T)},_limitOffset:function(g,T){if(!T)return g;var P=this.getPixelBounds(),U=new Oe(P.min.add(g),P.max.add(g));return g.add(this._getBoundsOffset(U,T))},_getBoundsOffset:function(g,T,P){var U=pt(this.project(T.getNorthEast(),P),this.project(T.getSouthWest(),P)),K=U.min.subtract(g.min),he=U.max.subtract(g.max),De=this._rebound(K.x,-he.x),We=this._rebound(K.y,-he.y);return new qe(De,We)},_rebound:function(g,T){return g+T>0?Math.round(g-T)/2:Math.max(0,Math.ceil(g))-Math.max(0,Math.floor(T))},_limitZoom:function(g){var T=this.getMinZoom(),P=this.getMaxZoom(),U=ot.any3d?this.options.zoomSnap:1;return U&&(g=Math.round(g/U)*U),Math.max(T,Math.min(P,g))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){fr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(g,T){var P=this._getCenterOffset(g)._trunc();return(T&&T.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,T),!0)},_createAnimProxy:function(){var g=this._proxy=ai("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(g),this.on("zoomanim",function(T){var P=qo,U=this._proxy.style[P];Go(this._proxy,this.project(T.center,T.zoom),this.getZoomScale(T.zoom,1)),U===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wi(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var g=this.getCenter(),T=this.getZoom();Go(this._proxy,this.project(g,T),this.getZoomScale(T,1))},_catchTransitionEnd:function(g){this._animatingZoom&&g.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(g,T,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(T-this._zoom)>this.options.zoomAnimationThreshold)return!1;var U=this.getZoomScale(T),K=this._getCenterOffset(g)._divideBy(1-1/U);return P.animate!==!0&&!this.getSize().contains(K)?!1:($t(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(g,T,!0)},this),!0)},_animateZoom:function(g,T,P,U){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=g,this._animateToZoom=T,Nn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:g,zoom:T,noUpdate:U}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&fr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function zi(g,T){return new Zn(g,T)}var ia=ln.extend({options:{position:"topright"},initialize:function(g){ee(this,g)},getPosition:function(){return this.options.position},setPosition:function(g){var T=this._map;return T&&T.removeControl(this),this.options.position=g,T&&T.addControl(this),this},getContainer:function(){return this._container},addTo:function(g){this.remove(),this._map=g;var T=this._container=this.onAdd(g),P=this.getPosition(),U=g._controlCorners[P];return Nn(T,"leaflet-control"),P.indexOf("bottom")!==-1?U.insertBefore(T,U.firstChild):U.appendChild(T),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wi(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(g){this._map&&g&&g.screenX>0&&g.screenY>0&&this._map.getContainer().focus()}}),$n=function(g){return new ia(g)};Zn.include({addControl:function(g){return g.addTo(this),this},removeControl:function(g){return g.remove(),this},_initControlPos:function(){var g=this._controlCorners={},T="leaflet-",P=this._controlContainer=ai("div",T+"control-container",this._container);function U(K,he){var De=T+K+" "+T+he;g[K+he]=ai("div",De,P)}U("top","left"),U("top","right"),U("bottom","left"),U("bottom","right")},_clearControlPos:function(){for(var g in this._controlCorners)wi(this._controlCorners[g]);wi(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var kn=ia.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(g,T,P,U){return P<U?-1:U<P?1:0}},initialize:function(g,T,P){ee(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var U in g)this._addLayer(g[U],U);for(U in T)this._addLayer(T[U],U,!0)},onAdd:function(g){this._initLayout(),this._update(),this._map=g,g.on("zoomend",this._checkDisabledLayers,this);for(var T=0;T<this._layers.length;T++)this._layers[T].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(g){return ia.prototype.addTo.call(this,g),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(g,T){return this._addLayer(g,T),this._map?this._update():this},addOverlay:function(g,T){return this._addLayer(g,T,!0),this._map?this._update():this},removeLayer:function(g){g.off("add remove",this._onLayerChange,this);var T=this._getLayer(z(g));return T&&this._layers.splice(this._layers.indexOf(T),1),this._map?this._update():this},expand:function(){Nn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var g=this._map.getSize().y-(this._container.offsetTop+50);return g<this._section.clientHeight?(Nn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=g+"px"):fr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return fr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var g="leaflet-control-layers",T=this._container=ai("div",g),P=this.options.collapsed;T.setAttribute("aria-haspopup",!0),Qa(T),Ba(T);var U=this._section=ai("section",g+"-list");P&&(this._map.on("click",this.collapse,this),hn(T,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var K=this._layersLink=ai("a",g+"-toggle",T);K.href="#",K.title="Layers",K.setAttribute("role","button"),hn(K,{keydown:function(he){he.keyCode===13&&this._expandSafely()},click:function(he){Un(he),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=ai("div",g+"-base",U),this._separator=ai("div",g+"-separator",U),this._overlaysList=ai("div",g+"-overlays",U),T.appendChild(U)},_getLayer:function(g){for(var T=0;T<this._layers.length;T++)if(this._layers[T]&&z(this._layers[T].layer)===g)return this._layers[T]},_addLayer:function(g,T,P){this._map&&g.on("add remove",this._onLayerChange,this),this._layers.push({layer:g,name:T,overlay:P}),this.options.sortLayers&&this._layers.sort(m(function(U,K){return this.options.sortFunction(U.layer,K.layer,U.name,K.name)},this)),this.options.autoZIndex&&g.setZIndex&&(this._lastZIndex++,g.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ja(this._baseLayersList),ja(this._overlaysList),this._layerControlInputs=[];var g,T,P,U,K=0;for(P=0;P<this._layers.length;P++)U=this._layers[P],this._addItem(U),T=T||U.overlay,g=g||!U.overlay,K+=U.overlay?0:1;return this.options.hideSingleBase&&(g=g&&K>1,this._baseLayersList.style.display=g?"":"none"),this._separator.style.display=T&&g?"":"none",this},_onLayerChange:function(g){this._handlingClick||this._update();var T=this._getLayer(z(g.target)),P=T.overlay?g.type==="add"?"overlayadd":"overlayremove":g.type==="add"?"baselayerchange":null;P&&this._map.fire(P,T)},_createRadioElement:function(g,T){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+g+'"'+(T?' checked="checked"':"")+"/>",U=document.createElement("div");return U.innerHTML=P,U.firstChild},_addItem:function(g){var T=document.createElement("label"),P=this._map.hasLayer(g.layer),U;g.overlay?(U=document.createElement("input"),U.type="checkbox",U.className="leaflet-control-layers-selector",U.defaultChecked=P):U=this._createRadioElement("leaflet-base-layers_"+z(this),P),this._layerControlInputs.push(U),U.layerId=z(g.layer),hn(U,"click",this._onInputClick,this);var K=document.createElement("span");K.innerHTML=" "+g.name;var he=document.createElement("span");T.appendChild(he),he.appendChild(U),he.appendChild(K);var De=g.overlay?this._overlaysList:this._baseLayersList;return De.appendChild(T),this._checkDisabledLayers(),T},_onInputClick:function(){if(!this._preventClick){var g=this._layerControlInputs,T,P,U=[],K=[];this._handlingClick=!0;for(var he=g.length-1;he>=0;he--)T=g[he],P=this._getLayer(T.layerId).layer,T.checked?U.push(P):T.checked||K.push(P);for(he=0;he<K.length;he++)this._map.hasLayer(K[he])&&this._map.removeLayer(K[he]);for(he=0;he<U.length;he++)this._map.hasLayer(U[he])||this._map.addLayer(U[he]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var g=this._layerControlInputs,T,P,U=this._map.getZoom(),K=g.length-1;K>=0;K--)T=g[K],P=this._getLayer(T.layerId).layer,T.disabled=P.options.minZoom!==void 0&&U<P.options.minZoom||P.options.maxZoom!==void 0&&U>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var g=this._section;this._preventClick=!0,hn(g,"click",Un),this.expand();var T=this;setTimeout(function(){Jt(g,"click",Un),T._preventClick=!1})}}),ic=function(g,T,P){return new kn(g,T,P)},Kn=ia.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(g){var T="leaflet-control-zoom",P=ai("div",T+" leaflet-bar"),U=this.options;return this._zoomInButton=this._createButton(U.zoomInText,U.zoomInTitle,T+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(U.zoomOutText,U.zoomOutTitle,T+"-out",P,this._zoomOut),this._updateDisabled(),g.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(g){g.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(g){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(g.shiftKey?3:1))},_zoomOut:function(g){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(g.shiftKey?3:1))},_createButton:function(g,T,P,U,K){var he=ai("a",P,U);return he.innerHTML=g,he.href="#",he.title=T,he.setAttribute("role","button"),he.setAttribute("aria-label",T),Qa(he),hn(he,"click",eo),hn(he,"click",K,this),hn(he,"click",this._refocusOnMap,this),he},_updateDisabled:function(){var g=this._map,T="leaflet-disabled";fr(this._zoomInButton,T),fr(this._zoomOutButton,T),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||g._zoom===g.getMinZoom())&&(Nn(this._zoomOutButton,T),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||g._zoom===g.getMaxZoom())&&(Nn(this._zoomInButton,T),this._zoomInButton.setAttribute("aria-disabled","true"))}});Zn.mergeOptions({zoomControl:!0}),Zn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Kn,this.addControl(this.zoomControl))});var Eu=function(g){return new Kn(g)},bo=ia.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(g){var T="leaflet-control-scale",P=ai("div",T),U=this.options;return this._addScales(U,T+"-line",P),g.on(U.updateWhenIdle?"moveend":"move",this._update,this),g.whenReady(this._update,this),P},onRemove:function(g){g.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(g,T,P){g.metric&&(this._mScale=ai("div",T,P)),g.imperial&&(this._iScale=ai("div",T,P))},_update:function(){var g=this._map,T=g.getSize().y/2,P=g.distance(g.containerPointToLatLng([0,T]),g.containerPointToLatLng([this.options.maxWidth,T]));this._updateScales(P)},_updateScales:function(g){this.options.metric&&g&&this._updateMetric(g),this.options.imperial&&g&&this._updateImperial(g)},_updateMetric:function(g){var T=this._getRoundNum(g),P=T<1e3?T+" m":T/1e3+" km";this._updateScale(this._mScale,P,T/g)},_updateImperial:function(g){var T=g*3.2808399,P,U,K;T>5280?(P=T/5280,U=this._getRoundNum(P),this._updateScale(this._iScale,U+" mi",U/P)):(K=this._getRoundNum(T),this._updateScale(this._iScale,K+" ft",K/T))},_updateScale:function(g,T,P){g.style.width=Math.round(this.options.maxWidth*P)+"px",g.innerHTML=T},_getRoundNum:function(g){var T=Math.pow(10,(Math.floor(g)+"").length-1),P=g/T;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,T*P}}),Tl=function(g){return new bo(g)},El='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Eh=ia.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ot.inlineSvg?El+" ":"")+"Leaflet</a>"},initialize:function(g){ee(this,g),this._attributions={}},onAdd:function(g){g.attributionControl=this,this._container=ai("div","leaflet-control-attribution"),Qa(this._container);for(var T in g._layers)g._layers[T].getAttribution&&this.addAttribution(g._layers[T].getAttribution());return this._update(),g.on("layeradd",this._addAttribution,this),this._container},onRemove:function(g){g.off("layeradd",this._addAttribution,this)},_addAttribution:function(g){g.layer.getAttribution&&(this.addAttribution(g.layer.getAttribution()),g.layer.once("remove",function(){this.removeAttribution(g.layer.getAttribution())},this))},setPrefix:function(g){return this.options.prefix=g,this._update(),this},addAttribution:function(g){return g?(this._attributions[g]||(this._attributions[g]=0),this._attributions[g]++,this._update(),this):this},removeAttribution:function(g){return g?(this._attributions[g]&&(this._attributions[g]--,this._update()),this):this},_update:function(){if(this._map){var g=[];for(var T in this._attributions)this._attributions[T]&&g.push(T);var P=[];this.options.prefix&&P.push(this.options.prefix),g.length&&P.push(g.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});Zn.mergeOptions({attributionControl:!0}),Zn.addInitHook(function(){this.options.attributionControl&&new Eh().addTo(this)});var Au=function(g){return new Eh(g)};ia.Layers=kn,ia.Zoom=Kn,ia.Scale=bo,ia.Attribution=Eh,$n.layers=ic,$n.zoom=Eu,$n.scale=Tl,$n.attribution=Au;var Io=ln.extend({initialize:function(g){this._map=g},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Io.addTo=function(g,T){return g.addHandler(T,this),this};var mp={Events:Ge},Ah=ot.touch?"touchstart mousedown":"mousedown",xr=mt.extend({options:{clickTolerance:3},initialize:function(g,T,P,U){ee(this,U),this._element=g,this._dragStartTarget=T||g,this._preventOutline=P},enable:function(){this._enabled||(hn(this._dragStartTarget,Ah,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xr._dragging===this&&this.finishDrag(!0),Jt(this._dragStartTarget,Ah,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(g){if(this._enabled&&(this._moved=!1,!wh(this._element,"leaflet-zoom-anim"))){if(g.touches&&g.touches.length!==1){xr._dragging===this&&this.finishDrag();return}if(!(xr._dragging||g.shiftKey||g.which!==1&&g.button!==1&&!g.touches)&&(xr._dragging=this,this._preventOutline&&Ln(this._element),Hc(),ys(),!this._moving)){this.fire("down");var T=g.touches?g.touches[0]:g,P=Th(this._element);this._startPoint=new qe(T.clientX,T.clientY),this._startPos=bl(this._element),this._parentScale=nc(P);var U=g.type==="mousedown";hn(document,U?"mousemove":"touchmove",this._onMove,this),hn(document,U?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(g){if(this._enabled){if(g.touches&&g.touches.length>1){this._moved=!0;return}var T=g.touches&&g.touches.length===1?g.touches[0]:g,P=new qe(T.clientX,T.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,Un(g),this._moved||(this.fire("dragstart"),this._moved=!0,Nn(document.body,"leaflet-dragging"),this._lastTarget=g.target||g.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Nn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=g,this._updatePosition())}},_updatePosition:function(){var g={originalEvent:this._lastEvent};this.fire("predrag",g),Vi(this._element,this._newPos),this.fire("drag",g)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(g){fr(document.body,"leaflet-dragging"),this._lastTarget&&(fr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Jt(document,"mousemove touchmove",this._onMove,this),Jt(document,"mouseup touchend touchcancel",this._onUp,this),qs(),vo();var T=this._moved&&this._moving;this._moving=!1,xr._dragging=!1,T&&this.fire("dragend",{noInertia:g,distance:this._newPos.distanceTo(this._startPos)})}});function Xo(g,T,P){var U,K=[1,4,2,8],he,De,We,ht,Ct,Wt,gn,qn;for(he=0,Wt=g.length;he<Wt;he++)g[he]._code=Ws(g[he],T);for(We=0;We<4;We++){for(gn=K[We],U=[],he=0,Wt=g.length,De=Wt-1;he<Wt;De=he++)ht=g[he],Ct=g[De],ht._code&gn?Ct._code&gn||(qn=Hs(Ct,ht,gn,T,P),qn._code=Ws(qn,T),U.push(qn)):(Ct._code&gn&&(qn=Hs(Ct,ht,gn,T,P),qn._code=Ws(qn,T),U.push(qn)),U.push(ht));g=U}return g}function Yi(g,T){var P,U,K,he,De,We,ht,Ct,Wt;if(!g||g.length===0)throw new Error("latlngs not passed");ya(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var gn=Ft([0,0]),qn=It(g),kr=qn.getNorthWest().distanceTo(qn.getSouthWest())*qn.getNorthEast().distanceTo(qn.getNorthWest());kr<1700&&(gn=Gs(g));var mr=g.length,lo=[];for(P=0;P<mr;P++){var Ci=Ft(g[P]);lo.push(T.project(Ft([Ci.lat-gn.lat,Ci.lng-gn.lng])))}for(We=ht=Ct=0,P=0,U=mr-1;P<mr;U=P++)K=lo[P],he=lo[U],De=K.y*he.x-he.y*K.x,ht+=(K.x+he.x)*De,Ct+=(K.y+he.y)*De,We+=De*3;We===0?Wt=lo[0]:Wt=[ht/We,Ct/We];var ui=T.unproject(jt(Wt));return Ft([ui.lat+gn.lat,ui.lng+gn.lng])}function Gs(g){for(var T=0,P=0,U=0,K=0;K<g.length;K++){var he=Ft(g[K]);T+=he.lat,P+=he.lng,U++}return Ft([T/U,P/U])}var Cu={__proto__:null,clipPolygon:Xo,polygonCenter:Yi,centroid:Gs};function Wc(g,T){if(!T||!g.length)return g.slice();var P=T*T;return g=gp(g,P),g=Ch(g,P),g}function rr(g,T,P){return Math.sqrt(_s(g,T,P,!0))}function sf(g,T,P){return _s(g,T,P)}function Ch(g,T){var P=g.length,U=typeof Uint8Array<"u"?Uint8Array:Array,K=new U(P);K[0]=K[P-1]=1,Mh(g,K,T,0,P-1);var he,De=[];for(he=0;he<P;he++)K[he]&&De.push(g[he]);return De}function Mh(g,T,P,U,K){var he=0,De,We,ht;for(We=U+1;We<=K-1;We++)ht=_s(g[We],g[U],g[K],!0),ht>he&&(De=We,he=ht);he>P&&(T[De]=1,Mh(g,T,P,U,De),Mh(g,T,P,De,K))}function gp(g,T){for(var P=[g[0]],U=1,K=0,he=g.length;U<he;U++)zu(g[U],g[K])>T&&(P.push(g[U]),K=U);return K<he-1&&P.push(g[he-1]),P}var rc;function Mu(g,T,P,U,K){var he=U?rc:Ws(g,P),De=Ws(T,P),We,ht,Ct;for(rc=De;;){if(!(he|De))return[g,T];if(he&De)return!1;We=he||De,ht=Hs(g,T,We,P,K),Ct=Ws(ht,P),We===he?(g=ht,he=Ct):(T=ht,De=Ct)}}function Hs(g,T,P,U,K){var he=T.x-g.x,De=T.y-g.y,We=U.min,ht=U.max,Ct,Wt;return P&8?(Ct=g.x+he*(ht.y-g.y)/De,Wt=ht.y):P&4?(Ct=g.x+he*(We.y-g.y)/De,Wt=We.y):P&2?(Ct=ht.x,Wt=g.y+De*(ht.x-g.x)/he):P&1&&(Ct=We.x,Wt=g.y+De*(We.x-g.x)/he),new qe(Ct,Wt,K)}function Ws(g,T){var P=0;return g.x<T.min.x?P|=1:g.x>T.max.x&&(P|=2),g.y<T.min.y?P|=4:g.y>T.max.y&&(P|=8),P}function zu(g,T){var P=T.x-g.x,U=T.y-g.y;return P*P+U*U}function _s(g,T,P,U){var K=T.x,he=T.y,De=P.x-K,We=P.y-he,ht=De*De+We*We,Ct;return ht>0&&(Ct=((g.x-K)*De+(g.y-he)*We)/ht,Ct>1?(K=P.x,he=P.y):Ct>0&&(K+=De*Ct,he+=We*Ct)),De=g.x-K,We=g.y-he,U?De*De+We*We:new qe(K,he)}function ya(g){return!we(g[0])||typeof g[0][0]!="object"&&typeof g[0][0]<"u"}function pr(g){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ya(g)}function ac(g,T){var P,U,K,he,De,We,ht,Ct;if(!g||g.length===0)throw new Error("latlngs not passed");ya(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var Wt=Ft([0,0]),gn=It(g),qn=gn.getNorthWest().distanceTo(gn.getSouthWest())*gn.getNorthEast().distanceTo(gn.getNorthWest());qn<1700&&(Wt=Gs(g));var kr=g.length,mr=[];for(P=0;P<kr;P++){var lo=Ft(g[P]);mr.push(T.project(Ft([lo.lat-Wt.lat,lo.lng-Wt.lng])))}for(P=0,U=0;P<kr-1;P++)U+=mr[P].distanceTo(mr[P+1])/2;if(U===0)Ct=mr[0];else for(P=0,he=0;P<kr-1;P++)if(De=mr[P],We=mr[P+1],K=De.distanceTo(We),he+=K,he>U){ht=(he-U)/K,Ct=[We.x-ht*(We.x-De.x),We.y-ht*(We.y-De.y)];break}var Ci=T.unproject(jt(Ct));return Ft([Ci.lat+Wt.lat,Ci.lng+Wt.lng])}var Xc={__proto__:null,simplify:Wc,pointToSegmentDistance:rr,closestPointOnSegment:sf,clipSegment:Mu,_getEdgeIntersection:Hs,_getBitCode:Ws,_sqClosestPointOnSegment:_s,isFlat:ya,_flat:pr,polylineCenter:ac},Al={project:function(g){return new qe(g.lng,g.lat)},unproject:function(g){return new Nt(g.y,g.x)},bounds:new Oe([-180,-90],[180,90])},vs={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(g){var T=Math.PI/180,P=this.R,U=g.lat*T,K=this.R_MINOR/P,he=Math.sqrt(1-K*K),De=he*Math.sin(U),We=Math.tan(Math.PI/4-U/2)/Math.pow((1-De)/(1+De),he/2);return U=-P*Math.log(Math.max(We,1e-10)),new qe(g.lng*T*P,U)},unproject:function(g){for(var T=180/Math.PI,P=this.R,U=this.R_MINOR/P,K=Math.sqrt(1-U*U),he=Math.exp(-g.y/P),De=Math.PI/2-2*Math.atan(he),We=0,ht=.1,Ct;We<15&&Math.abs(ht)>1e-7;We++)Ct=K*Math.sin(De),Ct=Math.pow((1-Ct)/(1+Ct),K/2),ht=Math.PI/2-2*Math.atan(he*Ct)-De,De+=ht;return new Nt(De*T,g.x*T/P)}},lf={__proto__:null,LonLat:Al,Mercator:vs,SphericalMercator:Dn},Iu=a({},un,{code:"EPSG:3395",projection:vs,transformation:(function(){var g=.5/(Math.PI*vs.R);return Bn(g,.5,-g,.5)})()}),vd=a({},un,{code:"EPSG:4326",projection:Al,transformation:Bn(1/180,1,-1/180,.5)}),Yo=a({},At,{projection:Al,transformation:Bn(1,0,-1,0),scale:function(g){return Math.pow(2,g)},zoom:function(g){return Math.log(g)/Math.LN2},distance:function(g,T){var P=T.lng-g.lng,U=T.lat-g.lat;return Math.sqrt(P*P+U*U)},infinite:!0});At.Earth=un,At.EPSG3395=Iu,At.EPSG3857=Cr,At.EPSG900913=bi,At.EPSG4326=vd,At.Simple=Yo;var no=mt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(g){return g.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(g){return g&&g.removeLayer(this),this},getPane:function(g){return this._map.getPane(g?this.options[g]||g:this.options.pane)},addInteractiveTarget:function(g){return this._map._targets[z(g)]=this,this},removeInteractiveTarget:function(g){return delete this._map._targets[z(g)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(g){var T=g.target;if(T.hasLayer(this)){if(this._map=T,this._zoomAnimated=T._zoomAnimated,this.getEvents){var P=this.getEvents();T.on(P,this),this.once("remove",function(){T.off(P,this)},this)}this.onAdd(T),this.fire("add"),T.fire("layeradd",{layer:this})}}});Zn.include({addLayer:function(g){if(!g._layerAdd)throw new Error("The provided object is not a Layer.");var T=z(g);return this._layers[T]?this:(this._layers[T]=g,g._mapToAdd=this,g.beforeAdd&&g.beforeAdd(this),this.whenReady(g._layerAdd,g),this)},removeLayer:function(g){var T=z(g);return this._layers[T]?(this._loaded&&g.onRemove(this),delete this._layers[T],this._loaded&&(this.fire("layerremove",{layer:g}),g.fire("remove")),g._map=g._mapToAdd=null,this):this},hasLayer:function(g){return z(g)in this._layers},eachLayer:function(g,T){for(var P in this._layers)g.call(T,this._layers[P]);return this},_addLayers:function(g){g=g?we(g)?g:[g]:[];for(var T=0,P=g.length;T<P;T++)this.addLayer(g[T])},_addZoomLimit:function(g){(!isNaN(g.options.maxZoom)||!isNaN(g.options.minZoom))&&(this._zoomBoundLayers[z(g)]=g,this._updateZoomLevels())},_removeZoomLimit:function(g){var T=z(g);this._zoomBoundLayers[T]&&(delete this._zoomBoundLayers[T],this._updateZoomLevels())},_updateZoomLevels:function(){var g=1/0,T=-1/0,P=this._getZoomSpan();for(var U in this._zoomBoundLayers){var K=this._zoomBoundLayers[U].options;g=K.minZoom===void 0?g:Math.min(g,K.minZoom),T=K.maxZoom===void 0?T:Math.max(T,K.maxZoom)}this._layersMaxZoom=T===-1/0?void 0:T,this._layersMinZoom=g===1/0?void 0:g,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var oc=no.extend({initialize:function(g,T){ee(this,T),this._layers={};var P,U;if(g)for(P=0,U=g.length;P<U;P++)this.addLayer(g[P])},addLayer:function(g){var T=this.getLayerId(g);return this._layers[T]=g,this._map&&this._map.addLayer(g),this},removeLayer:function(g){var T=g in this._layers?g:this.getLayerId(g);return this._map&&this._layers[T]&&this._map.removeLayer(this._layers[T]),delete this._layers[T],this},hasLayer:function(g){var T=typeof g=="number"?g:this.getLayerId(g);return T in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(g){var T=Array.prototype.slice.call(arguments,1),P,U;for(P in this._layers)U=this._layers[P],U[g]&&U[g].apply(U,T);return this},onAdd:function(g){this.eachLayer(g.addLayer,g)},onRemove:function(g){this.eachLayer(g.removeLayer,g)},eachLayer:function(g,T){for(var P in this._layers)g.call(T,this._layers[P]);return this},getLayer:function(g){return this._layers[g]},getLayers:function(){var g=[];return this.eachLayer(g.push,g),g},setZIndex:function(g){return this.invoke("setZIndex",g)},getLayerId:function(g){return z(g)}}),cf=function(g,T){return new oc(g,T)},ko=oc.extend({addLayer:function(g){return this.hasLayer(g)?this:(g.addEventParent(this),oc.prototype.addLayer.call(this,g),this.fire("layeradd",{layer:g}))},removeLayer:function(g){return this.hasLayer(g)?(g in this._layers&&(g=this._layers[g]),g.removeEventParent(this),oc.prototype.removeLayer.call(this,g),this.fire("layerremove",{layer:g})):this},setStyle:function(g){return this.invoke("setStyle",g)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var g=new Mt;for(var T in this._layers){var P=this._layers[T];g.extend(P.getBounds?P.getBounds():P.getLatLng())}return g}}),zh=function(g,T){return new ko(g,T)},Po=ln.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(g){ee(this,g)},createIcon:function(g){return this._createIcon("icon",g)},createShadow:function(g){return this._createIcon("shadow",g)},_createIcon:function(g,T){var P=this._getIconUrl(g);if(!P){if(g==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var U=this._createImg(P,T&&T.tagName==="IMG"?T:null);return this._setIconStyles(U,g),(this.options.crossOrigin||this.options.crossOrigin==="")&&(U.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),U},_setIconStyles:function(g,T){var P=this.options,U=P[T+"Size"];typeof U=="number"&&(U=[U,U]);var K=jt(U),he=jt(T==="shadow"&&P.shadowAnchor||P.iconAnchor||K&&K.divideBy(2,!0));g.className="leaflet-marker-"+T+" "+(P.className||""),he&&(g.style.marginLeft=-he.x+"px",g.style.marginTop=-he.y+"px"),K&&(g.style.width=K.x+"px",g.style.height=K.y+"px")},_createImg:function(g,T){return T=T||document.createElement("img"),T.src=g,T},_getIconUrl:function(g){return ot.retina&&this.options[g+"RetinaUrl"]||this.options[g+"Url"]}});function Yc(g){return new Po(g)}var Kc=Po.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(g){return typeof Kc.imagePath!="string"&&(Kc.imagePath=this._detectIconPath()),(this.options.imagePath||Kc.imagePath)+Po.prototype._getIconUrl.call(this,g)},_stripUrl:function(g){var T=function(P,U,K){var he=U.exec(P);return he&&he[K]};return g=T(g,/^url\((['"])?(.+)\1\)$/,2),g&&T(g,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var g=ai("div","leaflet-default-icon-path",document.body),T=$a(g,"background-image")||$a(g,"backgroundImage");if(document.body.removeChild(g),T=this._stripUrl(T),T)return T;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),Jc=Io.extend({initialize:function(g){this._marker=g},addHooks:function(){var g=this._marker._icon;this._draggable||(this._draggable=new xr(g,g,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Nn(g,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&fr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(g){var T=this._marker,P=T._map,U=this._marker.options.autoPanSpeed,K=this._marker.options.autoPanPadding,he=bl(T._icon),De=P.getPixelBounds(),We=P.getPixelOrigin(),ht=pt(De.min._subtract(We).add(K),De.max._subtract(We).subtract(K));if(!ht.contains(he)){var Ct=jt((Math.max(ht.max.x,he.x)-ht.max.x)/(De.max.x-ht.max.x)-(Math.min(ht.min.x,he.x)-ht.min.x)/(De.min.x-ht.min.x),(Math.max(ht.max.y,he.y)-ht.max.y)/(De.max.y-ht.max.y)-(Math.min(ht.min.y,he.y)-ht.min.y)/(De.min.y-ht.min.y)).multiplyBy(U);P.panBy(Ct,{animate:!1}),this._draggable._newPos._add(Ct),this._draggable._startPos._add(Ct),Vi(T._icon,this._draggable._newPos),this._onDrag(g),this._panRequest=$t(this._adjustPan.bind(this,g))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(g){this._marker.options.autoPan&&(Zt(this._panRequest),this._panRequest=$t(this._adjustPan.bind(this,g)))},_onDrag:function(g){var T=this._marker,P=T._shadow,U=bl(T._icon),K=T._map.layerPointToLatLng(U);P&&Vi(P,U),T._latlng=K,g.latlng=K,g.oldLatLng=this._oldLatLng,T.fire("move",g).fire("drag",g)},_onDragEnd:function(g){Zt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",g)}}),Ko=no.extend({options:{icon:new Kc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(g,T){ee(this,T),this._latlng=Ft(g)},onAdd:function(g){this._zoomAnimated=this._zoomAnimated&&g.options.markerZoomAnimation,this._zoomAnimated&&g.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(g){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&g.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(g){var T=this._latlng;return this._latlng=Ft(g),this.update(),this.fire("move",{oldLatLng:T,latlng:this._latlng})},setZIndexOffset:function(g){return this.options.zIndexOffset=g,this.update()},getIcon:function(){return this.options.icon},setIcon:function(g){return this.options.icon=g,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var g=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(g)}return this},_initIcon:function(){var g=this.options,T="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=g.icon.createIcon(this._icon),U=!1;P!==this._icon&&(this._icon&&this._removeIcon(),U=!0,g.title&&(P.title=g.title),P.tagName==="IMG"&&(P.alt=g.alt||"")),Nn(P,T),g.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,g.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&hn(P,"focus",this._panOnFocus,this);var K=g.icon.createShadow(this._shadow),he=!1;K!==this._shadow&&(this._removeShadow(),he=!0),K&&(Nn(K,T),K.alt=""),this._shadow=K,g.opacity<1&&this._updateOpacity(),U&&this.getPane().appendChild(this._icon),this._initInteraction(),K&&he&&this.getPane(g.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Jt(this._icon,"focus",this._panOnFocus,this),wi(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wi(this._shadow),this._shadow=null},_setPos:function(g){this._icon&&Vi(this._icon,g),this._shadow&&Vi(this._shadow,g),this._zIndex=g.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(g){this._icon&&(this._icon.style.zIndex=this._zIndex+g)},_animateZoom:function(g){var T=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center).round();this._setPos(T)},_initInteraction:function(){if(this.options.interactive&&(Nn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Jc)){var g=this.options.draggable;this.dragging&&(g=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Jc(this),g&&this.dragging.enable()}},setOpacity:function(g){return this.options.opacity=g,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var g=this.options.opacity;this._icon&&Xi(this._icon,g),this._shadow&&Xi(this._shadow,g)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var g=this._map;if(g){var T=this.options.icon.options,P=T.iconSize?jt(T.iconSize):jt(0,0),U=T.iconAnchor?jt(T.iconAnchor):jt(0,0);g.panInside(this._latlng,{paddingTopLeft:U,paddingBottomRight:P.subtract(U)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function bd(g,T){return new Ko(g,T)}var Do=no.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(g){this._renderer=g.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(g){return ee(this,g),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&g&&Object.prototype.hasOwnProperty.call(g,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Jo=Do.extend({options:{fill:!0,radius:10},initialize:function(g,T){ee(this,T),this._latlng=Ft(g),this._radius=this.options.radius},setLatLng:function(g){var T=this._latlng;return this._latlng=Ft(g),this.redraw(),this.fire("move",{oldLatLng:T,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(g){return this.options.radius=this._radius=g,this.redraw()},getRadius:function(){return this._radius},setStyle:function(g){var T=g&&g.radius||this._radius;return Do.prototype.setStyle.call(this,g),this.setRadius(T),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var g=this._radius,T=this._radiusY||g,P=this._clickTolerance(),U=[g+P,T+P];this._pxBounds=new Oe(this._point.subtract(U),this._point.add(U))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(g){return g.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function xd(g,T){return new Jo(g,T)}var sc=Jo.extend({initialize:function(g,T,P){if(typeof T=="number"&&(T=a({},P,{radius:T})),ee(this,T),this._latlng=Ft(g),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(g){return this._mRadius=g,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var g=[this._radius,this._radiusY||this._radius];return new Mt(this._map.layerPointToLatLng(this._point.subtract(g)),this._map.layerPointToLatLng(this._point.add(g)))},setStyle:Do.prototype.setStyle,_project:function(){var g=this._latlng.lng,T=this._latlng.lat,P=this._map,U=P.options.crs;if(U.distance===un.distance){var K=Math.PI/180,he=this._mRadius/un.R/K,De=P.project([T+he,g]),We=P.project([T-he,g]),ht=De.add(We).divideBy(2),Ct=P.unproject(ht).lat,Wt=Math.acos((Math.cos(he*K)-Math.sin(T*K)*Math.sin(Ct*K))/(Math.cos(T*K)*Math.cos(Ct*K)))/K;(isNaN(Wt)||Wt===0)&&(Wt=he/Math.cos(Math.PI/180*T)),this._point=ht.subtract(P.getPixelOrigin()),this._radius=isNaN(Wt)?0:ht.x-P.project([Ct,g-Wt]).x,this._radiusY=ht.y-De.y}else{var gn=U.unproject(U.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(gn).x}this._updateBounds()}});function uf(g,T,P){return new sc(g,T,P)}var Xs=Do.extend({options:{smoothFactor:1,noClip:!1},initialize:function(g,T){ee(this,T),this._setLatLngs(g)},getLatLngs:function(){return this._latlngs},setLatLngs:function(g){return this._setLatLngs(g),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(g){for(var T=1/0,P=null,U=_s,K,he,De=0,We=this._parts.length;De<We;De++)for(var ht=this._parts[De],Ct=1,Wt=ht.length;Ct<Wt;Ct++){K=ht[Ct-1],he=ht[Ct];var gn=U(g,K,he,!0);gn<T&&(T=gn,P=U(g,K,he))}return P&&(P.distance=Math.sqrt(T)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ac(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(g,T){return T=T||this._defaultShape(),g=Ft(g),T.push(g),this._bounds.extend(g),this.redraw()},_setLatLngs:function(g){this._bounds=new Mt,this._latlngs=this._convertLatLngs(g)},_defaultShape:function(){return ya(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(g){for(var T=[],P=ya(g),U=0,K=g.length;U<K;U++)P?(T[U]=Ft(g[U]),this._bounds.extend(T[U])):T[U]=this._convertLatLngs(g[U]);return T},_project:function(){var g=new Oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,g),this._bounds.isValid()&&g.isValid()&&(this._rawPxBounds=g,this._updateBounds())},_updateBounds:function(){var g=this._clickTolerance(),T=new qe(g,g);this._rawPxBounds&&(this._pxBounds=new Oe([this._rawPxBounds.min.subtract(T),this._rawPxBounds.max.add(T)]))},_projectLatlngs:function(g,T,P){var U=g[0]instanceof Nt,K=g.length,he,De;if(U){for(De=[],he=0;he<K;he++)De[he]=this._map.latLngToLayerPoint(g[he]),P.extend(De[he]);T.push(De)}else for(he=0;he<K;he++)this._projectLatlngs(g[he],T,P)},_clipPoints:function(){var g=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}var T=this._parts,P,U,K,he,De,We,ht;for(P=0,K=0,he=this._rings.length;P<he;P++)for(ht=this._rings[P],U=0,De=ht.length;U<De-1;U++)We=Mu(ht[U],ht[U+1],g,U,!0),We&&(T[K]=T[K]||[],T[K].push(We[0]),(We[1]!==ht[U+1]||U===De-2)&&(T[K].push(We[1]),K++))}},_simplifyPoints:function(){for(var g=this._parts,T=this.options.smoothFactor,P=0,U=g.length;P<U;P++)g[P]=Wc(g[P],T)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(g,T){var P,U,K,he,De,We,ht=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(P=0,he=this._parts.length;P<he;P++)for(We=this._parts[P],U=0,De=We.length,K=De-1;U<De;K=U++)if(!(!T&&U===0)&&rr(g,We[K],We[U])<=ht)return!0;return!1}});function hf(g,T){return new Xs(g,T)}Xs._flat=pr;var bs=Xs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yi(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(g){var T=Xs.prototype._convertLatLngs.call(this,g),P=T.length;return P>=2&&T[0]instanceof Nt&&T[0].equals(T[P-1])&&T.pop(),T},_setLatLngs:function(g){Xs.prototype._setLatLngs.call(this,g),ya(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ya(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var g=this._renderer._bounds,T=this.options.weight,P=new qe(T,T);if(g=new Oe(g.min.subtract(P),g.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}for(var U=0,K=this._rings.length,he;U<K;U++)he=Xo(this._rings[U],g,!0),he.length&&this._parts.push(he)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(g){var T=!1,P,U,K,he,De,We,ht,Ct;if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(he=0,ht=this._parts.length;he<ht;he++)for(P=this._parts[he],De=0,Ct=P.length,We=Ct-1;De<Ct;We=De++)U=P[De],K=P[We],U.y>g.y!=K.y>g.y&&g.x<(K.x-U.x)*(g.y-U.y)/(K.y-U.y)+U.x&&(T=!T);return T||Xs.prototype._containsPoint.call(this,g,!0)}});function df(g,T){return new bs(g,T)}var Qo=ko.extend({initialize:function(g,T){ee(this,T),this._layers={},g&&this.addData(g)},addData:function(g){var T=we(g)?g:g.features,P,U,K;if(T){for(P=0,U=T.length;P<U;P++)K=T[P],(K.geometries||K.geometry||K.features||K.coordinates)&&this.addData(K);return this}var he=this.options;if(he.filter&&!he.filter(g))return this;var De=_a(g,he);return De?(De.feature=cc(g),De.defaultOptions=De.options,this.resetStyle(De),he.onEachFeature&&he.onEachFeature(g,De),this.addLayer(De)):this},resetStyle:function(g){return g===void 0?this.eachLayer(this.resetStyle,this):(g.options=a({},g.defaultOptions),this._setLayerStyle(g,this.options.style),this)},setStyle:function(g){return this.eachLayer(function(T){this._setLayerStyle(T,g)},this)},_setLayerStyle:function(g,T){g.setStyle&&(typeof T=="function"&&(T=T(g.feature)),g.setStyle(T))}});function _a(g,T){var P=g.type==="Feature"?g.geometry:g,U=P?P.coordinates:null,K=[],he=T&&T.pointToLayer,De=T&&T.coordsToLatLng||io,We,ht,Ct,Wt;if(!U&&!P)return null;switch(P.type){case"Point":return We=De(U),Ys(he,g,We,T);case"MultiPoint":for(Ct=0,Wt=U.length;Ct<Wt;Ct++)We=De(U[Ct]),K.push(Ys(he,g,We,T));return new ko(K);case"LineString":case"MultiLineString":return ht=Cl(U,P.type==="LineString"?0:1,De),new Xs(ht,T);case"Polygon":case"MultiPolygon":return ht=Cl(U,P.type==="Polygon"?1:2,De),new bs(ht,T);case"GeometryCollection":for(Ct=0,Wt=P.geometries.length;Ct<Wt;Ct++){var gn=_a({geometry:P.geometries[Ct],type:"Feature",properties:g.properties},T);gn&&K.push(gn)}return new ko(K);case"FeatureCollection":for(Ct=0,Wt=P.features.length;Ct<Wt;Ct++){var qn=_a(P.features[Ct],T);qn&&K.push(qn)}return new ko(K);default:throw new Error("Invalid GeoJSON object.")}}function Ys(g,T,P,U){return g?g(T,P):new Ko(P,U&&U.markersInheritOptions&&U)}function io(g){return new Nt(g[1],g[0],g[2])}function Cl(g,T,P){for(var U=[],K=0,he=g.length,De;K<he;K++)De=T?Cl(g[K],T-1,P):(P||io)(g[K]),U.push(De);return U}function Qc(g,T){return g=Ft(g),g.alt!==void 0?[X(g.lng,T),X(g.lat,T),X(g.alt,T)]:[X(g.lng,T),X(g.lat,T)]}function lc(g,T,P,U){for(var K=[],he=0,De=g.length;he<De;he++)K.push(T?lc(g[he],ya(g[he])?0:T-1,P,U):Qc(g[he],U));return!T&&P&&K.length>0&&K.push(K[0].slice()),K}function xs(g,T){return g.feature?a({},g.feature,{geometry:T}):cc(T)}function cc(g){return g.type==="Feature"||g.type==="FeatureCollection"?g:{type:"Feature",properties:{},geometry:g}}var ro={toGeoJSON:function(g){return xs(this,{type:"Point",coordinates:Qc(this.getLatLng(),g)})}};Ko.include(ro),sc.include(ro),Jo.include(ro),Xs.include({toGeoJSON:function(g){var T=!ya(this._latlngs),P=lc(this._latlngs,T?1:0,!1,g);return xs(this,{type:(T?"Multi":"")+"LineString",coordinates:P})}}),bs.include({toGeoJSON:function(g){var T=!ya(this._latlngs),P=T&&!ya(this._latlngs[0]),U=lc(this._latlngs,P?2:T?1:0,!0,g);return T||(U=[U]),xs(this,{type:(P?"Multi":"")+"Polygon",coordinates:U})}}),oc.include({toMultiPoint:function(g){var T=[];return this.eachLayer(function(P){T.push(P.toGeoJSON(g).geometry.coordinates)}),xs(this,{type:"MultiPoint",coordinates:T})},toGeoJSON:function(g){var T=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(T==="MultiPoint")return this.toMultiPoint(g);var P=T==="GeometryCollection",U=[];return this.eachLayer(function(K){if(K.toGeoJSON){var he=K.toGeoJSON(g);if(P)U.push(he.geometry);else{var De=cc(he);De.type==="FeatureCollection"?U.push.apply(U,De.features):U.push(De)}}}),P?xs(this,{geometries:U,type:"GeometryCollection"}):{type:"FeatureCollection",features:U}}});function eu(g,T){return new Qo(g,T)}var ku=eu,uc=no.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(g,T,P){this._url=g,this._bounds=It(T),ee(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Nn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wi(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(g){return this.options.opacity=g,this._image&&this._updateOpacity(),this},setStyle:function(g){return g.opacity&&this.setOpacity(g.opacity),this},bringToFront:function(){return this._map&&Xn(this._image),this},bringToBack:function(){return this._map&&vl(this._image),this},setUrl:function(g){return this._url=g,this._image&&(this._image.src=g),this},setBounds:function(g){return this._bounds=It(g),this._map&&this._reset(),this},getEvents:function(){var g={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var g=this._url.tagName==="IMG",T=this._image=g?this._url:ai("img");if(Nn(T,"leaflet-image-layer"),this._zoomAnimated&&Nn(T,"leaflet-zoom-animated"),this.options.className&&Nn(T,this.options.className),T.onselectstart=Z,T.onmousemove=Z,T.onload=m(this.fire,this,"load"),T.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),g){this._url=T.src;return}T.src=this._url,T.alt=this.options.alt},_animateZoom:function(g){var T=this._map.getZoomScale(g.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,g.zoom,g.center).min;Go(this._image,P,T)},_reset:function(){var g=this._image,T=new Oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=T.getSize();Vi(g,T.min),g.style.width=P.x+"px",g.style.height=P.y+"px"},_updateOpacity:function(){Xi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var g=this.options.errorOverlayUrl;g&&this._url!==g&&(this._url=g,this._image.src=g)},getCenter:function(){return this._bounds.getCenter()}}),ff=function(g,T,P){return new uc(g,T,P)},Ml=uc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var g=this._url.tagName==="VIDEO",T=this._image=g?this._url:ai("video");if(Nn(T,"leaflet-image-layer"),this._zoomAnimated&&Nn(T,"leaflet-zoom-animated"),this.options.className&&Nn(T,this.options.className),T.onselectstart=Z,T.onmousemove=Z,T.onloadeddata=m(this.fire,this,"load"),g){for(var P=T.getElementsByTagName("source"),U=[],K=0;K<P.length;K++)U.push(P[K].src);this._url=P.length>0?U:[T.src];return}we(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(T.style,"objectFit")&&(T.style.objectFit="fill"),T.autoplay=!!this.options.autoplay,T.loop=!!this.options.loop,T.muted=!!this.options.muted,T.playsInline=!!this.options.playsInline;for(var he=0;he<this._url.length;he++){var De=ai("source");De.src=this._url[he],T.appendChild(De)}}});function hc(g,T,P){return new Ml(g,T,P)}var Ih=uc.extend({_initImage:function(){var g=this._image=this._url;Nn(g,"leaflet-image-layer"),this._zoomAnimated&&Nn(g,"leaflet-zoom-animated"),this.options.className&&Nn(g,this.options.className),g.onselectstart=Z,g.onmousemove=Z}});function ci(g,T,P){return new Ih(g,T,P)}var Wr=no.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(g,T){g&&(g instanceof Nt||we(g))?(this._latlng=Ft(g),ee(this,T)):(ee(this,g),this._source=T),this.options.content&&(this._content=this.options.content)},openOn:function(g){return g=arguments.length?g:this._source._map,g.hasLayer(this)||g.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(g){return this._map?this.close():(arguments.length?this._source=g:g=this._source,this._prepareOpen(),this.openOn(g._map)),this},onAdd:function(g){this._zoomAnimated=g._zoomAnimated,this._container||this._initLayout(),g._fadeAnimated&&Xi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),g._fadeAnimated&&Xi(this._container,1),this.bringToFront(),this.options.interactive&&(Nn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(g){g._fadeAnimated?(Xi(this._container,0),this._removeTimeout=setTimeout(m(wi,void 0,this._container),200)):wi(this._container),this.options.interactive&&(fr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(g){return this._latlng=Ft(g),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(g){return this._content=g,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var g={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Xn(this._container),this},bringToBack:function(){return this._map&&vl(this._container),this},_prepareOpen:function(g){var T=this._source;if(!T._map)return!1;if(T instanceof ko){T=null;var P=this._source._layers;for(var U in P)if(P[U]._map){T=P[U];break}if(!T)return!1;this._source=T}if(!g)if(T.getCenter)g=T.getCenter();else if(T.getLatLng)g=T.getLatLng();else if(T.getBounds)g=T.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(g),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var g=this._contentNode,T=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof T=="string")g.innerHTML=T;else{for(;g.hasChildNodes();)g.removeChild(g.firstChild);g.appendChild(T)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var g=this._map.latLngToLayerPoint(this._latlng),T=jt(this.options.offset),P=this._getAnchor();this._zoomAnimated?Vi(this._container,g.add(P)):T=T.add(g).add(P);var U=this._containerBottom=-T.y,K=this._containerLeft=-Math.round(this._containerWidth/2)+T.x;this._container.style.bottom=U+"px",this._container.style.left=K+"px"}},_getAnchor:function(){return[0,0]}});Zn.include({_initOverlay:function(g,T,P,U){var K=T;return K instanceof g||(K=new g(U).setContent(T)),P&&K.setLatLng(P),K}}),no.include({_initOverlay:function(g,T,P,U){var K=P;return K instanceof g?(ee(K,U),K._source=this):(K=T&&!U?T:new g(U,this),K.setContent(P)),K}});var zl=Wr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(g){return g=arguments.length?g:this._source._map,!g.hasLayer(this)&&g._popup&&g._popup.options.autoClose&&g.removeLayer(g._popup),g._popup=this,Wr.prototype.openOn.call(this,g)},onAdd:function(g){Wr.prototype.onAdd.call(this,g),g.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Do||this._source.on("preclick",Qi))},onRemove:function(g){Wr.prototype.onRemove.call(this,g),g.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Do||this._source.off("preclick",Qi))},getEvents:function(){var g=Wr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(g.preclick=this.close),this.options.keepInView&&(g.moveend=this._adjustPan),g},_initLayout:function(){var g="leaflet-popup",T=this._container=ai("div",g+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=ai("div",g+"-content-wrapper",T);if(this._contentNode=ai("div",g+"-content",P),Qa(T),Ba(this._contentNode),hn(T,"contextmenu",Qi),this._tipContainer=ai("div",g+"-tip-container",T),this._tip=ai("div",g+"-tip",this._tipContainer),this.options.closeButton){var U=this._closeButton=ai("a",g+"-close-button",T);U.setAttribute("role","button"),U.setAttribute("aria-label","Close popup"),U.href="#close",U.innerHTML='<span aria-hidden="true">&#215;</span>',hn(U,"click",function(K){Un(K),this.close()},this)}},_updateLayout:function(){var g=this._contentNode,T=g.style;T.width="",T.whiteSpace="nowrap";var P=g.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),T.width=P+1+"px",T.whiteSpace="",T.height="";var U=g.offsetHeight,K=this.options.maxHeight,he="leaflet-popup-scrolled";K&&U>K?(T.height=K+"px",Nn(g,he)):fr(g,he),this._containerWidth=this._container.offsetWidth},_animateZoom:function(g){var T=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center),P=this._getAnchor();Vi(this._container,T.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var g=this._map,T=parseInt($a(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+T,U=this._containerWidth,K=new qe(this._containerLeft,-P-this._containerBottom);K._add(bl(this._container));var he=g.layerPointToContainerPoint(K),De=jt(this.options.autoPanPadding),We=jt(this.options.autoPanPaddingTopLeft||De),ht=jt(this.options.autoPanPaddingBottomRight||De),Ct=g.getSize(),Wt=0,gn=0;he.x+U+ht.x>Ct.x&&(Wt=he.x+U-Ct.x+ht.x),he.x-Wt-We.x<0&&(Wt=he.x-We.x),he.y+P+ht.y>Ct.y&&(gn=he.y+P-Ct.y+ht.y),he.y-gn-We.y<0&&(gn=he.y-We.y),(Wt||gn)&&(this.options.keepInView&&(this._autopanning=!0),g.fire("autopanstart").panBy([Wt,gn]))}},_getAnchor:function(){return jt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pu=function(g,T){return new zl(g,T)};Zn.mergeOptions({closePopupOnClick:!0}),Zn.include({openPopup:function(g,T,P){return this._initOverlay(zl,g,T,P).openOn(this),this},closePopup:function(g){return g=arguments.length?g:this._popup,g&&g.close(),this}}),no.include({bindPopup:function(g,T){return this._popup=this._initOverlay(zl,this._popup,g,T),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(g){return this._popup&&(this instanceof ko||(this._popup._source=this),this._popup._prepareOpen(g||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(g){return this._popup&&this._popup.setContent(g),this},getPopup:function(){return this._popup},_openPopup:function(g){if(!(!this._popup||!this._map)){eo(g);var T=g.layer||g.target;if(this._popup._source===T&&!(T instanceof Do)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(g.latlng);return}this._popup._source=T,this.openPopup(g.latlng)}},_movePopup:function(g){this._popup.setLatLng(g.latlng)},_onKeyPress:function(g){g.originalEvent.keyCode===13&&this._openPopup(g)}});var dc=Wr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(g){Wr.prototype.onAdd.call(this,g),this.setOpacity(this.options.opacity),g.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(g){Wr.prototype.onRemove.call(this,g),g.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var g=Wr.prototype.getEvents.call(this);return this.options.permanent||(g.preclick=this.close),g},_initLayout:function(){var g="leaflet-tooltip",T=g+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ai("div",T),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+z(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(g){var T,P,U=this._map,K=this._container,he=U.latLngToContainerPoint(U.getCenter()),De=U.layerPointToContainerPoint(g),We=this.options.direction,ht=K.offsetWidth,Ct=K.offsetHeight,Wt=jt(this.options.offset),gn=this._getAnchor();We==="top"?(T=ht/2,P=Ct):We==="bottom"?(T=ht/2,P=0):We==="center"?(T=ht/2,P=Ct/2):We==="right"?(T=0,P=Ct/2):We==="left"?(T=ht,P=Ct/2):De.x<he.x?(We="right",T=0,P=Ct/2):(We="left",T=ht+(Wt.x+gn.x)*2,P=Ct/2),g=g.subtract(jt(T,P,!0)).add(Wt).add(gn),fr(K,"leaflet-tooltip-right"),fr(K,"leaflet-tooltip-left"),fr(K,"leaflet-tooltip-top"),fr(K,"leaflet-tooltip-bottom"),Nn(K,"leaflet-tooltip-"+We),Vi(K,g)},_updatePosition:function(){var g=this._map.latLngToLayerPoint(this._latlng);this._setPosition(g)},setOpacity:function(g){this.options.opacity=g,this._container&&Xi(this._container,g)},_animateZoom:function(g){var T=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center);this._setPosition(T)},_getAnchor:function(){return jt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),fc=function(g,T){return new dc(g,T)};Zn.include({openTooltip:function(g,T,P){return this._initOverlay(dc,g,T,P).openOn(this),this},closeTooltip:function(g){return g.close(),this}}),no.include({bindTooltip:function(g,T){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(dc,this._tooltip,g,T),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(g){if(!(!g&&this._tooltipHandlersAdded)){var T=g?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[T](P),this._tooltipHandlersAdded=!g}},openTooltip:function(g){return this._tooltip&&(this instanceof ko||(this._tooltip._source=this),this._tooltip._prepareOpen(g)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(g){return this._tooltip&&this._tooltip.setContent(g),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(g){var T=typeof g.getElement=="function"&&g.getElement();T&&(hn(T,"focus",function(){this._tooltip._source=g,this.openTooltip()},this),hn(T,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(g){var T=typeof g.getElement=="function"&&g.getElement();T&&T.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(g){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var T=this;this._map.once("moveend",function(){T._openOnceFlag=!1,T._openTooltip(g)});return}this._tooltip._source=g.layer||g.target,this.openTooltip(this._tooltip.options.sticky?g.latlng:void 0)}},_moveTooltip:function(g){var T=g.latlng,P,U;this._tooltip.options.sticky&&g.originalEvent&&(P=this._map.mouseEventToContainerPoint(g.originalEvent),U=this._map.containerPointToLayerPoint(P),T=this._map.layerPointToLatLng(U)),this._tooltip.setLatLng(T)}});var tu=Po.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(g){var T=g&&g.tagName==="DIV"?g:document.createElement("div"),P=this.options;if(P.html instanceof Element?(ja(T),T.appendChild(P.html)):T.innerHTML=P.html!==!1?P.html:"",P.bgPos){var U=jt(P.bgPos);T.style.backgroundPosition=-U.x+"px "+-U.y+"px"}return this._setIconStyles(T,"icon"),T},createShadow:function(){return null}});function nu(g){return new tu(g)}Po.Default=Kc;var va=no.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ot.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(g){ee(this,g)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(g){g._addZoomLimit(this)},onRemove:function(g){this._removeAllTiles(),wi(this._container),g._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Xn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vl(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(g){return this.options.opacity=g,this._updateOpacity(),this},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var g=this._clampZoom(this._map.getZoom());g!==this._tileZoom&&(this._tileZoom=g,this._updateLevels()),this._update()}return this},getEvents:function(){var g={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=k(this._onMoveEnd,this.options.updateInterval,this)),g.move=this._onMove),this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},createTile:function(){return document.createElement("div")},getTileSize:function(){var g=this.options.tileSize;return g instanceof qe?g:new qe(g,g)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(g){for(var T=this.getPane().children,P=-g(-1/0,1/0),U=0,K=T.length,he;U<K;U++)he=T[U].style.zIndex,T[U]!==this._container&&he&&(P=g(P,+he));isFinite(P)&&(this.options.zIndex=P+g(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ot.ielt9){Xi(this._container,this.options.opacity);var g=+new Date,T=!1,P=!1;for(var U in this._tiles){var K=this._tiles[U];if(!(!K.current||!K.loaded)){var he=Math.min(1,(g-K.loaded)/200);Xi(K.el,he),he<1?T=!0:(K.active?P=!0:this._onOpaqueTile(K),K.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),T&&(Zt(this._fadeFrame),this._fadeFrame=$t(this._updateOpacity,this))}},_onOpaqueTile:Z,_initContainer:function(){this._container||(this._container=ai("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var g=this._tileZoom,T=this.options.maxZoom;if(g!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===g?(this._levels[P].el.style.zIndex=T-Math.abs(g-P),this._onUpdateLevel(P)):(wi(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var U=this._levels[g],K=this._map;return U||(U=this._levels[g]={},U.el=ai("div","leaflet-tile-container leaflet-zoom-animated",this._container),U.el.style.zIndex=T,U.origin=K.project(K.unproject(K.getPixelOrigin()),g).round(),U.zoom=g,this._setZoomTransform(U,K.getCenter(),K.getZoom()),Z(U.el.offsetWidth),this._onCreateLevel(U)),this._level=U,U}},_onUpdateLevel:Z,_onRemoveLevel:Z,_onCreateLevel:Z,_pruneTiles:function(){if(this._map){var g,T,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(g in this._tiles)T=this._tiles[g],T.retain=T.current;for(g in this._tiles)if(T=this._tiles[g],T.current&&!T.active){var U=T.coords;this._retainParent(U.x,U.y,U.z,U.z-5)||this._retainChildren(U.x,U.y,U.z,U.z+2)}for(g in this._tiles)this._tiles[g].retain||this._removeTile(g)}},_removeTilesAtZoom:function(g){for(var T in this._tiles)this._tiles[T].coords.z===g&&this._removeTile(T)},_removeAllTiles:function(){for(var g in this._tiles)this._removeTile(g)},_invalidateAll:function(){for(var g in this._levels)wi(this._levels[g].el),this._onRemoveLevel(Number(g)),delete this._levels[g];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(g,T,P,U){var K=Math.floor(g/2),he=Math.floor(T/2),De=P-1,We=new qe(+K,+he);We.z=+De;var ht=this._tileCoordsToKey(We),Ct=this._tiles[ht];return Ct&&Ct.active?(Ct.retain=!0,!0):(Ct&&Ct.loaded&&(Ct.retain=!0),De>U?this._retainParent(K,he,De,U):!1)},_retainChildren:function(g,T,P,U){for(var K=2*g;K<2*g+2;K++)for(var he=2*T;he<2*T+2;he++){var De=new qe(K,he);De.z=P+1;var We=this._tileCoordsToKey(De),ht=this._tiles[We];if(ht&&ht.active){ht.retain=!0;continue}else ht&&ht.loaded&&(ht.retain=!0);P+1<U&&this._retainChildren(K,he,P+1,U)}},_resetView:function(g){var T=g&&(g.pinch||g.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),T,T)},_animateZoom:function(g){this._setView(g.center,g.zoom,!0,g.noUpdate)},_clampZoom:function(g){var T=this.options;return T.minNativeZoom!==void 0&&g<T.minNativeZoom?T.minNativeZoom:T.maxNativeZoom!==void 0&&T.maxNativeZoom<g?T.maxNativeZoom:g},_setView:function(g,T,P,U){var K=Math.round(T);this.options.maxZoom!==void 0&&K>this.options.maxZoom||this.options.minZoom!==void 0&&K<this.options.minZoom?K=void 0:K=this._clampZoom(K);var he=this.options.updateWhenZooming&&K!==this._tileZoom;(!U||he)&&(this._tileZoom=K,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),K!==void 0&&this._update(g),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(g,T)},_setZoomTransforms:function(g,T){for(var P in this._levels)this._setZoomTransform(this._levels[P],g,T)},_setZoomTransform:function(g,T,P){var U=this._map.getZoomScale(P,g.zoom),K=g.origin.multiplyBy(U).subtract(this._map._getNewPixelOrigin(T,P)).round();ot.any3d?Go(g.el,K,U):Vi(g.el,K)},_resetGrid:function(){var g=this._map,T=g.options.crs,P=this._tileSize=this.getTileSize(),U=this._tileZoom,K=this._map.getPixelWorldBounds(this._tileZoom);K&&(this._globalTileRange=this._pxBoundsToTileRange(K)),this._wrapX=T.wrapLng&&!this.options.noWrap&&[Math.floor(g.project([0,T.wrapLng[0]],U).x/P.x),Math.ceil(g.project([0,T.wrapLng[1]],U).x/P.y)],this._wrapY=T.wrapLat&&!this.options.noWrap&&[Math.floor(g.project([T.wrapLat[0],0],U).y/P.x),Math.ceil(g.project([T.wrapLat[1],0],U).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(g){var T=this._map,P=T._animatingZoom?Math.max(T._animateToZoom,T.getZoom()):T.getZoom(),U=T.getZoomScale(P,this._tileZoom),K=T.project(g,this._tileZoom).floor(),he=T.getSize().divideBy(U*2);return new Oe(K.subtract(he),K.add(he))},_update:function(g){var T=this._map;if(T){var P=this._clampZoom(T.getZoom());if(g===void 0&&(g=T.getCenter()),this._tileZoom!==void 0){var U=this._getTiledPixelBounds(g),K=this._pxBoundsToTileRange(U),he=K.getCenter(),De=[],We=this.options.keepBuffer,ht=new Oe(K.getBottomLeft().subtract([We,-We]),K.getTopRight().add([We,-We]));if(!(isFinite(K.min.x)&&isFinite(K.min.y)&&isFinite(K.max.x)&&isFinite(K.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ct in this._tiles){var Wt=this._tiles[Ct].coords;(Wt.z!==this._tileZoom||!ht.contains(new qe(Wt.x,Wt.y)))&&(this._tiles[Ct].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(g,P);return}for(var gn=K.min.y;gn<=K.max.y;gn++)for(var qn=K.min.x;qn<=K.max.x;qn++){var kr=new qe(qn,gn);if(kr.z=this._tileZoom,!!this._isValidTile(kr)){var mr=this._tiles[this._tileCoordsToKey(kr)];mr?mr.current=!0:De.push(kr)}}if(De.sort(function(Ci,ui){return Ci.distanceTo(he)-ui.distanceTo(he)}),De.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var lo=document.createDocumentFragment();for(qn=0;qn<De.length;qn++)this._addTile(De[qn],lo);this._level.el.appendChild(lo)}}}},_isValidTile:function(g){var T=this._map.options.crs;if(!T.infinite){var P=this._globalTileRange;if(!T.wrapLng&&(g.x<P.min.x||g.x>P.max.x)||!T.wrapLat&&(g.y<P.min.y||g.y>P.max.y))return!1}if(!this.options.bounds)return!0;var U=this._tileCoordsToBounds(g);return It(this.options.bounds).overlaps(U)},_keyToBounds:function(g){return this._tileCoordsToBounds(this._keyToTileCoords(g))},_tileCoordsToNwSe:function(g){var T=this._map,P=this.getTileSize(),U=g.scaleBy(P),K=U.add(P),he=T.unproject(U,g.z),De=T.unproject(K,g.z);return[he,De]},_tileCoordsToBounds:function(g){var T=this._tileCoordsToNwSe(g),P=new Mt(T[0],T[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(g){return g.x+":"+g.y+":"+g.z},_keyToTileCoords:function(g){var T=g.split(":"),P=new qe(+T[0],+T[1]);return P.z=+T[2],P},_removeTile:function(g){var T=this._tiles[g];T&&(wi(T.el),delete this._tiles[g],this.fire("tileunload",{tile:T.el,coords:this._keyToTileCoords(g)}))},_initTile:function(g){Nn(g,"leaflet-tile");var T=this.getTileSize();g.style.width=T.x+"px",g.style.height=T.y+"px",g.onselectstart=Z,g.onmousemove=Z,ot.ielt9&&this.options.opacity<1&&Xi(g,this.options.opacity)},_addTile:function(g,T){var P=this._getTilePos(g),U=this._tileCoordsToKey(g),K=this.createTile(this._wrapCoords(g),m(this._tileReady,this,g));this._initTile(K),this.createTile.length<2&&$t(m(this._tileReady,this,g,null,K)),Vi(K,P),this._tiles[U]={el:K,coords:g,current:!0},T.appendChild(K),this.fire("tileloadstart",{tile:K,coords:g})},_tileReady:function(g,T,P){T&&this.fire("tileerror",{error:T,tile:P,coords:g});var U=this._tileCoordsToKey(g);P=this._tiles[U],P&&(P.loaded=+new Date,this._map._fadeAnimated?(Xi(P.el,0),Zt(this._fadeFrame),this._fadeFrame=$t(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),T||(Nn(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:g})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ot.ielt9||!this._map._fadeAnimated?$t(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(g){return g.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(g){var T=new qe(this._wrapX?B(g.x,this._wrapX):g.x,this._wrapY?B(g.y,this._wrapY):g.y);return T.z=g.z,T},_pxBoundsToTileRange:function(g){var T=this.getTileSize();return new Oe(g.min.unscaleBy(T).floor(),g.max.unscaleBy(T).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var g in this._tiles)if(!this._tiles[g].loaded)return!1;return!0}});function wd(g){return new va(g)}var Ks=va.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(g,T){this._url=g,T=ee(this,T),T.detectRetina&&ot.retina&&T.maxZoom>0?(T.tileSize=Math.floor(T.tileSize/2),T.zoomReverse?(T.zoomOffset--,T.minZoom=Math.min(T.maxZoom,T.minZoom+1)):(T.zoomOffset++,T.maxZoom=Math.max(T.minZoom,T.maxZoom-1)),T.minZoom=Math.max(0,T.minZoom)):T.zoomReverse?T.minZoom=Math.min(T.maxZoom,T.minZoom):T.maxZoom=Math.max(T.minZoom,T.maxZoom),typeof T.subdomains=="string"&&(T.subdomains=T.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(g,T){return this._url===g&&T===void 0&&(T=!0),this._url=g,T||this.redraw(),this},createTile:function(g,T){var P=document.createElement("img");return hn(P,"load",m(this._tileOnLoad,this,T,P)),hn(P,"error",m(this._tileOnError,this,T,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(g),P},getTileUrl:function(g){var T={r:ot.retina?"@2x":"",s:this._getSubdomain(g),x:g.x,y:g.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-g.y;this.options.tms&&(T.y=P),T["-y"]=P}return Ae(this._url,a(T,this.options))},_tileOnLoad:function(g,T){ot.ielt9?setTimeout(m(g,this,null,T),0):g(null,T)},_tileOnError:function(g,T,P){var U=this.options.errorTileUrl;U&&T.getAttribute("src")!==U&&(T.src=U),g(P,T)},_onTileRemove:function(g){g.tile.onload=null},_getZoomForUrl:function(){var g=this._tileZoom,T=this.options.maxZoom,P=this.options.zoomReverse,U=this.options.zoomOffset;return P&&(g=T-g),g+U},_getSubdomain:function(g){var T=Math.abs(g.x+g.y)%this.options.subdomains.length;return this.options.subdomains[T]},_abortLoading:function(){var g,T;for(g in this._tiles)if(this._tiles[g].coords.z!==this._tileZoom&&(T=this._tiles[g].el,T.onload=Z,T.onerror=Z,!T.complete)){T.src=Se;var P=this._tiles[g].coords;wi(T),delete this._tiles[g],this.fire("tileabort",{tile:T,coords:P})}},_removeTile:function(g){var T=this._tiles[g];if(T)return T.el.setAttribute("src",Se),va.prototype._removeTile.call(this,g)},_tileReady:function(g,T,P){if(!(!this._map||P&&P.getAttribute("src")===Se))return va.prototype._tileReady.call(this,g,T,P)}});function ao(g,T){return new Ks(g,T)}var es=Ks.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(g,T){this._url=g;var P=a({},this.defaultWmsParams);for(var U in T)U in this.options||(P[U]=T[U]);T=ee(this,T);var K=T.detectRetina&&ot.retina?2:1,he=this.getTileSize();P.width=he.x*K,P.height=he.y*K,this.wmsParams=P},onAdd:function(g){this._crs=this.options.crs||g.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var T=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[T]=this._crs.code,Ks.prototype.onAdd.call(this,g)},getTileUrl:function(g){var T=this._tileCoordsToNwSe(g),P=this._crs,U=pt(P.project(T[0]),P.project(T[1])),K=U.min,he=U.max,De=(this._wmsVersion>=1.3&&this._crs===vd?[K.y,K.x,he.y,he.x]:[K.x,K.y,he.x,he.y]).join(","),We=Ks.prototype.getTileUrl.call(this,g);return We+ae(this.wmsParams,We,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+De},setParams:function(g,T){return a(this.wmsParams,g),T||this.redraw(),this}});function Ua(g,T){return new es(g,T)}Ks.WMS=es,ao.wms=Ua;var ba=no.extend({options:{padding:.1},initialize:function(g){ee(this,g),z(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Nn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var g={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(g.zoomanim=this._onAnimZoom),g},_onAnimZoom:function(g){this._updateTransform(g.center,g.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(g,T){var P=this._map.getZoomScale(T,this._zoom),U=this._map.getSize().multiplyBy(.5+this.options.padding),K=this._map.project(this._center,T),he=U.multiplyBy(-P).add(K).subtract(this._map._getNewPixelOrigin(g,T));ot.any3d?Go(this._container,he,P):Vi(this._container,he)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var g in this._layers)this._layers[g]._reset()},_onZoomEnd:function(){for(var g in this._layers)this._layers[g]._project()},_updatePaths:function(){for(var g in this._layers)this._layers[g]._update()},_update:function(){var g=this.options.padding,T=this._map.getSize(),P=this._map.containerPointToLayerPoint(T.multiplyBy(-g)).round();this._bounds=new Oe(P,P.add(T.multiplyBy(1+g*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Il=ba.extend({options:{tolerance:0},getEvents:function(){var g=ba.prototype.getEvents.call(this);return g.viewprereset=this._onViewPreReset,g},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ba.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var g=this._container=document.createElement("canvas");hn(g,"mousemove",this._onMouseMove,this),hn(g,"click dblclick mousedown mouseup contextmenu",this._onClick,this),hn(g,"mouseout",this._handleMouseOut,this),g._leaflet_disable_events=!0,this._ctx=g.getContext("2d")},_destroyContainer:function(){Zt(this._redrawRequest),delete this._ctx,wi(this._container),Jt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var g;this._redrawBounds=null;for(var T in this._layers)g=this._layers[T],g._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ba.prototype._update.call(this);var g=this._bounds,T=this._container,P=g.getSize(),U=ot.retina?2:1;Vi(T,g.min),T.width=U*P.x,T.height=U*P.y,T.style.width=P.x+"px",T.style.height=P.y+"px",ot.retina&&this._ctx.scale(2,2),this._ctx.translate(-g.min.x,-g.min.y),this.fire("update")}},_reset:function(){ba.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(g){this._updateDashArray(g),this._layers[z(g)]=g;var T=g._order={layer:g,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=T),this._drawLast=T,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(g){this._requestRedraw(g)},_removePath:function(g){var T=g._order,P=T.next,U=T.prev;P?P.prev=U:this._drawLast=U,U?U.next=P:this._drawFirst=P,delete g._order,delete this._layers[z(g)],this._requestRedraw(g)},_updatePath:function(g){this._extendRedrawBounds(g),g._project(),g._update(),this._requestRedraw(g)},_updateStyle:function(g){this._updateDashArray(g),this._requestRedraw(g)},_updateDashArray:function(g){if(typeof g.options.dashArray=="string"){var T=g.options.dashArray.split(/[, ]+/),P=[],U,K;for(K=0;K<T.length;K++){if(U=Number(T[K]),isNaN(U))return;P.push(U)}g.options._dashArray=P}else g.options._dashArray=g.options.dashArray},_requestRedraw:function(g){this._map&&(this._extendRedrawBounds(g),this._redrawRequest=this._redrawRequest||$t(this._redraw,this))},_extendRedrawBounds:function(g){if(g._pxBounds){var T=(g.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Oe,this._redrawBounds.extend(g._pxBounds.min.subtract([T,T])),this._redrawBounds.extend(g._pxBounds.max.add([T,T]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var g=this._redrawBounds;if(g){var T=g.getSize();this._ctx.clearRect(g.min.x,g.min.y,T.x,T.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var g,T=this._redrawBounds;if(this._ctx.save(),T){var P=T.getSize();this._ctx.beginPath(),this._ctx.rect(T.min.x,T.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var U=this._drawFirst;U;U=U.next)g=U.layer,(!T||g._pxBounds&&g._pxBounds.intersects(T))&&g._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(g,T){if(this._drawing){var P,U,K,he,De=g._parts,We=De.length,ht=this._ctx;if(We){for(ht.beginPath(),P=0;P<We;P++){for(U=0,K=De[P].length;U<K;U++)he=De[P][U],ht[U?"lineTo":"moveTo"](he.x,he.y);T&&ht.closePath()}this._fillStroke(ht,g)}}},_updateCircle:function(g){if(!(!this._drawing||g._empty())){var T=g._point,P=this._ctx,U=Math.max(Math.round(g._radius),1),K=(Math.max(Math.round(g._radiusY),1)||U)/U;K!==1&&(P.save(),P.scale(1,K)),P.beginPath(),P.arc(T.x,T.y/K,U,0,Math.PI*2,!1),K!==1&&P.restore(),this._fillStroke(P,g)}},_fillStroke:function(g,T){var P=T.options;P.fill&&(g.globalAlpha=P.fillOpacity,g.fillStyle=P.fillColor||P.color,g.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(g.setLineDash&&g.setLineDash(T.options&&T.options._dashArray||[]),g.globalAlpha=P.opacity,g.lineWidth=P.weight,g.strokeStyle=P.color,g.lineCap=P.lineCap,g.lineJoin=P.lineJoin,g.stroke())},_onClick:function(g){for(var T=this._map.mouseEventToLayerPoint(g),P,U,K=this._drawFirst;K;K=K.next)P=K.layer,P.options.interactive&&P._containsPoint(T)&&(!(g.type==="click"||g.type==="preclick")||!this._map._draggableMoved(P))&&(U=P);this._fireEvent(U?[U]:!1,g)},_onMouseMove:function(g){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var T=this._map.mouseEventToLayerPoint(g);this._handleMouseHover(g,T)}},_handleMouseOut:function(g){var T=this._hoveredLayer;T&&(fr(this._container,"leaflet-interactive"),this._fireEvent([T],g,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(g,T){if(!this._mouseHoverThrottled){for(var P,U,K=this._drawFirst;K;K=K.next)P=K.layer,P.options.interactive&&P._containsPoint(T)&&(U=P);U!==this._hoveredLayer&&(this._handleMouseOut(g),U&&(Nn(this._container,"leaflet-interactive"),this._fireEvent([U],g,"mouseover"),this._hoveredLayer=U)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,g),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(g,T,P){this._map._fireDOMEvent(T,P||T.type,g)},_bringToFront:function(g){var T=g._order;if(T){var P=T.next,U=T.prev;if(P)P.prev=U;else return;U?U.next=P:P&&(this._drawFirst=P),T.prev=this._drawLast,this._drawLast.next=T,T.next=null,this._drawLast=T,this._requestRedraw(g)}},_bringToBack:function(g){var T=g._order;if(T){var P=T.next,U=T.prev;if(U)U.next=P;else return;P?P.prev=U:U&&(this._drawLast=U),T.prev=null,T.next=this._drawFirst,this._drawFirst.prev=T,this._drawFirst=T,this._requestRedraw(g)}}});function kl(g){return ot.canvas?new Il(g):null}var Js=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(g){return document.createElement("<lvml:"+g+' class="lvml">')}}catch{}return function(g){return document.createElement("<"+g+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Pl={_initContainer:function(){this._container=ai("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ba.prototype._update.call(this),this.fire("update"))},_initPath:function(g){var T=g._container=Js("shape");Nn(T,"leaflet-vml-shape "+(this.options.className||"")),T.coordsize="1 1",g._path=Js("path"),T.appendChild(g._path),this._updateStyle(g),this._layers[z(g)]=g},_addPath:function(g){var T=g._container;this._container.appendChild(T),g.options.interactive&&g.addInteractiveTarget(T)},_removePath:function(g){var T=g._container;wi(T),g.removeInteractiveTarget(T),delete this._layers[z(g)]},_updateStyle:function(g){var T=g._stroke,P=g._fill,U=g.options,K=g._container;K.stroked=!!U.stroke,K.filled=!!U.fill,U.stroke?(T||(T=g._stroke=Js("stroke")),K.appendChild(T),T.weight=U.weight+"px",T.color=U.color,T.opacity=U.opacity,U.dashArray?T.dashStyle=we(U.dashArray)?U.dashArray.join(" "):U.dashArray.replace(/( *, *)/g," "):T.dashStyle="",T.endcap=U.lineCap.replace("butt","flat"),T.joinstyle=U.lineJoin):T&&(K.removeChild(T),g._stroke=null),U.fill?(P||(P=g._fill=Js("fill")),K.appendChild(P),P.color=U.fillColor||U.color,P.opacity=U.fillOpacity):P&&(K.removeChild(P),g._fill=null)},_updateCircle:function(g){var T=g._point.round(),P=Math.round(g._radius),U=Math.round(g._radiusY||P);this._setPath(g,g._empty()?"M0 0":"AL "+T.x+","+T.y+" "+P+","+U+" 0,"+65535*360)},_setPath:function(g,T){g._path.v=T},_bringToFront:function(g){Xn(g._container)},_bringToBack:function(g){vl(g._container)}},Va=ot.vml?Js:qr,pc=ba.extend({_initContainer:function(){this._container=Va("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Va("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wi(this._container),Jt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ba.prototype._update.call(this);var g=this._bounds,T=g.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(T))&&(this._svgSize=T,P.setAttribute("width",T.x),P.setAttribute("height",T.y)),Vi(P,g.min),P.setAttribute("viewBox",[g.min.x,g.min.y,T.x,T.y].join(" ")),this.fire("update")}},_initPath:function(g){var T=g._path=Va("path");g.options.className&&Nn(T,g.options.className),g.options.interactive&&Nn(T,"leaflet-interactive"),this._updateStyle(g),this._layers[z(g)]=g},_addPath:function(g){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(g._path),g.addInteractiveTarget(g._path)},_removePath:function(g){wi(g._path),g.removeInteractiveTarget(g._path),delete this._layers[z(g)]},_updatePath:function(g){g._project(),g._update()},_updateStyle:function(g){var T=g._path,P=g.options;T&&(P.stroke?(T.setAttribute("stroke",P.color),T.setAttribute("stroke-opacity",P.opacity),T.setAttribute("stroke-width",P.weight),T.setAttribute("stroke-linecap",P.lineCap),T.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?T.setAttribute("stroke-dasharray",P.dashArray):T.removeAttribute("stroke-dasharray"),P.dashOffset?T.setAttribute("stroke-dashoffset",P.dashOffset):T.removeAttribute("stroke-dashoffset")):T.setAttribute("stroke","none"),P.fill?(T.setAttribute("fill",P.fillColor||P.color),T.setAttribute("fill-opacity",P.fillOpacity),T.setAttribute("fill-rule",P.fillRule||"evenodd")):T.setAttribute("fill","none"))},_updatePoly:function(g,T){this._setPath(g,da(g._parts,T))},_updateCircle:function(g){var T=g._point,P=Math.max(Math.round(g._radius),1),U=Math.max(Math.round(g._radiusY),1)||P,K="a"+P+","+U+" 0 1,0 ",he=g._empty()?"M0 0":"M"+(T.x-P)+","+T.y+K+P*2+",0 "+K+-P*2+",0 ";this._setPath(g,he)},_setPath:function(g,T){g._path.setAttribute("d",T)},_bringToFront:function(g){Xn(g._path)},_bringToBack:function(g){vl(g._path)}});ot.vml&&pc.include(Pl);function mc(g){return ot.svg||ot.vml?new pc(g):null}Zn.include({getRenderer:function(g){var T=g.options.renderer||this._getPaneRenderer(g.options.pane)||this.options.renderer||this._renderer;return T||(T=this._renderer=this._createRenderer()),this.hasLayer(T)||this.addLayer(T),T},_getPaneRenderer:function(g){if(g==="overlayPane"||g===void 0)return!1;var T=this._paneRenderers[g];return T===void 0&&(T=this._createRenderer({pane:g}),this._paneRenderers[g]=T),T},_createRenderer:function(g){return this.options.preferCanvas&&kl(g)||mc(g)}});var Rn=bs.extend({initialize:function(g,T){bs.prototype.initialize.call(this,this._boundsToLatLngs(g),T)},setBounds:function(g){return this.setLatLngs(this._boundsToLatLngs(g))},_boundsToLatLngs:function(g){return g=It(g),[g.getSouthWest(),g.getNorthWest(),g.getNorthEast(),g.getSouthEast()]}});function kh(g,T){return new Rn(g,T)}pc.create=Va,pc.pointsToPath=da,Qo.geometryToLayer=_a,Qo.coordsToLatLng=io,Qo.coordsToLatLngs=Cl,Qo.latLngToCoords=Qc,Qo.latLngsToCoords=lc,Qo.getFeature=xs,Qo.asFeature=cc,Zn.mergeOptions({boxZoom:!0});var oo=Io.extend({initialize:function(g){this._map=g,this._container=g._container,this._pane=g._panes.overlayPane,this._resetStateTimeout=0,g.on("unload",this._destroy,this)},addHooks:function(){hn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Jt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wi(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(g){if(!g.shiftKey||g.which!==1&&g.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ys(),Hc(),this._startPoint=this._map.mouseEventToContainerPoint(g),hn(document,{contextmenu:eo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(g){this._moved||(this._moved=!0,this._box=ai("div","leaflet-zoom-box",this._container),Nn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(g);var T=new Oe(this._point,this._startPoint),P=T.getSize();Vi(this._box,T.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(wi(this._box),fr(this._container,"leaflet-crosshair")),vo(),qs(),Jt(document,{contextmenu:eo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(g){if(!(g.which!==1&&g.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var T=new Mt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(T).fire("boxzoomend",{boxZoomBounds:T})}},_onKeyDown:function(g){g.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Zn.addInitHook("addHandler","boxZoom",oo),Zn.mergeOptions({doubleClickZoom:!0});var Du=Io.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(g){var T=this._map,P=T.getZoom(),U=T.options.zoomDelta,K=g.originalEvent.shiftKey?P-U:P+U;T.options.doubleClickZoom==="center"?T.setZoom(K):T.setZoomAround(g.containerPoint,K)}});Zn.addInitHook("addHandler","doubleClickZoom",Du),Zn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var so=Io.extend({addHooks:function(){if(!this._draggable){var g=this._map;this._draggable=new xr(g._mapPane,g._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),g.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),g.on("zoomend",this._onZoomEnd,this),g.whenReady(this._onZoomEnd,this))}Nn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){fr(this._map._container,"leaflet-grab"),fr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var g=this._map;if(g._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var T=It(this._map.options.maxBounds);this._offsetLimit=pt(this._map.latLngToContainerPoint(T.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(T.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;g.fire("movestart").fire("dragstart"),g.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(g){if(this._map.options.inertia){var T=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(T),this._prunePositions(T)}this._map.fire("move",g).fire("drag",g)},_prunePositions:function(g){for(;this._positions.length>1&&g-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var g=this._map.getSize().divideBy(2),T=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=T.subtract(g).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(g,T){return g-(g-T)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var g=this._draggable._newPos.subtract(this._draggable._startPos),T=this._offsetLimit;g.x<T.min.x&&(g.x=this._viscousLimit(g.x,T.min.x)),g.y<T.min.y&&(g.y=this._viscousLimit(g.y,T.min.y)),g.x>T.max.x&&(g.x=this._viscousLimit(g.x,T.max.x)),g.y>T.max.y&&(g.y=this._viscousLimit(g.y,T.max.y)),this._draggable._newPos=this._draggable._startPos.add(g)}},_onPreDragWrap:function(){var g=this._worldWidth,T=Math.round(g/2),P=this._initialWorldOffset,U=this._draggable._newPos.x,K=(U-T+P)%g+T-P,he=(U+T+P)%g-T-P,De=Math.abs(K+P)<Math.abs(he+P)?K:he;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=De},_onDragEnd:function(g){var T=this._map,P=T.options,U=!P.inertia||g.noInertia||this._times.length<2;if(T.fire("dragend",g),U)T.fire("moveend");else{this._prunePositions(+new Date);var K=this._lastPos.subtract(this._positions[0]),he=(this._lastTime-this._times[0])/1e3,De=P.easeLinearity,We=K.multiplyBy(De/he),ht=We.distanceTo([0,0]),Ct=Math.min(P.inertiaMaxSpeed,ht),Wt=We.multiplyBy(Ct/ht),gn=Ct/(P.inertiaDeceleration*De),qn=Wt.multiplyBy(-gn/2).round();!qn.x&&!qn.y?T.fire("moveend"):(qn=T._limitOffset(qn,T.options.maxBounds),$t(function(){T.panBy(qn,{duration:gn,easeLinearity:De,noMoveStart:!0,animate:!0})}))}}});Zn.addInitHook("addHandler","dragging",so),Zn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Sd=Io.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(g){this._map=g,this._setPanDelta(g.options.keyboardPanDelta),this._setZoomDelta(g.options.zoomDelta)},addHooks:function(){var g=this._map._container;g.tabIndex<=0&&(g.tabIndex="0"),hn(g,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Jt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var g=document.body,T=document.documentElement,P=g.scrollTop||T.scrollTop,U=g.scrollLeft||T.scrollLeft;this._map._container.focus(),window.scrollTo(U,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(g){var T=this._panKeys={},P=this.keyCodes,U,K;for(U=0,K=P.left.length;U<K;U++)T[P.left[U]]=[-1*g,0];for(U=0,K=P.right.length;U<K;U++)T[P.right[U]]=[g,0];for(U=0,K=P.down.length;U<K;U++)T[P.down[U]]=[0,g];for(U=0,K=P.up.length;U<K;U++)T[P.up[U]]=[0,-1*g]},_setZoomDelta:function(g){var T=this._zoomKeys={},P=this.keyCodes,U,K;for(U=0,K=P.zoomIn.length;U<K;U++)T[P.zoomIn[U]]=g;for(U=0,K=P.zoomOut.length;U<K;U++)T[P.zoomOut[U]]=-g},_addHooks:function(){hn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Jt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(g){if(!(g.altKey||g.ctrlKey||g.metaKey)){var T=g.keyCode,P=this._map,U;if(T in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(U=this._panKeys[T],g.shiftKey&&(U=jt(U).multiplyBy(3)),P.options.maxBounds&&(U=P._limitOffset(jt(U),P.options.maxBounds)),P.options.worldCopyJump){var K=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(U)));P.panTo(K)}else P.panBy(U)}else if(T in this._zoomKeys)P.setZoom(P.getZoom()+(g.shiftKey?3:1)*this._zoomKeys[T]);else if(T===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;eo(g)}}});Zn.addInitHook("addHandler","keyboard",Sd),Zn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Lu=Io.extend({addHooks:function(){hn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Jt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(g){var T=Ir(g),P=this._map.options.wheelDebounceTime;this._delta+=T,this._lastMousePos=this._map.mouseEventToContainerPoint(g),this._startTime||(this._startTime=+new Date);var U=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),U),eo(g)},_performZoom:function(){var g=this._map,T=g.getZoom(),P=this._map.options.zoomSnap||0;g._stop();var U=this._delta/(this._map.options.wheelPxPerZoomLevel*4),K=4*Math.log(2/(1+Math.exp(-Math.abs(U))))/Math.LN2,he=P?Math.ceil(K/P)*P:K,De=g._limitZoom(T+(this._delta>0?he:-he))-T;this._delta=0,this._startTime=null,De&&(g.options.scrollWheelZoom==="center"?g.setZoom(T+De):g.setZoomAround(this._lastMousePos,T+De))}});Zn.addInitHook("addHandler","scrollWheelZoom",Lu);var Dl=600;Zn.mergeOptions({tapHold:ot.touchNative&&ot.safari&&ot.mobile,tapTolerance:15});var Ph=Io.extend({addHooks:function(){hn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Jt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(g){if(clearTimeout(this._holdTimeout),g.touches.length===1){var T=g.touches[0];this._startPos=this._newPos=new qe(T.clientX,T.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(hn(document,"touchend",Un),hn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",T))},this),Dl),hn(document,"touchend touchcancel contextmenu",this._cancel,this),hn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function g(){Jt(document,"touchend",Un),Jt(document,"touchend touchcancel",g)},_cancel:function(){clearTimeout(this._holdTimeout),Jt(document,"touchend touchcancel contextmenu",this._cancel,this),Jt(document,"touchmove",this._onMove,this)},_onMove:function(g){var T=g.touches[0];this._newPos=new qe(T.clientX,T.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(g,T){var P=new MouseEvent(g,{bubbles:!0,cancelable:!0,view:window,screenX:T.screenX,screenY:T.screenY,clientX:T.clientX,clientY:T.clientY});P._simulated=!0,T.target.dispatchEvent(P)}});Zn.addInitHook("addHandler","tapHold",Ph),Zn.mergeOptions({touchZoom:ot.touch,bounceAtZoomLimits:!0});var Ru=Io.extend({addHooks:function(){Nn(this._map._container,"leaflet-touch-zoom"),hn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){fr(this._map._container,"leaflet-touch-zoom"),Jt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(g){var T=this._map;if(!(!g.touches||g.touches.length!==2||T._animatingZoom||this._zooming)){var P=T.mouseEventToContainerPoint(g.touches[0]),U=T.mouseEventToContainerPoint(g.touches[1]);this._centerPoint=T.getSize()._divideBy(2),this._startLatLng=T.containerPointToLatLng(this._centerPoint),T.options.touchZoom!=="center"&&(this._pinchStartLatLng=T.containerPointToLatLng(P.add(U)._divideBy(2))),this._startDist=P.distanceTo(U),this._startZoom=T.getZoom(),this._moved=!1,this._zooming=!0,T._stop(),hn(document,"touchmove",this._onTouchMove,this),hn(document,"touchend touchcancel",this._onTouchEnd,this),Un(g)}},_onTouchMove:function(g){if(!(!g.touches||g.touches.length!==2||!this._zooming)){var T=this._map,P=T.mouseEventToContainerPoint(g.touches[0]),U=T.mouseEventToContainerPoint(g.touches[1]),K=P.distanceTo(U)/this._startDist;if(this._zoom=T.getScaleZoom(K,this._startZoom),!T.options.bounceAtZoomLimits&&(this._zoom<T.getMinZoom()&&K<1||this._zoom>T.getMaxZoom()&&K>1)&&(this._zoom=T._limitZoom(this._zoom)),T.options.touchZoom==="center"){if(this._center=this._startLatLng,K===1)return}else{var he=P._add(U)._divideBy(2)._subtract(this._centerPoint);if(K===1&&he.x===0&&he.y===0)return;this._center=T.unproject(T.project(this._pinchStartLatLng,this._zoom).subtract(he),this._zoom)}this._moved||(T._moveStart(!0,!1),this._moved=!0),Zt(this._animRequest);var De=m(T._move,T,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$t(De,this,!0),Un(g)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Zt(this._animRequest),Jt(document,"touchmove",this._onTouchMove,this),Jt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Zn.addInitHook("addHandler","touchZoom",Ru),Zn.BoxZoom=oo,Zn.DoubleClickZoom=Du,Zn.Drag=so,Zn.Keyboard=Sd,Zn.ScrollWheelZoom=Lu,Zn.TapHold=Ph,Zn.TouchZoom=Ru,r.Bounds=Oe,r.Browser=ot,r.CRS=At,r.Canvas=Il,r.Circle=sc,r.CircleMarker=Jo,r.Class=ln,r.Control=ia,r.DivIcon=tu,r.DivOverlay=Wr,r.DomEvent=Tu,r.DomUtil=Hr,r.Draggable=xr,r.Evented=mt,r.FeatureGroup=ko,r.GeoJSON=Qo,r.GridLayer=va,r.Handler=Io,r.Icon=Po,r.ImageOverlay=uc,r.LatLng=Nt,r.LatLngBounds=Mt,r.Layer=no,r.LayerGroup=oc,r.LineUtil=Xc,r.Map=Zn,r.Marker=Ko,r.Mixin=mp,r.Path=Do,r.Point=qe,r.PolyUtil=Cu,r.Polygon=bs,r.Polyline=Xs,r.Popup=zl,r.PosAnimation=Sl,r.Projection=lf,r.Rectangle=Rn,r.Renderer=ba,r.SVG=pc,r.SVGOverlay=Ih,r.TileLayer=Ks,r.Tooltip=dc,r.Transformation=Wn,r.Util=cn,r.VideoOverlay=Ml,r.bind=m,r.bounds=pt,r.canvas=kl,r.circle=uf,r.circleMarker=xd,r.control=$n,r.divIcon=nu,r.extend=a,r.featureGroup=zh,r.geoJSON=eu,r.geoJson=ku,r.gridLayer=wd,r.icon=Yc,r.imageOverlay=ff,r.latLng=Ft,r.latLngBounds=It,r.layerGroup=cf,r.map=zi,r.marker=bd,r.point=jt,r.polygon=df,r.polyline=hf,r.popup=Pu,r.rectangle=kh,r.setOptions=ee,r.stamp=z,r.svg=mc,r.svgOverlay=ci,r.tileLayer=ao,r.tooltip=fc,r.transformation=Bn,r.version=u,r.videoOverlay=hc;var Ll=window.L;r.noConflict=function(){return window.L=Ll,this},window.L=r}))})(B_,B_.exports)),B_.exports}var Yx=f$();const Zr=gv(Yx);function g4(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function y4(e,t){return t==null?function(u,a){const f=de.useRef(void 0);return f.current||(f.current=e(u,a)),f}:function(u,a){const f=de.useRef(void 0);f.current||(f.current=e(u,a));const m=de.useRef(u),{instance:c}=f.current;return de.useEffect(function(){m.current!==u&&(t(c,u,m.current),m.current=u)},[c,u,t]),f}}function p$(e,t){de.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function _4(e){return function(r){const u=p4(),a=e(m4(r,u),u);return r$(u.map,r.attribution),h$(a.current,r.eventHandlers),p$(a.current,u),a}}function m$(e,t){const r=y4(e,t),u=_4(r);return c$(u)}function g$(e,t){const r=y4(e,t),u=_4(r);return u$(u)}function y$(e,t,r){const{opacity:u,zIndex:a}=t;u!=null&&u!==r.opacity&&e.setOpacity(u),a!=null&&a!==r.zIndex&&e.setZIndex(a)}function v4(){return p4().map}function _$({bounds:e,boundsOptions:t,center:r,children:u,className:a,id:f,placeholder:m,style:c,whenReady:z,zoom:k,...B},Z){const[X]=de.useState({className:a,id:f,style:c}),[J,ce]=de.useState(null),ee=de.useRef(void 0);de.useImperativeHandle(Z,()=>J?.map??null,[J]);const ae=de.useCallback(Ae=>{if(Ae!==null&&!ee.current){const we=new Yx.Map(Ae,B);ee.current=we,r!=null&&k!=null?we.setView(r,k):e!=null&&we.fitBounds(e,t),z!=null&&we.whenReady(z),ce(s$(we))}},[]);de.useEffect(()=>()=>{J?.map.remove()},[J]);const Me=J?uh.createElement(xT,{value:J},u):m??null;return uh.createElement("div",{...X,ref:ae},Me)}const v$=de.forwardRef(_$),b$=m$(function({position:t,...r},u){const a=new Yx.Marker(t,r);return g4(a,l$(u,{overlayContainer:a}))},function(t,r,u){r.position!==u.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==u.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==u.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==u.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==u.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),x$=g$(function({url:t,...r},u){const a=new Yx.TileLayer(t,m4(r,u));return g4(a,u)},function(t,r,u){y$(t,r,u);const{url:a}=r;a!=null&&a!==u.url&&t.setUrl(a)});var vb={exports:{}};var w$=vb.exports,mA;function S$(){return mA||(mA=1,(function(e,t){(function(r,u){e.exports=u()})(w$,(function(){var r={},u={};function a(m,c,z){if(u[m]=z,m==="index"){var k="var sharedModule = {}; ("+u.shared+")(sharedModule); ("+u.worker+")(sharedModule);",B={};return u.shared(B),u.index(r,B),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([k],{type:"text/javascript"}))),r}}a("shared",["exports"],(function(m){function c(s,n,o,p){return new(o||(o=Promise))((function(_,x){function w(O){try{I(p.next(O))}catch(j){x(j)}}function C(O){try{I(p.throw(O))}catch(j){x(j)}}function I(O){var j;O.done?_(O.value):(j=O.value,j instanceof o?j:new o((function(V){V(j)}))).then(w,C)}I((p=p.apply(s,n||[])).next())}))}function z(s,n){this.x=s,this.y=n}function k(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var B,Z;typeof SuppressedError=="function"&&SuppressedError,z.prototype={clone(){return new z(this.x,this.y)},add(s){return this.clone()._add(s)},sub(s){return this.clone()._sub(s)},multByPoint(s){return this.clone()._multByPoint(s)},divByPoint(s){return this.clone()._divByPoint(s)},mult(s){return this.clone()._mult(s)},div(s){return this.clone()._div(s)},rotate(s){return this.clone()._rotate(s)},rotateAround(s,n){return this.clone()._rotateAround(s,n)},matMult(s){return this.clone()._matMult(s)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(s){return this.x===s.x&&this.y===s.y},dist(s){return Math.sqrt(this.distSqr(s))},distSqr(s){const n=s.x-this.x,o=s.y-this.y;return n*n+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith(s){return this.angleWithSep(s.x,s.y)},angleWithSep(s,n){return Math.atan2(this.x*n-this.y*s,this.x*s+this.y*n)},_matMult(s){const n=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=n,this},_add(s){return this.x+=s.x,this.y+=s.y,this},_sub(s){return this.x-=s.x,this.y-=s.y,this},_mult(s){return this.x*=s,this.y*=s,this},_div(s){return this.x/=s,this.y/=s,this},_multByPoint(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint(s){return this.x/=s.x,this.y/=s.y,this},_unit(){return this._div(this.mag()),this},_perp(){const s=this.y;return this.y=this.x,this.x=-s,this},_rotate(s){const n=Math.cos(s),o=Math.sin(s),p=o*this.x+n*this.y;return this.x=n*this.x-o*this.y,this.y=p,this},_rotateAround(s,n){const o=Math.cos(s),p=Math.sin(s),_=n.y+p*(this.x-n.x)+o*(this.y-n.y);return this.x=n.x+o*(this.x-n.x)-p*(this.y-n.y),this.y=_,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:z},z.convert=function(s){if(s instanceof z)return s;if(Array.isArray(s))return new z(+s[0],+s[1]);if(s.x!==void 0&&s.y!==void 0)return new z(+s.x,+s.y);throw new Error("Expected [x, y] or {x, y} point format")};var X=(function(){if(Z)return B;function s(n,o,p,_){this.cx=3*n,this.bx=3*(p-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(_-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=o,this.p2x=p,this.p2y=_}return Z=1,B=s,s.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,o){if(o===void 0&&(o=1e-6),n<0)return 0;if(n>1)return 1;for(var p=n,_=0;_<8;_++){var x=this.sampleCurveX(p)-n;if(Math.abs(x)<o)return p;var w=this.sampleCurveDerivativeX(p);if(Math.abs(w)<1e-6)break;p-=x/w}var C=0,I=1;for(p=n,_=0;_<20&&(x=this.sampleCurveX(p),!(Math.abs(x-n)<o));_++)n>x?C=p:I=p,p=.5*(I-C)+C;return p},solve:function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))}},B})(),J=k(X);let ce,ee;function ae(){return ce==null&&(ce=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ce}function Me(){if(ee==null&&(ee=!1,ae())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let p=0;p<25;p++){const _=4*p;n.fillStyle=`rgb(${_},${_+1},${_+2})`,n.fillRect(p%5,Math.floor(p/5),1,1)}const o=n.getImageData(0,0,5,5).data;for(let p=0;p<100;p++)if(p%4!=3&&o[p]!==p){ee=!0;break}}}return ee||!1}var Ae=1e-6,we=typeof Float32Array<"u"?Float32Array:Array;function xe(){var s=new we(9);return we!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function Se(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Fe(){var s=new we(3);return we!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function Ue(s){var n=s[0],o=s[1],p=s[2];return Math.sqrt(n*n+o*o+p*p)}function it(s,n,o){var p=new we(3);return p[0]=s,p[1]=n,p[2]=o,p}function Rt(s,n,o){return s[0]=n[0]+o[0],s[1]=n[1]+o[1],s[2]=n[2]+o[2],s}function Pt(s,n,o){return s[0]=n[0]*o,s[1]=n[1]*o,s[2]=n[2]*o,s}function $t(s,n,o){var p=n[0],_=n[1],x=n[2],w=o[0],C=o[1],I=o[2];return s[0]=_*I-x*C,s[1]=x*w-p*I,s[2]=p*C-_*w,s}var Zt,cn=Ue;function ln(s,n,o){var p=n[0],_=n[1],x=n[2],w=n[3];return s[0]=o[0]*p+o[4]*_+o[8]*x+o[12]*w,s[1]=o[1]*p+o[5]*_+o[9]*x+o[13]*w,s[2]=o[2]*p+o[6]*_+o[10]*x+o[14]*w,s[3]=o[3]*p+o[7]*_+o[11]*x+o[15]*w,s}function xn(){var s=new we(4);return we!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function Ge(s,n,o,p){var _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",x=Math.PI/360;n*=x,p*=x,o*=x;var w=Math.sin(n),C=Math.cos(n),I=Math.sin(o),O=Math.cos(o),j=Math.sin(p),V=Math.cos(p);switch(_){case"xyz":s[0]=w*O*V+C*I*j,s[1]=C*I*V-w*O*j,s[2]=C*O*j+w*I*V,s[3]=C*O*V-w*I*j;break;case"xzy":s[0]=w*O*V-C*I*j,s[1]=C*I*V-w*O*j,s[2]=C*O*j+w*I*V,s[3]=C*O*V+w*I*j;break;case"yxz":s[0]=w*O*V+C*I*j,s[1]=C*I*V-w*O*j,s[2]=C*O*j-w*I*V,s[3]=C*O*V+w*I*j;break;case"yzx":s[0]=w*O*V+C*I*j,s[1]=C*I*V+w*O*j,s[2]=C*O*j-w*I*V,s[3]=C*O*V-w*I*j;break;case"zxy":s[0]=w*O*V-C*I*j,s[1]=C*I*V+w*O*j,s[2]=C*O*j+w*I*V,s[3]=C*O*V-w*I*j;break;case"zyx":s[0]=w*O*V-C*I*j,s[1]=C*I*V+w*O*j,s[2]=C*O*j-w*I*V,s[3]=C*O*V+w*I*j;break;default:throw new Error("Unknown angle order "+_)}return s}function mt(){var s=new we(2);return we!=Float32Array&&(s[0]=0,s[1]=0),s}function qe(s,n){var o=new we(2);return o[0]=s,o[1]=n,o}Fe(),Zt=new we(4),we!=Float32Array&&(Zt[0]=0,Zt[1]=0,Zt[2]=0,Zt[3]=0),Fe(),it(1,0,0),it(0,1,0),xn(),xn(),xe(),mt();const Bt=8192;function jt(s,n,o){return n*(Bt/(s.tileSize*Math.pow(2,o-s.tileID.overscaledZ)))}function Oe(s,n){return(s%n+n)%n}function pt(s,n,o){return s*(1-o)+n*o}function Mt(s){if(s<=0)return 0;if(s>=1)return 1;const n=s*s,o=n*s;return 4*(s<.5?o:3*(s-n)+o-.75)}function It(s,n,o,p){const _=new J(s,n,o,p);return x=>_.solve(x)}const Nt=It(.25,.1,.25,1);function Ft(s,n,o){return Math.min(o,Math.max(n,s))}function At(s,n,o){const p=o-n,_=((s-n)%p+p)%p+n;return _===n?o:_}function un(s,...n){for(const o of n)for(const p in o)s[p]=o[p];return s}let Cn=1;function Dn(s,n,o){const p={};for(const _ in s)p[_]=n.call(this,s[_],_,s);return p}function Wn(s,n,o){const p={};for(const _ in s)n.call(this,s[_],_,s)&&(p[_]=s[_]);return p}function Bn(s){return Array.isArray(s)?s.map(Bn):typeof s=="object"&&s?Dn(s,Bn):s}const Cr={};function bi(s){Cr[s]||(typeof console<"u"&&console.warn(s),Cr[s]=!0)}function qr(s,n,o){return(o.y-s.y)*(n.x-s.x)>(n.y-s.y)*(o.x-s.x)}function da(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Pi=null;function Ao(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const Fs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Us(s,n,o,p,_){return c(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(s,{timestamp:0});try{const w=x?.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const C=w.startsWith("BGR"),I=new Uint8ClampedArray(p*_*4);if(yield x.copyTo(I,(function(O,j,V,G,H){const te=4*Math.max(-j,0),ne=(Math.max(0,V)-V)*G*4+te,re=4*G,ue=Math.max(0,j),Ce=Math.max(0,V);return{rect:{x:ue,y:Ce,width:Math.min(O.width,j+G)-ue,height:Math.min(O.height,V+H)-Ce},layout:[{offset:ne,stride:re}]}})(s,n,o,p,_)),C)for(let O=0;O<I.length;O+=4){const j=I[O];I[O]=I[O+2],I[O+2]=j}return I}finally{x.close()}}))}let Co,Mo;function Kl(s,n,o,p){return s.addEventListener(n,o,p),{unsubscribe:()=>{s.removeEventListener(n,o,p)}}}function na(s){return s*Math.PI/180}function Xa(s){return s/Math.PI*180}const Xe={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},se={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},oe="AbortError";class ge extends Error{constructor(n=oe){super(n instanceof Error?n.message:n),this.name=oe,n instanceof Error&&n.stack&&(this.stack=n.stack)}}function Re(s){return s.name===oe}const $e={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function et(s){return $e.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const He="global-dispatcher";class Be extends Error{constructor(n,o,p,_){super(`AJAXError: ${o} (${n}): ${p}`),this.status=n,this.statusText=o,this.url=p,this.body=_}}const tt=()=>da(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,vt=function(s,n){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const p=et(s.url);if(p)return p(s,n);if(da(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:He},n)}if(!(/^file:/.test(o=s.url)||/^file:/.test(tt())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(p,_){return c(this,void 0,void 0,(function*(){const x=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:tt(),signal:_.signal});let w,C;p.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{w=yield fetch(x)}catch(O){throw Re(O)?O:new Be(0,O.message,p.url,new Blob)}if(!w.ok){const O=yield w.blob();throw new Be(w.status,w.statusText,p.url,O)}C=p.type==="arrayBuffer"||p.type==="image"?w.arrayBuffer():p.type==="json"?w.json():w.text();const I=yield C;return _.signal.throwIfAborted(),{data:I,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}}))})(s,n);if(da(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:He},n)}var o;return(function(p,_){return new Promise(((x,w)=>{var C;const I=new XMLHttpRequest;I.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(I.responseType="arraybuffer");for(const O in p.headers)I.setRequestHeader(O,p.headers[O]);p.type==="json"&&(I.responseType="text",!((C=p.headers)===null||C===void 0)&&C.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=p.credentials==="include",I.onerror=()=>{w(new Error(I.statusText))},I.onload=()=>{if(!_.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let O=I.response;if(p.type==="json")try{O=JSON.parse(I.response)}catch(j){return void w(j)}x({data:O,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const O=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});w(new Be(I.status,I.statusText,p.url,O))}},_.signal.addEventListener("abort",(()=>{I.abort(),w(new ge(_.signal.reason))})),I.send(p.body)}))})(s,n)};function _t(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const n=new URL(s),o=window.location;return n.protocol===o.protocol&&n.host===o.host}function Xt(s,n,o){o[s]&&o[s].indexOf(n)!==-1||(o[s]=o[s]||[],o[s].push(n))}function an(s,n,o){if(o&&o[s]){const p=o[s].indexOf(n);p!==-1&&o[s].splice(p,1)}}class Sn{constructor(n,o={}){un(this,o),this.type=n}}class pi extends Sn{constructor(n,o={}){super("error",un({error:n},o))}}class ti{on(n,o){return this._listeners=this._listeners||{},Xt(n,o,this._listeners),{unsubscribe:()=>{this.off(n,o)}}}off(n,o){return an(n,o,this._listeners),an(n,o,this._oneTimeListeners),this}once(n,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Xt(n,o,this._oneTimeListeners),this):new Promise((p=>this.once(n,p)))}fire(n,o){typeof n=="string"&&(n=new Sn(n,o||{}));const p=n.type;if(this.listens(p)){n.target=this;const _=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const C of _)C.call(this,n);const x=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const C of x)an(p,C,this._oneTimeListeners),C.call(this,n);const w=this._eventedParent;w&&(un(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(n))}else n instanceof pi&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,o){return this._eventedParent=n,this._eventedParentData=o,this}}var Ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Ei=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Mr(s,n){const o={};for(const p in s)p!=="ref"&&(o[p]=s[p]);return Ei.forEach((p=>{p in n&&(o[p]=n[p])})),o}function Mn(s,n){if(Array.isArray(s)){if(!Array.isArray(n)||s.length!==n.length)return!1;for(let o=0;o<s.length;o++)if(!Mn(s[o],n[o]))return!1;return!0}if(typeof s=="object"&&s!==null&&n!==null){if(typeof n!="object"||Object.keys(s).length!==Object.keys(n).length)return!1;for(const o in s)if(!Mn(s[o],n[o]))return!1;return!0}return s===n}function Ai(s,n){s.push(n)}function Gr(s,n,o){Ai(o,{command:"addSource",args:[s,n[s]]})}function xi(s,n,o){Ai(n,{command:"removeSource",args:[s]}),o[s]=!0}function hr(s,n,o,p){xi(s,o,p),Gr(s,n,o)}function Di(s,n,o){let p;for(p in s[o])if(Object.prototype.hasOwnProperty.call(s[o],p)&&p!=="data"&&!Mn(s[o][p],n[o][p]))return!1;for(p in n[o])if(Object.prototype.hasOwnProperty.call(n[o],p)&&p!=="data"&&!Mn(s[o][p],n[o][p]))return!1;return!0}function zr(s,n,o,p,_,x){s=s||{},n=n||{};for(const w in s)Object.prototype.hasOwnProperty.call(s,w)&&(Mn(s[w],n[w])||o.push({command:x,args:[p,w,n[w],_]}));for(const w in n)Object.prototype.hasOwnProperty.call(n,w)&&!Object.prototype.hasOwnProperty.call(s,w)&&(Mn(s[w],n[w])||o.push({command:x,args:[p,w,n[w],_]}))}function qc(s){return s.id}function Ta(s,n){return s[n.id]=n,s}class ot{constructor(n,o,p,_){this.message=(n?`${n}: `:"")+p,_&&(this.identifier=_),o!=null&&o.__line__&&(this.line=o.__line__)}}function fa(s,...n){for(const o of n)for(const p in o)s[p]=o[p];return s}class pa extends Error{constructor(n,o){super(o),this.message=o,this.key=n}}class zo{constructor(n,o=[]){this.parent=n,this.bindings={};for(const[p,_]of o)this.bindings[p]=_}concat(n){return new zo(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Li={kind:"null"},Lt={kind:"number"},zn={kind:"string"},En={kind:"boolean"},Ya={kind:"color"},xh={kind:"projectionDefinition"},ps={kind:"object"},In={kind:"value"},Jl={kind:"collator"},Zo={kind:"formatted"},Vs={kind:"padding"},_o={kind:"colorArray"},ms={kind:"numberArray"},dr={kind:"resolvedImage"},Gc={kind:"variableAnchorOffsetCollection"};function Ea(s,n){return{kind:"array",itemType:s,N:n}}function ri(s){if(s.kind==="array"){const n=ri(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}const qo=[Li,Lt,zn,En,Ya,xh,Zo,ps,Ea(In),Vs,ms,_o,dr,Gc];function gs(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!gs(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(const o of qo)if(!gs(o,n))return null}}return`Expected ${ri(s)} but found ${ri(n)} instead.`}function Ql(s,n){return n.some((o=>o.kind===s.kind))}function Zs(s,n){return n.some((o=>o==="null"?s===null:o==="array"?Array.isArray(s):o==="object"?s&&!Array.isArray(s)&&typeof s=="object":o===typeof s))}function $a(s,n){return s.kind==="array"&&n.kind==="array"?s.itemType.kind===n.itemType.kind&&typeof s.N=="number":s.kind===n.kind}const ai=.96422,wi=.82521,ja=4/29,Xn=6/29,vl=3*Xn*Xn,wh=Xn*Xn*Xn,Nn=Math.PI/180,fr=180/Math.PI;function ec(s){return(s%=360)<0&&(s+=360),s}function wu([s,n,o,p]){let _,x;const w=Su((.2225045*(s=Xi(s))+.7168786*(n=Xi(n))+.0606169*(o=Xi(o)))/1);s===n&&n===o?_=x=w:(_=Su((.4360747*s+.3850649*n+.1430804*o)/ai),x=Su((.0139322*s+.0971045*n+.7141733*o)/wi));const C=116*w-16;return[C<0?0:C,500*(_-w),200*(w-x),p]}function Xi(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Su(s){return s>wh?Math.pow(s,1/3):s/vl+ja}function tc([s,n,o,p]){let _=(s+16)/116,x=isNaN(n)?_:_+n/500,w=isNaN(o)?_:_-o/200;return _=1*Vi(_),x=ai*Vi(x),w=wi*Vi(w),[Go(3.1338561*x-1.6168667*_-.4906146*w),Go(-.9787684*x+1.9161415*_+.033454*w),Go(.0719453*x-.2289914*_+1.4052427*w),p]}function Go(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Vi(s){return s>Xn?s*s*s:vl*(s-ja)}const bl=Object.hasOwn||function(s,n){return Object.prototype.hasOwnProperty.call(s,n)};function ys(s,n){return bl(s,n)?s[n]:void 0}function vo(s){return parseInt(s.padEnd(2,s),16)/255}function Sh(s,n){return Ho(n?s/100:s,0,1)}function Ho(s,n,o){return Math.min(Math.max(n,s),o)}function Hc(s){return!s.some(Number.isNaN)}const qs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Wo(s,n,o){return s+o*(n-s)}function xl(s,n,o){return s.map(((p,_)=>Wo(p,n[_],o)))}class Ln{constructor(n,o,p,_=1,x=!0){this.r=n,this.g=o,this.b=p,this.a=_,x||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[n,o,p,_]))}static parse(n){if(n instanceof Ln)return n;if(typeof n!="string")return;const o=(function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=ys(qs,p);if(_){const[w,C,I]=_;return[w/255,C/255,I/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const w=p.length<6?1:2;let C=1;return[vo(p.slice(C,C+=w)),vo(p.slice(C,C+=w)),vo(p.slice(C,C+=w)),vo(p.slice(C,C+w)||"ff")]}if(p.startsWith("rgb")){const w=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[C,I,O,j,V,G,H,te,ne,re,ue,Ce]=w,fe=[j||" ",H||" ",re].join("");if(fe==="  "||fe==="  /"||fe===",,"||fe===",,,"){const ye=[O,G,ne].join(""),Ie=ye==="%%%"?100:ye===""?255:0;if(Ie){const Le=[Ho(+I/Ie,0,1),Ho(+V/Ie,0,1),Ho(+te/Ie,0,1),ue?Sh(+ue,Ce):1];if(Hc(Le))return Le}}return}}const x=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,C,I,O,j,V,G,H,te]=x,ne=[I||" ",j||" ",G].join("");if(ne==="  "||ne==="  /"||ne===",,"||ne===",,,"){const re=[+C,Ho(+O,0,100),Ho(+V,0,100),H?Sh(+H,te):1];if(Hc(re))return(function([ue,Ce,fe,ye]){function Ie(Le){const Qe=(Le+ue/30)%12,bt=Ce*Math.min(fe,1-fe);return fe-bt*Math.max(-1,Math.min(Qe-3,9-Qe,1))}return ue=ec(ue),Ce/=100,fe/=100,[Ie(0),Ie(8),Ie(4),ye]})(re)}}})(n);return o?new Ln(...o,!1):void 0}get rgb(){const{r:n,g:o,b:p,a:_}=this,x=_||1/0;return this.overwriteGetter("rgb",[n/x,o/x,p/x,_])}get hcl(){return this.overwriteGetter("hcl",(function(n){const[o,p,_,x]=wu(n),w=Math.sqrt(p*p+_*_);return[Math.round(1e4*w)?ec(Math.atan2(_,p)*fr):NaN,w,o,x]})(this.rgb))}get lab(){return this.overwriteGetter("lab",wu(this.rgb))}overwriteGetter(n,o){return Object.defineProperty(this,n,{value:o}),o}toString(){const[n,o,p,_]=this.rgb;return`rgba(${[n,o,p].map((x=>Math.round(255*x))).join(",")},${_})`}static interpolate(n,o,p,_="rgb"){switch(_){case"rgb":{const[x,w,C,I]=xl(n.rgb,o.rgb,p);return new Ln(x,w,C,I,!1)}case"hcl":{const[x,w,C,I]=n.hcl,[O,j,V,G]=o.hcl;let H,te;if(isNaN(x)||isNaN(O))isNaN(x)?isNaN(O)?H=NaN:(H=O,C!==1&&C!==0||(te=j)):(H=x,V!==1&&V!==0||(te=w));else{let fe=O-x;O>x&&fe>180?fe-=360:O<x&&x-O>180&&(fe+=360),H=x+p*fe}const[ne,re,ue,Ce]=(function([fe,ye,Ie,Le]){return fe=isNaN(fe)?0:fe*Nn,tc([Ie,Math.cos(fe)*ye,Math.sin(fe)*ye,Le])})([H,te??Wo(w,j,p),Wo(C,V,p),Wo(I,G,p)]);return new Ln(ne,re,ue,Ce,!1)}case"lab":{const[x,w,C,I]=tc(xl(n.lab,o.lab,p));return new Ln(x,w,C,I,!1)}}}}Ln.black=new Ln(0,0,0,1),Ln.white=new Ln(1,1,1,1),Ln.transparent=new Ln(0,0,0,0),Ln.red=new Ln(1,0,0,1);class Ka{constructor(n,o,p){this.sensitivity=n?o?"variant":"case":o?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,o){return this.collator.compare(n,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Th=["bottom","center","top"];class nc{constructor(n,o,p,_,x,w){this.text=n,this.image=o,this.scale=p,this.fontStack=_,this.textColor=x,this.verticalAlign=w}}class Hr{constructor(n){this.sections=n}static fromString(n){return new Hr([new nc(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((n=>n.text.length!==0||n.image&&n.image.name.length!==0))}static factory(n){return n instanceof Hr?n:Hr.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map((n=>n.text)).join("")}}class hn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof hn)return n;if(typeof n=="number")return new hn([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const o of n)if(typeof o!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new hn(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,p){return new hn(xl(n.values,o.values,p))}}class li{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof li)return n;if(typeof n=="number")return new li([n]);if(Array.isArray(n)){for(const o of n)if(typeof o!="number")return;return new li(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,p){return new li(xl(n.values,o.values,p))}}class Jt{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Jt)return n;if(typeof n=="string"){const p=Ln.parse(n);return p?new Jt([p]):void 0}if(!Array.isArray(n))return;const o=[];for(const p of n){if(typeof p!="string")return;const _=Ln.parse(p);if(!_)return;o.push(_)}return new Jt(o)}toString(){return JSON.stringify(this.values)}static interpolate(n,o,p,_="rgb"){const x=[];if(n.values.length!=o.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${o.values.length}), cannot interpolate.`);for(let w=0;w<n.values.length;w++)x.push(Ln.interpolate(n.values[w],o.values[w],p,_));return new Jt(x)}}class Mi extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}const Ja=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ji{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Ji)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let o=0;o<n.length;o+=2){const p=n[o],_=n[o+1];if(typeof p!="string"||!Ja.has(p)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new Ji(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,o,p){const _=n.values,x=o.values;if(_.length!==x.length)throw new Mi(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${o.toString()}`);const w=[];for(let C=0;C<_.length;C+=2){if(_[C]!==x[C])throw new Mi(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${_[C]}, to[${C}]: ${x[C]}`);w.push(_[C]);const[I,O]=_[C+1],[j,V]=x[C+1];w.push([Wo(I,j,p),Wo(O,V,p)])}return new Ji(w)}}class ma{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ma({name:n,available:!1}):null}}class Qi{constructor(n,o,p){this.from=n,this.to=o,this.transition=p}static interpolate(n,o,p){return new Qi(n,o,p)}static parse(n){return n instanceof Qi?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new Qi(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new Qi(n.from,n.to,n.transition):typeof n=="string"?new Qi(n,n,1):void 0}}function Ba(s,n,o,p){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[s,n,o,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[s,n,o,p]:[s,n,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Qa(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Qi||s instanceof Ln||s instanceof Ka||s instanceof Hr||s instanceof hn||s instanceof li||s instanceof Jt||s instanceof Ji||s instanceof ma)return!0;if(Array.isArray(s)){for(const n of s)if(!Qa(n))return!1;return!0}if(typeof s=="object"){for(const n in s)if(!Qa(s[n]))return!1;return!0}return!1}function Un(s){if(s===null)return Li;if(typeof s=="string")return zn;if(typeof s=="boolean")return En;if(typeof s=="number")return Lt;if(s instanceof Ln)return Ya;if(s instanceof Qi)return xh;if(s instanceof Ka)return Jl;if(s instanceof Hr)return Zo;if(s instanceof hn)return Vs;if(s instanceof li)return ms;if(s instanceof Jt)return _o;if(s instanceof Ji)return Gc;if(s instanceof ma)return dr;if(Array.isArray(s)){const n=s.length;let o;for(const p of s){const _=Un(p);if(o){if(o===_)continue;o=In;break}o=_}return Ea(o||In,n)}return ps}function eo(s){const n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof Ln||s instanceof Qi||s instanceof Hr||s instanceof hn||s instanceof li||s instanceof Jt||s instanceof Ji||s instanceof ma?s.toString():JSON.stringify(s)}class to{constructor(n,o){this.type=n,this.value=o}static parse(n,o){if(n.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Qa(n[1]))return o.error("invalid value");const p=n[1];let _=Un(p);const x=o.expectedType;return _.kind!=="array"||_.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(_=x),new to(_,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const wl={string:zn,number:Lt,boolean:En,object:ps};class Fa{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let p,_=1;const x=n[0];if(x==="array"){let C,I;if(n.length>2){const O=n[1];if(typeof O!="string"||!(O in wl)||O==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);C=wl[O],_++}else C=In;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return o.error('The length argument to "array" must be a positive integer literal',2);I=n[2],_++}p=Ea(C,I)}else{if(!wl[x])throw new Error(`Types doesn't contain name = ${x}`);p=wl[x]}const w=[];for(;_<n.length;_++){const C=o.parse(n[_],_,In);if(!C)return null;w.push(C)}return new Fa(p,w)}evaluate(n){for(let o=0;o<this.args.length;o++){const p=this.args[o].evaluate(n);if(!gs(this.type,Un(p)))return p;if(o===this.args.length-1)throw new Mi(`Expected value to be of type ${ri(this.type)}, but found ${ri(Un(p))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const Ir={"to-boolean":En,"to-color":Ya,"to-number":Lt,"to-string":zn};class ga{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const p=n[0];if(!Ir[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&n.length!==2)return o.error("Expected one argument.");const _=Ir[p],x=[];for(let w=1;w<n.length;w++){const C=o.parse(n[w],w,In);if(!C)return null;x.push(C)}return new ga(_,x)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let o,p;for(const _ of this.args){if(o=_.evaluate(n),p=null,o instanceof Ln)return o;if(typeof o=="string"){const x=n.parseColor(o);if(x)return x}else if(Array.isArray(o)&&(p=o.length<3||o.length>4?`Invalid rgba value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Ba(o[0],o[1],o[2],o[3]),!p))return new Ln(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Mi(p||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const p of this.args){o=p.evaluate(n);const _=hn.parse(o);if(_)return _}throw new Mi(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"numberArray":{let o;for(const p of this.args){o=p.evaluate(n);const _=li.parse(o);if(_)return _}throw new Mi(`Could not parse numberArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"colorArray":{let o;for(const p of this.args){o=p.evaluate(n);const _=Jt.parse(o);if(_)return _}throw new Mi(`Could not parse colorArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const p of this.args){o=p.evaluate(n);const _=Ji.parse(o);if(_)return _}throw new Mi(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const p of this.args){if(o=p.evaluate(n),o===null)return 0;const _=Number(o);if(!isNaN(_))return _}throw new Mi(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return Hr.fromString(eo(this.args[0].evaluate(n)));case"resolvedImage":return ma.fromString(eo(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return eo(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}const Tu=["Unknown","Point","LineString","Polygon"];class Sl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Tu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let o=this._parseColorCache.get(n);return o||(o=Ln.parse(n),this._parseColorCache.set(n,o)),o}}class Zn{constructor(n,o,p=[],_,x=new zo,w=[]){this.registry=n,this.path=p,this.key=p.map((C=>`[${C}]`)).join(""),this.scope=x,this.errors=w,this.expectedType=_,this._isConstant=o}parse(n,o,p,_,x={}){return o?this.concat(o,p,_)._parse(n,x):this._parse(n,x)}_parse(n,o){function p(_,x,w){return w==="assert"?new Fa(x,[_]):w==="coerce"?new ga(x,[_]):_}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=n[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[_];if(x){let w=x.parse(n,this);if(!w)return null;if(this.expectedType){const C=this.expectedType,I=w.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||I.kind!=="value"){if(C.kind==="projectionDefinition"&&["string","array"].includes(I.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(I.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(I.kind)||C.kind==="colorArray"&&["value","string","array"].includes(I.kind)||C.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(I.kind))w=p(w,C,o.typeAnnotation||"coerce");else if(this.checkSubtype(C,I))return null}else w=p(w,C,o.typeAnnotation||"assert")}if(!(w instanceof to)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const C=new Sl;try{w=new to(w.type,w.evaluate(C))}catch(I){return this.error(I.message),null}}return w}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,o,p){const _=typeof n=="number"?this.path.concat(n):this.path,x=p?this.scope.concat(p):this.scope;return new Zn(this.registry,this._isConstant,_,o||null,x,this.errors)}error(n,...o){const p=`${this.key}${o.map((_=>`[${_}]`)).join("")}`;this.errors.push(new pa(p,n))}checkSubtype(n,o){const p=gs(n,o);return p&&this.error(p),p}}class zi{constructor(n,o){this.type=o.type,this.bindings=[].concat(n),this.result=o}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const o of this.bindings)n(o[1]);n(this.result)}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const p=[];for(let x=1;x<n.length-1;x+=2){const w=n[x];if(typeof w!="string")return o.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return o.error("Variable names must contain only alphanumeric characters or '_'.",x);const C=o.parse(n[x+1],x+1);if(!C)return null;p.push([w,C])}const _=o.parse(n[n.length-1],n.length-1,o.expectedType,p);return _?new zi(p,_):null}outputDefined(){return this.result.outputDefined()}}class ia{constructor(n,o){this.type=o.type,this.name=n,this.boundExpression=o}static parse(n,o){if(n.length!==2||typeof n[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const p=n[1];return o.scope.has(p)?new ia(p,o.scope.get(p)):o.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class $n{constructor(n,o,p){this.type=n,this.index=o,this.input=p}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const p=o.parse(n[1],1,Lt),_=o.parse(n[2],2,Ea(o.expectedType||In));return p&&_?new $n(_.type.itemType,p,_):null}evaluate(n){const o=this.index.evaluate(n),p=this.input.evaluate(n);if(o<0)throw new Mi(`Array index out of bounds: ${o} < 0.`);if(o>=p.length)throw new Mi(`Array index out of bounds: ${o} > ${p.length-1}.`);if(o!==Math.floor(o))throw new Mi(`Array index must be an integer, but found ${o} instead.`);return p[o]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class kn{constructor(n,o){this.type=En,this.needle=n,this.haystack=o}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const p=o.parse(n[1],1,In),_=o.parse(n[2],2,In);return p&&_?Ql(p.type,[En,zn,Lt,Li,In])?new kn(p,_):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${ri(p.type)} instead`):null}evaluate(n){const o=this.needle.evaluate(n),p=this.haystack.evaluate(n);if(!p)return!1;if(!Zs(o,["boolean","string","number","null"]))throw new Mi(`Expected first argument to be of type boolean, string, number or null, but found ${ri(Un(o))} instead.`);if(!Zs(p,["string","array"]))throw new Mi(`Expected second argument to be of type array or string, but found ${ri(Un(p))} instead.`);return p.indexOf(o)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class ic{constructor(n,o,p){this.type=Lt,this.needle=n,this.haystack=o,this.fromIndex=p}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const p=o.parse(n[1],1,In),_=o.parse(n[2],2,In);if(!p||!_)return null;if(!Ql(p.type,[En,zn,Lt,Li,In]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${ri(p.type)} instead`);if(n.length===4){const x=o.parse(n[3],3,Lt);return x?new ic(p,_,x):null}return new ic(p,_)}evaluate(n){const o=this.needle.evaluate(n),p=this.haystack.evaluate(n);if(!Zs(o,["boolean","string","number","null"]))throw new Mi(`Expected first argument to be of type boolean, string, number or null, but found ${ri(Un(o))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(n)),Zs(p,["string"])){const x=p.indexOf(o,_);return x===-1?-1:[...p.slice(0,x)].length}if(Zs(p,["array"]))return p.indexOf(o,_);throw new Mi(`Expected second argument to be of type array or string, but found ${ri(Un(p))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Kn{constructor(n,o,p,_,x,w){this.inputType=n,this.type=o,this.input=p,this.cases=_,this.outputs=x,this.otherwise=w}static parse(n,o){if(n.length<5)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return o.error("Expected an even number of arguments.");let p,_;o.expectedType&&o.expectedType.kind!=="value"&&(_=o.expectedType);const x={},w=[];for(let O=2;O<n.length-1;O+=2){let j=n[O];const V=n[O+1];Array.isArray(j)||(j=[j]);const G=o.concat(O);if(j.length===0)return G.error("Expected at least one branch label.");for(const te of j){if(typeof te!="number"&&typeof te!="string")return G.error("Branch labels must be numbers or strings.");if(typeof te=="number"&&Math.abs(te)>Number.MAX_SAFE_INTEGER)return G.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof te=="number"&&Math.floor(te)!==te)return G.error("Numeric branch labels must be integer values.");if(p){if(G.checkSubtype(p,Un(te)))return null}else p=Un(te);if(x[String(te)]!==void 0)return G.error("Branch labels must be unique.");x[String(te)]=w.length}const H=o.parse(V,O,_);if(!H)return null;_=_||H.type,w.push(H)}const C=o.parse(n[1],1,In);if(!C)return null;const I=o.parse(n[n.length-1],n.length-1,_);return I?C.type.kind!=="value"&&o.concat(1).checkSubtype(p,C.type)?null:new Kn(p,_,C,x,w,I):null}evaluate(n){const o=this.input.evaluate(n);return(Un(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))&&this.otherwise.outputDefined()}}class Eu{constructor(n,o,p){this.type=n,this.branches=o,this.otherwise=p}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return o.error("Expected an odd number of arguments.");let p;o.expectedType&&o.expectedType.kind!=="value"&&(p=o.expectedType);const _=[];for(let w=1;w<n.length-1;w+=2){const C=o.parse(n[w],w,En);if(!C)return null;const I=o.parse(n[w+1],w+1,p);if(!I)return null;_.push([C,I]),p=p||I.type}const x=o.parse(n[n.length-1],n.length-1,p);if(!x)return null;if(!p)throw new Error("Can't infer output type");return new Eu(p,_,x)}evaluate(n){for(const[o,p]of this.branches)if(o.evaluate(n))return p.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[o,p]of this.branches)n(o),n(p);n(this.otherwise)}outputDefined(){return this.branches.every((([n,o])=>o.outputDefined()))&&this.otherwise.outputDefined()}}class bo{constructor(n,o,p,_){this.type=n,this.input=o,this.beginIndex=p,this.endIndex=_}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${n.length-1} instead.`);const p=o.parse(n[1],1,In),_=o.parse(n[2],2,Lt);if(!p||!_)return null;if(!Ql(p.type,[Ea(In),zn,In]))return o.error(`Expected first argument to be of type array or string, but found ${ri(p.type)} instead`);if(n.length===4){const x=o.parse(n[3],3,Lt);return x?new bo(p.type,p,_,x):null}return new bo(p.type,p,_)}evaluate(n){const o=this.input.evaluate(n),p=this.beginIndex.evaluate(n);let _;if(this.endIndex&&(_=this.endIndex.evaluate(n)),Zs(o,["string"]))return[...o].slice(p,_).join("");if(Zs(o,["array"]))return o.slice(p,_);throw new Mi(`Expected first argument to be of type array or string, but found ${ri(Un(o))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Tl(s,n){const o=s.length-1;let p,_,x=0,w=o,C=0;for(;x<=w;)if(C=Math.floor((x+w)/2),p=s[C],_=s[C+1],p<=n){if(C===o||n<_)return C;x=C+1}else{if(!(p>n))throw new Mi("Input is not a number.");w=C-1}return 0}class El{constructor(n,o,p){this.type=n,this.input=o,this.labels=[],this.outputs=[];for(const[_,x]of p)this.labels.push(_),this.outputs.push(x)}static parse(n,o){if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");const p=o.parse(n[1],1,Lt);if(!p)return null;const _=[];let x=null;o.expectedType&&o.expectedType.kind!=="value"&&(x=o.expectedType);for(let w=1;w<n.length;w+=2){const C=w===1?-1/0:n[w],I=n[w+1],O=w,j=w+1;if(typeof C!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(_.length&&_[_.length-1][0]>=C)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',O);const V=o.parse(I,j,x);if(!V)return null;x=x||V.type,_.push([C,V])}return new El(x,p,_)}evaluate(n){const o=this.labels,p=this.outputs;if(o.length===1)return p[0].evaluate(n);const _=this.input.evaluate(n);if(_<=o[0])return p[0].evaluate(n);const x=o.length;return _>=o[x-1]?p[x-1].evaluate(n):p[Tl(o,_)].evaluate(n)}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function Eh(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Au,Io,mp=(function(){if(Io)return Au;function s(n,o,p,_){this.cx=3*n,this.bx=3*(p-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(_-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=o,this.p2x=p,this.p2y=_}return Io=1,Au=s,s.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,o){if(o===void 0&&(o=1e-6),n<0)return 0;if(n>1)return 1;for(var p=n,_=0;_<8;_++){var x=this.sampleCurveX(p)-n;if(Math.abs(x)<o)return p;var w=this.sampleCurveDerivativeX(p);if(Math.abs(w)<1e-6)break;p-=x/w}var C=0,I=1;for(p=n,_=0;_<20&&(x=this.sampleCurveX(p),!(Math.abs(x-n)<o));_++)n>x?C=p:I=p,p=.5*(I-C)+C;return p},solve:function(n,o){return this.sampleCurveY(this.solveCurveX(n,o))}},Au})(),Ah=Eh(mp);class xr{constructor(n,o,p,_,x){this.type=n,this.operator=o,this.interpolation=p,this.input=_,this.labels=[],this.outputs=[];for(const[w,C]of x)this.labels.push(w),this.outputs.push(C)}static interpolationFactor(n,o,p,_){let x=0;if(n.name==="exponential")x=Xo(o,n.base,p,_);else if(n.name==="linear")x=Xo(o,1,p,_);else if(n.name==="cubic-bezier"){const w=n.controlPoints;x=new Ah(w[0],w[1],w[2],w[3]).solve(Xo(o,1,p,_))}return x}static parse(n,o){let[p,_,x,...w]=n;if(!Array.isArray(_)||_.length===0)return o.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const O=_[1];if(typeof O!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:O}}else{if(_[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const O=_.slice(1);if(O.length!==4||O.some((j=>typeof j!="number"||j<0||j>1)))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:O}}}if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(x=o.parse(x,2,Lt),!x)return null;const C=[];let I=null;p!=="interpolate-hcl"&&p!=="interpolate-lab"||o.expectedType==_o?o.expectedType&&o.expectedType.kind!=="value"&&(I=o.expectedType):I=Ya;for(let O=0;O<w.length;O+=2){const j=w[O],V=w[O+1],G=O+3,H=O+4;if(typeof j!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(C.length&&C[C.length-1][0]>=j)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);const te=o.parse(V,H,I);if(!te)return null;I=I||te.type,C.push([j,te])}return $a(I,Lt)||$a(I,xh)||$a(I,Ya)||$a(I,Vs)||$a(I,ms)||$a(I,_o)||$a(I,Gc)||$a(I,Ea(Lt))?new xr(I,p,_,x,C):o.error(`Type ${ri(I)} is not interpolatable.`)}evaluate(n){const o=this.labels,p=this.outputs;if(o.length===1)return p[0].evaluate(n);const _=this.input.evaluate(n);if(_<=o[0])return p[0].evaluate(n);const x=o.length;if(_>=o[x-1])return p[x-1].evaluate(n);const w=Tl(o,_),C=xr.interpolationFactor(this.interpolation,_,o[w],o[w+1]),I=p[w].evaluate(n),O=p[w+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Wo(I,O,C);case"color":return Ln.interpolate(I,O,C);case"padding":return hn.interpolate(I,O,C);case"colorArray":return Jt.interpolate(I,O,C);case"numberArray":return li.interpolate(I,O,C);case"variableAnchorOffsetCollection":return Ji.interpolate(I,O,C);case"array":return xl(I,O,C);case"projectionDefinition":return Qi.interpolate(I,O,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return Ln.interpolate(I,O,C,"hcl");case"colorArray":return Jt.interpolate(I,O,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Ln.interpolate(I,O,C,"lab");case"colorArray":return Jt.interpolate(I,O,C,"lab")}}}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}}function Xo(s,n,o,p){const _=p-o,x=s-o;return _===0?0:n===1?x/_:(Math.pow(n,x)-1)/(Math.pow(n,_)-1)}const Yi={color:Ln.interpolate,number:Wo,padding:hn.interpolate,numberArray:li.interpolate,colorArray:Jt.interpolate,variableAnchorOffsetCollection:Ji.interpolate,array:xl};class Gs{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let p=null;const _=o.expectedType;_&&_.kind!=="value"&&(p=_);const x=[];for(const C of n.slice(1)){const I=o.parse(C,1+x.length,p,void 0,{typeAnnotation:"omit"});if(!I)return null;p=p||I.type,x.push(I)}if(!p)throw new Error("No output type");const w=_&&x.some((C=>gs(_,C.type)));return new Gs(w?In:p,x)}evaluate(n){let o,p=null,_=0;for(const x of this.args)if(_++,p=x.evaluate(n),p&&p instanceof ma&&!p.available&&(o||(o=p.name),p=null,_===this.args.length&&(p=o)),p!==null)break;return p}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}}function Cu(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Wc(s,n,o,p){return p.compare(n,o)===0}function rr(s,n,o){const p=s!=="=="&&s!=="!=";return class b4{constructor(x,w,C){this.type=En,this.lhs=x,this.rhs=w,this.collator=C,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");const C=x[0];let I=w.parse(x[1],1,In);if(!I)return null;if(!Cu(C,I.type))return w.concat(1).error(`"${C}" comparisons are not supported for type '${ri(I.type)}'.`);let O=w.parse(x[2],2,In);if(!O)return null;if(!Cu(C,O.type))return w.concat(2).error(`"${C}" comparisons are not supported for type '${ri(O.type)}'.`);if(I.type.kind!==O.type.kind&&I.type.kind!=="value"&&O.type.kind!=="value")return w.error(`Cannot compare types '${ri(I.type)}' and '${ri(O.type)}'.`);p&&(I.type.kind==="value"&&O.type.kind!=="value"?I=new Fa(O.type,[I]):I.type.kind!=="value"&&O.type.kind==="value"&&(O=new Fa(I.type,[O])));let j=null;if(x.length===4){if(I.type.kind!=="string"&&O.type.kind!=="string"&&I.type.kind!=="value"&&O.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(j=w.parse(x[3],3,Jl),!j)return null}return new b4(I,O,j)}evaluate(x){const w=this.lhs.evaluate(x),C=this.rhs.evaluate(x);if(p&&this.hasUntypedArgument){const I=Un(w),O=Un(C);if(I.kind!==O.kind||I.kind!=="string"&&I.kind!=="number")throw new Mi(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${I.kind}, ${O.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const I=Un(w),O=Un(C);if(I.kind!=="string"||O.kind!=="string")return n(x,w,C)}return this.collator?o(x,w,C,this.collator.evaluate(x)):n(x,w,C)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const sf=rr("==",(function(s,n,o){return n===o}),Wc),Ch=rr("!=",(function(s,n,o){return n!==o}),(function(s,n,o,p){return!Wc(0,n,o,p)})),Mh=rr("<",(function(s,n,o){return n<o}),(function(s,n,o,p){return p.compare(n,o)<0})),gp=rr(">",(function(s,n,o){return n>o}),(function(s,n,o,p){return p.compare(n,o)>0})),rc=rr("<=",(function(s,n,o){return n<=o}),(function(s,n,o,p){return p.compare(n,o)<=0})),Mu=rr(">=",(function(s,n,o){return n>=o}),(function(s,n,o,p){return p.compare(n,o)>=0}));class Hs{constructor(n,o,p){this.type=Jl,this.locale=p,this.caseSensitive=n,this.diacriticSensitive=o}static parse(n,o){if(n.length!==2)return o.error("Expected one argument.");const p=n[1];if(typeof p!="object"||Array.isArray(p))return o.error("Collator options argument must be an object.");const _=o.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,En);if(!_)return null;const x=o.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,En);if(!x)return null;let w=null;return p.locale&&(w=o.parse(p.locale,1,zn),!w)?null:new Hs(_,x,w)}evaluate(n){return new Ka(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class Ws{constructor(n,o,p,_,x){this.type=zn,this.number=n,this.locale=o,this.currency=p,this.minFractionDigits=_,this.maxFractionDigits=x}static parse(n,o){if(n.length!==3)return o.error("Expected two arguments.");const p=o.parse(n[1],1,Lt);if(!p)return null;const _=n[2];if(typeof _!="object"||Array.isArray(_))return o.error("NumberFormat options argument must be an object.");let x=null;if(_.locale&&(x=o.parse(_.locale,1,zn),!x))return null;let w=null;if(_.currency&&(w=o.parse(_.currency,1,zn),!w))return null;let C=null;if(_["min-fraction-digits"]&&(C=o.parse(_["min-fraction-digits"],1,Lt),!C))return null;let I=null;return _["max-fraction-digits"]&&(I=o.parse(_["max-fraction-digits"],1,Lt),!I)?null:new Ws(p,x,w,C,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class zu{constructor(n){this.type=Zo,this.sections=n}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const p=n[1];if(!Array.isArray(p)&&typeof p=="object")return o.error("First argument must be an image or text section.");const _=[];let x=!1;for(let w=1;w<=n.length-1;++w){const C=n[w];if(x&&typeof C=="object"&&!Array.isArray(C)){x=!1;let I=null;if(C["font-scale"]&&(I=o.parse(C["font-scale"],1,Lt),!I))return null;let O=null;if(C["text-font"]&&(O=o.parse(C["text-font"],1,Ea(zn)),!O))return null;let j=null;if(C["text-color"]&&(j=o.parse(C["text-color"],1,Ya),!j))return null;let V=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!Th.includes(C["vertical-align"]))return o.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(V=o.parse(C["vertical-align"],1,zn),!V)return null}const G=_[_.length-1];G.scale=I,G.font=O,G.textColor=j,G.verticalAlign=V}else{const I=o.parse(n[w],1,In);if(!I)return null;const O=I.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,_.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new zu(_)}evaluate(n){return new Hr(this.sections.map((o=>{const p=o.content.evaluate(n);return Un(p)===dr?new nc("",p,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(n):null):new nc(eo(p),null,o.scale?o.scale.evaluate(n):null,o.font?o.font.evaluate(n).join(","):null,o.textColor?o.textColor.evaluate(n):null,o.verticalAlign?o.verticalAlign.evaluate(n):null)})))}eachChild(n){for(const o of this.sections)n(o.content),o.scale&&n(o.scale),o.font&&n(o.font),o.textColor&&n(o.textColor),o.verticalAlign&&n(o.verticalAlign)}outputDefined(){return!1}}class _s{constructor(n){this.type=dr,this.input=n}static parse(n,o){if(n.length!==2)return o.error("Expected two arguments.");const p=o.parse(n[1],1,zn);return p?new _s(p):o.error("No image name provided.")}evaluate(n){const o=this.input.evaluate(n),p=ma.fromString(o);return p&&n.availableImages&&(p.available=n.availableImages.indexOf(o)>-1),p}eachChild(n){n(this.input)}outputDefined(){return!1}}class ya{constructor(n){this.type=Lt,this.input=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const p=o.parse(n[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${ri(p.type)} instead.`):new ya(p):null}evaluate(n){const o=this.input.evaluate(n);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new Mi(`Expected value to be of type string or array, but found ${ri(Un(o))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const pr=8192;function ac(s,n){const o=(180+s[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,_=Math.pow(2,n.z);return[Math.round(o*_*pr),Math.round(p*_*pr)]}function Xc(s,n){const o=Math.pow(2,n.z);return[(_=(s[0]/pr+n.x)/o,360*_-180),(p=(s[1]/pr+n.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,_}function Al(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function vs(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function lf(s,n,o){const p=s[0]-n[0],_=s[1]-n[1],x=s[0]-o[0],w=s[1]-o[1];return p*w-x*_==0&&p*x<=0&&_*w<=0}function Iu(s,n,o,p){return(_=[p[0]-o[0],p[1]-o[1]])[0]*(x=[n[0]-s[0],n[1]-s[1]])[1]-_[1]*x[0]!=0&&!(!ko(s,n,o,p)||!ko(o,p,s,n));var _,x}function vd(s,n,o){for(const p of o)for(let _=0;_<p.length-1;++_)if(Iu(s,n,p[_],p[_+1]))return!0;return!1}function Yo(s,n,o=!1){let p=!1;for(const C of n)for(let I=0;I<C.length-1;I++){if(lf(s,C[I],C[I+1]))return o;(x=C[I])[1]>(_=s)[1]!=(w=C[I+1])[1]>_[1]&&_[0]<(w[0]-x[0])*(_[1]-x[1])/(w[1]-x[1])+x[0]&&(p=!p)}var _,x,w;return p}function no(s,n){for(const o of n)if(Yo(s,o))return!0;return!1}function oc(s,n){for(const o of s)if(!Yo(o,n))return!1;for(let o=0;o<s.length-1;++o)if(vd(s[o],s[o+1],n))return!1;return!0}function cf(s,n){for(const o of n)if(oc(s,o))return!0;return!1}function ko(s,n,o,p){const _=p[0]-o[0],x=p[1]-o[1],w=(s[0]-o[0])*x-_*(s[1]-o[1]),C=(n[0]-o[0])*x-_*(n[1]-o[1]);return w>0&&C<0||w<0&&C>0}function zh(s,n,o){const p=[];for(let _=0;_<s.length;_++){const x=[];for(let w=0;w<s[_].length;w++){const C=ac(s[_][w],o);Al(n,C),x.push(C)}p.push(x)}return p}function Po(s,n,o){const p=[];for(let _=0;_<s.length;_++){const x=zh(s[_],n,o);p.push(x)}return p}function Yc(s,n,o,p){if(s[0]<o[0]||s[0]>o[2]){const _=.5*p;let x=s[0]-o[0]>_?-p:o[0]-s[0]>_?p:0;x===0&&(x=s[0]-o[2]>_?-p:o[2]-s[0]>_?p:0),s[0]+=x}Al(n,s)}function Kc(s,n,o,p){const _=Math.pow(2,p.z)*pr,x=[p.x*pr,p.y*pr],w=[];for(const C of s)for(const I of C){const O=[I.x+x[0],I.y+x[1]];Yc(O,n,o,_),w.push(O)}return w}function Jc(s,n,o,p){const _=Math.pow(2,p.z)*pr,x=[p.x*pr,p.y*pr],w=[];for(const I of s){const O=[];for(const j of I){const V=[j.x+x[0],j.y+x[1]];Al(n,V),O.push(V)}w.push(O)}if(n[2]-n[0]<=_/2){(C=n)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const I of w)for(const O of I)Yc(O,n,o,_)}var C;return w}class Ko{constructor(n,o){this.type=En,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Qa(n[1])){const p=n[1];if(p.type==="FeatureCollection"){const _=[];for(const x of p.features){const{type:w,coordinates:C}=x.geometry;w==="Polygon"&&_.push(C),w==="MultiPolygon"&&_.push(...C)}if(_.length)return new Ko(p,{type:"MultiPolygon",coordinates:_})}else if(p.type==="Feature"){const _=p.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Ko(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new Ko(p,p)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(o,p){const _=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=o.canonicalID();if(p.type==="Polygon"){const C=zh(p.coordinates,x,w),I=Kc(o.geometry(),_,x,w);if(!vs(_,x))return!1;for(const O of I)if(!Yo(O,C))return!1}if(p.type==="MultiPolygon"){const C=Po(p.coordinates,x,w),I=Kc(o.geometry(),_,x,w);if(!vs(_,x))return!1;for(const O of I)if(!no(O,C))return!1}return!0})(n,this.geometries);if(n.geometryType()==="LineString")return(function(o,p){const _=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=o.canonicalID();if(p.type==="Polygon"){const C=zh(p.coordinates,x,w),I=Jc(o.geometry(),_,x,w);if(!vs(_,x))return!1;for(const O of I)if(!oc(O,C))return!1}if(p.type==="MultiPolygon"){const C=Po(p.coordinates,x,w),I=Jc(o.geometry(),_,x,w);if(!vs(_,x))return!1;for(const O of I)if(!cf(O,C))return!1}return!0})(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let bd=class{constructor(s=[],n=(o,p)=>o<p?-1:o>p?1:0){if(this.data=s,this.length=this.data.length,this.compare=n,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:n,compare:o}=this,p=n[s];for(;s>0;){const _=s-1>>1,x=n[_];if(o(p,x)>=0)break;n[s]=x,s=_}n[s]=p}_down(s){const{data:n,compare:o}=this,p=this.length>>1,_=n[s];for(;s<p;){let x=1+(s<<1);const w=x+1;if(w<this.length&&o(n[w],n[x])<0&&(x=w),o(n[x],_)>=0)break;n[s]=n[x],s=x}n[s]=_}};function Do(s,n,o=0,p=s.length-1,_=xd){for(;p>o;){if(p-o>600){const I=p-o+1,O=n-o+1,j=Math.log(I),V=.5*Math.exp(2*j/3),G=.5*Math.sqrt(j*V*(I-V)/I)*(O-I/2<0?-1:1);Do(s,n,Math.max(o,Math.floor(n-O*V/I+G)),Math.min(p,Math.floor(n+(I-O)*V/I+G)),_)}const x=s[n];let w=o,C=p;for(Jo(s,o,n),_(s[p],x)>0&&Jo(s,o,p);w<C;){for(Jo(s,w,C),w++,C--;_(s[w],x)<0;)w++;for(;_(s[C],x)>0;)C--}_(s[o],x)===0?Jo(s,o,C):(C++,Jo(s,C,p)),C<=n&&(o=C+1),n<=C&&(p=C-1)}}function Jo(s,n,o){const p=s[n];s[n]=s[o],s[o]=p}function xd(s,n){return s<n?-1:s>n?1:0}function sc(s,n){if(s.length<=1)return[s];const o=[];let p,_;for(const x of s){const w=Xs(x);w!==0&&(x.area=Math.abs(w),_===void 0&&(_=w<0),_===w<0?(p&&o.push(p),p=[x]):p.push(x))}if(p&&o.push(p),n>1)for(let x=0;x<o.length;x++)o[x].length<=n||(Do(o[x],n,1,o[x].length-1,uf),o[x]=o[x].slice(0,n));return o}function uf(s,n){return n.area-s.area}function Xs(s){let n=0;for(let o,p,_=0,x=s.length,w=x-1;_<x;w=_++)o=s[_],p=s[w],n+=(p.x-o.x)*(o.y+p.y);return n}const hf=1/298.257223563,bs=hf*(2-hf),df=Math.PI/180;class Qo{constructor(n){const o=6378.137*df*1e3,p=Math.cos(n*df),_=1/(1-bs*(1-p*p)),x=Math.sqrt(_);this.kx=o*x*p,this.ky=o*x*_*(1-bs)}distance(n,o){const p=this.wrap(n[0]-o[0])*this.kx,_=(n[1]-o[1])*this.ky;return Math.sqrt(p*p+_*_)}pointOnLine(n,o){let p,_,x,w,C=1/0;for(let I=0;I<n.length-1;I++){let O=n[I][0],j=n[I][1],V=this.wrap(n[I+1][0]-O)*this.kx,G=(n[I+1][1]-j)*this.ky,H=0;V===0&&G===0||(H=(this.wrap(o[0]-O)*this.kx*V+(o[1]-j)*this.ky*G)/(V*V+G*G),H>1?(O=n[I+1][0],j=n[I+1][1]):H>0&&(O+=V/this.kx*H,j+=G/this.ky*H)),V=this.wrap(o[0]-O)*this.kx,G=(o[1]-j)*this.ky;const te=V*V+G*G;te<C&&(C=te,p=O,_=j,x=I,w=H)}return{point:[p,_],index:x,t:Math.max(0,Math.min(1,w))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function _a(s,n){return n[0]-s[0]}function Ys(s){return s[1]-s[0]+1}function io(s,n){return s[1]>=s[0]&&s[1]<n}function Cl(s,n){if(s[0]>s[1])return[null,null];const o=Ys(s);if(n){if(o===2)return[s,null];const _=Math.floor(o/2);return[[s[0],s[0]+_],[s[0]+_,s[1]]]}if(o===1)return[s,null];const p=Math.floor(o/2)-1;return[[s[0],s[0]+p],[s[0]+p+1,s[1]]]}function Qc(s,n){if(!io(n,s.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let p=n[0];p<=n[1];++p)Al(o,s[p]);return o}function lc(s){const n=[1/0,1/0,-1/0,-1/0];for(const o of s)for(const p of o)Al(n,p);return n}function xs(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function cc(s,n,o){if(!xs(s)||!xs(n))return NaN;let p=0,_=0;return s[2]<n[0]&&(p=n[0]-s[2]),s[0]>n[2]&&(p=s[0]-n[2]),s[1]>n[3]&&(_=s[1]-n[3]),s[3]<n[1]&&(_=n[1]-s[3]),o.distance([0,0],[p,_])}function ro(s,n,o){const p=o.pointOnLine(n,s);return o.distance(s,p.point)}function eu(s,n,o,p,_){const x=Math.min(ro(s,[o,p],_),ro(n,[o,p],_)),w=Math.min(ro(o,[s,n],_),ro(p,[s,n],_));return Math.min(x,w)}function ku(s,n,o,p,_){if(!io(n,s.length)||!io(p,o.length))return 1/0;let x=1/0;for(let w=n[0];w<n[1];++w){const C=s[w],I=s[w+1];for(let O=p[0];O<p[1];++O){const j=o[O],V=o[O+1];if(Iu(C,I,j,V))return 0;x=Math.min(x,eu(C,I,j,V,_))}}return x}function uc(s,n,o,p,_){if(!io(n,s.length)||!io(p,o.length))return NaN;let x=1/0;for(let w=n[0];w<=n[1];++w)for(let C=p[0];C<=p[1];++C)if(x=Math.min(x,_.distance(s[w],o[C])),x===0)return x;return x}function ff(s,n,o){if(Yo(s,n,!0))return 0;let p=1/0;for(const _ of n){const x=_[0],w=_[_.length-1];if(x!==w&&(p=Math.min(p,ro(s,[w,x],o)),p===0))return p;const C=o.pointOnLine(_,s);if(p=Math.min(p,o.distance(s,C.point)),p===0)return p}return p}function Ml(s,n,o,p){if(!io(n,s.length))return NaN;for(let x=n[0];x<=n[1];++x)if(Yo(s[x],o,!0))return 0;let _=1/0;for(let x=n[0];x<n[1];++x){const w=s[x],C=s[x+1];for(const I of o)for(let O=0,j=I.length,V=j-1;O<j;V=O++){const G=I[V],H=I[O];if(Iu(w,C,G,H))return 0;_=Math.min(_,eu(w,C,G,H,p))}}return _}function hc(s,n){for(const o of s)for(const p of o)if(Yo(p,n,!0))return!0;return!1}function Ih(s,n,o,p=1/0){const _=lc(s),x=lc(n);if(p!==1/0&&cc(_,x,o)>=p)return p;if(vs(_,x)){if(hc(s,n))return 0}else if(hc(n,s))return 0;let w=1/0;for(const C of s)for(let I=0,O=C.length,j=O-1;I<O;j=I++){const V=C[j],G=C[I];for(const H of n)for(let te=0,ne=H.length,re=ne-1;te<ne;re=te++){const ue=H[re],Ce=H[te];if(Iu(V,G,ue,Ce))return 0;w=Math.min(w,eu(V,G,ue,Ce,o))}}return w}function ci(s,n,o,p,_,x){if(!x)return;const w=cc(Qc(p,x),_,o);w<n&&s.push([w,x,[0,0]])}function Wr(s,n,o,p,_,x,w){if(!x||!w)return;const C=cc(Qc(p,x),Qc(_,w),o);C<n&&s.push([C,x,w])}function zl(s,n,o,p,_=1/0){let x=Math.min(p.distance(s[0],o[0][0]),_);if(x===0)return x;const w=new bd([[0,[0,s.length-1],[0,0]]],_a),C=lc(o);for(;w.length>0;){const I=w.pop();if(I[0]>=x)continue;const O=I[1],j=n?50:100;if(Ys(O)<=j){if(!io(O,s.length))return NaN;if(n){const V=Ml(s,O,o,p);if(isNaN(V)||V===0)return V;x=Math.min(x,V)}else for(let V=O[0];V<=O[1];++V){const G=ff(s[V],o,p);if(x=Math.min(x,G),x===0)return 0}}else{const V=Cl(O,n);ci(w,x,p,s,C,V[0]),ci(w,x,p,s,C,V[1])}}return x}function Pu(s,n,o,p,_,x=1/0){let w=Math.min(x,_.distance(s[0],o[0]));if(w===0)return w;const C=new bd([[0,[0,s.length-1],[0,o.length-1]]],_a);for(;C.length>0;){const I=C.pop();if(I[0]>=w)continue;const O=I[1],j=I[2],V=n?50:100,G=p?50:100;if(Ys(O)<=V&&Ys(j)<=G){if(!io(O,s.length)&&io(j,o.length))return NaN;let H;if(n&&p)H=ku(s,O,o,j,_),w=Math.min(w,H);else if(n&&!p){const te=s.slice(O[0],O[1]+1);for(let ne=j[0];ne<=j[1];++ne)if(H=ro(o[ne],te,_),w=Math.min(w,H),w===0)return w}else if(!n&&p){const te=o.slice(j[0],j[1]+1);for(let ne=O[0];ne<=O[1];++ne)if(H=ro(s[ne],te,_),w=Math.min(w,H),w===0)return w}else H=uc(s,O,o,j,_),w=Math.min(w,H)}else{const H=Cl(O,n),te=Cl(j,p);Wr(C,w,_,s,o,H[0],te[0]),Wr(C,w,_,s,o,H[0],te[1]),Wr(C,w,_,s,o,H[1],te[0]),Wr(C,w,_,s,o,H[1],te[1])}}return w}function dc(s){return s.type==="MultiPolygon"?s.coordinates.map((n=>({type:"Polygon",coordinates:n}))):s.type==="MultiLineString"?s.coordinates.map((n=>({type:"LineString",coordinates:n}))):s.type==="MultiPoint"?s.coordinates.map((n=>({type:"Point",coordinates:n}))):[s]}class fc{constructor(n,o){this.type=Lt,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Qa(n[1])){const p=n[1];if(p.type==="FeatureCollection")return new fc(p,p.features.map((_=>dc(_.geometry))).flat());if(p.type==="Feature")return new fc(p,dc(p.geometry));if("type"in p&&"coordinates"in p)return new fc(p,dc(p))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(o,p){const _=o.geometry(),x=_.flat().map((I=>Xc([I.x,I.y],o.canonical)));if(_.length===0)return NaN;const w=new Qo(x[0][1]);let C=1/0;for(const I of p){switch(I.type){case"Point":C=Math.min(C,Pu(x,!1,[I.coordinates],!1,w,C));break;case"LineString":C=Math.min(C,Pu(x,!1,I.coordinates,!0,w,C));break;case"Polygon":C=Math.min(C,zl(x,!1,I.coordinates,w,C))}if(C===0)return C}return C})(n,this.geometries);if(n.geometryType()==="LineString")return(function(o,p){const _=o.geometry(),x=_.flat().map((I=>Xc([I.x,I.y],o.canonical)));if(_.length===0)return NaN;const w=new Qo(x[0][1]);let C=1/0;for(const I of p){switch(I.type){case"Point":C=Math.min(C,Pu(x,!0,[I.coordinates],!1,w,C));break;case"LineString":C=Math.min(C,Pu(x,!0,I.coordinates,!0,w,C));break;case"Polygon":C=Math.min(C,zl(x,!0,I.coordinates,w,C))}if(C===0)return C}return C})(n,this.geometries);if(n.geometryType()==="Polygon")return(function(o,p){const _=o.geometry();if(_.length===0||_[0].length===0)return NaN;const x=sc(_,0).map((I=>I.map((O=>O.map((j=>Xc([j.x,j.y],o.canonical))))))),w=new Qo(x[0][0][0][1]);let C=1/0;for(const I of p)for(const O of x){switch(I.type){case"Point":C=Math.min(C,zl([I.coordinates],!1,O,w,C));break;case"LineString":C=Math.min(C,zl(I.coordinates,!0,O,w,C));break;case"Polygon":C=Math.min(C,Ih(O,I.coordinates,w,C))}if(C===0)return C}return C})(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class tu{constructor(n){this.type=In,this.key=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const p=n[1];return p==null?o.error("Global state property must be defined."):typeof p!="string"?o.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new tu(p)}evaluate(n){var o;const p=(o=n.globals)===null||o===void 0?void 0:o.globalState;return p&&Object.keys(p).length!==0?ys(p,this.key):null}eachChild(){}outputDefined(){return!1}}const nu={"==":sf,"!=":Ch,">":gp,"<":Mh,">=":Mu,"<=":rc,array:Fa,at:$n,boolean:Fa,case:Eu,coalesce:Gs,collator:Hs,format:zu,image:_s,in:kn,"index-of":ic,interpolate:xr,"interpolate-hcl":xr,"interpolate-lab":xr,length:ya,let:zi,literal:to,match:Kn,number:Fa,"number-format":Ws,object:Fa,slice:bo,step:El,string:Fa,"to-boolean":ga,"to-color":ga,"to-number":ga,"to-string":ga,var:ia,within:Ko,distance:fc,"global-state":tu};class va{constructor(n,o,p,_){this.name=n,this.type=o,this._evaluate=p,this.args=_}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,o){const p=n[0],_=va.definitions[p];if(!_)return o.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(_)?_[0]:_.type,w=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,C=w.filter((([O])=>!Array.isArray(O)||O.length===n.length-1));let I=null;for(const[O,j]of C){I=new Zn(o.registry,Ua,o.path,null,o.scope);const V=[];let G=!1;for(let H=1;H<n.length;H++){const te=n[H],ne=Array.isArray(O)?O[H-1]:O.type,re=I.parse(te,1+V.length,ne);if(!re){G=!0;break}V.push(re)}if(!G)if(Array.isArray(O)&&O.length!==V.length)I.error(`Expected ${O.length} arguments, but found ${V.length} instead.`);else{for(let H=0;H<V.length;H++){const te=Array.isArray(O)?O[H]:O.type,ne=V[H];I.concat(H+1).checkSubtype(te,ne.type)}if(I.errors.length===0)return new va(p,x,j,V)}}if(C.length===1)o.errors.push(...I.errors);else{const O=(C.length?C:w).map((([V])=>{return G=V,Array.isArray(G)?`(${G.map(ri).join(", ")})`:`(${ri(G.type)}...)`;var G})).join(" | "),j=[];for(let V=1;V<n.length;V++){const G=o.parse(n[V],1+j.length);if(!G)return null;j.push(ri(G.type))}o.error(`Expected arguments of type ${O}, but found (${j.join(", ")}) instead.`)}return null}static register(n,o){va.definitions=o;for(const p in o)n[p]=va}}function wd(s,[n,o,p,_]){n=n.evaluate(s),o=o.evaluate(s),p=p.evaluate(s);const x=_?_.evaluate(s):1,w=Ba(n,o,p,x);if(w)throw new Mi(w);return new Ln(n/255,o/255,p/255,x,!1)}function Ks(s,n){return s in n}function ao(s,n){const o=n[s];return o===void 0?null:o}function es(s){return{type:s}}function Ua(s){if(s instanceof ia)return Ua(s.boundExpression);if(s instanceof va&&s.name==="error"||s instanceof Hs||s instanceof Ko||s instanceof fc||s instanceof tu)return!1;const n=s instanceof ga||s instanceof Fa;let o=!0;return s.eachChild((p=>{o=n?o&&Ua(p):o&&p instanceof to})),!!o&&ba(s)&&kl(s,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function ba(s){if(s instanceof va&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Ko||s instanceof fc)return!1;let n=!0;return s.eachChild((o=>{n&&!ba(o)&&(n=!1)})),n}function Il(s){if(s instanceof va&&s.name==="feature-state")return!1;let n=!0;return s.eachChild((o=>{n&&!Il(o)&&(n=!1)})),n}function kl(s,n){if(s instanceof va&&n.indexOf(s.name)>=0)return!1;let o=!0;return s.eachChild((p=>{o&&!kl(p,n)&&(o=!1)})),o}function Js(s){return{result:"success",value:s}}function Pl(s){return{result:"error",value:s}}function Va(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function pc(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function mc(s){return!!s.expression&&s.expression.interpolated}function Rn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function kh(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&Un(s)===ps}function oo(s){return s}function Du(s,n){const o=s.stops&&typeof s.stops[0][0]=="object",p=o||!(o||s.property!==void 0),_=s.type||(mc(n)?"exponential":"interval"),x=(function(j){switch(j.type){case"color":return Ln.parse;case"padding":return hn.parse;case"numberArray":return li.parse;case"colorArray":return Jt.parse;default:return null}})(n);if(x&&((s=fa({},s)).stops&&(s.stops=s.stops.map((j=>[j[0],x(j[1])]))),s.default=x(s.default?s.default:n.default)),s.colorSpace&&(w=s.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var w;const C=(function(j){switch(j){case"exponential":return Dl;case"interval":return Lu;case"categorical":return Sd;case"identity":return Ph;default:throw new Error(`Unknown function type "${j}"`)}})(_);let I,O;if(_==="categorical"){I=Object.create(null);for(const j of s.stops)I[j[0]]=j[1];O=typeof s.stops[0][0]}if(o){const j={},V=[];for(let te=0;te<s.stops.length;te++){const ne=s.stops[te],re=ne[0].zoom;j[re]===void 0&&(j[re]={zoom:re,type:s.type,property:s.property,default:s.default,stops:[]},V.push(re)),j[re].stops.push([ne[0].value,ne[1]])}const G=[];for(const te of V)G.push([j[te].zoom,Du(j[te],n)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:xr.interpolationFactor.bind(void 0,H),zoomStops:G.map((te=>te[0])),evaluate:({zoom:te},ne)=>Dl({stops:G,base:s.base},n,te).evaluate(te,ne)}}if(p){const j=_==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:xr.interpolationFactor.bind(void 0,j),zoomStops:s.stops.map((V=>V[0])),evaluate:({zoom:V})=>C(s,n,V,I,O)}}return{kind:"source",evaluate(j,V){const G=V&&V.properties?V.properties[s.property]:void 0;return G===void 0?so(s.default,n.default):C(s,n,G,I,O)}}}function so(s,n,o){return s!==void 0?s:n!==void 0?n:o!==void 0?o:void 0}function Sd(s,n,o,p,_){return so(typeof o===_?p[o]:void 0,s.default,n.default)}function Lu(s,n,o){if(Rn(o)!=="number")return so(s.default,n.default);const p=s.stops.length;if(p===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[p-1][0])return s.stops[p-1][1];const _=Tl(s.stops.map((x=>x[0])),o);return s.stops[_][1]}function Dl(s,n,o){const p=s.base!==void 0?s.base:1;if(Rn(o)!=="number")return so(s.default,n.default);const _=s.stops.length;if(_===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[_-1][0])return s.stops[_-1][1];const x=Tl(s.stops.map((j=>j[0])),o),w=(function(j,V,G,H){const te=H-G,ne=j-G;return te===0?0:V===1?ne/te:(Math.pow(V,ne)-1)/(Math.pow(V,te)-1)})(o,p,s.stops[x][0],s.stops[x+1][0]),C=s.stops[x][1],I=s.stops[x+1][1],O=Yi[n.type]||oo;return typeof C.evaluate=="function"?{evaluate(...j){const V=C.evaluate.apply(void 0,j),G=I.evaluate.apply(void 0,j);if(V!==void 0&&G!==void 0)return O(V,G,w,s.colorSpace)}}:O(C,I,w,s.colorSpace)}function Ph(s,n,o){switch(n.type){case"color":o=Ln.parse(o);break;case"formatted":o=Hr.fromString(o.toString());break;case"resolvedImage":o=ma.fromString(o.toString());break;case"padding":o=hn.parse(o);break;case"colorArray":o=Jt.parse(o);break;case"numberArray":o=li.parse(o);break;default:Rn(o)===n.type||n.type==="enum"&&n.values[o]||(o=void 0)}return so(o,s.default,n.default)}va.register(nu,{error:[{kind:"error"},[zn],(s,[n])=>{throw new Mi(n.evaluate(s))}],typeof:[zn,[In],(s,[n])=>ri(Un(n.evaluate(s)))],"to-rgba":[Ea(Lt,4),[Ya],(s,[n])=>{const[o,p,_,x]=n.evaluate(s).rgb;return[255*o,255*p,255*_,x]}],rgb:[Ya,[Lt,Lt,Lt],wd],rgba:[Ya,[Lt,Lt,Lt,Lt],wd],has:{type:En,overloads:[[[zn],(s,[n])=>Ks(n.evaluate(s),s.properties())],[[zn,ps],(s,[n,o])=>Ks(n.evaluate(s),o.evaluate(s))]]},get:{type:In,overloads:[[[zn],(s,[n])=>ao(n.evaluate(s),s.properties())],[[zn,ps],(s,[n,o])=>ao(n.evaluate(s),o.evaluate(s))]]},"feature-state":[In,[zn],(s,[n])=>ao(n.evaluate(s),s.featureState||{})],properties:[ps,[],s=>s.properties()],"geometry-type":[zn,[],s=>s.geometryType()],id:[In,[],s=>s.id()],zoom:[Lt,[],s=>s.globals.zoom],"heatmap-density":[Lt,[],s=>s.globals.heatmapDensity||0],elevation:[Lt,[],s=>s.globals.elevation||0],"line-progress":[Lt,[],s=>s.globals.lineProgress||0],accumulated:[In,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Lt,es(Lt),(s,n)=>{let o=0;for(const p of n)o+=p.evaluate(s);return o}],"*":[Lt,es(Lt),(s,n)=>{let o=1;for(const p of n)o*=p.evaluate(s);return o}],"-":{type:Lt,overloads:[[[Lt,Lt],(s,[n,o])=>n.evaluate(s)-o.evaluate(s)],[[Lt],(s,[n])=>-n.evaluate(s)]]},"/":[Lt,[Lt,Lt],(s,[n,o])=>n.evaluate(s)/o.evaluate(s)],"%":[Lt,[Lt,Lt],(s,[n,o])=>n.evaluate(s)%o.evaluate(s)],ln2:[Lt,[],()=>Math.LN2],pi:[Lt,[],()=>Math.PI],e:[Lt,[],()=>Math.E],"^":[Lt,[Lt,Lt],(s,[n,o])=>Math.pow(n.evaluate(s),o.evaluate(s))],sqrt:[Lt,[Lt],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[Lt,[Lt],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[Lt,[Lt],(s,[n])=>Math.log(n.evaluate(s))],log2:[Lt,[Lt],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[Lt,[Lt],(s,[n])=>Math.sin(n.evaluate(s))],cos:[Lt,[Lt],(s,[n])=>Math.cos(n.evaluate(s))],tan:[Lt,[Lt],(s,[n])=>Math.tan(n.evaluate(s))],asin:[Lt,[Lt],(s,[n])=>Math.asin(n.evaluate(s))],acos:[Lt,[Lt],(s,[n])=>Math.acos(n.evaluate(s))],atan:[Lt,[Lt],(s,[n])=>Math.atan(n.evaluate(s))],min:[Lt,es(Lt),(s,n)=>Math.min(...n.map((o=>o.evaluate(s))))],max:[Lt,es(Lt),(s,n)=>Math.max(...n.map((o=>o.evaluate(s))))],abs:[Lt,[Lt],(s,[n])=>Math.abs(n.evaluate(s))],round:[Lt,[Lt],(s,[n])=>{const o=n.evaluate(s);return o<0?-Math.round(-o):Math.round(o)}],floor:[Lt,[Lt],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[Lt,[Lt],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[En,[zn,In],(s,[n,o])=>s.properties()[n.value]===o.value],"filter-id-==":[En,[In],(s,[n])=>s.id()===n.value],"filter-type-==":[En,[zn],(s,[n])=>s.geometryType()===n.value],"filter-<":[En,[zn,In],(s,[n,o])=>{const p=s.properties()[n.value],_=o.value;return typeof p==typeof _&&p<_}],"filter-id-<":[En,[In],(s,[n])=>{const o=s.id(),p=n.value;return typeof o==typeof p&&o<p}],"filter->":[En,[zn,In],(s,[n,o])=>{const p=s.properties()[n.value],_=o.value;return typeof p==typeof _&&p>_}],"filter-id->":[En,[In],(s,[n])=>{const o=s.id(),p=n.value;return typeof o==typeof p&&o>p}],"filter-<=":[En,[zn,In],(s,[n,o])=>{const p=s.properties()[n.value],_=o.value;return typeof p==typeof _&&p<=_}],"filter-id-<=":[En,[In],(s,[n])=>{const o=s.id(),p=n.value;return typeof o==typeof p&&o<=p}],"filter->=":[En,[zn,In],(s,[n,o])=>{const p=s.properties()[n.value],_=o.value;return typeof p==typeof _&&p>=_}],"filter-id->=":[En,[In],(s,[n])=>{const o=s.id(),p=n.value;return typeof o==typeof p&&o>=p}],"filter-has":[En,[In],(s,[n])=>n.value in s.properties()],"filter-has-id":[En,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[En,[Ea(zn)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[En,[Ea(In)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[En,[zn,Ea(In)],(s,[n,o])=>o.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[En,[zn,Ea(In)],(s,[n,o])=>(function(p,_,x,w){for(;x<=w;){const C=x+w>>1;if(_[C]===p)return!0;_[C]>p?w=C-1:x=C+1}return!1})(s.properties()[n.value],o.value,0,o.value.length-1)],all:{type:En,overloads:[[[En,En],(s,[n,o])=>n.evaluate(s)&&o.evaluate(s)],[es(En),(s,n)=>{for(const o of n)if(!o.evaluate(s))return!1;return!0}]]},any:{type:En,overloads:[[[En,En],(s,[n,o])=>n.evaluate(s)||o.evaluate(s)],[es(En),(s,n)=>{for(const o of n)if(o.evaluate(s))return!0;return!1}]]},"!":[En,[En],(s,[n])=>!n.evaluate(s)],"is-supported-script":[En,[zn],(s,[n])=>{const o=s.globals&&s.globals.isSupportedScript;return!o||o(n.evaluate(s))}],upcase:[zn,[zn],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[zn,[zn],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[zn,es(In),(s,n)=>n.map((o=>eo(o.evaluate(s)))).join("")],"resolved-locale":[zn,[Jl],(s,[n])=>n.evaluate(s).resolvedLocale()]});class Ru{constructor(n,o,p){this.expression=n,this._warningHistory={},this._evaluator=new Sl,this._defaultValue=o?(function(_){if(_.type==="color"&&kh(_.default))return new Ln(0,0,0,0);switch(_.type){case"color":return Ln.parse(_.default)||null;case"padding":return hn.parse(_.default)||null;case"numberArray":return li.parse(_.default)||null;case"colorArray":return Jt.parse(_.default)||null;case"variableAnchorOffsetCollection":return Ji.parse(_.default)||null;case"projectionDefinition":return Qi.parse(_.default)||null;default:return _.default===void 0?null:_.default}})(o):null,this._enumValues=o&&o.type==="enum"?o.values:null,this._globalState=p}evaluateWithoutErrorHandling(n,o,p,_,x,w){return this._globalState&&(n=We(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=o,this._evaluator.featureState=p,this._evaluator.canonical=_,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(n,o,p,_,x,w){this._globalState&&(n=We(n,this._globalState)),this._evaluator.globals=n,this._evaluator.feature=o||null,this._evaluator.featureState=p||null,this._evaluator.canonical=_,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Mi(`Expected value to be one of ${Object.keys(this._enumValues).map((I=>JSON.stringify(I))).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Ll(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in nu}function g(s,n,o){const p=new Zn(nu,Ua,[],n?(function(x){const w={color:Ya,string:zn,number:Lt,enum:zn,boolean:En,formatted:Zo,padding:Vs,numberArray:ms,colorArray:_o,projectionDefinition:xh,resolvedImage:dr,variableAnchorOffsetCollection:Gc};return x.type==="array"?Ea(w[x.value]||In,x.length):w[x.type]})(n):void 0),_=p.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?Js(new Ru(_,n,o)):Pl(p.errors)}class T{constructor(n,o,p){this.kind=n,this._styleExpression=o,this.isStateDependent=n!=="constant"&&!Il(o.expression),this.globalStateRefs=De(o.expression),this._globalState=p}evaluateWithoutErrorHandling(n,o,p,_,x,w){return this._globalState&&(n=We(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,o,p,_,x,w)}evaluate(n,o,p,_,x,w){return this._globalState&&(n=We(n,this._globalState)),this._styleExpression.evaluate(n,o,p,_,x,w)}}class P{constructor(n,o,p,_,x){this.kind=n,this.zoomStops=p,this._styleExpression=o,this.isStateDependent=n!=="camera"&&!Il(o.expression),this.globalStateRefs=De(o.expression),this.interpolationType=_,this._globalState=x}evaluateWithoutErrorHandling(n,o,p,_,x,w){return this._globalState&&(n=We(n,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(n,o,p,_,x,w)}evaluate(n,o,p,_,x,w){return this._globalState&&(n=We(n,this._globalState)),this._styleExpression.evaluate(n,o,p,_,x,w)}interpolationFactor(n,o,p){return this.interpolationType?xr.interpolationFactor(this.interpolationType,n,o,p):0}}function U(s,n,o){const p=g(s,n,o);if(p.result==="error")return p;const _=p.value.expression,x=ba(_);if(!x&&!Va(n))return Pl([new pa("","data expressions not supported")]);const w=kl(_,["zoom"]);if(!w&&!pc(n))return Pl([new pa("","zoom expressions not supported")]);const C=he(_);return C||w?C instanceof pa?Pl([C]):C instanceof xr&&!mc(n)?Pl([new pa("",'"interpolate" expressions cannot be used with this property')]):Js(C?new P(x?"camera":"composite",p.value,C.labels,C instanceof xr?C.interpolation:void 0,o):new T(x?"constant":"source",p.value,o)):Pl([new pa("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class K{constructor(n,o){this._parameters=n,this._specification=o,fa(this,Du(this._parameters,this._specification))}static deserialize(n){return new K(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function he(s){let n=null;if(s instanceof zi)n=he(s.result);else if(s instanceof Gs){for(const o of s.args)if(n=he(o),n)break}else(s instanceof El||s instanceof xr)&&s.input instanceof va&&s.input.name==="zoom"&&(n=s);return n instanceof pa||s.eachChild((o=>{const p=he(o);p instanceof pa?n=p:!n&&p?n=new pa("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&p&&n!==p&&(n=new pa("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}function De(s,n=new Set){return s instanceof tu&&n.add(s.key),s.eachChild((o=>{De(o,n)})),n}function We(s,n){const{zoom:o,heatmapDensity:p,elevation:_,lineProgress:x,isSupportedScript:w,accumulated:C}=s??{};return{zoom:o,heatmapDensity:p,elevation:_,lineProgress:x,isSupportedScript:w,accumulated:C,globalState:n}}function ht(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const n of s.slice(1))if(!ht(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Ct={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Wt(s,n){if(s==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};ht(s)||(s=kr(s));const o=g(s,Ct,n);if(o.result==="error")throw new Error(o.value.map((p=>`${p.key}: ${p.message}`)).join(", "));return{filter:(p,_,x)=>o.value.evaluate(p,_,{},x),needGeometry:qn(s),getGlobalStateRefs:()=>De(o.value.expression)}}function gn(s,n){return s<n?-1:s>n?1:0}function qn(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let n=1;n<s.length;n++)if(qn(s[n]))return!0;return!1}function kr(s){if(!s)return!0;const n=s[0];return s.length<=1?n!=="any":n==="=="?mr(s[1],s[2],"=="):n==="!="?ui(mr(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?mr(s[1],s[2],n):n==="any"?(o=s.slice(1),["any"].concat(o.map(kr))):n==="all"?["all"].concat(s.slice(1).map(kr)):n==="none"?["all"].concat(s.slice(1).map(kr).map(ui)):n==="in"?lo(s[1],s.slice(2)):n==="!in"?ui(lo(s[1],s.slice(2))):n==="has"?Ci(s[1]):n!=="!has"||ui(Ci(s[1]));var o}function mr(s,n,o){switch(s){case"$type":return[`filter-type-${o}`,n];case"$id":return[`filter-id-${o}`,n];default:return[`filter-${o}`,s,n]}}function lo(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some((o=>typeof o!=typeof n[0]))?["filter-in-large",s,["literal",n.sort(gn)]]:["filter-in-small",s,["literal",n]]}}function Ci(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function ui(s){return["!",s]}function Jn(s){const n=typeof s;if(n==="number"||n==="boolean"||n==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let _="[";for(const x of s)_+=`${Jn(x)},`;return`${_}]`}const o=Object.keys(s).sort();let p="{";for(let _=0;_<o.length;_++)p+=`${JSON.stringify(o[_])}:${Jn(s[o[_]])},`;return`${p}}`}function Qs(s){let n="";for(const o of Ei)n+=`/${Jn(s[o])}`;return n}function xo(s){const n=s.value;return n?[new ot(s.key,n,"constants have been deprecated as of v8")]:[]}function er(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function co(s){if(Array.isArray(s))return s.map(co);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const n={};for(const o in s)n[o]=co(s[o]);return n}return er(s)}function Za(s){const n=s.key,o=s.value,p=s.valueSpec||{},_=s.objectElementValidators||{},x=s.style,w=s.styleSpec,C=s.validateSpec;let I=[];const O=Rn(o);if(O!=="object")return[new ot(n,o,`object expected, ${O} found`)];for(const j in o){const V=j.split(".")[0],G=ys(p,V)||p["*"];let H;if(ys(_,V))H=_[V];else if(ys(p,V)){if(o[j]===void 0)continue;H=C}else if(_["*"])H=_["*"];else{if(!p["*"]){I.push(new ot(n,o[j],`unknown property "${j}"`));continue}H=C}I=I.concat(H({key:(n&&`${n}.`)+j,value:o[j],valueSpec:G,style:x,styleSpec:w,object:o,objectKey:j,validateSpec:C},o))}for(const j in p)_[j]||p[j].required&&p[j].default===void 0&&o[j]===void 0&&I.push(new ot(n,o,`missing required property "${j}"`));return I}function ar(s){const n=s.value,o=s.valueSpec,p=s.style,_=s.styleSpec,x=s.key,w=s.arrayElementValidator||s.validateSpec;if(Rn(n)!=="array")return[new ot(x,n,`array expected, ${Rn(n)} found`)];if(o.length&&n.length!==o.length)return[new ot(x,n,`array length ${o.length} expected, length ${n.length} found`)];let C={type:o.value,values:o.values};_.$version<7&&(C.function=o.function),Rn(o.value)==="object"&&(C=o.value);let I=[];for(let O=0;O<n.length;O++)I=I.concat(w({array:n,arrayIndex:O,value:n[O],valueSpec:C,validateSpec:s.validateSpec,style:p,styleSpec:_,key:`${x}[${O}]`}));return I}function wo(s){const n=s.key,o=s.value,p=s.valueSpec;let _=Rn(o);return _==="number"&&o!=o&&(_="NaN"),_!=="number"?[new ot(n,o,`number expected, ${_} found`)]:"minimum"in p&&o<p.minimum?[new ot(n,o,`${o} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&o>p.maximum?[new ot(n,o,`${o} is greater than the maximum value ${p.maximum}`)]:[]}function ws(s){const n=s.valueSpec,o=er(s.value.type);let p,_,x,w={};const C=o!=="categorical"&&s.value.property===void 0,I=!C,O=Rn(s.value.stops)==="array"&&Rn(s.value.stops[0])==="array"&&Rn(s.value.stops[0][0])==="object",j=Za({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(H){if(o==="identity")return[new ot(H.key,H.value,'identity function may not have a "stops" property')];let te=[];const ne=H.value;return te=te.concat(ar({key:H.key,value:ne,valueSpec:H.valueSpec,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:V})),Rn(ne)==="array"&&ne.length===0&&te.push(new ot(H.key,ne,"array must have at least one stop")),te},default:function(H){return H.validateSpec({key:H.key,value:H.value,valueSpec:n,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec})}}});return o==="identity"&&C&&j.push(new ot(s.key,s.value,'missing required property "property"')),o==="identity"||s.value.stops||j.push(new ot(s.key,s.value,'missing required property "stops"')),o==="exponential"&&s.valueSpec.expression&&!mc(s.valueSpec)&&j.push(new ot(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(I&&!Va(s.valueSpec)?j.push(new ot(s.key,s.value,"property functions not supported")):C&&!pc(s.valueSpec)&&j.push(new ot(s.key,s.value,"zoom functions not supported"))),o!=="categorical"&&!O||s.value.property!==void 0||j.push(new ot(s.key,s.value,'"property" property is required')),j;function V(H){let te=[];const ne=H.value,re=H.key;if(Rn(ne)!=="array")return[new ot(re,ne,`array expected, ${Rn(ne)} found`)];if(ne.length!==2)return[new ot(re,ne,`array length 2 expected, length ${ne.length} found`)];if(O){if(Rn(ne[0])!=="object")return[new ot(re,ne,`object expected, ${Rn(ne[0])} found`)];if(ne[0].zoom===void 0)return[new ot(re,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new ot(re,ne,"object stop key must have value")];if(x&&x>er(ne[0].zoom))return[new ot(re,ne[0].zoom,"stop zoom values must appear in ascending order")];er(ne[0].zoom)!==x&&(x=er(ne[0].zoom),_=void 0,w={}),te=te.concat(Za({key:`${re}[0]`,value:ne[0],valueSpec:{zoom:{}},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:wo,value:G}}))}else te=te.concat(G({key:`${re}[0]`,value:ne[0],validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec},ne));return Ll(co(ne[1]))?te.concat([new ot(`${re}[1]`,ne[1],"expressions are not allowed in function stops.")]):te.concat(H.validateSpec({key:`${re}[1]`,value:ne[1],valueSpec:n,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec}))}function G(H,te){const ne=Rn(H.value),re=er(H.value),ue=H.value!==null?H.value:te;if(p){if(ne!==p)return[new ot(H.key,ue,`${ne} stop domain type must match previous stop domain type ${p}`)]}else p=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean")return[new ot(H.key,ue,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&o!=="categorical"){let Ce=`number expected, ${ne} found`;return Va(n)&&o===void 0&&(Ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ot(H.key,ue,Ce)]}return o!=="categorical"||ne!=="number"||isFinite(re)&&Math.floor(re)===re?o!=="categorical"&&ne==="number"&&_!==void 0&&re<_?[new ot(H.key,ue,"stop domain values must appear in ascending order")]:(_=re,o==="categorical"&&re in w?[new ot(H.key,ue,"stop domain values must be unique")]:(w[re]=!0,[])):[new ot(H.key,ue,`integer expected, found ${re}`)]}}function Ss(s){const n=(s.expressionContext==="property"?U:g)(co(s.value),s.valueSpec);if(n.result==="error")return n.value.map((p=>new ot(`${s.key}${p.key}`,s.value,p.message)));const o=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!o.outputDefined())return[new ot(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Il(o))return[new ot(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!Il(o))return[new ot(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!kl(o,["zoom","feature-state"]))return[new ot(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!ba(o))return[new ot(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function el(s){const n=s.key,o=s.value,p=Rn(o);return p!=="string"?[new ot(n,o,`color expected, ${p} found`)]:Ln.parse(String(o))?[]:[new ot(n,o,`color expected, "${o}" found`)]}function ts(s){const n=s.key,o=s.value,p=s.valueSpec,_=[];return Array.isArray(p.values)?p.values.indexOf(er(o))===-1&&_.push(new ot(n,o,`expected one of [${p.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(p.values).indexOf(er(o))===-1&&_.push(new ot(n,o,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(o)} found`)),_}function So(s){return ht(co(s.value))?Ss(fa({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ts(s)}function Ts(s){const n=s.value,o=s.key;if(Rn(n)!=="array")return[new ot(o,n,`array expected, ${Rn(n)} found`)];const p=s.styleSpec;let _,x=[];if(n.length<1)return[new ot(o,n,"filter array must have at least 1 element")];switch(x=x.concat(ts({key:`${o}[0]`,value:n[0],valueSpec:p.filter_operator,style:s.style,styleSpec:s.styleSpec})),er(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&er(n[1])==="$type"&&x.push(new ot(o,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&x.push(new ot(o,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(_=Rn(n[1]),_!=="string"&&x.push(new ot(`${o}[1]`,n[1],`string expected, ${_} found`)));for(let w=2;w<n.length;w++)_=Rn(n[w]),er(n[1])==="$type"?x=x.concat(ts({key:`${o}[${w}]`,value:n[w],valueSpec:p.geometry_type,style:s.style,styleSpec:s.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&x.push(new ot(`${o}[${w}]`,n[w],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let w=1;w<n.length;w++)x=x.concat(Ts({key:`${o}[${w}]`,value:n[w],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":_=Rn(n[1]),n.length!==2?x.push(new ot(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):_!=="string"&&x.push(new ot(`${o}[1]`,n[1],`string expected, ${_} found`))}return x}function gc(s,n){const o=s.key,p=s.validateSpec,_=s.style,x=s.styleSpec,w=s.value,C=s.objectKey,I=x[`${n}_${s.layerType}`];if(!I)return[];const O=C.match(/^(.*)-transition$/);if(n==="paint"&&O&&I[O[1]]&&I[O[1]].transition)return p({key:o,value:w,valueSpec:x.transition,style:_,styleSpec:x});const j=s.valueSpec||I[C];if(!j)return[new ot(o,w,`unknown property "${C}"`)];let V;if(Rn(w)==="string"&&Va(j)&&!j.tokens&&(V=/^{([^}]+)}$/.exec(w)))return[new ot(o,w,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const G=[];return s.layerType==="symbol"&&C==="text-font"&&kh(co(w))&&er(w.type)==="identity"&&G.push(new ot(o,w,'"text-font" does not support identity functions')),G.concat(p({key:s.key,value:w,valueSpec:j,style:_,styleSpec:x,expressionContext:"property",propertyType:n,propertyKey:C}))}function Rl(s){return gc(s,"paint")}function pf(s){return gc(s,"layout")}function mf(s){let n=[];const o=s.value,p=s.key,_=s.style,x=s.styleSpec;if(Rn(o)!=="object")return[new ot(p,o,`object expected, ${Rn(o)} found`)];o.type||o.ref||n.push(new ot(p,o,'either "type" or "ref" is required'));let w=er(o.type);const C=er(o.ref);if(o.id){const I=er(o.id);for(let O=0;O<s.arrayIndex;O++){const j=_.layers[O];er(j.id)===I&&n.push(new ot(p,o.id,`duplicate layer id "${o.id}", previously used at line ${j.id.__line__}`))}}if("ref"in o){let I;["type","source","source-layer","filter","layout"].forEach((O=>{O in o&&n.push(new ot(p,o[O],`"${O}" is prohibited for ref layers`))})),_.layers.forEach((O=>{er(O.id)===C&&(I=O)})),I?I.ref?n.push(new ot(p,o.ref,"ref cannot reference another ref layer")):w=er(I.type):n.push(new ot(p,o.ref,`ref layer "${C}" not found`))}else if(w!=="background")if(o.source){const I=_.sources&&_.sources[o.source],O=I&&er(I.type);I?O==="vector"&&w==="raster"?n.push(new ot(p,o.source,`layer "${o.id}" requires a raster source`)):O!=="raster-dem"&&w==="hillshade"||O!=="raster-dem"&&w==="color-relief"?n.push(new ot(p,o.source,`layer "${o.id}" requires a raster-dem source`)):O==="raster"&&w!=="raster"?n.push(new ot(p,o.source,`layer "${o.id}" requires a vector source`)):O!=="vector"||o["source-layer"]?O==="raster-dem"&&w!=="hillshade"&&w!=="color-relief"?n.push(new ot(p,o.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):w!=="line"||!o.paint||!o.paint["line-gradient"]||O==="geojson"&&I.lineMetrics||n.push(new ot(p,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new ot(p,o,`layer "${o.id}" must specify a "source-layer"`)):n.push(new ot(p,o.source,`source "${o.source}" not found`))}else n.push(new ot(p,o,'missing required property "source"'));return n=n.concat(Za({key:p,value:o,valueSpec:x.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${p}.type`,value:o.type,valueSpec:x.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:o,objectKey:"type"}),filter:So,layout:I=>Za({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":O=>pf(fa({layerType:w},O))}}),paint:I=>Za({layer:o,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":O=>Rl(fa({layerType:w},O))}})}})),n}function ns(s){const n=s.value,o=s.key,p=Rn(n);return p!=="string"?[new ot(o,n,`string expected, ${p} found`)]:[]}const Dh={promoteId:function({key:s,value:n}){if(Rn(n)==="string")return ns({key:s,value:n});{const o=[];for(const p in n)o.push(...ns({key:`${s}.${p}`,value:n[p]}));return o}}};function yc(s){const n=s.value,o=s.key,p=s.styleSpec,_=s.style,x=s.validateSpec;if(!n.type)return[new ot(o,n,'"type" is required')];const w=er(n.type);let C;switch(w){case"vector":case"raster":return C=Za({key:o,value:n,valueSpec:p[`source_${w.replace("-","_")}`],style:s.style,styleSpec:p,objectElementValidators:Dh,validateSpec:x}),C;case"raster-dem":return C=(function(I){var O;const j=(O=I.sourceName)!==null&&O!==void 0?O:"",V=I.value,G=I.styleSpec,H=G.source_raster_dem,te=I.style;let ne=[];const re=Rn(V);if(V===void 0)return ne;if(re!=="object")return ne.push(new ot("source_raster_dem",V,`object expected, ${re} found`)),ne;const ue=er(V.encoding)==="custom",Ce=["redFactor","greenFactor","blueFactor","baseShift"],fe=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const ye in V)!ue&&Ce.includes(ye)?ne.push(new ot(ye,V[ye],`In "${j}": "${ye}" is only valid when "encoding" is set to "custom". ${fe} encoding found`)):H[ye]?ne=ne.concat(I.validateSpec({key:ye,value:V[ye],valueSpec:H[ye],validateSpec:I.validateSpec,style:te,styleSpec:G})):ne.push(new ot(ye,V[ye],`unknown property "${ye}"`));return ne})({sourceName:o,value:n,style:s.style,styleSpec:p,validateSpec:x}),C;case"geojson":if(C=Za({key:o,value:n,valueSpec:p.source_geojson,style:_,styleSpec:p,validateSpec:x,objectElementValidators:Dh}),n.cluster)for(const I in n.clusterProperties){const[O,j]=n.clusterProperties[I],V=typeof O=="string"?[O,["accumulated"],["get",I]]:O;C.push(...Ss({key:`${o}.${I}.map`,value:j,expressionContext:"cluster-map"})),C.push(...Ss({key:`${o}.${I}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return C;case"video":return Za({key:o,value:n,valueSpec:p.source_video,style:_,validateSpec:x,styleSpec:p});case"image":return Za({key:o,value:n,valueSpec:p.source_image,style:_,validateSpec:x,styleSpec:p});case"canvas":return[new ot(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ts({key:`${o}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Xr(s){const n=s.value,o=s.styleSpec,p=o.light,_=s.style;let x=[];const w=Rn(n);if(n===void 0)return x;if(w!=="object")return x=x.concat([new ot("light",n,`object expected, ${w} found`)]),x;for(const C in n){const I=C.match(/^(.*)-transition$/);x=x.concat(I&&p[I[1]]&&p[I[1]].transition?s.validateSpec({key:C,value:n[C],valueSpec:o.transition,validateSpec:s.validateSpec,style:_,styleSpec:o}):p[C]?s.validateSpec({key:C,value:n[C],valueSpec:p[C],validateSpec:s.validateSpec,style:_,styleSpec:o}):[new ot(C,n[C],`unknown property "${C}"`)])}return x}function Td(s){const n=s.value,o=s.styleSpec,p=o.sky,_=s.style,x=Rn(n);if(n===void 0)return[];if(x!=="object")return[new ot("sky",n,`object expected, ${x} found`)];let w=[];for(const C in n)w=w.concat(p[C]?s.validateSpec({key:C,value:n[C],valueSpec:p[C],style:_,styleSpec:o}):[new ot(C,n[C],`unknown property "${C}"`)]);return w}function gf(s){const n=s.value,o=s.styleSpec,p=o.terrain,_=s.style;let x=[];const w=Rn(n);if(n===void 0)return x;if(w!=="object")return x=x.concat([new ot("terrain",n,`object expected, ${w} found`)]),x;for(const C in n)x=x.concat(p[C]?s.validateSpec({key:C,value:n[C],valueSpec:p[C],validateSpec:s.validateSpec,style:_,styleSpec:o}):[new ot(C,n[C],`unknown property "${C}"`)]);return x}function yp(s){let n=[];const o=s.value,p=s.key;if(Array.isArray(o)){const _=[],x=[];for(const w in o)o[w].id&&_.includes(o[w].id)&&n.push(new ot(p,o,`all the sprites' ids must be unique, but ${o[w].id} is duplicated`)),_.push(o[w].id),o[w].url&&x.includes(o[w].url)&&n.push(new ot(p,o,`all the sprites' URLs must be unique, but ${o[w].url} is duplicated`)),x.push(o[w].url),n=n.concat(Za({key:`${p}[${w}]`,value:o[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return n}return ns({key:p,value:o})}function Um(s){return!!s&&s.constructor===Object}function _p(s){return Um(s.value)?[]:[new ot(s.key,s.value,`object expected, ${Rn(s.value)} found`)]}const Br={"*":()=>[],array:ar,boolean:function(s){const n=s.value,o=s.key,p=Rn(n);return p!=="boolean"?[new ot(o,n,`boolean expected, ${p} found`)]:[]},number:wo,color:el,constants:xo,enum:ts,filter:So,function:ws,layer:mf,object:Za,source:yc,light:Xr,sky:Td,terrain:gf,projection:function(s){const n=s.value,o=s.styleSpec,p=o.projection,_=s.style,x=Rn(n);if(n===void 0)return[];if(x!=="object")return[new ot("projection",n,`object expected, ${x} found`)];let w=[];for(const C in n)w=w.concat(p[C]?s.validateSpec({key:C,value:n[C],valueSpec:p[C],style:_,styleSpec:o}):[new ot(C,n[C],`unknown property "${C}"`)]);return w},projectionDefinition:function(s){const n=s.key;let o=s.value;o=o instanceof String?o.valueOf():o;const p=Rn(o);return p!=="array"||(function(_){return Array.isArray(_)&&_.length===3&&typeof _[0]=="string"&&typeof _[1]=="string"&&typeof _[2]=="number"})(o)||(function(_){return!!["interpolate","step","literal"].includes(_[0])})(o)?["array","string"].includes(p)?[]:[new ot(n,o,`projection expected, invalid type "${p}" found`)]:[new ot(n,o,`projection expected, invalid array ${JSON.stringify(o)} found`)]},string:ns,formatted:function(s){return ns(s).length===0?[]:Ss(s)},resolvedImage:function(s){return ns(s).length===0?[]:Ss(s)},padding:function(s){const n=s.key,o=s.value;if(Rn(o)==="array"){if(o.length<1||o.length>4)return[new ot(n,o,`padding requires 1 to 4 values; ${o.length} values found`)];const p={type:"number"};let _=[];for(let x=0;x<o.length;x++)_=_.concat(s.validateSpec({key:`${n}[${x}]`,value:o[x],validateSpec:s.validateSpec,valueSpec:p}));return _}return wo({key:n,value:o,valueSpec:{}})},numberArray:function(s){const n=s.key,o=s.value;if(Rn(o)==="array"){const p={type:"number"};if(o.length<1)return[new ot(n,o,"array length at least 1 expected, length 0 found")];let _=[];for(let x=0;x<o.length;x++)_=_.concat(s.validateSpec({key:`${n}[${x}]`,value:o[x],validateSpec:s.validateSpec,valueSpec:p}));return _}return wo({key:n,value:o,valueSpec:{}})},colorArray:function(s){const n=s.key,o=s.value;if(Rn(o)==="array"){if(o.length<1)return[new ot(n,o,"array length at least 1 expected, length 0 found")];let p=[];for(let _=0;_<o.length;_++)p=p.concat(el({key:`${n}[${_}]`,value:o[_]}));return p}return el({key:n,value:o})},variableAnchorOffsetCollection:function(s){const n=s.key,o=s.value,p=Rn(o),_=s.styleSpec;if(p!=="array"||o.length<1||o.length%2!=0)return[new ot(n,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<o.length;w+=2)x=x.concat(ts({key:`${n}[${w}]`,value:o[w],valueSpec:_.layout_symbol["text-anchor"]})),x=x.concat(ar({key:`${n}[${w+1}]`,value:o[w+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:_}));return x},sprite:yp,state:_p,fontFaces:function(s){const n=s.key,o=s.value,p=s.validateSpec,_=s.styleSpec,x=s.style;if(!Um(o))return[new ot(n,o,`object expected, ${Rn(o)} found`)];const w=[];for(const C in o){const I=o[C],O=Rn(I);if(O==="string")w.push(...ns({key:`${n}.${C}`,value:I}));else if(O==="array"){const j={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[V,G]of I.entries())w.push(...Za({key:`${n}.${C}[${V}]`,value:G,valueSpec:j,styleSpec:_,style:x,validateSpec:p}))}else w.push(new ot(`${n}.${C}`,I,`string or array expected, ${O} found`))}return w}};function Ol(s){const n=s.value,o=s.valueSpec,p=s.styleSpec;return s.validateSpec=Ol,o.expression&&kh(er(n))?ws(s):o.expression&&Ll(co(n))?Ss(s):o.type&&Br[o.type]?Br[o.type](s):Za(fa({},s,{valueSpec:o.type?p[o.type]:o}))}function Lh(s){const n=s.value,o=s.key,p=ns(s);return p.length||(n.indexOf("{fontstack}")===-1&&p.push(new ot(o,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&p.push(new ot(o,n,'"glyphs" url must include a "{range}" token'))),p}function uo(s,n=Ke){let o=[];return o=o.concat(Ol({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,validateSpec:Ol,objectElementValidators:{glyphs:Lh,"*":()=>[]}})),s.constants&&(o=o.concat(xo({key:"constants",value:s.constants}))),Ou(o)}function is(s){return function(n){return s(Object.assign({},n,{validateSpec:Ol}))}}function Ou(s){return[].concat(s).sort(((n,o)=>n.line-o.line))}function ho(s){return function(...n){return Ou(s.apply(this,n))}}uo.source=ho(is(yc)),uo.sprite=ho(is(yp)),uo.glyphs=ho(is(Lh)),uo.light=ho(is(Xr)),uo.sky=ho(is(Td)),uo.terrain=ho(is(gf)),uo.state=ho(is(_p)),uo.layer=ho(is(mf)),uo.filter=ho(is(So)),uo.paintProperty=ho(is(Rl)),uo.layoutProperty=ho(is(pf));const Iy={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class Rh{constructor(n,o){this._globalState=o,this.setValue(n)}evaluate(){var n;return(n=this._literalValue)!==null&&n!==void 0?n:this._compiledValue.evaluate({})}setValue(n){if(n==null||n==="visible"||n==="none")return this._literalValue=n==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const o=g(n,Iy,this._globalState);if(o.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(o.value.map((p=>`${p.key}: ${p.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=o.value,this._globalStateRefs=De(o.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const Ed=Ke,xa=uo,tl=xa.light,yf=xa.sky,_f=xa.paintProperty,Vm=xa.layoutProperty;function nl(s,n){let o=!1;if(n&&n.length)for(const p of n)s.fire(new pi(new Error(p.message))),o=!0;return o}class iu{constructor(n,o,p){const _=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const w=new Int32Array(this.arrayBuffer);n=w[0],this.d=(o=w[1])+2*(p=w[2]);for(let I=0;I<this.d*this.d;I++){const O=w[3+I],j=w[3+I+1];_.push(O===j?null:w.subarray(O,j))}const C=w[3+_.length+1];this.keys=w.subarray(w[3+_.length],C),this.bboxes=w.subarray(C),this.insert=this._insertReadonly}else{this.d=o+2*p;for(let w=0;w<this.d*this.d;w++)_.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=n,this.padding=p,this.scale=o/n,this.uid=0;const x=p/o*n;this.min=-x,this.max=n+x}insert(n,o,p,_,x){this._forEachCell(o,p,_,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(o),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,o,p,_,x,w){this.cells[x].push(w)}query(n,o,p,_,x){const w=this.min,C=this.max;if(n<=w&&o<=w&&C<=p&&C<=_&&!x)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(n,o,p,_,this._queryCell,I,{},x),I}}_queryCell(n,o,p,_,x,w,C,I){const O=this.cells[x];if(O!==null){const j=this.keys,V=this.bboxes;for(let G=0;G<O.length;G++){const H=O[G];if(C[H]===void 0){const te=4*H;(I?I(V[te+0],V[te+1],V[te+2],V[te+3]):n<=V[te+2]&&o<=V[te+3]&&p>=V[te+0]&&_>=V[te+1])?(C[H]=!0,w.push(j[H])):C[H]=!1}}}}_forEachCell(n,o,p,_,x,w,C,I){const O=this._convertToCellCoord(n),j=this._convertToCellCoord(o),V=this._convertToCellCoord(p),G=this._convertToCellCoord(_);for(let H=O;H<=V;H++)for(let te=j;te<=G;te++){const ne=this.d*te+H;if((!I||I(this._convertFromCellCoord(H),this._convertFromCellCoord(te),this._convertFromCellCoord(H+1),this._convertFromCellCoord(te+1)))&&x.call(this,n,o,p,_,ne,w,C,I))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,o=3+this.cells.length+1+1;let p=0;for(let w=0;w<this.cells.length;w++)p+=this.cells[w].length;const _=new Int32Array(o+p+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let x=o;for(let w=0;w<n.length;w++){const C=n[w];_[3+w]=x,_.set(C,x),x+=C.length}return _[3+n.length]=x,_.set(this.keys,x),x+=this.keys.length,_[3+n.length+1]=x,_.set(this.bboxes,x),x+=this.bboxes.length,_.buffer}static serialize(n,o){const p=n.toArrayBuffer();return o&&o.push(p),{buffer:p}}static deserialize(n){return new iu(n.buffer)}}const Lo={};function Yt(s,n,o={}){if(Lo[s])throw new Error(`${s} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:s,writeable:!1}),Lo[s]={klass:n,omit:o.omit||[],shallow:o.shallow||[]}}Yt("Object",Object),Yt("Set",Set),Yt("TransferableGridIndex",iu),Yt("Color",Ln),Yt("Error",Error),Yt("AJAXError",Be),Yt("ResolvedImage",ma),Yt("StylePropertyFunction",K),Yt("StyleExpression",Ru,{omit:["_evaluator"]}),Yt("ZoomDependentExpression",P),Yt("ZoomConstantExpression",T),Yt("CompoundExpression",va,{omit:["_evaluate"]});for(const s in nu)nu[s]._classRegistryKey||Yt(`Expression_${s}`,nu[s]);function Ad(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function vf(s){return s.$name||s.constructor._classRegistryKey}function Es(s){return!(function(n){if(n===null||typeof n!="object")return!1;const o=vf(n);return!(!o||o==="Object")})(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Ad(s)||Ao(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function il(s,n){if(Es(s))return(Ad(s)||Ao(s))&&n&&n.push(s),ArrayBuffer.isView(s)&&n&&n.push(s.buffer),s instanceof ImageData&&n&&n.push(s.data.buffer),s;if(Array.isArray(s)){const x=[];for(const w of s)x.push(il(w,n));return x}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const o=vf(s);if(!o)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!Lo[o])throw new Error(`${o} is not registered.`);const{klass:p}=Lo[o],_=p.serialize?p.serialize(s,n):{};if(p.serialize){if(n&&_===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in s){if(!s.hasOwnProperty(x)||Lo[o].omit.indexOf(x)>=0)continue;const w=s[x];_[x]=Lo[o].shallow.indexOf(x)>=0?w:il(w,n)}s instanceof Error&&(_.message=s.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(_.$name=o),_}function Oh(s){if(Es(s))return s;if(Array.isArray(s))return s.map(Oh);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const n=vf(s)||"Object";if(!Lo[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:o}=Lo[n];if(!o)throw new Error(`can't deserialize unregistered class ${n}`);if(o.deserialize)return o.deserialize(s);const p=Object.create(o.prototype);for(const _ of Object.keys(s)){if(_==="$name")continue;const x=s[_];p[_]=Lo[n].shallow.indexOf(_)>=0?x:Oh(x)}return p}class bf{constructor(){this.first=!0}update(n,o){const p=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=o),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=p,!0))}}function Nl(s){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function Nu(s){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function Cd(s){return/\s/u.test(String.fromCodePoint(s))}function $l(s){for(const n of s)if(Nu(n.codePointAt(0)))return!0;return!1}function xf(s){for(const n of s)if(!vp(n.codePointAt(0)))return!1;return!0}function Md(s){const n=s.map((o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}})).filter((o=>o));return new RegExp(n.join("|"),"u")}const jl=Md(["Arab","Dupl","Mong","Ougr","Syrc"]);function vp(s){return!jl.test(String.fromCodePoint(s))}function Bl(s){return!(Nu(s)||(n=s,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(n))));var n}const wf=Md(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function zd(s){return wf.test(String.fromCodePoint(s))}function Fl(s,n){return!(!n&&zd(s)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(s)))}function _c(s){for(const n of s)if(zd(n.codePointAt(0)))return!0;return!1}const As=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(As.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,n){return c(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;const o=s.pluginURL,p=new Promise((x=>{this.loadScriptResolve=x}));n(o);const _=new Promise((x=>setTimeout((()=>x()),this.TIMEOUT)));if(yield Promise.race([p,_]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:o};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${o}`)}))}};class Ri{constructor(n,o){this.isSupportedScript=bp,this.zoom=n,o?(this.now=o.now||0,this.fadeDuration=o.fadeDuration||0,this.zoomHistory=o.zoomHistory||new bf,this.transition=o.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new bf,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,o=n-Math.floor(n),p=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*o}}}function bp(s){return(function(n,o){for(const p of n)if(!Fl(p.codePointAt(0),o))return!1;return!0})(s,As.getRTLTextPluginStatus()==="loaded")}const vc="-transition";class ru{constructor(n,o,p){this.property=n,this.value=o,this.expression=(function(_,x,w){if(kh(_))return new K(_,x);if(Ll(_)){const C=U(_,x,w);if(C.result==="error")throw new Error(C.value.map((I=>`${I.key}: ${I.message}`)).join(", "));return C.value}{let C=_;return x.type==="color"&&typeof _=="string"?C=Ln.parse(_):x.type!=="padding"||typeof _!="number"&&!Array.isArray(_)?x.type!=="numberArray"||typeof _!="number"&&!Array.isArray(_)?x.type!=="colorArray"||typeof _!="string"&&!Array.isArray(_)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(_)?C=Ji.parse(_):x.type==="projectionDefinition"&&typeof _=="string"&&(C=Qi.parse(_)):C=Jt.parse(_):C=li.parse(_):C=hn.parse(_),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>C}}})(o===void 0?n.specification.default:o,n.specification,p)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(n,o,p){return this.property.possiblyEvaluate(this,n,o,p)}}class Id{constructor(n,o){this.property=n,this.value=new ru(n,void 0,o)}transitioned(n,o){return new $u(this.property,this.value,o,un({},n.transition,this.transition),n.now)}untransitioned(){return new $u(this.property,this.value,null,{},0)}}class Sf{constructor(n,o){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues),this._globalState=o}getValue(n){return Bn(this._values[n].value.value)}setValue(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Id(this._values[n].property,this._globalState)),this._values[n].value=new ru(this._values[n].property,o===null?void 0:Bn(o),this._globalState)}getTransition(n){return Bn(this._values[n].transition)}setTransition(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Id(this._values[n].property,this._globalState)),this._values[n].transition=Bn(o)||void 0}serialize(){const n={};for(const o of Object.keys(this._values)){const p=this.getValue(o);p!==void 0&&(n[o]=p);const _=this.getTransition(o);_!==void 0&&(n[`${o}${vc}`]=_)}return n}transitioned(n,o){const p=new kd(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].transitioned(n,o._values[_]);return p}untransitioned(){const n=new kd(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].untransitioned();return n}}class $u{constructor(n,o,p,_,x){this.property=n,this.value=o,this.begin=x+_.delay||0,this.end=this.begin+_.duration||0,n.specification.transition&&(_.delay||_.duration)&&(this.prior=p)}possiblyEvaluate(n,o,p){const _=n.now||0,x=this.value.possiblyEvaluate(n,o,p),w=this.prior;if(w){if(_>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(_<this.begin)return w.possiblyEvaluate(n,o,p);{const C=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(n,o,p),x,Mt(C))}}return x}}class kd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,o,p){const _=new ju(this._properties);for(const x of Object.keys(this._values))_._values[x]=this._values[x].possiblyEvaluate(n,o,p);return _}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class xp{constructor(n,o){this._properties=n,this._values=Object.create(n.defaultPropertyValues),this._globalState=o}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Bn(this._values[n].value)}setValue(n,o){this._values[n]=new ru(this._values[n].property,o===null?void 0:Bn(o),this._globalState)}serialize(){const n={};for(const o of Object.keys(this._values)){const p=this.getValue(o);p!==void 0&&(n[o]=p)}return n}possiblyEvaluate(n,o,p){const _=new ju(this._properties);for(const x of Object.keys(this._values))_._values[x]=this._values[x].possiblyEvaluate(n,o,p);return _}}class rs{constructor(n,o,p){this.property=n,this.value=o,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,o,p,_){return this.property.evaluate(this.value,this.parameters,n,o,p,_)}}class ju{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class en{constructor(n){this.specification=n}possiblyEvaluate(n,o){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(o)}interpolate(n,o,p){const _=Yi[this.specification.type];return _?_(n,o,p):n}}class on{constructor(n,o){this.specification=n,this.overrides=o}possiblyEvaluate(n,o,p,_){return new rs(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(o,null,{},p,_)}:n.expression,o)}interpolate(n,o,p){if(n.value.kind!=="constant"||o.value.kind!=="constant")return n;if(n.value.value===void 0||o.value.value===void 0)return new rs(this,{kind:"constant",value:void 0},n.parameters);const _=Yi[this.specification.type];if(_){const x=_(n.value.value,o.value.value,p);return new rs(this,{kind:"constant",value:x},n.parameters)}return n}evaluate(n,o,p,_,x,w){return n.kind==="constant"?n.value:n.evaluate(o,p,_,x,w)}}class Cs extends on{possiblyEvaluate(n,o,p,_){if(n.value===void 0)return new rs(this,{kind:"constant",value:void 0},o);if(n.expression.kind==="constant"){const x=n.expression.evaluate(o,null,{},p,_),w=n.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,C=this._calculate(w,w,w,o);return new rs(this,{kind:"constant",value:C},o)}if(n.expression.kind==="camera"){const x=this._calculate(n.expression.evaluate({zoom:o.zoom-1}),n.expression.evaluate({zoom:o.zoom}),n.expression.evaluate({zoom:o.zoom+1}),o);return new rs(this,{kind:"constant",value:x},o)}return new rs(this,n.expression,o)}evaluate(n,o,p,_,x,w){if(n.kind==="source"){const C=n.evaluate(o,p,_,x,w);return this._calculate(C,C,C,o)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(o.zoom)-1},p,_),n.evaluate({zoom:Math.floor(o.zoom)},p,_),n.evaluate({zoom:Math.floor(o.zoom)+1},p,_),o):n.value}_calculate(n,o,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:p,to:o}}interpolate(n){return n}}class Nh{constructor(n){this.specification=n}possiblyEvaluate(n,o,p,_){if(n.value!==void 0){if(n.expression.kind==="constant"){const x=n.expression.evaluate(o,null,{},p,_);return this._calculate(x,x,x,o)}return this._calculate(n.expression.evaluate(new Ri(Math.floor(o.zoom-1),o)),n.expression.evaluate(new Ri(Math.floor(o.zoom),o)),n.expression.evaluate(new Ri(Math.floor(o.zoom+1),o)),o)}}_calculate(n,o,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:p,to:o}}interpolate(n){return n}}class Pd{constructor(n){this.specification=n}possiblyEvaluate(n,o,p,_){return!!n.expression.evaluate(o,null,{},p,_)}interpolate(){return!1}}class Fr{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in n){const p=n[o];p.specification.overridable&&this.overridableProperties.push(o);const _=this.defaultPropertyValues[o]=new ru(p,void 0,void 0),x=this.defaultTransitionablePropertyValues[o]=new Id(p,void 0);this.defaultTransitioningPropertyValues[o]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=_.possiblyEvaluate({})}}}Yt("DataDrivenProperty",on),Yt("DataConstantProperty",en),Yt("CrossFadedDataDrivenProperty",Cs),Yt("CrossFadedProperty",Nh),Yt("ColorRampProperty",Pd);class wr extends ti{constructor(n,o,p){if(super(),this.id=n.id,this.type=n.type,this._globalState=p,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(_,x){return new Rh(_,x)})(this.visibility,p),n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter,this._featureFilter=Wt(n.filter,p)),o.layout&&(this._unevaluatedLayout=new xp(o.layout,p)),o.paint)){this._transitionablePaint=new Sf(o.paint,p);for(const _ in n.paint)this.setPaintProperty(_,n.paint[_],{validate:!1});for(const _ in n.layout)this.setLayoutProperty(_,n.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ju(o.paint)}}setFilter(n){this.filter=n,this._featureFilter=Wt(n,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}getLayoutAffectingGlobalStateRefs(){const n=new Set;for(const o of this._visibilityExpression.getGlobalStateRefs())n.add(o);if(this._unevaluatedLayout)for(const o in this._unevaluatedLayout._values){const p=this._unevaluatedLayout._values[o];for(const _ of p.getGlobalStateRefs())n.add(_)}for(const o of this._featureFilter.getGlobalStateRefs())n.add(o);return n}getPaintAffectingGlobalStateRefs(){var n;const o=new globalThis.Map;if(this._transitionablePaint)for(const p in this._transitionablePaint._values){const _=this._transitionablePaint._values[p].value;for(const x of _.getGlobalStateRefs()){const w=(n=o.get(x))!==null&&n!==void 0?n:[];w.push({name:p,value:_.value}),o.set(x,w)}}return o}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(n,o,p={}){if(o==null||!this._validate(Vm,`layers.${this.id}.layout.${n}`,n,o,p))return n==="visibility"?(this.visibility=o,this._visibilityExpression.setValue(o),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(n,o)}getPaintProperty(n){return n.endsWith(vc)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,o,p={}){if(o!=null&&this._validate(_f,`layers.${this.id}.paint.${n}`,n,o,p))return!1;if(n.endsWith(vc))return this._transitionablePaint.setTransition(n.slice(0,-11),o||void 0),!1;{const _=this._transitionablePaint._values[n],x=_.property.specification["property-type"]==="cross-faded-data-driven",w=_.value.isDataDriven(),C=_.value;this._transitionablePaint.setValue(n,o),this._handleSpecialPaintPropertyUpdate(n);const I=this._transitionablePaint._values[n].value;return I.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(n,C,I)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,o,p){return!1}isHidden(n=this.minzoom,o=!1){return!!(this.minzoom&&n<(o?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&n>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(n,o){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,o)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Wn(n,((o,p)=>!(o===void 0||p==="layout"&&!Object.keys(o).length||p==="paint"&&!Object.keys(o).length)))}_validate(n,o,p,_,x={}){return(!x||x.validate!==!1)&&nl(this,n.call(xa,{key:o,layerType:this.type,objectKey:p,value:_,styleSpec:Ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const o=this.paint.get(n);if(o instanceof rs&&Va(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}let Pr;var Dd={get paint(){return Pr=Pr||new Fr({"raster-opacity":new en(Ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new en(Ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new en(Ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new en(Ke.paint_raster["raster-brightness-max"]),"raster-saturation":new en(Ke.paint_raster["raster-saturation"]),"raster-contrast":new en(Ke.paint_raster["raster-contrast"]),"raster-resampling":new en(Ke.paint_raster["raster-resampling"]),"raster-fade-duration":new en(Ke.paint_raster["raster-fade-duration"])})}};class bc extends wr{constructor(n,o){super(n,Dd,o)}}const Gn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ii{constructor(n,o){this._structArray=n,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Vn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,o){return n._trim(),o&&(n.isTransferred=!0,o.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const o=Object.create(this.prototype);return o.arrayBuffer=n.arrayBuffer,o.length=n.length,o.capacity=n.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function gr(s,n=1){let o=0,p=0;return{members:s.map((_=>{const x=Gn[_.type].BYTES_PER_ELEMENT,w=o=Ms(o,Math.max(n,x)),C=_.components||1;return p=Math.max(p,x),o+=x*C,{name:_.name,type:_.type,components:C,offset:w}})),size:Ms(o,Math.max(p,n)),alignment:n}}function Ms(s,n){return Math.ceil(s/n)*n}class rl extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o){const p=this.length;return this.resize(p+1),this.emplace(p,n,o)}emplace(n,o,p){const _=2*n;return this.int16[_+0]=o,this.int16[_+1]=p,n}}rl.prototype.bytesPerElement=4,Yt("StructArrayLayout2i4",rl);class Bu extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,p){const _=this.length;return this.resize(_+1),this.emplace(_,n,o,p)}emplace(n,o,p,_){const x=3*n;return this.int16[x+0]=o,this.int16[x+1]=p,this.int16[x+2]=_,n}}Bu.prototype.bytesPerElement=6,Yt("StructArrayLayout3i6",Bu);class Fu extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,p,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,o,p,_)}emplace(n,o,p,_,x){const w=4*n;return this.int16[w+0]=o,this.int16[w+1]=p,this.int16[w+2]=_,this.int16[w+3]=x,n}}Fu.prototype.bytesPerElement=8,Yt("StructArrayLayout4i8",Fu);class xc extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,p,_,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,n,o,p,_,x,w)}emplace(n,o,p,_,x,w,C){const I=6*n;return this.int16[I+0]=o,this.int16[I+1]=p,this.int16[I+2]=_,this.int16[I+3]=x,this.int16[I+4]=w,this.int16[I+5]=C,n}}xc.prototype.bytesPerElement=12,Yt("StructArrayLayout2i4i12",xc);class wp extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,p,_,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,n,o,p,_,x,w)}emplace(n,o,p,_,x,w,C){const I=4*n,O=8*n;return this.int16[I+0]=o,this.int16[I+1]=p,this.uint8[O+4]=_,this.uint8[O+5]=x,this.uint8[O+6]=w,this.uint8[O+7]=C,n}}wp.prototype.bytesPerElement=8,Yt("StructArrayLayout2i4ub8",wp);class or extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o){const p=this.length;return this.resize(p+1),this.emplace(p,n,o)}emplace(n,o,p){const _=2*n;return this.float32[_+0]=o,this.float32[_+1]=p,n}}or.prototype.bytesPerElement=8,Yt("StructArrayLayout2f8",or);class al extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,p,_,x,w,C,I,O,j){const V=this.length;return this.resize(V+1),this.emplace(V,n,o,p,_,x,w,C,I,O,j)}emplace(n,o,p,_,x,w,C,I,O,j,V){const G=10*n;return this.uint16[G+0]=o,this.uint16[G+1]=p,this.uint16[G+2]=_,this.uint16[G+3]=x,this.uint16[G+4]=w,this.uint16[G+5]=C,this.uint16[G+6]=I,this.uint16[G+7]=O,this.uint16[G+8]=j,this.uint16[G+9]=V,n}}al.prototype.bytesPerElement=20,Yt("StructArrayLayout10ui20",al);class $h extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,p,_,x,w,C,I){const O=this.length;return this.resize(O+1),this.emplace(O,n,o,p,_,x,w,C,I)}emplace(n,o,p,_,x,w,C,I,O){const j=8*n;return this.uint16[j+0]=o,this.uint16[j+1]=p,this.uint16[j+2]=_,this.uint16[j+3]=x,this.uint16[j+4]=w,this.uint16[j+5]=C,this.uint16[j+6]=I,this.uint16[j+7]=O,n}}$h.prototype.bytesPerElement=16,Yt("StructArrayLayout8ui16",$h);class jh extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,p,_,x,w,C,I,O,j,V,G){const H=this.length;return this.resize(H+1),this.emplace(H,n,o,p,_,x,w,C,I,O,j,V,G)}emplace(n,o,p,_,x,w,C,I,O,j,V,G,H){const te=12*n;return this.int16[te+0]=o,this.int16[te+1]=p,this.int16[te+2]=_,this.int16[te+3]=x,this.uint16[te+4]=w,this.uint16[te+5]=C,this.uint16[te+6]=I,this.uint16[te+7]=O,this.int16[te+8]=j,this.int16[te+9]=V,this.int16[te+10]=G,this.int16[te+11]=H,n}}jh.prototype.bytesPerElement=24,Yt("StructArrayLayout4i4ui4i24",jh);class Ld extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,p){const _=this.length;return this.resize(_+1),this.emplace(_,n,o,p)}emplace(n,o,p,_){const x=3*n;return this.float32[x+0]=o,this.float32[x+1]=p,this.float32[x+2]=_,n}}Ld.prototype.bytesPerElement=12,Yt("StructArrayLayout3f12",Ld);class Rd extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint32[1*n+0]=o,n}}Rd.prototype.bytesPerElement=4,Yt("StructArrayLayout1ul4",Rd);class Od extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,p,_,x,w,C,I,O){const j=this.length;return this.resize(j+1),this.emplace(j,n,o,p,_,x,w,C,I,O)}emplace(n,o,p,_,x,w,C,I,O,j){const V=10*n,G=5*n;return this.int16[V+0]=o,this.int16[V+1]=p,this.int16[V+2]=_,this.int16[V+3]=x,this.int16[V+4]=w,this.int16[V+5]=C,this.uint32[G+3]=I,this.uint16[V+8]=O,this.uint16[V+9]=j,n}}Od.prototype.bytesPerElement=20,Yt("StructArrayLayout6i1ul2ui20",Od);class au extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,p,_,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,n,o,p,_,x,w)}emplace(n,o,p,_,x,w,C){const I=6*n;return this.int16[I+0]=o,this.int16[I+1]=p,this.int16[I+2]=_,this.int16[I+3]=x,this.int16[I+4]=w,this.int16[I+5]=C,n}}au.prototype.bytesPerElement=12,Yt("StructArrayLayout2i2i2i12",au);class wc extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,p,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,o,p,_,x)}emplace(n,o,p,_,x,w){const C=4*n,I=8*n;return this.float32[C+0]=o,this.float32[C+1]=p,this.float32[C+2]=_,this.int16[I+6]=x,this.int16[I+7]=w,n}}wc.prototype.bytesPerElement=16,Yt("StructArrayLayout2f1f2i16",wc);class qa extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,p,_,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,n,o,p,_,x,w)}emplace(n,o,p,_,x,w,C){const I=16*n,O=4*n,j=8*n;return this.uint8[I+0]=o,this.uint8[I+1]=p,this.float32[O+1]=_,this.float32[O+2]=x,this.int16[j+6]=w,this.int16[j+7]=C,n}}qa.prototype.bytesPerElement=16,Yt("StructArrayLayout2ub2f2i16",qa);class yr extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,p){const _=this.length;return this.resize(_+1),this.emplace(_,n,o,p)}emplace(n,o,p,_){const x=3*n;return this.uint16[x+0]=o,this.uint16[x+1]=p,this.uint16[x+2]=_,n}}yr.prototype.bytesPerElement=6,Yt("StructArrayLayout3ui6",yr);class Ul extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,p,_,x,w,C,I,O,j,V,G,H,te,ne,re,ue){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,n,o,p,_,x,w,C,I,O,j,V,G,H,te,ne,re,ue)}emplace(n,o,p,_,x,w,C,I,O,j,V,G,H,te,ne,re,ue,Ce){const fe=24*n,ye=12*n,Ie=48*n;return this.int16[fe+0]=o,this.int16[fe+1]=p,this.uint16[fe+2]=_,this.uint16[fe+3]=x,this.uint32[ye+2]=w,this.uint32[ye+3]=C,this.uint32[ye+4]=I,this.uint16[fe+10]=O,this.uint16[fe+11]=j,this.uint16[fe+12]=V,this.float32[ye+7]=G,this.float32[ye+8]=H,this.uint8[Ie+36]=te,this.uint8[Ie+37]=ne,this.uint8[Ie+38]=re,this.uint32[ye+10]=ue,this.int16[fe+22]=Ce,n}}Ul.prototype.bytesPerElement=48,Yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ul);class Uu extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,p,_,x,w,C,I,O,j,V,G,H,te,ne,re,ue,Ce,fe,ye,Ie,Le,Qe,bt,ft,St,Vt,Et){const yt=this.length;return this.resize(yt+1),this.emplace(yt,n,o,p,_,x,w,C,I,O,j,V,G,H,te,ne,re,ue,Ce,fe,ye,Ie,Le,Qe,bt,ft,St,Vt,Et)}emplace(n,o,p,_,x,w,C,I,O,j,V,G,H,te,ne,re,ue,Ce,fe,ye,Ie,Le,Qe,bt,ft,St,Vt,Et,yt){const ct=32*n,tn=16*n;return this.int16[ct+0]=o,this.int16[ct+1]=p,this.int16[ct+2]=_,this.int16[ct+3]=x,this.int16[ct+4]=w,this.int16[ct+5]=C,this.int16[ct+6]=I,this.int16[ct+7]=O,this.uint16[ct+8]=j,this.uint16[ct+9]=V,this.uint16[ct+10]=G,this.uint16[ct+11]=H,this.uint16[ct+12]=te,this.uint16[ct+13]=ne,this.uint16[ct+14]=re,this.uint16[ct+15]=ue,this.uint16[ct+16]=Ce,this.uint16[ct+17]=fe,this.uint16[ct+18]=ye,this.uint16[ct+19]=Ie,this.uint16[ct+20]=Le,this.uint16[ct+21]=Qe,this.uint16[ct+22]=bt,this.uint32[tn+12]=ft,this.float32[tn+13]=St,this.float32[tn+14]=Vt,this.uint16[ct+30]=Et,this.uint16[ct+31]=yt,n}}Uu.prototype.bytesPerElement=64,Yt("StructArrayLayout8i15ui1ul2f2ui64",Uu);class Vu extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.float32[1*n+0]=o,n}}Vu.prototype.bytesPerElement=4,Yt("StructArrayLayout1f4",Vu);class Bh extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,p){const _=this.length;return this.resize(_+1),this.emplace(_,n,o,p)}emplace(n,o,p,_){const x=3*n;return this.uint16[6*n+0]=o,this.float32[x+1]=p,this.float32[x+2]=_,n}}Bh.prototype.bytesPerElement=12,Yt("StructArrayLayout1ui2f12",Bh);class ol extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,p){const _=this.length;return this.resize(_+1),this.emplace(_,n,o,p)}emplace(n,o,p,_){const x=4*n;return this.uint32[2*n+0]=o,this.uint16[x+2]=p,this.uint16[x+3]=_,n}}ol.prototype.bytesPerElement=8,Yt("StructArrayLayout1ul2ui8",ol);class S extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o){const p=this.length;return this.resize(p+1),this.emplace(p,n,o)}emplace(n,o,p){const _=2*n;return this.uint16[_+0]=o,this.uint16[_+1]=p,n}}S.prototype.bytesPerElement=4,Yt("StructArrayLayout2ui4",S);class i extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint16[1*n+0]=o,n}}i.prototype.bytesPerElement=2,Yt("StructArrayLayout1ui2",i);class h extends Vn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,p,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,o,p,_)}emplace(n,o,p,_,x){const w=4*n;return this.float32[w+0]=o,this.float32[w+1]=p,this.float32[w+2]=_,this.float32[w+3]=x,n}}h.prototype.bytesPerElement=16,Yt("StructArrayLayout4f16",h);class y extends Ii{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new z(this.anchorPointX,this.anchorPointY)}}y.prototype.size=20;class b extends Od{get(n){return new y(this,n)}}Yt("CollisionBoxArray",b);class A extends Ii{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}A.prototype.size=48;class M extends Ul{get(n){return new A(this,n)}}Yt("PlacedSymbolArray",M);class D extends Ii{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}D.prototype.size=64;class N extends Uu{get(n){return new D(this,n)}}Yt("SymbolInstanceArray",N);class F extends Vu{getoffsetX(n){return this.float32[1*n+0]}}Yt("GlyphOffsetArray",F);class q extends Bu{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Yt("SymbolLineVertexArray",q);class Y extends Ii{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Y.prototype.size=12;class W extends Bh{get(n){return new Y(this,n)}}Yt("TextAnchorOffsetArray",W);class ie extends Ii{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ie.prototype.size=8;class le extends ol{get(n){return new ie(this,n)}}Yt("FeatureIndexArray",le);class _e extends rl{}class be extends rl{}class ve extends rl{}class Ee extends xc{}class Pe extends wp{}class Te extends or{}class ke extends al{}class Ne extends $h{}class ze extends jh{}class Ve extends Ld{}class st extends Rd{}class Je extends au{}class rt extends qa{}class at extends yr{}class Dt extends S{}const Ot=gr([{name:"a_pos",components:2,type:"Int16"}],4),{members:wt}=Ot;class Ut{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,o,p,_){const x=this.segments[this.segments.length-1];return n>Ut.MAX_VERTEX_ARRAY_LENGTH&&bi(`Max vertices per segment is ${Ut.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Ut.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+n>Ut.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==_?this.createNewSegment(o,p,_):x}createNewSegment(n,o,p){const _={vertexOffset:n.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0,vaos:{}};return p!==void 0&&(_.sortKey=p),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(_),_}getOrCreateLatestSegment(n,o,p){return this.prepareSegment(0,n,o,p)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const n of this.segments)for(const o in n.vaos)n.vaos[o].destroy()}static simpleSegment(n,o,p,_){return new Ut([{vertexOffset:n,primitiveOffset:o,vertexLength:p,primitiveLength:_,vaos:{},sortKey:0}])}}function On(s,n){return 256*(s=Ft(Math.floor(s),0,255))+Ft(Math.floor(n),0,255)}Ut.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Yt("SegmentVector",Ut);const ki=gr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ki=gr([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Zi,sr,$i,Sr={exports:{}},lr={exports:{}},Aa={exports:{}},Dr=(function(){if($i)return Sr.exports;$i=1;var s=(Zi||(Zi=1,lr.exports=function(o,p){var _,x,w,C,I,O,j,V;for(x=o.length-(_=3&o.length),w=p,I=3432918353,O=461845907,V=0;V<x;)j=255&o.charCodeAt(V)|(255&o.charCodeAt(++V))<<8|(255&o.charCodeAt(++V))<<16|(255&o.charCodeAt(++V))<<24,++V,w=27492+(65535&(C=5*(65535&(w=(w^=j=(65535&(j=(j=(65535&j)*I+(((j>>>16)*I&65535)<<16)&4294967295)<<15|j>>>17))*O+(((j>>>16)*O&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(j=0,_){case 3:j^=(255&o.charCodeAt(V+2))<<16;case 2:j^=(255&o.charCodeAt(V+1))<<8;case 1:w^=j=(65535&(j=(j=(65535&(j^=255&o.charCodeAt(V)))*I+(((j>>>16)*I&65535)<<16)&4294967295)<<15|j>>>17))*O+(((j>>>16)*O&65535)<<16)&4294967295}return w^=o.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),lr.exports),n=(sr||(sr=1,Aa.exports=function(o,p){for(var _,x=o.length,w=p^x,C=0;x>=4;)_=1540483477*(65535&(_=255&o.charCodeAt(C)|(255&o.charCodeAt(++C))<<8|(255&o.charCodeAt(++C))<<16|(255&o.charCodeAt(++C))<<24))+((1540483477*(_>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),x-=4,++C;switch(x){case 3:w^=(255&o.charCodeAt(C+2))<<16;case 2:w^=(255&o.charCodeAt(C+1))<<8;case 1:w=1540483477*(65535&(w^=255&o.charCodeAt(C)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),Aa.exports);return Sr.exports=s,Sr.exports.murmur3=s,Sr.exports.murmur2=n,Sr.exports})(),Lr=k(Dr);class Ca{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,o,p,_){this.ids.push(Vl(n)),this.positions.push(o,p,_)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=Vl(n);let p=0,_=this.ids.length-1;for(;p<_;){const w=p+_>>1;this.ids[w]>=o?_=w:p=w+1}const x=[];for(;this.ids[p]===o;)x.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return x}static serialize(n,o){const p=new Float64Array(n.ids),_=new Uint32Array(n.positions);return Zl(p,_,0,p.length-1),o&&o.push(p.buffer,_.buffer),{ids:p,positions:_}}static deserialize(n){const o=new Ca;return o.ids=n.ids,o.positions=n.positions,o.indexed=!0,o}}function Vl(s){const n=+s;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Lr(String(s))}function Zl(s,n,o,p){for(;o<p;){const _=s[o+p>>1];let x=o-1,w=p+1;for(;;){do x++;while(s[x]<_);do w--;while(s[w]>_);if(x>=w)break;sl(s,x,w),sl(n,3*x,3*w),sl(n,3*x+1,3*w+1),sl(n,3*x+2,3*w+2)}w-o<p-w?(Zl(s,n,o,w),o=w+1):(Zl(s,n,w+1,p),p=w)}}function sl(s,n,o){const p=s[n];s[n]=s[o],s[o]=p}Yt("FeaturePositionMap",Ca);class Ro{constructor(n,o){this.gl=n.gl,this.location=o}}class Zu extends Ro{constructor(n,o){super(n,o),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Fh extends Ro{constructor(n,o){super(n,o),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class ll extends Ro{constructor(n,o){super(n,o),this.current=Ln.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Oo=new Float32Array(16);function as(s){return[On(255*s.r,255*s.g),On(255*s.b,255*s.a)]}class zs{constructor(n,o,p){this.value=n,this.uniformNames=o.map((_=>`u_${_}`)),this.type=p}setUniform(n,o,p){n.set(p.constantOr(this.value))}getBinding(n,o,p){return this.type==="color"?new ll(n,o):new Zu(n,o)}}class Is{constructor(n,o){this.uniformNames=o.map((p=>`u_${p}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=n.tlbr}setConstantDashPositions(n,o){this.dashTo=[0,n.y,n.height,n.width],this.dashFrom=[0,o.y,o.height,o.width]}setUniform(n,o,p,_){let x=null;_==="u_pattern_to"?x=this.patternTo:_==="u_pattern_from"?x=this.patternFrom:_==="u_dasharray_to"?x=this.dashTo:_==="u_dasharray_from"?x=this.dashFrom:_==="u_pixel_ratio_to"?x=this.pixelRatioTo:_==="u_pixel_ratio_from"&&(x=this.pixelRatioFrom),x!==null&&n.set(x)}getBinding(n,o,p){return p.substr(0,9)==="u_pattern"||p.substr(0,12)==="u_dasharray_"?new Fh(n,o):new Zu(n,o)}}class Oi{constructor(n,o,p,_){this.expression=n,this.type=p,this.maxValue=0,this.paintVertexAttributes=o.map((x=>({name:`a_${x}`,type:"Float32",components:p==="color"?2:1,offset:0}))),this.paintVertexArray=new _}populatePaintArray(n,o,p){const _=this.paintVertexArray.length,x=this.expression.evaluate(new Ri(0,p),o,{},p.canonical,[],p.formattedSection);this.paintVertexArray.resize(n),this._setPaintValue(_,n,x)}updatePaintArray(n,o,p,_,x){const w=this.expression.evaluate(new Ri(0,x),p,_);this._setPaintValue(n,o,w)}_setPaintValue(n,o,p){if(this.type==="color"){const _=as(p);for(let x=n;x<o;x++)this.paintVertexArray.emplace(x,_[0],_[1])}else{for(let _=n;_<o;_++)this.paintVertexArray.emplace(_,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class qi{constructor(n,o,p,_,x,w){this.expression=n,this.uniformNames=o.map((C=>`u_${C}_t`)),this.type=p,this.useIntegerZoom=_,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=o.map((C=>({name:`a_${C}`,type:"Float32",components:p==="color"?4:2,offset:0}))),this.paintVertexArray=new w}populatePaintArray(n,o,p){const _=this.expression.evaluate(new Ri(this.zoom,p),o,{},p.canonical,[],p.formattedSection),x=this.expression.evaluate(new Ri(this.zoom+1,p),o,{},p.canonical,[],p.formattedSection),w=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(w,n,_,x)}updatePaintArray(n,o,p,_,x){const w=this.expression.evaluate(new Ri(this.zoom,x),p,_),C=this.expression.evaluate(new Ri(this.zoom+1,x),p,_);this._setPaintValue(n,o,w,C)}_setPaintValue(n,o,p,_){if(this.type==="color"){const x=as(p),w=as(_);for(let C=n;C<o;C++)this.paintVertexArray.emplace(C,x[0],x[1],w[0],w[1])}else{for(let x=n;x<o;x++)this.paintVertexArray.emplace(x,p,_);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(_))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,o){const p=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,_=Ft(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);n.set(_)}getBinding(n,o,p){return new Zu(n,o)}}class Yr{constructor(n,o,p,_,x,w){this.expression=n,this.type=o,this.useIntegerZoom=p,this.zoom=_,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(n,o,p){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(_,n,this.getPositionIds(o),p)}updatePaintArray(n,o,p,_,x){this._setPaintValues(n,o,this.getPositionIds(p),x)}_setPaintValues(n,o,p,_){const x=this.getPositions(_);if(!x||!p)return;const w=x[p.min],C=x[p.mid],I=x[p.max];if(w&&C&&I)for(let O=n;O<o;O++)this.emplace(this.zoomInPaintVertexArray,O,C,w),this.emplace(this.zoomOutPaintVertexArray,O,C,I)}upload(n){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const o=this.getVertexAttributes();this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,o,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,o,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ra extends Yr{getPositions(n){return n.imagePositions}getPositionIds(n){return n.patterns&&n.patterns[this.layerId]}getVertexAttributes(){return ki.members}emplace(n,o,p,_){n.emplace(o,p.tlbr[0],p.tlbr[1],p.tlbr[2],p.tlbr[3],_.tlbr[0],_.tlbr[1],_.tlbr[2],_.tlbr[3],p.pixelRatio,_.pixelRatio)}}class Tf extends Yr{getPositions(n){return n.dashPositions}getPositionIds(n){return n.dashes&&n.dashes[this.layerId]}getVertexAttributes(){return Ki.members}emplace(n,o,p,_){n.emplace(o,0,p.y,p.height,p.width,0,_.y,_.height,_.width)}}class Ef{constructor(n,o,p){this.binders={},this._buffers=[];const _=[];for(const x in n.paint._values){if(!p(x))continue;const w=n.paint.get(x);if(!(w instanceof rs&&Va(w.property.specification)))continue;const C=Zm(x,n.type),I=w.value,O=w.property.specification.type,j=w.property.useIntegerZoom,V=w.property.specification["property-type"],G=V==="cross-faded"||V==="cross-faded-data-driven";if(I.kind==="constant")this.binders[x]=G?new Is(I.value,C):new zs(I.value,C,O),_.push(`/u_${x}`);else if(I.kind==="source"||G){const H=su(x,O,"source");this.binders[x]=G?x==="line-dasharray"?new Tf(I,O,j,o,H,n.id):new ra(I,O,j,o,H,n.id):new Oi(I,C,O,H),_.push(`/a_${x}`)}else{const H=su(x,O,"composite");this.binders[x]=new qi(I,C,O,j,o,H),_.push(`/z_${x}`)}}this.cacheKey=_.sort().join("")}getMaxValue(n){const o=this.binders[n];return o instanceof Oi||o instanceof qi?o.maxValue:0}populatePaintArrays(n,o,p){for(const _ in this.binders){const x=this.binders[_];(x instanceof Oi||x instanceof qi||x instanceof Yr)&&x.populatePaintArray(n,o,p)}}setConstantPatternPositions(n,o){for(const p in this.binders){const _=this.binders[p];_ instanceof Is&&_.setConstantPatternPositions(n,o)}}setConstantDashPositions(n,o){for(const p in this.binders){const _=this.binders[p];_ instanceof Is&&_.setConstantDashPositions(n,o)}}updatePaintArrays(n,o,p,_,x){let w=!1;for(const C in n){const I=o.getPositions(C);for(const O of I){const j=p.feature(O.index);for(const V in this.binders){const G=this.binders[V];if((G instanceof Oi||G instanceof qi||G instanceof Yr)&&G.expression.isStateDependent===!0){const H=_.paint.get(V);G.expression=H.value,G.updatePaintArray(O.start,O.end,j,n[C],x),w=!0}}}}return w}defines(){const n=[];for(const o in this.binders){const p=this.binders[o];(p instanceof zs||p instanceof Is)&&n.push(...p.uniformNames.map((_=>`#define HAS_UNIFORM_${_}`)))}return n}getBinderAttributes(){const n=[];for(const o in this.binders){const p=this.binders[o];if(p instanceof Oi||p instanceof qi)for(let _=0;_<p.paintVertexAttributes.length;_++)n.push(p.paintVertexAttributes[_].name);else if(p instanceof Yr){const _=p.getVertexAttributes();for(const x of _)n.push(x.name)}}return n}getBinderUniforms(){const n=[];for(const o in this.binders){const p=this.binders[o];if(p instanceof zs||p instanceof Is||p instanceof qi)for(const _ of p.uniformNames)n.push(_)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,o){const p=[];for(const _ in this.binders){const x=this.binders[_];if(x instanceof zs||x instanceof Is||x instanceof qi){for(const w of x.uniformNames)if(o[w]){const C=x.getBinding(n,o[w],w);p.push({name:w,property:_,binding:C})}}}return p}setUniforms(n,o,p,_){for(const{name:x,property:w,binding:C}of o)this.binders[w].setUniform(C,_,p.get(w),x)}updatePaintBuffers(n){this._buffers=[];for(const o in this.binders){const p=this.binders[o];if(n&&p instanceof Yr){const _=n.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(p instanceof Oi||p instanceof qi)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(n){for(const o in this.binders){const p=this.binders[o];(p instanceof Oi||p instanceof qi||p instanceof Yr)&&p.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const o=this.binders[n];(o instanceof Oi||o instanceof qi||o instanceof Yr)&&o.destroy()}}}class ou{constructor(n,o,p=()=>!0){this.programConfigurations={};for(const _ of n)this.programConfigurations[_.id]=new Ef(_,o,p);this.needsUpload=!1,this._featureMap=new Ca,this._bufferOffset=0}populatePaintArrays(n,o,p,_){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(n,o,_);o.id!==void 0&&this._featureMap.add(o.id,p,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,o,p,_){for(const x of p)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(n,this._featureMap,o,x,_)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Zm(s,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}function su(s,n,o){const p={color:{source:or,composite:h},number:{source:Vu,composite:or}},_=(function(x){return{"line-pattern":{source:ke,composite:ke},"fill-pattern":{source:ke,composite:ke},"fill-extrusion-pattern":{source:ke,composite:ke},"line-dasharray":{source:Ne,composite:Ne}}[x]})(s);return _&&_[o]||p[n][o]}Yt("ConstantBinder",zs),Yt("CrossFadedConstantBinder",Is),Yt("SourceExpressionBinder",Oi),Yt("CrossFadedPatternBinder",ra),Yt("CrossFadedDasharrayBinder",Tf),Yt("CompositeExpressionBinder",qi),Yt("ProgramConfiguration",Ef,{omit:["_buffers"]}),Yt("ProgramConfigurationSet",ou);const Af=Math.pow(2,14)-1,Sc=-Af-1;function Tc(s){const n=Bt/s.extent,o=s.loadGeometry();for(let p=0;p<o.length;p++){const _=o[p];for(let x=0;x<_.length;x++){const w=_[x],C=Math.round(w.x*n),I=Math.round(w.y*n);w.x=Ft(C,Sc,Af),w.y=Ft(I,Sc,Af),(C<w.x||C>w.x+1||I<w.y||I>w.y+1)&&bi("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function cl(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?Tc(s):[]}}const Cf=-32768;function Nd(s,n,o,p,_){s.emplaceBack(Cf+8*n+p,Cf+8*o+_)}class $d{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.hasDependencies=!1,this.layoutVertexArray=new be,this.indexArray=new at,this.segments=new Ut,this.programConfigurations=new ou(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(n,o,p){const _=this.layers[0],x=[];let w=null,C=!1,I=_.type==="heatmap";if(_.type==="circle"){const j=_;w=j.layout.get("circle-sort-key"),C=!w.isConstant(),I=I||j.paint.get("circle-pitch-alignment")==="map"}const O=I?o.subdivisionGranularity.circle:1;for(const{feature:j,id:V,index:G,sourceLayerIndex:H}of n){const te=this.layers[0]._featureFilter.needGeometry,ne=cl(j,te);if(!this.layers[0]._featureFilter.filter(new Ri(this.zoom),ne,p))continue;const re=C?w.evaluate(ne,{},p):void 0,ue={id:V,properties:j.properties,type:j.type,sourceLayerIndex:H,index:G,geometry:te?ne.geometry:Tc(j),patterns:{},sortKey:re};x.push(ue)}C&&x.sort(((j,V)=>j.sortKey-V.sortKey));for(const j of x){const{geometry:V,index:G,sourceLayerIndex:H}=j,te=n[G].feature;this.addFeature(j,V,G,p,O),o.featureIndex.insert(te,V,G,H,this.index)}}update(n,o,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:p})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,wt),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,o,p,_,x=1){let w;switch(x){case 1:w=[0,7];break;case 3:w=[0,2,5,7];break;case 5:w=[0,1,3,4,6,7];break;case 7:w=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const C=w.length;for(const I of o)for(const O of I){const j=O.x,V=O.y;if(j<0||j>=Bt||V<0||V>=Bt)continue;const G=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,n.sortKey),H=G.vertexLength;for(let te=0;te<C;te++)for(let ne=0;ne<C;ne++)Nd(this.layoutVertexArray,j,V,w[ne],w[te]);for(let te=0;te<C-1;te++)for(let ne=0;ne<C-1;ne++){const re=H+te*C+ne,ue=H+(te+1)*C+ne;this.indexArray.emplaceBack(re,ue+1,re+1),this.indexArray.emplaceBack(re,ue,ue+1)}G.vertexLength+=C*C,G.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,{imagePositions:{},canonical:_})}}function jd(s,n){for(let o=0;o<s.length;o++)if(lu(n,s[o]))return!0;for(let o=0;o<n.length;o++)if(lu(s,n[o]))return!0;return!!Ga(s,n)}function qm(s,n,o){return!!lu(s,n)||!!Hm(n,s,o)}function Gm(s,n){if(s.length===1)return Py(n,s[0]);for(let o=0;o<n.length;o++){const p=n[o];for(let _=0;_<p.length;_++)if(lu(s,p[_]))return!0}for(let o=0;o<s.length;o++)if(Py(n,s[o]))return!0;for(let o=0;o<n.length;o++)if(Ga(s,n[o]))return!0;return!1}function Ma(s,n,o){if(s.length>1){if(Ga(s,n))return!0;for(let p=0;p<n.length;p++)if(Hm(n[p],s,o))return!0}for(let p=0;p<s.length;p++)if(Hm(s[p],n,o))return!0;return!1}function Ga(s,n){if(s.length===0||n.length===0)return!1;for(let o=0;o<s.length-1;o++){const p=s[o],_=s[o+1];for(let x=0;x<n.length-1;x++)if(Yv(p,_,n[x],n[x+1]))return!0}return!1}function Yv(s,n,o,p){return qr(s,o,p)!==qr(n,o,p)&&qr(s,n,o)!==qr(s,n,p)}function Hm(s,n,o){const p=o*o;if(n.length===1)return s.distSqr(n[0])<p;for(let _=1;_<n.length;_++)if(ky(s,n[_-1],n[_])<p)return!0;return!1}function ky(s,n,o){const p=n.distSqr(o);if(p===0)return s.distSqr(n);const _=((s.x-n.x)*(o.x-n.x)+(s.y-n.y)*(o.y-n.y))/p;return s.distSqr(_<0?n:_>1?o:o.sub(n)._mult(_)._add(n))}function Py(s,n){let o,p,_,x=!1;for(let w=0;w<s.length;w++){o=s[w];for(let C=0,I=o.length-1;C<o.length;I=C++)p=o[C],_=o[I],p.y>n.y!=_.y>n.y&&n.x<(_.x-p.x)*(n.y-p.y)/(_.y-p.y)+p.x&&(x=!x)}return x}function lu(s,n){let o=!1;for(let p=0,_=s.length-1;p<s.length;_=p++){const x=s[p],w=s[_];x.y>n.y!=w.y>n.y&&n.x<(w.x-x.x)*(n.y-x.y)/(w.y-x.y)+x.x&&(o=!o)}return o}function Kv(s,n,o){const p=o[0],_=o[2];if(s.x<p.x&&n.x<p.x||s.x>_.x&&n.x>_.x||s.y<p.y&&n.y<p.y||s.y>_.y&&n.y>_.y)return!1;const x=qr(s,n,o[0]);return x!==qr(s,n,o[1])||x!==qr(s,n,o[2])||x!==qr(s,n,o[3])}function qu(s,n,o){const p=n.paint.get(s).value;return p.kind==="constant"?p.value:o.programConfigurations.get(n.id).getMaxValue(s)}function Sp(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Wm(s,n,o,p,_){if(!n[0]&&!n[1])return s;const x=z.convert(n)._mult(_);o==="viewport"&&x._rotate(-p);const w=[];for(let C=0;C<s.length;C++)w.push(s[C].sub(x));return w}function Xm(s){const n=[];for(let o=0;o<s.length;o++){const p=s[o],_=n.at(-1);(o===0||_&&!p.equals(_))&&n.push(p)}return n}function Dy({queryGeometry:s,size:n},o){return qm(s,o,n)}function Jv({queryGeometry:s,size:n,transform:o,unwrappedTileID:p,getElevation:_},x){return qm(s,x,n*(o.projectTileCoordinates(x.x,x.y,p,_).signedDistanceFromCamera/o.cameraToCenterDistance))}function Qv({queryGeometry:s,size:n,transform:o,unwrappedTileID:p,getElevation:_},x){const w=o.projectTileCoordinates(x.x,x.y,p,_).signedDistanceFromCamera,C=n*(o.cameraToCenterDistance/w);return qm(s,Tp(x,o,p,_),C)}function e0({queryGeometry:s,size:n,transform:o,unwrappedTileID:p,getElevation:_},x){return qm(s,Tp(x,o,p,_),n)}function Ym({queryGeometry:s,size:n,transform:o,unwrappedTileID:p,getElevation:_,pitchAlignment:x="map",pitchScale:w="map"},C){const I=x==="map"?w==="map"?Dy:Jv:w==="map"?Qv:e0,O={queryGeometry:s,size:n,transform:o,unwrappedTileID:p,getElevation:_};for(const j of C)for(const V of j)if(I(O,V))return!0;return!1}function Tp(s,n,o,p){const _=n.projectTileCoordinates(s.x,s.y,o,p).point;return new z((.5*_.x+.5)*n.width,(.5*-_.y+.5)*n.height)}let Km,Ly;Yt("CircleBucket",$d,{omit:["layers"]});var Ry={get paint(){return Ly=Ly||new Fr({"circle-radius":new on(Ke.paint_circle["circle-radius"]),"circle-color":new on(Ke.paint_circle["circle-color"]),"circle-blur":new on(Ke.paint_circle["circle-blur"]),"circle-opacity":new on(Ke.paint_circle["circle-opacity"]),"circle-translate":new en(Ke.paint_circle["circle-translate"]),"circle-translate-anchor":new en(Ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new en(Ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new en(Ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new on(Ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new on(Ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new on(Ke.paint_circle["circle-stroke-opacity"])})},get layout(){return Km=Km||new Fr({"circle-sort-key":new on(Ke.layout_circle["circle-sort-key"])})}};class Jm extends wr{constructor(n,o){super(n,Ry,o)}createBucket(n){return new $d(n)}queryRadius(n){const o=n;return qu("circle-radius",this,o)+qu("circle-stroke-width",this,o)+Sp(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:p,geometry:_,transform:x,pixelsToTileUnits:w,unwrappedTileID:C,getElevation:I}){const O=Wm(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,w),j=this.paint.get("circle-radius").evaluate(o,p)+this.paint.get("circle-stroke-width").evaluate(o,p),V=this.paint.get("circle-pitch-scale"),G=this.paint.get("circle-pitch-alignment");let H,te;return G==="map"?(H=O,te=j*w):(H=(function(ne,re,ue,Ce){return ne.map((fe=>Tp(fe,re,ue,Ce)))})(O,x,C,I),te=j),Ym({queryGeometry:H,size:te,transform:x,unwrappedTileID:C,getElevation:I,pitchAlignment:G,pitchScale:V},_)}}class Qm extends $d{}let Oy;Yt("HeatmapBucket",Qm,{omit:["layers"]});var Ny={get paint(){return Oy=Oy||new Fr({"heatmap-radius":new on(Ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new on(Ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new en(Ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pd(Ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new en(Ke.paint_heatmap["heatmap-opacity"])})}};function eg(s,{width:n,height:o},p,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==n*o*p)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${n*o*p}`)}else _=new Uint8Array(n*o*p);return s.width=n,s.height=o,s.data=_,s}function cu(s,{width:n,height:o},p){if(n===s.width&&o===s.height)return;const _=eg({},{width:n,height:o},p);Ep(s,_,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,n),height:Math.min(s.height,o)},p),s.width=n,s.height=o,s.data=_.data}function Ep(s,n,o,p,_,x){if(_.width===0||_.height===0)return n;if(_.width>s.width||_.height>s.height||o.x>s.width-_.width||o.y>s.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>n.width||_.height>n.height||p.x>n.width-_.width||p.y>n.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const w=s.data,C=n.data;if(w===C)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<_.height;I++){const O=((o.y+I)*s.width+o.x)*x,j=((p.y+I)*n.width+p.x)*x;for(let V=0;V<_.width*x;V++)C[j+V]=w[O+V]}return n}class Ap{constructor(n,o){eg(this,n,1,o)}resize(n){cu(this,n,1)}clone(){return new Ap({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,p,_,x){Ep(n,o,p,_,x,1)}}class No{constructor(n,o){eg(this,n,4,o)}resize(n){cu(this,n,4)}replace(n,o){o?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new No({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,p,_,x){Ep(n,o,p,_,x,4)}setPixel(n,o,p){const _=4*(n*this.width+o);this.data[_+0]=Math.round(255*p.r/p.a),this.data[_+1]=Math.round(255*p.g/p.a),this.data[_+2]=Math.round(255*p.b/p.a),this.data[_+3]=Math.round(255*p.a)}}function uu(s){const n={},o=s.resolution||256,p=s.clips?s.clips.length:1,_=s.image||new No({width:o,height:p});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const x=(w,C,I)=>{n[s.evaluationKey]=I;const O=s.expression.evaluate(n);_.setPixel(w/4/o,C/4,O)};if(s.clips)for(let w=0,C=0;w<p;++w,C+=4*o)for(let I=0,O=0;I<o;I++,O+=4){const j=I/(o-1),{start:V,end:G}=s.clips[w];x(C,O,V*(1-j)+G*j)}else for(let w=0,C=0;w<o;w++,C+=4)x(0,C,w/(o-1));return _}Yt("AlphaImage",Ap),Yt("RGBAImage",No);const Cp="big-fb";class t0 extends wr{createBucket(n){return new Qm(n)}constructor(n,o){super(n,Ny,o),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=uu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Cp)&&this.heatmapFbos.delete(Cp)}queryRadius(n){return qu("heatmap-radius",this,n)}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:p,geometry:_,transform:x,pixelsToTileUnits:w,unwrappedTileID:C,getElevation:I}){return Ym({queryGeometry:n,size:this.paint.get("heatmap-radius").evaluate(o,p)*w,transform:x,unwrappedTileID:C,getElevation:I},_)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let Mp;var zp={get paint(){return Mp=Mp||new Fr({"hillshade-illumination-direction":new en(Ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new en(Ke.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new en(Ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new en(Ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new en(Ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new en(Ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new en(Ke.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new en(Ke.paint_hillshade["hillshade-method"])})}};class Rr extends wr{constructor(n,o){super(n,zp,o),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,o=this.paint.get("hillshade-illumination-altitude").values,p=this.paint.get("hillshade-highlight-color").values,_=this.paint.get("hillshade-shadow-color").values;const x=Math.max(n.length,o.length,p.length,_.length);n=n.concat(Array(x-n.length).fill(n.at(-1))),o=o.concat(Array(x-o.length).fill(o.at(-1))),p=p.concat(Array(x-p.length).fill(p.at(-1))),_=_.concat(Array(x-_.length).fill(_.at(-1)));const w=o.map(na);return{directionRadians:n.map(na),altitudeRadians:w,shadowColor:_,highlightColor:p}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let n0;var z1={get paint(){return n0=n0||new Fr({"color-relief-opacity":new en(Ke["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Pd(Ke["paint_color-relief"]["color-relief-color"])})}};class tg{constructor(n,o,p,_){this.context=n,this.format=p,this.texture=n.gl.createTexture(),this.update(o,_)}update(n,o,p){const{width:_,height:x}=n,w=!(this.size&&this.size[0]===_&&this.size[1]===x||p),{context:C}=this,{gl:I}=C;if(this.useMipmap=!!(o&&o.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!o||o.premultiply!==!1)),w)this.size=[_,x],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Ao(n)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,n):I.texImage2D(I.TEXTURE_2D,0,this.format,_,x,0,this.format,I.UNSIGNED_BYTE,n.data);else{const{x:O,y:j}=p||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||Ao(n)?I.texSubImage2D(I.TEXTURE_2D,0,O,j,I.RGBA,I.UNSIGNED_BYTE,n):I.texSubImage2D(I.TEXTURE_2D,0,O,j,_,x,I.RGBA,I.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(n,o,p){const{context:_}=this,{gl:x}=_;x.bindTexture(x.TEXTURE_2D,this.texture),p!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=x.LINEAR),n!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,n),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,p||n),this.filter=n),o!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,o),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class Mf{constructor(n,o,p,_=1,x=1,w=1,C=0){if(this.uid=n,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void bi(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const I=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=x,this.blueFactor=w,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let O=0;O<I;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(I,O)]=this.data[this._idx(I-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,I)]=this.data[this._idx(O,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<I;O++)for(let j=0;j<I;j++){const V=this.get(O,j);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(n,o){const p=new Uint8Array(this.data.buffer),_=4*this._idx(n,o);return this.unpack(p[_],p[_+1],p[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,o){if(n<-1||n>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${n}, y: ${o}, dim: ${this.dim}`);return(o+1)*this.stride+(n+1)}unpack(n,o,p){return n*this.redFactor+o*this.greenFactor+p*this.blueFactor-this.baseShift}pack(n){return Gu(n,this.getUnpackVector())}getPixels(){return new No({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,o,p){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let _=o*this.dim,x=o*this.dim+this.dim,w=p*this.dim,C=p*this.dim+this.dim;switch(o){case-1:_=x-1;break;case 1:x=_+1}switch(p){case-1:w=C-1;break;case 1:C=w+1}const I=-o*this.dim,O=-p*this.dim;for(let j=w;j<C;j++)for(let V=_;V<x;V++)this.data[this._idx(V,j)]=n.data[this._idx(V+I,j+O)]}}function Gu(s,n){const o=n[0],p=n[1],_=n[2],x=n[3],w=Math.min(o,p,_),C=Math.round((s+x)/w);return{r:Math.floor(C*w/o)%256,g:Math.floor(C*w/p)%256,b:Math.floor(C*w/_)%256}}Yt("DEMData",Mf);class i0 extends wr{constructor(n,o){super(n,z1,o)}_createColorRamp(n){const o={elevationStops:[],colorStops:[]},p=this._transitionablePaint._values["color-relief-color"].value.expression;if(p instanceof T&&p._styleExpression.expression instanceof xr){this.colorRampExpression=p;const w=p._styleExpression.expression;o.elevationStops=w.labels,o.colorStops=[];for(const C of o.elevationStops)o.colorStops.push(w.evaluate({globals:{elevation:C}}))}if(o.elevationStops.length<1&&(o.elevationStops=[0],o.colorStops=[Ln.transparent]),o.elevationStops.length<2&&(o.elevationStops.push(o.elevationStops[0]+1),o.colorStops.push(o.colorStops[0])),o.elevationStops.length<=n)return o;const _={elevationStops:[],colorStops:[]},x=(o.elevationStops.length-1)/(n-1);for(let w=0;w<o.elevationStops.length-.5;w+=x)_.elevationStops.push(o.elevationStops[Math.round(w)]),_.colorStops.push(o.colorStops[Math.round(w)]);return bi(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${n}, provided: ${o.elevationStops.length}`),_}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(n,o,p){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const _=this._createColorRamp(o),x=new No({width:_.colorStops.length,height:1}),w=new No({width:_.colorStops.length,height:1});for(let C=0;C<_.elevationStops.length;C++){const I=Gu(_.elevationStops[C],p);w.setPixel(0,C,new Ln(I.r/255,I.g/255,I.b/255,1)),x.setPixel(0,C,_.colorStops[C])}return this.colorRampTextures={elevationTexture:new tg(n,w,n.gl.RGBA),colorTexture:new tg(n,x,n.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const r0=gr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ip}=r0;function ul(s,n,o){const p=o.patternDependencies;let _=!1;for(const x of n){const w=x.paint.get(`${s}-pattern`);w.isConstant()||(_=!0);const C=w.constantOr(null);C&&(_=!0,p[C.to]=!0,p[C.from]=!0)}return _}function ng(s,n,o,p,_){const{zoom:x}=p,w=_.patternDependencies;for(const C of n){const I=C.paint.get(`${s}-pattern`).value;if(I.kind!=="constant"){let O=I.evaluate({zoom:x-1},o,{},_.availableImages),j=I.evaluate({zoom:x},o,{},_.availableImages),V=I.evaluate({zoom:x+1},o,{},_.availableImages);O=O&&O.name?O.name:O,j=j&&j.name?j.name:j,V=V&&V.name?V.name:V,w[O]=!0,w[j]=!0,w[V]=!0,o.patterns[C.id]={min:O,mid:j,max:V}}}return o}function ig(s,n,o,p,_){let x;if(_===(function(w,C,I,O){let j=0;for(let V=C,G=I-O;V<I;V+=O)j+=(w[G]-w[V])*(w[V+1]+w[G+1]),G=V;return j})(s,n,o,p)>0)for(let w=n;w<o;w+=p)x=os(w/p|0,s[w],s[w+1],x);else for(let w=o-p;w>=n;w-=p)x=os(w/p|0,s[w],s[w+1],x);return x&&ks(x,x.next)&&(ss(x),x=x.next),x}function Uh(s,n){if(!s)return s;n||(n=s);let o,p=s;do if(o=!1,p.steiner||!ks(p,p.next)&&Si(p.prev,p,p.next)!==0)p=p.next;else{if(ss(p),p=n=p.prev,p===p.next)break;o=!0}while(o||p!==n);return n}function Bd(s,n,o,p,_,x,w){if(!s)return;!w&&x&&(function(I,O,j,V){let G=I;do G.z===0&&(G.z=Ia(G.x,G.y,O,j,V)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==I);G.prevZ.nextZ=null,G.prevZ=null,(function(H){let te,ne=1;do{let re,ue=H;H=null;let Ce=null;for(te=0;ue;){te++;let fe=ue,ye=0;for(let Le=0;Le<ne&&(ye++,fe=fe.nextZ,fe);Le++);let Ie=ne;for(;ye>0||Ie>0&&fe;)ye!==0&&(Ie===0||!fe||ue.z<=fe.z)?(re=ue,ue=ue.nextZ,ye--):(re=fe,fe=fe.nextZ,Ie--),Ce?Ce.nextZ=re:H=re,re.prevZ=Ce,Ce=re;ue=fe}Ce.nextZ=null,ne*=2}while(te>1)})(G)})(s,p,_,x);let C=s;for(;s.prev!==s.next;){const I=s.prev,O=s.next;if(x?rg(s,p,_,x):$y(s))n.push(I.i,s.i,O.i),ss(s),s=O.next,C=O.next;else if((s=O)===C){w?w===1?Bd(s=a0(Uh(s),n),n,o,p,_,x,2):w===2&&Hu(s,n,o,p,_,x):Bd(Uh(s),n,o,p,_,x,1);break}}}function $y(s){const n=s.prev,o=s,p=s.next;if(Si(n,o,p)>=0)return!1;const _=n.x,x=o.x,w=p.x,C=n.y,I=o.y,O=p.y,j=Math.min(_,x,w),V=Math.min(C,I,O),G=Math.max(_,x,w),H=Math.max(C,I,O);let te=p.next;for(;te!==n;){if(te.x>=j&&te.x<=G&&te.y>=V&&te.y<=H&&zf(_,C,x,I,w,O,te.x,te.y)&&Si(te.prev,te,te.next)>=0)return!1;te=te.next}return!0}function rg(s,n,o,p){const _=s.prev,x=s,w=s.next;if(Si(_,x,w)>=0)return!1;const C=_.x,I=x.x,O=w.x,j=_.y,V=x.y,G=w.y,H=Math.min(C,I,O),te=Math.min(j,V,G),ne=Math.max(C,I,O),re=Math.max(j,V,G),ue=Ia(H,te,n,o,p),Ce=Ia(ne,re,n,o,p);let fe=s.prevZ,ye=s.nextZ;for(;fe&&fe.z>=ue&&ye&&ye.z<=Ce;){if(fe.x>=H&&fe.x<=ne&&fe.y>=te&&fe.y<=re&&fe!==_&&fe!==w&&zf(C,j,I,V,O,G,fe.x,fe.y)&&Si(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,ye.x>=H&&ye.x<=ne&&ye.y>=te&&ye.y<=re&&ye!==_&&ye!==w&&zf(C,j,I,V,O,G,ye.x,ye.y)&&Si(ye.prev,ye,ye.next)>=0))return!1;ye=ye.nextZ}for(;fe&&fe.z>=ue;){if(fe.x>=H&&fe.x<=ne&&fe.y>=te&&fe.y<=re&&fe!==_&&fe!==w&&zf(C,j,I,V,O,G,fe.x,fe.y)&&Si(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;ye&&ye.z<=Ce;){if(ye.x>=H&&ye.x<=ne&&ye.y>=te&&ye.y<=re&&ye!==_&&ye!==w&&zf(C,j,I,V,O,G,ye.x,ye.y)&&Si(ye.prev,ye,ye.next)>=0)return!1;ye=ye.nextZ}return!0}function a0(s,n){let o=s;do{const p=o.prev,_=o.next.next;!ks(p,_)&&Fy(p,o,o.next,_)&&Dp(p,_)&&Dp(_,p)&&(n.push(p.i,o.i,_.i),ss(o),ss(o.next),o=s=_),o=o.next}while(o!==s);return Uh(o)}function Hu(s,n,o,p,_,x){let w=s;do{let C=w.next.next;for(;C!==w.prev;){if(w.i!==C.i&&Ur(w,C)){let I=Lp(w,C);return w=Uh(w,w.next),I=Uh(I,I.next),Bd(w,n,o,p,_,x,0),void Bd(I,n,o,p,_,x,0)}C=C.next}w=w.next}while(w!==s)}function za(s,n){let o=s.x-n.x;return o===0&&(o=s.y-n.y,o===0)&&(o=(s.next.y-s.y)/(s.next.x-s.x)-(n.next.y-n.y)/(n.next.x-n.x)),o}function jy(s,n){const o=(function(_,x){let w=x;const C=_.x,I=_.y;let O,j=-1/0;if(ks(_,w))return w;do{if(ks(_,w.next))return w.next;if(I<=w.y&&I>=w.next.y&&w.next.y!==w.y){const ne=w.x+(I-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(ne<=C&&ne>j&&(j=ne,O=w.x<w.next.x?w:w.next,ne===C))return O}w=w.next}while(w!==x);if(!O)return null;const V=O,G=O.x,H=O.y;let te=1/0;w=O;do{if(C>=w.x&&w.x>=G&&C!==w.x&&By(I<H?C:j,I,G,H,I<H?j:C,I,w.x,w.y)){const ne=Math.abs(I-w.y)/(C-w.x);Dp(w,_)&&(ne<te||ne===te&&(w.x>O.x||w.x===O.x&&o0(O,w)))&&(O=w,te=ne)}w=w.next}while(w!==V);return O})(s,n);if(!o)return n;const p=Lp(o,s);return Uh(p,p.next),Uh(o,o.next)}function o0(s,n){return Si(s.prev,s,n.prev)<0&&Si(n.next,s,s.next)<0}function Ia(s,n,o,p,_){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-o)*_|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-p)*_|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function I1(s){let n=s,o=s;do(n.x<o.x||n.x===o.x&&n.y<o.y)&&(o=n),n=n.next;while(n!==s);return o}function By(s,n,o,p,_,x,w,C){return(_-w)*(n-C)>=(s-w)*(x-C)&&(s-w)*(p-C)>=(o-w)*(n-C)&&(o-w)*(x-C)>=(_-w)*(p-C)}function zf(s,n,o,p,_,x,w,C){return!(s===w&&n===C)&&By(s,n,o,p,_,x,w,C)}function Ur(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!(function(o,p){let _=o;do{if(_.i!==o.i&&_.next.i!==o.i&&_.i!==p.i&&_.next.i!==p.i&&Fy(_,_.next,o,p))return!0;_=_.next}while(_!==o);return!1})(s,n)&&(Dp(s,n)&&Dp(n,s)&&(function(o,p){let _=o,x=!1;const w=(o.x+p.x)/2,C=(o.y+p.y)/2;do _.y>C!=_.next.y>C&&_.next.y!==_.y&&w<(_.next.x-_.x)*(C-_.y)/(_.next.y-_.y)+_.x&&(x=!x),_=_.next;while(_!==o);return x})(s,n)&&(Si(s.prev,s,n.prev)||Si(s,n.prev,n))||ks(s,n)&&Si(s.prev,s,s.next)>0&&Si(n.prev,n,n.next)>0)}function Si(s,n,o){return(n.y-s.y)*(o.x-n.x)-(n.x-s.x)*(o.y-n.y)}function ks(s,n){return s.x===n.x&&s.y===n.y}function Fy(s,n,o,p){const _=Pp(Si(s,n,o)),x=Pp(Si(s,n,p)),w=Pp(Si(o,p,s)),C=Pp(Si(o,p,n));return _!==x&&w!==C||!(_!==0||!kp(s,o,n))||!(x!==0||!kp(s,p,n))||!(w!==0||!kp(o,s,p))||!(C!==0||!kp(o,n,p))}function kp(s,n,o){return n.x<=Math.max(s.x,o.x)&&n.x>=Math.min(s.x,o.x)&&n.y<=Math.max(s.y,o.y)&&n.y>=Math.min(s.y,o.y)}function Pp(s){return s>0?1:s<0?-1:0}function Dp(s,n){return Si(s.prev,s,s.next)<0?Si(s,n,s.next)>=0&&Si(s,s.prev,n)>=0:Si(s,n,s.prev)<0||Si(s,s.next,n)<0}function Lp(s,n){const o=ag(s.i,s.x,s.y),p=ag(n.i,n.x,n.y),_=s.next,x=n.prev;return s.next=n,n.prev=s,o.next=_,_.prev=o,p.next=o,o.prev=p,x.next=p,p.prev=x,p}function os(s,n,o,p){const _=ag(s,n,o);return p?(_.next=p.next,_.prev=p,p.next.prev=_,p.next=_):(_.prev=_,_.next=_),_}function ss(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function ag(s,n,o){return{i:s,x:n,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ha{constructor(n,o){if(o>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=o}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class Rp{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}Rp.noSubdivision=new Rp({fill:new Ha(0,0),line:new Ha(0,0),tile:new Ha(0,0),stencil:new Ha(0,0),circle:1}),Yt("SubdivisionGranularityExpression",Ha),Yt("SubdivisionGranularitySetting",Rp);const Ps=-32768,Ec=32767;class Wu{constructor(n,o){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=Bt/n,this._canonical=o}_getKey(n,o){return(n+=32768)<<16|o+32768}_vertexToIndex(n,o){if(n<-32768||o<-32768||n>32767||o>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const p=0|Math.round(n),_=0|Math.round(o),x=this._getKey(p,_);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const w=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,w),this._vertexBuffer.push(p,_),w}_subdivideTrianglesScanline(n){if(this._granularity<2)return(function(_,x){const w=[];for(let C=0;C<x.length;C+=3){const I=x[C],O=x[C+1],j=x[C+2],V=_[2*I],G=_[2*I+1];(_[2*O]-V)*(_[2*j+1]-G)-(_[2*O+1]-G)*(_[2*j]-V)>0?(w.push(I),w.push(j),w.push(O)):(w.push(I),w.push(O),w.push(j))}return w})(this._vertexBuffer,n);const o=[],p=n.length;for(let _=0;_<p;_+=3){const x=[n[_+0],n[_+1],n[_+2]],w=[this._vertexBuffer[2*n[_+0]+0],this._vertexBuffer[2*n[_+0]+1],this._vertexBuffer[2*n[_+1]+0],this._vertexBuffer[2*n[_+1]+1],this._vertexBuffer[2*n[_+2]+0],this._vertexBuffer[2*n[_+2]+1]];let C=1/0,I=1/0,O=-1/0,j=-1/0;for(let ne=0;ne<3;ne++){const re=w[2*ne],ue=w[2*ne+1];C=Math.min(C,re),O=Math.max(O,re),I=Math.min(I,ue),j=Math.max(j,ue)}if(C===O||I===j)continue;const V=Math.floor(C/this._granularityCellSize),G=Math.ceil(O/this._granularityCellSize),H=Math.floor(I/this._granularityCellSize),te=Math.ceil(j/this._granularityCellSize);if(V!==G||H!==te)for(let ne=H;ne<te;ne++){const re=this._scanlineGenerateVertexRingForCellRow(ne,w,x);Ac(this._vertexBuffer,re,o)}else o.push(...x)}return o}_scanlineGenerateVertexRingForCellRow(n,o,p){const _=n*this._granularityCellSize,x=_+this._granularityCellSize,w=[];for(let C=0;C<3;C++){const I=o[2*C],O=o[2*C+1],j=o[2*(C+1)%6],V=o[(2*(C+1)+1)%6],G=o[2*(C+2)%6],H=o[(2*(C+2)+1)%6],te=j-I,ne=V-O,re=te===0,ue=ne===0,Ce=(_-O)/ne,fe=(x-O)/ne,ye=Math.min(Ce,fe),Ie=Math.max(Ce,fe);if(!ue&&(ye>=1||Ie<=0)||ue&&(O<_||O>x)){V>=_&&V<=x&&w.push(p[(C+1)%3]);continue}!ue&&ye>0&&w.push(this._vertexToIndex(I+te*ye,O+ne*ye));const Le=I+te*Math.max(ye,0),Qe=I+te*Math.min(Ie,1);re||this._generateIntraEdgeVertices(w,I,O,j,V,Le,Qe),!ue&&Ie<1&&w.push(this._vertexToIndex(I+te*Ie,O+ne*Ie)),(ue||V>=_&&V<=x)&&w.push(p[(C+1)%3]),!ue&&(V<=_||V>=x)&&this._generateInterEdgeVertices(w,I,O,j,V,G,H,Qe,_,x)}return w}_generateIntraEdgeVertices(n,o,p,_,x,w,C){const I=_-o,O=x-p,j=O===0,V=j?Math.min(o,_):Math.min(w,C),G=j?Math.max(o,_):Math.max(w,C),H=Math.floor(V/this._granularityCellSize)+1,te=Math.ceil(G/this._granularityCellSize)-1;if(j?o<_:w<C)for(let ne=H;ne<=te;ne++){const re=ne*this._granularityCellSize;n.push(this._vertexToIndex(re,p+O*(re-o)/I))}else for(let ne=te;ne>=H;ne--){const re=ne*this._granularityCellSize;n.push(this._vertexToIndex(re,p+O*(re-o)/I))}}_generateInterEdgeVertices(n,o,p,_,x,w,C,I,O,j){const V=x-p,G=w-_,H=C-x,te=(O-x)/H,ne=(j-x)/H,re=Math.min(te,ne),ue=Math.max(te,ne),Ce=_+G*re;let fe=Math.floor(Math.min(Ce,I)/this._granularityCellSize)+1,ye=Math.ceil(Math.max(Ce,I)/this._granularityCellSize)-1,Ie=I<Ce;const Le=H===0;if(Le&&(C===O||C===j))return;if(Le||re>=1||ue<=0){const bt=p-C,ft=w+(o-w)*Math.min((O-C)/bt,(j-C)/bt);fe=Math.floor(Math.min(ft,I)/this._granularityCellSize)+1,ye=Math.ceil(Math.max(ft,I)/this._granularityCellSize)-1,Ie=I<ft}const Qe=V>0?j:O;if(Ie)for(let bt=fe;bt<=ye;bt++)n.push(this._vertexToIndex(bt*this._granularityCellSize,Qe));else for(let bt=ye;bt>=fe;bt--)n.push(this._vertexToIndex(bt*this._granularityCellSize,Qe))}_generateOutline(n){const o=[];for(const p of n){const _=Xu(p,this._granularity,!0),x=this._pointArrayToIndices(_),w=[];for(let C=1;C<x.length;C++)w.push(x[C-1]),w.push(x[C]);o.push(w)}return o}_handlePoles(n){let o=!1,p=!1;this._canonical&&(this._canonical.y===0&&(o=!0),this._canonical.y===(1<<this._canonical.z)-1&&(p=!0)),(o||p)&&this._fillPoles(n,o,p)}_ensureNoPoleVertices(){const n=this._vertexBuffer;for(let o=0;o<n.length;o+=2){const p=n[o+1];p===Ps&&(n[o+1]=-32767),p===Ec&&(n[o+1]=32766)}}_generatePoleQuad(n,o,p,_,x,w){_>x!=(w===Ps)?(n.push(o),n.push(p),n.push(this._vertexToIndex(_,w)),n.push(p),n.push(this._vertexToIndex(x,w)),n.push(this._vertexToIndex(_,w))):(n.push(p),n.push(o),n.push(this._vertexToIndex(_,w)),n.push(this._vertexToIndex(x,w)),n.push(p),n.push(this._vertexToIndex(_,w)))}_fillPoles(n,o,p){const _=this._vertexBuffer,x=Bt,w=n.length;for(let C=2;C<w;C+=3){const I=n[C-2],O=n[C-1],j=n[C],V=_[2*I],G=_[2*I+1],H=_[2*O],te=_[2*O+1],ne=_[2*j],re=_[2*j+1];o&&(G===0&&te===0&&this._generatePoleQuad(n,I,O,V,H,Ps),te===0&&re===0&&this._generatePoleQuad(n,O,j,H,ne,Ps),re===0&&G===0&&this._generatePoleQuad(n,j,I,ne,V,Ps)),p&&(G===x&&te===x&&this._generatePoleQuad(n,I,O,V,H,Ec),te===x&&re===x&&this._generatePoleQuad(n,O,j,H,ne,Ec),re===x&&G===x&&this._generatePoleQuad(n,j,I,ne,V,Ec))}}_initializeVertices(n){for(let o=0;o<n.length;o+=2)this._vertexToIndex(n[o],n[o+1])}subdividePolygonInternal(n,o){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:p,holeIndices:_}=(function(C){const I=[],O=[];for(const j of C)if(j.length!==0){j!==C[0]&&I.push(O.length/2);for(let V=0;V<j.length;V++)O.push(j[V].x),O.push(j[V].y)}return{flattened:O,holeIndices:I}})(n);let x;this._initializeVertices(p);try{const C=(function(O,j,V=2){const G=j&&j.length,H=G?j[0]*V:O.length;let te=ig(O,0,H,V,!0);const ne=[];if(!te||te.next===te.prev)return ne;let re,ue,Ce;if(G&&(te=(function(fe,ye,Ie,Le){const Qe=[];for(let bt=0,ft=ye.length;bt<ft;bt++){const St=ig(fe,ye[bt]*Le,bt<ft-1?ye[bt+1]*Le:fe.length,Le,!1);St===St.next&&(St.steiner=!0),Qe.push(I1(St))}Qe.sort(za);for(let bt=0;bt<Qe.length;bt++)Ie=jy(Qe[bt],Ie);return Ie})(O,j,te,V)),O.length>80*V){re=O[0],ue=O[1];let fe=re,ye=ue;for(let Ie=V;Ie<H;Ie+=V){const Le=O[Ie],Qe=O[Ie+1];Le<re&&(re=Le),Qe<ue&&(ue=Qe),Le>fe&&(fe=Le),Qe>ye&&(ye=Qe)}Ce=Math.max(fe-re,ye-ue),Ce=Ce!==0?32767/Ce:0}return Bd(te,ne,V,re,ue,Ce,0),ne})(p,_),I=this._convertIndices(p,C);x=this._subdivideTrianglesScanline(I)}catch(C){console.error(C)}let w=[];return o&&(w=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:w}}_convertIndices(n,o){const p=[];for(let _=0;_<o.length;_++)p.push(this._vertexToIndex(n[2*o[_]],n[2*o[_]+1]));return p}_pointArrayToIndices(n){const o=[];for(let p=0;p<n.length;p++){const _=n[p];o.push(this._vertexToIndex(_.x,_.y))}return o}}function og(s,n,o,p=!0){return new Wu(o,n).subdividePolygonInternal(s,p)}function Xu(s,n,o=!1){if(!s||s.length<1)return[];if(s.length<2)return[];const p=s[0],_=s[s.length-1],x=o&&(p.x!==_.x||p.y!==_.y);if(n<2)return x?[...s,s[0]]:[...s];const w=Math.floor(Bt/n),C=[];C.push(new z(s[0].x,s[0].y));const I=s.length,O=x?I:I-1;for(let j=0;j<O;j++){const V=s[j],G=j<I-1?s[j+1]:s[0],H=V.x,te=V.y,ne=G.x,re=G.y,ue=H!==ne,Ce=te!==re;if(!ue&&!Ce)continue;const fe=ne-H,ye=re-te,Ie=Math.abs(fe),Le=Math.abs(ye);let Qe=H,bt=te;for(;;){const St=fe>0?(Math.floor(Qe/w)+1)*w:(Math.ceil(Qe/w)-1)*w,Vt=ye>0?(Math.floor(bt/w)+1)*w:(Math.ceil(bt/w)-1)*w,Et=Math.abs(Qe-St),yt=Math.abs(bt-Vt),ct=Math.abs(Qe-ne),tn=Math.abs(bt-re),Kt=ue?Et/Ie:Number.POSITIVE_INFINITY,nn=Ce?yt/Le:Number.POSITIVE_INFINITY;if((ct<=Et||!ue)&&(tn<=yt||!Ce))break;if(Kt<nn&&ue||!Ce){Qe=St,bt+=ye*Kt;const Ht=new z(Qe,Math.round(bt));C[C.length-1].x===Ht.x&&C[C.length-1].y===Ht.y||C.push(Ht)}else{Qe+=fe*nn,bt=Vt;const Ht=new z(Math.round(Qe),bt);C[C.length-1].x===Ht.x&&C[C.length-1].y===Ht.y||C.push(Ht)}}const ft=new z(ne,re);C[C.length-1].x===ft.x&&C[C.length-1].y===ft.y||C.push(ft)}return C}function Ac(s,n,o){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let p=0,_=s[2*n[0]];for(let I=1;I<n.length;I++){const O=s[2*n[I]];O<_&&(_=O,p=I)}const x=n.length;let w=p,C=(w+1)%x;for(;;){const I=w-1>=0?w-1:x-1,O=(C+1)%x,j=s[2*n[I]],V=s[2*n[O]],G=s[2*n[w]],H=s[2*n[w]+1],te=s[2*n[C]+1];let ne=!1;if(j<V)ne=!0;else if(j>V)ne=!1;else{const re=te-H,ue=-(s[2*n[C]]-G),Ce=H<te?1:-1;((j-G)*re+(s[2*n[I]+1]-H)*ue)*Ce>((V-G)*re+(s[2*n[O]+1]-H)*ue)*Ce&&(ne=!0)}if(ne){const re=n[I],ue=n[w],Ce=n[C];re!==ue&&re!==Ce&&ue!==Ce&&o.push(Ce,ue,re),w--,w<0&&(w=x-1)}else{const re=n[O],ue=n[w],Ce=n[C];re!==ue&&re!==Ce&&ue!==Ce&&o.push(Ce,ue,re),C++,C>=x&&(C=0)}if(I===O)break}}function Uy(s,n,o,p,_,x,w,C,I){const O=_.length/2,j=w&&C&&I;if(O<Ut.MAX_VERTEX_ARRAY_LENGTH){const V=n.prepareSegment(O,o,p),G=V.vertexLength;for(let ne=0;ne<x.length;ne+=3)p.emplaceBack(G+x[ne],G+x[ne+1],G+x[ne+2]);let H,te;V.vertexLength+=O,V.primitiveLength+=x.length/3,j&&(te=w.prepareSegment(O,o,C),H=te.vertexLength,te.vertexLength+=O);for(let ne=0;ne<_.length;ne+=2)s(_[ne],_[ne+1]);if(j)for(let ne=0;ne<I.length;ne++){const re=I[ne];for(let ue=1;ue<re.length;ue+=2)C.emplaceBack(H+re[ue-1],H+re[ue]);te.primitiveLength+=re.length/2}}else(function(V,G,H,te,ne,re){const ue=[];for(let Le=0;Le<te.length/2;Le++)ue.push(-1);const Ce={count:0};let fe=0,ye=V.getOrCreateLatestSegment(G,H),Ie=ye.vertexLength;for(let Le=2;Le<ne.length;Le+=3){const Qe=ne[Le-2],bt=ne[Le-1],ft=ne[Le];let St=ue[Qe]<fe,Vt=ue[bt]<fe,Et=ue[ft]<fe;ye.vertexLength+((St?1:0)+(Vt?1:0)+(Et?1:0))>Ut.MAX_VERTEX_ARRAY_LENGTH&&(ye=V.createNewSegment(G,H),fe=Ce.count,St=!0,Vt=!0,Et=!0,Ie=0);const yt=hu(ue,te,re,Ce,Qe,St,ye),ct=hu(ue,te,re,Ce,bt,Vt,ye),tn=hu(ue,te,re,Ce,ft,Et,ye);H.emplaceBack(Ie+yt-fe,Ie+ct-fe,Ie+tn-fe),ye.primitiveLength++}})(n,o,p,_,x,s),j&&(function(V,G,H,te,ne,re){const ue=[];for(let Le=0;Le<te.length/2;Le++)ue.push(-1);const Ce={count:0};let fe=0,ye=V.getOrCreateLatestSegment(G,H),Ie=ye.vertexLength;for(let Le=0;Le<ne.length;Le++){const Qe=ne[Le];for(let bt=1;bt<ne[Le].length;bt+=2){const ft=Qe[bt-1],St=Qe[bt];let Vt=ue[ft]<fe,Et=ue[St]<fe;ye.vertexLength+((Vt?1:0)+(Et?1:0))>Ut.MAX_VERTEX_ARRAY_LENGTH&&(ye=V.createNewSegment(G,H),fe=Ce.count,Vt=!0,Et=!0,Ie=0);const yt=hu(ue,te,re,Ce,ft,Vt,ye),ct=hu(ue,te,re,Ce,St,Et,ye);H.emplaceBack(Ie+yt-fe,Ie+ct-fe),ye.primitiveLength++}}})(w,o,C,_,I,s),n.forceNewSegmentOnNextPrepare(),w?.forceNewSegmentOnNextPrepare()}function hu(s,n,o,p,_,x,w){if(x){const C=p.count;return o(n[2*_],n[2*_+1]),s[_]=p.count,p.count++,w.vertexLength++,C}return s[_]}class Fd{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new ve,this.indexArray=new at,this.indexArray2=new Dt,this.programConfigurations=new ou(n.layers,n.zoom),this.segments=new Ut,this.segments2=new Ut,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(n,o,p){this.hasDependencies=ul("fill",this.layers,o);const _=this.layers[0].layout.get("fill-sort-key"),x=!_.isConstant(),w=[];for(const{feature:C,id:I,index:O,sourceLayerIndex:j}of n){const V=this.layers[0]._featureFilter.needGeometry,G=cl(C,V);if(!this.layers[0]._featureFilter.filter(new Ri(this.zoom),G,p))continue;const H=x?_.evaluate(G,{},p,o.availableImages):void 0,te={id:I,properties:C.properties,type:C.type,sourceLayerIndex:j,index:O,geometry:V?G.geometry:Tc(C),patterns:{},sortKey:H};w.push(te)}x&&w.sort(((C,I)=>C.sortKey-I.sortKey));for(const C of w){const{geometry:I,index:O,sourceLayerIndex:j}=C;if(this.hasDependencies){const V=ng("fill",this.layers,C,{zoom:this.zoom},o);this.patternFeatures.push(V)}else this.addFeature(C,I,O,p,{},o.subdivisionGranularity);o.featureIndex.insert(n[O].feature,I,O,j,this.index)}}update(n,o,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:p})}addFeatures(n,o,p){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,o,p,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ip),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,o,p,_,x,w){for(const C of sc(o,500)){const I=og(C,_,w.fill.getGranularityForZoomLevel(_.z)),O=this.layoutVertexArray;Uy(((j,V)=>{O.emplaceBack(j,V)}),this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,{imagePositions:x,canonical:_})}}let If,Ud;Yt("FillBucket",Fd,{omit:["layers","patternFeatures"]});var s0={get paint(){return Ud=Ud||new Fr({"fill-antialias":new en(Ke.paint_fill["fill-antialias"]),"fill-opacity":new on(Ke.paint_fill["fill-opacity"]),"fill-color":new on(Ke.paint_fill["fill-color"]),"fill-outline-color":new on(Ke.paint_fill["fill-outline-color"]),"fill-translate":new en(Ke.paint_fill["fill-translate"]),"fill-translate-anchor":new en(Ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new Cs(Ke.paint_fill["fill-pattern"])})},get layout(){return If=If||new Fr({"fill-sort-key":new on(Ke.layout_fill["fill-sort-key"])})}};class l0 extends wr{constructor(n,o){super(n,s0,o)}recalculate(n,o){super.recalculate(n,o);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Fd(n)}queryRadius(){return Sp(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:o,transform:p,pixelsToTileUnits:_}){return Gm(Wm(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-p.bearingInRadians,_),o)}isTileClipped(){return!0}}const Op=gr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),c0=gr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:sg}=Op;class kf{constructor(n,o,p,_,x){this.properties={},this.extent=p,this.type=0,this.id=void 0,this._pbf=n,this._geometry=-1,this._keys=_,this._values=x,n.readFields(k1,this,o)}loadGeometry(){const n=this._pbf;n.pos=this._geometry;const o=n.readVarint()+n.pos,p=[];let _,x=1,w=0,C=0,I=0;for(;n.pos<o;){if(w<=0){const O=n.readVarint();x=7&O,w=O>>3}if(w--,x===1||x===2)C+=n.readSVarint(),I+=n.readSVarint(),x===1&&(_&&p.push(_),_=[]),_&&_.push(new z(C,I));else{if(x!==7)throw new Error(`unknown command ${x}`);_&&_.push(_[0].clone())}}return _&&p.push(_),p}bbox(){const n=this._pbf;n.pos=this._geometry;const o=n.readVarint()+n.pos;let p=1,_=0,x=0,w=0,C=1/0,I=-1/0,O=1/0,j=-1/0;for(;n.pos<o;){if(_<=0){const V=n.readVarint();p=7&V,_=V>>3}if(_--,p===1||p===2)x+=n.readSVarint(),w+=n.readSVarint(),x<C&&(C=x),x>I&&(I=x),w<O&&(O=w),w>j&&(j=w);else if(p!==7)throw new Error(`unknown command ${p}`)}return[C,O,I,j]}toGeoJSON(n,o,p){const _=this.extent*Math.pow(2,p),x=this.extent*n,w=this.extent*o,C=this.loadGeometry();function I(G){return[360*(G.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((1-2*(G.y+w)/_)*Math.PI))-90]}function O(G){return G.map(I)}let j;if(this.type===1){const G=[];for(const te of C)G.push(te[0]);const H=O(G);j=G.length===1?{type:"Point",coordinates:H[0]}:{type:"MultiPoint",coordinates:H}}else if(this.type===2){const G=C.map(O);j=G.length===1?{type:"LineString",coordinates:G[0]}:{type:"MultiLineString",coordinates:G}}else{if(this.type!==3)throw new Error("unknown feature type");{const G=u0(C),H=[];for(const te of G)H.push(te.map(O));j=H.length===1?{type:"Polygon",coordinates:H[0]}:{type:"MultiPolygon",coordinates:H}}}const V={type:"Feature",geometry:j,properties:this.properties};return this.id!=null&&(V.id=this.id),V}}function k1(s,n,o){s===1?n.id=o.readVarint():s===2?(function(p,_){const x=p.readVarint()+p.pos;for(;p.pos<x;){const w=_._keys[p.readVarint()],C=_._values[p.readVarint()];_.properties[w]=C}})(o,n):s===3?n.type=o.readVarint():s===4&&(n._geometry=o.pos)}function u0(s){const n=s.length;if(n<=1)return[s];const o=[];let p,_;for(let x=0;x<n;x++){const w=Gi(s[x]);w!==0&&(_===void 0&&(_=w<0),_===w<0?(p&&o.push(p),p=[s[x]]):p&&p.push(s[x]))}return p&&o.push(p),o}function Gi(s){let n=0;for(let o,p,_=0,x=s.length,w=x-1;_<x;w=_++)o=s[_],p=s[w],n+=(p.x-o.x)*(o.y+p.y);return n}kf.types=["Unknown","Point","LineString","Polygon"];class _r{constructor(n,o){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(mi,this,o),this.length=this._features.length}feature(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];const o=this._pbf.readVarint()+this._pbf.pos;return new kf(this._pbf,o,this.extent,this._keys,this._values)}}function mi(s,n,o){s===15?n.version=o.readVarint():s===1?n.name=o.readString():s===5?n.extent=o.readVarint():s===2?n._features.push(o.pos):s===3?n._keys.push(o.readString()):s===4&&n._values.push((function(p){let _=null;const x=p.readVarint()+p.pos;for(;p.pos<x;){const w=p.readVarint()>>3;_=w===1?p.readString():w===2?p.readFloat():w===3?p.readDouble():w===4?p.readVarint64():w===5?p.readVarint():w===6?p.readSVarint():w===7?p.readBoolean():null}if(_==null)throw new Error("unknown feature value");return _})(o))}class gi{constructor(n,o){this.layers=n.readFields(tr,{},o)}}function tr(s,n,o){if(s===3){const p=new _r(o,o.readVarint()+o.pos);p.length&&(n[p.name]=p)}}const ls=Math.pow(2,13);function ql(s,n,o,p,_,x,w,C){s.emplaceBack(n,o,2*Math.floor(p*ls)+w,_*ls*2,x*ls*2,Math.round(C))}class Vh{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.hasDependencies=!1,this.layoutVertexArray=new Ee,this.centroidVertexArray=new _e,this.indexArray=new at,this.programConfigurations=new ou(n.layers,n.zoom),this.segments=new Ut,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(n,o,p){this.features=[],this.hasDependencies=ul("fill-extrusion",this.layers,o);for(const{feature:_,id:x,index:w,sourceLayerIndex:C}of n){const I=this.layers[0]._featureFilter.needGeometry,O=cl(_,I);if(!this.layers[0]._featureFilter.filter(new Ri(this.zoom),O,p))continue;const j={id:x,sourceLayerIndex:C,index:w,geometry:I?O.geometry:Tc(_),properties:_.properties,type:_.type,patterns:{}};this.hasDependencies?this.features.push(ng("fill-extrusion",this.layers,j,{zoom:this.zoom},o)):this.addFeature(j,j.geometry,w,p,{},o.subdivisionGranularity),o.featureIndex.insert(_,j.geometry,w,C,this.index,!0)}}addFeatures(n,o,p){for(const _ of this.features){const{geometry:x}=_;this.addFeature(_,x,_.index,o,p,n.subdivisionGranularity)}}update(n,o,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:p})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,sg),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,c0.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,o,p,_,x,w){for(const C of sc(o,500)){const I={x:0,y:0,sampleCount:0},O=this.layoutVertexArray.length;this.processPolygon(I,_,n,C,w);const j=this.layoutVertexArray.length-O,V=Math.floor(I.x/I.sampleCount),G=Math.floor(I.y/I.sampleCount);for(let H=0;H<j;H++)this.centroidVertexArray.emplaceBack(V,G)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,{imagePositions:x,canonical:_})}processPolygon(n,o,p,_,x){if(_.length<1||Kr(_[0]))return;for(const V of _)V.length!==0&&Vy(n,V);const w={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=x.fill.getGranularityForZoomLevel(o.z),I=kf.types[p.type]==="Polygon";for(const V of _){if(V.length===0||Kr(V))continue;const G=Xu(V,C,I);this._generateSideFaces(G,w)}if(!I)return;const O=og(_,o,C,!1),j=this.layoutVertexArray;Uy(((V,G)=>{ql(j,V,G,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,O.verticesFlattened,O.indicesTriangles)}_generateSideFaces(n,o){let p=0;for(let _=1;_<n.length;_++){const x=n[_],w=n[_-1];if(Yu(x,w))continue;o.segment.vertexLength+4>Ut.MAX_VERTEX_ARRAY_LENGTH&&(o.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const C=x.sub(w)._perp()._unit(),I=w.dist(x);p+I>32768&&(p=0),ql(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,0,p),ql(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,1,p),p+=I,ql(this.layoutVertexArray,w.x,w.y,C.x,C.y,0,0,p),ql(this.layoutVertexArray,w.x,w.y,C.x,C.y,0,1,p);const O=o.segment.vertexLength;this.indexArray.emplaceBack(O,O+2,O+1),this.indexArray.emplaceBack(O+1,O+2,O+3),o.segment.vertexLength+=4,o.segment.primitiveLength+=2}}}function Vy(s,n){for(let o=0;o<n.length;o++){const p=n[o];o===n.length-1&&n[0].x===p.x&&n[0].y===p.y||(s.x+=p.x,s.y+=p.y,s.sampleCount++)}}function Yu(s,n){return s.x===n.x&&(s.x<0||s.x>Bt)||s.y===n.y&&(s.y<0||s.y>Bt)}function Kr(s){return s.every((n=>n.x<0))||s.every((n=>n.x>Bt))||s.every((n=>n.y<0))||s.every((n=>n.y>Bt))}let Ku;Yt("FillExtrusionBucket",Vh,{omit:["layers","features"]});var Vd={get paint(){return Ku=Ku||new Fr({"fill-extrusion-opacity":new en(Ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new on(Ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new en(Ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new en(Ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Cs(Ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new on(Ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new on(Ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new en(Ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Zy extends wr{constructor(n,o){super(n,Vd,o)}createBucket(n){return new Vh(n)}queryRadius(){return Sp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:p,geometry:_,transform:x,pixelsToTileUnits:w,pixelPosMatrix:C}){const I=Wm(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,w),O=this.paint.get("fill-extrusion-height").evaluate(o,p),j=this.paint.get("fill-extrusion-base").evaluate(o,p),V=(function(H,te){const ne=[];for(const re of H){const ue=[re.x,re.y,0,1];ln(ue,ue,te),ne.push(new z(ue[0]/ue[3],ue[1]/ue[3]))}return ne})(I,C),G=(function(H,te,ne,re){const ue=[],Ce=[],fe=re[8]*te,ye=re[9]*te,Ie=re[10]*te,Le=re[11]*te,Qe=re[8]*ne,bt=re[9]*ne,ft=re[10]*ne,St=re[11]*ne;for(const Vt of H){const Et=[],yt=[];for(const ct of Vt){const tn=ct.x,Kt=ct.y,nn=re[0]*tn+re[4]*Kt+re[12],Ht=re[1]*tn+re[5]*Kt+re[13],pn=re[2]*tn+re[6]*Kt+re[14],Ti=re[3]*tn+re[7]*Kt+re[15],ni=pn+Ie,Or=Ti+Le,Fo=nn+Qe,La=Ht+bt,Nr=pn+ft,Tr=Ti+St,Fi=new z((nn+fe)/Or,(Ht+ye)/Or);Fi.z=ni/Or,Et.push(Fi);const Jr=new z(Fo/Tr,La/Tr);Jr.z=Nr/Tr,yt.push(Jr)}ue.push(Et),Ce.push(yt)}return[ue,Ce]})(_,j,O,C);return(function(H,te,ne){let re=1/0;Gm(ne,te)&&(re=Zd(ne,te[0]));for(let ue=0;ue<te.length;ue++){const Ce=te[ue],fe=H[ue];for(let ye=0;ye<Ce.length-1;ye++){const Ie=Ce[ye],Le=[Ie,Ce[ye+1],fe[ye+1],fe[ye],Ie];jd(ne,Le)&&(re=Math.min(re,Zd(ne,Le)))}}return re!==1/0&&re})(G[0],G[1],V)}}function To(s,n){return s.x*n.x+s.y*n.y}function Zd(s,n){if(s.length===1){let o=0;const p=n[o++];let _;for(;!_||p.equals(_);)if(_=n[o++],!_)return 1/0;for(;o<n.length;o++){const x=n[o],w=s[0],C=_.sub(p),I=x.sub(p),O=w.sub(p),j=To(C,C),V=To(C,I),G=To(I,I),H=To(O,C),te=To(O,I),ne=j*G-V*V,re=(G*H-V*te)/ne,ue=(j*te-V*H)/ne,Ce=p.z*(1-re-ue)+_.z*re+x.z*ue;if(isFinite(Ce))return Ce}return 1/0}{let o=1/0;for(const p of n)o=Math.min(o,p.z);return o}}const Np=gr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ds}=Np,qy=gr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:lg}=qy,h0=Math.cos(Math.PI/180*37.5),$p=Math.pow(2,14)/.5;class Pf{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((o=>{this.gradients[o.id]={}})),this.layoutVertexArray=new Pe,this.layoutVertexArray2=new Te,this.indexArray=new at,this.programConfigurations=new ou(n.layers,n.zoom),this.segments=new Ut,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(n,o,p){this.hasDependencies=ul("line",this.layers,o)||this.hasLineDasharray(this.layers);const _=this.layers[0].layout.get("line-sort-key"),x=!_.isConstant(),w=[];for(const{feature:C,id:I,index:O,sourceLayerIndex:j}of n){const V=this.layers[0]._featureFilter.needGeometry,G=cl(C,V);if(!this.layers[0]._featureFilter.filter(new Ri(this.zoom),G,p))continue;const H=x?_.evaluate(G,{},p):void 0,te={id:I,properties:C.properties,type:C.type,sourceLayerIndex:j,index:O,geometry:V?G.geometry:Tc(C),patterns:{},dashes:{},sortKey:H};w.push(te)}x&&w.sort(((C,I)=>C.sortKey-I.sortKey));for(const C of w){const{geometry:I,index:O,sourceLayerIndex:j}=C;this.hasDependencies?(ul("line",this.layers,o)?ng("line",this.layers,C,{zoom:this.zoom},o):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,C,this.zoom,o),this.patternFeatures.push(C)):this.addFeature(C,I,O,p,{},{},o.subdivisionGranularity),o.featureIndex.insert(n[O].feature,I,O,j,this.index)}}update(n,o,p,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,{imagePositions:p,dashPositions:_})}addFeatures(n,o,p,_){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,o,p,_,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,lg)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ds),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,o,p,_,x,w,C){const I=this.layers[0].layout,O=I.get("line-join").evaluate(n,{}),j=I.get("line-cap"),V=I.get("line-miter-limit"),G=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const H of o)this.addLine(H,n,O,j,V,G,_,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,{imagePositions:x,dashPositions:w,canonical:_})}addLine(n,o,p,_,x,w,C,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=Xu(n,C?I.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<n.length-1;fe++)this.totalDistance+=n[fe].dist(n[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const O=kf.types[o.type]==="Polygon";let j=n.length;for(;j>=2&&n[j-1].equals(n[j-2]);)j--;let V=0;for(;V<j-1&&n[V].equals(n[V+1]);)V++;if(j<(O?3:2))return;p==="bevel"&&(x=1.05);const G=this.overscaling<=16?122880/(512*this.overscaling):0,H=this.segments.prepareSegment(10*j,this.layoutVertexArray,this.indexArray);let te,ne,re,ue,Ce;this.e1=this.e2=-1,O&&(te=n[j-2],Ce=n[V].sub(te)._unit()._perp());for(let fe=V;fe<j;fe++){if(re=fe===j-1?O?n[V+1]:void 0:n[fe+1],re&&n[fe].equals(re))continue;Ce&&(ue=Ce),te&&(ne=te),te=n[fe],Ce=re?re.sub(te)._unit()._perp():ue,ue=ue||Ce;let ye=ue.add(Ce);ye.x===0&&ye.y===0||ye._unit();const Ie=ue.x*Ce.x+ue.y*Ce.y,Le=ye.x*Ce.x+ye.y*Ce.y,Qe=Le!==0?1/Le:1/0,bt=2*Math.sqrt(2-2*Le),ft=Le<h0&&ne&&re,St=ue.x*Ce.y-ue.y*Ce.x>0;if(ft&&fe>V){const yt=te.dist(ne);if(yt>2*G){const ct=te.sub(te.sub(ne)._mult(G/yt)._round());this.updateDistance(ne,ct),this.addCurrentVertex(ct,ue,0,0,H),ne=ct}}const Vt=ne&&re;let Et=Vt?p:O?"butt":_;if(Vt&&Et==="round"&&(Qe<w?Et="miter":Qe<=2&&(Et="fakeround")),Et==="miter"&&Qe>x&&(Et="bevel"),Et==="bevel"&&(Qe>2&&(Et="flipbevel"),Qe<x&&(Et="miter")),ne&&this.updateDistance(ne,te),Et==="miter")ye._mult(Qe),this.addCurrentVertex(te,ye,0,0,H);else if(Et==="flipbevel"){if(Qe>100)ye=Ce.mult(-1);else{const yt=Qe*ue.add(Ce).mag()/ue.sub(Ce).mag();ye._perp()._mult(yt*(St?-1:1))}this.addCurrentVertex(te,ye,0,0,H),this.addCurrentVertex(te,ye.mult(-1),0,0,H)}else if(Et==="bevel"||Et==="fakeround"){const yt=-Math.sqrt(Qe*Qe-1),ct=St?yt:0,tn=St?0:yt;if(ne&&this.addCurrentVertex(te,ue,ct,tn,H),Et==="fakeround"){const Kt=Math.round(180*bt/Math.PI/20);for(let nn=1;nn<Kt;nn++){let Ht=nn/Kt;if(Ht!==.5){const Ti=Ht-.5;Ht+=Ht*Ti*(Ht-1)*((1.0904+Ie*(Ie*(3.55645-1.43519*Ie)-3.2452))*Ti*Ti+(.848013+Ie*(.215638*Ie-1.06021)))}const pn=Ce.sub(ue)._mult(Ht)._add(ue)._unit()._mult(St?-1:1);this.addHalfVertex(te,pn.x,pn.y,!1,St,0,H)}}re&&this.addCurrentVertex(te,Ce,-ct,-tn,H)}else if(Et==="butt")this.addCurrentVertex(te,ye,0,0,H);else if(Et==="square"){const yt=ne?1:-1;this.addCurrentVertex(te,ye,yt,yt,H)}else Et==="round"&&(ne&&(this.addCurrentVertex(te,ue,0,0,H),this.addCurrentVertex(te,ue,1,1,H,!0)),re&&(this.addCurrentVertex(te,Ce,-1,-1,H,!0),this.addCurrentVertex(te,Ce,0,0,H)));if(ft&&fe<j-1){const yt=te.dist(re);if(yt>2*G){const ct=te.add(re.sub(te)._mult(G/yt)._round());this.updateDistance(te,ct),this.addCurrentVertex(ct,Ce,0,0,H),te=ct}}}}addCurrentVertex(n,o,p,_,x,w=!1){const C=o.y*_-o.x,I=-o.y-o.x*_;this.addHalfVertex(n,o.x+o.y*p,o.y-o.x*p,w,!1,p,x),this.addHalfVertex(n,C,I,w,!0,-_,x),this.distance>$p/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,o,p,_,x,w))}addHalfVertex({x:n,y:o},p,_,x,w,C,I){const O=.5*(this.lineClips?this.scaledDistance*($p-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(x?1:0),(o<<1)+(w?1:0),Math.round(63*p)+128,Math.round(63*_)+128,1+(C===0?0:C<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const j=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,j,this.e2),I.primitiveLength++),w?this.e2=j:this.e1=j}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,o){this.distance+=n.dist(o),this.updateScaledDistance()}hasLineDasharray(n){for(const o of n){const p=o.paint.get("line-dasharray");if(p&&!p.isConstant())return!0}return!1}addLineDashDependencies(n,o,p,_){for(const x of n){const w=x.paint.get("line-dasharray");if(!w||w.value.kind==="constant")continue;const C=x.layout.get("line-cap")==="round",I={dasharray:w.value.evaluate({zoom:p-1},o,{}),round:C},O={dasharray:w.value.evaluate({zoom:p},o,{}),round:C},j={dasharray:w.value.evaluate({zoom:p+1},o,{}),round:C},V=`${I.dasharray.join(",")},${I.round}`,G=`${O.dasharray.join(",")},${O.round}`,H=`${j.dasharray.join(",")},${j.round}`;_.dashDependencies[V]=I,_.dashDependencies[G]=O,_.dashDependencies[H]=j,o.dashes[x.id]={min:V,mid:G,max:H}}}}let Ju,ka;Yt("LineBucket",Pf,{omit:["layers","patternFeatures"]});var Qu={get paint(){return ka=ka||new Fr({"line-opacity":new on(Ke.paint_line["line-opacity"]),"line-color":new on(Ke.paint_line["line-color"]),"line-translate":new en(Ke.paint_line["line-translate"]),"line-translate-anchor":new en(Ke.paint_line["line-translate-anchor"]),"line-width":new on(Ke.paint_line["line-width"]),"line-gap-width":new on(Ke.paint_line["line-gap-width"]),"line-offset":new on(Ke.paint_line["line-offset"]),"line-blur":new on(Ke.paint_line["line-blur"]),"line-dasharray":new Cs(Ke.paint_line["line-dasharray"]),"line-pattern":new Cs(Ke.paint_line["line-pattern"]),"line-gradient":new Pd(Ke.paint_line["line-gradient"])})},get layout(){return Ju=Ju||new Fr({"line-cap":new en(Ke.layout_line["line-cap"]),"line-join":new on(Ke.layout_line["line-join"]),"line-miter-limit":new en(Ke.layout_line["line-miter-limit"]),"line-round-limit":new en(Ke.layout_line["line-round-limit"]),"line-sort-key":new on(Ke.layout_line["line-sort-key"])})}};class Df extends on{possiblyEvaluate(n,o){return o=new Ri(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(n,o)}evaluate(n,o,p,_){return o=un({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(n,o,p,_)}}let Gl;class Gy extends wr{constructor(n,o){super(n,Qu,o),this.gradientVersion=0,Gl||(Gl=new Df(Qu.paint.properties["line-width"].specification),Gl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!(function(p){return p._styleExpression!==void 0})(o)&&o._styleExpression.expression instanceof El,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,o){super.recalculate(n,o),this.paint._values["line-floorwidth"]=Gl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Pf(n)}queryRadius(n){const o=n,p=cg(qu("line-width",this,o),qu("line-gap-width",this,o)),_=qu("line-offset",this,o);return p/2+Math.abs(_)+Sp(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:o,featureState:p,geometry:_,transform:x,pixelsToTileUnits:w}){const C=Wm(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,w),I=w/2*cg(this.paint.get("line-width").evaluate(o,p),this.paint.get("line-gap-width").evaluate(o,p)),O=this.paint.get("line-offset").evaluate(o,p);return O&&(_=(function(j,V){const G=[];for(let H=0;H<j.length;H++){const te=Xm(j[H]),ne=[];for(let re=0;re<te.length;re++){const ue=te[re],Ce=te[re-1],fe=te[re+1],ye=re===0?new z(0,0):ue.sub(Ce)._unit()._perp(),Ie=re===te.length-1?new z(0,0):fe.sub(ue)._unit()._perp(),Le=ye._add(Ie)._unit(),Qe=Le.x*Ie.x+Le.y*Ie.y;Qe!==0&&Le._mult(1/Qe),ne.push(Le._mult(V)._add(ue))}G.push(ne)}return G})(_,O*w)),(function(j,V,G){for(let H=0;H<V.length;H++){const te=V[H];if(j.length>=3){for(let ne=0;ne<te.length;ne++)if(lu(j,te[ne]))return!0}if(Ma(j,te,G))return!0}return!1})(C,_,I)}isTileClipped(){return!0}}function cg(s,n){return n>0?n+2*s:s}const d0=gr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jp=gr([{name:"a_projected_pos",components:3,type:"Float32"}],4);gr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Hy=gr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);gr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ls=gr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),f0=gr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Rs(s,n,o){return s.sections.forEach((p=>{p.text=(function(_,x,w){const C=x.layout.get("text-transform").evaluate(w,{});return C==="uppercase"?_=_.toLocaleUpperCase():C==="lowercase"&&(_=_.toLocaleLowerCase()),As.applyArabicShaping&&(_=As.applyArabicShaping(_)),_})(p.text,n,o)})),s}gr([{name:"triangle",components:3,type:"Uint16"}]),gr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),gr([{type:"Float32",name:"offsetX"}]),gr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),gr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var wa=24;const Lf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},P1={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Zh={40:!0};function Bp(s,n,o,p,_,x){if("fontStack"in n){const w=o[n.fontStack],C=w&&w[s];return C?C.metrics.advance*n.scale+_:0}{const w=p[n.imageName];return w?w.displaySize[0]*n.scale*wa/x+_:0}}function ug(s,n,o,p){const _=Math.pow(s-n,2);return p?s<n?_/2:2*_:_+Math.abs(o)*o}function Rf(s,n,o){let p=0;return s===10&&(p-=1e4),o&&(p+=150),s!==40&&s!==65288||(p+=50),n!==41&&n!==65289||(p+=50),p}function Wy(s,n,o,p,_,x){let w=null,C=ug(n,o,_,x);for(const I of p){const O=ug(n-I.x,o,_,x)+I.badness;O<=C&&(w=I,C=O)}return{index:s,x:n,priorBreak:w,badness:C}}function Xy(s){return s?Xy(s.priorBreak).concat(s.index):[]}class qd{constructor(n="",o=[],p=[]){this.text=n,this.sections=o,this.sectionIndex=p,this.imageSectionID=null}static fromFeature(n,o){const p=new qd;for(let _=0;_<n.sections.length;_++){const x=n.sections[_];x.image?p.addImageSection(x):p.addTextSection(x,o)}return p}length(){return[...this.text].length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}verticalizePunctuation(){this.text=(function(n){let o="",p={premature:!0,value:void 0};const _=n[Symbol.iterator]();let x=_.next();const w=n[Symbol.iterator]();w.next();let C=w.next();for(;!x.done;)o+=!C.done&&Bl(C.value.codePointAt(0))&&!Lf[C.value]||!p.premature&&Bl(p.value.codePointAt(0))&&!Lf[p.value]||!Lf[x.value]?x.value:Lf[x.value],p={value:x.value,premature:!1},x=_.next(),C=w.next();return o})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const n=this.text.match(/^\s*/),o=n?n[0].length:0,p=this.text.match(/\S\s*$/),_=p?p[0].length-1:0;this.text=this.text.substring(o,this.text.length-_),this.sectionIndex=this.sectionIndex.slice(o,this.sectionIndex.length-_)}substring(n,o){const p=[...this.text].slice(n,o).join(""),_=this.sectionIndex.slice(n,o);return new qd(p,this.sections,_)}toCodeUnitIndex(n){return[...this.text].slice(0,n).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((n,o)=>Math.max(n,this.sections[o].scale)),0)}getMaxImageSize(n){let o=0,p=0;for(let _=0;_<this.length();_++){const x=this.getSection(_);if("imageName"in x){const w=n[x.imageName];if(!w)continue;const C=w.displaySize;o=Math.max(o,C[0]),p=Math.max(p,C[1])}}return{maxImageWidth:o,maxImageHeight:p}}addTextSection(n,o){this.text+=n.text,this.sections.push({scale:n.scale||1,verticalAlign:n.verticalAlign||"bottom",fontStack:n.fontStack||o});const p=this.sections.length-1;this.sectionIndex.push(...[...n.text].map((()=>p)))}addImageSection(n){const o=n.image?n.image.name:"";if(o.length===0)return void bi("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push({scale:1,verticalAlign:n.verticalAlign||"bottom",imageName:o}),this.sectionIndex.push(this.sections.length-1)):bi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(n,o,p,_,x){const w=[],C=this.determineAverageLineWidth(n,o,p,_,x),I=this.hasZeroWidthSpaces();let O=0,j=0;const V=this.text[Symbol.iterator]();let G=V.next();const H=this.text[Symbol.iterator]();H.next();let te=H.next();const ne=this.text[Symbol.iterator]();ne.next(),ne.next();let re=ne.next();for(;!G.done;){const ue=this.getSection(j),Ce=G.value.codePointAt(0);if(Cd(Ce)||(O+=Bp(Ce,ue,p,_,n,x)),!te.done){const fe=Nl(Ce),ye=te.value.codePointAt(0);(P1[Ce]||fe||"imageName"in ue||!re.done&&Zh[ye])&&w.push(Wy(j+1,O,C,w,Rf(Ce,ye,fe&&I),!1))}j++,G=V.next(),te=H.next(),re=ne.next()}return Xy(Wy(this.length(),O,C,w,0,!0))}determineAverageLineWidth(n,o,p,_,x){let w=0,C=0;for(const I of this.text){const O=this.getSection(C);w+=Bp(I.codePointAt(0),O,p,_,n,x),C++}return w/Math.max(1,Math.ceil(w/o))}}const hg=4294967296,Fp=1/hg,dg=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class fg{constructor(n=new Uint8Array(16)){this.buf=ArrayBuffer.isView(n)?n:new Uint8Array(n),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(n,o,p=this.length){for(;this.pos<p;){const _=this.readVarint(),x=_>>3,w=this.pos;this.type=7&_,n(x,o,this),this.pos===w&&this.skip(_)}return o}readMessage(n,o){return this.readFields(n,o,this.readVarint()+this.pos)}readFixed32(){const n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}readSFixed32(){const n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}readFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*hg;return this.pos+=8,n}readSFixed64(){const n=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*hg;return this.pos+=8,n}readFloat(){const n=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,n}readDouble(){const n=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,n}readVarint(n){const o=this.buf;let p,_;return _=o[this.pos++],p=127&_,_<128?p:(_=o[this.pos++],p|=(127&_)<<7,_<128?p:(_=o[this.pos++],p|=(127&_)<<14,_<128?p:(_=o[this.pos++],p|=(127&_)<<21,_<128?p:(_=o[this.pos],p|=(15&_)<<28,(function(x,w,C){const I=C.buf;let O,j;if(j=I[C.pos++],O=(112&j)>>4,j<128||(j=I[C.pos++],O|=(127&j)<<3,j<128)||(j=I[C.pos++],O|=(127&j)<<10,j<128)||(j=I[C.pos++],O|=(127&j)<<17,j<128)||(j=I[C.pos++],O|=(127&j)<<24,j<128)||(j=I[C.pos++],O|=(1&j)<<31,j<128))return Of(x,O,w);throw new Error("Expected varint not more than 10 bytes")})(p,n,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const n=this.readVarint();return n%2==1?(n+1)/-2:n/2}readBoolean(){return!!this.readVarint()}readString(){const n=this.readVarint()+this.pos,o=this.pos;return this.pos=n,n-o>=12&&dg?dg.decode(this.buf.subarray(o,n)):(function(p,_,x){let w="",C=_;for(;C<x;){const I=p[C];let O,j,V,G=null,H=I>239?4:I>223?3:I>191?2:1;if(C+H>x)break;H===1?I<128&&(G=I):H===2?(O=p[C+1],(192&O)==128&&(G=(31&I)<<6|63&O,G<=127&&(G=null))):H===3?(O=p[C+1],j=p[C+2],(192&O)==128&&(192&j)==128&&(G=(15&I)<<12|(63&O)<<6|63&j,(G<=2047||G>=55296&&G<=57343)&&(G=null))):H===4&&(O=p[C+1],j=p[C+2],V=p[C+3],(192&O)==128&&(192&j)==128&&(192&V)==128&&(G=(15&I)<<18|(63&O)<<12|(63&j)<<6|63&V,(G<=65535||G>=1114112)&&(G=null))),G===null?(G=65533,H=1):G>65535&&(G-=65536,w+=String.fromCharCode(G>>>10&1023|55296),G=56320|1023&G),w+=String.fromCharCode(G),C+=H}return w})(this.buf,o,n)}readBytes(){const n=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,n);return this.pos=n,o}readPackedVarint(n=[],o){const p=this.readPackedEnd();for(;this.pos<p;)n.push(this.readVarint(o));return n}readPackedSVarint(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSVarint());return n}readPackedBoolean(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readBoolean());return n}readPackedFloat(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFloat());return n}readPackedDouble(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readDouble());return n}readPackedFixed32(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFixed32());return n}readPackedSFixed32(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSFixed32());return n}readPackedFixed64(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readFixed64());return n}readPackedSFixed64(n=[]){const o=this.readPackedEnd();for(;this.pos<o;)n.push(this.readSFixed64());return n}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(n){const o=7&n;if(o===0)for(;this.buf[this.pos++]>127;);else if(o===2)this.pos=this.readVarint()+this.pos;else if(o===5)this.pos+=4;else{if(o!==1)throw new Error(`Unimplemented type: ${o}`);this.pos+=8}}writeTag(n,o){this.writeVarint(n<<3|o)}realloc(n){let o=this.length||16;for(;o<this.pos+n;)o*=2;if(o!==this.length){const p=new Uint8Array(o);p.set(this.buf),this.buf=p,this.dataView=new DataView(p.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeSFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*Fp),!0),this.pos+=8}writeSFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*Fp),!0),this.pos+=8}writeVarint(n){(n=+n||0)>268435455||n<0?(function(o,p){let _,x;if(o>=0?(_=o%4294967296|0,x=o/4294967296|0):(_=~(-o%4294967296),x=~(-o/4294967296),4294967295^_?_=_+1|0:(_=0,x=x+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");p.realloc(10),(function(w,C,I){I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,I.buf[I.pos]=127&(w>>>=7)})(_,0,p),(function(w,C){const I=(7&w)<<4;C.buf[C.pos++]|=I|((w>>>=3)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w)))))})(x,p)})(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))}writeSVarint(n){this.writeVarint(n<0?2*-n-1:2*n)}writeBoolean(n){this.writeVarint(+n)}writeString(n){n=String(n),this.realloc(4*n.length),this.pos++;const o=this.pos;this.pos=(function(_,x,w){for(let C,I,O=0;O<x.length;O++){if(C=x.charCodeAt(O),C>55295&&C<57344){if(!I){C>56319||O+1===x.length?(_[w++]=239,_[w++]=191,_[w++]=189):I=C;continue}if(C<56320){_[w++]=239,_[w++]=191,_[w++]=189,I=C;continue}C=I-55296<<10|C-56320|65536,I=null}else I&&(_[w++]=239,_[w++]=191,_[w++]=189,I=null);C<128?_[w++]=C:(C<2048?_[w++]=C>>6|192:(C<65536?_[w++]=C>>12|224:(_[w++]=C>>18|240,_[w++]=C>>12&63|128),_[w++]=C>>6&63|128),_[w++]=63&C|128)}return w})(this.buf,n,this.pos);const p=this.pos-o;p>=128&&p0(o,p,this),this.pos=o-1,this.writeVarint(p),this.pos+=p}writeFloat(n){this.realloc(4),this.dataView.setFloat32(this.pos,n,!0),this.pos+=4}writeDouble(n){this.realloc(8),this.dataView.setFloat64(this.pos,n,!0),this.pos+=8}writeBytes(n){const o=n.length;this.writeVarint(o),this.realloc(o);for(let p=0;p<o;p++)this.buf[this.pos++]=n[p]}writeRawMessage(n,o){this.pos++;const p=this.pos;n(o,this);const _=this.pos-p;_>=128&&p0(p,_,this),this.pos=p-1,this.writeVarint(_),this.pos+=_}writeMessage(n,o,p){this.writeTag(n,2),this.writeRawMessage(o,p)}writePackedVarint(n,o){o.length&&this.writeMessage(n,m0,o)}writePackedSVarint(n,o){o.length&&this.writeMessage(n,g0,o)}writePackedBoolean(n,o){o.length&&this.writeMessage(n,y0,o)}writePackedFloat(n,o){o.length&&this.writeMessage(n,Nf,o)}writePackedDouble(n,o){o.length&&this.writeMessage(n,pg,o)}writePackedFixed32(n,o){o.length&&this.writeMessage(n,_0,o)}writePackedSFixed32(n,o){o.length&&this.writeMessage(n,v0,o)}writePackedFixed64(n,o){o.length&&this.writeMessage(n,b0,o)}writePackedSFixed64(n,o){o.length&&this.writeMessage(n,x0,o)}writeBytesField(n,o){this.writeTag(n,2),this.writeBytes(o)}writeFixed32Field(n,o){this.writeTag(n,5),this.writeFixed32(o)}writeSFixed32Field(n,o){this.writeTag(n,5),this.writeSFixed32(o)}writeFixed64Field(n,o){this.writeTag(n,1),this.writeFixed64(o)}writeSFixed64Field(n,o){this.writeTag(n,1),this.writeSFixed64(o)}writeVarintField(n,o){this.writeTag(n,0),this.writeVarint(o)}writeSVarintField(n,o){this.writeTag(n,0),this.writeSVarint(o)}writeStringField(n,o){this.writeTag(n,2),this.writeString(o)}writeFloatField(n,o){this.writeTag(n,5),this.writeFloat(o)}writeDoubleField(n,o){this.writeTag(n,1),this.writeDouble(o)}writeBooleanField(n,o){this.writeVarintField(n,+o)}}function Of(s,n,o){return o?4294967296*n+(s>>>0):4294967296*(n>>>0)+(s>>>0)}function p0(s,n,o){const p=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));o.realloc(p);for(let _=o.pos-1;_>=s;_--)o.buf[_+p]=o.buf[_]}function m0(s,n){for(let o=0;o<s.length;o++)n.writeVarint(s[o])}function g0(s,n){for(let o=0;o<s.length;o++)n.writeSVarint(s[o])}function Nf(s,n){for(let o=0;o<s.length;o++)n.writeFloat(s[o])}function pg(s,n){for(let o=0;o<s.length;o++)n.writeDouble(s[o])}function y0(s,n){for(let o=0;o<s.length;o++)n.writeBoolean(s[o])}function _0(s,n){for(let o=0;o<s.length;o++)n.writeFixed32(s[o])}function v0(s,n){for(let o=0;o<s.length;o++)n.writeSFixed32(s[o])}function b0(s,n){for(let o=0;o<s.length;o++)n.writeFixed64(s[o])}function x0(s,n){for(let o=0;o<s.length;o++)n.writeSFixed64(s[o])}function w0(s,n,o){s===1&&o.readMessage(mg,n)}function mg(s,n,o){if(s===3){const{id:p,bitmap:_,width:x,height:w,left:C,top:I,advance:O}=o.readMessage(S0,{});n.push({id:p,bitmap:new Ap({width:x+6,height:w+6},_),metrics:{width:x,height:w,left:C,top:I,advance:O}})}}function S0(s,n,o){s===1?n.id=o.readVarint():s===2?n.bitmap=o.readBytes():s===3?n.width=o.readVarint():s===4?n.height=o.readVarint():s===5?n.left=o.readSVarint():s===6?n.top=o.readSVarint():s===7&&(n.advance=o.readVarint())}function Yy(s){let n=0,o=0;for(const w of s)n+=w.w*w.h,o=Math.max(o,w.w);s.sort(((w,C)=>C.h-w.h));const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),o),h:1/0}];let _=0,x=0;for(const w of s)for(let C=p.length-1;C>=0;C--){const I=p[C];if(!(w.w>I.w||w.h>I.h)){if(w.x=I.x,w.y=I.y,x=Math.max(x,w.y+w.h),_=Math.max(_,w.x+w.w),w.w===I.w&&w.h===I.h){const O=p.pop();O&&C<p.length&&(p[C]=O)}else w.h===I.h?(I.x+=w.w,I.w-=w.w):w.w===I.w?(I.y+=w.h,I.h-=w.h):(p.push({x:I.x+w.w,y:I.y,w:I.w-w.w,h:w.h}),I.y+=w.h,I.h-=w.h);break}}return{w:_,h:x,fill:n/(_*x)||0}}class Hi{constructor(n,{pixelRatio:o,version:p,stretchX:_,stretchY:x,content:w,textFitWidth:C,textFitHeight:I}){this.paddedRect=n,this.pixelRatio=o,this.stretchX=_,this.stretchY=x,this.content=w,this.version=p,this.textFitWidth=C,this.textFitHeight=I}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class gg{constructor(n,o){const p={},_={};this.haveRenderCallbacks=[];const x=[];this.addImages(n,p,x),this.addImages(o,_,x);const{w,h:C}=Yy(x),I=new No({width:w||1,height:C||1});for(const O in n){const j=n[O],V=p[O].paddedRect;No.copy(j.data,I,{x:0,y:0},{x:V.x+1,y:V.y+1},j.data)}for(const O in o){const j=o[O],V=_[O].paddedRect,G=V.x+1,H=V.y+1,te=j.data.width,ne=j.data.height;No.copy(j.data,I,{x:0,y:0},{x:G,y:H},j.data),No.copy(j.data,I,{x:0,y:ne-1},{x:G,y:H-1},{width:te,height:1}),No.copy(j.data,I,{x:0,y:0},{x:G,y:H+ne},{width:te,height:1}),No.copy(j.data,I,{x:te-1,y:0},{x:G-1,y:H},{width:1,height:ne}),No.copy(j.data,I,{x:0,y:0},{x:G+te,y:H},{width:1,height:ne})}this.image=I,this.iconPositions=p,this.patternPositions=_}addImages(n,o,p){for(const _ in n){const x=n[_],w={x:0,y:0,w:x.data.width+2,h:x.data.height+2};p.push(w),o[_]=new Hi(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(n,o){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in n.updatedImages)this.patchUpdatedImage(this.iconPositions[p],n.getImage(p),o),this.patchUpdatedImage(this.patternPositions[p],n.getImage(p),o)}patchUpdatedImage(n,o,p){if(!n||!o||n.version===o.version)return;n.version=o.version;const[_,x]=n.tl;p.update(o.data,void 0,{x:_,y:x})}}var qh;function Up(s,n,o,p,_,x,w,C,I,O,j,V,G,H,te){const ne=qd.fromFeature(s,_);let re;V===m.az.vertical&&ne.verticalizePunctuation();let ue=ne.determineLineBreaks(O,x,n,p,H);const{processBidirectionalText:Ce,processStyledBidirectionalText:fe}=As;if(Ce&&ne.sections.length===1){re=[],ue=ue.map((Qe=>ne.toCodeUnitIndex(Qe)));const Le=Ce(ne.toString(),ue);for(const Qe of Le){const bt=[...Qe].map((()=>0));re.push(new qd(Qe,ne.sections,bt))}}else if(fe){re=[],ue=ue.map((ft=>ne.toCodeUnitIndex(ft)));let Le=0;const Qe=[];for(const ft of ne.text)Qe.push(...Array(ft.length).fill(ne.sectionIndex[Le])),Le++;const bt=fe(ne.text,Qe,ue);for(const ft of bt){const St=[];let Vt="";for(const Et of ft[0])St.push(ft[1][Vt.length]),Vt+=Et;re.push(new qd(ft[0],ne.sections,St))}}else re=(function(Le,Qe){const bt=[];let ft=0;for(const St of Qe)bt.push(Le.substring(ft,St)),ft=St;return ft<Le.length()&&bt.push(Le.substring(ft,Le.length())),bt})(ne,ue);const ye=[],Ie={positionedLines:ye,text:ne.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:V,iconsInText:!1,verticalizable:!1};return(function(Le,Qe,bt,ft,St,Vt,Et,yt,ct,tn,Kt,nn){let Ht=0,pn=0,Ti=0,ni=0;const Or=yt==="right"?1:yt==="left"?0:.5,Fo=wa/nn;let La=0;for(const Fi of St){Fi.trim();const Jr=Fi.getMaxScale(),oa={positionedGlyphs:[],lineOffset:0};Le.positionedLines[La]=oa;const vr=oa.positionedGlyphs;let fl=0;if(!Fi.length()){pn+=Vt,++La;continue}const Uo=D1(ft,Fi,Fo);let pl=0;for(const mo of Fi.text){const Vr=Fi.getSection(pl),Ra=mo.codePointAt(0),Qr=yg(ct,Kt,Ra),go={glyph:Ra,imageName:null,x:Ht,y:pn+-17,vertical:Qr,scale:1,fontStack:"",sectionIndex:Fi.getSectionIndex(pl),metrics:null,rect:null};let Xd;if("fontStack"in Vr){if(Xd=$f(Vr,Ra,Qr,Uo,Qe,bt),!Xd)continue;go.fontStack=Vr.fontStack}else{if(Le.iconsInText=!0,Vr.scale*=Fo,Xd=Jy(Vr,Qr,Jr,Uo,ft),!Xd)continue;fl=Math.max(fl,Xd.imageOffset),go.imageName=Vr.imageName}const{rect:ah,metrics:P_,baselineOffset:Wf}=Xd;go.y+=Wf,go.scale=Vr.scale,go.metrics=P_,go.rect=ah,vr.push(go),Qr?(Le.verticalizable=!0,Ht+=("imageName"in Vr?P_.advance:wa)*Vr.scale+tn):Ht+=P_.advance*Vr.scale+tn,pl++}vr.length!==0&&(Ti=Math.max(Ht-tn,Ti),_g(vr,0,vr.length-1,Or)),Ht=0,oa.lineOffset=Math.max(fl,(Jr-1)*wa);const pu=Vt*Jr+fl;pn+=pu,ni=Math.max(pu,ni),++La}const{horizontalAlign:Nr,verticalAlign:Tr}=Ky(Et);(function(Fi,Jr,oa,vr,fl,Uo,pl,pu,mo){const Vr=(Jr-oa)*fl;let Ra=0;Ra=Uo!==pl?-pu*vr- -17:-vr*mo*pl+.5*pl;for(const Qr of Fi)for(const go of Qr.positionedGlyphs)go.x+=Vr,go.y+=Ra})(Le.positionedLines,Or,Nr,Tr,Ti,ni,Vt,pn,St.length),Le.top+=-Tr*pn,Le.bottom=Le.top+pn,Le.left+=-Nr*Ti,Le.right=Le.left+Ti})(Ie,n,o,p,re,w,C,I,V,O,G,te),!(function(Le){for(const Qe of Le)if(Qe.positionedGlyphs.length!==0)return!1;return!0})(ye)&&Ie}function Ky(s){let n=.5,o=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:n,verticalAlign:o}}function D1(s,n,o){const p=n.getMaxScale()*wa,{maxImageWidth:_,maxImageHeight:x}=n.getMaxImageSize(s),w=Math.max(p,x*o);return{verticalLineContentWidth:Math.max(p,_*o),horizontalLineContentHeight:w}}function T0(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function yg(s,n,o){return!(s===m.az.horizontal||!n&&!Nu(o)||n&&(Cd(o)||(p=o,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(p)))));var p}function $f(s,n,o,p,_,x){const w=x[s.fontStack],C=(function(O,j,V,G){if(O&&O.rect)return O;const H=j[V.fontStack],te=H&&H[G];return te?{rect:null,metrics:te.metrics}:null})(w&&w[n],_,s,n);if(C===null)return null;let I;if(o)I=p.verticalLineContentWidth-s.scale*wa;else{const O=T0(s.verticalAlign);I=(p.horizontalLineContentHeight-s.scale*wa)*O}return{rect:C.rect,metrics:C.metrics,baselineOffset:I}}function Jy(s,n,o,p,_){const x=_[s.imageName];if(!x)return null;const w=x.paddedRect,C=x.displaySize,I={width:C[0],height:C[1],left:1,top:-3,advance:n?C[1]:C[0]};let O;if(n)O=p.verticalLineContentWidth-C[1]*s.scale;else{const j=T0(s.verticalAlign);O=(p.horizontalLineContentHeight-C[1]*s.scale)*j}return{rect:w,metrics:I,baselineOffset:O,imageOffset:(n?C[0]:C[1])*s.scale-wa*o}}function _g(s,n,o,p){if(p===0)return;const _=s[o],x=(s[o].x+_.metrics.advance*_.scale)*p;for(let w=n;w<=o;w++)s[w].x-=x}function Qy(s,n,o){const{horizontalAlign:p,verticalAlign:_}=Ky(o),x=n[0]-s.displaySize[0]*p,w=n[1]-s.displaySize[1]*_;return{image:s,top:w,bottom:w+s.displaySize[1],left:x,right:x+s.displaySize[0]}}function eh(s){var n,o;let p=s.left,_=s.top,x=s.right-p,w=s.bottom-_;const C=(n=s.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",I=(o=s.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",O=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(I==="proportional"){if(C==="stretchOnly"&&x/w<O||C==="proportional"){const j=Math.ceil(w*O);p*=j/x,x=j}}else if(C==="proportional"&&I==="stretchOnly"&&O!==0&&x/w>O){const j=Math.ceil(x/O);_*=j/w,w=j}return{x1:p,y1:_,x2:p+x,y2:_+w}}function Cc(s,n,o,p,_,x){const w=s.image;let C;if(w.content){const re=w.content,ue=w.pixelRatio||1;C=[re[0]/ue,re[1]/ue,w.displaySize[0]-re[2]/ue,w.displaySize[1]-re[3]/ue]}const I=n.left*x,O=n.right*x;let j,V,G,H;o==="width"||o==="both"?(H=_[0]+I-p[3],V=_[0]+O+p[1]):(H=_[0]+(I+O-w.displaySize[0])/2,V=H+w.displaySize[0]);const te=n.top*x,ne=n.bottom*x;return o==="height"||o==="both"?(j=_[1]+te-p[0],G=_[1]+ne+p[2]):(j=_[1]+(te+ne-w.displaySize[1])/2,G=j+w.displaySize[1]),{image:w,top:j,right:V,bottom:G,left:H,collisionPadding:C}}Yt("ImagePosition",Hi),Yt("ImageAtlas",gg),m.az=void 0,(qh=m.az||(m.az={}))[qh.none=0]="none",qh[qh.horizontal=1]="horizontal",qh[qh.vertical=2]="vertical",qh[qh.horizontalOnly=3]="horizontalOnly";const hl=128,Gh=32640;function e_(s,n){const{expression:o}=n;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Ri(s+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:_}=o;let x=0;for(;x<p.length&&p[x]<=s;)x++;x=Math.max(0,x-1);let w=x;for(;w<p.length&&p[w]<s+1;)w++;w=Math.min(p.length-1,w);const C=p[x],I=p[w];return o.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:I,interpolationType:_}:{kind:"camera",minZoom:C,maxZoom:I,minSize:o.evaluate(new Ri(C)),maxSize:o.evaluate(new Ri(I)),interpolationType:_}}}function vg(s,n,o){let p="never";const _=s.get(n);return _?p=_:s.get(o)&&(p="always"),p}const E0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Vp(s,n,o,p,_,x,w,C,I,O,j,V,G){const H=C?Math.min(Gh,Math.round(C[0])):0,te=C?Math.min(Gh,Math.round(C[1])):0;s.emplaceBack(n,o,Math.round(32*p),Math.round(32*_),x,w,(H<<1)+(I?1:0),te,16*O,16*j,256*V,256*G)}function t_(s,n,o){s.emplaceBack(n.x,n.y,o),s.emplaceBack(n.x,n.y,o),s.emplaceBack(n.x,n.y,o),s.emplaceBack(n.x,n.y,o)}function n_(s){for(const n of s.sections)if(_c(n.text))return!0;return!1}class bg{constructor(n){this.layoutVertexArray=new ze,this.indexArray=new at,this.programConfigurations=n,this.segments=new Ut,this.dynamicLayoutVertexArray=new Ve,this.opacityVertexArray=new st,this.hasVisibleVertices=!1,this.placedSymbolArray=new M}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,o,p,_){this.isEmpty()||(p&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,d0.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,jp.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,E0,!0),this.opacityVertexBuffer.itemSize=1),(p||_)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Yt("SymbolBuffers",bg);class xg{constructor(n,o,p){this.layoutVertexArray=new n,this.layoutAttributes=o,this.indexArray=new p,this.segments=new Ut,this.collisionVertexArray=new rt}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Hy.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Yt("CollisionBuffers",xg);class jf{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((w=>w.id)),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=e_(this.zoom,o["text-size"]),this.iconSizeData=e_(this.zoom,o["icon-size"]);const p=this.layers[0].layout,_=p.get("symbol-sort-key"),x=p.get("symbol-z-order");this.canOverlap=vg(p,"text-overlap","text-allow-overlap")!=="never"||vg(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map((w=>m.az[w]))),this.stateDependentLayerIds=this.layers.filter((w=>w.isStateDependent())).map((w=>w.id)),this.sourceID=n.sourceID}createArrays(){this.text=new bg(new ou(this.layers,this.zoom,(n=>/^text/.test(n)))),this.icon=new bg(new ou(this.layers,this.zoom,(n=>/^icon/.test(n)))),this.glyphOffsetArray=new F,this.lineVertexArray=new q,this.symbolInstances=new N,this.textAnchorOffsets=new W}calculateGlyphDependencies(n,o,p,_,x){for(const w of n)if(o[w.codePointAt(0)]=!0,(p||_)&&x){const C=Lf[w];C&&(o[C.codePointAt(0)]=!0)}}populate(n,o,p){const _=this.layers[0],x=_.layout,w=x.get("text-font"),C=x.get("text-field"),I=x.get("icon-image"),O=(C.value.kind!=="constant"||C.value.value instanceof Hr&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),j=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,V=x.get("symbol-sort-key");if(this.features=[],!O&&!j)return;const G=o.iconDependencies,H=o.glyphDependencies,te=o.availableImages,ne=new Ri(this.zoom);for(const{feature:re,id:ue,index:Ce,sourceLayerIndex:fe}of n){const ye=_._featureFilter.needGeometry,Ie=cl(re,ye);if(!_._featureFilter.filter(ne,Ie,p))continue;let Le,Qe;if(ye||(Ie.geometry=Tc(re)),O){const ft=_.getValueAndResolveTokens("text-field",Ie,p,te),St=Hr.factory(ft),Vt=this.hasRTLText=this.hasRTLText||n_(St);(!Vt||As.getRTLTextPluginStatus()==="unavailable"||Vt&&As.isParsed())&&(Le=Rs(St,_,Ie))}if(j){const ft=_.getValueAndResolveTokens("icon-image",Ie,p,te);Qe=ft instanceof ma?ft:ma.fromString(ft)}if(!Le&&!Qe)continue;const bt=this.sortFeaturesByKey?V.evaluate(Ie,{},p):void 0;if(this.features.push({id:ue,text:Le,icon:Qe,index:Ce,sourceLayerIndex:fe,geometry:Ie.geometry,properties:re.properties,type:kf.types[re.type],sortKey:bt}),Qe&&(G[Qe.name]=!0),Le){const ft=w.evaluate(Ie,{},p).join(","),St=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.az.vertical)>=0;for(const Vt of Le.sections)if(Vt.image)G[Vt.image.name]=!0;else{const Et=$l(Le.toString()),yt=Vt.fontStack||ft,ct=H[yt]=H[yt]||{};this.calculateGlyphDependencies(Vt.text,ct,St,this.allowVerticalPlacement,Et)}}}x.get("symbol-placement")==="line"&&(this.features=(function(re){const ue={},Ce={},fe=[];let ye=0;function Ie(ft){fe.push(re[ft]),ye++}function Le(ft,St,Vt){const Et=Ce[ft];return delete Ce[ft],Ce[St]=Et,fe[Et].geometry[0].pop(),fe[Et].geometry[0]=fe[Et].geometry[0].concat(Vt[0]),Et}function Qe(ft,St,Vt){const Et=ue[St];return delete ue[St],ue[ft]=Et,fe[Et].geometry[0].shift(),fe[Et].geometry[0]=Vt[0].concat(fe[Et].geometry[0]),Et}function bt(ft,St,Vt){const Et=Vt?St[0][St[0].length-1]:St[0][0];return`${ft}:${Et.x}:${Et.y}`}for(let ft=0;ft<re.length;ft++){const St=re[ft],Vt=St.geometry,Et=St.text?St.text.toString():null;if(!Et){Ie(ft);continue}const yt=bt(Et,Vt),ct=bt(Et,Vt,!0);if(yt in Ce&&ct in ue&&Ce[yt]!==ue[ct]){const tn=Qe(yt,ct,Vt),Kt=Le(yt,ct,fe[tn].geometry);delete ue[yt],delete Ce[ct],Ce[bt(Et,fe[Kt].geometry,!0)]=Kt,fe[tn].geometry=null}else yt in Ce?Le(yt,ct,Vt):ct in ue?Qe(yt,ct,Vt):(Ie(ft),ue[yt]=ye-1,Ce[ct]=ye-1)}return fe.filter((ft=>ft.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((re,ue)=>re.sortKey-ue.sortKey))}update(n,o,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,o,this.layers,{imagePositions:p}),this.icon.programConfigurations.updatePaintArrays(n,o,this.layers,{imagePositions:p}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,o){const p=this.lineVertexArray.length;if(n.segment!==void 0){let _=n.dist(o[n.segment+1]),x=n.dist(o[n.segment]);const w={};for(let C=n.segment+1;C<o.length;C++)w[C]={x:o[C].x,y:o[C].y,tileUnitDistanceFromAnchor:_},C<o.length-1&&(_+=o[C+1].dist(o[C]));for(let C=n.segment||0;C>=0;C--)w[C]={x:o[C].x,y:o[C].y,tileUnitDistanceFromAnchor:x},C>0&&(x+=o[C-1].dist(o[C]));for(let C=0;C<o.length;C++){const I=w[C];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(n,o,p,_,x,w,C,I,O,j,V,G){const H=n.indexArray,te=n.layoutVertexArray,ne=n.segments.prepareSegment(4*o.length,te,H,this.canOverlap?w.sortKey:void 0),re=this.glyphOffsetArray.length,ue=ne.vertexLength,Ce=this.allowVerticalPlacement&&C===m.az.vertical?Math.PI/2:0,fe=w.text&&w.text.sections;for(let ye=0;ye<o.length;ye++){const{tl:Ie,tr:Le,bl:Qe,br:bt,tex:ft,pixelOffsetTL:St,pixelOffsetBR:Vt,minFontScaleX:Et,minFontScaleY:yt,glyphOffset:ct,isSDF:tn,sectionIndex:Kt}=o[ye],nn=ne.vertexLength,Ht=ct[1];Vp(te,I.x,I.y,Ie.x,Ht+Ie.y,ft.x,ft.y,p,tn,St.x,St.y,Et,yt),Vp(te,I.x,I.y,Le.x,Ht+Le.y,ft.x+ft.w,ft.y,p,tn,Vt.x,St.y,Et,yt),Vp(te,I.x,I.y,Qe.x,Ht+Qe.y,ft.x,ft.y+ft.h,p,tn,St.x,Vt.y,Et,yt),Vp(te,I.x,I.y,bt.x,Ht+bt.y,ft.x+ft.w,ft.y+ft.h,p,tn,Vt.x,Vt.y,Et,yt),t_(n.dynamicLayoutVertexArray,I,Ce),H.emplaceBack(nn,nn+2,nn+1),H.emplaceBack(nn+1,nn+2,nn+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ct[0]),ye!==o.length-1&&Kt===o[ye+1].sectionIndex||n.programConfigurations.populatePaintArrays(te.length,w,w.index,{imagePositions:{},canonical:G,formattedSection:fe&&fe[Kt]})}n.placedSymbolArray.emplaceBack(I.x,I.y,re,this.glyphOffsetArray.length-re,ue,O,j,I.segment,p?p[0]:0,p?p[1]:0,_[0],_[1],C,0,!1,0,V)}_addCollisionDebugVertex(n,o,p,_,x,w){return o.emplaceBack(0,0),n.emplaceBack(p.x,p.y,_,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(n,o,p,_,x,w,C){const I=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),O=I.vertexLength,j=x.layoutVertexArray,V=x.collisionVertexArray,G=C.anchorX,H=C.anchorY;this._addCollisionDebugVertex(j,V,w,G,H,new z(n,o)),this._addCollisionDebugVertex(j,V,w,G,H,new z(p,o)),this._addCollisionDebugVertex(j,V,w,G,H,new z(p,_)),this._addCollisionDebugVertex(j,V,w,G,H,new z(n,_)),I.vertexLength+=4;const te=x.indexArray;te.emplaceBack(O,O+1),te.emplaceBack(O+1,O+2),te.emplaceBack(O+2,O+3),te.emplaceBack(O+3,O),I.primitiveLength+=4}addDebugCollisionBoxes(n,o,p,_){for(let x=n;x<o;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,_?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new xg(Je,Ls.members,Dt),this.iconCollisionBox=new xg(Je,Ls.members,Dt);for(let n=0;n<this.symbolInstances.length;n++){const o=this.symbolInstances.get(n);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(n,o,p,_,x,w,C,I,O){const j={};for(let V=o;V<p;V++){const G=n.get(V);j.textBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},j.textFeatureIndex=G.featureIndex;break}for(let V=_;V<x;V++){const G=n.get(V);j.verticalTextBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},j.verticalTextFeatureIndex=G.featureIndex;break}for(let V=w;V<C;V++){const G=n.get(V);j.iconBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},j.iconFeatureIndex=G.featureIndex;break}for(let V=I;V<O;V++){const G=n.get(V);j.verticalIconBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},j.verticalIconFeatureIndex=G.featureIndex;break}return j}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const p=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,o){const p=n.placedSymbolArray.get(o),_=p.vertexStartIndex+4*p.numGlyphs;for(let x=p.vertexStartIndex;x<_;x+=4)n.indexArray.emplaceBack(x,x+2,x+1),n.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(n),p=Math.cos(n),_=[],x=[],w=[];for(let C=0;C<this.symbolInstances.length;++C){w.push(C);const I=this.symbolInstances.get(C);_.push(0|Math.round(o*I.anchorX+p*I.anchorY)),x.push(I.featureIndex)}return w.sort(((C,I)=>_[C]-_[I]||x[I]-x[C])),w}addToSortKeyRanges(n,o){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===o?p.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const p=this.symbolInstances.get(o);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(((_,x,w)=>{_>=0&&w.indexOf(_)===x&&this.addIndicesForPlacedSymbol(this.text,_)})),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let wg,Sg;Yt("SymbolBucket",jf,{omit:["layers","collisionBoxArray","features","compareText"]}),jf.MAX_GLYPHS=65535,jf.addDynamicAttributes=t_;var i_={get paint(){return Sg=Sg||new Fr({"icon-opacity":new on(Ke.paint_symbol["icon-opacity"]),"icon-color":new on(Ke.paint_symbol["icon-color"]),"icon-halo-color":new on(Ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new on(Ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new on(Ke.paint_symbol["icon-halo-blur"]),"icon-translate":new en(Ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new en(Ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new on(Ke.paint_symbol["text-opacity"]),"text-color":new on(Ke.paint_symbol["text-color"],{runtimeType:Ya,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new on(Ke.paint_symbol["text-halo-color"]),"text-halo-width":new on(Ke.paint_symbol["text-halo-width"]),"text-halo-blur":new on(Ke.paint_symbol["text-halo-blur"]),"text-translate":new en(Ke.paint_symbol["text-translate"]),"text-translate-anchor":new en(Ke.paint_symbol["text-translate-anchor"])})},get layout(){return wg=wg||new Fr({"symbol-placement":new en(Ke.layout_symbol["symbol-placement"]),"symbol-spacing":new en(Ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new en(Ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new on(Ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new en(Ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new en(Ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new en(Ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new en(Ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new en(Ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new en(Ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new on(Ke.layout_symbol["icon-size"]),"icon-text-fit":new en(Ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new en(Ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new on(Ke.layout_symbol["icon-image"]),"icon-rotate":new on(Ke.layout_symbol["icon-rotate"]),"icon-padding":new on(Ke.layout_symbol["icon-padding"]),"icon-keep-upright":new en(Ke.layout_symbol["icon-keep-upright"]),"icon-offset":new on(Ke.layout_symbol["icon-offset"]),"icon-anchor":new on(Ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new en(Ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new en(Ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new en(Ke.layout_symbol["text-rotation-alignment"]),"text-field":new on(Ke.layout_symbol["text-field"]),"text-font":new on(Ke.layout_symbol["text-font"]),"text-size":new on(Ke.layout_symbol["text-size"]),"text-max-width":new on(Ke.layout_symbol["text-max-width"]),"text-line-height":new en(Ke.layout_symbol["text-line-height"]),"text-letter-spacing":new on(Ke.layout_symbol["text-letter-spacing"]),"text-justify":new on(Ke.layout_symbol["text-justify"]),"text-radial-offset":new on(Ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new en(Ke.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new on(Ke.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new on(Ke.layout_symbol["text-anchor"]),"text-max-angle":new en(Ke.layout_symbol["text-max-angle"]),"text-writing-mode":new en(Ke.layout_symbol["text-writing-mode"]),"text-rotate":new on(Ke.layout_symbol["text-rotate"]),"text-padding":new en(Ke.layout_symbol["text-padding"]),"text-keep-upright":new en(Ke.layout_symbol["text-keep-upright"]),"text-transform":new on(Ke.layout_symbol["text-transform"]),"text-offset":new on(Ke.layout_symbol["text-offset"]),"text-allow-overlap":new en(Ke.layout_symbol["text-allow-overlap"]),"text-overlap":new en(Ke.layout_symbol["text-overlap"]),"text-ignore-placement":new en(Ke.layout_symbol["text-ignore-placement"]),"text-optional":new en(Ke.layout_symbol["text-optional"])})}};class A0{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Li,this.defaultValue=n}evaluate(n){if(n.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(n.formattedSection))return o.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Yt("FormatSectionOverride",A0,{omit:["defaultValue"]});class Hh extends wr{constructor(n,o){super(n,i_,o)}recalculate(n,o){if(super.recalculate(n,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const _=[];for(const x of p)_.indexOf(x)<0&&_.push(x);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,o,p,_){const x=this.layout.get(n).evaluate(o,{},p,_),w=this._unevaluatedLayout._values[n];return w.isDataDriven()||Ll(w.value)||!x?x:(function(C,I){return I.replace(/{([^{}]+)}/g,((O,j)=>C&&j in C?String(C[j]):""))})(o.properties,x)}createBucket(n){return new jf(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of i_.paint.overridableProperties){if(!Hh.hasPaintOverride(this.layout,n))continue;const o=this.paint.get(n),p=new A0(o),_=new Ru(p,o.property.specification);let x=null;x=o.value.kind==="constant"||o.value.kind==="source"?new T("source",_):new P("composite",_,o.value.zoomStops),this.paint._values[n]=new rs(o.property,x,o.parameters)}}_handleOverridablePaintPropertyUpdate(n,o,p){return!(!this.layout||o.isDataDriven()||p.isDataDriven())&&Hh.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,o){const p=n.get("text-field"),_=i_.paint.properties[o];let x=!1;const w=C=>{for(const I of C)if(_.overrides&&_.overrides.hasOverride(I))return void(x=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Hr)w(p.value.value.sections);else if(p.value.kind==="source"||p.value.kind==="composite"){const C=O=>{x||(O instanceof to&&Un(O.value)===Zo?w(O.value.sections):O instanceof zu?w(O.sections):O.eachChild(C))},I=p.value;I._styleExpression&&C(I._styleExpression.expression)}return x}}let C0;var M0={get paint(){return C0=C0||new Fr({"background-color":new en(Ke.paint_background["background-color"]),"background-pattern":new Nh(Ke.paint_background["background-pattern"]),"background-opacity":new en(Ke.paint_background["background-opacity"])})}};class yi extends wr{constructor(n,o){super(n,M0,o)}}class r_ extends wr{constructor(n,o){super(n,{},o),this.onAdd=p=>{this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},this.onRemove=p=>{this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Tg{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const a_={once:!0},Eg=63710088e-1;class du{constructor(n,o){if(isNaN(n)||isNaN(o))throw new Error(`Invalid LngLat object: (${n}, ${o})`);if(this.lng=+n,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new du(At(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const o=Math.PI/180,p=this.lat*o,_=n.lat*o,x=Math.sin(p)*Math.sin(_)+Math.cos(p)*Math.cos(_)*Math.cos((n.lng-this.lng)*o);return Eg*Math.acos(Math.min(x,1))}static convert(n){if(n instanceof du)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new du(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new du(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Bf=2*Math.PI*Eg;function Zp(s){return Bf*Math.cos(s*Math.PI/180)}function z0(s){return(180+s)/360}function o_(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function I0(s,n){return s/Zp(n)}function k0(s){return 360*s-180}function qp(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function s_(s,n){return s*Zp(qp(n))}class ji{constructor(n,o,p=0){this.x=+n,this.y=+o,this.z=+p}static fromLngLat(n,o=0){const p=du.convert(n);return new ji(z0(p.lng),o_(p.lat),I0(o,p.lat))}toLngLat(){return new du(k0(this.x),qp(this.y))}toAltitude(){return s_(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Bf*(n=qp(this.y),1/Math.cos(n*Math.PI/180));var n}}function Ag(s,n,o){var p=2*Math.PI*6378137/256/Math.pow(2,o);return[s*p-2*Math.PI*6378137/2,n*p-2*Math.PI*6378137/2]}class Wa{constructor(n,o,p){if(!(function(_,x,w){return!(_<0||_>25||w<0||w>=Math.pow(2,_)||x<0||x>=Math.pow(2,_))})(n,o,p))throw new Error(`x=${o}, y=${p}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=o,this.y=p,this.key=Ff(0,n,n,o,p)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,o,p){const _=(function(w,C,I){var O=Ag(256*w,256*(C=Math.pow(2,I)-C-1),I),j=Ag(256*(w+1),256*(C+1),I);return O[0]+","+O[1]+","+j[0]+","+j[1]})(this.x,this.y,this.z),x=(function(w,C,I){let O,j="";for(let V=w;V>0;V--)O=1<<V-1,j+=(C&O?1:0)+(I&O?2:0);return j})(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,x).replace(/{bbox-epsg-3857}/g,_)}isChildOf(n){const o=this.z-n.z;return o>0&&n.x===this.x>>o&&n.y===this.y>>o}getTilePoint(n){const o=Math.pow(2,this.z);return new z((n.x*o-this.x)*Bt,(n.y*o-this.y)*Bt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class P0{constructor(n,o){this.wrap=n,this.canonical=o,this.key=Ff(n,o.z,o.z,o.x,o.y)}}class Os{constructor(n,o,p,_,x){if(this.terrainRttPosMatrix32f=null,n<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${p}`);this.overscaledZ=n,this.wrap=o,this.canonical=new Wa(p,+_,+x),this.key=Ff(o,n,p,_,x)}clone(){return new Os(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-n;return n>this.canonical.z?new Os(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Os(n,this.wrap,n,this.canonical.x>>o,this.canonical.y>>o)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(n,o){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-n;return n>this.canonical.z?Ff(this.wrap*+o,n,this.canonical.z,this.canonical.x,this.canonical.y):Ff(this.wrap*+o,n,n,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(n){if(n.wrap!==this.wrap||this.overscaledZ-n.overscaledZ<=0)return!1;if(n.overscaledZ===0)return this.overscaledZ>0;const o=this.canonical.z-n.canonical.z;return!(o<0)&&n.canonical.x===this.canonical.x>>o&&n.canonical.y===this.canonical.y>>o}children(n){if(this.overscaledZ>=n)return[new Os(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,p=2*this.canonical.x,_=2*this.canonical.y;return[new Os(o,this.wrap,o,p,_),new Os(o,this.wrap,o,p+1,_),new Os(o,this.wrap,o,p,_+1),new Os(o,this.wrap,o,p+1,_+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Os(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Os(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new P0(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new ji(n.x-this.wrap,n.y))}}function Ff(s,n,o,p,_){(s*=2)<0&&(s=-1*s-1);const x=1<<o;return(x*x*s+x*_+p).toString(36)+o.toString(36)+n.toString(36)}function Gp(s,n){return n?s.properties[n]:s.id}function l_(s,n){const o={id:s.id};if(n.removeAllProperties&&(delete s.removeProperties,delete s.addOrUpdateProperties,delete n.removeProperties),n.removeProperties)for(const p of n.removeProperties){const _=s.addOrUpdateProperties.findIndex((x=>x.key===p));_>-1&&s.addOrUpdateProperties.splice(_,1)}return(s.removeAllProperties||n.removeAllProperties)&&(o.removeAllProperties=!0),(s.removeProperties||n.removeProperties)&&(o.removeProperties=[...s.removeProperties||[],...n.removeProperties||[]]),(s.addOrUpdateProperties||n.addOrUpdateProperties)&&(o.addOrUpdateProperties=[...s.addOrUpdateProperties||[],...n.addOrUpdateProperties||[]]),(s.newGeometry||n.newGeometry)&&(o.newGeometry=n.newGeometry||s.newGeometry),o}function Hp(s){var n,o;if(!s)return{};const p={};return p.removeAll=s.removeAll,p.remove=new Set(s.remove||[]),p.add=new Map((n=s.add)===null||n===void 0?void 0:n.map((_=>[_.id,_]))),p.update=new Map((o=s.update)===null||o===void 0?void 0:o.map((_=>[_.id,_]))),p}Yt("CanonicalTileID",Wa),Yt("OverscaledTileID",Os,{omit:["terrainRttPosMatrix32f"]});class Wh{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(n){return this.minX=Math.min(this.minX,n.x),this.minY=Math.min(this.minY,n.y),this.maxX=Math.max(this.maxX,n.x),this.maxY=Math.max(this.maxY,n.y),this}expandBy(n){return this.minX-=n,this.minY-=n,this.maxX+=n,this.maxY+=n,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(n){return this.expandBy(-n)}map(n){const o=new Wh;return o.extend(n(new z(this.minX,this.minY))),o.extend(n(new z(this.maxX,this.minY))),o.extend(n(new z(this.minX,this.maxY))),o.extend(n(new z(this.maxX,this.maxY))),o}static fromPoints(n){const o=new Wh;for(const p of n)o.extend(p);return o}contains(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(n){return!this.empty()&&!n.empty()&&n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY}intersects(n){return!this.empty()&&!n.empty()&&n.minX<=this.maxX&&n.maxX>=this.minX&&n.minY<=this.maxY&&n.maxY>=this.minY}}class c_{constructor(n){this._stringToNumber={},this._numberToString=[];for(let o=0;o<n.length;o++){const p=n[o];this._stringToNumber[p]=o,this._numberToString[o]=p}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Cg{constructor(n,o,p,_,x){this.type="Feature",this._vectorTileFeature=n,this._x=p,this._y=_,this._z=o,this.properties=n.properties,this.id=x}projectPoint(n,o,p,_){return[360*(n.x+o)/_-180,360/Math.PI*Math.atan(Math.exp((1-2*(n.y+p)/_)*Math.PI))-90]}projectLine(n,o,p,_){return n.map((x=>this.projectPoint(x,o,p,_)))}get geometry(){if(this._geometry)return this._geometry;const n=this._vectorTileFeature,o=n.extent*Math.pow(2,this._z),p=n.extent*this._x,_=n.extent*this._y,x=n.loadGeometry();switch(n.type){case 1:{const w=[];for(const I of x)w.push(I[0]);const C=this.projectLine(w,p,_,o);this._geometry=w.length===1?{type:"Point",coordinates:C[0]}:{type:"MultiPoint",coordinates:C};break}case 2:{const w=x.map((C=>this.projectLine(C,p,_,o)));this._geometry=w.length===1?{type:"LineString",coordinates:w[0]}:{type:"MultiLineString",coordinates:w};break}case 3:{const w=u0(x),C=[];for(const I of w)C.push(I.map((O=>this.projectLine(O,p,_,o))));this._geometry=C.length===1?{type:"Polygon",coordinates:C[0]}:{type:"MultiPolygon",coordinates:C};break}default:throw new Error(`unknown feature type: ${n.type}`)}return this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&o!=="_x"&&o!=="_y"&&o!=="_z"&&(n[o]=this[o]);return n}}class Xh{_name;dataBuffer;nullabilityBuffer;_size;constructor(n,o,p){this._name=n,this.dataBuffer=o,typeof p=="number"?this._size=p:(this.nullabilityBuffer=p,this._size=p.size())}getValue(n){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(n)?null:this.getValueFromBuffer(n)}has(n){return this.nullabilityBuffer&&this.nullabilityBuffer.get(n)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Mg extends Xh{}class zg extends Mg{getValueFromBuffer(n){return this.dataBuffer[n]}}class u_ extends Mg{getValueFromBuffer(n){return this.dataBuffer[n]}}class h_ extends Xh{delta;constructor(n,o,p,_){super(n,o,_),this.delta=p}}class d_ extends h_{constructor(n,o,p,_){super(n,Int32Array.of(o),p,_)}getValueFromBuffer(n){return this.dataBuffer[0]+n*this.delta}}class f_ extends Xh{constructor(n,o,p){super(n,Int32Array.of(o),p)}getValueFromBuffer(n){return this.dataBuffer[0]}}class Yh{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(n,o,p,_,x=4096){this._name=n,this._geometryVector=o,this._idVector=p,this._propertyVectors=_,this._extent=x}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(n){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((o=>[o.name,o])))),this.propertyVectorsMap.get(n)}*[Symbol.iterator](){const n=this.geometryVector[Symbol.iterator]();let o=0;for(;o<this.numFeatures;){let p;this.idVector&&(p=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(o)):this.idVector.getValue(o));const _=n?.next().value,x={};for(const w of this.propertyVectors){if(!w)continue;const C=w.name,I=w.getValue(o);I!==null&&(x[C]=I)}o++,yield{id:p,geometry:_,properties:x}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const n=[],o=this.geometryVector.getGeometries();for(let p=0;p<this.numFeatures;p++){let _;this.idVector&&(_=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(p)):this.idVector.getValue(p));const x={coordinates:o[p],type:this.geometryVector.geometryType(p)},w={};for(const C of this.propertyVectors){if(!C)continue;const I=C.name,O=C.getValue(p);O!==null&&(w[I]=O)}n.push({id:_,geometry:x,properties:w})}return n}containsMaxSaveIntegerValues(n){return n instanceof zg||n instanceof f_&&n instanceof d_||n instanceof u_}}class D0{value;constructor(n){this.value=n}get(){return this.value}set(n){this.value=n}increment(){return this.value++}add(n){this.value+=n}}var Yn,Mc,fo,zc,Kh,$o,aa,Pa,dl,cs;function Da(s,n,o){const p=new Int32Array(o);let _=0,x=n.get();for(let w=0;w<p.length;w++){let C=s[x++],I=127&C;C<128||(C=s[x++],I|=(127&C)<<7,C<128||(C=s[x++],I|=(127&C)<<14,C<128||(C=s[x++],I|=(127&C)<<21,C<128||(C=s[x++],I|=(15&C)<<28)))),p[_++]=I}return n.set(x),p}function Wp(s,n,o){const p=new BigInt64Array(o);for(let _=0;_<p.length;_++)p[_]=Ig(s,n);return p}function L0(s,n){let o,p;return p=s[n.get()],n.increment(),o=127&p,p<128?o:(p=s[n.get()],n.increment(),o|=(127&p)<<7,p<128?o:(p=s[n.get()],n.increment(),o|=(127&p)<<14,p<128?o:(p=s[n.get()],n.increment(),o|=(127&p)<<21,p<128?o:(p=s[n.get()],o|=(15&p)<<28,(function(_,x,w){let C,I;if(I=x[w.get()],w.increment(),C=(112&I)>>4,I<128||(I=x[w.get()],w.increment(),C|=(127&I)<<3,I<128)||(I=x[w.get()],w.increment(),C|=(127&I)<<10,I<128)||(I=x[w.get()],w.increment(),C|=(127&I)<<17,I<128)||(I=x[w.get()],w.increment(),C|=(127&I)<<24,I<128)||(I=x[w.get()],w.increment(),C|=(1&I)<<31,I<128))return 4294967296*C+(_>>>0);throw new Error("Expected varint not more than 10 bytes")})(o,s,n)))))}function Uf(s,n,o,p){throw new Error("FastPFor is not implemented yet.")}function po(s){return s>>>1^-(1&s)}function Gd(s){return s>>1n^-(1n&s)}function Ig(s,n){let o=0n,p=0,_=n.get();for(;_<s.length;){const x=s[_++];if(o|=BigInt(127&x)<<BigInt(p),!(128&x))break;if(p+=7,p>=64)throw new Error("Varint too long")}return n.set(_),o}function fu(s,n,o){const p=new Int32Array(o);let _=0;for(let x=0;x<n;x++){const w=s[x];p.fill(s[x+n],_,_+w),_+=w}return p}function R0(s,n,o){const p=new BigInt64Array(o);let _=0;for(let x=0;x<n;x++){const w=Number(s[x]);p.fill(s[x+n],_,_+w),_+=w}return p}function O0(s,n,o){const p=new Float64Array(o);let _=0;for(let x=0;x<n;x++){const w=s[x];p.fill(s[x+n],_,_+w),_+=w}return p}function Jh(s){const n=s.length/4*4;let o=1;if(n>=4)for(let p=s[0];o<n-4;o+=4)p=s[o]+=p,p=s[o+1]+=p,p=s[o+2]+=p,p=s[o+3]+=p;for(;o!=s.length;)s[o]+=s[o-1],++o}function p_(s){s[0]=s[0]>>>1^-(1&s[0]),s[1]=s[1]>>>1^-(1&s[1]);const n=s.length/4*4;let o=2;if(n>=4)for(;o<n-4;o+=4){const p=s[o],_=s[o+1],x=s[o+2],w=s[o+3];s[o]=(p>>>1^-(1&p))+s[o-2],s[o+1]=(_>>>1^-(1&_))+s[o-1],s[o+2]=(x>>>1^-(1&x))+s[o],s[o+3]=(w>>>1^-(1&w))+s[o+1]}for(;o!=s.length;o+=2)s[o]=(s[o]>>>1^-(1&s[o]))+s[o-2],s[o+1]=(s[o+1]>>>1^-(1&s[o+1]))+s[o-1]}(function(s){s.NONE="NONE",s.DELTA="DELTA",s.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",s.RLE="RLE",s.MORTON="MORTON",s.PDE="PDE"})(Yn||(Yn={})),(function(s){s.NONE="NONE",s.FAST_PFOR="FAST_PFOR",s.VARINT="VARINT",s.ALP="ALP"})(Mc||(Mc={})),(function(s){s.PRESENT="PRESENT",s.DATA="DATA",s.OFFSET="OFFSET",s.LENGTH="LENGTH"})(fo||(fo={}));class m_{_dictionaryType;_offsetType;_lengthType;constructor(n,o,p){this._dictionaryType=n,this._offsetType=o,this._lengthType=p}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function jo(s,n){const o=(function(p,_){const x=p[_.get()],w=Object.values(fo)[x>>4];let C=null;switch(w){case fo.DATA:C=new m_(Object.values(zc)[15&x]);break;case fo.OFFSET:C=new m_(null,Object.values(Kh)[15&x]);break;case fo.LENGTH:C=new m_(null,null,Object.values($o)[15&x])}_.increment();const I=p[_.get()],O=Object.values(Yn)[I>>5],j=Object.values(Yn)[I>>2&7],V=Object.values(Mc)[3&I];_.increment();const G=Da(p,_,2),H=G[0];return{physicalStreamType:w,logicalStreamType:C,logicalLevelTechnique1:O,logicalLevelTechnique2:j,physicalLevelTechnique:V,numValues:H,byteLength:G[1],decompressedCount:H}})(s,n);return o.logicalLevelTechnique1===Yn.MORTON?(function(p,_,x){const w=Da(_,x,2);return{physicalStreamType:p.physicalStreamType,logicalStreamType:p.logicalStreamType,logicalLevelTechnique1:p.logicalLevelTechnique1,logicalLevelTechnique2:p.logicalLevelTechnique2,physicalLevelTechnique:p.physicalLevelTechnique,numValues:p.numValues,byteLength:p.byteLength,decompressedCount:p.decompressedCount,numBits:w[0],coordinateShift:w[1]}})(o,s,n):Yn.RLE!==o.logicalLevelTechnique1&&Yn.RLE!==o.logicalLevelTechnique2||Mc.NONE===o.physicalLevelTechnique?o:(function(p,_,x){const w=Da(_,x,2);return{physicalStreamType:p.physicalStreamType,logicalStreamType:p.logicalStreamType,logicalLevelTechnique1:p.logicalLevelTechnique1,logicalLevelTechnique2:p.logicalLevelTechnique2,physicalLevelTechnique:p.physicalLevelTechnique,numValues:p.numValues,byteLength:p.byteLength,decompressedCount:w[1],runs:w[0],numRleValues:w[1]}})(o,s,n)}(function(s){s.NONE="NONE",s.SINGLE="SINGLE",s.SHARED="SHARED",s.VERTEX="VERTEX",s.MORTON="MORTON",s.FSST="FSST"})(zc||(zc={})),(function(s){s.VERTEX="VERTEX",s.INDEX="INDEX",s.STRING="STRING",s.KEY="KEY"})(Kh||(Kh={})),(function(s){s.VAR_BINARY="VAR_BINARY",s.GEOMETRIES="GEOMETRIES",s.PARTS="PARTS",s.RINGS="RINGS",s.TRIANGLES="TRIANGLES",s.SYMBOL="SYMBOL",s.DICTIONARY="DICTIONARY"})($o||($o={})),(function(s){s[s.FLAT=0]="FLAT",s[s.CONST=1]="CONST",s[s.SEQUENCE=2]="SEQUENCE",s[s.DICTIONARY=3]="DICTIONARY",s[s.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(aa||(aa={}));class Ic{values;_size;constructor(n,o){this.values=n,this._size=o}get(n){const o=Math.floor(n/8);return(this.values[o]>>n%8&1)==1}set(n,o){const p=Math.floor(n/8);this.values[p]=this.values[p]|(o?1:0)<<n%8}getInt(n){const o=Math.floor(n/8);return this.values[o]>>n%8&1}size(){return this._size}getBuffer(){return this.values}}function Bo(s,n,o,p,_){return(function(x,w,C){switch(w.logicalLevelTechnique1){case Yn.DELTA:return w.logicalLevelTechnique2===Yn.RLE?(function(I,O,j){const V=new Int32Array(j);let G=0,H=0;for(let te=0;te<O;te++){const ne=I[te],re=po(I[te+O]);for(let ue=0;ue<ne;ue++)H+=re,V[G++]=H}return V})(x,w.runs,w.numRleValues):((function(I){I[0]=I[0]>>>1^-(1&I[0]);const O=I.length/4*4;let j=1;if(O>=4)for(;j<O-4;j+=4){const V=I[j],G=I[j+1],H=I[j+2],te=I[j+3];I[j]=(V>>>1^-(1&V))+I[j-1],I[j+1]=(G>>>1^-(1&G))+I[j],I[j+2]=(H>>>1^-(1&H))+I[j+1],I[j+3]=(te>>>1^-(1&te))+I[j+2]}for(;j!=I.length;++j)I[j]=(I[j]>>>1^-(1&I[j]))+I[j-1]})(x),x);case Yn.RLE:return(function(I,O,j){return j?(function(V,G,H){const te=new Int32Array(H);let ne=0;for(let re=0;re<G;re++){const ue=V[re];let Ce=V[re+G];Ce=Ce>>>1^-(1&Ce),te.fill(Ce,ne,ne+ue),ne+=ue}return te})(I,O.runs,O.numRleValues):fu(I,O.runs,O.numRleValues)})(x,w,C);case Yn.MORTON:return Jh(x),x;case Yn.COMPONENTWISE_DELTA:return p_(x),x;case Yn.NONE:return C&&(function(I){for(let O=0;O<I.length;O++){const j=I[O];I[O]=j>>>1^-(1&j)}})(x),x;default:throw new Error(`The specified Logical level technique is not supported: ${w.logicalLevelTechnique1}`)}})(kg(s,n,o),o,p)}function Qh(s,n,o){return(function(p,_){if(_.logicalLevelTechnique1===Yn.DELTA&&_.logicalLevelTechnique2===Yn.NONE)return(function(w){const C=new Int32Array(w.length+1);C[0]=0,C[1]=po(w[0]);let I=C[1],O=2;for(;O!=C.length;++O){const j=w[O-1];I+=j>>>1^-(1&j),C[O]=C[O-1]+I}return C})(p);if(_.logicalLevelTechnique1===Yn.RLE&&_.logicalLevelTechnique2===Yn.NONE)return(function(w,C,I){const O=new Int32Array(I+1);O[0]=0;let j=1,V=O[0];for(let G=0;G<C;G++){const H=w[G],te=w[G+C];for(let ne=j;ne<j+H;ne++)O[ne]=te+V,V=O[ne];j+=H}return O})(p,_.runs,_.numRleValues);if(_.logicalLevelTechnique1===Yn.NONE&&_.logicalLevelTechnique2===Yn.NONE){(function(w){let C=0;for(let I=0;I<w.length;I++)w[I]+=C,C=w[I]})(p);const x=new Int32Array(_.numValues+1);return x[0]=0,x.set(p,1),x}if(_.logicalLevelTechnique1===Yn.DELTA&&_.logicalLevelTechnique2===Yn.RLE){const x=(function(w,C,I){const O=new Int32Array(I+1);O[0]=0;let j=1,V=O[0];for(let G=0;G<C;G++){const H=w[G];let te=w[G+C];te=te>>>1^-(1&te);for(let ne=j;ne<j+H;ne++)O[ne]=te+V,V=O[ne];j+=H}return O})(p,_.runs,_.numRleValues);return Jh(x),x}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(kg(s,n,o),o)}function kg(s,n,o){const p=o.physicalLevelTechnique;if(p===Mc.FAST_PFOR)return Uf();if(p===Mc.VARINT)return Da(s,n,o.numValues);if(p===Mc.NONE){const _=n.get();n.add(o.byteLength);const x=s.subarray(_,n.get());return new Int32Array(x)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function g_(s,n,o,p){const _=kg(s,n,o);if(_.length===1){const x=_[0];return p?po(x):x}return p?(function(x){return po(x[1])})(_):(function(x){return x[1]})(_)}function y_(s,n,o){return(function(p){if(p.length==2){const _=po(p[1]);return[_,_]}return[po(p[2]),po(p[3])]})(kg(s,n,o))}function Hd(s,n,o){return(function(p){if(p.length==2){const _=Gd(p[1]);return[_,_]}return[Gd(p[2]),Gd(p[3])]})(Wp(s,n,o.numValues))}function Vf(s,n,o,p){return(function(_,x,w){switch(x.logicalLevelTechnique1){case Yn.DELTA:return x.logicalLevelTechnique2===Yn.RLE?(function(C,I,O){const j=new BigInt64Array(O);let V=0,G=0n;for(let H=0;H<I;H++){const te=Number(C[H]),ne=Gd(C[H+I]);for(let re=0;re<te;re++)G+=ne,j[V++]=G}return j})(_,x.runs,x.numRleValues):((function(C){C[0]=C[0]>>1n^-(1n&C[0]);const I=C.length/4*4;let O=1;if(I>=4)for(;O<I-4;O+=4){const j=C[O],V=C[O+1],G=C[O+2],H=C[O+3];C[O]=(j>>1n^-(1n&j))+C[O-1],C[O+1]=(V>>1n^-(1n&V))+C[O],C[O+2]=(G>>1n^-(1n&G))+C[O+1],C[O+3]=(H>>1n^-(1n&H))+C[O+2]}for(;O!=C.length;++O)C[O]=(C[O]>>1n^-(1n&C[O]))+C[O-1]})(_),_);case Yn.RLE:return(function(C,I,O){return O?(function(j,V,G){const H=new BigInt64Array(G);let te=0;for(let ne=0;ne<V;ne++){const re=Number(j[ne]);let ue=j[ne+V];ue=ue>>1n^-(1n&ue),H.fill(ue,te,te+re),te+=re}return H})(C,I.runs,I.numRleValues):R0(C,I.runs,I.numRleValues)})(_,x,w);case Yn.NONE:return w&&(function(C){for(let I=0;I<C.length;I++){const O=C[I];C[I]=O>>1n^-(1n&O)}})(_),_;default:throw new Error(`The specified Logical level technique is not supported: ${x.logicalLevelTechnique1}`)}})(Wp(s,n,o.numValues),o,p)}function __(s,n,o,p){const _=Wp(s,n,o.numValues);if(_.length===1){const x=_[0];return p?Gd(x):x}return p?(function(x){return Gd(x[1])})(_):(function(x){return x[1]})(_)}function v_(s,n,o,p,_){return(function(x,w,C,I){switch(w.logicalLevelTechnique1){case Yn.DELTA:return w.logicalLevelTechnique2===Yn.RLE&&(x=fu(x,w.runs,w.numRleValues)),(function(O,j){const V=new Int32Array(O.size());let G=0;O.get(0)?(V[0]=O.get(0)?j[0]>>>1^-(1&j[0]):0,G=1):V[0]=0;let H=1;for(;H!=V.length;++H)V[H]=O.get(H)?V[H-1]+(j[G]>>>1^-(1&j[G++])):V[H-1];return V})(I,x);case Yn.RLE:return(function(O,j,V,G){const H=j;return V?(function(te,ne,re){const ue=new Int32Array(te.size());let Ce=0;for(let fe=0;fe<re;fe++){const ye=ne[fe];let Ie=ne[fe+re];Ie=Ie>>>1^-(1&Ie);for(let Le=Ce;Le<Ce+ye;Le++)te.get(Le)?ue[Le]=Ie:(ue[Le]=0,Ce++);Ce+=ye}return ue})(G,O,H.runs):(function(te,ne,re){const ue=new Int32Array(te.size());let Ce=0;for(let fe=0;fe<re;fe++){const ye=ne[fe],Ie=ne[fe+re];for(let Le=Ce;Le<Ce+ye;Le++)te.get(Le)?ue[Le]=Ie:(ue[Le]=0,Ce++);Ce+=ye}return ue})(G,O,H.runs)})(x,w,C,I);case Yn.MORTON:return Jh(x),x;case Yn.COMPONENTWISE_DELTA:return p_(x),x;case Yn.NONE:return x=C?(function(O,j){const V=new Int32Array(O.size());let G=0,H=0;for(;H!=V.length;++H)if(O.get(H)){const te=j[G++];V[H]=te>>>1^-(1&te)}else V[H]=0;return V})(I,x):(function(O,j){const V=new Int32Array(O.size());let G=0,H=0;for(;H!=V.length;++H)V[H]=O.get(H)?j[G++]:0;return V})(I,x),x;default:throw new Error("The specified Logical level technique is not supported")}})(o.physicalLevelTechnique===Mc.FAST_PFOR?Uf():Da(s,n,o.numValues),o,p,_)}function th(s,n,o,p){const _=s.logicalLevelTechnique1;if(_===Yn.RLE)return s.runs===1?aa.CONST:aa.FLAT;const x=n instanceof Ic?n.size():n;if(_===Yn.DELTA&&s.logicalLevelTechnique2===Yn.RLE){const w=s.runs,C=2;if(s.numRleValues!==x)return aa.FLAT;if(w===1)return aa.SEQUENCE;if(w===2){const I=p.get();let O;if(s.physicalLevelTechnique===Mc.VARINT)O=Da(o,p,4);else{const j=p.get();O=new Int32Array(o.buffer,o.byteOffset+j,4)}if(p.set(I),O[2]===C&&O[3]===C)return aa.SEQUENCE}}return s.numValues===1?aa.CONST:aa.FLAT}class Zf extends Mg{getValueFromBuffer(n){return this.dataBuffer[n]}}class b_ extends h_{constructor(n,o,p,_){super(n,BigInt64Array.of(o),p,_)}getValueFromBuffer(n){return this.dataBuffer[0]+BigInt(n)*this.delta}}class nh{_geometryOffsets;_partOffsets;_ringOffsets;constructor(n,o,p){this._geometryOffsets=n,this._partOffsets=o,this._ringOffsets=p}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function Xp(s,n,o){return{x:Pg(s,n)-o,y:Pg(s>>1,n)-o}}function Pg(s,n){let o=0;for(let p=0;p<n;p++)o|=(s&1<<2*p)>>p;return o}(function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON",s[s.MULTIPOINT=3]="MULTIPOINT",s[s.MULTILINESTRING=4]="MULTILINESTRING",s[s.MULTIPOLYGON=5]="MULTIPOLYGON"})(Pa||(Pa={})),(function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON"})(dl||(dl={})),(function(s){s[s.MORTON=0]="MORTON",s[s.VEC_2=1]="VEC_2",s[s.VEC_3=2]="VEC_3"})(cs||(cs={}));class Dg{createPoint(n){return[[n]]}createMultiPoint(n){return n.map((o=>[o]))}createLineString(n){return[n]}createMultiLineString(n){return n}createPolygon(n,o){return[n].concat(o)}createMultiPolygon(n){return n.flat()}}function x_(s){const n=new Array(s.numGeometries);let o=1,p=1,_=1,x=0;const w=new Dg;let C=0,I=0;const O=s.mortonSettings,j=s.topologyVector,V=j.geometryOffsets,G=j.partOffsets,H=j.ringOffsets,te=s.vertexOffsets,ne=s.containsPolygonGeometry(),re=s.vertexBuffer;for(let ue=0;ue<s.numGeometries;ue++){const Ce=s.geometryType(ue);if(Ce===Pa.POINT){if(te&&te.length!==0)if(s.vertexBufferType===cs.VEC_2){const fe=2*te[I++],ye=new z(re[fe],re[fe+1]);n[x++]=w.createPoint(ye)}else{const fe=Xp(re[te[I++]],O.numBits,O.coordinateShift),ye=new z(fe.x,fe.y);n[x++]=w.createPoint(ye)}else{const fe=new z(re[C++],re[C++]);n[x++]=w.createPoint(fe)}V&&_++,G&&o++,H&&p++}else if(Ce===Pa.MULTIPOINT){const fe=V[_]-V[_-1];_++;const ye=new Array(fe);if(te&&te.length!==0){for(let Ie=0;Ie<fe;Ie++){const Le=2*te[I++];ye[Ie]=new z(re[Le],re[Le+1])}n[x++]=w.createMultiPoint(ye)}else{for(let Ie=0;Ie<fe;Ie++){const Le=re[C++],Qe=re[C++];ye[Ie]=new z(Le,Qe)}n[x++]=w.createMultiPoint(ye)}}else if(Ce===Pa.LINESTRING){let fe,ye=0;ne?(ye=H[p]-H[p-1],p++):ye=G[o]-G[o-1],o++,te&&te.length!==0?(fe=s.vertexBufferType===cs.VEC_2?Jp(re,te,I,ye,!1):S_(re,te,I,ye,!1,O),I+=ye):(fe=w_(re,C,ye,!1),C+=2*ye),n[x++]=w.createLineString(fe),V&&_++}else if(Ce===Pa.POLYGON){const fe=G[o]-G[o-1];o++;const ye=new Array(fe-1);let Ie=H[p]-H[p-1];if(p++,te&&te.length!==0){const Le=s.vertexBufferType===cs.VEC_2?Lg(re,te,I,Ie):Kp(re,te,I,Ie,0,O);I+=Ie;for(let Qe=0;Qe<ye.length;Qe++)Ie=H[p]-H[p-1],p++,ye[Qe]=s.vertexBufferType===cs.VEC_2?Lg(re,te,I,Ie):Kp(re,te,I,Ie,0,O),I+=Ie;n[x++]=w.createPolygon(Le,ye)}else{const Le=Yp(re,C,Ie);C+=2*Ie;for(let Qe=0;Qe<ye.length;Qe++)Ie=H[p]-H[p-1],p++,ye[Qe]=Yp(re,C,Ie),C+=2*Ie;n[x++]=w.createPolygon(Le,ye)}V&&_++}else if(Ce===Pa.MULTILINESTRING){const fe=V[_]-V[_-1];_++;const ye=new Array(fe);if(te&&te.length!==0){for(let Ie=0;Ie<fe;Ie++){let Le=0;ne?(Le=H[p]-H[p-1],p++):Le=G[o]-G[o-1],o++;const Qe=s.vertexBufferType===cs.VEC_2?Jp(re,te,I,Le,!1):S_(re,te,I,Le,!1,O);ye[Ie]=Qe,I+=Le}n[x++]=w.createMultiLineString(ye)}else{for(let Ie=0;Ie<fe;Ie++){let Le=0;ne?(Le=H[p]-H[p-1],p++):Le=G[o]-G[o-1],o++,ye[Ie]=w_(re,C,Le,!1),C+=2*Le}n[x++]=w.createMultiLineString(ye)}}else{if(Ce!==Pa.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const fe=V[_]-V[_-1];_++;const ye=new Array(fe);let Ie=0;if(te&&te.length!==0){for(let Le=0;Le<fe;Le++){const Qe=G[o]-G[o-1];o++;const bt=new Array(Qe-1);Ie=H[p]-H[p-1],p++;const ft=s.vertexBufferType===cs.VEC_2?Lg(re,te,I,Ie):Kp(re,te,I,Ie,0,O);I+=Ie;for(let St=0;St<bt.length;St++)Ie=H[p]-H[p-1],p++,bt[St]=s.vertexBufferType===cs.VEC_2?Lg(re,te,I,Ie):Kp(re,te,I,Ie,0,O),I+=Ie;ye[Le]=w.createPolygon(ft,bt)}n[x++]=w.createMultiPolygon(ye)}else{for(let Le=0;Le<fe;Le++){const Qe=G[o]-G[o-1];o++;const bt=new Array(Qe-1);Ie=H[p]-H[p-1],p++;const ft=Yp(re,C,Ie);C+=2*Ie;for(let St=0;St<bt.length;St++){const Vt=H[p]-H[p-1];p++,bt[St]=Yp(re,C,Vt),C+=2*Vt}ye[Le]=w.createPolygon(ft,bt)}n[x++]=w.createMultiPolygon(ye)}}}}return n}function Yp(s,n,o){return w_(s,n,o,!0)}function Lg(s,n,o,p){return Jp(s,n,o,p,!0)}function Kp(s,n,o,p,_,x){return S_(s,n,o,p,!0,x)}function w_(s,n,o,p){const _=new Array(p?o+1:o);for(let x=0;x<2*o;x+=2)_[x/2]=new z(s[n+x],s[n+x+1]);return p&&(_[_.length-1]=_[0]),_}function Jp(s,n,o,p,_){const x=new Array(_?p+1:p);for(let w=0;w<2*p;w+=2){const C=2*n[o+w/2];x[w/2]=new z(s[C],s[C+1])}return _&&(x[x.length-1]=x[0]),x}function S_(s,n,o,p,_,x){const w=new Array(_?p+1:p);for(let C=0;C<p;C++){const I=Xp(s[n[o+C]],x.numBits,x.coordinateShift);w[C]=new z(I.x,I.y)}return _&&(w[w.length-1]=w[0]),w}class Qp{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(n,o,p,_,x){this._vertexBufferType=n,this._topologyVector=o,this._vertexOffsets=p,this._vertexBuffer=_,this._mortonSettings=x}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const n=x_(this);let o=0;for(;o<this.numGeometries;)yield{coordinates:n[o],type:this.geometryType(o)},o++}getSimpleEncodedVertex(n){const o=this.vertexOffsets?2*this.vertexOffsets[n]:2*n;return[this.vertexBuffer[o],this.vertexBuffer[o+1]]}getVertex(n){if(this.vertexOffsets&&this.mortonSettings){const p=Xp(this.vertexBuffer[this.vertexOffsets[n]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[p.x,p.y]}const o=this.vertexOffsets?2*this.vertexOffsets[n]:2*n;return[this.vertexBuffer[o],this.vertexBuffer[o+1]]}getGeometries(){return x_(this)}get mortonSettings(){return this._mortonSettings}}class em extends Qp{_numGeometries;_geometryType;constructor(n,o,p,_,x,w,C){super(p,_,x,w,C),this._numGeometries=n,this._geometryType=o}geometryType(n){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Pa.POLYGON||this._geometryType===Pa.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class tm extends Qp{_geometryTypes;constructor(n,o,p,_,x,w){super(n,p,_,x,w),this._geometryTypes=o}geometryType(n){return this._geometryTypes[n]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let n=0;n<this.numGeometries;n++)if(this.geometryType(n)===Pa.POLYGON||this.geometryType(n)===Pa.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class N0{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(n,o,p,_){this._triangleOffsets=n,this._indexBuffer=o,this._vertexBuffer=p,this._topologyVector=_}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const n=new Array(this.numGeometries),o=this._topologyVector,p=o.partOffsets,_=o.ringOffsets,x=o.geometryOffsets;let w=0,C=1,I=1,O=1;for(let j=0;j<this.numGeometries;j++)switch(this.geometryType(j)){case Pa.POLYGON:{const V=p[C]-p[C-1];C++;const G=[];for(let H=0;H<V;H++){const te=_[I]-_[I-1];I++;const ne=[];for(let re=0;re<te;re++){const ue=this._vertexBuffer[w++],Ce=this._vertexBuffer[w++];ne.push(new z(ue,Ce))}ne.length>0&&ne.push(ne[0]),G.push(ne)}n[j]=G,x&&O++}break;case Pa.MULTIPOLYGON:{const V=x[O]-x[O-1];O++;const G=[];for(let H=0;H<V;H++){const te=p[C]-p[C-1];C++;for(let ne=0;ne<te;ne++){const re=_[I]-_[I-1];I++;const ue=[];for(let Ce=0;Ce<re;Ce++){const fe=this._vertexBuffer[w++],ye=this._vertexBuffer[w++];ue.push(new z(fe,ye))}ue.length>0&&ue.push(ue[0]),G.push(ue)}}n[j]=G}}return n}[Symbol.iterator](){return null}}function qf(s,n,o,p,_,x){return new L1(s,n,o,p,_,x)}class L1 extends N0{_numGeometries;_geometryType;constructor(n,o,p,_,x,w){super(p,_,x,w),this._numGeometries=n,this._geometryType=o}geometryType(n){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function T_(s,n,o,p,_){return new $0(s,n,o,p,_)}class $0 extends N0{_geometryTypes;constructor(n,o,p,_,x){super(o,p,_,x),this._geometryTypes=n}geometryType(n){return this._geometryTypes[n]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function j0(s,n,o,p,_){const x=jo(s,o);let w=null,C=null,I=null,O=null,j=null,V=null,G=null,H=null;if(th(x,p,s,o)===aa.CONST){const ne=g_(s,o,x,!1);for(let re=0;re<n-1;re++){const ue=jo(s,o);switch(ue.physicalStreamType){case fo.LENGTH:switch(ue.logicalStreamType.lengthType){case $o.GEOMETRIES:w=Qh(s,o,ue);break;case $o.PARTS:C=Qh(s,o,ue);break;case $o.RINGS:I=Qh(s,o,ue);break;case $o.TRIANGLES:G=Qh(s,o,ue)}break;case fo.OFFSET:switch(ue.logicalStreamType.offsetType){case Kh.VERTEX:O=Bo(s,o,ue,!1);break;case Kh.INDEX:H=Bo(s,o,ue,!1)}break;case fo.DATA:zc.VERTEX===ue.logicalStreamType.dictionaryType?j=Bo(s,o,ue,!0):(V={numBits:ue.numBits,coordinateShift:ue.coordinateShift},j=Bo(s,o,ue,!1))}}return H!==null?w!=null||C!=null?qf(p,ne,G,H,j,new nh(w,C,I)):qf(p,ne,G,H,j):V===null?(function(re,ue,Ce,fe,ye){return new em(re,ue,cs.VEC_2,Ce,fe,ye)})(p,ne,new nh(w,C,I),O,j):(function(re,ue,Ce,fe,ye,Ie){return new em(re,ue,cs.MORTON,Ce,fe,ye,Ie)})(p,ne,new nh(w,C,I),O,j,V)}const te=Bo(s,o,x,!1);for(let ne=0;ne<n-1;ne++){const re=jo(s,o);switch(re.physicalStreamType){case fo.LENGTH:switch(re.logicalStreamType.lengthType){case $o.GEOMETRIES:w=Bo(s,o,re,!1);break;case $o.PARTS:C=Bo(s,o,re,!1);break;case $o.RINGS:I=Bo(s,o,re,!1);break;case $o.TRIANGLES:G=Qh(s,o,re)}break;case fo.OFFSET:switch(re.logicalStreamType.offsetType){case Kh.VERTEX:O=Bo(s,o,re,!1);break;case Kh.INDEX:H=Bo(s,o,re,!1)}break;case fo.DATA:zc.VERTEX===re.logicalStreamType.dictionaryType?j=Bo(s,o,re,!0):(V={numBits:re.numBits,coordinateShift:re.coordinateShift},j=Bo(s,o,re,!1))}}return H!==null&&C===null?T_(te,G,H,j):(w!==null?(w=Rg(te,w,2),C!==null&&I!==null?(C=Og(te,w,C,!1),I=(function(ne,re,ue,Ce){const fe=new Int32Array(ue[ue.length-1]+1);let ye=0;fe[0]=ye;let Ie=1,Le=1,Qe=0;for(let bt=0;bt<ne.length;bt++){const ft=ne[bt],St=re[bt+1]-re[bt];if(ft!==0&&ft!==3)for(let Vt=0;Vt<St;Vt++){const Et=ue[Ie]-ue[Ie-1];Ie++;for(let yt=0;yt<Et;yt++)ye=fe[Le++]=ye+Ce[Qe++]}else for(let Vt=0;Vt<St;Vt++)fe[Le++]=++ye,Ie++}return fe})(te,w,C,I)):C!==null&&(C=(function(ne,re,ue){const Ce=new Int32Array(re[re.length-1]+1);let fe=0;Ce[0]=fe;let ye=1,Ie=0;for(let Le=0;Le<ne.length;Le++){const Qe=ne[Le],bt=re[Le+1]-re[Le];if(Qe===4||Qe===1)for(let ft=0;ft<bt;ft++)fe=Ce[ye++]=fe+ue[Ie++];else for(let ft=0;ft<bt;ft++)Ce[ye++]=++fe}return Ce})(te,w,C))):C!==null&&I!==null?(C=Rg(te,C,1),I=Og(te,C,I,!0)):C!==null&&(C=Rg(te,C,0)),H!==null?T_(te,G,H,j,new nh(w,C,I)):V===null?(function(ne,re,ue,Ce){return new tm(cs.VEC_2,ne,re,ue,Ce)})(te,new nh(w,C,I),O,j):(function(ne,re,ue,Ce,fe){return new tm(cs.MORTON,ne,re,ue,Ce,fe)})(te,new nh(w,C,I),O,j,V))}function Rg(s,n,o){const p=new Int32Array(s.length+1);let _=0;p[0]=_;let x=0;for(let w=0;w<s.length;w++)_=p[w+1]=_+(s[w]>o?n[x++]:1);return p}function Og(s,n,o,p){const _=new Int32Array(n[n.length-1]+1);let x=0;_[0]=x;let w=1,C=0;for(let I=0;I<s.length;I++){const O=s[I],j=n[I+1]-n[I];if(O===5||O===2||p&&(O===4||O===1))for(let V=0;V<j;V++)x=_[w++]=x+o[C++];else for(let V=0;V<j;V++)_[w++]=++x}return _}class B0 extends Xh{dataVector;constructor(n,o,p){super(n,o.getBuffer(),p),this.dataVector=o}getValueFromBuffer(n){return this.dataVector.get(n)}}class F0 extends Mg{getValueFromBuffer(n){return this.dataBuffer[n]}}class nm extends Xh{constructor(n,o,p){super(n,BigInt64Array.of(o),p)}getValueFromBuffer(n){return this.dataBuffer[0]}}function im(s,n,o){return U0(s,Math.ceil(n/8),o)}function U0(s,n,o){const p=new Uint8Array(n);let _=0;for(;_<n;){const x=s[o.increment()];if(x<=127){const w=x+3,C=s[o.increment()],I=_+w;p.fill(C,_,I),_=I}else{const w=256-x;for(let C=0;C<w;C++)p[_++]=s[o.increment()]}}return p}const E_=new TextDecoder;function rm(s,n,o){return o-n>=12?E_.decode(s.subarray(n,o)):(function(p,_,x){let w="",C=_;for(;C<x;){const I=p[C];let O,j,V,G=null,H=I>239?4:I>223?3:I>191?2:1;if(C+H>x)break;H===1?I<128&&(G=I):H===2?(O=p[C+1],(192&O)==128&&(G=(31&I)<<6|63&O,G<=127&&(G=null))):H===3?(O=p[C+1],j=p[C+2],(192&O)==128&&(192&j)==128&&(G=(15&I)<<12|(63&O)<<6|63&j,(G<=2047||G>=55296&&G<=57343)&&(G=null))):H===4&&(O=p[C+1],j=p[C+2],V=p[C+3],(192&O)==128&&(192&j)==128&&(192&V)==128&&(G=(15&I)<<18|(63&O)<<12|(63&j)<<6|63&V,(G<=65535||G>=1114112)&&(G=null))),G===null?(G=65533,H=1):G>65535&&(G-=65536,w+=String.fromCharCode(G>>>10&1023|55296),G=56320|1023&G),w+=String.fromCharCode(G),C+=H}return w})(s,n,o)}class Gf extends Xh{offsetBuffer;constructor(n,o,p,_){super(n,p,_),this.offsetBuffer=o}}class Ng extends Gf{textEncoder;constructor(n,o,p,_){super(n,o,p,_??o.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(n){return rm(this.dataBuffer,this.offsetBuffer[n],this.offsetBuffer[n+1])}}class Wd extends Gf{indexBuffer;textEncoder;constructor(n,o,p,_,x){super(n,p,_,x??o.length),this.indexBuffer=o,this.indexBuffer=o,this.textEncoder=new TextEncoder}getValueFromBuffer(n){const o=this.indexBuffer[n];return rm(this.dataBuffer,this.offsetBuffer[o],this.offsetBuffer[o+1])}}class $g extends Gf{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(n,o,p,_,x,w,C){super(n,p,_,C),this.indexBuffer=o,this.symbolOffsetBuffer=x,this.symbolTableBuffer=w,this.textEncoder=new TextEncoder}getValueFromBuffer(n){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(p,_,x){const w=[],C=new Array(_.length).fill(0);for(let I=1;I<_.length;I++)C[I]=C[I-1]+_[I-1];for(let I=0;I<x.length;I++)if(x[I]===255)w.push(x[++I]);else{const O=_[x[I]],j=C[x[I]];for(let V=0;V<O;V++)w.push(p[j+V])}return new Uint8Array(w)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const o=this.indexBuffer[n];return rm(this.decodedDictionary,this.offsetBuffer[o],this.offsetBuffer[o+1])}offsetToLengthBuffer(n){const o=new Uint32Array(n.length-1);let p=n[0];for(let _=1;_<n.length;_++){const x=n[_];o[_-1]=x-p,p=x}return o}}function ed(s,n,o,p,_,x){return o.type==="scalarType"?(function(w,C,I,O,j,V){let G=null,H=0;if(w===0)return null;if(V.nullable){const ne=jo(C,I);H=ne.numValues;const re=I.get(),ue=im(C,H,I);I.set(re+ne.byteLength),G=new Ic(ue,ne.numValues)}const te=G??O;switch(j.physicalType){case 4:case 3:return(function(ne,re,ue,Ce,fe){const ye=jo(ne,re),Ie=th(ye,fe,ne,re),Le=Ce.physicalType===3;if(Ie===aa.FLAT){const Qe=Hl(fe)?v_(ne,re,ye,Le,fe):Bo(ne,re,ye,Le);return new zg(ue.name,Qe,fe)}if(Ie===aa.SEQUENCE){const Qe=y_(ne,re,ye);return new d_(ue.name,Qe[0],Qe[1],ye.numRleValues)}{const Qe=g_(ne,re,ye,Le);return new f_(ue.name,Qe,fe)}})(C,I,V,j,te);case 9:return(function(ne,re,ue,Ce,fe){let ye=null,Ie=null,Le=null,Qe=null,bt=null,ft=null,St=null,Vt=null;for(let Et=0;Et<Ce;Et++){const yt=jo(re,ue);if(yt.byteLength!==0)switch(yt.physicalStreamType){case fo.PRESENT:{const ct=im(re,yt.numValues,ue);ft=new Ic(ct,yt.numValues);break}case fo.OFFSET:Ie=fe!=null||ft!=null?v_(re,ue,yt,!1,fe??ft):Bo(re,ue,yt,!1);break;case fo.LENGTH:{const ct=Qh(re,ue,yt);$o.DICTIONARY===yt.logicalStreamType.lengthType?ye=ct:$o.SYMBOL===yt.logicalStreamType.lengthType?Qe=ct:St=ct;break}case fo.DATA:{const ct=re.subarray(ue.get(),ue.get()+yt.byteLength);ue.add(yt.byteLength);const tn=yt.logicalStreamType.dictionaryType;zc.FSST===tn?bt=ct:zc.SINGLE===tn||zc.SHARED===tn?Le=ct:zc.NONE===tn&&(Vt=ct);break}}}return(function(Et,yt,ct,tn,Kt,nn,Ht){return yt?new $g(Et,ct,tn,Kt,nn,yt,Ht):null})(ne,bt,Ie,ye,Le,Qe,fe??ft)??(function(Et,yt,ct,tn,Kt){return yt?Kt?new Wd(Et,ct,tn,yt,Kt):new Wd(Et,ct,tn,yt):null})(ne,Le,Ie,ye,fe??ft)??(function(Et,yt,ct,tn,Kt){if(!yt||!ct)return null;if(tn)return Kt?new Wd(Et,tn,yt,ct,Kt):new Wd(Et,tn,yt,ct);if(Kt&&Kt.size()!==yt.length-1){const nn=new Int32Array(Kt.size());let Ht=0;for(let pn=0;pn<Kt.size();pn++)nn[pn]=Kt.get(pn)?Ht++:0;return new Wd(Et,nn,yt,ct,Kt)}return Kt?new Ng(Et,yt,ct,Kt):new Ng(Et,yt,ct)})(ne,St,Vt,Ie,fe??ft)})(V.name,C,I,V.nullable?w-1:w,G);case 0:return(function(ne,re,ue,Ce,fe){const ye=jo(ne,re),Ie=ye.numValues,Le=re.get(),Qe=Hl(fe)?(function(ft,St,Vt,Et){const yt=U0(ft,Math.ceil(St/8),Vt),ct=new Ic(yt,St),tn=Et.size(),Kt=new Ic(new Uint8Array(tn),tn);let nn=0;for(let Ht=0;Ht<Et.size();Ht++){const pn=!!Et.get(Ht)&&ct.get(nn++);Kt.set(Ht,pn)}return Kt.getBuffer()})(ne,Ie,re,fe):im(ne,Ie,re);re.set(Le+ye.byteLength);const bt=new Ic(Qe,Ie);return new B0(ue.name,bt,fe)})(C,I,V,0,te);case 6:case 5:return(function(ne,re,ue,Ce,fe){const ye=jo(ne,re),Ie=th(ye,Ce,ne,re),Le=fe.physicalType===5;if(Ie===aa.FLAT){const Qe=Hl(Ce)?(function(bt,ft,St,Vt,Et){return(function(yt,ct,tn,Kt){switch(ct.logicalLevelTechnique1){case Yn.DELTA:return ct.logicalLevelTechnique2===Yn.RLE&&(yt=R0(yt,ct.runs,ct.numRleValues)),(function(nn,Ht){const pn=new BigInt64Array(nn.size());let Ti=0;nn.get(0)?(pn[0]=nn.get(0)?Ht[0]>>1n^-(1n&Ht[0]):0n,Ti=1):pn[0]=0n;let ni=1;for(;ni!=pn.length;++ni)pn[ni]=nn.get(ni)?pn[ni-1]+(Ht[Ti]>>1n^-(1n&Ht[Ti++])):pn[ni-1];return pn})(Kt,yt);case Yn.RLE:return(function(nn,Ht,pn,Ti){const ni=Ht;return pn?(function(Or,Fo,La){const Nr=new BigInt64Array(Or.size());let Tr=0;for(let Fi=0;Fi<La;Fi++){const Jr=Number(Fo[Fi]);let oa=Fo[Fi+La];oa=oa>>1n^-(1n&oa);for(let vr=Tr;vr<Tr+Jr;vr++)Or.get(vr)?Nr[vr]=oa:(Nr[vr]=0n,Tr++);Tr+=Jr}return Nr})(Ti,nn,ni.runs):(function(Or,Fo,La){const Nr=new BigInt64Array(Or.size());let Tr=0;for(let Fi=0;Fi<La;Fi++){const Jr=Number(Fo[Fi]),oa=Fo[Fi+La];for(let vr=Tr;vr<Tr+Jr;vr++)Or.get(vr)?Nr[vr]=oa:(Nr[vr]=0n,Tr++);Tr+=Jr}return Nr})(Ti,nn,ni.runs)})(yt,ct,tn,Kt);case Yn.NONE:return yt=tn?(function(nn,Ht){const pn=new BigInt64Array(nn.size());let Ti=0,ni=0;for(;ni!=pn.length;++ni)if(nn.get(ni)){const Or=Ht[Ti++];pn[ni]=Or>>1n^-(1n&Or)}else pn[ni]=0n;return pn})(Kt,yt):(function(nn,Ht){const pn=new BigInt64Array(nn.size());let Ti=0,ni=0;for(;ni!=pn.length;++ni)pn[ni]=nn.get(ni)?Ht[Ti++]:0n;return pn})(Kt,yt),yt;default:throw new Error("The specified Logical level technique is not supported")}})(Wp(bt,ft,St.numValues),St,Vt,Et)})(ne,re,ye,Le,Ce):Vf(ne,re,ye,Le);return new Zf(ue.name,Qe,Ce)}if(Ie===aa.SEQUENCE){const Qe=Hd(ne,re,ye);return new b_(ue.name,Qe[0],Qe[1],ye.numRleValues)}{const Qe=__(ne,re,ye,Le);return new nm(ue.name,Qe,Ce)}})(C,I,V,te,j);case 7:return(function(ne,re,ue,Ce){const fe=jo(ne,re),ye=Hl(Ce)?(function(Ie,Le,Qe,bt){const ft=Le.get(),St=ft+bt*Float32Array.BYTES_PER_ELEMENT,Vt=new Uint8Array(Ie.subarray(ft,St)).buffer,Et=new Float32Array(Vt);Le.set(St);const yt=Qe.size(),ct=new Float32Array(yt);let tn=0;for(let Kt=0;Kt<yt;Kt++)ct[Kt]=Qe.get(Kt)?Et[tn++]:0;return ct})(ne,re,Ce,fe.numValues):(function(Ie,Le,Qe){const bt=Le.get(),ft=bt+Qe*Float32Array.BYTES_PER_ELEMENT,St=new Uint8Array(Ie.subarray(bt,ft)).buffer,Vt=new Float32Array(St);return Le.set(ft),Vt})(ne,re,fe.numValues);return new F0(ue.name,ye,Ce)})(C,I,V,te);case 8:return(function(ne,re,ue,Ce){const fe=jo(ne,re),ye=Hl(Ce)?(function(Ie,Le,Qe,bt){const ft=Le.get(),St=ft+bt*Float64Array.BYTES_PER_ELEMENT,Vt=new Uint8Array(Ie.subarray(ft,St)).buffer,Et=new Float64Array(Vt);Le.set(St);const yt=Qe.size(),ct=new Float64Array(yt);let tn=0;for(let Kt=0;Kt<yt;Kt++)ct[Kt]=Qe.get(Kt)?Et[tn++]:0;return ct})(ne,re,Ce,fe.numValues):(function(Ie,Le,Qe){const bt=Le.get(),ft=bt+Qe*Float64Array.BYTES_PER_ELEMENT,St=new Uint8Array(Ie.subarray(bt,ft)).buffer,Vt=new Float64Array(St);return Le.set(ft),Vt})(ne,re,fe.numValues);return new u_(ue.name,ye,Ce)})(C,I,V,te);default:throw new Error(`The specified data type for the field is currently not supported: ${j}`)}})(p,s,n,_,o.scalarType,o):p!=1?null:(function(w,C,I,O){let j=null,V=null,G=null,H=null,te=!1;for(;!te;){const Ce=jo(w,C);switch(Ce.physicalStreamType){case fo.LENGTH:$o.DICTIONARY===Ce.logicalStreamType.lengthType?j=Qh(w,C,Ce):G=Qh(w,C,Ce);break;case fo.DATA:zc.SINGLE===Ce.logicalStreamType.dictionaryType||zc.SHARED===Ce.logicalStreamType.dictionaryType?(V=w.subarray(C.get(),C.get()+Ce.byteLength),te=!0):H=w.subarray(C.get(),C.get()+Ce.byteLength),C.add(Ce.byteLength)}}const ne=I.complexType.children,re=[];let ue=0;for(const Ce of ne){const fe=Da(w,C,1)[0];if(fe==0)continue;const ye=`${I.name}${Ce.name==="default"?"":":"+Ce.name}`;if(fe!==2||Ce.type!=="scalarField"||Ce.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const Ie=jo(w,C),Le=im(w,Ie.numValues,C),Qe=jo(w,C),bt=Qe.decompressedCount!==O?v_(w,C,Qe,!1,new Ic(Le,Ie.numValues)):Bo(w,C,Qe,!1);re[ue++]=H?new $g(ye,bt,j,V,G,H,new Ic(Le,Ie.numValues)):new Wd(ye,bt,j,V,new Ic(Le,Ie.numValues))}return re})(s,n,o,_)}function Hl(s){return s instanceof Ic}function td(s){if(s.name==="id")return!1;if(s.type==="scalarType"){const n=s.scalarType;if(n.type==="physicalType")switch(n.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(n.type==="logicalType")return!1}else if(s.type==="complexType"){const n=s.complexType;if(n.type==="physicalType")switch(n.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",s),!1}const am=new TextDecoder;function Hf(s,n){const o=Da(s,n,1)[0];if(o===0)return"";const p=n.get(),_=s.subarray(p,p+o);return n.add(o),am.decode(_)}function ih(s,n){const o=Da(s,n,1)[0]>>>0,p=!!(4&o),_=!!(2&o),x=Da(s,n,1)[0]>>>0,w={};if(1&o&&(w.nullable=!0),_){const C={};if(p?(C.type="logicalType",C.logicalType=x):(C.type="physicalType",C.physicalType=x),8&o){const I=Da(s,n,1)[0]>>>0;C.children=new Array(I);for(let O=0;O<I;O++)C.children[O]=ih(s,n)}w.type="complexField",w.complexField=C}else{const C={};p?(C.type="logicalType",C.logicalType=x):(C.type="physicalType",C.physicalType=x),w.type="scalarField",w.scalarField=C}return w}function R1(s,n){const o=Da(s,n,1)[0]>>>0,p=(function(_){switch(_){case 0:case 1:case 2:case 3:{const x={};x.nullable=!!(1&_),x.columnScope=0;const w={};return w.physicalType=_>1?6:4,w.type="physicalType",x.scalarType=w,x.type="scalarType",x}case 4:{const x={nullable:!1,columnScope:0},w={type:"physicalType",physicalType:0};return x.type="complexType",x.complexType=w,x}case 30:{const x={nullable:!1,columnScope:0},w={type:"physicalType",physicalType:1};return x.type="complexType",x.complexType=w,x}default:return(function(x){let w=null;switch(x){case 10:case 11:w=0;break;case 12:case 13:w=1;break;case 14:case 15:w=2;break;case 16:case 17:w=3;break;case 18:case 19:w=4;break;case 20:case 21:w=5;break;case 22:case 23:w=6;break;case 24:case 25:w=7;break;case 26:case 27:w=8;break;case 28:case 29:w=9;break;default:return null}const C={};C.nullable=!!(1&x),C.columnScope=0;const I={type:"physicalType"};return I.physicalType=w,C.type="scalarType",C.scalarType=I,C})(_)}})(o);if(!p)throw new Error(`Unsupported column type code: ${o}`);if((function(_){return _>=10})(o)?p.name=Hf(s,n):o>=0&&o<=3?p.name="id":o===4&&(p.name="geometry"),(function(_){return _===30})(o)){const _=Da(s,n,1)[0]>>>0,x=p.complexType;x.children=new Array(_);for(let w=0;w<_;w++)x.children[w]=ih(s,n)}return p}function V0(s,n){const o={featureTables:[]},p={};p.name=Hf(s,n);const _=Da(s,n,1)[0]>>>0,x=Da(s,n,1)[0]>>>0;p.columns=new Array(x);for(let w=0;w<x;w++)p.columns[w]=R1(s,n);return o.featureTables.push(p),[o,_]}function om(s,n,o,p,_,x,w=!1){const C=n.scalarType.physicalType,I=th(_,x,s,o);if(C===4)switch(I){case aa.FLAT:{const O=Bo(s,o,_,!1);return new zg(p,O,x)}case aa.SEQUENCE:{const O=y_(s,o,_);return new d_(p,O[0],O[1],_.numRleValues)}case aa.CONST:{const O=g_(s,o,_,!1);return new f_(p,O,x)}}else switch(I){case aa.FLAT:{if(w){const j=(function(V,G,H,te){const ne=(function(re,ue,Ce){const fe=new Float64Array(ue);for(let ye=0;ye<ue;ye++)fe[ye]=L0(re,Ce);return fe})(V,H.numValues,G);return(function(re,ue,Ce){switch(ue.logicalLevelTechnique1){case Yn.DELTA:return ue.logicalLevelTechnique2===Yn.RLE&&(re=O0(re,ue.runs,ue.numRleValues)),(function(fe){fe[0]=fe[0]%2==1?(fe[0]+1)/-2:fe[0]/2;const ye=fe.length/4*4;let Ie=1;if(ye>=4)for(;Ie<ye-4;Ie+=4){const Le=fe[Ie],Qe=fe[Ie+1],bt=fe[Ie+2],ft=fe[Ie+3];fe[Ie]=(Le%2==1?(Le+1)/-2:Le/2)+fe[Ie-1],fe[Ie+1]=(Qe%2==1?(Qe+1)/-2:Qe/2)+fe[Ie],fe[Ie+2]=(bt%2==1?(bt+1)/-2:bt/2)+fe[Ie+1],fe[Ie+3]=(ft%2==1?(ft+1)/-2:ft/2)+fe[Ie+2]}for(;Ie!=fe.length;++Ie)fe[Ie]=(fe[Ie]%2==1?(fe[Ie]+1)/-2:fe[Ie]/2)+fe[Ie-1]})(re),re;case Yn.RLE:return(function(fe,ye,Ie){return O0(fe,ye.runs,ye.numRleValues)})(re,ue);case Yn.NONE:return re;default:throw new Error(`The specified Logical level technique is not supported: ${ue.logicalLevelTechnique1}`)}})(ne,H)})(s,o,_);return new u_(p,j,x)}const O=Vf(s,o,_,!1);return new Zf(p,O,x)}case aa.SEQUENCE:{const O=Hd(s,o,_);return new b_(p,O[0],O[1],_.numRleValues)}case aa.CONST:{const O=__(s,o,_,!1);return new nm(p,O,x)}}throw new Error("Vector type not supported for id column.")}class O1{constructor(n,o){var p;switch(this._featureData=n,this.properties=this._featureData.properties||{},(p=this._featureData.geometry)===null||p===void 0?void 0:p.type){case Pa.POINT:case Pa.MULTIPOINT:this.type=1;break;case Pa.LINESTRING:case Pa.MULTILINESTRING:this.type=2;break;case Pa.POLYGON:case Pa.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=o,this.id=Number(this._featureData.id)}loadGeometry(){const n=[];for(const o of this._featureData.geometry.coordinates){const p=[];for(const _ of o)p.push(new z(_.x,_.y));n.push(p)}return n}}class Z0{constructor(n){this.features=[],this.featureTable=n,this.name=n.name,this.extent=n.extent,this.version=2,this.features=n.getFeatures(),this.length=this.features.length}feature(n){return new O1(this.features[n],this.extent)}}class sm{constructor(n){this.layers={};const o=(function(p,_,x=!0){const w=new D0(0),C=[];for(;w.get()<p.length;){const I=Da(p,w,1)[0]>>>0,O=w.get()+I;if(O>p.length)throw new Error(`Block overruns tile: ${O} > ${p.length}`);if(Da(p,w,1)[0]>>>0!=1){w.set(O);continue}const j=V0(p,w),V=j[1],G=j[0].featureTables[0];let H=null,te=null;const ne=[];let re=0;for(const Ce of G.columns){const fe=Ce.name;if(fe==="id"){let ye=null;if(Ce.nullable){const Le=jo(p,w),Qe=w.get(),bt=im(p,Le.numValues,w);w.set(Qe+Le.byteLength),ye=new Ic(bt,Le.numValues)}const Ie=jo(p,w);re=Ie.decompressedCount,H=om(p,Ce,w,fe,Ie,ye??re,x)}else if(fe==="geometry"){const ye=Da(p,w,1)[0];if(re===0){const Ie=w.get();re=jo(p,w).decompressedCount,w.set(Ie)}te=j0(p,ye,w,re)}else{const ye=td(Ce)?Da(p,w,1)[0]:1;if(ye===0&&Ce.type==="scalarType")continue;const Ie=ed(p,w,Ce,ye,re);if(Ie)if(Array.isArray(Ie))for(const Le of Ie)ne.push(Le);else ne.push(Ie)}}const ue=new Yh(G.name,te,H,ne,V);C.push(ue),w.set(O)}return C})(new Uint8Array(n));this.layers=o.reduce(((p,_)=>Object.assign(Object.assign({},p),{[_.name]:new Z0(_)})),{})}}class q0{constructor(n,o){this.feature=n,this.type=n.type,this.properties=n.tags?n.tags:{},this.extent=o,"id"in n&&(typeof n.id=="string"?this.id=parseInt(n.id,10):typeof n.id!="number"||isNaN(n.id)||(this.id=n.id))}loadGeometry(){const n=[],o=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const p of o){const _=[];for(const x of p)_.push(new z(x[0],x[1]));n.push(_)}return n}}const lm="_geojsonTileLayer";function jg(s,n){n.writeVarintField(15,s.version||1),n.writeStringField(1,s.name||""),n.writeVarintField(5,s.extent||4096);const o={keys:[],values:[],keycache:{},valuecache:{}};for(let x=0;x<s.length;x++)o.feature=s.feature(x),n.writeMessage(2,Bg,o);const p=o.keys;for(const x of p)n.writeStringField(3,x);const _=o.values;for(const x of _)n.writeMessage(4,Fg,x)}function Bg(s,n){if(!s.feature)return;const o=s.feature;o.id!==void 0&&n.writeVarintField(1,o.id),n.writeMessage(2,G0,s),n.writeVarintField(3,o.type),n.writeMessage(4,C_,o)}function G0(s,n){for(const o in s.feature?.properties){let p=s.feature.properties[o],_=s.keycache[o];if(p==null)continue;_===void 0&&(s.keys.push(o),_=s.keys.length-1,s.keycache[o]=_),n.writeVarint(_),typeof p!="string"&&typeof p!="boolean"&&typeof p!="number"&&(p=JSON.stringify(p));const x=typeof p+":"+p;let w=s.valuecache[x];w===void 0&&(s.values.push(p),w=s.values.length-1,s.valuecache[x]=w),n.writeVarint(w)}}function nd(s,n){return(n<<3)+(7&s)}function A_(s){return s<<1^s>>31}function C_(s,n){const o=s.loadGeometry(),p=s.type;let _=0,x=0;for(const w of o){let C=1;p===1&&(C=w.length),n.writeVarint(nd(1,C));const I=p===3?w.length-1:w.length;for(let O=0;O<I;O++){O===1&&p!==1&&n.writeVarint(nd(2,I-1));const j=w[O].x-_,V=w[O].y-x;n.writeVarint(A_(j)),n.writeVarint(A_(V)),_+=j,x+=V}s.type===3&&n.writeVarint(nd(7,1))}}function Fg(s,n){const o=typeof s;o==="string"?n.writeStringField(1,s):o==="boolean"?n.writeBooleanField(7,s):o==="number"&&(s%1!=0?n.writeDoubleField(3,s):s<0?n.writeSVarintField(6,s):n.writeVarintField(5,s))}class M_{constructor(n,o){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new iu(Bt,16,0),this.grid3D=new iu(Bt,16,0),this.featureIndexArray=new le,this.promoteId=o}insert(n,o,p,_,x,w){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,_,x);const I=w?this.grid3D:this.grid;for(let O=0;O<o.length;O++){const j=o[O],V=[1/0,1/0,-1/0,-1/0];for(let G=0;G<j.length;G++){const H=j[G];V[0]=Math.min(V[0],H.x),V[1]=Math.min(V[1],H.y),V[2]=Math.max(V[2],H.x),V[3]=Math.max(V[3],H.y)}V[0]<Bt&&V[1]<Bt&&V[2]>=0&&V[3]>=0&&I.insert(C,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new gi(new fg(this.rawTileData)).layers:new sm(this.rawTileData).layers,this.sourceLayerCoder=new c_(this.vtLayers?Object.keys(this.vtLayers).sort():[lm])),this.vtLayers}query(n,o,p,_){this.loadVTLayers();const x=n.params,w=Bt/n.tileSize/n.scale,C=Wt(x.filter,x.globalState),I=n.queryGeometry,O=n.queryPadding*w,j=Wh.fromPoints(I),V=this.grid.query(j.minX-O,j.minY-O,j.maxX+O,j.maxY+O),G=Wh.fromPoints(n.cameraQueryGeometry).expandBy(O),H=this.grid3D.query(G.minX,G.minY,G.maxX,G.maxY,((re,ue,Ce,fe)=>(function(ye,Ie,Le,Qe,bt){for(const St of ye)if(Ie<=St.x&&Le<=St.y&&Qe>=St.x&&bt>=St.y)return!0;const ft=[new z(Ie,Le),new z(Ie,bt),new z(Qe,bt),new z(Qe,Le)];if(ye.length>2){for(const St of ft)if(lu(ye,St))return!0}for(let St=0;St<ye.length-1;St++)if(Kv(ye[St],ye[St+1],ft))return!0;return!1})(n.cameraQueryGeometry,re-O,ue-O,Ce+O,fe+O)));for(const re of H)V.push(re);V.sort(Ug);const te={};let ne;for(let re=0;re<V.length;re++){const ue=V[re];if(ue===ne)continue;ne=ue;const Ce=this.featureIndexArray.get(ue);let fe=null;this.loadMatchingFeature(te,Ce.bucketIndex,Ce.sourceLayerIndex,Ce.featureIndex,C,x.layers,x.availableImages,o,p,_,((ye,Ie,Le)=>(fe||(fe=Tc(ye)),Ie.queryIntersectsFeature({queryGeometry:I,feature:ye,featureState:Le,geometry:fe,zoom:this.z,transform:n.transform,pixelsToTileUnits:w,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation}))))}return te}loadMatchingFeature(n,o,p,_,x,w,C,I,O,j,V){const G=this.bucketLayerIDs[o];if(w&&!G.some((re=>w.has(re))))return;const H=this.sourceLayerCoder.decode(p),te=this.vtLayers[H].feature(_);if(x.needGeometry){const re=cl(te,!0);if(!x.filter(new Ri(this.tileID.overscaledZ),re,this.tileID.canonical))return}else if(!x.filter(new Ri(this.tileID.overscaledZ),te))return;const ne=this.getId(te,H);for(let re=0;re<G.length;re++){const ue=G[re];if(w&&!w.has(ue))continue;const Ce=I[ue];if(!Ce)continue;let fe={};ne&&j&&(fe=j.getState(Ce.sourceLayer||lm,ne));const ye=un({},O[ue]);ye.paint=H0(ye.paint,Ce.paint,te,fe,C),ye.layout=H0(ye.layout,Ce.layout,te,fe,C);const Ie=!V||V(te,Ce,fe);if(!Ie)continue;const Le=new Cg(te,this.z,this.x,this.y,ne);Le.layer=ye;let Qe=n[ue];Qe===void 0&&(Qe=n[ue]=[]),Qe.push({featureIndex:_,feature:Le,intersectionZ:Ie})}}lookupSymbolFeatures(n,o,p,_,x,w,C,I){const O={};this.loadVTLayers();const j=Wt(x.filterSpec,x.globalState);for(const V of n)this.loadMatchingFeature(O,p,_,V,j,w,C,I,o);return O}hasLayer(n){for(const o of this.bucketLayerIDs)for(const p of o)if(n===p)return!0;return!1}getId(n,o){var p;let _=n.id;return this.promoteId&&(_=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof _=="boolean"&&(_=Number(_)),_===void 0&&(!((p=n.properties)===null||p===void 0)&&p.cluster)&&this.promoteId&&(_=Number(n.properties.cluster_id))),_}}function H0(s,n,o,p,_){return Dn(s,((x,w)=>{const C=n instanceof ju?n.get(w):null;return C&&C.evaluate?C.evaluate(o,p,_):C}))}function Ug(s,n){return n-s}function l(s,n,o,p,_){const x=[];for(let w=0;w<s.length;w++){const C=s[w];let I;for(let O=0;O<C.length-1;O++){let j=C[O],V=C[O+1];j.x<n&&V.x<n||(j.x<n?j=new z(n,j.y+(n-j.x)/(V.x-j.x)*(V.y-j.y))._round():V.x<n&&(V=new z(n,j.y+(n-j.x)/(V.x-j.x)*(V.y-j.y))._round()),j.y<o&&V.y<o||(j.y<o?j=new z(j.x+(o-j.y)/(V.y-j.y)*(V.x-j.x),o)._round():V.y<o&&(V=new z(j.x+(o-j.y)/(V.y-j.y)*(V.x-j.x),o)._round()),j.x>=p&&V.x>=p||(j.x>=p?j=new z(p,j.y+(p-j.x)/(V.x-j.x)*(V.y-j.y))._round():V.x>=p&&(V=new z(p,j.y+(p-j.x)/(V.x-j.x)*(V.y-j.y))._round()),j.y>=_&&V.y>=_||(j.y>=_?j=new z(j.x+(_-j.y)/(V.y-j.y)*(V.x-j.x),_)._round():V.y>=_&&(V=new z(j.x+(_-j.y)/(V.y-j.y)*(V.x-j.x),_)._round()),I&&j.equals(I[I.length-1])||(I=[j],x.push(I)),I.push(V)))))}}return x}function d(s,n,o,p,_){switch(n){case 1:return(function(x,w,C,I){const O=[];for(const j of x)for(const V of j){const G=I===0?V.x:V.y;G>=w&&G<=C&&O.push([V])}return O})(s,o,p,_);case 2:return E(s,o,p,_,!1);case 3:return E(s,o,p,_,!0)}return[]}function v(s,n,o,p,_){const x=p===0?R:$;let w=[];const C=[];for(let j=0;j<s.length-1;j++){const V=s[j],G=s[j+1],H=p===0?V.x:V.y,te=p===0?G.x:G.y;let ne=!1;H<n?te>n&&w.push(x(V,G,n)):H>o?te<o&&w.push(x(V,G,o)):w.push(V),te<n&&H>=n&&(w.push(x(V,G,n)),ne=!0),te>o&&H<=o&&(w.push(x(V,G,o)),ne=!0),!_&&ne&&(C.push(w),w=[])}const I=s.length-1,O=p===0?s[I].x:s[I].y;return O>=n&&O<=o&&w.push(s[I]),_&&w.length>0&&!w[0].equals(w[w.length-1])&&w.push(new z(w[0].x,w[0].y)),w.length>0&&C.push(w),C}function E(s,n,o,p,_){const x=[];for(const w of s){const C=v(w,n,o,p,_);C.length>0&&x.push(...C)}return x}function R(s,n,o){return new z(o,s.y+(o-s.x)/(n.x-s.x)*(n.y-s.y))}function $(s,n,o){return new z(s.x+(o-s.y)/(n.y-s.y)*(n.x-s.x),o)}Yt("FeatureIndex",M_,{omit:["rawTileData","sourceLayerCoder"]});class Q extends z{constructor(n,o,p,_){super(n,o),this.angle=p,_!==void 0&&(this.segment=_)}clone(){return new Q(this.x,this.y,this.angle,this.segment)}}function pe(s,n,o,p,_){if(n.segment===void 0||o===0)return!0;let x=n,w=n.segment+1,C=0;for(;C>-o/2;){if(w--,w<0)return!1;C-=s[w].dist(x),x=s[w]}C+=s[w].dist(s[w+1]),w++;const I=[];let O=0;for(;C<o/2;){const j=s[w],V=s[w+1];if(!V)return!1;let G=s[w-1].angleTo(j)-j.angleTo(V);for(G=Math.abs((G+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:C,angleDelta:G}),O+=G;C-I[0].distance>p;)O-=I.shift().angleDelta;if(O>_)return!1;w++,C+=j.dist(V)}return!0}function je(s){let n=0;for(let o=0;o<s.length-1;o++)n+=s[o].dist(s[o+1]);return n}function ut(s,n,o){return s?.6*n*o:0}function xt(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function zt(s,n,o,p,_,x){const w=ut(o,_,x),C=xt(o,p)*x;let I=0;const O=je(s)/2;for(let j=0;j<s.length-1;j++){const V=s[j],G=s[j+1],H=V.dist(G);if(I+H>O){const te=(O-I)/H,ne=Yi.number(V.x,G.x,te),re=Yi.number(V.y,G.y,te),ue=new Q(ne,re,G.angleTo(V),j);return ue._round(),!w||pe(s,ue,C,w,n)?ue:void 0}I+=H}}function dt(s,n,o,p,_,x,w,C,I){const O=ut(p,x,w),j=xt(p,_),V=j*w,G=s[0].x===0||s[0].x===I||s[0].y===0||s[0].y===I;return n-V<n/4&&(n=V+n/4),gt(s,G?n/2*C%n:(j/2+2*x)*w*C%n,n,O,o,V,G,!1,I)}function gt(s,n,o,p,_,x,w,C,I){const O=x/2,j=je(s);let V=0,G=n-o,H=[];for(let te=0;te<s.length-1;te++){const ne=s[te],re=s[te+1],ue=ne.dist(re),Ce=re.angleTo(ne);for(;G+o<V+ue;){G+=o;const fe=(G-V)/ue,ye=Yi.number(ne.x,re.x,fe),Ie=Yi.number(ne.y,re.y,fe);if(ye>=0&&ye<I&&Ie>=0&&Ie<I&&G-O>=0&&G+O<=j){const Le=new Q(ye,Ie,Ce,te);Le._round(),p&&!pe(s,Le,x,p,_)||H.push(Le)}}V+=ue}return C||H.length||w||(H=gt(s,V/2,o,p,_,x,w,!0,I)),H}function dn(s,n,o,p){const _=[],x=s.image,w=x.pixelRatio,C=x.paddedRect.w-2,I=x.paddedRect.h-2;let O={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const j=x.stretchX||[[0,C]],V=x.stretchY||[[0,I]],G=(ct,tn)=>ct+tn[1]-tn[0],H=j.reduce(G,0),te=V.reduce(G,0),ne=C-H,re=I-te;let ue=0,Ce=H,fe=0,ye=te,Ie=0,Le=ne,Qe=0,bt=re;if(x.content&&p){const ct=x.content,tn=ct[2]-ct[0],Kt=ct[3]-ct[1];(x.textFitWidth||x.textFitHeight)&&(O=eh(s)),ue=An(j,0,ct[0]),fe=An(V,0,ct[1]),Ce=An(j,ct[0],ct[2]),ye=An(V,ct[1],ct[3]),Ie=ct[0]-ue,Qe=ct[1]-fe,Le=tn-Ce,bt=Kt-ye}const ft=O.x1,St=O.y1,Vt=O.x2-ft,Et=O.y2-St,yt=(ct,tn,Kt,nn)=>{const Ht=Ye(ct.stretch-ue,Ce,Vt,ft),pn=Ze(ct.fixed-Ie,Le,ct.stretch,H),Ti=Ye(tn.stretch-fe,ye,Et,St),ni=Ze(tn.fixed-Qe,bt,tn.stretch,te),Or=Ye(Kt.stretch-ue,Ce,Vt,ft),Fo=Ze(Kt.fixed-Ie,Le,Kt.stretch,H),La=Ye(nn.stretch-fe,ye,Et,St),Nr=Ze(nn.fixed-Qe,bt,nn.stretch,te),Tr=new z(Ht,Ti),Fi=new z(Or,Ti),Jr=new z(Or,La),oa=new z(Ht,La),vr=new z(pn/w,ni/w),fl=new z(Fo/w,Nr/w),Uo=n*Math.PI/180;if(Uo){const mo=Math.sin(Uo),Vr=Math.cos(Uo),Ra=[Vr,-mo,mo,Vr];Tr._matMult(Ra),Fi._matMult(Ra),oa._matMult(Ra),Jr._matMult(Ra)}const pl=ct.stretch+ct.fixed,pu=tn.stretch+tn.fixed;return{tl:Tr,tr:Fi,bl:oa,br:Jr,tex:{x:x.paddedRect.x+1+pl,y:x.paddedRect.y+1+pu,w:Kt.stretch+Kt.fixed-pl,h:nn.stretch+nn.fixed-pu},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:vr,pixelOffsetBR:fl,minFontScaleX:Le/w/Vt,minFontScaleY:bt/w/Et,isSDF:o}};if(p&&(x.stretchX||x.stretchY)){const ct=nr(j,ne,H),tn=nr(V,re,te);for(let Kt=0;Kt<ct.length-1;Kt++){const nn=ct[Kt],Ht=ct[Kt+1];for(let pn=0;pn<tn.length-1;pn++)_.push(yt(nn,tn[pn],Ht,tn[pn+1]))}}else _.push(yt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:I+1}));return _}function An(s,n,o){let p=0;for(const _ of s)p+=Math.max(n,Math.min(o,_[1]))-Math.max(n,Math.min(o,_[0]));return p}function nr(s,n,o){const p=[{fixed:-1,stretch:0}];for(const[_,x]of s){const w=p[p.length-1];p.push({fixed:_-w.stretch,stretch:w.stretch}),p.push({fixed:_-w.stretch,stretch:w.stretch+(x-_)})}return p.push({fixed:n+1,stretch:o}),p}function Ye(s,n,o,p){return s/n*o+p}function Ze(s,n,o,p){return s-n*o/p}Yt("Anchor",Q);class lt{constructor(n,o,p,_,x,w,C,I,O,j){var V;if(this.boxStartIndex=n.length,O){let G=w.top,H=w.bottom;const te=w.collisionPadding;te&&(G-=te[1],H+=te[3]);let ne=H-G;ne>0&&(ne=Math.max(10,ne),this.circleDiameter=ne)}else{const G=!((V=w.image)===null||V===void 0)&&V.content&&(w.image.textFitWidth||w.image.textFitHeight)?eh(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};G.y1=G.y1*C-I[0],G.y2=G.y2*C+I[2],G.x1=G.x1*C-I[3],G.x2=G.x2*C+I[1];const H=w.collisionPadding;if(H&&(G.x1-=H[0]*C,G.y1-=H[1]*C,G.x2+=H[2]*C,G.y2+=H[3]*C),j){const te=new z(G.x1,G.y1),ne=new z(G.x2,G.y1),re=new z(G.x1,G.y2),ue=new z(G.x2,G.y2),Ce=j*Math.PI/180;te._rotate(Ce),ne._rotate(Ce),re._rotate(Ce),ue._rotate(Ce),G.x1=Math.min(te.x,ne.x,re.x,ue.x),G.x2=Math.max(te.x,ne.x,re.x,ue.x),G.y1=Math.min(te.y,ne.y,re.y,ue.y),G.y2=Math.max(te.y,ne.y,re.y,ue.y)}n.emplaceBack(o.x,o.y,G.x1,G.y1,G.x2,G.y2,p,_,x)}this.boxEndIndex=n.length}}class Tt{constructor(n=[],o=(p,_)=>p<_?-1:p>_?1:0){if(this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:o,compare:p}=this,_=o[n];for(;n>0;){const x=n-1>>1,w=o[x];if(p(_,w)>=0)break;o[n]=w,n=x}o[n]=_}_down(n){const{data:o,compare:p}=this,_=this.length>>1,x=o[n];for(;n<_;){let w=1+(n<<1);const C=w+1;if(C<this.length&&p(o[C],o[w])<0&&(w=C),p(o[w],x)>=0)break;o[n]=o[w],n=w}o[n]=x}}function Tn(s,n=1,o=!1){const p=Wh.fromPoints(s[0]),_=Math.min(p.width(),p.height());let x=_/2;const w=new Tt([],Bi),{minX:C,minY:I,maxX:O,maxY:j}=p;if(_===0)return new z(C,I);for(let H=C;H<O;H+=_)for(let te=I;te<j;te+=_)w.push(new fn(H+x,te+x,x,s));let V=(function(H){let te=0,ne=0,re=0;const ue=H[0];for(let Ce=0,fe=ue.length,ye=fe-1;Ce<fe;ye=Ce++){const Ie=ue[Ce],Le=ue[ye],Qe=Ie.x*Le.y-Le.x*Ie.y;ne+=(Ie.x+Le.x)*Qe,re+=(Ie.y+Le.y)*Qe,te+=3*Qe}return new fn(ne/te,re/te,0,H)})(s),G=w.length;for(;w.length;){const H=w.pop();(H.d>V.d||!V.d)&&(V=H,o&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,G)),H.max-V.d<=n||(x=H.h/2,w.push(new fn(H.p.x-x,H.p.y-x,x,s)),w.push(new fn(H.p.x+x,H.p.y-x,x,s)),w.push(new fn(H.p.x-x,H.p.y+x,x,s)),w.push(new fn(H.p.x+x,H.p.y+x,x,s)),G+=4)}return o&&(console.log(`num probes: ${G}`),console.log(`best distance: ${V.d}`)),V.p}function Bi(s,n){return n.max-s.max}function fn(s,n,o,p){this.p=new z(s,n),this.h=o,this.d=(function(_,x){let w=!1,C=1/0;for(let I=0;I<x.length;I++){const O=x[I];for(let j=0,V=O.length,G=V-1;j<V;G=j++){const H=O[j],te=O[G];H.y>_.y!=te.y>_.y&&_.x<(te.x-H.x)*(_.y-H.y)/(te.y-H.y)+H.x&&(w=!w),C=Math.min(C,ky(_,H,te))}}return(w?1:-1)*Math.sqrt(C)})(this.p,p),this.max=this.d+this.h*Math.SQRT2}var wn;m.aP=void 0,(wn=m.aP||(m.aP={}))[wn.center=1]="center",wn[wn.left=2]="left",wn[wn.right=3]="right",wn[wn.top=4]="top",wn[wn.bottom=5]="bottom",wn[wn["top-left"]=6]="top-left",wn[wn["top-right"]=7]="top-right",wn[wn["bottom-left"]=8]="bottom-left",wn[wn["bottom-right"]=9]="bottom-right";const hi=Number.POSITIVE_INFINITY;function Ni(s,n){return n[1]!==hi?(function(o,p,_){let x=0,w=0;switch(p=Math.abs(p),_=Math.abs(_),o){case"top-right":case"top-left":case"top":w=_-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-_}switch(o){case"top-right":case"bottom-right":case"right":x=-p;break;case"top-left":case"bottom-left":case"left":x=p}return[x,w]})(s,n[0],n[1]):(function(o,p){let _=0,x=0;p<0&&(p=0);const w=p/Math.SQRT2;switch(o){case"top-right":case"top-left":x=w-7;break;case"bottom-right":case"bottom-left":x=7-w;break;case"bottom":x=7-p;break;case"top":x=p-7}switch(o){case"top-right":case"bottom-right":_=-w;break;case"top-left":case"bottom-left":_=w;break;case"left":_=p;break;case"right":_=-p}return[_,x]})(s,n[0])}function rh(s,n,o){var p;const _=s.layout,x=(p=_.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(n,{},o);if(x){const C=x.values,I=[];for(let O=0;O<C.length;O+=2){const j=I[O]=C[O],V=C[O+1].map((G=>G*wa));j.startsWith("top")?V[1]-=7:j.startsWith("bottom")&&(V[1]+=7),I[O+1]=V}return new Ji(I)}const w=_.get("text-variable-anchor");if(w){let C;C=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(n,{},o)*wa,hi]:_.get("text-offset").evaluate(n,{},o).map((O=>O*wa));const I=[];for(const O of w)I.push(O,Ni(O,C));return new Ji(I)}return null}function z_(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function lR(s,n,o,p,_,x,w,C,I,O,j,V){let G=x.textMaxSize.evaluate(n,{});G===void 0&&(G=w);const H=s.layers[0].layout,te=H.get("icon-offset").evaluate(n,{},j),ne=_E(o.horizontal),re=w/24,ue=s.tilePixelRatio*re,Ce=s.tilePixelRatio*G/24,fe=s.tilePixelRatio*C,ye=s.tilePixelRatio*H.get("symbol-spacing"),Ie=H.get("text-padding")*s.tilePixelRatio,Le=(function(Kt,nn,Ht,pn=1){const Ti=Kt.get("icon-padding").evaluate(nn,{},Ht),ni=Ti&&Ti.values;return[ni[0]*pn,ni[1]*pn,ni[2]*pn,ni[3]*pn]})(H,n,j,s.tilePixelRatio),Qe=H.get("text-max-angle")/180*Math.PI,bt=H.get("text-rotation-alignment")!=="viewport"&&H.get("symbol-placement")!=="point",ft=H.get("icon-rotation-alignment")==="map"&&H.get("symbol-placement")!=="point",St=H.get("symbol-placement"),Vt=ye/2,Et=H.get("icon-text-fit");let yt;p&&Et!=="none"&&(s.allowVerticalPlacement&&o.vertical&&(yt=Cc(p,o.vertical,Et,H.get("icon-text-fit-padding"),te,re)),ne&&(p=Cc(p,ne,Et,H.get("icon-text-fit-padding"),te,re)));const ct=j?V.line.getGranularityForZoomLevel(j.z):1,tn=(Kt,nn)=>{nn.x<0||nn.x>=Bt||nn.y<0||nn.y>=Bt||(function(Ht,pn,Ti,ni,Or,Fo,La,Nr,Tr,Fi,Jr,oa,vr,fl,Uo,pl,pu,mo,Vr,Ra,Qr,go,Xd,ah,P_){const Wf=Ht.addToLineVertexArray(pn,Ti);let cm,Vg,Zg,qg,wE=0,SE=0,TE=0,EE=0,Z1=-1,q1=-1;const Yd={};let AE=Lr("");if(Ht.allowVerticalPlacement&&ni.vertical){const us=Nr.layout.get("text-rotate").evaluate(Qr,{},ah)+90;Zg=new lt(Tr,pn,Fi,Jr,oa,ni.vertical,vr,fl,Uo,us),La&&(qg=new lt(Tr,pn,Fi,Jr,oa,La,pu,mo,Uo,us))}if(Or){const us=Nr.layout.get("icon-rotate").evaluate(Qr,{}),kc=Nr.layout.get("icon-text-fit")!=="none",um=dn(Or,us,Xd,kc),sh=La?dn(La,us,Xd,kc):void 0;Vg=new lt(Tr,pn,Fi,Jr,oa,Or,pu,mo,!1,us),wE=4*um.length;const hm=Ht.iconSizeData;let id=null;hm.kind==="source"?(id=[hl*Nr.layout.get("icon-size").evaluate(Qr,{})],id[0]>Gh&&bi(`${Ht.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):hm.kind==="composite"&&(id=[hl*go.compositeIconSizes[0].evaluate(Qr,{},ah),hl*go.compositeIconSizes[1].evaluate(Qr,{},ah)],(id[0]>Gh||id[1]>Gh)&&bi(`${Ht.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ht.addSymbols(Ht.icon,um,id,Ra,Vr,Qr,m.az.none,pn,Wf.lineStartIndex,Wf.lineLength,-1,ah),Z1=Ht.icon.placedSymbolArray.length-1,sh&&(SE=4*sh.length,Ht.addSymbols(Ht.icon,sh,id,Ra,Vr,Qr,m.az.vertical,pn,Wf.lineStartIndex,Wf.lineLength,-1,ah),q1=Ht.icon.placedSymbolArray.length-1)}const CE=Object.keys(ni.horizontal);for(const us of CE){const kc=ni.horizontal[us];if(!cm){AE=Lr(kc.text);const sh=Nr.layout.get("text-rotate").evaluate(Qr,{},ah);cm=new lt(Tr,pn,Fi,Jr,oa,kc,vr,fl,Uo,sh)}const um=kc.positionedLines.length===1;if(TE+=yE(Ht,pn,kc,Fo,Nr,Uo,Qr,pl,Wf,ni.vertical?m.az.horizontal:m.az.horizontalOnly,um?CE:[us],Yd,Z1,go,ah),um)break}ni.vertical&&(EE+=yE(Ht,pn,ni.vertical,Fo,Nr,Uo,Qr,pl,Wf,m.az.vertical,["vertical"],Yd,q1,go,ah));const hR=cm?cm.boxStartIndex:Ht.collisionBoxArray.length,dR=cm?cm.boxEndIndex:Ht.collisionBoxArray.length,fR=Zg?Zg.boxStartIndex:Ht.collisionBoxArray.length,pR=Zg?Zg.boxEndIndex:Ht.collisionBoxArray.length,mR=Vg?Vg.boxStartIndex:Ht.collisionBoxArray.length,gR=Vg?Vg.boxEndIndex:Ht.collisionBoxArray.length,yR=qg?qg.boxStartIndex:Ht.collisionBoxArray.length,_R=qg?qg.boxEndIndex:Ht.collisionBoxArray.length;let oh=-1;const X0=(us,kc)=>us&&us.circleDiameter?Math.max(us.circleDiameter,kc):kc;oh=X0(cm,oh),oh=X0(Zg,oh),oh=X0(Vg,oh),oh=X0(qg,oh);const ME=oh>-1?1:0;ME&&(oh*=P_/wa),Ht.glyphOffsetArray.length>=jf.MAX_GLYPHS&&bi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qr.sortKey!==void 0&&Ht.addToSortKeyRanges(Ht.symbolInstances.length,Qr.sortKey);const vR=rh(Nr,Qr,ah),[bR,xR]=(function(us,kc){const um=us.length,sh=kc?.values;if(sh?.length>0)for(let hm=0;hm<sh.length;hm+=2){const id=sh[hm+1];us.emplaceBack(m.aP[sh[hm]],id[0],id[1])}return[um,us.length]})(Ht.textAnchorOffsets,vR);Ht.symbolInstances.emplaceBack(pn.x,pn.y,Yd.right>=0?Yd.right:-1,Yd.center>=0?Yd.center:-1,Yd.left>=0?Yd.left:-1,Yd.vertical||-1,Z1,q1,AE,hR,dR,fR,pR,mR,gR,yR,_R,Fi,TE,EE,wE,SE,ME,0,vr,oh,bR,xR)})(s,nn,Kt,o,p,_,yt,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,ue,[Ie,Ie,Ie,Ie],bt,I,fe,Le,ft,te,n,x,O,j,w)};if(St==="line")for(const Kt of l(n.geometry,0,0,Bt,Bt)){const nn=Xu(Kt,ct),Ht=dt(nn,ye,Qe,o.vertical||ne,p,24,Ce,s.overscaling,Bt);for(const pn of Ht)ne&&cR(s,ne.text,Vt,pn)||tn(nn,pn)}else if(St==="line-center"){for(const Kt of n.geometry)if(Kt.length>1){const nn=Xu(Kt,ct),Ht=zt(nn,Qe,o.vertical||ne,p,24,Ce);Ht&&tn(nn,Ht)}}else if(n.type==="Polygon")for(const Kt of sc(n.geometry,0)){const nn=Tn(Kt,16);tn(Xu(Kt[0],ct,!0),new Q(nn.x,nn.y,0))}else if(n.type==="LineString")for(const Kt of n.geometry){const nn=Xu(Kt,ct);tn(nn,new Q(nn[0].x,nn[0].y,0))}else if(n.type==="Point")for(const Kt of n.geometry)for(const nn of Kt)tn([nn],new Q(nn.x,nn.y,0))}function yE(s,n,o,p,_,x,w,C,I,O,j,V,G,H,te){const ne=(function(Ce,fe,ye,Ie,Le,Qe,bt,ft){const St=Ie.layout.get("text-rotate").evaluate(Qe,{})*Math.PI/180,Vt=[];for(const Et of fe.positionedLines)for(const yt of Et.positionedGlyphs){if(!yt.rect)continue;const ct=yt.rect||{};let tn=4,Kt=!0,nn=1,Ht=0;const pn=(Le||ft)&&yt.vertical,Ti=yt.metrics.advance*yt.scale/2;if(ft&&fe.verticalizable&&(Ht=Et.lineOffset/2-(yt.imageName?-(wa-yt.metrics.width*yt.scale)/2:(yt.scale-1)*wa)),yt.imageName){const mo=bt[yt.imageName];Kt=mo.sdf,nn=mo.pixelRatio,tn=1/nn}const ni=Le?[yt.x+Ti,yt.y]:[0,0];let Or=Le?[0,0]:[yt.x+Ti+ye[0],yt.y+ye[1]-Ht],Fo=[0,0];pn&&(Fo=Or,Or=[0,0]);const La=yt.metrics.isDoubleResolution?2:1,Nr=(yt.metrics.left-tn)*yt.scale-Ti+Or[0],Tr=(-yt.metrics.top-tn)*yt.scale+Or[1],Fi=Nr+ct.w/La*yt.scale/nn,Jr=Tr+ct.h/La*yt.scale/nn,oa=new z(Nr,Tr),vr=new z(Fi,Tr),fl=new z(Nr,Jr),Uo=new z(Fi,Jr);if(pn){const mo=new z(-Ti,Ti- -17),Vr=-Math.PI/2,Ra=12-Ti,Qr=new z(22-Ra,-(yt.imageName?Ra:0)),go=new z(...Fo);oa._rotateAround(Vr,mo)._add(Qr)._add(go),vr._rotateAround(Vr,mo)._add(Qr)._add(go),fl._rotateAround(Vr,mo)._add(Qr)._add(go),Uo._rotateAround(Vr,mo)._add(Qr)._add(go)}if(St){const mo=Math.sin(St),Vr=Math.cos(St),Ra=[Vr,-mo,mo,Vr];oa._matMult(Ra),vr._matMult(Ra),fl._matMult(Ra),Uo._matMult(Ra)}const pl=new z(0,0),pu=new z(0,0);Vt.push({tl:oa,tr:vr,bl:fl,br:Uo,tex:ct,writingMode:fe.writingMode,glyphOffset:ni,sectionIndex:yt.sectionIndex,isSDF:Kt,pixelOffsetTL:pl,pixelOffsetBR:pu,minFontScaleX:0,minFontScaleY:0})}return Vt})(0,o,C,_,x,w,p,s.allowVerticalPlacement),re=s.textSizeData;let ue=null;re.kind==="source"?(ue=[hl*_.layout.get("text-size").evaluate(w,{})],ue[0]>Gh&&bi(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):re.kind==="composite"&&(ue=[hl*H.compositeTextSizes[0].evaluate(w,{},te),hl*H.compositeTextSizes[1].evaluate(w,{},te)],(ue[0]>Gh||ue[1]>Gh)&&bi(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,ne,ue,C,x,w,O,n,I.lineStartIndex,I.lineLength,G,te);for(const Ce of j)V[Ce]=s.text.placedSymbolArray.length-1;return 4*ne.length}function _E(s){for(const n in s)return s[n];return null}function cR(s,n,o,p){const _=s.compareText;if(n in _){const x=_[n];for(let w=x.length-1;w>=0;w--)if(p.dist(x[w])<o)return!0}else _[n]=[];return _[n].push(p),!1}const vE=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class N1{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,p]=new Uint8Array(n,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=p>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const x=vE[15&p];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(n,2,1),[C]=new Uint32Array(n,4,1);return new N1(C,w,x,n)}constructor(n,o=64,p=Float64Array,_){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=p,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const x=vE.indexOf(this.ArrayType),w=2*n*this.ArrayType.BYTES_PER_ELEMENT,C=n*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-C%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${p}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+C+I,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+w+C+I),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+C+I,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=n)}add(n,o){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=n,this.coords[this._pos++]=o,p}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return $1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,o,p,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:C}=this,I=[0,x.length-1,0],O=[];for(;I.length;){const j=I.pop()||0,V=I.pop()||0,G=I.pop()||0;if(V-G<=C){for(let re=G;re<=V;re++){const ue=w[2*re],Ce=w[2*re+1];ue>=n&&ue<=p&&Ce>=o&&Ce<=_&&O.push(x[re])}continue}const H=G+V>>1,te=w[2*H],ne=w[2*H+1];te>=n&&te<=p&&ne>=o&&ne<=_&&O.push(x[H]),(j===0?n<=te:o<=ne)&&(I.push(G),I.push(H-1),I.push(1-j)),(j===0?p>=te:_>=ne)&&(I.push(H+1),I.push(V),I.push(1-j))}return O}within(n,o,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:w}=this,C=[0,_.length-1,0],I=[],O=p*p;for(;C.length;){const j=C.pop()||0,V=C.pop()||0,G=C.pop()||0;if(V-G<=w){for(let re=G;re<=V;re++)xE(x[2*re],x[2*re+1],n,o)<=O&&I.push(_[re]);continue}const H=G+V>>1,te=x[2*H],ne=x[2*H+1];xE(te,ne,n,o)<=O&&I.push(_[H]),(j===0?n-p<=te:o-p<=ne)&&(C.push(G),C.push(H-1),C.push(1-j)),(j===0?n+p>=te:o+p>=ne)&&(C.push(H+1),C.push(V),C.push(1-j))}return I}}function $1(s,n,o,p,_,x){if(_-p<=o)return;const w=p+_>>1;bE(s,n,w,p,_,x),$1(s,n,o,p,w-1,1-x),$1(s,n,o,w+1,_,1-x)}function bE(s,n,o,p,_,x){for(;_>p;){if(_-p>600){const O=_-p+1,j=o-p+1,V=Math.log(O),G=.5*Math.exp(2*V/3),H=.5*Math.sqrt(V*G*(O-G)/O)*(j-O/2<0?-1:1);bE(s,n,o,Math.max(p,Math.floor(o-j*G/O+H)),Math.min(_,Math.floor(o+(O-j)*G/O+H)),x)}const w=n[2*o+x];let C=p,I=_;for(I_(s,n,p,o),n[2*_+x]>w&&I_(s,n,p,_);C<I;){for(I_(s,n,C,I),C++,I--;n[2*C+x]<w;)C++;for(;n[2*I+x]>w;)I--}n[2*p+x]===w?I_(s,n,p,I):(I++,I_(s,n,I,_)),I<=o&&(p=I+1),o<=I&&(_=I-1)}}function I_(s,n,o,p){j1(s,o,p),j1(n,2*o,2*p),j1(n,2*o+1,2*p+1)}function j1(s,n,o){const p=s[n];s[n]=s[o],s[o]=p}function xE(s,n,o,p){const _=s-o,x=n-p;return _*_+x*x}var B1;m.cH=void 0,(B1=m.cH||(m.cH={})).create="create",B1.load="load",B1.fullLoad="fullLoad";let W0=null,k_=[];const F1=1e3/60,U1="loadTime",V1="fullLoadTime",uR={mark(s){performance.mark(s)},frame(s){const n=s;W0!=null&&k_.push(n-W0),W0=n},clearMetrics(){W0=null,k_=[],performance.clearMeasures(U1),performance.clearMeasures(V1);for(const s in m.cH)performance.clearMarks(m.cH[s])},getPerformanceMetrics(){performance.measure(U1,m.cH.create,m.cH.load),performance.measure(V1,m.cH.create,m.cH.fullLoad);const s=performance.getEntriesByName(U1)[0].duration,n=performance.getEntriesByName(V1)[0].duration,o=k_.length,p=1/(k_.reduce(((x,w)=>x+w),0)/o/1e3),_=k_.filter((x=>x>F1)).reduce(((x,w)=>x+(w-F1)/F1),0);return{loadTime:s,fullLoadTime:n,fps:p,percentDroppedFrames:_/(o+_)*100,totalFrames:o}}};m.$=ae,m.A=we,m.B=nl,m.C=xa,m.D=en,m.E=ti,m.F=function([s,n,o]){return n+=90,n*=Math.PI/180,o*=Math.PI/180,{x:s*Math.cos(n)*Math.sin(o),y:s*Math.sin(n)*Math.sin(o),z:s*Math.cos(o)}},m.G=Yi,m.H=Ri,m.I=Hi,m.J=yf,m.K=function(s){if(Pi==null){const n=s.navigator?s.navigator.userAgent:null;Pi=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Pi},m.L=class{constructor(s,n){this.target=s,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Tg((()=>this.process())),this.subscription=Kl(this.target,"message",(o=>this.receive(o)),!1),this.globalScope=da(self)?s:window}registerMessageHandler(s,n){this.messageHandlers[s]=n}unregisterMessageHandler(s){delete this.messageHandlers[s]}sendAsync(s,n){return new Promise(((o,p)=>{const _=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=n?Kl(n.signal,"abort",(()=>{x?.unsubscribe(),delete this.resolveRejects[_];const I={id:_,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)}),a_):null;this.resolveRejects[_]={resolve:I=>{x?.unsubscribe(),o(I)},reject:I=>{x?.unsubscribe(),p(I)}};const w=[],C=Object.assign(Object.assign({},s),{id:_,sourceMapId:this.mapId,origin:location.origin,data:il(s.data,w)});this.target.postMessage(C,{transfer:w})}))}receive(s){const n=s.data,o=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[o];const p=this.abortControllers[o];return delete this.abortControllers[o],void(p&&p.abort())}if(da(self)||n.mustQueue)return this.tasks[o]=n,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,n)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),n=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(s,n)}processTask(s,n){return c(this,void 0,void 0,(function*(){if(n.type==="<response>"){const _=this.resolveRejects[s];return delete this.resolveRejects[s],_?void(n.error?_.reject(Oh(n.error)):_.resolve(Oh(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=Oh(n.data),p=new AbortController;this.abortControllers[s]=p;try{const _=yield this.messageHandlers[n.type](n.sourceMapId,o,p);this.completeTask(s,null,_)}catch(_){this.completeTask(s,_)}}))}completeTask(s,n,o){const p=[];delete this.abortControllers[s];const _={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?il(n):null,data:il(o,p)};this.target.postMessage(_,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.M=He,m.N=function(){var s=new we(16);return we!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},m.O=function(s,n,o){var p,_,x,w,C,I,O,j,V,G,H,te,ne=o[0],re=o[1],ue=o[2];return n===s?(s[12]=n[0]*ne+n[4]*re+n[8]*ue+n[12],s[13]=n[1]*ne+n[5]*re+n[9]*ue+n[13],s[14]=n[2]*ne+n[6]*re+n[10]*ue+n[14],s[15]=n[3]*ne+n[7]*re+n[11]*ue+n[15]):(_=n[1],x=n[2],w=n[3],C=n[4],I=n[5],O=n[6],j=n[7],V=n[8],G=n[9],H=n[10],te=n[11],s[0]=p=n[0],s[1]=_,s[2]=x,s[3]=w,s[4]=C,s[5]=I,s[6]=O,s[7]=j,s[8]=V,s[9]=G,s[10]=H,s[11]=te,s[12]=p*ne+C*re+V*ue+n[12],s[13]=_*ne+I*re+G*ue+n[13],s[14]=x*ne+O*re+H*ue+n[14],s[15]=w*ne+j*re+te*ue+n[15]),s},m.P=z,m.Q=function(s,n,o){var p=o[0],_=o[1],x=o[2];return s[0]=n[0]*p,s[1]=n[1]*p,s[2]=n[2]*p,s[3]=n[3]*p,s[4]=n[4]*_,s[5]=n[5]*_,s[6]=n[6]*_,s[7]=n[7]*_,s[8]=n[8]*x,s[9]=n[9]*x,s[10]=n[10]*x,s[11]=n[11]*x,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},m.R=No,m.S=function(s,n,o){var p=n[0],_=n[1],x=n[2],w=n[3],C=n[4],I=n[5],O=n[6],j=n[7],V=n[8],G=n[9],H=n[10],te=n[11],ne=n[12],re=n[13],ue=n[14],Ce=n[15],fe=o[0],ye=o[1],Ie=o[2],Le=o[3];return s[0]=fe*p+ye*C+Ie*V+Le*ne,s[1]=fe*_+ye*I+Ie*G+Le*re,s[2]=fe*x+ye*O+Ie*H+Le*ue,s[3]=fe*w+ye*j+Ie*te+Le*Ce,s[4]=(fe=o[4])*p+(ye=o[5])*C+(Ie=o[6])*V+(Le=o[7])*ne,s[5]=fe*_+ye*I+Ie*G+Le*re,s[6]=fe*x+ye*O+Ie*H+Le*ue,s[7]=fe*w+ye*j+Ie*te+Le*Ce,s[8]=(fe=o[8])*p+(ye=o[9])*C+(Ie=o[10])*V+(Le=o[11])*ne,s[9]=fe*_+ye*I+Ie*G+Le*re,s[10]=fe*x+ye*O+Ie*H+Le*ue,s[11]=fe*w+ye*j+Ie*te+Le*Ce,s[12]=(fe=o[12])*p+(ye=o[13])*C+(Ie=o[14])*V+(Le=o[15])*ne,s[13]=fe*_+ye*I+Ie*G+Le*re,s[14]=fe*x+ye*O+Ie*H+Le*ue,s[15]=fe*w+ye*j+Ie*te+Le*Ce,s},m.T=tg,m.U=function(s,n){const o={};for(let p=0;p<n.length;p++){const _=n[p];_ in s&&(o[_]=s[_])}return o},m.V=du,m.W=At,m.X=o_,m.Y=z0,m.Z=Re,m._=c,m.a=ge,m.a$=Pt,m.a0=Me,m.a1=Us,m.a2=Os,m.a3=k0,m.a4=qp,m.a5=Bt,m.a6=function(s,n,o){if(!s)return n||{};if(!n)return s||{};const p=Hp(s),_=Hp(n);(function(w,C){C.removeAll&&(w.add.clear(),w.update.clear(),w.remove.clear(),C.remove.clear());for(const I of C.remove)w.add.delete(I),w.update.delete(I);for(const[I,O]of C.update){const j=w.update.get(I);j&&(C.update.set(I,l_(j,O)),w.update.delete(I))}})(p,_);const x={};if((p.removeAll||_.removeAll)&&(x.removeAll=!0),x.remove=new Set([...p.remove,..._.remove]),x.add=new Map([...p.add,..._.add]),x.update=new Map([...p.update,..._.update]),x.remove.size&&x.add.size)for(const w of x.add.keys())x.remove.delete(w);return(function(w){const C={};return w.removeAll&&(C.removeAll=w.removeAll),w.remove&&(C.remove=Array.from(w.remove)),w.add&&(C.add=Array.from(w.add.values())),w.update&&(C.update=Array.from(w.update.values())),C})(x)},m.a7=function(s,n){const o=new Map;if(s==null||s.type==null)return o;if(s.type==="Feature"){const p=Gp(s,n);return p==null?void 0:(o.set(p,s),o)}if(s.type==="FeatureCollection"){const p=new Set;for(const _ of s.features){const x=Gp(_,n);if(x==null||p.has(x))return;p.add(x),o.set(x,_)}return o}},m.a8=function(s,n,o){var p,_;const x=[];if(n.removeAll)s.clear();else if(n.remove)for(const w of n.remove){const C=s.get(w);C&&(x.push(C.geometry),s.delete(w))}if(n.add)for(const w of n.add){const C=Gp(w,o);if(C==null)continue;const I=s.get(C);I&&x.push(I.geometry),x.push(w.geometry),s.set(C,w)}if(n.update)for(const w of n.update){const C=s.get(w.id);if(!C)continue;const I=!!w.newGeometry,O=w.removeAllProperties||((p=w.removeProperties)===null||p===void 0?void 0:p.length)>0||((_=w.addOrUpdateProperties)===null||_===void 0?void 0:_.length)>0;if(!I&&!O)continue;x.push(C.geometry);const j=Object.assign({},C);if(s.set(w.id,j),I&&(x.push(w.newGeometry),j.geometry=w.newGeometry),O){if(j.properties=w.removeAllProperties?{}:Object.assign({},j.properties||{}),w.removeProperties)for(const V of w.removeProperties)delete j.properties[V];if(w.addOrUpdateProperties)for(const{key:V,value:G}of w.addOrUpdateProperties)j.properties[V]=G}}return x},m.a9=ji,m.aA=function(s,{uSize:n,uSizeT:o},{lowerSize:p,upperSize:_}){return s.kind==="source"?p/hl:s.kind==="composite"?Yi.number(p/hl,_/hl,o):n},m.aB=function(s,n){var o=n[0],p=n[1],_=n[2],x=n[3],w=n[4],C=n[5],I=n[6],O=n[7],j=n[8],V=n[9],G=n[10],H=n[11],te=n[12],ne=n[13],re=n[14],ue=n[15],Ce=o*C-p*w,fe=o*I-_*w,ye=o*O-x*w,Ie=p*I-_*C,Le=p*O-x*C,Qe=_*O-x*I,bt=j*ne-V*te,ft=j*re-G*te,St=j*ue-H*te,Vt=V*re-G*ne,Et=V*ue-H*ne,yt=G*ue-H*re,ct=Ce*yt-fe*Et+ye*Vt+Ie*St-Le*ft+Qe*bt;return ct?(s[0]=(C*yt-I*Et+O*Vt)*(ct=1/ct),s[1]=(_*Et-p*yt-x*Vt)*ct,s[2]=(ne*Qe-re*Le+ue*Ie)*ct,s[3]=(G*Le-V*Qe-H*Ie)*ct,s[4]=(I*St-w*yt-O*ft)*ct,s[5]=(o*yt-_*St+x*ft)*ct,s[6]=(re*ye-te*Qe-ue*fe)*ct,s[7]=(j*Qe-G*ye+H*fe)*ct,s[8]=(w*Et-C*St+O*bt)*ct,s[9]=(p*St-o*Et-x*bt)*ct,s[10]=(te*Le-ne*ye+ue*Ce)*ct,s[11]=(V*ye-j*Le-H*Ce)*ct,s[12]=(C*ft-w*Vt-I*bt)*ct,s[13]=(o*Vt-p*ft+_*bt)*ct,s[14]=(ne*fe-te*Ie-re*Ce)*ct,s[15]=(j*Ie-V*fe+G*Ce)*ct,s):null},m.aC=mt,m.aD=function(s){var n=s[0],o=s[1];return Math.sqrt(n*n+o*o)},m.aE=function(s){return s[0]=0,s[1]=0,s},m.aF=function(s,n,o){return s[0]=n[0]*o,s[1]=n[1]*o,s},m.aG=t_,m.aH=ln,m.aI=function(s,n,o,p){const _=n.y-s.y,x=n.x-s.x,w=p.y-o.y,C=p.x-o.x,I=w*x-C*_;if(I===0)return null;const O=(C*(s.y-o.y)-w*(s.x-o.x))/I;return new z(s.x+O*x,s.y+O*_)},m.aJ=l,m.aK=jd,m.aL=function(s){let n=1/0,o=1/0,p=-1/0,_=-1/0;for(const x of s)n=Math.min(n,x.x),o=Math.min(o,x.y),p=Math.max(p,x.x),_=Math.max(_,x.y);return[n,o,p,_]},m.aM=wa,m.aN=jt,m.aO=function(s,n,o,p,_=!1){if(!o[0]&&!o[1])return[0,0];const x=_?p==="map"?-s.bearingInRadians:0:p==="viewport"?s.bearingInRadians:0;if(x){const w=Math.sin(x),C=Math.cos(x);o=[o[0]*C-o[1]*w,o[0]*w+o[1]*C]}return[_?o[0]:jt(n,o[0],s.zoom),_?o[1]:jt(n,o[1],s.zoom)]},m.aQ=vg,m.aR=z_,m.aS=Ky,m.aT=N1,m.aU=gr,m.aV=Rp,m.aW=_e,m.aX=Ut,m.aY=at,m.aZ=Xa,m.a_=s_,m.aa=Wh,m.ab=25,m.ac=Wa,m.ad=s=>{const n=window.document.createElement("video");return n.muted=!0,new Promise((o=>{n.onloadstart=()=>{o(n)};for(const p of s){const _=window.document.createElement("source");_t(p)||(n.crossOrigin="Anonymous"),_.src=p,n.appendChild(_)}}))},m.ae=ot,m.af=function(){return Cn++},m.ag=b,m.ah=jf,m.ai=lm,m.aj=Wt,m.ak=cl,m.al=Cg,m.am=function(s){const n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((o,p,_,x)=>{const w=_||x;return n[p]=!w||w.toLowerCase(),""})),n["max-age"]){const o=parseInt(n["max-age"],10);isNaN(o)?delete n["max-age"]:n["max-age"]=o}return n},m.an=Ft,m.ao=85.051129,m.ap=na,m.aq=function(s){return Math.pow(2,s)},m.ar=Se,m.as=I0,m.at=function(s){return Math.log(s)/Math.LN2},m.au=function(s){var n=s[0],o=s[1];return n*n+o*o},m.av=function(s){if(!s.length)return new Set;const n=Math.max(...s.map((I=>I.canonical.z)));let o=1/0,p=-1/0,_=1/0,x=-1/0;const w=[];for(const I of s){const{x:O,y:j,z:V}=I.canonical,G=Math.pow(2,n-V),H=O*G,te=j*G;w.push({id:I,x:H,y:te}),H<o&&(o=H),H>p&&(p=H),te<_&&(_=te),te>x&&(x=te)}const C=new Set;for(const I of w)I.x!==o&&I.x!==p&&I.y!==_&&I.y!==x||C.add(I.id);return C},m.aw=function(s,n){const o=Math.abs(2*s.wrap)-+(s.wrap<0),p=Math.abs(2*n.wrap)-+(n.wrap<0);return s.overscaledZ-n.overscaledZ||p-o||n.canonical.y-s.canonical.y||n.canonical.x-s.canonical.x},m.ax=class{constructor(s,n){this.max=s,this.onRemove=n,this.reset()}reset(){for(const s in this.data)for(const n of this.data[s])n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value);return this.data={},this.order=[],this}add(s,n,o){const p=s.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const _={value:n,timeout:void 0};if(o!==void 0&&(_.timeout=setTimeout((()=>{this.remove(s,_)}),o)),this.data[p].push(_),this.order.push(p),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const n=this.data[s].shift();return n.timeout&&clearTimeout(n.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),n.value}getByKey(s){const n=this.data[s];return n?n[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,n){if(!this.has(s))return this;const o=s.wrapped().key,p=n===void 0?0:this.data[o].indexOf(n),_=this.data[o][p];return this.data[o].splice(p,1),_.timeout&&clearTimeout(_.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(_.value),this.order.splice(this.order.indexOf(o),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this}filter(s){const n=[];for(const o in this.data)for(const p of this.data[o])s(p.value)||n.push(p);for(const o of n)this.remove(o.value.tileID,o)}},m.ay=function(s,n){let o=0,p=0;if(s.kind==="constant")p=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:_,minZoom:x,maxZoom:w}=s,C=_?Ft(xr.interpolationFactor(_,n,x,w),0,1):0;s.kind==="camera"?p=Yi.number(s.minSize,s.maxSize,C):o=C}return{uSizeT:o,uSize:p}},m.b=Ao,m.b$=ll,m.b0=Rt,m.b1=function(s){var n=new we(3);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n},m.b2=function(s,n,o){return s[0]=n[0]-o[0],s[1]=n[1]-o[1],s[2]=n[2]-o[2],s},m.b3=function(s,n){var o=n[0],p=n[1],_=n[2],x=o*o+p*p+_*_;return x>0&&(x=1/Math.sqrt(x)),s[0]=n[0]*x,s[1]=n[1]*x,s[2]=n[2]*x,s},m.b4=$t,m.b5=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]},m.b6=function(s,n,o){return s[0]=n[0]*o[0],s[1]=n[1]*o[1],s[2]=n[2]*o[2],s[3]=n[3]*o[3],s},m.b7=Ue,m.b8=function(s,n,o){const p=n[0]*o[0]+n[1]*o[1]+n[2]*o[2];return p===0?null:(-(s[0]*o[0]+s[1]*o[1]+s[2]*o[2])-o[3])/p},m.b9=cn,m.bA=function(s,n,o,p){return s[0]=n[0]+o[0]*p,s[1]=n[1]+o[1]*p,s[2]=n[2]+o[2]*p,s},m.bB=Ge,m.bC=function(s,n,o){var p=o[0],_=o[1],x=o[2],w=o[3],C=n[0],I=n[1],O=n[2],j=_*O-x*I,V=x*C-p*O,G=p*I-_*C;return s[0]=C+w*(j+=j)+_*(G+=G)-x*(V+=V),s[1]=I+w*V+x*j-p*G,s[2]=O+w*G+p*V-_*j,s},m.bD=function(s,n,o){const p=(function(I){var O=I[3],j=I[4],V=I[5],G=I[6],H=I[7],te=I[8];return I[0]*(te*j-V*H)+I[1]*(-te*O+V*G)+I[2]*(H*O-j*G)})([s[0],s[1],s[2],n[0],n[1],n[2],o[0],o[1],o[2]]);if(p===0)return null;const _=$t([],[n[0],n[1],n[2]],[o[0],o[1],o[2]]),x=$t([],[o[0],o[1],o[2]],[s[0],s[1],s[2]]),w=$t([],[s[0],s[1],s[2]],[n[0],n[1],n[2]]),C=Pt([],_,-s[3]);return Rt(C,C,Pt([],x,-n[3])),Rt(C,C,Pt([],w,-o[3])),Pt(C,C,1/p),C},m.bE=Eg,m.bF=function(){return new Float64Array(4)},m.bG=function(s,n,o,p){var _=[],x=[];return _[0]=n[0]-o[0],_[1]=n[1]-o[1],_[2]=n[2]-o[2],x[0]=_[0]*Math.cos(p)-_[1]*Math.sin(p),x[1]=_[0]*Math.sin(p)+_[1]*Math.cos(p),x[2]=_[2],s[0]=x[0]+o[0],s[1]=x[1]+o[1],s[2]=x[2]+o[2],s},m.bH=function(s,n,o,p){var _=[],x=[];return _[0]=n[0]-o[0],_[1]=n[1]-o[1],_[2]=n[2]-o[2],x[0]=_[0],x[1]=_[1]*Math.cos(p)-_[2]*Math.sin(p),x[2]=_[1]*Math.sin(p)+_[2]*Math.cos(p),s[0]=x[0]+o[0],s[1]=x[1]+o[1],s[2]=x[2]+o[2],s},m.bI=function(s,n,o,p){var _=[],x=[];return _[0]=n[0]-o[0],_[1]=n[1]-o[1],_[2]=n[2]-o[2],x[0]=_[2]*Math.sin(p)+_[0]*Math.cos(p),x[1]=_[1],x[2]=_[2]*Math.cos(p)-_[0]*Math.sin(p),s[0]=x[0]+o[0],s[1]=x[1]+o[1],s[2]=x[2]+o[2],s},m.bJ=function(s,n,o){var p=Math.sin(o),_=Math.cos(o),x=n[0],w=n[1],C=n[2],I=n[3],O=n[8],j=n[9],V=n[10],G=n[11];return n!==s&&(s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=x*_-O*p,s[1]=w*_-j*p,s[2]=C*_-V*p,s[3]=I*_-G*p,s[8]=x*p+O*_,s[9]=w*p+j*_,s[10]=C*p+V*_,s[11]=I*p+G*_,s},m.bK=function(s,n){const o=Oe(s,360),p=Oe(n,360),_=p-o,x=p>o?_-360:_+360;return Math.abs(_)<Math.abs(x)?_:x},m.bL=function(s){return s[0]=0,s[1]=0,s[2]=0,s},m.bM=function(s,n,o,p){const _=Math.sqrt(s*s+n*n),x=Math.sqrt(o*o+p*p);s/=_,n/=_,o/=x,p/=x;const w=Math.acos(s*o+n*p);return-n*o+s*p>0?w:-w},m.bN=function(s,n){const o=Oe(s,2*Math.PI),p=Oe(n,2*Math.PI);return Math.min(Math.abs(o-p),Math.abs(o-p+2*Math.PI),Math.abs(o-p-2*Math.PI))},m.bO=function(){const s={},n=Ke.$version;for(const o in Ke.$root){const p=Ke.$root[o];if(p.required){let _=null;_=o==="version"?n:p.type==="array"?[]:{},_!=null&&(s[o]=_)}}return s},m.bP=tt,m.bQ=bf,m.bR=function s(n,o){if(Array.isArray(n)){if(!Array.isArray(o)||n.length!==o.length)return!1;for(let p=0;p<n.length;p++)if(!s(n[p],o[p]))return!1;return!0}if(typeof n=="object"&&n!==null&&o!==null){if(typeof o!="object"||Object.keys(n).length!==Object.keys(o).length)return!1;for(const p in n)if(!s(n[p],o[p]))return!1;return!0}return n===o},m.bS=function(s){s=s.slice();const n=Object.create(null);for(let o=0;o<s.length;o++)n[s[o].id]=s[o];for(let o=0;o<s.length;o++)"ref"in s[o]&&(s[o]=Mr(s[o],n[s[o].ref]));return s},m.bT=function(s,n){if(s.type==="custom")return new r_(s,n);switch(s.type){case"background":return new yi(s,n);case"circle":return new Jm(s,n);case"color-relief":return new i0(s,n);case"fill":return new l0(s,n);case"fill-extrusion":return new Zy(s,n);case"heatmap":return new t0(s,n);case"hillshade":return new Rr(s,n);case"line":return new Gy(s,n);case"raster":return new bc(s,n);case"symbol":return new Hh(s,n)}},m.bU=s=>s.type==="raster",m.bV=Bn,m.bW=function(s,n){if(!s)return[{command:"setStyle",args:[n]}];let o=[];try{if(!Mn(s.version,n.version))return[{command:"setStyle",args:[n]}];Mn(s.center,n.center)||o.push({command:"setCenter",args:[n.center]}),Mn(s.state,n.state)||o.push({command:"setGlobalState",args:[n.state]}),Mn(s.centerAltitude,n.centerAltitude)||o.push({command:"setCenterAltitude",args:[n.centerAltitude]}),Mn(s.zoom,n.zoom)||o.push({command:"setZoom",args:[n.zoom]}),Mn(s.bearing,n.bearing)||o.push({command:"setBearing",args:[n.bearing]}),Mn(s.pitch,n.pitch)||o.push({command:"setPitch",args:[n.pitch]}),Mn(s.roll,n.roll)||o.push({command:"setRoll",args:[n.roll]}),Mn(s.sprite,n.sprite)||o.push({command:"setSprite",args:[n.sprite]}),Mn(s.glyphs,n.glyphs)||o.push({command:"setGlyphs",args:[n.glyphs]}),Mn(s.transition,n.transition)||o.push({command:"setTransition",args:[n.transition]}),Mn(s.light,n.light)||o.push({command:"setLight",args:[n.light]}),Mn(s.terrain,n.terrain)||o.push({command:"setTerrain",args:[n.terrain]}),Mn(s.sky,n.sky)||o.push({command:"setSky",args:[n.sky]}),Mn(s.projection,n.projection)||o.push({command:"setProjection",args:[n.projection]});const p={},_=[];(function(w,C,I,O){let j;for(j in C=C||{},w=w||{})Object.prototype.hasOwnProperty.call(w,j)&&(Object.prototype.hasOwnProperty.call(C,j)||xi(j,I,O));for(j in C)Object.prototype.hasOwnProperty.call(C,j)&&(Object.prototype.hasOwnProperty.call(w,j)?Mn(w[j],C[j])||(w[j].type==="geojson"&&C[j].type==="geojson"&&Di(w,C,j)?Ai(I,{command:"setGeoJSONSourceData",args:[j,C[j].data]}):hr(j,C,I,O)):Gr(j,C,I))})(s.sources,n.sources,_,p);const x=[];s.layers&&s.layers.forEach((w=>{"source"in w&&p[w.source]?o.push({command:"removeLayer",args:[w.id]}):x.push(w)})),o=o.concat(_),(function(w,C,I){C=C||[];const O=(w=w||[]).map(qc),j=C.map(qc),V=w.reduce(Ta,{}),G=C.reduce(Ta,{}),H=O.slice(),te=Object.create(null);let ne,re,ue,Ce,fe;for(let ye=0,Ie=0;ye<O.length;ye++)ne=O[ye],Object.prototype.hasOwnProperty.call(G,ne)?Ie++:(Ai(I,{command:"removeLayer",args:[ne]}),H.splice(H.indexOf(ne,Ie),1));for(let ye=0,Ie=0;ye<j.length;ye++)ne=j[j.length-1-ye],H[H.length-1-ye]!==ne&&(Object.prototype.hasOwnProperty.call(V,ne)?(Ai(I,{command:"removeLayer",args:[ne]}),H.splice(H.lastIndexOf(ne,H.length-Ie),1)):Ie++,Ce=H[H.length-ye],Ai(I,{command:"addLayer",args:[G[ne],Ce]}),H.splice(H.length-ye,0,ne),te[ne]=!0);for(let ye=0;ye<j.length;ye++)if(ne=j[ye],re=V[ne],ue=G[ne],!te[ne]&&!Mn(re,ue))if(Mn(re.source,ue.source)&&Mn(re["source-layer"],ue["source-layer"])&&Mn(re.type,ue.type)){for(fe in zr(re.layout,ue.layout,I,ne,null,"setLayoutProperty"),zr(re.paint,ue.paint,I,ne,null,"setPaintProperty"),Mn(re.filter,ue.filter)||Ai(I,{command:"setFilter",args:[ne,ue.filter]}),Mn(re.minzoom,ue.minzoom)&&Mn(re.maxzoom,ue.maxzoom)||Ai(I,{command:"setLayerZoomRange",args:[ne,ue.minzoom,ue.maxzoom]}),re)Object.prototype.hasOwnProperty.call(re,fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&(fe.indexOf("paint.")===0?zr(re[fe],ue[fe],I,ne,fe.slice(6),"setPaintProperty"):Mn(re[fe],ue[fe])||Ai(I,{command:"setLayerProperty",args:[ne,fe,ue[fe]]}));for(fe in ue)Object.prototype.hasOwnProperty.call(ue,fe)&&!Object.prototype.hasOwnProperty.call(re,fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&(fe.indexOf("paint.")===0?zr(re[fe],ue[fe],I,ne,fe.slice(6),"setPaintProperty"):Mn(re[fe],ue[fe])||Ai(I,{command:"setLayerProperty",args:[ne,fe,ue[fe]]}))}else Ai(I,{command:"removeLayer",args:[ne]}),Ce=H[H.lastIndexOf(ne)+1],Ai(I,{command:"addLayer",args:[ue,Ce]})})(x,n.layers,o)}catch(p){console.warn("Unable to compute style diff:",p),o=[{command:"setStyle",args:[n]}]}return o},m.bX=function(s){const n=[],o=s.id;return o===void 0&&n.push({message:`layers.${o}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${o}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),n},m.bY=Dn,m.bZ=Wn,m.b_=class extends Ro{constructor(s,n){super(s,n),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},m.ba=function(s,n,o){return s[0]=n[0]*o,s[1]=n[1]*o,s[2]=n[2]*o,s[3]=n[3]*o,s},m.bb=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]},m.bc=P0,m.bd=Ff,m.be=function(s,n,o,p,_){var x=1/Math.tan(n/2);if(s[0]=x/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,_!=null&&_!==1/0){var w=1/(p-_);s[10]=(_+p)*w,s[14]=2*_*p*w}else s[10]=-1,s[14]=-2*p;return s},m.bf=function(s){var n=new we(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},m.bg=function(s,n,o){var p=Math.sin(o),_=Math.cos(o),x=n[0],w=n[1],C=n[2],I=n[3],O=n[4],j=n[5],V=n[6],G=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=x*_+O*p,s[1]=w*_+j*p,s[2]=C*_+V*p,s[3]=I*_+G*p,s[4]=O*_-x*p,s[5]=j*_-w*p,s[6]=V*_-C*p,s[7]=G*_-I*p,s},m.bh=function(s,n,o){var p=Math.sin(o),_=Math.cos(o),x=n[4],w=n[5],C=n[6],I=n[7],O=n[8],j=n[9],V=n[10],G=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=x*_+O*p,s[5]=w*_+j*p,s[6]=C*_+V*p,s[7]=I*_+G*p,s[8]=O*_-x*p,s[9]=j*_-w*p,s[10]=V*_-C*p,s[11]=G*_-I*p,s},m.bi=function(){const s=new Float32Array(16);return Se(s),s},m.bj=function(){const s=new Float64Array(16);return Se(s),s},m.bk=function(){return new Float64Array(16)},m.bl=function(s,n,o){const p=new Float64Array(4);return Ge(p,s,n-90,o),p},m.bm=function(s,n,o,p){var _,x,w,C,I,O=n[0],j=n[1],V=n[2],G=n[3],H=o[0],te=o[1],ne=o[2],re=o[3];return(x=O*H+j*te+V*ne+G*re)<0&&(x=-x,H=-H,te=-te,ne=-ne,re=-re),1-x>Ae?(_=Math.acos(x),w=Math.sin(_),C=Math.sin((1-p)*_)/w,I=Math.sin(p*_)/w):(C=1-p,I=p),s[0]=C*O+I*H,s[1]=C*j+I*te,s[2]=C*V+I*ne,s[3]=C*G+I*re,s},m.bn=function(s){const n=new Float64Array(9);(function(x,w){var C=w[0],I=w[1],O=w[2],j=w[3],V=C+C,G=I+I,H=O+O,te=C*V,ne=I*V,re=I*G,ue=O*V,Ce=O*G,fe=O*H,ye=j*V,Ie=j*G,Le=j*H;x[0]=1-re-fe,x[3]=ne-Le,x[6]=ue+Ie,x[1]=ne+Le,x[4]=1-te-fe,x[7]=Ce-ye,x[2]=ue-Ie,x[5]=Ce+ye,x[8]=1-te-re})(n,s);const o=Xa(-Math.asin(Ft(n[2],-1,1)));let p,_;return Math.hypot(n[5],n[8])<.001?(p=0,_=-Xa(Math.atan2(n[3],n[4]))):(p=Xa(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),_=Xa(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:p,pitch:o+90,bearing:_}},m.bo=function(s,n){return s.roll==n.roll&&s.pitch==n.pitch&&s.bearing==n.bearing},m.bp=Ln,m.bq=Zu,m.br=Ps,m.bs=Ec,m.bt=Ha,m.bu=pt,m.bv=Mt,m.bw=Qi,m.bx=function(s,n,o,p,_){return pt(p,_,Ft((s-n)/(o-n),0,1))},m.by=Oe,m.bz=function(){return new Float64Array(3)},m.c=$e,m.c$=function(s,n,o,p,_){return c(this,void 0,void 0,(function*(){if(Me())try{return yield Us(s,n,o,p,_)}catch{}return(function(x,w,C,I,O){const j=x.width,V=x.height;Co&&Mo||(Co=new OffscreenCanvas(j,V),Mo=Co.getContext("2d",{willReadFrequently:!0})),Co.width=j,Co.height=V,Mo.drawImage(x,0,0,j,V);const G=Mo.getImageData(w,C,I,O);return Mo.clearRect(0,0,j,V),G.data})(s,n,o,p,_)}))},m.c0=class extends Ro{constructor(s,n){super(s,n),this.current=Oo}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let n=1;n<16;n++)if(s[n]!==this.current[n]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},m.c1=Fh,m.c2=class extends Ro{constructor(s,n){super(s,n),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},m.c3=class extends Ro{constructor(s,n){super(s,n),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},m.c4=xe,m.c5=function(s,n){var o=Math.sin(n),p=Math.cos(n);return s[0]=p,s[1]=o,s[2]=0,s[3]=-o,s[4]=p,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},m.c6=function(s,n,o){var p=n[0],_=n[1],x=n[2];return s[0]=p*o[0]+_*o[3]+x*o[6],s[1]=p*o[1]+_*o[4]+x*o[7],s[2]=p*o[2]+_*o[5]+x*o[8],s},m.c7=function(s,n,o,p,_,x,w){var C=1/(n-o),I=1/(p-_),O=1/(x-w);return s[0]=-2*C,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*I,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*O,s[11]=0,s[12]=(n+o)*C,s[13]=(_+p)*I,s[14]=(w+x)*O,s[15]=1,s},m.c8=class extends Ro{constructor(s,n){super(s,n),this.current=new Array}set(s){if(s!=this.current){this.current=s;const n=new Float32Array(4*s.length);for(let o=0;o<s.length;o++)n[4*o]=s[o].r,n[4*o+1]=s[o].g,n[4*o+2]=s[o].b,n[4*o+3]=s[o].a;this.gl.uniform4fv(this.location,n)}}},m.c9=class extends Ro{constructor(s,n){super(s,n),this.current=new Array}set(s){if(s!=this.current){this.current=s;const n=new Float32Array(s);this.gl.uniform1fv(this.location,n)}}},m.cA=function(s,n){return Xe[n]&&"touches"in s},m.cB=function(s){return Xe[s]||se[s]},m.cC=function(s,n,o){var p=n[0],_=n[1];return s[0]=o[0]*p+o[4]*_+o[12],s[1]=o[1]*p+o[5]*_+o[13],s},m.cD=function(s,n){const{x:o,y:p}=ji.fromLngLat(n);return!(s<0||s>25||p<0||p>=1||o<0||o>=1)},m.cE=function(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},m.cF=class extends Bu{},m.cG=uR,m.cI=Be,m.cJ=function(s,n){$e.REGISTERED_PROTOCOLS[s]=n},m.cK=function(s){delete $e.REGISTERED_PROTOCOLS[s]},m.cL=function(s,n){const o={};for(let _=0;_<s.length;_++){const x=n&&n[s[_].id]||Qs(s[_]);n&&(n[s[_].id]=x);let w=o[x];w||(w=o[x]=[]),w.push(s[_])}const p=[];for(const _ in o)p.push(o[_]);return p},m.cM=Yt,m.cN=c_,m.cO=M_,m.cP=gg,m.cQ=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Bt/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const n=s.bucket.layers[0],o=n.layout,p=n._unevaluatedLayout._values,_={layoutIconSize:p["icon-size"].possiblyEvaluate(new Ri(s.bucket.zoom+1),s.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new Ri(s.bucket.zoom+1),s.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new Ri(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:j}=s.bucket.textSizeData;_.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Ri(O),s.canonical),p["text-size"].possiblyEvaluate(new Ri(j),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:j}=s.bucket.iconSizeData;_.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Ri(O),s.canonical),p["icon-size"].possiblyEvaluate(new Ri(j),s.canonical)]}const x=o.get("text-line-height")*wa,w=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",C=o.get("text-keep-upright"),I=o.get("text-size");for(const O of s.bucket.features){const j=o.get("text-font").evaluate(O,{},s.canonical).join(","),V=I.evaluate(O,{},s.canonical),G=_.layoutTextSize.evaluate(O,{},s.canonical),H=_.layoutIconSize.evaluate(O,{},s.canonical),te={horizontal:{},vertical:void 0},ne=O.text;let re,ue=[0,0];if(ne){const ye=ne.toString(),Ie=o.get("text-letter-spacing").evaluate(O,{},s.canonical)*wa,Le=xf(ye)?Ie:0,Qe=o.get("text-anchor").evaluate(O,{},s.canonical),bt=rh(n,O,s.canonical);if(!bt){const Et=o.get("text-radial-offset").evaluate(O,{},s.canonical);ue=Et?Ni(Qe,[Et*wa,hi]):o.get("text-offset").evaluate(O,{},s.canonical).map((yt=>yt*wa))}let ft=w?"center":o.get("text-justify").evaluate(O,{},s.canonical);const St=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(O,{},s.canonical)*wa:1/0,Vt=()=>{s.bucket.allowVerticalPlacement&&$l(ye)&&(te.vertical=Up(ne,s.glyphMap,s.glyphPositions,s.imagePositions,j,St,x,Qe,"left",Le,ue,m.az.vertical,!0,G,V))};if(!w&&bt){const Et=new Set;if(ft==="auto")for(let ct=0;ct<bt.values.length;ct+=2)Et.add(z_(bt.values[ct]));else Et.add(ft);let yt=!1;for(const ct of Et)if(!te.horizontal[ct])if(yt)te.horizontal[ct]=te.horizontal[0];else{const tn=Up(ne,s.glyphMap,s.glyphPositions,s.imagePositions,j,St,x,"center",ct,Le,ue,m.az.horizontal,!1,G,V);tn&&(te.horizontal[ct]=tn,yt=tn.positionedLines.length===1)}Vt()}else{ft==="auto"&&(ft=z_(Qe));const Et=Up(ne,s.glyphMap,s.glyphPositions,s.imagePositions,j,St,x,Qe,ft,Le,ue,m.az.horizontal,!1,G,V);Et&&(te.horizontal[ft]=Et),Vt(),$l(ye)&&w&&C&&(te.vertical=Up(ne,s.glyphMap,s.glyphPositions,s.imagePositions,j,St,x,Qe,ft,Le,ue,m.az.vertical,!1,G,V))}}let Ce=!1;if(O.icon&&O.icon.name){const ye=s.imageMap[O.icon.name];ye&&(re=Qy(s.imagePositions[O.icon.name],o.get("icon-offset").evaluate(O,{},s.canonical),o.get("icon-anchor").evaluate(O,{},s.canonical)),Ce=!!ye.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Ce:s.bucket.sdfIcons!==Ce&&bi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ye.pixelRatio!==s.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const fe=_E(te.horizontal)||te.vertical;s.bucket.iconsInText=!!fe&&fe.iconsInText,(fe||re)&&lR(s.bucket,O,te,re,s.imageMap,_,G,H,ue,Ce,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},m.cR=Fd,m.cS=Vh,m.cT=Pf,m.cU=function(s){const n=new fg;return(function(o,p){for(const _ in o.layers)p.writeMessage(3,jg,o.layers[_])})(s,n),n.finish()},m.cV=function(s,n,o,p,_,x){let w=d(s,n,o,_,0);return w=d(w,n,p,x,1),w},m.cW=class{constructor(s){this.maxEntries=s,this.map=new Map}get(s){const n=this.map.get(s);return n!==void 0&&(this.map.delete(s),this.map.set(s,n)),n}set(s,n){if(this.map.has(s))this.map.delete(s);else if(this.map.size>=this.maxEntries){const o=this.map.keys().next().value;this.map.delete(o)}this.map.set(s,n)}clear(){this.map.clear()}},m.cX=gi,m.cY=fg,m.cZ=sm,m.c_=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},m.ca=class extends wc{},m.cb=f0,m.cc=class extends yr{},m.cd=Cp,m.ce=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},m.cf=uu,m.cg=function(s,n,o){var p=n[0],_=n[1],x=n[2],w=o[3]*p+o[7]*_+o[11]*x+o[15];return s[0]=(o[0]*p+o[4]*_+o[8]*x+o[12])/(w=w||1),s[1]=(o[1]*p+o[5]*_+o[9]*x+o[13])/w,s[2]=(o[2]*p+o[6]*_+o[10]*x+o[14])/w,s},m.ch=class extends Fu{},m.ci=class extends i{},m.cj=function(s,n){return s[0]===n[0]&&s[1]===n[1]&&s[2]===n[2]&&s[3]===n[3]&&s[4]===n[4]&&s[5]===n[5]&&s[6]===n[6]&&s[7]===n[7]&&s[8]===n[8]&&s[9]===n[9]&&s[10]===n[10]&&s[11]===n[11]&&s[12]===n[12]&&s[13]===n[13]&&s[14]===n[14]&&s[15]===n[15]},m.ck=function(s,n){var o=s[0],p=s[1],_=s[2],x=s[3],w=s[4],C=s[5],I=s[6],O=s[7],j=s[8],V=s[9],G=s[10],H=s[11],te=s[12],ne=s[13],re=s[14],ue=s[15],Ce=n[0],fe=n[1],ye=n[2],Ie=n[3],Le=n[4],Qe=n[5],bt=n[6],ft=n[7],St=n[8],Vt=n[9],Et=n[10],yt=n[11],ct=n[12],tn=n[13],Kt=n[14],nn=n[15];return Math.abs(o-Ce)<=Ae*Math.max(1,Math.abs(o),Math.abs(Ce))&&Math.abs(p-fe)<=Ae*Math.max(1,Math.abs(p),Math.abs(fe))&&Math.abs(_-ye)<=Ae*Math.max(1,Math.abs(_),Math.abs(ye))&&Math.abs(x-Ie)<=Ae*Math.max(1,Math.abs(x),Math.abs(Ie))&&Math.abs(w-Le)<=Ae*Math.max(1,Math.abs(w),Math.abs(Le))&&Math.abs(C-Qe)<=Ae*Math.max(1,Math.abs(C),Math.abs(Qe))&&Math.abs(I-bt)<=Ae*Math.max(1,Math.abs(I),Math.abs(bt))&&Math.abs(O-ft)<=Ae*Math.max(1,Math.abs(O),Math.abs(ft))&&Math.abs(j-St)<=Ae*Math.max(1,Math.abs(j),Math.abs(St))&&Math.abs(V-Vt)<=Ae*Math.max(1,Math.abs(V),Math.abs(Vt))&&Math.abs(G-Et)<=Ae*Math.max(1,Math.abs(G),Math.abs(Et))&&Math.abs(H-yt)<=Ae*Math.max(1,Math.abs(H),Math.abs(yt))&&Math.abs(te-ct)<=Ae*Math.max(1,Math.abs(te),Math.abs(ct))&&Math.abs(ne-tn)<=Ae*Math.max(1,Math.abs(ne),Math.abs(tn))&&Math.abs(re-Kt)<=Ae*Math.max(1,Math.abs(re),Math.abs(Kt))&&Math.abs(ue-nn)<=Ae*Math.max(1,Math.abs(ue),Math.abs(nn))},m.cl=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},m.cm=s=>s.type==="symbol",m.cn=s=>s.type==="circle",m.co=s=>s.type==="heatmap",m.cp=s=>s.type==="line",m.cq=s=>s.type==="fill",m.cr=s=>s.type==="fill-extrusion",m.cs=s=>s.type==="hillshade",m.ct=s=>s.type==="color-relief",m.cu=s=>s.type==="background",m.cv=s=>s.type==="custom",m.cw=It,m.cx=function(s,n,o){const p=qe(n.x-o.x,n.y-o.y),_=qe(s.x-o.x,s.y-o.y),x=Math.atan2(p[0]*_[1]-p[1]*_[0],(function(w,C){return w[0]*C[0]+w[1]*C[1]})(p,_));return Xa(x)},m.cy=Nt,m.cz=function(s,n){return se[n]&&(s instanceof MouseEvent||s instanceof WheelEvent)},m.d=_t,m.d0=Mf,m.d1=k,m.d2=class{constructor(s,n){this.layers={[lm]:this},this.name=lm,this.version=n?n.version:1,this.extent=n?n.extent:4096,this.length=s.length,this.features=s}feature(s){return new q0(this.features[s],this.extent)}},m.d3=g,m.d4=As,m.e=un,m.f=s=>c(void 0,void 0,void 0,(function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(n)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),m.g=et,m.h=s=>new Promise(((n,o)=>{const p=new Image;p.onload=()=>{n(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame((()=>{p.src=Fs}))},p.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const _=new Blob([new Uint8Array(s)],{type:"image/png"});p.src=s.byteLength?URL.createObjectURL(_):Fs})),m.i=da,m.j=(s,n)=>vt(un(s,{type:"json"}),n),m.k=pi,m.l=Sn,m.m=vt,m.n=(s,n)=>vt(un(s,{type:"arrayBuffer"}),n),m.o=function(s){return new fg(s).readFields(w0,[])},m.p=Yy,m.q=function(s){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))},m.r=Ap,m.s=Kl,m.t=Fr,m.u=Ke,m.v=Ed,m.w=bi,m.x=Sf,m.y=tl,m.z=vc})),a("worker",["./shared"],(function(m){class c{constructor(se,oe){this.keyCache={},se&&this.replace(se,oe)}replace(se,oe){this._layerConfigs={},this._layers={},this.update(se,[],oe)}update(se,oe,ge){for(const $e of se){this._layerConfigs[$e.id]=$e;const et=this._layers[$e.id]=m.bT($e,ge);et._featureFilter=m.aj(et.filter,ge),this.keyCache[$e.id]&&delete this.keyCache[$e.id]}for(const $e of oe)delete this.keyCache[$e],delete this._layerConfigs[$e],delete this._layers[$e];this.familiesBySource={};const Re=m.cL(Object.values(this._layerConfigs),this.keyCache);for(const $e of Re){const et=$e.map((Xt=>this._layers[Xt.id])),He=et[0];if(He.isHidden())continue;const Be=He.source||"";let tt=this.familiesBySource[Be];tt||(tt=this.familiesBySource[Be]={});const vt=He.sourceLayer||m.ai;let _t=tt[vt];_t||(_t=tt[vt]=[]),_t.push(et)}}}class z{constructor(se){const oe={},ge=[];for(const He in se){const Be=se[He],tt=oe[He]={};for(const vt in Be){const _t=Be[+vt];if(!_t||_t.bitmap.width===0||_t.bitmap.height===0)continue;const Xt={x:0,y:0,w:_t.bitmap.width+2,h:_t.bitmap.height+2};ge.push(Xt),tt[vt]={rect:Xt,metrics:_t.metrics}}}const{w:Re,h:$e}=m.p(ge),et=new m.r({width:Re||1,height:$e||1});for(const He in se){const Be=se[He];for(const tt in Be){const vt=Be[+tt];if(!vt||vt.bitmap.width===0||vt.bitmap.height===0)continue;const _t=oe[He][tt].rect;m.r.copy(vt.bitmap,et,{x:0,y:0},{x:_t.x+1,y:_t.y+1},vt.bitmap)}}this.image=et,this.positions=oe}}m.cM("GlyphAtlas",z);class k{constructor(se){this.tileID=new m.a2(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,oe,ge,Re,$e){return m._(this,void 0,void 0,(function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new m.ag;const et=new m.cN(Object.keys(se.layers).sort()),He=new m.cO(this.tileID,this.promoteId);He.bucketLayerIDs=[];const Be={},tt={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ge,subdivisionGranularity:$e},vt=oe.familiesBySource[this.source];for(const Di in vt){const zr=se.layers[Di];if(!zr)continue;zr.version===1&&m.w(`Vector tile source "${this.source}" layer "${Di}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const qc=et.encode(Di),Ta=[];for(let ot=0;ot<zr.length;ot++){const fa=zr.feature(ot),pa=He.getId(fa,Di);Ta.push({feature:fa,id:pa,index:ot,sourceLayerIndex:qc})}for(const ot of vt[Di]){const fa=ot[0];fa.source!==this.source&&m.w(`layer.source = ${fa.source} does not equal this.source = ${this.source}`),fa.isHidden(this.zoom,!0)||(B(ot,this.zoom,ge),(Be[fa.id]=fa.createBucket({index:He.bucketLayerIDs.length,layers:ot,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:qc,sourceID:this.source})).populate(Ta,tt,this.tileID.canonical),He.bucketLayerIDs.push(ot.map((pa=>pa.id))))}}const _t=m.bY(tt.glyphDependencies,(Di=>Object.keys(Di).map(Number)));this.inFlightDependencies.forEach((Di=>Di?.abort())),this.inFlightDependencies=[];let Xt=Promise.resolve({});if(Object.keys(_t).length){const Di=new AbortController;this.inFlightDependencies.push(Di),Xt=Re.sendAsync({type:"GG",data:{stacks:_t,source:this.source,tileID:this.tileID,type:"glyphs"}},Di)}const an=Object.keys(tt.iconDependencies);let Sn=Promise.resolve({});if(an.length){const Di=new AbortController;this.inFlightDependencies.push(Di),Sn=Re.sendAsync({type:"GI",data:{icons:an,source:this.source,tileID:this.tileID,type:"icons"}},Di)}const pi=Object.keys(tt.patternDependencies);let ti=Promise.resolve({});if(pi.length){const Di=new AbortController;this.inFlightDependencies.push(Di),ti=Re.sendAsync({type:"GI",data:{icons:pi,source:this.source,tileID:this.tileID,type:"patterns"}},Di)}const Ke=tt.dashDependencies;let Ei=Promise.resolve({});if(Object.keys(Ke).length){const Di=new AbortController;this.inFlightDependencies.push(Di),Ei=Re.sendAsync({type:"GDA",data:{dashes:Ke}},Di)}const[Mr,Mn,Ai,Gr]=yield Promise.all([Xt,Sn,ti,Ei]),xi=new z(Mr),hr=new m.cP(Mn,Ai);for(const Di in Be){const zr=Be[Di];zr instanceof m.ah?(B(zr.layers,this.zoom,ge),m.cQ({bucket:zr,glyphMap:Mr,glyphPositions:xi.positions,imageMap:Mn,imagePositions:hr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:tt.subdivisionGranularity})):zr.hasDependencies&&(zr instanceof m.cR||zr instanceof m.cS||zr instanceof m.cT)&&(B(zr.layers,this.zoom,ge),zr.addFeatures(tt,this.tileID.canonical,hr.patternPositions,Gr))}return this.status="done",{buckets:Object.values(Be).filter((Di=>!Di.isEmpty())),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xi.image,imageAtlas:hr,dashPositions:Gr,glyphMap:this.returnDependencies?Mr:null,iconMap:this.returnDependencies?Mn:null,glyphPositions:this.returnDependencies?xi.positions:null}}))}}function B(Xe,se,oe){const ge=new m.H(se);for(const Re of Xe)Re.recalculate(ge,oe)}class Z{constructor(se,oe,ge,Re,$e){this.type=se,this.properties=ge||{},this.extent=$e,this.pointsArray=oe,this.id=Re}loadGeometry(){return this.pointsArray.map((se=>se.map((oe=>new m.P(oe.x,oe.y)))))}}class X{constructor(se,oe,ge){this.version=2,this._myFeatures=se,this.name=oe,this.length=se.length,this.extent=ge}feature(se){return this._myFeatures[se]}}class J{constructor(){this.layers={}}addLayer(se){this.layers[se.name]=se}}function ce(Xe){let se=m.cU(Xe);return se.byteOffset===0&&se.byteLength===se.buffer.byteLength||(se=new Uint8Array(se)),{vectorTile:Xe,rawData:se.buffer}}function ee(Xe,se,oe){const{extent:ge}=Xe,Re=Math.pow(2,oe.z-se.z),$e=(oe.x-se.x*Re)*ge,et=(oe.y-se.y*Re)*ge,He=[];for(let Be=0;Be<Xe.length;Be++){const tt=Xe.feature(Be);let vt=tt.loadGeometry();for(const Xt of vt)for(const an of Xt)an.x=an.x*Re-$e,an.y=an.y*Re-et;const _t=128;vt=m.cV(vt,tt.type,-_t,-_t,ge+_t,ge+_t),vt.length!==0&&He.push(new Z(tt.type,vt,tt.properties,tt.id,ge))}return new X(He,Xe.name,ge)}class ae{constructor(se,oe,ge){this.actor=se,this.layerIndex=oe,this.availableImages=ge,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new m.cW(1e3)}loadVectorTile(se,oe){return m._(this,void 0,void 0,(function*(){const ge=yield m.n(se.request,oe);try{return{vectorTile:se.encoding!=="mlt"?new m.cX(new m.cY(ge.data)):new m.cZ(ge.data),rawData:ge.data,cacheControl:ge.cacheControl,expires:ge.expires}}catch(Re){const $e=new Uint8Array(ge.data);let et=`Unable to parse the tile at ${se.request.url}, `;throw et+=$e[0]===31&&$e[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Re.message}`,new Error(et)}}))}loadTile(se){return m._(this,void 0,void 0,(function*(){const{uid:oe,overzoomParameters:ge}=se;ge&&(se.request=ge.overzoomRequest);const Re=!!(se&&se.request&&se.request.collectResourceTiming)&&new m.c_(se.request),$e=new k(se);this.loading[oe]=$e;const et=new AbortController;$e.abort=et;try{const He=yield this.loadVectorTile(se,et);if(delete this.loading[oe],!He)return null;if(ge){const Xt=this._getOverzoomTile(se,He.vectorTile);He.rawData=Xt.rawData,He.vectorTile=Xt.vectorTile}const Be=He.rawData,tt={};He.expires&&(tt.expires=He.expires),He.cacheControl&&(tt.cacheControl=He.cacheControl);const vt={};if(Re){const Xt=Re.finish();Xt&&(vt.resourceTiming=JSON.parse(JSON.stringify(Xt)))}$e.vectorTile=He.vectorTile;const _t=$e.parse(He.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[oe]=$e,this.fetching[oe]={rawTileData:Be,cacheControl:tt,resourceTiming:vt};try{const Xt=yield _t;return m.e({rawTileData:Be.slice(0),encoding:se.encoding},Xt,tt,vt)}finally{delete this.fetching[oe]}}catch(He){throw delete this.loading[oe],$e.status="done",this.loaded[oe]=$e,He}}))}_getOverzoomTile(se,oe){const{tileID:ge,source:Re,overzoomParameters:$e}=se,{maxZoomTileID:et}=$e,He=`${et.key}_${ge.key}`,Be=this.overzoomedTileResultCache.get(He);if(Be)return Be;const tt=new J,vt=this.layerIndex.familiesBySource[Re];for(const Xt in vt){const an=oe.layers[Xt];if(!an)continue;const Sn=ee(an,et,ge.canonical);Sn.length>0&&tt.addLayer(Sn)}const _t=ce(tt);return this.overzoomedTileResultCache.set(He,_t),_t}reloadTile(se){return m._(this,void 0,void 0,(function*(){const oe=se.uid;if(!this.loaded||!this.loaded[oe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ge=this.loaded[oe];if(ge.showCollisionBoxes=se.showCollisionBoxes,ge.status==="parsing"){const Re=yield ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let $e;if(this.fetching[oe]){const{rawTileData:et,cacheControl:He,resourceTiming:Be}=this.fetching[oe];delete this.fetching[oe],$e=m.e({rawTileData:et.slice(0),encoding:se.encoding},Re,He,Be)}else $e=Re;return $e}if(ge.status==="done"&&ge.vectorTile)return ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)}))}abortTile(se){return m._(this,void 0,void 0,(function*(){const oe=this.loading,ge=se.uid;oe&&oe[ge]&&oe[ge].abort&&(oe[ge].abort.abort(),delete oe[ge])}))}removeTile(se){return m._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]}))}}class Me{constructor(){this.loaded={}}loadTile(se){return m._(this,void 0,void 0,(function*(){const{uid:oe,encoding:ge,rawImageData:Re,redFactor:$e,greenFactor:et,blueFactor:He,baseShift:Be}=se,tt=Re.width+2,vt=Re.height+2,_t=m.b(Re)?new m.R({width:tt,height:vt},yield m.c$(Re,-1,-1,tt,vt)):Re,Xt=new m.d0(oe,_t,ge,$e,et,He,Be);return this.loaded=this.loaded||{},this.loaded[oe]=Xt,Xt}))}removeTile(se){const oe=this.loaded,ge=se.uid;oe&&oe[ge]&&delete oe[ge]}}var Ae,we,xe=(function(){if(we)return Ae;function Xe(oe,ge){if(oe.length!==0){se(oe[0],ge);for(var Re=1;Re<oe.length;Re++)se(oe[Re],!ge)}}function se(oe,ge){for(var Re=0,$e=0,et=0,He=oe.length,Be=He-1;et<He;Be=et++){var tt=(oe[et][0]-oe[Be][0])*(oe[Be][1]+oe[et][1]),vt=Re+tt;$e+=Math.abs(Re)>=Math.abs(tt)?Re-vt+tt:tt-vt+Re,Re=vt}Re+$e>=0!=!!ge&&oe.reverse()}return we=1,Ae=function oe(ge,Re){var $e,et=ge&&ge.type;if(et==="FeatureCollection")for($e=0;$e<ge.features.length;$e++)oe(ge.features[$e],Re);else if(et==="GeometryCollection")for($e=0;$e<ge.geometries.length;$e++)oe(ge.geometries[$e],Re);else if(et==="Feature")oe(ge.geometry,Re);else if(et==="Polygon")Xe(ge.coordinates,Re);else if(et==="MultiPolygon")for($e=0;$e<ge.coordinates.length;$e++)Xe(ge.coordinates[$e],Re);return ge}})(),Se=m.d1(xe);const Fe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Xe=>Xe},Ue=Math.fround||(it=new Float32Array(1),Xe=>(it[0]=+Xe,it[0]));var it;class Rt{constructor(se){this.options=Object.assign(Object.create(Fe),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:oe,minZoom:ge,maxZoom:Re}=this.options;oe&&console.time("total time");const $e=`prepare ${se.length} points`;oe&&console.time($e),this.points=se;const et=[];for(let Be=0;Be<se.length;Be++){const tt=se[Be];if(!tt.geometry)continue;const[vt,_t]=tt.geometry.coordinates,Xt=Ue(Zt(vt)),an=Ue(cn(_t));et.push(Xt,an,1/0,Be,-1,1),this.options.reduce&&et.push(0)}let He=this.trees[Re+1]=this._createTree(et);oe&&console.timeEnd($e);for(let Be=Re;Be>=ge;Be--){const tt=+Date.now();He=this.trees[Be]=this._createTree(this._cluster(He,Be)),oe&&console.log("z%d: %d clusters in %dms",Be,He.numItems,+Date.now()-tt)}return oe&&console.timeEnd("total time"),this}getClusters(se,oe){let ge=((se[0]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,se[1]));let $e=se[2]===180?180:((se[2]+180)%360+360)%360-180;const et=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)ge=-180,$e=180;else if(ge>$e){const _t=this.getClusters([ge,Re,180,et],oe),Xt=this.getClusters([-180,Re,$e,et],oe);return _t.concat(Xt)}const He=this.trees[this._limitZoom(oe)],Be=He.range(Zt(ge),cn(et),Zt($e),cn(Re)),tt=He.data,vt=[];for(const _t of Be){const Xt=this.stride*_t;vt.push(tt[Xt+5]>1?Pt(tt,Xt,this.clusterProps):this.points[tt[Xt+3]])}return vt}getChildren(se){const oe=this._getOriginId(se),ge=this._getOriginZoom(se),Re="No cluster with the specified id.",$e=this.trees[ge];if(!$e)throw new Error(Re);const et=$e.data;if(oe*this.stride>=et.length)throw new Error(Re);const He=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),Be=$e.within(et[oe*this.stride],et[oe*this.stride+1],He),tt=[];for(const vt of Be){const _t=vt*this.stride;et[_t+4]===se&&tt.push(et[_t+5]>1?Pt(et,_t,this.clusterProps):this.points[et[_t+3]])}if(tt.length===0)throw new Error(Re);return tt}getLeaves(se,oe,ge){const Re=[];return this._appendLeaves(Re,se,oe=oe||10,ge=ge||0,0),Re}getTile(se,oe,ge){const Re=this.trees[this._limitZoom(se)],$e=Math.pow(2,se),{extent:et,radius:He}=this.options,Be=He/et,tt=(ge-Be)/$e,vt=(ge+1+Be)/$e,_t={features:[]};return this._addTileFeatures(Re.range((oe-Be)/$e,tt,(oe+1+Be)/$e,vt),Re.data,oe,ge,$e,_t),oe===0&&this._addTileFeatures(Re.range(1-Be/$e,tt,1,vt),Re.data,$e,ge,$e,_t),oe===$e-1&&this._addTileFeatures(Re.range(0,tt,Be/$e,vt),Re.data,-1,ge,$e,_t),_t.features.length?_t:null}getClusterExpansionZoom(se){let oe=this._getOriginZoom(se)-1;for(;oe<=this.options.maxZoom;){const ge=this.getChildren(se);if(oe++,ge.length!==1)break;se=ge[0].properties.cluster_id}return oe}_appendLeaves(se,oe,ge,Re,$e){const et=this.getChildren(oe);for(const He of et){const Be=He.properties;if(Be&&Be.cluster?$e+Be.point_count<=Re?$e+=Be.point_count:$e=this._appendLeaves(se,Be.cluster_id,ge,Re,$e):$e<Re?$e++:se.push(He),se.length===ge)break}return $e}_createTree(se){const oe=new m.aT(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ge=0;ge<se.length;ge+=this.stride)oe.add(se[ge],se[ge+1]);return oe.finish(),oe.data=se,oe}_addTileFeatures(se,oe,ge,Re,$e,et){for(const He of se){const Be=He*this.stride,tt=oe[Be+5]>1;let vt,_t,Xt;if(tt)vt=$t(oe,Be,this.clusterProps),_t=oe[Be],Xt=oe[Be+1];else{const pi=this.points[oe[Be+3]];vt=pi.properties;const[ti,Ke]=pi.geometry.coordinates;_t=Zt(ti),Xt=cn(Ke)}const an={type:1,geometry:[[Math.round(this.options.extent*(_t*$e-ge)),Math.round(this.options.extent*(Xt*$e-Re))]],tags:vt};let Sn;Sn=tt||this.options.generateId?oe[Be+3]:this.points[oe[Be+3]].id,Sn!==void 0&&(an.id=Sn),et.features.push(an)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,oe){const{radius:ge,extent:Re,reduce:$e,minPoints:et}=this.options,He=ge/(Re*Math.pow(2,oe)),Be=se.data,tt=[],vt=this.stride;for(let _t=0;_t<Be.length;_t+=vt){if(Be[_t+2]<=oe)continue;Be[_t+2]=oe;const Xt=Be[_t],an=Be[_t+1],Sn=se.within(Be[_t],Be[_t+1],He),pi=Be[_t+5];let ti=pi;for(const Ke of Sn){const Ei=Ke*vt;Be[Ei+2]>oe&&(ti+=Be[Ei+5])}if(ti>pi&&ti>=et){let Ke,Ei=Xt*pi,Mr=an*pi,Mn=-1;const Ai=(_t/vt<<5)+(oe+1)+this.points.length;for(const Gr of Sn){const xi=Gr*vt;if(Be[xi+2]<=oe)continue;Be[xi+2]=oe;const hr=Be[xi+5];Ei+=Be[xi]*hr,Mr+=Be[xi+1]*hr,Be[xi+4]=Ai,$e&&(Ke||(Ke=this._map(Be,_t,!0),Mn=this.clusterProps.length,this.clusterProps.push(Ke)),$e(Ke,this._map(Be,xi)))}Be[_t+4]=Ai,tt.push(Ei/ti,Mr/ti,1/0,Ai,-1,ti),$e&&tt.push(Mn)}else{for(let Ke=0;Ke<vt;Ke++)tt.push(Be[_t+Ke]);if(ti>1)for(const Ke of Sn){const Ei=Ke*vt;if(!(Be[Ei+2]<=oe)){Be[Ei+2]=oe;for(let Mr=0;Mr<vt;Mr++)tt.push(Be[Ei+Mr])}}}}return tt}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,oe,ge){if(se[oe+5]>1){const et=this.clusterProps[se[oe+6]];return ge?Object.assign({},et):et}const Re=this.points[se[oe+3]].properties,$e=this.options.map(Re);return ge&&$e===Re?Object.assign({},$e):$e}}function Pt(Xe,se,oe){return{type:"Feature",id:Xe[se+3],properties:$t(Xe,se,oe),geometry:{type:"Point",coordinates:[(ge=Xe[se],360*(ge-.5)),ln(Xe[se+1])]}};var ge}function $t(Xe,se,oe){const ge=Xe[se+5],Re=ge>=1e4?`${Math.round(ge/1e3)}k`:ge>=1e3?Math.round(ge/100)/10+"k":ge,$e=Xe[se+6],et=$e===-1?{}:Object.assign({},oe[$e]);return Object.assign(et,{cluster:!0,cluster_id:Xe[se+3],point_count:ge,point_count_abbreviated:Re})}function Zt(Xe){return Xe/360+.5}function cn(Xe){const se=Math.sin(Xe*Math.PI/180),oe=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return oe<0?0:oe>1?1:oe}function ln(Xe){const se=(180-360*Xe)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function xn(Xe,se,oe,ge){let Re=ge;const $e=se+(oe-se>>1);let et,He=oe-se;const Be=Xe[se],tt=Xe[se+1],vt=Xe[oe],_t=Xe[oe+1];for(let Xt=se+3;Xt<oe;Xt+=3){const an=Ge(Xe[Xt],Xe[Xt+1],Be,tt,vt,_t);if(an>Re)et=Xt,Re=an;else if(an===Re){const Sn=Math.abs(Xt-$e);Sn<He&&(et=Xt,He=Sn)}}Re>ge&&(et-se>3&&xn(Xe,se,et,ge),Xe[et+2]=Re,oe-et>3&&xn(Xe,et,oe,ge))}function Ge(Xe,se,oe,ge,Re,$e){let et=Re-oe,He=$e-ge;if(et!==0||He!==0){const Be=((Xe-oe)*et+(se-ge)*He)/(et*et+He*He);Be>1?(oe=Re,ge=$e):Be>0&&(oe+=et*Be,ge+=He*Be)}return et=Xe-oe,He=se-ge,et*et+He*He}function mt(Xe,se,oe,ge){const Re={id:Xe??null,type:se,geometry:oe,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")qe(Re,oe);else if(se==="Polygon")qe(Re,oe[0]);else if(se==="MultiLineString")for(const $e of oe)qe(Re,$e);else if(se==="MultiPolygon")for(const $e of oe)qe(Re,$e[0]);return Re}function qe(Xe,se){for(let oe=0;oe<se.length;oe+=3)Xe.minX=Math.min(Xe.minX,se[oe]),Xe.minY=Math.min(Xe.minY,se[oe+1]),Xe.maxX=Math.max(Xe.maxX,se[oe]),Xe.maxY=Math.max(Xe.maxY,se[oe+1])}function Bt(Xe,se,oe,ge){if(!se.geometry)return;const Re=se.geometry.coordinates;if(Re&&Re.length===0)return;const $e=se.geometry.type,et=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2);let He=[],Be=se.id;if(oe.promoteId?Be=se.properties[oe.promoteId]:oe.generateId&&(Be=ge||0),$e==="Point")jt(Re,He);else if($e==="MultiPoint")for(const tt of Re)jt(tt,He);else if($e==="LineString")Oe(Re,He,et,!1);else if($e==="MultiLineString"){if(oe.lineMetrics){for(const tt of Re)He=[],Oe(tt,He,et,!1),Xe.push(mt(Be,"LineString",He,se.properties));return}pt(Re,He,et,!1)}else if($e==="Polygon")pt(Re,He,et,!0);else{if($e!=="MultiPolygon"){if($e==="GeometryCollection"){for(const tt of se.geometry.geometries)Bt(Xe,{id:Be,geometry:tt,properties:se.properties},oe,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const tt of Re){const vt=[];pt(tt,vt,et,!0),He.push(vt)}}Xe.push(mt(Be,$e,He,se.properties))}function jt(Xe,se){se.push(Mt(Xe[0]),It(Xe[1]),0)}function Oe(Xe,se,oe,ge){let Re,$e,et=0;for(let Be=0;Be<Xe.length;Be++){const tt=Mt(Xe[Be][0]),vt=It(Xe[Be][1]);se.push(tt,vt,0),Be>0&&(et+=ge?(Re*vt-tt*$e)/2:Math.sqrt(Math.pow(tt-Re,2)+Math.pow(vt-$e,2))),Re=tt,$e=vt}const He=se.length-3;se[2]=1,xn(se,0,He,oe),se[He+2]=1,se.size=Math.abs(et),se.start=0,se.end=se.size}function pt(Xe,se,oe,ge){for(let Re=0;Re<Xe.length;Re++){const $e=[];Oe(Xe[Re],$e,oe,ge),se.push($e)}}function Mt(Xe){return Xe/360+.5}function It(Xe){const se=Math.sin(Xe*Math.PI/180),oe=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return oe<0?0:oe>1?1:oe}function Nt(Xe,se,oe,ge,Re,$e,et,He){if(ge/=se,$e>=(oe/=se)&&et<ge)return Xe;if(et<oe||$e>=ge)return null;const Be=[];for(const tt of Xe){const vt=tt.geometry;let _t=tt.type;const Xt=Re===0?tt.minX:tt.minY,an=Re===0?tt.maxX:tt.maxY;if(Xt>=oe&&an<ge){Be.push(tt);continue}if(an<oe||Xt>=ge)continue;let Sn=[];if(_t==="Point"||_t==="MultiPoint")Ft(vt,Sn,oe,ge,Re);else if(_t==="LineString")At(vt,Sn,oe,ge,Re,!1,He.lineMetrics);else if(_t==="MultiLineString")Cn(vt,Sn,oe,ge,Re,!1);else if(_t==="Polygon")Cn(vt,Sn,oe,ge,Re,!0);else if(_t==="MultiPolygon")for(const pi of vt){const ti=[];Cn(pi,ti,oe,ge,Re,!0),ti.length&&Sn.push(ti)}if(Sn.length){if(He.lineMetrics&&_t==="LineString"){for(const pi of Sn)Be.push(mt(tt.id,_t,pi,tt.tags));continue}_t!=="LineString"&&_t!=="MultiLineString"||(Sn.length===1?(_t="LineString",Sn=Sn[0]):_t="MultiLineString"),_t!=="Point"&&_t!=="MultiPoint"||(_t=Sn.length===3?"Point":"MultiPoint"),Be.push(mt(tt.id,_t,Sn,tt.tags))}}return Be.length?Be:null}function Ft(Xe,se,oe,ge,Re){for(let $e=0;$e<Xe.length;$e+=3){const et=Xe[$e+Re];et>=oe&&et<=ge&&Dn(se,Xe[$e],Xe[$e+1],Xe[$e+2])}}function At(Xe,se,oe,ge,Re,$e,et){let He=un(Xe);const Be=Re===0?Wn:Bn;let tt,vt,_t=Xe.start;for(let ti=0;ti<Xe.length-3;ti+=3){const Ke=Xe[ti],Ei=Xe[ti+1],Mr=Xe[ti+2],Mn=Xe[ti+3],Ai=Xe[ti+4],Gr=Re===0?Ke:Ei,xi=Re===0?Mn:Ai;let hr=!1;et&&(tt=Math.sqrt(Math.pow(Ke-Mn,2)+Math.pow(Ei-Ai,2))),Gr<oe?xi>oe&&(vt=Be(He,Ke,Ei,Mn,Ai,oe),et&&(He.start=_t+tt*vt)):Gr>ge?xi<ge&&(vt=Be(He,Ke,Ei,Mn,Ai,ge),et&&(He.start=_t+tt*vt)):Dn(He,Ke,Ei,Mr),xi<oe&&Gr>=oe&&(vt=Be(He,Ke,Ei,Mn,Ai,oe),hr=!0),xi>ge&&Gr<=ge&&(vt=Be(He,Ke,Ei,Mn,Ai,ge),hr=!0),!$e&&hr&&(et&&(He.end=_t+tt*vt),se.push(He),He=un(Xe)),et&&(_t+=tt)}let Xt=Xe.length-3;const an=Xe[Xt],Sn=Xe[Xt+1],pi=Re===0?an:Sn;pi>=oe&&pi<=ge&&Dn(He,an,Sn,Xe[Xt+2]),Xt=He.length-3,$e&&Xt>=3&&(He[Xt]!==He[0]||He[Xt+1]!==He[1])&&Dn(He,He[0],He[1],He[2]),He.length&&se.push(He)}function un(Xe){const se=[];return se.size=Xe.size,se.start=Xe.start,se.end=Xe.end,se}function Cn(Xe,se,oe,ge,Re,$e){for(const et of Xe)At(et,se,oe,ge,Re,$e,!1)}function Dn(Xe,se,oe,ge){Xe.push(se,oe,ge)}function Wn(Xe,se,oe,ge,Re,$e){const et=($e-se)/(ge-se);return Dn(Xe,$e,oe+(Re-oe)*et,1),et}function Bn(Xe,se,oe,ge,Re,$e){const et=($e-oe)/(Re-oe);return Dn(Xe,se+(ge-se)*et,$e,1),et}function Cr(Xe,se){const oe=[];for(let ge=0;ge<Xe.length;ge++){const Re=Xe[ge],$e=Re.type;let et;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")et=bi(Re.geometry,se);else if($e==="MultiLineString"||$e==="Polygon"){et=[];for(const He of Re.geometry)et.push(bi(He,se))}else if($e==="MultiPolygon"){et=[];for(const He of Re.geometry){const Be=[];for(const tt of He)Be.push(bi(tt,se));et.push(Be)}}oe.push(mt(Re.id,$e,et,Re.tags))}return oe}function bi(Xe,se){const oe=[];oe.size=Xe.size,Xe.start!==void 0&&(oe.start=Xe.start,oe.end=Xe.end);for(let ge=0;ge<Xe.length;ge+=3)oe.push(Xe[ge]+se,Xe[ge+1],Xe[ge+2]);return oe}function qr(Xe,se){if(Xe.transformed)return Xe;const oe=1<<Xe.z,ge=Xe.x,Re=Xe.y;for(const $e of Xe.features){const et=$e.geometry,He=$e.type;if($e.geometry=[],He===1)for(let Be=0;Be<et.length;Be+=2)$e.geometry.push(da(et[Be],et[Be+1],se,oe,ge,Re));else for(let Be=0;Be<et.length;Be++){const tt=[];for(let vt=0;vt<et[Be].length;vt+=2)tt.push(da(et[Be][vt],et[Be][vt+1],se,oe,ge,Re));$e.geometry.push(tt)}}return Xe.transformed=!0,Xe}function da(Xe,se,oe,ge,Re,$e){return[Math.round(oe*(Xe*ge-Re)),Math.round(oe*(se*ge-$e))]}function Pi(Xe,se,oe,ge,Re){const $e=se===Re.maxZoom?0:Re.tolerance/((1<<se)*Re.extent),et={features:[],numPoints:0,numSimplified:0,numFeatures:Xe.length,source:null,x:oe,y:ge,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const He of Xe)Ao(et,He,$e,Re);return et}function Ao(Xe,se,oe,ge){const Re=se.geometry,$e=se.type,et=[];if(Xe.minX=Math.min(Xe.minX,se.minX),Xe.minY=Math.min(Xe.minY,se.minY),Xe.maxX=Math.max(Xe.maxX,se.maxX),Xe.maxY=Math.max(Xe.maxY,se.maxY),$e==="Point"||$e==="MultiPoint")for(let He=0;He<Re.length;He+=3)et.push(Re[He],Re[He+1]),Xe.numPoints++,Xe.numSimplified++;else if($e==="LineString")Fs(et,Re,Xe,oe,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(let He=0;He<Re.length;He++)Fs(et,Re[He],Xe,oe,$e==="Polygon",He===0);else if($e==="MultiPolygon")for(let He=0;He<Re.length;He++){const Be=Re[He];for(let tt=0;tt<Be.length;tt++)Fs(et,Be[tt],Xe,oe,!0,tt===0)}if(et.length){let He=se.tags||null;if($e==="LineString"&&ge.lineMetrics){He={};for(const tt in se.tags)He[tt]=se.tags[tt];He.mapbox_clip_start=Re.start/Re.size,He.mapbox_clip_end=Re.end/Re.size}const Be={geometry:et,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:He};se.id!==null&&(Be.id=se.id),Xe.features.push(Be)}}function Fs(Xe,se,oe,ge,Re,$e){const et=ge*ge;if(ge>0&&se.size<(Re?et:ge))return void(oe.numPoints+=se.length/3);const He=[];for(let Be=0;Be<se.length;Be+=3)(ge===0||se[Be+2]>et)&&(oe.numSimplified++,He.push(se[Be],se[Be+1])),oe.numPoints++;Re&&(function(Be,tt){let vt=0;for(let _t=0,Xt=Be.length,an=Xt-2;_t<Xt;an=_t,_t+=2)vt+=(Be[_t]-Be[an])*(Be[_t+1]+Be[an+1]);if(vt>0===tt)for(let _t=0,Xt=Be.length;_t<Xt/2;_t+=2){const an=Be[_t],Sn=Be[_t+1];Be[_t]=Be[Xt-2-_t],Be[_t+1]=Be[Xt-1-_t],Be[Xt-2-_t]=an,Be[Xt-1-_t]=Sn}})(He,$e),Xe.push(He)}const Us={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Co{constructor(se,oe){const ge=(oe=this.options=(function($e,et){for(const He in et)$e[He]=et[He];return $e})(Object.create(Us),oe)).debug;if(ge&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Re=(function($e,et){const He=[];if($e.type==="FeatureCollection")for(let Be=0;Be<$e.features.length;Be++)Bt(He,$e.features[Be],et,Be);else Bt(He,$e.type==="Feature"?$e:{geometry:$e},et);return He})(se,oe);this.tiles={},this.tileCoords=[],ge&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Re=(function($e,et){const He=et.buffer/et.extent;let Be=$e;const tt=Nt($e,1,-1-He,He,0,-1,2,et),vt=Nt($e,1,1-He,2+He,0,-1,2,et);return(tt||vt)&&(Be=Nt($e,1,-He,1+He,0,-1,2,et)||[],tt&&(Be=Cr(tt,1).concat(Be)),vt&&(Be=Be.concat(Cr(vt,-1)))),Be})(Re,oe),Re.length&&this.splitTile(Re,0,0,0),ge&&(Re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,oe,ge,Re,$e,et,He){const Be=[se,oe,ge,Re],tt=this.options,vt=tt.debug;for(;Be.length;){Re=Be.pop(),ge=Be.pop(),oe=Be.pop(),se=Be.pop();const _t=1<<oe,Xt=Mo(oe,ge,Re);let an=this.tiles[Xt];if(!an&&(vt>1&&console.time("creation"),an=this.tiles[Xt]=Pi(se,oe,ge,Re,tt),this.tileCoords.push({z:oe,x:ge,y:Re}),vt)){vt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,ge,Re,an.numFeatures,an.numPoints,an.numSimplified),console.timeEnd("creation"));const hr=`z${oe}`;this.stats[hr]=(this.stats[hr]||0)+1,this.total++}if(an.source=se,$e==null){if(oe===tt.indexMaxZoom||an.numPoints<=tt.indexMaxPoints)continue}else{if(oe===tt.maxZoom||oe===$e)continue;if($e!=null){const hr=$e-oe;if(ge!==et>>hr||Re!==He>>hr)continue}}if(an.source=null,se.length===0)continue;vt>1&&console.time("clipping");const Sn=.5*tt.buffer/tt.extent,pi=.5-Sn,ti=.5+Sn,Ke=1+Sn;let Ei=null,Mr=null,Mn=null,Ai=null,Gr=Nt(se,_t,ge-Sn,ge+ti,0,an.minX,an.maxX,tt),xi=Nt(se,_t,ge+pi,ge+Ke,0,an.minX,an.maxX,tt);se=null,Gr&&(Ei=Nt(Gr,_t,Re-Sn,Re+ti,1,an.minY,an.maxY,tt),Mr=Nt(Gr,_t,Re+pi,Re+Ke,1,an.minY,an.maxY,tt),Gr=null),xi&&(Mn=Nt(xi,_t,Re-Sn,Re+ti,1,an.minY,an.maxY,tt),Ai=Nt(xi,_t,Re+pi,Re+Ke,1,an.minY,an.maxY,tt),xi=null),vt>1&&console.timeEnd("clipping"),Be.push(Ei||[],oe+1,2*ge,2*Re),Be.push(Mr||[],oe+1,2*ge,2*Re+1),Be.push(Mn||[],oe+1,2*ge+1,2*Re),Be.push(Ai||[],oe+1,2*ge+1,2*Re+1)}}getTile(se,oe,ge){se=+se,oe=+oe,ge=+ge;const Re=this.options,{extent:$e,debug:et}=Re;if(se<0||se>24)return null;const He=1<<se,Be=Mo(se,oe=oe+He&He-1,ge);if(this.tiles[Be])return qr(this.tiles[Be],$e);et>1&&console.log("drilling down to z%d-%d-%d",se,oe,ge);let tt,vt=se,_t=oe,Xt=ge;for(;!tt&&vt>0;)vt--,_t>>=1,Xt>>=1,tt=this.tiles[Mo(vt,_t,Xt)];return tt&&tt.source?(et>1&&(console.log("found parent tile z%d-%d-%d",vt,_t,Xt),console.time("drilling down")),this.splitTile(tt.source,vt,_t,Xt,se,oe,ge),et>1&&console.timeEnd("drilling down"),this.tiles[Be]?qr(this.tiles[Be],$e):null):null}}function Mo(Xe,se,oe){return 32*((1<<Xe)*oe+se)+Xe}class Kl extends ae{constructor(se,oe,ge,Re=na){super(se,oe,ge),this._dataUpdateable=new Map,this._createGeoJSONIndex=Re}loadVectorTile(se,oe){return m._(this,void 0,void 0,(function*(){const ge=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Re=this._geoJSONIndex.getTile(ge.z,ge.x,ge.y);return Re?ce(new m.d2(Re.features,{version:2,extent:m.a5})):null}))}loadData(se){return m._(this,void 0,void 0,(function*(){var oe;(oe=this._pendingRequest)===null||oe===void 0||oe.abort();const ge=this._startPerformance(se);this._pendingRequest=new AbortController;try{(!this._pendingData||se.request||se.data||se.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest));const Re=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Re,se),this.loaded={};const $e={};return se.request&&($e.data=Re),this._finishPerformance(ge,se,$e),$e}catch(Re){if(delete this._pendingRequest,m.Z(Re))return{abandoned:!0};throw Re}}))}_startPerformance(se){var oe;if(!((oe=se?.request)===null||oe===void 0)&&oe.collectResourceTiming)return new m.c_(se.request)}_finishPerformance(se,oe,ge){if(!se)return;const Re=se.finish();Re&&(ge.resourceTiming={},ge.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Re)))}getData(){return m._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(se){const oe=this.loaded;return oe&&oe[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,oe){return m._(this,void 0,void 0,(function*(){let ge;if(se.request?ge=yield this.loadGeoJSONFromUrl(se.request,se.promoteId,oe):se.data?ge=this._loadGeoJSONFromObject(se.data,se.promoteId):se.dataDiff&&(ge=this._loadGeoJSONFromDiff(se.dataDiff,se.promoteId,se.source)),delete this._pendingRequest,typeof ge!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);return Se(ge,!0),se.filter&&(ge=this._filterGeoJSON(ge,se.filter)),ge}))}loadGeoJSONFromUrl(se,oe,ge){return m._(this,void 0,void 0,(function*(){const Re=yield m.j(se,ge);return this._dataUpdateable=m.a7(Re.data,oe),Re.data}))}_loadGeoJSONFromObject(se,oe){return this._dataUpdateable=m.a7(se,oe),se}_loadGeoJSONFromDiff(se,oe,ge){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ge}`);m.a8(this._dataUpdateable,se,oe);const Re=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Re)}_filterGeoJSON(se,oe){const ge=m.d3(oe,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ge.result==="error")throw new Error(ge.value.map(($e=>`${$e.key}: ${$e.message}`)).join(", "));const Re=se.features.filter(($e=>ge.value.evaluate({zoom:0},$e)));return this._toFeatureCollection(Re)}_toFeatureCollection(se){return{type:"FeatureCollection",features:se}}removeSource(se){return m._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}function na(Xe,se){return se.cluster?new Rt((function({superclusterOptions:oe,clusterProperties:ge}){if(!ge||!oe)return oe;const Re={},$e={},et={accumulated:null,zoom:0},He={properties:null},Be=Object.keys(ge);for(const tt of Be){const[vt,_t]=ge[tt],Xt=m.d3(_t),an=m.d3(typeof vt=="string"?[vt,["accumulated"],["get",tt]]:vt);Re[tt]=Xt.value,$e[tt]=an.value}return oe.map=tt=>{He.properties=tt;const vt={};for(const _t of Be)vt[_t]=Re[_t].evaluate(et,He);return vt},oe.reduce=(tt,vt)=>{He.properties=vt;for(const _t of Be)et.accumulated=tt[_t],tt[_t]=$e[_t].evaluate(et,He)},oe})(se)).load(Xe.features):(function(oe,ge){return new Co(oe,ge)})(Xe,se.geojsonVtOptions)}class Xa{constructor(se){this.self=se,this.actor=new m.L(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(oe,ge)=>{if(this.externalWorkerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.externalWorkerSourceTypes[oe]=ge},this.self.addProtocol=m.cJ,this.self.removeProtocol=m.cK,this.self.registerRTLTextPlugin=oe=>{m.d4.setMethods(oe)},this.actor.registerMessageHandler("LDT",((oe,ge)=>this._getDEMWorkerSource(oe,ge.source).loadTile(ge))),this.actor.registerMessageHandler("RDT",((oe,ge)=>m._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(oe,ge.source).removeTile(ge)})))),this.actor.registerMessageHandler("GCEZ",((oe,ge)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(oe,ge.type,ge.source).getClusterExpansionZoom(ge)})))),this.actor.registerMessageHandler("GCC",((oe,ge)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(oe,ge.type,ge.source).getClusterChildren(ge)})))),this.actor.registerMessageHandler("GCL",((oe,ge)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(oe,ge.type,ge.source).getClusterLeaves(ge)})))),this.actor.registerMessageHandler("LD",((oe,ge)=>this._getWorkerSource(oe,ge.type,ge.source).loadData(ge))),this.actor.registerMessageHandler("GD",((oe,ge)=>this._getWorkerSource(oe,ge.type,ge.source).getData())),this.actor.registerMessageHandler("LT",((oe,ge)=>this._getWorkerSource(oe,ge.type,ge.source).loadTile(ge))),this.actor.registerMessageHandler("RT",((oe,ge)=>this._getWorkerSource(oe,ge.type,ge.source).reloadTile(ge))),this.actor.registerMessageHandler("AT",((oe,ge)=>this._getWorkerSource(oe,ge.type,ge.source).abortTile(ge))),this.actor.registerMessageHandler("RMT",((oe,ge)=>this._getWorkerSource(oe,ge.type,ge.source).removeTile(ge))),this.actor.registerMessageHandler("RS",((oe,ge)=>m._(this,void 0,void 0,(function*(){if(!this.workerSources[oe]||!this.workerSources[oe][ge.type]||!this.workerSources[oe][ge.type][ge.source])return;const Re=this.workerSources[oe][ge.type][ge.source];delete this.workerSources[oe][ge.type][ge.source],Re.removeSource!==void 0&&Re.removeSource(ge)})))),this.actor.registerMessageHandler("RM",(oe=>m._(this,void 0,void 0,(function*(){delete this.layerIndexes[oe],delete this.availableImages[oe],delete this.workerSources[oe],delete this.demWorkerSources[oe],this.globalStates.delete(oe)})))),this.actor.registerMessageHandler("SR",((oe,ge)=>m._(this,void 0,void 0,(function*(){this.referrer=ge})))),this.actor.registerMessageHandler("SRPS",((oe,ge)=>this._syncRTLPluginState(oe,ge))),this.actor.registerMessageHandler("IS",((oe,ge)=>m._(this,void 0,void 0,(function*(){this.self.importScripts(ge)})))),this.actor.registerMessageHandler("SI",((oe,ge)=>this._setImages(oe,ge))),this.actor.registerMessageHandler("UL",((oe,ge)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(oe).update(ge.layers,ge.removedIds,this._getGlobalState(oe))})))),this.actor.registerMessageHandler("UGS",((oe,ge)=>m._(this,void 0,void 0,(function*(){const Re=this._getGlobalState(oe);for(const $e in ge)Re[$e]=ge[$e]})))),this.actor.registerMessageHandler("SL",((oe,ge)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(oe).replace(ge,this._getGlobalState(oe))}))))}_getGlobalState(se){let oe=this.globalStates.get(se);return oe||(oe={},this.globalStates.set(se,oe)),oe}_setImages(se,oe){return m._(this,void 0,void 0,(function*(){this.availableImages[se]=oe;for(const ge in this.workerSources[se]){const Re=this.workerSources[se][ge];for(const $e in Re)Re[$e].availableImages=oe}}))}_syncRTLPluginState(se,oe){return m._(this,void 0,void 0,(function*(){return yield m.d4.syncState(oe,this.self.importScripts)}))}_getAvailableImages(se){let oe=this.availableImages[se];return oe||(oe=[]),oe}_getLayerIndex(se){let oe=this.layerIndexes[se];return oe||(oe=this.layerIndexes[se]=new c),oe}_getWorkerSource(se,oe,ge){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][oe]||(this.workerSources[se][oe]={}),!this.workerSources[se][oe][ge]){const Re={sendAsync:($e,et)=>($e.targetMapId=se,this.actor.sendAsync($e,et))};switch(oe){case"vector":this.workerSources[se][oe][ge]=new ae(Re,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][oe][ge]=new Kl(Re,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][oe][ge]=new this.externalWorkerSourceTypes[oe](Re,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][oe][ge]}_getDEMWorkerSource(se,oe){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][oe]||(this.demWorkerSources[se][oe]=new Me),this.demWorkerSources[se][oe]}}return m.i(self)&&(self.worker=new Xa(self)),Xa})),a("index",["exports","./shared"],(function(m,c){var z="5.16.0";function k(){var S=new c.A(4);return c.A!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S}let B,Z,X;const J={frame(S,i,h){const y=requestAnimationFrame((A=>{b(),i(A)})),{unsubscribe:b}=c.s(S.signal,"abort",(()=>{b(),cancelAnimationFrame(y),h(new c.a(S.signal.reason))}),!1)},frameAsync(S){return new Promise(((i,h)=>{this.frame(S,i,h)}))},getImageData(S,i=0){return this.getImageCanvasContext(S).getImageData(-i,-i,S.width+2*i,S.height+2*i)},getImageCanvasContext(S){const i=window.document.createElement("canvas"),h=i.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return i.width=S.width,i.height=S.height,h.drawImage(S,0,0,S.width,S.height),h},resolveURL:S=>(B||(B=document.createElement("a")),B.href=S,B.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return X!==void 0?X:!!matchMedia&&(Z==null&&(Z=matchMedia("(prefers-reduced-motion: reduce)")),Z.matches)},set prefersReducedMotion(S){X=S}},ce=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(S){this._frozenAt=S}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function ee(){return ce.getCurrentTime()}class ae{static testProp(i){if(!ae.docStyle)return i[0];for(let h=0;h<i.length;h++)if(i[h]in ae.docStyle)return i[h];return i[0]}static create(i,h,y){const b=window.document.createElement(i);return h!==void 0&&(b.className=h),y&&y.appendChild(b),b}static createNS(i,h){return window.document.createElementNS(i,h)}static disableDrag(){ae.docStyle&&ae.selectProp&&(ae.userSelect=ae.docStyle[ae.selectProp],ae.docStyle[ae.selectProp]="none")}static enableDrag(){ae.docStyle&&ae.selectProp&&(ae.docStyle[ae.selectProp]=ae.userSelect)}static setTransform(i,h){i.style[ae.transformProp]=h}static addEventListener(i,h,y,b={}){i.addEventListener(h,y,"passive"in b?b:b.capture)}static removeEventListener(i,h,y,b={}){i.removeEventListener(h,y,"passive"in b?b:b.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",ae.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",ae.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",ae.suppressClickInternal,!0)}),0)}static getScale(i){const h=i.getBoundingClientRect();return{x:h.width/i.offsetWidth||1,y:h.height/i.offsetHeight||1,boundingClientRect:h}}static getPoint(i,h,y){const b=h.boundingClientRect;return new c.P((y.clientX-b.left)/h.x-i.clientLeft,(y.clientY-b.top)/h.y-i.clientTop)}static mousePos(i,h){const y=ae.getScale(i);return ae.getPoint(i,y,h)}static touchPos(i,h){const y=[],b=ae.getScale(i);for(let A=0;A<h.length;A++)y.push(ae.getPoint(i,b,h[A]));return y}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}static sanitize(i){const h=new DOMParser().parseFromString(i,"text/html").body||document.createElement("body"),y=h.querySelectorAll("script");for(const b of y)b.remove();return ae.clean(h),h.innerHTML}static isPossiblyDangerous(i,h){const y=h.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(i)||!y.includes("javascript:")&&!y.includes("data:"))||!!i.startsWith("on")||void 0}static clean(i){const h=i.children;for(const y of h)ae.removeAttributes(y),ae.clean(y)}static removeAttributes(i){for(const{name:h,value:y}of i.attributes)ae.isPossiblyDangerous(h,y)&&i.removeAttribute(h)}}ae.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,ae.selectProp=ae.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),ae.transformProp=ae.testProp(["transform","WebkitTransform"]);const Me={supported:!1,testSupport:function(S){!xe&&we&&(Se?Fe(S):Ae=S)}};let Ae,we,xe=!1,Se=!1;function Fe(S){const i=S.createTexture();S.bindTexture(S.TEXTURE_2D,i);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,we),S.isContextLost())return;Me.supported=!0}catch{}S.deleteTexture(i),xe=!0}var Ue;typeof document<"u"&&(we=document.createElement("img"),we.onload=()=>{Ae&&Fe(Ae),Ae=null,Se=!0},we.onerror=()=>{xe=!0,Ae=null},we.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(S){let i,h,y,b;S.resetRequestQueue=()=>{i=[],h=0,y=0,b={}},S.addThrottleControl=N=>{const F=y++;return b[F]=N,F},S.removeThrottleControl=N=>{delete b[N],M()},S.getImage=(N,F,q=!0)=>new Promise(((Y,W)=>{Me.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),c.e(N,{type:"image"}),i.push({abortController:F,requestParameters:N,supportImageRefresh:q,state:"queued",onError:ie=>{W(ie)},onSuccess:ie=>{Y(ie)}}),M()}));const A=N=>c._(this,void 0,void 0,(function*(){N.state="running";const{requestParameters:F,supportImageRefresh:q,onError:Y,onSuccess:W,abortController:ie}=N,le=q===!1&&!c.i(self)&&!c.g(F.url)&&(!F.headers||Object.keys(F.headers).reduce(((ve,Ee)=>ve&&Ee==="accept"),!0));h++;const _e=le?D(F,ie):c.m(F,ie);try{const ve=yield _e;delete N.abortController,N.state="completed",ve.data instanceof HTMLImageElement||c.b(ve.data)?W(ve):ve.data&&W({data:yield(be=ve.data,typeof createImageBitmap=="function"?c.f(be):c.h(be)),cacheControl:ve.cacheControl,expires:ve.expires})}catch(ve){delete N.abortController,Y(ve)}finally{h--,M()}var be})),M=()=>{const N=(()=>{for(const F of Object.keys(b))if(b[F]())return!0;return!1})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let F=h;F<N&&i.length>0;F++){const q=i.shift();q.abortController.signal.aborted?F--:A(q)}},D=(N,F)=>new Promise(((q,Y)=>{const W=new Image,ie=N.url,le=N.credentials;le&&le==="include"?W.crossOrigin="use-credentials":(le&&le==="same-origin"||!c.d(ie))&&(W.crossOrigin="anonymous"),F.signal.addEventListener("abort",(()=>{W.src="",Y(new c.a(F.signal.reason))})),W.fetchPriority="high",W.onload=()=>{W.onerror=W.onload=null,q({data:W})},W.onerror=()=>{W.onerror=W.onload=null,F.signal.aborted||Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},W.src=ie}))})(Ue||(Ue={})),Ue.resetRequestQueue();class it{constructor(i){this._transformRequestFn=i??null}transformRequest(i,h){return this._transformRequestFn&&this._transformRequestFn(i,h)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function Rt(S){const i=[];if(typeof S=="string")i.push({id:"default",url:S});else if(S&&S.length>0){const h=[];for(const{id:y,url:b}of S){const A=`${y}${b}`;h.indexOf(A)===-1&&(h.push(A),i.push({id:y,url:b}))}}return i}function Pt(S,i,h){try{const y=new URL(S);return y.pathname+=`${i}${h}`,y.toString()}catch{throw new Error(`Invalid sprite URL "${S}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function $t(S){const{userImage:i}=S;return!!(i&&i.render&&i.render())&&(S.data.replace(new Uint8Array(i.data.buffer)),!0)}class Zt extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const i of Object.keys(this.images))this.removeImage(i);this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:h,promiseResolve:y}of this.requestors)y(this._getImagesForIds(h));this.requestors=[]}}getImage(i){const h=this.images[i];if(h&&!h.data&&h.spriteData){const y=h.spriteData;h.data=new c.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),h.spriteData=null}return h}addImage(i,h){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,h)&&(this.images[i]=h)}_validate(i,h){let y=!0;const b=h.data||h.spriteData;return this._validateStretch(h.stretchX,b&&b.width)||(this.fire(new c.k(new Error(`Image "${i}" has invalid "stretchX" value`))),y=!1),this._validateStretch(h.stretchY,b&&b.height)||(this.fire(new c.k(new Error(`Image "${i}" has invalid "stretchY" value`))),y=!1),this._validateContent(h.content,h)||(this.fire(new c.k(new Error(`Image "${i}" has invalid "content" value`))),y=!1),y}_validateStretch(i,h){if(!i)return!0;let y=0;for(const b of i){if(b[0]<y||b[1]<b[0]||h<b[1])return!1;y=b[1]}return!0}_validateContent(i,h){if(!i)return!0;if(i.length!==4)return!1;const y=h.spriteData,b=y&&y.width||h.data.width,A=y&&y.height||h.data.height;return!(i[0]<0||b<i[0]||i[1]<0||A<i[1]||i[2]<0||b<i[2]||i[3]<0||A<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,h,y=!0){const b=this.getImage(i);if(y&&(b.data.width!==h.data.width||b.data.height!==h.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=b.version+1,this.images[i]=h,this.updatedImages[i]=!0}removeImage(i){const h=this.images[i];delete this.images[i],delete this.patterns[i],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise(((h,y)=>{let b=!0;if(!this.isLoaded())for(const A of i)this.images[A]||(b=!1);this.isLoaded()||b?h(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:h})}))}_getImagesForIds(i){const h={};for(const y of i){let b=this.getImage(y);b||(this.fire(new c.l("styleimagemissing",{id:y})),b=this.getImage(y)),b?h[y]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,textFitWidth:b.textFitWidth,textFitHeight:b.textFitHeight,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:c.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return h}getPixelSize(){const{width:i,height:h}=this.atlasImage;return{width:i,height:h}}getPattern(i){const h=this.patterns[i],y=this.getImage(i);if(!y)return null;if(h&&h.position.version===y.version)return h.position;if(h)h.position.version=y.version;else{const b={w:y.data.width+2,h:y.data.height+2,x:0,y:0},A=new c.I(b,y);this.patterns[i]={bin:b,position:A}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const h=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.T(i,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const A in this.patterns)i.push(this.patterns[A].bin);const{w:h,h:y}=c.p(i),b=this.atlasImage;b.resize({width:h||1,height:y||1});for(const A in this.patterns){const{bin:M}=this.patterns[A],D=M.x+1,N=M.y+1,F=this.getImage(A).data,q=F.width,Y=F.height;c.R.copy(F,b,{x:0,y:0},{x:D,y:N},{width:q,height:Y}),c.R.copy(F,b,{x:0,y:Y-1},{x:D,y:N-1},{width:q,height:1}),c.R.copy(F,b,{x:0,y:0},{x:D,y:N+Y},{width:q,height:1}),c.R.copy(F,b,{x:q-1,y:0},{x:D-1,y:N},{width:1,height:Y}),c.R.copy(F,b,{x:0,y:0},{x:D+q,y:N},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const h of i){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const y=this.getImage(h);y||c.w(`Image with ID: "${h}" was not found`),$t(y)&&this.updateImage(h,y)}}cloneImages(){const i={};for(const h in this.images){const y=this.images[h];i[h]=Object.assign(Object.assign({},y),{data:y.data?y.data.clone():null})}return i}}const cn=1e20;function ln(S,i,h,y,b,A,M,D,N){for(let F=i;F<i+y;F++)xn(S,h*A+F,A,b,M,D,N);for(let F=h;F<h+b;F++)xn(S,F*A+i,1,y,M,D,N)}function xn(S,i,h,y,b,A,M){A[0]=0,M[0]=-cn,M[1]=cn,b[0]=S[i];for(let D=1,N=0,F=0;D<y;D++){b[D]=S[i+D*h];const q=D*D;do{const Y=A[N];F=(b[D]-b[Y]+q-Y*Y)/(D-Y)/2}while(F<=M[N]&&--N>-1);N++,A[N]=D,M[N]=F,M[N+1]=cn}for(let D=0,N=0;D<y;D++){for(;M[N+1]<D;)N++;const F=A[N],q=D-F;S[i+D*h]=b[F]+q*q}}const Ge=c.v.layout_symbol["text-font"].default.join(",");class mt{constructor(i,h,y){this.requestManager=i,this.localIdeographFontFamily=h,this.entries={},this.lang=y}setURL(i){this.url=i}getGlyphs(i){return c._(this,void 0,void 0,(function*(){const h=[];for(const A in i)for(const M of i[A])h.push(this._getAndCacheGlyphsPromise(A,M));const y=yield Promise.all(h),b={};for(const{stack:A,id:M,glyph:D}of y)b[A]||(b[A]={}),b[A][M]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};return b}))}_getAndCacheGlyphsPromise(i,h){return c._(this,void 0,void 0,(function*(){let y=this.entries[i];y||(y=this.entries[i]={glyphs:{},requests:{},ranges:{}});let b=y.glyphs[h];return b!==void 0?{stack:i,id:h,glyph:b}:!this.url||this._charUsesLocalIdeographFontFamily(h)?(b=y.glyphs[h]=this._drawGlyph(y,i,h),{stack:i,id:h,glyph:b}):yield this._downloadAndCacheRangePromise(i,h)}))}_downloadAndCacheRangePromise(i,h){return c._(this,void 0,void 0,(function*(){const y=this.entries[i],b=Math.floor(h/256);if(y.ranges[b])return{stack:i,id:h,glyph:null};if(!y.requests[b]){const A=mt.loadGlyphRange(i,b,this.url,this.requestManager);y.requests[b]=A}try{const A=yield y.requests[b];for(const M in A)y.glyphs[+M]=A[+M];return y.ranges[b]=!0,{stack:i,id:h,glyph:A[h]||null}}catch(A){const M=y.glyphs[h]=this._drawGlyph(y,i,h);return this._warnOnMissingGlyphRange(M,b,h,A),{stack:i,id:h,glyph:M}}}))}_warnOnMissingGlyphRange(i,h,y,b){const A=256*h,M=A+255,D=y.toString(16).padStart(4,"0").toUpperCase();c.w(`Unable to load glyph range ${h}, ${A}-${M}. Rendering codepoint U+${D} locally instead. ${b}`)}_charUsesLocalIdeographFontFamily(i){return!!this.localIdeographFontFamily&&c.q(i)}_drawGlyph(i,h,y){const b=h===Ge&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(y),A=b?"ideographTinySDF":"tinySDF";i[A]||(i[A]=this._createTinySDF(b?this.localIdeographFontFamily:h));const M=i[A].draw(String.fromCodePoint(y)),D=new RegExp("^\\p{gc=Cf}+$","u").test(String.fromCodePoint(y));return{id:y,bitmap:new c.r({width:M.width||60,height:M.height||60},M.data),metrics:{width:D?0:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:D?0:M.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(i){const h=i?i.split(","):[];h.push("sans-serif");const y=h.map((b=>/[-\w]+/.test(b)?b:`'${CSS.escape(b)}'`)).join(",");return new mt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:this._fontWeight(h[0]),fontStyle:this._fontStyle(h[0]),lang:this.lang})}_fontStyle(i){return/italic/i.test(i)?"italic":/oblique/i.test(i)?"oblique":"normal"}_fontWeight(i){const h={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let y;for(const[b,A]of Object.entries(h))new RegExp(`\\b${b}\\b`,"i").test(i)&&(y=`${A}`);return y}destroy(){for(const i in this.entries){const h=this.entries[i];h.tinySDF&&(h.tinySDF=null),h.ideographTinySDF&&(h.ideographTinySDF=null),h.glyphs={},h.requests={},h.ranges={}}this.entries={}}}mt.loadGlyphRange=function(S,i,h,y){return c._(this,void 0,void 0,(function*(){const b=256*i,A=b+255,M=y.transformRequest(h.replace("{fontstack}",S).replace("{range}",`${b}-${A}`),"Glyphs"),D=yield c.n(M,new AbortController);if(!D||!D.data)throw new Error(`Could not load glyph range. range: ${i}, ${b}-${A}`);const N={};for(const F of c.o(D.data))N[F.id]=F;return N}))},mt.TinySDF=class{constructor({fontSize:S=24,buffer:i=3,radius:h=8,cutoff:y=.25,fontFamily:b="sans-serif",fontWeight:A="normal",fontStyle:M="normal",lang:D=null}={}){this.buffer=i,this.cutoff=y,this.radius=h,this.lang=D;const N=this.size=S+4*i,F=this._createCanvas(N),q=this.ctx=F.getContext("2d",{willReadFrequently:!0});q.font=`${M} ${A} ${S}px ${b}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(S){const i=document.createElement("canvas");return i.width=i.height=S,i}draw(S){const{width:i,actualBoundingBoxAscent:h,actualBoundingBoxDescent:y,actualBoundingBoxLeft:b,actualBoundingBoxRight:A}=this.ctx.measureText(S),M=Math.ceil(h),D=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(A-b))),N=Math.min(this.size-this.buffer,M+Math.ceil(y)),F=D+2*this.buffer,q=N+2*this.buffer,Y=Math.max(F*q,0),W=new Uint8ClampedArray(Y),ie={data:W,width:F,height:q,glyphWidth:D,glyphHeight:N,glyphTop:M,glyphLeft:0,glyphAdvance:i};if(D===0||N===0)return ie;const{ctx:le,buffer:_e,gridInner:be,gridOuter:ve}=this;this.lang&&(le.lang=this.lang),le.clearRect(_e,_e,D,N),le.fillText(S,_e,_e+M);const Ee=le.getImageData(_e,_e,D,N);ve.fill(cn,0,Y),be.fill(0,0,Y);for(let Pe=0;Pe<N;Pe++)for(let Te=0;Te<D;Te++){const ke=Ee.data[4*(Pe*D+Te)+3]/255;if(ke===0)continue;const Ne=(Pe+_e)*F+Te+_e;if(ke===1)ve[Ne]=0,be[Ne]=cn;else{const ze=.5-ke;ve[Ne]=ze>0?ze*ze:0,be[Ne]=ze<0?ze*ze:0}}ln(ve,0,0,F,q,F,this.f,this.v,this.z),ln(be,_e,_e,D,N,F,this.f,this.v,this.z);for(let Pe=0;Pe<Y;Pe++){const Te=Math.sqrt(ve[Pe])-Math.sqrt(be[Pe]);W[Pe]=Math.round(255-255*(Te/this.radius+this.cutoff))}return ie}};class qe{constructor(){this.specification=c.u.light.position}possiblyEvaluate(i,h){return c.F(i.expression.evaluate(h))}interpolate(i,h,y){return{x:c.G.number(i.x,h.x,y),y:c.G.number(i.y,h.y,y),z:c.G.number(i.z,h.z,y)}}}let Bt;class jt extends c.E{constructor(i){super(),Bt=Bt||new c.t({anchor:new c.D(c.u.light.anchor),position:new qe,color:new c.D(c.u.light.color),intensity:new c.D(c.u.light.intensity)}),this._transitionable=new c.x(Bt,void 0),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,h={}){if(!this._validate(c.y,i,h))for(const y in i){const b=i[y];y.endsWith(c.z)?this._transitionable.setTransition(y.slice(0,-c.z.length),b):this._transitionable.setValue(y,b)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,h,y){return(!y||y.validate!==!1)&&c.B(this,i.call(c.C,{value:h,style:{glyphs:!0,sprite:!0},styleSpec:c.u}))}}const Oe=new c.t({"sky-color":new c.D(c.u.sky["sky-color"]),"horizon-color":new c.D(c.u.sky["horizon-color"]),"fog-color":new c.D(c.u.sky["fog-color"]),"fog-ground-blend":new c.D(c.u.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.u.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.u.sky["atmosphere-blend"])});class pt extends c.E{constructor(i){super(),this._transitionable=new c.x(Oe,void 0),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0))}setSky(i,h={}){if(!this._validate(c.J,i,h)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const y in i){const b=i[y];y.endsWith(c.z)?this._transitionable.setTransition(y.slice(0,-c.z.length),b):this._transitionable.setValue(y,b)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,h,y={}){return y?.validate!==!1&&c.B(this,i.call(c.C,c.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:c.u})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class Mt{constructor(i,h){this.width=i,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,h){const y=i.join(",")+String(h);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(i,h)),this.dashEntry[y]}getDashRanges(i,h,y){const b=[];let A=i.length%2==1?-i[i.length-1]*y:0,M=i[0]*y,D=!0;b.push({left:A,right:M,isDash:D,zeroLength:i[0]===0});let N=i[0];for(let F=1;F<i.length;F++){D=!D;const q=i[F];A=N*y,N+=q,M=N*y,b.push({left:A,right:M,isDash:D,zeroLength:q===0})}return b}addRoundDash(i,h,y){const b=h/2;for(let A=-y;A<=y;A++){const M=this.width*(this.nextRow+y+A);let D=0,N=i[D];for(let F=0;F<this.width;F++){F/N.right>1&&(N=i[++D]);const q=Math.abs(F-N.left),Y=Math.abs(F-N.right),W=Math.min(q,Y);let ie;const le=A/y*(b+1);if(N.isDash){const _e=b-Math.abs(le);ie=Math.sqrt(W*W+_e*_e)}else ie=b-Math.sqrt(W*W+le*le);this.data[M+F]=Math.max(0,Math.min(255,ie+128))}}}addRegularDash(i){for(let D=i.length-1;D>=0;--D){const N=i[D],F=i[D+1];N.zeroLength?i.splice(D,1):F&&F.isDash===N.isDash&&(F.left=N.left,i.splice(D,1))}const h=i[0],y=i[i.length-1];h.isDash===y.isDash&&(h.left=y.left-this.width,y.right=h.right+this.width);const b=this.width*this.nextRow;let A=0,M=i[A];for(let D=0;D<this.width;D++){D/M.right>1&&(M=i[++A]);const N=Math.abs(D-M.left),F=Math.abs(D-M.right),q=Math.min(N,F);this.data[b+D]=Math.max(0,Math.min(255,(M.isDash?q:-q)+128))}}addDash(i,h){const y=h?7:0,b=2*y+1;if(this.nextRow+b>this.height)return c.w("LineAtlas out of space"),null;let A=0;for(let D=0;D<i.length;D++)A+=i[D];if(A!==0){const D=this.width/A,N=this.getDashRanges(i,this.width,D);h?this.addRoundDash(N,D,y):this.addRegularDash(N)}const M={y:this.nextRow+y,height:2*y,width:A};return this.nextRow+=b,this.dirty=!0,M}bind(i){const h=i.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}const It="maplibre_preloaded_worker_pool";class Nt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Nt.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach((h=>{h.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[It]}numActive(){return Object.keys(this.active).length}}const Ft=Math.floor(J.hardwareConcurrency/2);let At,un;function Cn(){return At||(At=new Nt),At}Nt.workerCount=c.K(globalThis)?Math.max(Math.min(Ft,3),1):1;class Dn{constructor(i,h){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=h;const y=this.workerPool.acquire(h);for(let b=0;b<y.length;b++){const A=new c.L(y[b],h);A.name=`Worker ${b}`,this.actors.push(A)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,h){const y=[];for(const b of this.actors)y.push(b.sendAsync({type:i,data:h}));return Promise.all(y)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach((h=>{h.remove()})),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,h){for(const y of this.actors)y.registerMessageHandler(i,h)}unregisterMessageHandler(i){for(const h of this.actors)h.unregisterMessageHandler(i)}}function Wn(){return un||(un=new Dn(Cn(),c.M),un.registerMessageHandler("GR",((S,i,h)=>c.m(i,h)))),un}function Bn(S,i){const h=c.N();return c.O(h,h,[1,1,0]),c.Q(h,h,[.5*S.width,.5*S.height,1]),S.calculatePosMatrix?c.S(h,h,S.calculatePosMatrix(i.toUnwrapped())):h}function Cr(S,i,h,y,b,A,M){var D;const N=(function(W,ie,le){if(W)for(const _e of W){const be=ie[_e];if(be&&be.source===le&&be.type==="fill-extrusion")return!0}else for(const _e in ie){const be=ie[_e];if(be.source===le&&be.type==="fill-extrusion")return!0}return!1})((D=b?.layers)!==null&&D!==void 0?D:null,i,S.id),F=A.maxPitchScaleFactor(),q=S.tilesIn(y,F,N);q.sort(bi);const Y=[];for(const W of q)Y.push({wrappedTileID:W.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(i,h,S.getState(),W.queryGeometry,W.cameraQueryGeometry,W.scale,b,A,F,Bn(A,W.tileID),M?(ie,le)=>M(W.tileID,ie,le):void 0)});return(function(W,ie){for(const le in W)for(const _e of W[le])qr(_e,ie);return W})((function(W){const ie={},le={};for(const _e of W){const be=_e.queryResults,ve=_e.wrappedTileID,Ee=le[ve]=le[ve]||{};for(const Pe in be){const Te=be[Pe],ke=Ee[Pe]=Ee[Pe]||{},Ne=ie[Pe]=ie[Pe]||[];for(const ze of Te)ke[ze.featureIndex]||(ke[ze.featureIndex]=!0,Ne.push(ze))}}return ie})(Y),S)}function bi(S,i){const h=S.tileID,y=i.tileID;return h.overscaledZ-y.overscaledZ||h.canonical.y-y.canonical.y||h.wrap-y.wrap||h.canonical.x-y.canonical.x}function qr(S,i){const h=S.feature,y=i.getFeatureState(h.layer["source-layer"],h.id);h.source=h.layer.source,h.layer["source-layer"]&&(h.sourceLayer=h.layer["source-layer"]),h.state=y}function da(S,i,h){return c._(this,void 0,void 0,(function*(){let y=S;if(S.url?y=(yield c.j(i.transformRequest(S.url,"Source"),h)).data:yield J.frameAsync(h),!y)return null;const b=c.U(c.e(y,S),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in y&&y.vector_layers&&(b.vectorLayerIds=y.vector_layers.map((A=>A.id))),b}))}class Pi{constructor(i,h){i&&(h?this.setSouthWest(i).setNorthEast(h):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof c.V?new c.V(i.lng,i.lat):c.V.convert(i),this}setSouthWest(i){return this._sw=i instanceof c.V?new c.V(i.lng,i.lat):c.V.convert(i),this}extend(i){const h=this._sw,y=this._ne;let b,A;if(i instanceof c.V)b=i,A=i;else{if(!(i instanceof Pi))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Pi.convert(i)):this.extend(c.V.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(c.V.convert(i)):this;if(b=i._sw,A=i._ne,!b||!A)return this}return h||y?(h.lng=Math.min(b.lng,h.lng),h.lat=Math.min(b.lat,h.lat),y.lng=Math.max(A.lng,y.lng),y.lat=Math.max(A.lat,y.lat)):(this._sw=new c.V(b.lng,b.lat),this._ne=new c.V(A.lng,A.lat)),this}getCenter(){return new c.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.V(this.getWest(),this.getNorth())}getSouthEast(){return new c.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:h,lat:y}=c.V.convert(i);let b=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&b}intersects(i){if(!((i=Pi.convert(i)).getNorth()>=this.getSouth()&&i.getSouth()<=this.getNorth()))return!1;const h=Math.abs(this.getEast()-this.getWest()),y=Math.abs(i.getEast()-i.getWest());if(h>=360||y>=360)return!0;const b=c.W(this.getWest(),-180,180),A=c.W(this.getEast(),-180,180),M=c.W(i.getWest(),-180,180),D=c.W(i.getEast(),-180,180),N=b>=A,F=M>=D;return!(!N||!F)||(N?D>=b||M<=A:F?A>=M||b<=D:M<=A&&D>=b)}static convert(i){return i instanceof Pi?i:i&&new Pi(i)}static fromLngLat(i,h=0){const y=360*h/40075017,b=y/Math.cos(Math.PI/180*i.lat);return new Pi(new c.V(i.lng-b,i.lat-y),new c.V(i.lng+b,i.lat+y))}adjustAntiMeridian(){const i=new c.V(this._sw.lng,this._sw.lat),h=new c.V(this._ne.lng,this._ne.lat);return new Pi(i,i.lng>h.lng?new c.V(h.lng+360,h.lat):h)}}class Ao{constructor(i,h,y){this.bounds=Pi.convert(this.validateBounds(i)),this.minzoom=h||0,this.maxzoom=y||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const h=Math.pow(2,i.z),y=Math.floor(c.Y(this.bounds.getWest())*h),b=Math.floor(c.X(this.bounds.getNorth())*h),A=Math.ceil(c.Y(this.bounds.getEast())*h),M=Math.ceil(c.X(this.bounds.getSouth())*h);return i.x>=y&&i.x<A&&i.y>=b&&i.y<M}}class Fs extends c.E{constructor(i,h,y,b){if(super(),this.id=i,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.U(h,["url","scheme","tileSize","promoteId","encoding"])),this._options=c.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield da(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),i&&(c.e(this,i),i.bounds&&(this.tileBounds=new Ao(i.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this._loaded=!0,c.Z(i)||this.fire(new c.k(i))}}))}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(i){return c._(this,void 0,void 0,(function*(){const h=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(h,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(i)};y.request.collectResourceTiming=this._collectResourceTiming;let b="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise(((A,M)=>{i.reloadPromise={resolve:A,reject:M}}))}else i.actor=this.dispatcher.getActor(),b="LT";i.abortController=new AbortController;try{const A=yield i.actor.sendAsync({type:b,data:y},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,A)}catch(A){if(delete i.abortController,i.aborted)return;if(A&&A.status!==404)throw A;this._afterTileLoadWorkerResponse(i,null)}}))}_getOverzoomParameters(i){if(i.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const h=i.tileID.scaledTo(this.maxzoom).canonical,y=h.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:h,overzoomRequest:this.map._requestManager.transformRequest(y,"Tile")}}_afterTileLoadWorkerResponse(i,h){if(h&&h.resourceTiming&&(i.resourceTiming=h.resourceTiming),h&&this.map._refreshExpiredTiles&&i.setExpiryData(h),i.loadVectorData(h,this.map.painter),i.reloadPromise){const y=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(y.resolve).catch(y.reject)}}abortTile(i){return c._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}unloadTile(i){return c._(this,void 0,void 0,(function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Us extends c.E{constructor(i,h,y,b){super(),this.id=i,this.dispatcher=y,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},h),c.e(this,c.U(h,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,(function*(i=!1){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const h=yield da(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,h&&(c.e(this,h),h.bounds&&(this.tileBounds=new Ao(h.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:i})))}catch(h){this._tileJSONRequest=null,this._loaded=!0,c.Z(h)||this.fire(new c.k(h))}}))}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load(!0)}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}serialize(){return c.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return c._(this,void 0,void 0,(function*(){const h=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const y=yield Ue.getImage(this.map._requestManager.transformRequest(h,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(y&&y.data){this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&i.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const b=this.map.painter.context,A=b.gl,M=y.data;i.texture=this.map.painter.getTileTexture(M.width),i.texture?i.texture.update(M,{useMipmap:!0}):(i.texture=new c.T(b,M,A.RGBA,{useMipmap:!0}),i.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(y){if(delete i.abortController,i.aborted)i.state="unloaded";else if(y)throw i.state="errored",y}}))}abortTile(i){return c._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)}))}unloadTile(i){return c._(this,void 0,void 0,(function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)}))}hasTransition(){return!1}}class Co extends Us{constructor(i,h,y,b){super(i,h,y,b),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(i){return c._(this,void 0,void 0,(function*(){const h=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(h,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const b=yield Ue.getImage(y,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(b&&b.data){const A=b.data;this.map._refreshExpiredTiles&&(b.cacheControl||b.expires)&&i.setExpiryData({cacheControl:b.cacheControl,expires:b.expires});const M=c.b(A)&&c.$()?A:yield this.readImageNow(A),D={type:this.type,uid:i.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const N=yield i.actor.sendAsync({type:"LDT",data:D});i.dem=N,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(b){if(delete i.abortController,i.aborted)i.state="unloaded";else if(b)throw i.state="errored",b}}))}readImageNow(i){return c._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&c.a0()){const h=i.width+2,y=i.height+2;try{return new c.R({width:h,height:y},yield c.a1(i,-1,-1,h,y))}catch{}}return J.getImageData(i,1)}))}_getNeighboringTiles(i){const h=i.canonical,y=Math.pow(2,h.z),b=(h.x-1+y)%y,A=h.x===0?i.wrap-1:i.wrap,M=(h.x+1+y)%y,D=h.x+1===y?i.wrap+1:i.wrap,N={};return N[new c.a2(i.overscaledZ,A,h.z,b,h.y).key]={backfilled:!1},N[new c.a2(i.overscaledZ,D,h.z,M,h.y).key]={backfilled:!1},h.y>0&&(N[new c.a2(i.overscaledZ,A,h.z,b,h.y-1).key]={backfilled:!1},N[new c.a2(i.overscaledZ,i.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},N[new c.a2(i.overscaledZ,D,h.z,M,h.y-1).key]={backfilled:!1}),h.y+1<y&&(N[new c.a2(i.overscaledZ,A,h.z,b,h.y+1).key]={backfilled:!1},N[new c.a2(i.overscaledZ,i.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},N[new c.a2(i.overscaledZ,D,h.z,M,h.y+1).key]={backfilled:!1}),N}unloadTile(i){return c._(this,void 0,void 0,(function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))}))}}function Mo(S){return S.type==="GeometryCollection"?S.geometries.map((i=>i.coordinates)).flat(1/0):S.coordinates.flat(1/0)}function Kl(S){const i=new Pi;let h;switch(S.type){case"FeatureCollection":h=S.features.map((y=>Mo(y.geometry))).flat(1/0);break;case"Feature":h=Mo(S.geometry);break;default:h=Mo(S)}if(h.length==0)return i;for(let y=0;y<h.length-1;y+=2)i.extend([h[y],h[y+1]]);return i}class na extends c.E{constructor(i,h,y,b){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:h.data},this.actor=y.getActor(),this.setEventedParent(b),this._data=typeof h.data=="string"?{url:h.data}:{geojson:h.data},this._options=c.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId,h.clusterMaxZoom!==void 0&&this.maxzoom<=h.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${h.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(h.buffer!==void 0?h.buffer:128),tolerance:this._pixelsToTileUnits(h.tolerance!==void 0?h.tolerance:.375),extent:c.a5,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(h.clusterMaxZoom),minPoints:Math.max(2,h.clusterMinPoints||2),extent:c.a5,radius:this._pixelsToTileUnits(h.clusterRadius||50),log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(i){return i*(c.a5/this.tileSize)}_getClusterMaxZoom(i){const h=i?Math.round(i):this.maxzoom-1;return Number.isInteger(i)||i===void 0||c.w(`Integer expected for option 'clusterMaxZoom': provided value "${i}" rounded to "${h}"`),h}load(){return c._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(i){this.map=i,this.load()}setData(i,h){this._data=typeof i=="string"?{url:i}:{geojson:i},this._pendingWorkerUpdate={data:i};const y=this._updateWorkerData();return h?y:this}updateData(i,h){this._pendingWorkerUpdate.diff=c.a6(this._pendingWorkerUpdate.diff,i);const y=this._updateWorkerData();return h?y:this}getData(){return c._(this,void 0,void 0,(function*(){const i=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})}))}getBounds(){return c._(this,void 0,void 0,(function*(){return Kl(yield this.getData())}))}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(i.clusterRadius)),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(i.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,h,y){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:h,offset:y}})}_updateWorkerData(){return c._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void c.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:i,diff:h}=this._pendingWorkerUpdate,y=c.e({type:this.type},this.workerOptions);i!==void 0?(typeof i=="string"?(y.request=this.map._requestManager.transformRequest(J.resolveURL(i),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=i,this._pendingWorkerUpdate.data=void 0):h&&(y.dataDiff=h,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new c.l("dataloading",{dataType:"source"}));try{const b=yield this.actor.sendAsync({type:"LD",data:y});if(this._isUpdatingWorker=!1,this._removed||b.abandoned)return void this.fire(new c.l("dataabort",{dataType:"source"}));b.data&&(this._data={geojson:b.data});const A=this._applyDiffToSource(h),M=this._getShouldReloadTileOptions(A);let D=null;b.resourceTiming&&b.resourceTiming[this.id]&&(D=b.resourceTiming[this.id].slice(0));const N={dataType:"source"};this._collectResourceTiming&&D&&D.length>0&&c.e(N,{resourceTiming:D}),this.fire(new c.l("data",Object.assign(Object.assign({},N),{sourceDataType:"metadata"}))),this.fire(new c.l("data",Object.assign(Object.assign({},N),{sourceDataType:"content",shouldReloadTileOptions:M})))}catch(b){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new c.l("dataabort",{dataType:"source"}));this.fire(new c.k(b))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(i){if(!i)return;const h=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const b=c.a7(this._data.geojson,h);if(!b)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:b}}if(!this._data.updateable)return;const y=c.a8(this._data.updateable,i,h);return i.removeAll||this._options.cluster?void 0:y}_getShouldReloadTileOptions(i){if(i)return{affectedBounds:i.filter(Boolean).map((h=>Kl(h)))}}shouldReloadTile(i,{affectedBounds:h}){if(i.state==="loading")return!0;if(i.state==="unloaded")return!1;const{buffer:y,extent:b}=this.workerOptions.geojsonVtOptions,A=(function({x:M,y:D,z:N},F=0){const q=c.a3((M-F)/Math.pow(2,N)),Y=c.a4((D+1+F)/Math.pow(2,N)),W=c.a3((M+1+F)/Math.pow(2,N)),ie=c.a4((D-F)/Math.pow(2,N));return new Pi([q,Y],[W,ie])})(i.tileID.canonical,y/b);for(const M of h)if(A.intersects(M))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(i){return c._(this,void 0,void 0,(function*(){const h=i.actor?"RT":"LT";i.actor=this.actor;const y={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};i.abortController=new AbortController;const b=yield this.actor.sendAsync({type:h,data:y},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(b,this.map.painter,h==="RT")}))}abortTile(i){return c._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0}))}unloadTile(i){return c._(this,void 0,void 0,(function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Xa extends c.E{constructor(i,h,y,b){super(),this.flippedWindingOrder=!1,this.id=i,this.dispatcher=y,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=h}load(i){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const h=yield Ue.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,h&&h.data&&(this.image=h.data,i&&(this.coordinates=i),this._finishLoading())}catch(h){this._request=null,this._loaded=!0,c.Z(h)||this.fire(new c.k(h))}}))}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const h=i.map(c.a9.fromLngLat);var y;return this.tileID=(function(b){const A=c.aa.fromPoints(b),M=A.width(),D=A.height(),N=Math.max(M,D),F=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),q=Math.pow(2,F);return new c.ac(F,Math.floor((A.minX+A.maxX)/2*q),Math.floor((A.minY+A.maxY)/2*q))})(h),this.terrainTileRanges=this._getOverlappingTileRanges(h),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=h.map((b=>this.tileID.getTilePoint(b)._round())),this.flippedWindingOrder=((y=this.tileCoords)[1].x-y[0].x)*(y[2].y-y[0].y)-(y[1].y-y[0].y)*(y[2].x-y[0].x)<0,this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,h=i.gl;this.texture||(this.texture=new c.T(i,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const A=this.tiles[b];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,y=!0)}y&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return c._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(i){const{minX:h,minY:y,maxX:b,maxY:A}=c.aa.fromPoints(i),M={};for(let D=0;D<=c.ab;D++){const N=Math.pow(2,D),F=Math.floor(h*N),q=Math.floor(y*N),Y=Math.floor(b*N),W=Math.floor(A*N),ie=(F%N+N)%N,le=Y%N,_e=Math.floor(F/N),be=Math.floor(Y/N);M[D]={minWrap:_e,maxWrap:be,minTileXWrapped:ie,maxTileXWrapped:le,minTileY:q,maxTileY:W}}return M}}class Xe extends Xa{constructor(i,h,y,b){super(i,h,y,b),this.roundZoom=!0,this.type="video",this.options=h}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const h of i.urls)this.urls.push(this.map._requestManager.transformRequest(h,"Source").url);try{const h=yield c.ad(this.urls);if(this._loaded=!0,!h)return;this.video=h,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(h){this.fire(new c.k(h))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const h=this.video.seekable;i<h.start(0)||i>h.end(0)?this.fire(new c.k(new c.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,h=i.gl;this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new c.T(i,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const A=this.tiles[b];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,y=!0)}y&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class se extends Xa{constructor(i,h,y,b){super(i,h,y,b),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some((A=>!Array.isArray(A)||A.length!==2||A.some((M=>typeof M!="number"))))||this.fire(new c.k(new c.ae(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.k(new c.ae(`sources.${i}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new c.k(new c.ae(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new c.k(new c.ae(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.k(new c.ae(`sources.${i}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,y=h.gl;this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new c.T(h,this.canvas,y.RGBA,{premultiply:!0}),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let b=!1;for(const A in this.tiles){const M=this.tiles[A];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,b=!0)}b&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const oe={},ge=S=>{switch(S){case"geojson":return na;case"image":return Xa;case"raster":return Us;case"raster-dem":return Co;case"vector":return Fs;case"video":return Xe;case"canvas":return se}return oe[S]},Re="RTLPluginLoaded";class $e extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Wn()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch((h=>{throw this.status="error",h}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return c._(this,arguments,void 0,(function*(h,y=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=J.resolveURL(h),!this.url)throw new Error(`requested url ${h} is invalid`);if(this.status==="unavailable"){if(!y)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return c._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.l(Re))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let et=null;function He(){return et||(et=new $e),et}var Be,tt;(function(S){S[S.Base=0]="Base",S[S.Parent=1]="Parent"})(Be||(Be={})),(function(S){S[S.Departing=0]="Departing",S[S.Incoming=1]="Incoming"})(tt||(tt={}));class vt{constructor(i,h){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=i,this.uid=c.af(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(i){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(i||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:i,fadingDirection:h,fadingParentID:y,fadeEndTime:b}){this.resetFadeLogic(),this.fadingRole=i,this.fadingDirection=h,this.fadingParentID=y,this.fadeEndTime=b}setSelfFadeLogic(i){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=i}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=ee(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,h,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData,this.latestFeatureIndex.encoding=i.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=(function(b,A){const M={};if(!A)return M;for(const D of b){const N=D.layerIds.map((F=>A.getLayer(F))).filter(Boolean);if(N.length!==0){D.layers=N,D.stateDependentLayerIds&&(D.stateDependentLayers=D.stateDependentLayerIds.map((F=>N.filter((q=>q.id===F))[0])));for(const F of N)M[F.id]=D}}return M})(i.buckets,h?.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const A=this.buckets[b];if(A instanceof c.ah){if(this.hasSymbolBuckets=!0,!y)break;A.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const A=this.buckets[b];if(A instanceof c.ah&&A.hasRTLText){this.hasRTLText=!0,He().lazyLoad();break}}this.queryPadding=0;for(const b in this.buckets){const A=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(b).queryRadius(A))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),this.dashPositions=i.dashPositions}else this.collisionBoxArray=new c.ag}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const y in this.buckets){const b=this.buckets[y];b.uploadPending()&&b.upload(i)}const h=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new c.T(i,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new c.T(i,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,h,y,b,A,M,D,N,F,q,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:A,scale:M,tileSize:this.tileSize,pixelPosMatrix:q,transform:N,params:D,queryPadding:this.queryPadding*F,getElevation:Y},i,h,y):{}}querySourceFeatures(i,h){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const b=y.loadVTLayers(),A=h&&h.sourceLayer?h.sourceLayer:"",M=b[c.ai]||b[A];if(!M)return;const D=c.aj(h?.filter,h?.globalState),{z:N,x:F,y:q}=this.tileID.canonical,Y={z:N,x:F,y:q};for(let W=0;W<M.length;W++){const ie=M.feature(W);if(D.needGeometry){const be=c.ak(ie,!0);if(!D.filter(new c.H(this.tileID.overscaledZ),be,this.tileID.canonical))continue}else if(!D.filter(new c.H(this.tileID.overscaledZ),ie))continue;const le=y.getId(ie,A),_e=new c.al(ie,N,F,q,le);_e.tile=Y,i.push(_e)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const h=this.expirationTime;if(i.cacheControl){const y=c.am(i.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const y=Date.now();let b=!1;if(this.expirationTime>y)b=!1;else if(h)if(this.expirationTime<h)b=!0;else{const A=this.expirationTime-h;A?this.expirationTime=y+Math.max(A,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!h.style.hasLayer(b))continue;const A=this.buckets[b],M=A.layers[0].sourceLayer||c.ai,D=y[M],N=i[M];if(!D||!N||Object.keys(N).length===0)continue;A.update(N,D,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const F=h&&h.style&&h.style.getLayer(b);F&&(this.queryPadding=Math.max(this.queryPadding,F.queryRadius(A)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ee()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(i){this.symbolFadeHoldUntil=ee()+i}setDependencies(i,h){const y={};for(const b of h)y[b]=!0;this.dependencies[i]=y}hasDependency(i,h){for(const y of i){const b=this.dependencies[y];if(b){for(const A of h)if(b[A])return!0}}return!1}}class _t{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,h,y){const b=String(h);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][b]=this.stateChanges[i][b]||{},c.e(this.stateChanges[i][b],y),this.deletedStates[i]===null){this.deletedStates[i]={};for(const A in this.state[i])A!==b&&(this.deletedStates[i][A]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][b]===null){this.deletedStates[i][b]={};for(const A in this.state[i][b])y[A]||(this.deletedStates[i][b][A]=null)}else for(const A in y)this.deletedStates[i]&&this.deletedStates[i][b]&&this.deletedStates[i][b][A]===null&&delete this.deletedStates[i][b][A]}removeFeatureState(i,h,y){if(this.deletedStates[i]===null)return;const b=String(h);if(this.deletedStates[i]=this.deletedStates[i]||{},y&&h!==void 0)this.deletedStates[i][b]!==null&&(this.deletedStates[i][b]=this.deletedStates[i][b]||{},this.deletedStates[i][b][y]=null);else if(h!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][b])for(y in this.deletedStates[i][b]={},this.stateChanges[i][b])this.deletedStates[i][b][y]=null;else this.deletedStates[i][b]=null;else this.deletedStates[i]=null}getState(i,h){const y=String(h),b=c.e({},(this.state[i]||{})[y],(this.stateChanges[i]||{})[y]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const A=this.deletedStates[i][h];if(A===null)return{};for(const M in A)delete b[M]}return b}initializeTileState(i,h){i.setFeatureState(this.state,h)}coalesceChanges(i,h){const y={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const A={};for(const M in this.stateChanges[b])this.state[b][M]||(this.state[b][M]={}),c.e(this.state[b][M],this.stateChanges[b][M]),A[M]=this.state[b][M];y[b]=A}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const A={};if(this.deletedStates[b]===null)for(const M in this.state[b])A[M]={},this.state[b][M]={};else for(const M in this.deletedStates[b]){if(this.deletedStates[b][M]===null)this.state[b][M]={};else for(const D of Object.keys(this.deletedStates[b][M]))delete this.state[b][M][D];A[M]=this.state[b][M]}y[b]=y[b]||{},c.e(y[b],A)}this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0&&i.setFeatureState(y,h)}}const Xt=89.25;function an(S,i){const h=c.an(i.lat,-c.ao,c.ao);return new c.P(c.Y(i.lng)*S,c.X(h)*S)}function Sn(S,i){return new c.a9(i.x/S,i.y/S).toLngLat()}function pi(S){return S.cameraToCenterDistance*Math.min(.85*Math.tan(c.ap(90-S.pitch)),Math.tan(c.ap(Xt-S.pitch)))}function ti(S,i){const h=S.canonical,y=i/c.aq(h.z),b=h.x+Math.pow(2,h.z)*S.wrap,A=c.ar(new Float64Array(16));return c.O(A,A,[b*y,h.y*y,0]),c.Q(A,A,[y/c.a5,y/c.a5,1]),A}function Ke(S,i,h,y,b){const A=c.a9.fromLngLat(S,i),M=b*c.as(1,S.lat),{x:D,y:N,z:F}=Ei(h,y);return new c.a9(A.x+M*-D,A.y+M*-N,A.z+M*-F)}function Ei(S,i){const h=c.ap(S),y=c.ap(i),b=Math.cos(-h),A=Math.sin(h);return{x:A*Math.sin(y),y:-A*Math.cos(y),z:b}}function Mr(S,i,h){const y=i.intersectsFrustum(S);if(!h||y===0)return y;const b=i.intersectsPlane(h);return b===0?0:y===2&&b===2?2:1}function Mn(S,i,h){let y=0;const b=(h-i)/10;for(let A=0;A<10;A++)y+=b*Math.pow(Math.cos(i+(A+.5)/10*(h-i)),S);return y}function Ai(S,i){return function(h,y,b,A,M){const D=2*((S-1)/c.at(Math.cos(c.ap(Xt-M))/Math.cos(c.ap(Xt)))-1),N=Math.acos(b/A),F=2*Mn(D-1,0,c.ap(M/2)),q=Math.min(c.ap(Xt),N+c.ap(M/2)),Y=Mn(D-1,Math.min(q,N-c.ap(M/2)),q),W=Math.atan(y/b),ie=Math.hypot(y,b);let le=h;return le+=c.at(A/ie/Math.max(.5,Math.cos(c.ap(M/2)))),le+=D*c.at(Math.cos(W))/2,le-=c.at(Math.max(1,Y/F/i))/2,le}}const Gr=Ai(9.314,3);function xi(S,i){const h=(i.roundZoom?Math.round:Math.floor)(S.zoom+c.at(S.tileSize/i.tileSize));return Math.max(0,h)}function hr(S,i){const h=S.getCameraFrustum(),y=S.getClippingPlane(),b=S.screenPointToMercatorCoordinate(S.getCameraPoint()),A=c.a9.fromLngLat(S.center,S.elevation);b.z=A.z+Math.cos(S.pitchInRadians)*S.cameraToCenterDistance/S.worldSize;const M=S.getCoveringTilesDetailsProvider(),D=M.allowVariableZoom(S,i),N=xi(S,i),F=i.minzoom||0,q=i.maxzoom!==void 0?i.maxzoom:S.maxZoom,Y=Math.min(Math.max(0,N),q),W=Math.pow(2,Y),ie=[W*b.x,W*b.y,0],le=[W*A.x,W*A.y,0],_e=Math.hypot(A.x-b.x,A.y-b.y),be=Math.abs(A.z-b.z),ve=Math.hypot(_e,be),Ee=ke=>({zoom:0,x:0,y:0,wrap:ke,fullyVisible:!1}),Pe=[],Te=[];if(S.renderWorldCopies&&M.allowWorldCopies())for(let ke=1;ke<=3;ke++)Pe.push(Ee(-ke)),Pe.push(Ee(ke));for(Pe.push(Ee(0));Pe.length>0;){const ke=Pe.pop(),Ne=ke.x,ze=ke.y;let Ve=ke.fullyVisible;const st={x:Ne,y:ze,z:ke.zoom},Je=M.getTileBoundingVolume(st,ke.wrap,S.elevation,i);if(!Ve){const Ot=Mr(h,Je,y);if(Ot===0)continue;Ve=Ot===2}const rt=M.distanceToTile2d(b.x,b.y,st,Je);let at=N;D&&(at=(i.calculateTileZoom||Gr)(S.zoom+c.at(S.tileSize/i.tileSize),rt,be,ve,S.fov)),at=(i.roundZoom?Math.round:Math.floor)(at),at=Math.max(0,at);const Dt=Math.min(at,q);if(ke.wrap=M.getWrap(A,st,ke.wrap),ke.zoom>=Dt){if(ke.zoom<F)continue;const Ot=Y-ke.zoom,wt=ie[0]-.5-(Ne<<Ot),Ut=ie[1]-.5-(ze<<Ot),On=i.reparseOverscaled?Math.max(ke.zoom,at):ke.zoom;Te.push({tileID:new c.a2(ke.zoom===q?On:ke.zoom,ke.wrap,ke.zoom,Ne,ze),distanceSq:c.au([le[0]-.5-Ne,le[1]-.5-ze]),tileDistanceToCamera:Math.sqrt(wt*wt+Ut*Ut)})}else for(let Ot=0;Ot<4;Ot++)Pe.push({zoom:ke.zoom+1,x:(Ne<<1)+Ot%2,y:(ze<<1)+(Ot>>1),wrap:ke.wrap,fullyVisible:Ve})}return Te.sort(((ke,Ne)=>ke.distanceSq-Ne.distanceSq)).map((ke=>ke.tileID))}const Di=c.aa.fromPoints([new c.P(0,0),new c.P(c.a5,c.a5)]);function zr(S){return S==="raster"||S==="image"||S==="video"}function qc(S,i,h,y,b,A,M){if(!i.hasData())return!1;const{tileID:D,fadingRole:N,fadingDirection:F,fadingParentID:q}=i;if(N===Be.Base&&F===tt.Incoming&&q)return h[q.key]=q,!0;const Y=Math.max(D.overscaledZ-b,A);for(let W=D.overscaledZ-1;W>=Y;W--){const ie=D.scaledTo(W),le=S.getLoadedTile(ie);if(le)return i.setCrossFadeLogic({fadingRole:Be.Base,fadingDirection:tt.Incoming,fadingParentID:le.tileID,fadeEndTime:y+M}),le.setCrossFadeLogic({fadingRole:Be.Parent,fadingDirection:tt.Departing,fadeEndTime:y+M}),h[ie.key]=ie,!0}return!1}function Ta(S,i,h,y,b,A){if(!i.hasData())return!1;const M=i.tileID.children(b);let D=ot(S,i,M,h,y,b,A);if(D)return!0;for(const N of M)ot(S,i,N.children(b),h,y,b,A)&&(D=!0);return D}function ot(S,i,h,y,b,A,M){if(h[0].overscaledZ>=A)return!1;let D=!1;for(const N of h){const F=S.getLoadedTile(N);if(!F)continue;const{fadingRole:q,fadingDirection:Y,fadingParentID:W}=F;q===Be.Base&&Y===tt.Departing&&W||(F.setCrossFadeLogic({fadingRole:Be.Base,fadingDirection:tt.Departing,fadingParentID:i.tileID,fadeEndTime:b+M}),i.setCrossFadeLogic({fadingRole:Be.Parent,fadingDirection:tt.Incoming,fadeEndTime:b+M})),y[N.key]=N,D=!0}return D}function fa(S,i,h,y){const b=S.tileID;return!!S.selfFading||!S.hasData()&&!!i.has(b)&&(S.setSelfFadeLogic(h+y),!0)}function pa(S,i){var h;S.needsHillshadePrepare=!0,S.needsTerrainPrepare=!0;let y=i.tileID.canonical.x-S.tileID.canonical.x;const b=i.tileID.canonical.y-S.tileID.canonical.y,A=Math.pow(2,S.tileID.canonical.z),M=i.tileID.key;y===0&&b===0||Math.abs(b)>1||(Math.abs(y)>1&&(Math.abs(y+A)===1?y+=A:Math.abs(y-A)===1&&(y-=A)),i.dem&&S.dem&&(S.dem.backfillBorder(i.dem,y,b),!((h=S.neighboringTiles)===null||h===void 0)&&h[M]&&(S.neighboringTiles[M].backfilled=!0)))}class zo{constructor(){this._tiles={}}handleWrapJump(i){const h={};for(const y in this._tiles){const b=this._tiles[y];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+i),h[b.tileID.key]=b}this._tiles=h}setFeatureState(i,h){for(const y in this._tiles)this._tiles[y].setFeatureState(i,h)}getAllTiles(){return Object.values(this._tiles)}getAllIds(i=!1){return i?Object.values(this._tiles).map((h=>h.tileID)).sort(c.aw).map((h=>h.key)):Object.keys(this._tiles)}getTileById(i){return this._tiles[i]}setTile(i,h){this._tiles[i]=h}deleteTileById(i){delete this._tiles[i]}getLoadedTile(i){const h=this.getTileById(i.key);return h?.hasData()?h:null}isIdRenderable(i,h=!1){var y;return(y=this.getTileById(i))===null||y===void 0?void 0:y.isRenderable(h)}getRenderableIds(i=0,h){const y=[];for(const b of this.getAllIds())this.isIdRenderable(b,h)&&y.push(this.getTileById(b));return h?y.sort(((b,A)=>{const M=b.tileID,D=A.tileID,N=new c.P(M.canonical.x,M.canonical.y)._rotate(-i),F=new c.P(D.canonical.x,D.canonical.y)._rotate(-i);return M.overscaledZ-D.overscaledZ||F.y-N.y||F.x-N.x})).map((b=>b.tileID.key)):y.map((b=>b.tileID)).sort(c.aw).map((b=>b.key))}}class Li extends c.E{constructor(i,h,y){super(),this.id=i,this.dispatcher=y,this.on("data",(b=>this._dataHandler(b))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((b,A,M,D)=>{const N=new(ge(A.type))(b,A,M,D);if(N.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${N.id}`);return N})(i,h,y,this),this._inViewTiles=new zo,this._outOfViewCache=new c.ax(0,(b=>this._unloadTile(b))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new _t,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){for(const h of this._inViewTiles.getAllTiles())h.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i),this._inViewTiles=new zo}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i of this._inViewTiles.getAllTiles())if(i.state!=="loaded"&&i.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,h,y){return c._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,h,y)}catch(b){i.state="errored",b.status!==404?this._source.fire(new c.k(b,{tile:i})):this.update(this.transform,this.terrain)}}))}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new c.l("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const h of this._inViewTiles.getAllTiles())h.upload(i),h.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(i){var h;return this._inViewTiles.getRenderableIds((h=this.transform)===null||h===void 0?void 0:h.bearingInRadians,i)}hasRenderableParent(i){const h=i.overscaledZ-1;if(h>=this._source.minzoom){const y=this.getLoadedTile(i.scaledTo(h));if(y)return this._inViewTiles.isIdRenderable(y.tileID.key)}return!1}reload(i,h=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const y of this._inViewTiles.getAllIds()){const b=this._inViewTiles.getTileById(y);h&&!this._source.shouldReloadTile(b,h)||(i?this._reloadTile(y,"expired"):b.state!=="errored"&&this._reloadTile(y,"reloading"))}}}_reloadTile(i,h){return c._(this,void 0,void 0,(function*(){const y=this._inViewTiles.getTileById(i);y&&(y.state!=="loading"&&(y.state=h),yield this._loadTile(y,i,h))}))}_tileLoaded(i,h,y){i.timeAdded=ee(),i.selfFading&&(i.fadeEndTime=i.timeAdded+this._rasterFadeDuration),y==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(h,i),this.getSource().type==="raster-dem"&&i.dem&&(function(b,A){var M,D;const N=A.getRenderableIds();for(const F of N){if(!b.neighboringTiles||!b.neighboringTiles[F])continue;const q=A.getTileById(F);b.neighboringTiles[F].backfilled||pa(b,q),!((D=(M=q.neighboringTiles)===null||M===void 0?void 0:M[b.tileID.key])===null||D===void 0)&&D.backfilled||pa(q,b)}})(i,this._inViewTiles),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new c.l("data",{dataType:"source",tile:i,coord:i.tileID}))}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._inViewTiles.getTileById(i)}_retainLoadedChildren(i,h){const y=this._getLoadedDescendents(h),b=new Set;for(const A of h){const M=y[A.key];if(!M?.length){b.add(A);continue}const D=A.overscaledZ+Li.maxOverzooming,N=M.filter((Y=>Y.tileID.overscaledZ<=D));if(!N.length){b.add(A);continue}const F=Math.min(...N.map((Y=>Y.tileID.overscaledZ))),q=N.filter((Y=>Y.tileID.overscaledZ===F)).map((Y=>Y.tileID));for(const Y of q)i[Y.key]=Y;this._areDescendentsComplete(q,F,A.overscaledZ)||b.add(A)}return b}_getLoadedDescendents(i){var h;const y={};for(const b of this._inViewTiles.getAllTiles().filter((A=>A.hasData())))for(const A of i)b.tileID.isChildOf(A)&&(y[h=A.key]||(y[h]=[])).push(b);return y}_areDescendentsComplete(i,h,y){return i.length===1&&i[0].isOverscaled()?i[0].overscaledZ===h:Math.pow(4,h-y)===i.length}getLoadedTile(i){return this._inViewTiles.getLoadedTile(i)}updateCacheSize(i){const h=Math.ceil(i.width/this._source.tileSize)+1,y=Math.ceil(i.height/this._source.tileSize)+1,b=Math.floor(h*y*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),A=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._outOfViewCache.setMaxSize(A)}handleWrapJump(i){const h=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);this._prevLng=i,h&&(this._inViewTiles.handleWrapJump(h),this._resetTileReloadTimers())}update(i,h){if(!this._sourceLoaded||this._paused)return;let y;this.transform=i,this.terrain=h,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?y=i.getVisibleUnwrappedCoordinates(this._source.tileID).map((N=>new c.a2(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y))):(y=hr(i,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?i.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(y=y.filter((N=>this._source.hasTile(N))))):y=[],this.usedForTerrain&&(y=this._addTerrainIdealTiles(y));const b=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,b&&this.fire(new c.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const A=xi(i,this._source),M=this._updateRetainedTiles(y,A),D=zr(this._source.type);D&&this._rasterFadeDuration>0&&!h&&(function(N,F,q,Y,W,ie,le){const _e=ee(),be=c.av(F);for(const ve of F){const Ee=N.getTileById(ve.key);Ee.fadingDirection!==tt.Departing&&Ee.fadeOpacity!==0||Ee.resetFadeLogic(),qc(N,Ee,q,_e,Y,W,le)||Ta(N,Ee,q,_e,ie,le)||fa(Ee,be,_e,le)||Ee.resetFadeLogic()}})(this._inViewTiles,y,M,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),D?this._cleanUpRasterTiles(M):this._cleanUpVectorTiles(M)}_cleanUpRasterTiles(i){for(const h of this._inViewTiles.getAllIds())i[h]||this._removeTile(h)}_cleanUpVectorTiles(i){for(const h of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(h);i[h]?y.clearSymbolFadeHold():y.hasSymbolBuckets?y.holdingForSymbolFade()?y.symbolFadeFinished()&&this._removeTile(h):y.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(h)}}_addTerrainIdealTiles(i){const h=[];for(const y of i)if(y.canonical.z>this._source.minzoom){const b=y.scaledTo(y.canonical.z-1);h.push(b);const A=y.scaledTo(Math.max(this._source.minzoom,Math.min(y.canonical.z,5)));h.push(A)}return i.concat(h)}releaseSymbolFadeTiles(){for(const i of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(i).holdingForSymbolFade()&&this._removeTile(i)}_updateRetainedTiles(i,h){var y;const b=new Set;for(const F of i)this._addTile(F).hasData()||b.add(F);const A=i.reduce(((F,q)=>(F[q.key]=q,F)),{}),M=this._retainLoadedChildren(A,b),D={},N=Math.max(h-Li.maxUnderzooming,this._source.minzoom);for(const F of M){let q=this._inViewTiles.getTileById(F.key),Y=q?.wasRequested();for(let W=F.overscaledZ-1;W>=N;--W){const ie=F.scaledTo(W);if(D[ie.key])break;if(D[ie.key]=!0,q=this.getTile(ie),!q&&Y&&(q=this._addTile(ie)),q){const le=q.hasData();if((le||!(!((y=this.map)===null||y===void 0)&&y.cancelPendingTileRequestsWhileZooming)||Y)&&(A[ie.key]=ie),Y=q.wasRequested(),le)break}}}return A}_addTile(i){let h=this._inViewTiles.getTileById(i.key);if(h)return h;h=this._outOfViewCache.getAndRemove(i),h&&(h.resetFadeLogic(),this._setTileReloadTimer(i.key,h),h.tileID=i,this._state.initializeTileState(h,this.map?this.map.painter:null));const y=h;return h||(h=new vt(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(h,i.key,h.state)),h.uses++,this._inViewTiles.setTile(i.key,h),y||this._source.fire(new c.l("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(i,h){this._clearTileReloadTimer(i);const y=h.getExpiryTimeout();y&&(this._timers[i]=setTimeout((()=>{this._reloadTile(i,"expired"),delete this._timers[i]}),y))}_clearTileReloadTimer(i){const h=this._timers[i];h&&(clearTimeout(h),delete this._timers[i])}_resetTileReloadTimers(){for(const i in this._timers)clearTimeout(this._timers[i]),delete this._timers[i];for(const i of this._inViewTiles.getAllIds()){const h=this._inViewTiles.getTileById(i);this._setTileReloadTimer(i,h)}}refreshTiles(i){for(const h of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(h);(this._inViewTiles.isIdRenderable(h)||y.state=="errored")&&i.some((b=>b.equals(y.tileID.canonical)))&&this._reloadTile(h,"expired")}}_removeTile(i){const h=this._inViewTiles.getTileById(i);h&&(h.uses--,this._inViewTiles.deleteTileById(i),this._clearTileReloadTimer(i),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._outOfViewCache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}_dataHandler(i){i.dataType==="source"&&(i.sourceDataType!=="metadata"?i.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(i.sourceDataChanged,i.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i of this._inViewTiles.getAllIds())this._removeTile(i);this._outOfViewCache.reset()}tilesIn(i,h,y){const b=[],A=this.transform;if(!A)return b;const M=A.getCoveringTilesDetailsProvider().allowWorldCopies(),D=y?A.getCameraQueryGeometry(i):i,N=ie=>A.screenPointToMercatorCoordinate(ie,this.terrain),F=this.transformBbox(i,N,!M),q=this.transformBbox(D,N,!M),Y=this.getIds(),W=c.aa.fromPoints(q);for(let ie=0;ie<Y.length;ie++){const le=this._inViewTiles.getTileById(Y[ie]);if(le.holdingForSymbolFade())continue;const _e=M?[le.tileID]:[le.tileID.unwrapTo(-1),le.tileID.unwrapTo(0)],be=Math.pow(2,A.zoom-le.tileID.overscaledZ),ve=h*le.queryPadding*c.a5/le.tileSize/be;for(const Ee of _e){const Pe=W.map((Te=>Ee.getTilePoint(new c.a9(Te.x,Te.y))));if(Pe.expandBy(ve),Pe.intersects(Di)){const Te=F.map((Ne=>Ee.getTilePoint(Ne))),ke=q.map((Ne=>Ee.getTilePoint(Ne)));b.push({tile:le,tileID:M?Ee:Ee.unwrapTo(0),queryGeometry:Te,cameraQueryGeometry:ke,scale:be})}}}return b}transformBbox(i,h,y){let b=i.map(h);if(y){const A=c.aa.fromPoints(i);A.shrinkBy(.001*Math.min(A.width(),A.height()));const M=A.map(h);c.aa.fromPoints(b).covers(M)||(b=b.map((D=>D.x>.5?new c.a9(D.x-1,D.y,D.z):D)))}return b}getVisibleCoordinates(i){const h=this.getRenderableIds(i).map((y=>this._inViewTiles.getTileById(y).tileID));return this.transform&&this.transform.populateCache(h),h}hasTransition(){return!!this._source.hasTransition()||!(!zr(this._source.type)||!(function(i,h){if(h<=0)return!1;const y=ee();for(const b of i.getAllTiles())if(b.fadeEndTime>=y)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(i){this._rasterFadeDuration=i}setFeatureState(i,h,y){this._state.updateState(i=i||c.ai,h,y)}removeFeatureState(i,h,y){this._state.removeFeatureState(i=i||c.ai,h,y)}getFeatureState(i,h){return this._state.getState(i=i||c.ai,h)}setDependencies(i,h,y){const b=this._inViewTiles.getTileById(i);b&&b.setDependencies(h,y)}reloadTilesForDependencies(i,h){for(const y of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(y).hasDependency(i,h)&&this._reloadTile(y,"reloading");this._outOfViewCache.filter((y=>!y.hasDependency(i,h)))}areTilesLoaded(){for(const i of this._inViewTiles.getAllTiles())if(i.state!=="loaded"&&i.state!=="errored")return!1;return!0}}Li.maxUnderzooming=10,Li.maxOverzooming=3;class Lt{constructor(i,h){this.reset(i,h)}reset(i,h){this.points=i||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=c.an(i,0,1);let h=1,y=this._distances[h];const b=i*this.paddedLength+this.padding;for(;y<b&&h<this._distances.length;)y=this._distances[++h];const A=h-1,M=this._distances[A],D=y-M,N=D>0?(b-M)/D:0;return this.points[A].mult(1-N).add(this.points[h].mult(N))}}function zn(S,i){let h=!0;return S==="always"||S!=="never"&&i!=="never"||(h=!1),h}class En{constructor(i,h,y){const b=this.boxCells=[],A=this.circleCells=[];this.xCellCount=Math.ceil(i/y),this.yCellCount=Math.ceil(h/y);for(let M=0;M<this.xCellCount*this.yCellCount;M++)b.push([]),A.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=h,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,h,y,b,A){this._forEachCell(h,y,b,A,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(b),this.bboxes.push(A)}insertCircle(i,h,y,b){this._forEachCell(h-b,y-b,h+b,y+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(h),this.circles.push(y),this.circles.push(b)}_insertBoxCell(i,h,y,b,A,M){this.boxCells[A].push(M)}_insertCircleCell(i,h,y,b,A,M){this.circleCells[A].push(M)}_query(i,h,y,b,A,M,D){if(y<0||i>this.width||b<0||h>this.height)return[];const N=[];if(i<=0&&h<=0&&this.width<=y&&this.height<=b){if(A)return[{key:null,x1:i,y1:h,x2:y,y2:b}];for(let F=0;F<this.boxKeys.length;F++)N.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(let F=0;F<this.circleKeys.length;F++){const q=this.circles[3*F],Y=this.circles[3*F+1],W=this.circles[3*F+2];N.push({key:this.circleKeys[F],x1:q-W,y1:Y-W,x2:q+W,y2:Y+W})}}else this._forEachCell(i,h,y,b,this._queryCell,N,{hitTest:A,overlapMode:M,seenUids:{box:{},circle:{}}},D);return N}query(i,h,y,b){return this._query(i,h,y,b,!1,null)}hitTest(i,h,y,b,A,M){return this._query(i,h,y,b,!0,A,M).length>0}hitTestCircle(i,h,y,b,A){const M=i-y,D=i+y,N=h-y,F=h+y;if(D<0||M>this.width||F<0||N>this.height)return!1;const q=[];return this._forEachCell(M,N,D,F,this._queryCellCircle,q,{hitTest:!0,overlapMode:b,circle:{x:i,y:h,radius:y},seenUids:{box:{},circle:{}}},A),q.length>0}_queryCell(i,h,y,b,A,M,D,N){const{seenUids:F,hitTest:q,overlapMode:Y}=D,W=this.boxCells[A];if(W!==null){const le=this.bboxes;for(const _e of W)if(!F.box[_e]){F.box[_e]=!0;const be=4*_e,ve=this.boxKeys[_e];if(i<=le[be+2]&&h<=le[be+3]&&y>=le[be+0]&&b>=le[be+1]&&(!N||N(ve))&&(!q||!zn(Y,ve.overlapMode))&&(M.push({key:ve,x1:le[be],y1:le[be+1],x2:le[be+2],y2:le[be+3]}),q))return!0}}const ie=this.circleCells[A];if(ie!==null){const le=this.circles;for(const _e of ie)if(!F.circle[_e]){F.circle[_e]=!0;const be=3*_e,ve=this.circleKeys[_e];if(this._circleAndRectCollide(le[be],le[be+1],le[be+2],i,h,y,b)&&(!N||N(ve))&&(!q||!zn(Y,ve.overlapMode))){const Ee=le[be],Pe=le[be+1],Te=le[be+2];if(M.push({key:ve,x1:Ee-Te,y1:Pe-Te,x2:Ee+Te,y2:Pe+Te}),q)return!0}}}return!1}_queryCellCircle(i,h,y,b,A,M,D,N){const{circle:F,seenUids:q,overlapMode:Y}=D,W=this.boxCells[A];if(W!==null){const le=this.bboxes;for(const _e of W)if(!q.box[_e]){q.box[_e]=!0;const be=4*_e,ve=this.boxKeys[_e];if(this._circleAndRectCollide(F.x,F.y,F.radius,le[be+0],le[be+1],le[be+2],le[be+3])&&(!N||N(ve))&&!zn(Y,ve.overlapMode))return M.push(!0),!0}}const ie=this.circleCells[A];if(ie!==null){const le=this.circles;for(const _e of ie)if(!q.circle[_e]){q.circle[_e]=!0;const be=3*_e,ve=this.circleKeys[_e];if(this._circlesCollide(le[be],le[be+1],le[be+2],F.x,F.y,F.radius)&&(!N||N(ve))&&!zn(Y,ve.overlapMode))return M.push(!0),!0}}}_forEachCell(i,h,y,b,A,M,D,N){const F=this._convertToXCellCoord(i),q=this._convertToYCellCoord(h),Y=this._convertToXCellCoord(y),W=this._convertToYCellCoord(b);for(let ie=F;ie<=Y;ie++)for(let le=q;le<=W;le++)if(A.call(this,i,h,y,b,this.xCellCount*le+ie,M,D,N))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,h,y,b,A,M){const D=b-i,N=A-h,F=y+M;return F*F>D*D+N*N}_circleAndRectCollide(i,h,y,b,A,M,D){const N=(M-b)/2,F=Math.abs(i-(b+N));if(F>N+y)return!1;const q=(D-A)/2,Y=Math.abs(h-(A+q));if(Y>q+y)return!1;if(F<=N||Y<=q)return!0;const W=F-N,ie=Y-q;return W*W+ie*ie<=y*y}}function Ya(S,i,h){const y=c.N();if(!S){const{vecSouth:Y,vecEast:W}=ps(i),ie=k();ie[0]=W[0],ie[1]=W[1],ie[2]=Y[0],ie[3]=Y[1],b=ie,(q=(M=(A=ie)[0])*(F=A[3])-(N=A[2])*(D=A[1]))&&(b[0]=F*(q=1/q),b[1]=-D*q,b[2]=-N*q,b[3]=M*q),y[0]=ie[0],y[1]=ie[1],y[4]=ie[2],y[5]=ie[3]}var b,A,M,D,N,F,q;return c.Q(y,y,[1/h,1/h,1]),y}function xh(S,i,h,y){if(S){const b=c.N();if(!i){const{vecSouth:A,vecEast:M}=ps(h);b[0]=M[0],b[1]=M[1],b[4]=A[0],b[5]=A[1]}return c.Q(b,b,[y,y,1]),b}return h.pixelsToClipSpaceMatrix}function ps(S){const i=Math.cos(S.rollInRadians),h=Math.sin(S.rollInRadians),y=Math.cos(S.pitchInRadians),b=Math.cos(S.bearingInRadians),A=Math.sin(S.bearingInRadians),M=c.aC();M[0]=-b*y*h-A*i,M[1]=-A*y*h+b*i;const D=c.aD(M);D<1e-9?c.aE(M):c.aF(M,M,1/D);const N=c.aC();N[0]=b*y*i-A*h,N[1]=A*y*i+b*h;const F=c.aD(N);return F<1e-9?c.aE(N):c.aF(N,N,1/F),{vecEast:N,vecSouth:M}}function In(S,i,h,y){let b;y?(b=[S,i,y(S,i),1],c.aH(b,b,h)):(b=[S,i,0,1],ja(b,b,h));const A=b[3];return{point:new c.P(b[0]/A,b[1]/A),signedDistanceFromCamera:A,isOccluded:!1}}function Jl(S,i){return .5+S/i*.5}function Zo(S,i){return S.x>=-i[0]&&S.x<=i[0]&&S.y>=-i[1]&&S.y<=i[1]}function Vs(S,i,h,y,b,A,M,D,N,F,q,Y,W){const ie=h?S.textSizeData:S.iconSizeData,le=c.ay(ie,i.transform.zoom),_e=[256/i.width*2+1,256/i.height*2+1],be=h?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;be.clear();const ve=S.lineVertexArray,Ee=h?S.text.placedSymbolArray:S.icon.placedSymbolArray,Pe=i.transform.width/i.transform.height;let Te=!1;for(let ke=0;ke<Ee.length;ke++){const Ne=Ee.get(ke);if(Ne.hidden||Ne.writingMode===c.az.vertical&&!Te){wi(Ne.numGlyphs,be);continue}Te=!1;const ze=new c.P(Ne.anchorX,Ne.anchorY),Ve={getElevation:W,pitchedLabelPlaneMatrix:y,lineVertexArray:ve,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:i.transform,tileAnchorPoint:ze,unwrappedTileID:N,width:F,height:q,translation:Y},st=gs(Ne.anchorX,Ne.anchorY,Ve);if(!Zo(st.point,_e)){wi(Ne.numGlyphs,be);continue}const Je=Jl(i.transform.cameraToCenterDistance,st.signedDistanceFromCamera),rt=c.aA(ie,le,Ne),at=A?rt*i.transform.getPitchedTextCorrection(Ne.anchorX,Ne.anchorY,N)/Je:rt*Je,Dt=dr({projectionContext:Ve,pitchedLabelPlaneMatrixInverse:b,symbol:Ne,fontSize:at,flip:!1,keepUpright:M,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:be,aspectRatio:Pe,rotateToLine:D});Te=Dt.useVertical,(Dt.notEnoughRoom||Te||Dt.needsFlipping&&dr({projectionContext:Ve,pitchedLabelPlaneMatrixInverse:b,symbol:Ne,fontSize:at,flip:!0,keepUpright:M,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:be,aspectRatio:Pe,rotateToLine:D}).notEnoughRoom)&&wi(Ne.numGlyphs,be)}h?S.text.dynamicLayoutVertexBuffer.updateData(be):S.icon.dynamicLayoutVertexBuffer.updateData(be)}function _o(S,i,h,y,b,A,M,D){const N=A.glyphStartIndex+A.numGlyphs,F=A.lineStartIndex,q=A.lineStartIndex+A.lineLength,Y=i.getoffsetX(A.glyphStartIndex),W=i.getoffsetX(N-1),ie=$a(S*Y,h,y,b,A.segment,F,q,D,M);if(!ie)return null;const le=$a(S*W,h,y,b,A.segment,F,q,D,M);return le?D.projectionCache.anyProjectionOccluded?null:{first:ie,last:le}:null}function ms(S,i,h,y){return S===c.az.horizontal&&Math.abs(h.y-i.y)>Math.abs(h.x-i.x)*y?{useVertical:!0}:(S===c.az.vertical?i.y<h.y:i.x>h.x)?{needsFlipping:!0}:null}function dr(S){const{projectionContext:i,pitchedLabelPlaneMatrixInverse:h,symbol:y,fontSize:b,flip:A,keepUpright:M,glyphOffsetArray:D,dynamicLayoutVertexArray:N,aspectRatio:F,rotateToLine:q}=S,Y=b/24,W=y.lineOffsetX*Y,ie=y.lineOffsetY*Y;let le;if(y.numGlyphs>1){const _e=y.glyphStartIndex+y.numGlyphs,be=y.lineStartIndex,ve=y.lineStartIndex+y.lineLength,Ee=_o(Y,D,W,ie,A,y,q,i);if(!Ee)return{notEnoughRoom:!0};const Pe=qo(Ee.first.point.x,Ee.first.point.y,i,h),Te=qo(Ee.last.point.x,Ee.last.point.y,i,h);if(M&&!A){const ke=ms(y.writingMode,Pe,Te,F);if(ke)return ke}le=[Ee.first];for(let ke=y.glyphStartIndex+1;ke<_e-1;ke++){const Ne=$a(Y*D.getoffsetX(ke),W,ie,A,y.segment,be,ve,i,q);if(!Ne)return{notEnoughRoom:!0};le.push(Ne)}le.push(Ee.last)}else{if(M&&!A){const be=ri(i.tileAnchorPoint.x,i.tileAnchorPoint.y,i).point,ve=y.lineStartIndex+y.segment+1,Ee=new c.P(i.lineVertexArray.getx(ve),i.lineVertexArray.gety(ve)),Pe=ri(Ee.x,Ee.y,i),Te=Pe.signedDistanceFromCamera>0?Pe.point:Gc(i.tileAnchorPoint,Ee,be,1,i),ke=qo(be.x,be.y,i,h),Ne=qo(Te.x,Te.y,i,h),ze=ms(y.writingMode,ke,Ne,F);if(ze)return ze}const _e=$a(Y*D.getoffsetX(y.glyphStartIndex),W,ie,A,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,i,q);if(!_e||i.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};le=[_e]}for(const _e of le)c.aG(N,_e.point,_e.angle);return{}}function Gc(S,i,h,y,b){const A=S.add(S.sub(i)._unit()),M=ri(A.x,A.y,b).point,D=h.sub(M);return h.add(D._mult(y/D.mag()))}function Ea(S,i,h){const y=i.projectionCache;if(y.projections[S])return y.projections[S];const b=new c.P(i.lineVertexArray.getx(S),i.lineVertexArray.gety(S)),A=ri(b.x,b.y,i);if(A.signedDistanceFromCamera>0)return y.projections[S]=A.point,y.anyProjectionOccluded=y.anyProjectionOccluded||A.isOccluded,A.point;const M=S-h.direction;return Gc(h.distanceFromAnchor===0?i.tileAnchorPoint:new c.P(i.lineVertexArray.getx(M),i.lineVertexArray.gety(M)),b,h.previousVertex,h.absOffsetX-h.distanceFromAnchor+1,i)}function ri(S,i,h){const y=S+h.translation[0],b=i+h.translation[1];let A;return h.pitchWithMap?(A=In(y,b,h.pitchedLabelPlaneMatrix,h.getElevation),A.isOccluded=!1):(A=h.transform.projectTileCoordinates(y,b,h.unwrappedTileID,h.getElevation),A.point.x=(.5*A.point.x+.5)*h.width,A.point.y=(.5*-A.point.y+.5)*h.height),A}function qo(S,i,h,y){if(h.pitchWithMap){const b=[S,i,0,1];return c.aH(b,b,y),h.transform.projectTileCoordinates(b[0]/b[3],b[1]/b[3],h.unwrappedTileID,h.getElevation).point}return{x:S/h.width*2-1,y:1-i/h.height*2}}function gs(S,i,h){return h.transform.projectTileCoordinates(S,i,h.unwrappedTileID,h.getElevation)}function Ql(S,i,h){return S._unit()._perp()._mult(i*h)}function Zs(S,i,h,y,b,A,M,D,N){if(D.projectionCache.offsets[S])return D.projectionCache.offsets[S];const F=h.add(i);if(S+N.direction<y||S+N.direction>=b)return D.projectionCache.offsets[S]=F,F;const q=Ea(S+N.direction,D,N),Y=Ql(q.sub(h),M,N.direction),W=h.add(Y),ie=q.add(Y);return D.projectionCache.offsets[S]=c.aI(A,F,W,ie)||F,D.projectionCache.offsets[S]}function $a(S,i,h,y,b,A,M,D,N){const F=y?S-i:S+i;let q=F>0?1:-1,Y=0;y&&(q*=-1,Y=Math.PI),q<0&&(Y+=Math.PI);let W,ie=q>0?A+b:A+b+1;D.projectionCache.cachedAnchorPoint?W=D.projectionCache.cachedAnchorPoint:(W=ri(D.tileAnchorPoint.x,D.tileAnchorPoint.y,D).point,D.projectionCache.cachedAnchorPoint=W);let le,_e,be=W,ve=W,Ee=0,Pe=0;const Te=Math.abs(F),ke=[];let Ne;for(;Ee+Pe<=Te;){if(ie+=q,ie<A||ie>=M)return null;Ee+=Pe,ve=be,_e=le;const st={absOffsetX:Te,direction:q,distanceFromAnchor:Ee,previousVertex:ve};if(be=Ea(ie,D,st),h===0)ke.push(ve),Ne=be.sub(ve);else{let Je;const rt=be.sub(ve);Je=rt.mag()===0?Ql(Ea(ie+q,D,st).sub(be),h,q):Ql(rt,h,q),_e||(_e=ve.add(Je)),le=Zs(ie,Je,be,A,M,_e,h,D,st),ke.push(_e),Ne=le.sub(_e)}Pe=Ne.mag()}const ze=Ne._mult((Te-Ee)/Pe)._add(_e||ve),Ve=Y+Math.atan2(be.y-ve.y,be.x-ve.x);return ke.push(ze),{point:ze,angle:N?Ve:0,path:ke}}const ai=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function wi(S,i){for(let h=0;h<S;h++){const y=i.length;i.resize(y+4),i.float32.set(ai,3*y)}}function ja(S,i,h){const y=i[0],b=i[1];return S[0]=h[0]*y+h[4]*b+h[12],S[1]=h[1]*y+h[5]*b+h[13],S[3]=h[3]*y+h[7]*b+h[15],S}const Xn=100;class vl{constructor(i,h=new En(i.width+200,i.height+200,25),y=new En(i.width+200,i.height+200,25)){this.transform=i,this.grid=h,this.ignoredGrid=y,this.pitchFactor=Math.cos(i.pitch*Math.PI/180)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Xn,this.screenBottomBoundary=i.height+Xn,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,h,y,b,A,M,D,N,F,q,Y,W){const ie=this.projectAndGetPerspectiveRatio(i.anchorPointX+N[0],i.anchorPointY+N[1],A,q,W),le=y*ie.perspectiveRatio;let _e;if(M||D)_e=this._projectCollisionBox(i,le,b,A,M,D,N,ie,q,Y,W);else{const Ne=ie.x+(Y?Y.x*le:0),ze=ie.y+(Y?Y.y*le:0);_e={allPointsOccluded:!1,box:[Ne+i.x1*le,ze+i.y1*le,Ne+i.x2*le,ze+i.y2*le]}}const[be,ve,Ee,Pe]=_e.box,Te=M?_e.allPointsOccluded:ie.isOccluded;let ke=Te;return ke||(ke=ie.perspectiveRatio<this.perspectiveRatioCutoff),ke||(ke=!this.isInsideGrid(be,ve,Ee,Pe)),ke||h!=="always"&&this.grid.hitTest(be,ve,Ee,Pe,h,F)?{box:[be,ve,Ee,Pe],placeable:!1,offscreen:!1,occluded:Te}:{box:[be,ve,Ee,Pe],placeable:!0,offscreen:this.isOffscreen(be,ve,Ee,Pe),occluded:Te}}placeCollisionCircles(i,h,y,b,A,M,D,N,F,q,Y,W,ie,le){const _e=[],be=new c.P(h.anchorX,h.anchorY),ve=this.getPerspectiveRatio(be.x,be.y,M,le),Ee=(F?A*this.transform.getPitchedTextCorrection(h.anchorX,h.anchorY,M)/ve:A*ve)/c.aM,Pe={getElevation:le,pitchedLabelPlaneMatrix:D,lineVertexArray:y,pitchWithMap:F,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:be,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:ie},Te=_o(Ee,b,h.lineOffsetX*Ee,h.lineOffsetY*Ee,!1,h,!1,Pe);let ke=!1,Ne=!1,ze=!0;if(Te){const Ve=.5*Y*ve+W,st=new c.P(-100,-100),Je=new c.P(this.screenRightBoundary,this.screenBottomBoundary),rt=new Lt,at=Te.first,Dt=Te.last;let Ot=[];for(let On=at.path.length-1;On>=1;On--)Ot.push(at.path[On]);for(let On=1;On<Dt.path.length;On++)Ot.push(Dt.path[On]);const wt=2.5*Ve;if(F){const On=this.projectPathToScreenSpace(Ot,Pe);Ot=On.some((ki=>ki.signedDistanceFromCamera<=0))?[]:On.map((ki=>ki.point))}let Ut=[];if(Ot.length>0){const On=Ot[0].clone(),ki=Ot[0].clone();for(let Ki=1;Ki<Ot.length;Ki++)On.x=Math.min(On.x,Ot[Ki].x),On.y=Math.min(On.y,Ot[Ki].y),ki.x=Math.max(ki.x,Ot[Ki].x),ki.y=Math.max(ki.y,Ot[Ki].y);Ut=On.x>=st.x&&ki.x<=Je.x&&On.y>=st.y&&ki.y<=Je.y?[Ot]:ki.x<st.x||On.x>Je.x||ki.y<st.y||On.y>Je.y?[]:c.aJ([Ot],st.x,st.y,Je.x,Je.y)}for(const On of Ut){rt.reset(On,.25*Ve);let ki=0;ki=rt.length<=.5*Ve?1:Math.ceil(rt.paddedLength/wt)+1;for(let Ki=0;Ki<ki;Ki++){const Zi=Ki/Math.max(ki-1,1),sr=rt.lerp(Zi),$i=sr.x+Xn,Sr=sr.y+Xn;_e.push($i,Sr,Ve,0);const lr=$i-Ve,Aa=Sr-Ve,Dr=$i+Ve,Lr=Sr+Ve;if(ze=ze&&this.isOffscreen(lr,Aa,Dr,Lr),Ne=Ne||this.isInsideGrid(lr,Aa,Dr,Lr),i!=="always"&&this.grid.hitTestCircle($i,Sr,Ve,i,q)&&(ke=!0,!N))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!N&&ke||!Ne||ve<this.perspectiveRatioCutoff?[]:_e,offscreen:ze,collisionDetected:ke}}projectPathToScreenSpace(i,h){const y=(function(b,A){const M=c.N();return c.aB(M,A.pitchedLabelPlaneMatrix),b.map((D=>{const N=In(D.x,D.y,M,A.getElevation),F=A.transform.projectTileCoordinates(N.point.x,N.point.y,A.unwrappedTileID,A.getElevation);return F.point.x=(.5*F.point.x+.5)*A.width,F.point.y=(.5*-F.point.y+.5)*A.height,F}))})(i,h);return(function(b){let A=0,M=0,D=0,N=0;for(let F=0;F<b.length;F++)b[F].isOccluded?(D=F+1,N=0):(N++,N>M&&(M=N,A=D));return b.slice(A,A+M)})(y)}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[],y=new c.aa;for(const Y of i){const W=new c.P(Y.x+Xn,Y.y+Xn);y.extend(W),h.push(W)}const{minX:b,minY:A,maxX:M,maxY:D}=y,N=this.grid.query(b,A,M,D).concat(this.ignoredGrid.query(b,A,M,D)),F={},q={};for(const Y of N){const W=Y.key;if(F[W.bucketInstanceId]===void 0&&(F[W.bucketInstanceId]={}),F[W.bucketInstanceId][W.featureIndex])continue;const ie=[new c.P(Y.x1,Y.y1),new c.P(Y.x2,Y.y1),new c.P(Y.x2,Y.y2),new c.P(Y.x1,Y.y2)];c.aK(h,ie)&&(F[W.bucketInstanceId][W.featureIndex]=!0,q[W.bucketInstanceId]===void 0&&(q[W.bucketInstanceId]=[]),q[W.bucketInstanceId].push(W.featureIndex))}return q}insertCollisionBox(i,h,y,b,A,M){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:A,collisionGroupID:M,overlapMode:h},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,h,y,b,A,M){const D=y?this.ignoredGrid:this.grid,N={bucketInstanceId:b,featureIndex:A,collisionGroupID:M,overlapMode:h};for(let F=0;F<i.length;F+=4)D.insertCircle(N,i[F],i[F+1],i[F+2])}projectAndGetPerspectiveRatio(i,h,y,b,A){if(A){let M;b?(M=[i,h,b(i,h),1],c.aH(M,M,A)):(M=[i,h,0,1],ja(M,M,A));const D=M[3];return{x:(M[0]/D+1)/2*this.transform.width+Xn,y:(-M[1]/D+1)/2*this.transform.height+Xn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/D*.5,isOccluded:!1,signedDistanceFromCamera:D}}{const M=this.transform.projectTileCoordinates(i,h,y,b);return{x:(M.point.x+1)/2*this.transform.width+Xn,y:(1-M.point.y)/2*this.transform.height+Xn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(i,h,y,b){const A=this.transform.projectTileCoordinates(i,h,y,b);return .5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5}isOffscreen(i,h,y,b){return y<Xn||i>=this.screenRightBoundary||b<Xn||h>this.screenBottomBoundary}isInsideGrid(i,h,y,b){return y>=0&&i<this.gridRightBoundary&&b>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const i=c.ar([]);return c.O(i,i,[-100,-100,0]),i}_projectCollisionBox(i,h,y,b,A,M,D,N,F,q,Y){let W=1,ie=0,le=0,_e=1;const be=i.anchorPointX+D[0],ve=i.anchorPointY+D[1];if(M&&!A){const Ot=this.projectAndGetPerspectiveRatio(be+1,ve,b,F,Y),wt=Ot.x-N.x,Ut=Math.atan((Ot.y-N.y)/wt)+(wt<0?Math.PI:0),On=Math.sin(Ut),ki=Math.cos(Ut);W=ki,ie=On,le=-On,_e=ki}else if(!M&&A){const Ot=ps(this.transform);W=Ot.vecEast[0],ie=Ot.vecEast[1],le=Ot.vecSouth[0],_e=Ot.vecSouth[1]}let Ee=N.x,Pe=N.y,Te=h;A&&(Ee=be,Pe=ve,Te=Math.pow(2,-(this.transform.zoom-y.overscaledZ)),Te*=this.transform.getPitchedTextCorrection(be,ve,b),q||(Te*=c.an(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),q&&(Ee+=W*q.x*Te+le*q.y*Te,Pe+=ie*q.x*Te+_e*q.y*Te);const ke=i.x1*Te,Ne=i.x2*Te,ze=(ke+Ne)/2,Ve=i.y1*Te,st=i.y2*Te,Je=(Ve+st)/2,rt=[{offsetX:ke,offsetY:Ve},{offsetX:ze,offsetY:Ve},{offsetX:Ne,offsetY:Ve},{offsetX:Ne,offsetY:Je},{offsetX:Ne,offsetY:st},{offsetX:ze,offsetY:st},{offsetX:ke,offsetY:st},{offsetX:ke,offsetY:Je}];let at=[];for(const{offsetX:Ot,offsetY:wt}of rt)at.push(new c.P(Ee+W*Ot+le*wt,Pe+ie*Ot+_e*wt));let Dt=!1;if(A){const Ot=at.map((wt=>this.projectAndGetPerspectiveRatio(wt.x,wt.y,b,F,Y)));Dt=Ot.some((wt=>!wt.isOccluded)),at=Ot.map((wt=>new c.P(wt.x,wt.y)))}else Dt=!0;return{box:c.aL(at),allPointsOccluded:!Dt}}}class wh{constructor(i,h,y,b){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?h:-h))):b&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Nn{constructor(i,h,y,b,A){this.text=new wh(i?i.text:null,h,y,A),this.icon=new wh(i?i.icon:null,h,b,A)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class fr{constructor(i,h,y){this.text=i,this.icon=h,this.skipFade=y}}class ec{constructor(i,h,y,b,A){this.bucketInstanceId=i,this.featureIndex=h,this.sourceLayerIndex=y,this.bucketIndex=b,this.tileID=A}}class wu{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const h=++this.maxGroupID;this.collisionGroups[i]={ID:h,predicate:y=>y.collisionGroupID===h}}return this.collisionGroups[i]}}function Xi(S,i,h,y,b){const{horizontalAlign:A,verticalAlign:M}=c.aS(S);return new c.P(-(A-.5)*i+y[0]*b,-(M-.5)*h+y[1]*b)}class Su{constructor(i,h,y,b,A){this.transform=i.clone(),this.terrain=h,this.collisionIndex=new vl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new wu(b),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=A,A&&(A.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const h=this.terrain;return h?(y,b)=>h.getElevation(i,y,b):null}getBucketParts(i,h,y,b){const A=y.getBucket(h),M=y.latestFeatureIndex;if(!A||!M||h.id!==A.layerIds[0])return;const D=y.collisionBoxArray,N=A.layers[0].layout,F=A.layers[0].paint,q=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),Y=y.tileSize/c.a5,W=y.tileID.toUnwrapped(),ie=N.get("text-rotation-alignment")==="map",le=c.aN(y,1,this.transform.zoom),_e=c.aO(this.collisionIndex.transform,y,F.get("text-translate"),F.get("text-translate-anchor")),be=c.aO(this.collisionIndex.transform,y,F.get("icon-translate"),F.get("icon-translate-anchor")),ve=Ya(ie,this.transform,le);this.retainedQueryData[A.bucketInstanceId]=new ec(A.bucketInstanceId,M,A.sourceLayerIndex,A.index,y.tileID);const Ee={bucket:A,layout:N,translationText:_e,translationIcon:be,unwrappedTileID:W,pitchedLabelPlaneMatrix:ve,scale:q,textPixelRatio:Y,holdingForFade:y.holdingForSymbolFade(),collisionBoxArray:D,partiallyEvaluatedTextSize:c.ay(A.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(A.sourceID)};if(b)for(const Pe of A.sortKeyRanges){const{sortKey:Te,symbolInstanceStart:ke,symbolInstanceEnd:Ne}=Pe;i.push({sortKey:Te,symbolInstanceStart:ke,symbolInstanceEnd:Ne,parameters:Ee})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:A.symbolInstances.length,parameters:Ee})}attemptAnchorPlacement(i,h,y,b,A,M,D,N,F,q,Y,W,ie,le,_e,be,ve,Ee,Pe,Te){const ke=c.aP[i.textAnchor],Ne=[i.textOffset0,i.textOffset1],ze=Xi(ke,y,b,Ne,A),Ve=this.collisionIndex.placeCollisionBox(h,W,N,F,q,D,M,be,Y.predicate,Pe,ze,Te);if((!Ee||this.collisionIndex.placeCollisionBox(Ee,W,N,F,q,D,M,ve,Y.predicate,Pe,ze,Te).placeable)&&Ve.placeable){let st;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID].text&&(st=this.prevPlacement.variableOffsets[ie.crossTileID].anchor),ie.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ie.crossTileID]={textOffset:Ne,width:y,height:b,anchor:ke,textBoxScale:A,prevAnchor:st},this.markUsedJustification(le,ke,ie,_e),le.allowVerticalPlacement&&(this.markUsedOrientation(le,_e,ie),this.placedOrientations[ie.crossTileID]=_e),{shift:ze,placedGlyphBoxes:Ve}}}placeLayerBucketPart(i,h,y){const{bucket:b,layout:A,translationText:M,translationIcon:D,unwrappedTileID:N,pitchedLabelPlaneMatrix:F,textPixelRatio:q,holdingForFade:Y,collisionBoxArray:W,partiallyEvaluatedTextSize:ie,collisionGroup:le}=i.parameters,_e=A.get("text-optional"),be=A.get("icon-optional"),ve=c.aQ(A,"text-overlap","text-allow-overlap"),Ee=ve==="always",Pe=c.aQ(A,"icon-overlap","icon-allow-overlap"),Te=Pe==="always",ke=A.get("text-rotation-alignment")==="map",Ne=A.get("text-pitch-alignment")==="map",ze=A.get("icon-text-fit")!=="none",Ve=A.get("symbol-z-order")==="viewport-y",st=Ee&&(Te||!b.hasIconData()||be),Je=Te&&(Ee||!b.hasTextData()||_e);!b.collisionArrays&&W&&b.deserializeCollisionBoxes(W);const rt=this.retainedQueryData[b.bucketInstanceId].tileID,at=this._getTerrainElevationFunc(rt),Dt=this.transform.getFastPathSimpleProjectionMatrix(rt),Ot=(wt,Ut,On)=>{var ki,Ki;if(h[wt.crossTileID])return;if(Y)return void(this.placements[wt.crossTileID]=new fr(!1,!1,!1));let Zi=!1,sr=!1,$i=!0,Sr=null,lr={box:null,placeable:!1,offscreen:null,occluded:!1},Aa={placeable:!1},Dr=null,Lr=null,Ca=null,Vl=0,Zl=0,sl=0;Ut.textFeatureIndex?Vl=Ut.textFeatureIndex:wt.useRuntimeCollisionCircles&&(Vl=wt.featureIndex),Ut.verticalTextFeatureIndex&&(Zl=Ut.verticalTextFeatureIndex);const Ro=Ut.textBox;if(Ro){const Oo=Oi=>{let qi=c.az.horizontal;if(b.allowVerticalPlacement&&!Oi&&this.prevPlacement){const Yr=this.prevPlacement.placedOrientations[wt.crossTileID];Yr&&(this.placedOrientations[wt.crossTileID]=Yr,qi=Yr,this.markUsedOrientation(b,qi,wt))}return qi},as=(Oi,qi)=>{if(b.allowVerticalPlacement&&wt.numVerticalGlyphVertices>0&&Ut.verticalTextBox){for(const Yr of b.writingModes)if(Yr===c.az.vertical?(lr=qi(),Aa=lr):lr=Oi(),lr&&lr.placeable)break}else lr=Oi()},zs=wt.textAnchorOffsetStartIndex,Is=wt.textAnchorOffsetEndIndex;if(Is===zs){const Oi=(qi,Yr)=>{const ra=this.collisionIndex.placeCollisionBox(qi,ve,q,rt,N,Ne,ke,M,le.predicate,at,void 0,Dt);return ra&&ra.placeable&&(this.markUsedOrientation(b,Yr,wt),this.placedOrientations[wt.crossTileID]=Yr),ra};as((()=>Oi(Ro,c.az.horizontal)),(()=>{const qi=Ut.verticalTextBox;return b.allowVerticalPlacement&&wt.numVerticalGlyphVertices>0&&qi?Oi(qi,c.az.vertical):{box:null,offscreen:null}})),Oo(lr&&lr.placeable)}else{let Oi=c.aP[(Ki=(ki=this.prevPlacement)===null||ki===void 0?void 0:ki.variableOffsets[wt.crossTileID])===null||Ki===void 0?void 0:Ki.anchor];const qi=(ra,Tf,Ef)=>{const ou=ra.x2-ra.x1,Zm=ra.y2-ra.y1,su=wt.textBoxScale,Af=ze&&Pe==="never"?Tf:null;let Sc=null,Tc=ve==="never"?1:2,cl="never";Oi&&Tc++;for(let Cf=0;Cf<Tc;Cf++){for(let Nd=zs;Nd<Is;Nd++){const $d=b.textAnchorOffsets.get(Nd);if(Oi&&$d.textAnchor!==Oi)continue;const jd=this.attemptAnchorPlacement($d,ra,ou,Zm,su,ke,Ne,q,rt,N,le,cl,wt,b,Ef,M,D,Af,at);if(jd&&(Sc=jd.placedGlyphBoxes,Sc&&Sc.placeable))return Zi=!0,Sr=jd.shift,Sc}Oi?Oi=null:cl=ve}return y&&!Sc&&(Sc={box:this.collisionIndex.placeCollisionBox(Ro,"always",q,rt,N,Ne,ke,M,le.predicate,at,void 0,Dt).box,offscreen:!1,placeable:!1,occluded:!1}),Sc};as((()=>qi(Ro,Ut.iconBox,c.az.horizontal)),(()=>{const ra=Ut.verticalTextBox;return b.allowVerticalPlacement&&(!lr||!lr.placeable)&&wt.numVerticalGlyphVertices>0&&ra?qi(ra,Ut.verticalIconBox,c.az.vertical):{box:null,occluded:!0,offscreen:null}})),lr&&(Zi=lr.placeable,$i=lr.offscreen);const Yr=Oo(lr&&lr.placeable);if(!Zi&&this.prevPlacement){const ra=this.prevPlacement.variableOffsets[wt.crossTileID];ra&&(this.variableOffsets[wt.crossTileID]=ra,this.markUsedJustification(b,ra.anchor,wt,Yr))}}}if(Dr=lr,Zi=Dr&&Dr.placeable,$i=Dr&&Dr.offscreen,wt.useRuntimeCollisionCircles&&wt.centerJustifiedTextSymbolIndex>=0){const Oo=b.text.placedSymbolArray.get(wt.centerJustifiedTextSymbolIndex),as=c.aA(b.textSizeData,ie,Oo),zs=A.get("text-padding");Lr=this.collisionIndex.placeCollisionCircles(ve,Oo,b.lineVertexArray,b.glyphOffsetArray,as,N,F,y,Ne,le.predicate,wt.collisionCircleDiameter,zs,M,at),Lr.circles.length&&Lr.collisionDetected&&!y&&c.w("Collisions detected, but collision boxes are not shown"),Zi=Ee||Lr.circles.length>0&&!Lr.collisionDetected,$i=$i&&Lr.offscreen}if(Ut.iconFeatureIndex&&(sl=Ut.iconFeatureIndex),Ut.iconBox){const Oo=as=>this.collisionIndex.placeCollisionBox(as,Pe,q,rt,N,Ne,ke,D,le.predicate,at,ze&&Sr?Sr:void 0,Dt);Aa&&Aa.placeable&&Ut.verticalIconBox?(Ca=Oo(Ut.verticalIconBox),sr=Ca.placeable):(Ca=Oo(Ut.iconBox),sr=Ca.placeable),$i=$i&&Ca.offscreen}const Zu=_e||wt.numHorizontalGlyphVertices===0&&wt.numVerticalGlyphVertices===0,Fh=be||wt.numIconVertices===0;Zu||Fh?Fh?Zu||(sr=sr&&Zi):Zi=sr&&Zi:sr=Zi=sr&&Zi;const ll=sr&&Ca.placeable;if(Zi&&Dr.placeable&&this.collisionIndex.insertCollisionBox(Dr.box,ve,A.get("text-ignore-placement"),b.bucketInstanceId,Aa&&Aa.placeable&&Zl?Zl:Vl,le.ID),ll&&this.collisionIndex.insertCollisionBox(Ca.box,Pe,A.get("icon-ignore-placement"),b.bucketInstanceId,sl,le.ID),Lr&&Zi&&this.collisionIndex.insertCollisionCircles(Lr.circles,ve,A.get("text-ignore-placement"),b.bucketInstanceId,Vl,le.ID),y&&this.storeCollisionData(b.bucketInstanceId,On,Ut,Dr,Ca,Lr),wt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(b.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[wt.crossTileID]=new fr((Zi||st)&&!Dr?.occluded,(sr||Je)&&!Ca?.occluded,$i||b.justReloaded),h[wt.crossTileID]=!0};if(Ve){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const wt=b.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Ut=wt.length-1;Ut>=0;--Ut){const On=wt[Ut];Ot(b.symbolInstances.get(On),b.collisionArrays[On],On)}}else for(let wt=i.symbolInstanceStart;wt<i.symbolInstanceEnd;wt++)Ot(b.symbolInstances.get(wt),b.collisionArrays[wt],wt);b.justReloaded=!1}storeCollisionData(i,h,y,b,A,M){if(y.textBox||y.iconBox){let D,N;this.collisionBoxArrays.has(i)?D=this.collisionBoxArrays.get(i):(D=new Map,this.collisionBoxArrays.set(i,D)),D.has(h)?N=D.get(h):(N={text:null,icon:null},D.set(h,N)),y.textBox&&(N.text=b.box),y.iconBox&&(N.icon=A.box)}if(M){let D=this.collisionCircleArrays[i];D===void 0&&(D=this.collisionCircleArrays[i]=[]);for(let N=0;N<M.circles.length;N+=4)D.push(M.circles[N+0]-Xn),D.push(M.circles[N+1]-Xn),D.push(M.circles[N+2]),D.push(M.collisionDetected?1:0)}}markUsedJustification(i,h,y,b){let A;A=b===c.az.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[c.aR(h)];const M=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const D of M)D>=0&&(i.text.placedSymbolArray.get(D).crossTileID=A>=0&&D!==A?0:y.crossTileID)}markUsedOrientation(i,h,y){const b=h===c.az.horizontal||h===c.az.horizontalOnly?h:0,A=h===c.az.vertical?h:0,M=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const D of M)i.text.placedSymbolArray.get(D).placedOrientation=b;y.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=A)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let y=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const b=h?h.symbolFadeChange(i):1,A=h?h.opacities:{},M=h?h.variableOffsets:{},D=h?h.placedOrientations:{};for(const N in this.placements){const F=this.placements[N],q=A[N];q?(this.opacities[N]=new Nn(q,b,F.text,F.icon),y=y||F.text!==q.text.placed||F.icon!==q.icon.placed):(this.opacities[N]=new Nn(null,b,F.text,F.icon,F.skipFade),y=y||F.text||F.icon)}for(const N in A){const F=A[N];if(!this.opacities[N]){const q=new Nn(F,b,!1,!1);q.isHidden()||(this.opacities[N]=q,y=y||F.text.placed||F.icon.placed)}}for(const N in M)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=M[N]);for(const N in D)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=D[N]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:i)}updateLayerOpacities(i,h){const y={};for(const b of h){const A=b.getBucket(i);A&&b.latestFeatureIndex&&i.id===A.layerIds[0]&&this.updateBucketOpacities(A,b.tileID,y,b.collisionBoxArray)}}updateBucketOpacities(i,h,y,b){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const A=i.layers[0],M=A.layout,D=new Nn(null,0,!1,!1,!0),N=M.get("text-allow-overlap"),F=M.get("icon-allow-overlap"),q=A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Y=M.get("text-rotation-alignment")==="map",W=M.get("text-pitch-alignment")==="map",ie=M.get("icon-text-fit")!=="none",le=new Nn(null,0,N&&(F||!i.hasIconData()||M.get("icon-optional")),F&&(N||!i.hasTextData()||M.get("text-optional")),!0);!i.collisionArrays&&b&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(b);const _e=(ve,Ee,Pe)=>{for(let Te=0;Te<Ee/4;Te++)ve.opacityVertexArray.emplaceBack(Pe);ve.hasVisibleVertices=ve.hasVisibleVertices||Pe!==qs},be=this.collisionBoxArrays.get(i.bucketInstanceId);for(let ve=0;ve<i.symbolInstances.length;ve++){const Ee=i.symbolInstances.get(ve),{numHorizontalGlyphVertices:Pe,numVerticalGlyphVertices:Te,crossTileID:ke}=Ee;let Ne=this.opacities[ke];y[ke]?Ne=D:Ne||(Ne=le,this.opacities[ke]=Ne),y[ke]=!0;const ze=Ee.numIconVertices>0,Ve=this.placedOrientations[Ee.crossTileID],st=Ve===c.az.vertical,Je=Ve===c.az.horizontal||Ve===c.az.horizontalOnly;if(Pe>0||Te>0){const at=Hc(Ne.text);_e(i.text,Pe,st?qs:at),_e(i.text,Te,Je?qs:at);const Dt=Ne.text.isHidden();[Ee.rightJustifiedTextSymbolIndex,Ee.centerJustifiedTextSymbolIndex,Ee.leftJustifiedTextSymbolIndex].forEach((Ut=>{Ut>=0&&(i.text.placedSymbolArray.get(Ut).hidden=Dt||st?1:0)})),Ee.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Ee.verticalPlacedTextSymbolIndex).hidden=Dt||Je?1:0);const Ot=this.variableOffsets[Ee.crossTileID];Ot&&this.markUsedJustification(i,Ot.anchor,Ee,Ve);const wt=this.placedOrientations[Ee.crossTileID];wt&&(this.markUsedJustification(i,"left",Ee,wt),this.markUsedOrientation(i,wt,Ee))}if(ze){const at=Hc(Ne.icon),Dt=!(ie&&Ee.verticalPlacedIconSymbolIndex&&st);Ee.placedIconSymbolIndex>=0&&(_e(i.icon,Ee.numIconVertices,Dt?at:qs),i.icon.placedSymbolArray.get(Ee.placedIconSymbolIndex).hidden=Ne.icon.isHidden()),Ee.verticalPlacedIconSymbolIndex>=0&&(_e(i.icon,Ee.numVerticalIconVertices,Dt?qs:at),i.icon.placedSymbolArray.get(Ee.verticalPlacedIconSymbolIndex).hidden=Ne.icon.isHidden())}const rt=be&&be.has(ve)?be.get(ve):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const at=i.collisionArrays[ve];if(at){let Dt=new c.P(0,0);if(at.textBox||at.verticalTextBox){let Ot=!0;if(q){const wt=this.variableOffsets[ke];wt?(Dt=Xi(wt.anchor,wt.width,wt.height,wt.textOffset,wt.textBoxScale),Y&&Dt._rotate(W?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ot=!1}if(at.textBox||at.verticalTextBox){let wt;at.textBox&&(wt=st),at.verticalTextBox&&(wt=Je),tc(i.textCollisionBox.collisionVertexArray,Ne.text.placed,!Ot||wt,rt.text,Dt.x,Dt.y)}}if(at.iconBox||at.verticalIconBox){const Ot=!!(!Je&&at.verticalIconBox);let wt;at.iconBox&&(wt=Ot),at.verticalIconBox&&(wt=!Ot),tc(i.iconCollisionBox.collisionVertexArray,Ne.icon.placed,wt,rt.icon,ie?Dt.x:0,ie?Dt.y:0)}}}}if(i.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);i.bucketInstanceId in this.collisionCircleArrays&&(i.collisionCircleArray=this.collisionCircleArrays[i.bucketInstanceId],delete this.collisionCircleArrays[i.bucketInstanceId])}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,h){const y=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*y>i}setStale(){this.stale=!0}}function tc(S,i,h,y,b,A){y&&y.length!==0||(y=[0,0,0,0]);const M=y[0]-Xn,D=y[1]-Xn,N=y[2]-Xn,F=y[3]-Xn;S.emplaceBack(i?1:0,h?1:0,b||0,A||0,M,D),S.emplaceBack(i?1:0,h?1:0,b||0,A||0,N,D),S.emplaceBack(i?1:0,h?1:0,b||0,A||0,N,F),S.emplaceBack(i?1:0,h?1:0,b||0,A||0,M,F)}const Go=Math.pow(2,25),Vi=Math.pow(2,24),bl=Math.pow(2,17),ys=Math.pow(2,16),vo=Math.pow(2,9),Sh=Math.pow(2,8),Ho=Math.pow(2,1);function Hc(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;const i=S.placed?1:0,h=Math.floor(127*S.opacity);return h*Go+i*Vi+h*bl+i*ys+h*vo+i*Sh+h*Ho+i}const qs=0;class Wo{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,h,y,b,A){const M=this._bucketParts;for(;this._currentTileIndex<i.length;)if(h.getBucketParts(M,b,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,A())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort(((D,N)=>D.sortKey-N.sortKey)));this._currentPartIndex<M.length;)if(h.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,A())return!0;return!1}}class xl{constructor(i,h,y,b,A,M,D,N){this.placement=new Su(i,h,M,D,N),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=A,this._done=!1}isDone(){return this._done}continuePlacement(i,h,y){const b=ee(),A=()=>!this._forceFullPlacement&&ee()-b>2;for(;this._currentPlacementIndex>=0;){const M=h[i[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=D)&&(!M.maxzoom||M.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new Wo(M)),this._inProgressLayer.continuePlacement(y[M.source],this.placement,this._showCollisionBoxes,M,A))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Ln=512/c.a5/2;class Ka{constructor(i,h,y){this.tileID=i,this.bucketInstanceId=y,this._symbolsByKey={};const b=new Map;for(let A=0;A<h.length;A++){const M=h.get(A),D=M.key,N=b.get(D);N?N.push(M):b.set(D,[M])}for(const[A,M]of b){const D={positions:M.map((N=>({x:Math.floor(N.anchorX*Ln),y:Math.floor(N.anchorY*Ln)}))),crossTileIDs:M.map((N=>N.crossTileID))};if(D.positions.length>128){const N=new c.aT(D.positions.length,16,Uint16Array);for(const{x:F,y:q}of D.positions)N.add(F,q);N.finish(),delete D.positions,D.index=N}this._symbolsByKey[A]=D}}getScaledCoordinates(i,h){const{x:y,y:b,z:A}=this.tileID.canonical,{x:M,y:D,z:N}=h.canonical,F=Ln/Math.pow(2,N-A),q=(D*c.a5+i.anchorY)*F,Y=b*c.a5*Ln;return{x:Math.floor((M*c.a5+i.anchorX)*F-y*c.a5*Ln),y:Math.floor(q-Y)}}findMatches(i,h,y){const b=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let A=0;A<i.length;A++){const M=i.get(A);if(M.crossTileID)continue;const D=this._symbolsByKey[M.key];if(!D)continue;const N=this.getScaledCoordinates(M,h);if(D.index){const F=D.index.range(N.x-b,N.y-b,N.x+b,N.y+b).sort();for(const q of F){const Y=D.crossTileIDs[q];if(!y[Y]){y[Y]=!0,M.crossTileID=Y;break}}}else if(D.positions)for(let F=0;F<D.positions.length;F++){const q=D.positions[F],Y=D.crossTileIDs[F];if(Math.abs(q.x-N.x)<=b&&Math.abs(q.y-N.y)<=b&&!y[Y]){y[Y]=!0,M.crossTileID=Y;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:i})=>i))}}class Th{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class nc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const h=Math.round((i-this.lng)/360);if(h!==0)for(const y in this.indexes){const b=this.indexes[y],A={};for(const M in b){const D=b[M];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+h),A[D.tileID.key]=D}this.indexes[y]=A}this.lng=i}addBucket(i,h,y){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let A=0;A<h.symbolInstances.length;A++)h.symbolInstances.get(A).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const b=this.usedCrossTileIDs[i.overscaledZ];for(const A in this.indexes){const M=this.indexes[A];if(Number(A)>i.overscaledZ)for(const D in M){const N=M[D];N.tileID.isChildOf(i)&&N.findMatches(h.symbolInstances,i,b)}else{const D=M[i.scaledTo(Number(A)).key];D&&D.findMatches(h.symbolInstances,i,b)}}for(let A=0;A<h.symbolInstances.length;A++){const M=h.symbolInstances.get(A);M.crossTileID||(M.crossTileID=y.generate(),b[M.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Ka(i,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(i,h){for(const y of h.getCrossTileIDsLists())for(const b of y)delete this.usedCrossTileIDs[i][b]}removeStaleBuckets(i){let h=!1;for(const y in this.indexes){const b=this.indexes[y];for(const A in b)i[b[A].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,b[A]),delete b[A],h=!0)}return h}}class Hr{constructor(){this.layerIndexes={},this.crossTileIDs=new Th,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,h,y){let b=this.layerIndexes[i.id];b===void 0&&(b=this.layerIndexes[i.id]=new nc);let A=!1;const M={};b.handleWrapJump(y);for(const D of h){const N=D.getBucket(i);N&&i.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(D.tileID,N,this.crossTileIDs)&&(A=!0),M[N.bucketInstanceId]=!0)}return b.removeStaleBuckets(M)&&(A=!0),A}pruneUnusedLayers(i){const h={};i.forEach((y=>{h[y]=!0}));for(const y in this.layerIndexes)h[y]||delete this.layerIndexes[y]}}var hn="void main() {fragColor=vec4(1.0);}";const li={prelude:Jt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Jt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Jt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Jt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Jt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Jt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Jt(hn,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Jt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Jt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Jt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Jt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Jt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Jt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Jt(hn,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Jt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Jt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Jt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Jt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Jt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Jt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Jt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Jt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Jt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Jt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Jt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Jt(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Jt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Jt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Jt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Jt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Jt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Jt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Jt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Jt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Jt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Jt(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Jt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Jt(S,i){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=i.match(/in ([\w]+) ([\w]+)/g),b=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=A?A.concat(b):b,D={};return{fragmentSource:S=S.replace(h,((N,F,q,Y,W)=>(D[W]=!0,F==="define"?`
#ifndef HAS_UNIFORM_u_${W}
in ${q} ${Y} ${W};
#else
uniform ${q} ${Y} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${q} ${Y} ${W} = u_${W};
#endif
`))),vertexSource:i=i.replace(h,((N,F,q,Y,W)=>{const ie=Y==="float"?"vec2":"vec4",le=W.match(/color/)?"color":ie;return D[W]?F==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${q} ${ie} a_${W};
out ${q} ${Y} ${W};
#else
uniform ${q} ${Y} u_${W};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${q} ${Y} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${le}(a_${W}, u_${W}_t);
#else
    ${q} ${Y} ${W} = u_${W};
#endif
`:F==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${q} ${ie} a_${W};
#else
uniform ${q} ${Y} u_${W};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${q} ${Y} ${W} = a_${W};
#else
    ${q} ${Y} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${q} ${Y} ${W} = unpack_mix_${le}(a_${W}, u_${W}_t);
#else
    ${q} ${Y} ${W} = u_${W};
#endif
`})),staticAttributes:y,staticUniforms:M}}class Mi{constructor(i,h,y){this.vertexBuffer=i,this.indexBuffer=h,this.segments=y}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ja=c.aU([{name:"a_pos",type:"Int16",components:2}]);const Ji="#define PROJECTION_MERCATOR",ma="mercator";class Qi{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ma}get shaderDefine(){return Ji}get shaderPreludeCode(){return li.projectionMercator}get vertexShaderPreludeCode(){return li.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(i){}getMeshFromTileID(i,h,y,b,A){if(this._cachedMesh)return this._cachedMesh;const M=new c.aW;M.emplaceBack(0,0),M.emplaceBack(c.a5,0),M.emplaceBack(0,c.a5),M.emplaceBack(c.a5,c.a5);const D=i.createVertexBuffer(M,Ja.members),N=c.aX.simpleSegment(0,0,4,2),F=new c.aY;F.emplaceBack(1,0,2),F.emplaceBack(1,2,3);const q=i.createIndexBuffer(F);return this._cachedMesh=new Mi(D,q,N),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(i){}}class Ba{constructor(i=0,h=0,y=0,b=0){if(isNaN(i)||i<0||isNaN(h)||h<0||isNaN(y)||y<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=h,this.left=y,this.right=b}interpolate(i,h,y){return h.top!=null&&i.top!=null&&(this.top=c.G.number(i.top,h.top,y)),h.bottom!=null&&i.bottom!=null&&(this.bottom=c.G.number(i.bottom,h.bottom,y)),h.left!=null&&i.left!=null&&(this.left=c.G.number(i.left,h.left,y)),h.right!=null&&i.right!=null&&(this.right=c.G.number(i.right,h.right,y)),this}getCenter(i,h){const y=c.an((this.left+i-this.right)/2,0,i),b=c.an((this.top+h-this.bottom)/2,0,h);return new c.P(y,b)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Ba(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Qa(S,i){if(!S.renderWorldCopies||S.lngRange)return;const h=i.lng-S.center.lng;i.lng+=h>180?-360:h<-180?360:0}function Un(S){return Math.max(0,Math.floor(S))}class eo{constructor(i,h){var y;this.applyConstrain=(b,A)=>this._constrainOverride!==null?this._constrainOverride(b,A):this._callbacks.defaultConstrain(b,A),this._callbacks=i,this._tileSize=512,this._renderWorldCopies=h?.renderWorldCopies===void 0||!!h?.renderWorldCopies,this._minZoom=h?.minZoom||0,this._maxZoom=h?.maxZoom||22,this._minPitch=h?.minPitch==null?0:h?.minPitch,this._maxPitch=h?.maxPitch==null?60:h?.maxPitch,this._constrainOverride=(y=h?.constrainOverride)!==null&&y!==void 0?y:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Un(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ba,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(i,h,y){this._constrainOverride=i.constrainOverride,this._latRange=i.latRange,this._lngRange=i.lngRange,this._width=i.width,this._height=i.height,this._center=i.center,this._elevation=i.elevation,this._minElevationForCurrentTile=i.minElevationForCurrentTile,this._zoom=i.zoom,this._tileZoom=Un(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=i.bearingInRadians,this._fovInRadians=i.fovInRadians,this._pitchInRadians=i.pitchInRadians,this._rollInRadians=i.rollInRadians,this._unmodified=i.unmodified,this._edgeInsets=new Ba(i.padding.top,i.padding.bottom,i.padding.left,i.padding.right),this._minZoom=i.minZoom,this._maxZoom=i.maxZoom,this._minPitch=i.minPitch,this._maxPitch=i.maxPitch,this._renderWorldCopies=i.renderWorldCopies,this._cameraToCenterDistance=i.cameraToCenterDistance,this._nearZ=i.nearZ,this._farZ=i.farZ,this._autoCalculateNearFarZ=!y&&i.autoCalculateNearFarZ,h&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(i){this._minElevationForCurrentTile=i}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(i){this._minZoom!==i&&(this._minZoom=i,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(i){this._minPitch!==i&&(this._minPitch=i,this.setPitch(Math.max(this.pitch,i)))}get maxPitch(){return this._maxPitch}setMaxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.setPitch(Math.min(this.pitch,i)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get constrainOverride(){return this._constrainOverride}setConstrainOverride(i){i===void 0&&(i=null),this._constrainOverride!==i&&(this._constrainOverride=i,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(i){const h=c.W(i,-180,180)*Math.PI/180;var y,b,A,M,D,N,F,q,Y;this._bearingInRadians!==h&&(this._unmodified=!1,this._bearingInRadians=h,this._calcMatrices(),this._rotationMatrix=k(),y=this._rotationMatrix,A=-this._bearingInRadians,M=(b=this._rotationMatrix)[0],D=b[1],N=b[2],F=b[3],q=Math.sin(A),Y=Math.cos(A),y[0]=M*Y+N*q,y[1]=D*Y+F*q,y[2]=M*-q+N*Y,y[3]=D*-q+F*Y)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(i){const h=c.an(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==h&&(this._unmodified=!1,this._pitchInRadians=h,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(i){const h=i/180*Math.PI;this._rollInRadians!==h&&(this._unmodified=!1,this._rollInRadians=h,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aZ(this._fovInRadians)}setFov(i){i=c.an(i,.1,150),this.fov!==i&&(this._unmodified=!1,this._fovInRadians=c.ap(i),this._calcMatrices())}get zoom(){return this._zoom}setZoom(i){const h=this.applyConstrain(this._center,i).zoom;this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this._tileZoom=Math.max(0,Math.floor(h)),this._scale=c.aq(h),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(i){i!==this._elevation&&(this._elevation=i,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(i,h){this._autoCalculateNearFarZ=!1,this._nearZ=i,this._farZ=h,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,h,y){this._unmodified=!1,this._edgeInsets.interpolate(i,h,y),this.constrainInternal(),this._calcMatrices()}resize(i,h,y=!0){this._width=i,this._height=h,y&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Pi([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(i){i?(this._lngRange=[i.getWest(),i.getEast()],this._latRange=[i.getSouth(),i.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-c.ao,c.ao])}getCameraQueryGeometry(i,h){if(h.length===1)return[h[0],i];{const{minX:y,minY:b,maxX:A,maxY:M}=c.aa.fromPoints(h).extend(i);return[new c.P(y,b),new c.P(A,b),new c.P(A,M),new c.P(y,M),new c.P(y,b)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:h,zoom:y}=this.applyConstrain(this.center,this.zoom);this.setCenter(h),this.setZoom(y),this._unmodified=i,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let i=c.ar(new Float64Array(16));c.Q(i,i,[this._width/2,-this._height/2,1]),c.O(i,i,[1,-1,0]),this._clipSpaceToPixelsMatrix=i,i=c.ar(new Float64Array(16)),c.Q(i,i,[1,-1,1]),c.O(i,i,[-1,-1,0]),c.Q(i,i,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=i,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(i,h,y,b){const A=y!==void 0?y:this.bearing,M=b=b!==void 0?b:this.pitch,{distanceToCenter:D,clampedElevation:N}=this._distanceToCenterFromAltElevationPitch(h,this.elevation,M),{x:F,y:q}=Ei(M,A),Y=c.a9.fromLngLat(i,h);let W,ie,le=c.a_(1,Y.y),_e=0;do{if(_e+=1,_e>10)break;ie=D/le,W=new c.a9(Y.x+F*ie,Y.y+q*ie),le=1/W.meterInMercatorCoordinateUnits()}while(Math.abs(D-ie*le)>1e-12);return{center:W.toLngLat(),elevation:N,zoom:c.at(this.height/2/Math.tan(this.fovInRadians/2)/ie/this.tileSize)}}recalculateZoomAndCenter(i){if(this.elevation-i==0)return;const h=1/this.worldSize,y=c.as(1,this.center.lat)*this.worldSize,b=c.a9.fromLngLat(this.center,this.elevation),A=b.x/h,M=b.y/h,D=b.z/h,N=this.pitch,F=this.bearing,{x:q,y:Y,z:W}=Ei(N,F),ie=this.cameraToCenterDistance,le=A+ie*-q,_e=M+ie*-Y,be=D+ie*W,{distanceToCenter:ve,clampedElevation:Ee}=this._distanceToCenterFromAltElevationPitch(be/y,i,N),Pe=ve*y,Te=new c.a9((le+q*Pe)*h,(_e+Y*Pe)*h,0).toLngLat(),ke=c.as(1,Te.lat),Ne=c.at(this.height/2/Math.tan(this.fovInRadians/2)/ve/ke/this.tileSize);this._elevation=Ee,this._center=Te,this.setZoom(Ne)}_distanceToCenterFromAltElevationPitch(i,h,y){const b=-Math.cos(c.ap(y)),A=i-h;let M,D=h;return b*A>=0||Math.abs(b)<.1?(M=1e4,D=i+M*b):M=-A/b,{distanceToCenter:M,clampedElevation:D}}getCameraPoint(){const i=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(i*Math.sin(this.rollInRadians),i*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const i=c.as(1,this.center.lat)*this.worldSize;return Ke(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/i).toLngLat()}getMercatorTileCoordinates(i){if(!i)return[0,0,1,1];const h=i.canonical.z>=0?1<<i.canonical.z:Math.pow(2,i.canonical.z);return[i.canonical.x/h,i.canonical.y/h,1/h/c.a5,1/h/c.a5]}}class to{constructor(i,h){this.min=i,this.max=h,this.center=c.a$([],c.b0([],this.min,this.max),.5)}quadrant(i){const h=[i%2==0,i<2],y=c.b1(this.min),b=c.b1(this.max);for(let A=0;A<h.length;A++)y[A]=h[A]?this.min[A]:this.center[A],b[A]=h[A]?this.center[A]:this.max[A];return b[2]=this.max[2],new to(y,b)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersectsFrustum(i){let h=!0;for(let y=0;y<i.planes.length;y++){const b=this.intersectsPlane(i.planes[y]);if(b===0)return 0;b===1&&(h=!1)}return h?2:i.aabb.min[0]>this.max[0]||i.aabb.min[1]>this.max[1]||i.aabb.min[2]>this.max[2]||i.aabb.max[0]<this.min[0]||i.aabb.max[1]<this.min[1]||i.aabb.max[2]<this.min[2]?0:1}intersectsPlane(i){let h=i[3],y=i[3];for(let b=0;b<3;b++)i[b]>0?(h+=i[b]*this.min[b],y+=i[b]*this.max[b]):(y+=i[b]*this.min[b],h+=i[b]*this.max[b]);return h>=0?2:y<0?0:1}}class wl{distanceToTile2d(i,h,y,b){const A=b.distanceX([i,h]),M=b.distanceY([i,h]);return Math.hypot(A,M)}getWrap(i,h,y){return y}getTileBoundingVolume(i,h,y,b){var A,M;let D=0,N=0;if(b?.terrain){const q=new c.a2(i.z,h,i.z,i.x,i.y),Y=b.terrain.getMinMaxElevation(q);D=(A=Y.minElevation)!==null&&A!==void 0?A:Math.min(0,y),N=(M=Y.maxElevation)!==null&&M!==void 0?M:Math.max(0,y)}const F=1<<i.z;return new to([h+i.x/F,i.y/F,D],[h+(i.x+1)/F,(i.y+1)/F,N])}allowVariableZoom(i,h){const y=i.fov*(Math.abs(Math.cos(i.rollInRadians))*i.height+Math.abs(Math.sin(i.rollInRadians))*i.width)/i.height,b=c.an(78.5-y/2,0,60);return!!h.terrain||i.pitch>b}allowWorldCopies(){return!0}prepareNextFrame(){}}class Fa{constructor(i,h,y){this.points=i,this.planes=h,this.aabb=y}static fromInvProjectionMatrix(i,h=1,y=0,b,A){const M=A?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],D=Math.pow(2,y),N=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((W=>(function(ie,le,_e,be){const ve=c.aH([],ie,le),Ee=1/ve[3]/_e*be;return c.b6(ve,ve,[Ee,Ee,1/ve[3],Ee])})(W,i,h,D)));b&&(function(W,ie,le,_e){const be=_e?4:0,ve=_e?0:4;let Ee=0;const Pe=[],Te=[];for(let ze=0;ze<4;ze++){const Ve=c.b2([],W[ze+ve],W[ze+be]),st=c.b7(Ve);c.a$(Ve,Ve,1/st),Pe.push(st),Te.push(Ve)}for(let ze=0;ze<4;ze++){const Ve=c.b8(W[ze+be],Te[ze],le);Ee=Ve!==null&&Ve>=0?Math.max(Ee,Ve):Math.max(Ee,Pe[ze])}const ke=(function(ze,Ve){const st=c.b2([],ze[Ve[0]],ze[Ve[1]]),Je=c.b2([],ze[Ve[2]],ze[Ve[1]]),rt=[0,0,0,0];return c.b3(rt,c.b4([],st,Je)),rt[3]=-c.b5(rt,ze[Ve[0]]),rt})(W,ie),Ne=(function(ze,Ve){const st=c.b9(ze),Je=c.ba([],ze,1/st),rt=c.b2([],Ve,c.a$([],Je,c.b5(Ve,Je))),at=c.b9(rt);if(at>0){const Dt=Math.sqrt(1-Je[3]*Je[3]),Ot=c.a$([],Je,-Je[3]),wt=c.b0([],Ot,c.a$([],rt,Dt/at));return c.bb(Ve,wt)}return null})(le,ke);if(Ne!==null){const ze=Ne/c.b5(Te[0],ke);Ee=Math.min(Ee,ze)}for(let ze=0;ze<4;ze++){const Ve=Math.min(Ee,Pe[ze]);W[ze+ve]=[W[ze+be][0]+Te[ze][0]*Ve,W[ze+be][1]+Te[ze][1]*Ve,W[ze+be][2]+Te[ze][2]*Ve,1]}})(N,M[0],b,A);const F=M.map((W=>{const ie=c.b2([],N[W[0]],N[W[1]]),le=c.b2([],N[W[2]],N[W[1]]),_e=c.b3([],c.b4([],ie,le)),be=-c.b5(_e,N[W[1]]);return _e.concat(be)})),q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Y=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const W of N)for(let ie=0;ie<3;ie++)q[ie]=Math.min(q[ie],W[ie]),Y[ie]=Math.max(Y[ie],W[ie]);return new Fa(N,F,new to(q,Y))}}class Ir{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,h,y){return this._helper.interpolatePadding(i,h,y)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,h,y=!0){this._helper.resize(i,h,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}setConstrainOverride(i){this._helper.setConstrainOverride(i)}overrideNearFarZ(i,h){this._helper.overrideNearFarZ(i,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i,h){}constructor(i){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(h,y)=>{y=c.an(+y,this.minZoom,this.maxZoom);const b={center:new c.V(h.lng,h.lat),zoom:y};let A=this._helper._lngRange;if(!this._helper._renderWorldCopies&&A===null){const Te=179.9999999999;A=[-Te,Te]}const M=this.tileSize*c.aq(b.zoom);let D=0,N=M,F=0,q=M,Y=0,W=0;const{x:ie,y:le}=this.size;if(this._helper._latRange){const Te=this._helper._latRange;D=c.X(Te[1])*M,N=c.X(Te[0])*M,N-D<le&&(Y=le/(N-D))}A&&(F=c.W(c.Y(A[0])*M,0,M),q=c.W(c.Y(A[1])*M,0,M),q<F&&(q+=M),q-F<ie&&(W=ie/(q-F)));const{x:_e,y:be}=an(M,h);let ve,Ee;const Pe=Math.max(W||0,Y||0);if(Pe){const Te=new c.P(W?(q+F)/2:_e,Y?(N+D)/2:be);return b.center=Sn(M,Te).wrap(),b.zoom+=c.at(Pe),b}if(this._helper._latRange){const Te=le/2;be-Te<D&&(Ee=D+Te),be+Te>N&&(Ee=N-Te)}if(A){const Te=(F+q)/2;let ke=_e;this._helper._renderWorldCopies&&(ke=c.W(_e,Te-M/2,Te+M/2));const Ne=ie/2;ke-Ne<F&&(ve=F+Ne),ke+Ne>q&&(ve=q-Ne)}if(ve!==void 0||Ee!==void 0){const Te=new c.P(ve??_e,Ee??be);b.center=Sn(M,Te).wrap()}return b},this.applyConstrain=(h,y)=>this._helper.applyConstrain(h,y),this._helper=new eo({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(h,y)=>this.defaultConstrain(h,y)},i),this._coveringTilesDetailsProvider=new wl}clone(){const i=new Ir;return i.apply(this,!1),i}apply(i,h,y){this._helper.apply(i,h,y)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(i){const h=[new c.bc(0,i)];if(this._helper._renderWorldCopies){const y=this.screenPointToMercatorCoordinate(new c.P(0,0)),b=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),A=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),D=Math.floor(Math.min(y.x,b.x,A.x,M.x)),N=Math.floor(Math.max(y.x,b.x,A.x,M.x)),F=1;for(let q=D-F;q<=N+F;q++)q!==0&&h.push(new c.bc(q,i))}return h}getCameraFrustum(){return Fa.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){const h=this.screenPointToLocation(this.centerPoint,i),y=i?i.getElevationForLngLatZoom(h,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(y)}setLocationAtPoint(i,h){const y=c.as(this.elevation,this.center.lat),b=this.screenPointToMercatorCoordinateAtZ(h,y),A=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,y),M=c.a9.fromLngLat(i),D=new c.a9(M.x-(b.x-A.x),M.y-(b.y-A.y));this.setCenter(D?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(i,h){return h?this.coordinatePoint(c.a9.fromLngLat(i),h.getElevationForLngLat(i,this),this._pixelMatrix3D):this.coordinatePoint(c.a9.fromLngLat(i))}screenPointToLocation(i,h){var y;return(y=this.screenPointToMercatorCoordinate(i,h))===null||y===void 0?void 0:y.toLngLat()}screenPointToMercatorCoordinate(i,h){if(h){const y=h.pointCoordinate(i);if(y!=null)return y}return this.screenPointToMercatorCoordinateAtZ(i)}screenPointToMercatorCoordinateAtZ(i,h){const y=h||0,b=[i.x,i.y,0,1],A=[i.x,i.y,1,1];c.aH(b,b,this._pixelMatrixInverse),c.aH(A,A,this._pixelMatrixInverse);const M=b[3],D=A[3],N=b[1]/M,F=A[1]/D,q=b[2]/M,Y=A[2]/D,W=q===Y?0:(y-q)/(Y-q);return new c.a9(c.G.number(b[0]/M,A[0]/D,W)/this.worldSize,c.G.number(N,F,W)/this.worldSize,y)}coordinatePoint(i,h=0,y=this._pixelMatrix){const b=[i.x*this.worldSize,i.y*this.worldSize,h,1];return c.aH(b,b,y),new c.P(b[0]/b[3],b[1]/b[3])}getBounds(){const i=Math.max(0,this._helper._height/2-pi(this));return new Pi().extend(this.screenPointToLocation(new c.P(0,i))).extend(this.screenPointToLocation(new c.P(this._helper._width,i))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(i,h){return h?h.pointCoordinate(i)!=null:i.y>this.height/2-pi(this)}calculatePosMatrix(i,h=!1,y){var b;const A=(b=i.key)!==null&&b!==void 0?b:c.bd(i.wrap,i.canonical.z,i.canonical.z,i.canonical.x,i.canonical.y),M=h?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(A)){const F=M.get(A);return y?F.f32:F.f64}const D=ti(i,this.worldSize);c.S(D,h?this._alignedProjMatrix:this._viewProjMatrix,D);const N={f64:D,f32:new Float32Array(D)};return M.set(A,N),y?N.f32:N.f64}calculateFogMatrix(i){const h=i.key,y=this._fogMatrixCacheF32;if(y.has(h))return y.get(h);const b=ti(i,this.worldSize);return c.S(b,this._fogMatrix,b),y.set(h,new Float32Array(b)),y.get(h)}calculateCenterFromCameraLngLatAlt(i,h,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(i,h,y,b)}_calculateNearFarZIfNeeded(i,h,y){if(!this._helper.autoCalculateNearFarZ)return;const b=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),A=i-b*this._helper._pixelPerMeter/Math.cos(h),M=b<0?A:i,D=Math.PI/2+this.pitchInRadians,N=c.ap(this.fov)*(Math.abs(Math.cos(c.ap(this.roll)))*this.height+Math.abs(Math.sin(c.ap(this.roll)))*this.width)/this.height*(.5+y.y/this.height),F=Math.sin(N)*M/Math.sin(c.an(Math.PI-D-N,.01,Math.PI-.01)),q=pi(this),Y=Math.atan(q/this._helper.cameraToCenterDistance),W=c.ap(.75),ie=Y>W?2*Y*(.5+y.y/(2*q)):W,le=Math.sin(ie)*M/Math.sin(c.an(Math.PI-D-ie,.01,Math.PI-.01)),_e=Math.min(F,le);this._helper._farZ=1.01*(Math.cos(Math.PI/2-h)*_e+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const i=this.centerOffset,h=an(this.worldSize,this.center),y=h.x,b=h.y;this._helper._pixelPerMeter=c.as(1,this.center.lat)*this.worldSize;const A=c.ap(Math.min(this.pitch,Xt)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(A));let D;this._calculateNearFarZIfNeeded(M,A,i),D=new Float64Array(16),c.be(D,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.aB(this._invProjMatrix,D),D[8]=2*-i.x/this._helper._width,D[9]=2*i.y/this._helper._height,this._projectionMatrix=c.bf(D),c.Q(D,D,[1,-1,1]),c.O(D,D,[0,0,-this._helper.cameraToCenterDistance]),c.bg(D,D,-this.rollInRadians),c.bh(D,D,this.pitchInRadians),c.bg(D,D,-this.bearingInRadians),c.O(D,D,[-y,-b,0]),this._mercatorMatrix=c.Q([],D,[this.worldSize,this.worldSize,this.worldSize]),c.Q(D,D,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,D),c.O(D,D,[0,0,-this.elevation]),this._viewProjMatrix=D,this._invViewProjMatrix=c.aB([],D);const N=[0,0,-1,1];c.aH(N,N,this._invViewProjMatrix),this._cameraPosition=[N[0]/N[3],N[1]/N[3],N[2]/N[3]],this._fogMatrix=new Float64Array(16),c.be(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-i.x/this.width,this._fogMatrix[9]=2*i.y/this.height,c.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.O(this._fogMatrix,this._fogMatrix,[-y,-b,0]),c.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,D);const F=this._helper._width%2/2,q=this._helper._height%2/2,Y=Math.cos(this.bearingInRadians),W=Math.sin(-this.bearingInRadians),ie=y-Math.round(y)+Y*F+W*q,le=b-Math.round(b)+Y*q+W*F,_e=new Float64Array(D);if(c.O(_e,_e,[ie>.5?ie-1:ie,le>.5?le-1:le,0]),this._alignedProjMatrix=_e,D=c.aB(new Float64Array(16),this._pixelMatrix),!D)throw new Error("failed to invert matrix");this._pixelMatrixInverse=D,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const i=this.screenPointToMercatorCoordinate(new c.P(0,0)),h=[i.x*this.worldSize,i.y*this.worldSize,0,1];return c.aH(h,h,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const i=c.as(1,this.center.lat)*this.worldSize;return Ke(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/i).toLngLat()}lngLatToCameraDepth(i,h){const y=c.a9.fromLngLat(i),b=[y.x*this.worldSize,y.y*this.worldSize,h,1];return c.aH(b,b,this._viewProjMatrix),b[2]/b[3]}getProjectionData(i){const{overscaledTileID:h,aligned:y,applyTerrainMatrix:b}=i,A=this._helper.getMercatorTileCoordinates(h),M=h?this.calculatePosMatrix(h,y,!0):null;let D;return D=h&&h.terrainRttPosMatrix32f&&b?h.terrainRttPosMatrix32f:M||c.bi(),{mainMatrix:D,tileMercatorCoords:A,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:D}}isLocationOccluded(i){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(i,h,y){return 1}transformLightDirection(i){return c.b1(i)}getRayDirectionFromPixel(i){throw new Error("Not implemented.")}projectTileCoordinates(i,h,y,b){const A=this.calculatePosMatrix(y);let M;b?(M=[i,h,b(i,h),1],c.aH(M,M,A)):(M=[i,h,0,1],ja(M,M,A));const D=M[3];return{point:new c.P(M[0]/D,M[1]/D),signedDistanceFromCamera:D,isOccluded:!1}}populateCache(i){for(const h of i)this.calculatePosMatrix(h)}getMatrixForModel(i,h){const y=c.a9.fromLngLat(i,h),b=y.meterInMercatorCoordinateUnits(),A=c.bj();return c.O(A,A,[y.x,y.y,y.z]),c.bg(A,A,Math.PI),c.bh(A,A,Math.PI/2),c.Q(A,A,[-b,b,b]),A}getProjectionDataForCustomLayer(i=!0){const h=new c.a2(0,0,0,0,0),y=this.getProjectionData({overscaledTileID:h,applyGlobeMatrix:i}),b=ti(h,this.worldSize);c.S(b,this._viewProjMatrix,b),y.tileMercatorCoords=[0,0,1,1];const A=[c.a5,c.a5,this.worldSize/this._helper.pixelsPerMeter],M=c.bk();return c.Q(M,b,A),y.fallbackMatrix=M,y.mainMatrix=M,y}getFastPathSimpleProjectionMatrix(i){return this.calculatePosMatrix(i)}}function ga(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Tu(S){if(S.useSlerp)if(S.k<1){const i=c.bl(S.startEulerAngles.roll,S.startEulerAngles.pitch,S.startEulerAngles.bearing),h=c.bl(S.endEulerAngles.roll,S.endEulerAngles.pitch,S.endEulerAngles.bearing),y=new Float64Array(4);c.bm(y,i,h,S.k);const b=c.bn(y);S.tr.setRoll(b.roll),S.tr.setPitch(b.pitch),S.tr.setBearing(b.bearing)}else S.tr.setRoll(S.endEulerAngles.roll),S.tr.setPitch(S.endEulerAngles.pitch),S.tr.setBearing(S.endEulerAngles.bearing);else S.tr.setRoll(c.G.number(S.startEulerAngles.roll,S.endEulerAngles.roll,S.k)),S.tr.setPitch(c.G.number(S.startEulerAngles.pitch,S.endEulerAngles.pitch,S.k)),S.tr.setBearing(c.G.number(S.startEulerAngles.bearing,S.endEulerAngles.bearing,S.k))}function Sl(S,i,h,y,b){const A=b.padding,M=an(b.worldSize,h.getNorthWest()),D=an(b.worldSize,h.getNorthEast()),N=an(b.worldSize,h.getSouthEast()),F=an(b.worldSize,h.getSouthWest()),q=c.ap(-y),Y=M.rotate(q),W=D.rotate(q),ie=N.rotate(q),le=F.rotate(q),_e=new c.P(Math.max(Y.x,W.x,le.x,ie.x),Math.max(Y.y,W.y,le.y,ie.y)),be=new c.P(Math.min(Y.x,W.x,le.x,ie.x),Math.min(Y.y,W.y,le.y,ie.y)),ve=_e.sub(be),Ee=(b.width-(A.left+A.right+i.left+i.right))/ve.x,Pe=(b.height-(A.top+A.bottom+i.top+i.bottom))/ve.y;if(Pe<0||Ee<0)return void ga();const Te=Math.min(c.at(b.scale*Math.min(Ee,Pe)),S.maxZoom),ke=c.P.convert(S.offset),Ne=new c.P((i.left-i.right)/2,(i.top-i.bottom)/2).rotate(c.ap(y)),ze=ke.add(Ne).mult(b.scale/c.aq(Te));return{center:Sn(b.worldSize,M.add(N).div(2).sub(ze)),zoom:Te,bearing:y}}class Zn{get useGlobeControls(){return!1}handlePanInertia(i,h){const y=i.mag(),b=Math.abs(pi(h));return{easingOffset:i.mult(Math.min(.75*b/y,1)),easingCenter:h.center}}handleMapControlsRollPitchBearingZoom(i,h){i.bearingDelta&&h.setBearing(h.bearing+i.bearingDelta),i.pitchDelta&&h.setPitch(h.pitch+i.pitchDelta),i.rollDelta&&h.setRoll(h.roll+i.rollDelta),i.zoomDelta&&h.setZoom(h.zoom+i.zoomDelta)}handleMapControlsPan(i,h,y){i.around.distSqr(h.centerPoint)<.01||h.setLocationAtPoint(y,i.around)}cameraForBoxAndBearing(i,h,y,b,A){return Sl(i,h,y,b,A)}handleJumpToCenterZoom(i,h){i.zoom!==(h.zoom!==void 0?+h.zoom:i.zoom)&&i.setZoom(+h.zoom),h.center!==void 0&&i.setCenter(c.V.convert(h.center))}handleEaseTo(i,h){const y=i.zoom,b=i.padding,A={roll:i.roll,pitch:i.pitch,bearing:i.bearing},M={roll:h.roll===void 0?i.roll:h.roll,pitch:h.pitch===void 0?i.pitch:h.pitch,bearing:h.bearing===void 0?i.bearing:h.bearing},D=h.zoom!==void 0,N=!i.isPaddingEqual(h.padding);let F=!1;const q=D?+h.zoom:i.zoom;let Y=i.centerPoint.add(h.offsetAsPoint);const W=i.screenPointToLocation(Y),{center:ie,zoom:le}=i.applyConstrain(c.V.convert(h.center||W),q??y);Qa(i,ie);const _e=an(i.worldSize,W),be=an(i.worldSize,ie).sub(_e),ve=c.aq(le-y);return F=le!==y,{easeFunc:Ee=>{if(F&&i.setZoom(c.G.number(y,le,Ee)),c.bo(A,M)||Tu({startEulerAngles:A,endEulerAngles:M,tr:i,k:Ee,useSlerp:A.roll!=M.roll}),N&&(i.interpolatePadding(b,h.padding,Ee),Y=i.centerPoint.add(h.offsetAsPoint)),h.around)i.setLocationAtPoint(h.around,h.aroundPoint);else{const Pe=c.aq(i.zoom-y),Te=le>y?Math.min(2,ve):Math.max(.5,ve),ke=Math.pow(Te,1-Ee),Ne=Sn(i.worldSize,_e.add(be.mult(Ee*ke)).mult(Pe));i.setLocationAtPoint(i.renderWorldCopies?Ne.wrap():Ne,Y)}},isZooming:F,elevationCenter:ie}}handleFlyTo(i,h){const y=h.zoom!==void 0,b=i.zoom,A=i.applyConstrain(c.V.convert(h.center||h.locationAtOffset),y?+h.zoom:b),M=A.center,D=A.zoom;Qa(i,M);const N=an(i.worldSize,h.locationAtOffset),F=an(i.worldSize,M).sub(N),q=F.mag(),Y=c.aq(D-b);let W;if(h.minZoom!==void 0){const ie=Math.min(+h.minZoom,b,D),le=i.applyConstrain(M,ie).zoom;W=c.aq(le-b)}return{easeFunc:(ie,le,_e,be)=>{i.setZoom(ie===1?D:b+c.at(le));const ve=ie===1?M:Sn(i.worldSize,N.add(F.mult(_e)).mult(le));i.setLocationAtPoint(i.renderWorldCopies?ve.wrap():ve,be)},scaleOfZoom:Y,targetCenter:M,scaleOfMinZoom:W,pixelPathLength:q}}}class zi{constructor(i,h,y){this.blendFunction=i,this.blendColor=h,this.mask=y}}zi.Replace=[1,0],zi.disabled=new zi(zi.Replace,c.bp.transparent,[!1,!1,!1,!1]),zi.unblended=new zi(zi.Replace,c.bp.transparent,[!0,!0,!0,!0]),zi.alphaBlended=new zi([1,771],c.bp.transparent,[!0,!0,!0,!0]);const ia=2305;class $n{constructor(i,h,y){this.enable=i,this.mode=h,this.frontFace=y}}$n.disabled=new $n(!1,1029,ia),$n.backCCW=new $n(!0,1029,ia),$n.frontCCW=new $n(!0,1028,ia);class kn{constructor(i,h,y){this.func=i,this.mask=h,this.range=y}}kn.ReadOnly=!1,kn.ReadWrite=!0,kn.disabled=new kn(519,kn.ReadOnly,[0,1]);const ic=7680;class Kn{constructor(i,h,y,b,A,M){this.test=i,this.ref=h,this.mask=y,this.fail=b,this.depthFail=A,this.pass=M}}Kn.disabled=new Kn({func:519,mask:0},0,0,ic,ic,ic);const Eu=new WeakMap;function bo(S){var i;if(Eu.has(S))return Eu.get(S);{const h=(i=S.getParameter(S.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Eu.set(S,h),h}}class Tl{get awaitingQuery(){return!!this._readbackQueue}constructor(i){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=i;const h=i.context,y=h.gl;this._texFormat=y.RGBA,this._texType=y.UNSIGNED_BYTE;const b=new c.aW;b.emplaceBack(-1,-1),b.emplaceBack(2,-1),b.emplaceBack(-1,2);const A=new c.aY;A.emplaceBack(0,1,2),this._fullscreenTriangle=new Mi(h.createVertexBuffer(b,Ja.members),h.createIndexBuffer(A),c.aX.simpleSegment(0,0,b.length,A.length)),this._resultBuffer=new Uint8Array(4),h.activeTexture.set(y.TEXTURE1);const M=y.createTexture();y.bindTexture(y.TEXTURE_2D,M),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texImage2D(y.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=h.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),bo(y)&&(this._pbo=y.createBuffer(),y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.bufferData(y.PIXEL_PACK_BUFFER,4,y.STREAM_READ),y.bindBuffer(y.PIXEL_PACK_BUFFER,null))}destroy(){const i=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),i.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(i,h){const y=this._updateCount;return this._readbackQueue?y>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():y>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(i,h),this._updateCount++,this._measuredError}_bindFramebuffer(){const i=this._cachedRenderContext.context,h=i.gl;i.activeTexture.set(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,this._fbo.colorAttachment.get()),i.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(i,h){const y=this._cachedRenderContext.context,b=y.gl;if(this._bindFramebuffer(),y.viewport.set([0,0,this._texWidth,this._texHeight]),y.clear({color:c.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(y,b.TRIANGLES,kn.disabled,Kn.disabled,zi.unblended,$n.disabled,((A,M)=>({u_input:A,u_output_expected:M}))(i,h),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&bo(b)){b.bindBuffer(b.PIXEL_PACK_BUFFER,this._pbo),b.readBuffer(b.COLOR_ATTACHMENT0),b.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),b.bindBuffer(b.PIXEL_PACK_BUFFER,null);const A=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);b.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:A}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const i=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&bo(i)){const h=i.clientWaitSync(this._readbackQueue.sync,0,0);if(h===i.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(h===i.TIMEOUT_EXPIRED)return;i.bindBuffer(i.PIXEL_PACK_BUFFER,this._pbo),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),i.bindBuffer(i.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),i.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Tl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(i){let h=0;return h+=i[0]/256,h+=i[1]/65536,h+=i[2]/16777216,i[3]<127&&(h=-h),h/128}}const El=c.a5/128;function Eh(S,i){const h=S.granularity!==void 0?Math.max(S.granularity,1):1,y=h+(S.generateBorders?2:0),b=h+(S.extendToNorthPole||S.generateBorders?1:0)+(S.extendToSouthPole||S.generateBorders?1:0),A=y+1,M=b+1,D=S.generateBorders?-1:0,N=S.generateBorders||S.extendToNorthPole?-1:0,F=h+(S.generateBorders?1:0),q=h+(S.generateBorders||S.extendToSouthPole?1:0),Y=A*M,W=y*b*6,ie=A*M>65536;if(ie&&i==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const le=ie||i==="32bit",_e=new Int16Array(2*Y);let be=0;for(let Pe=N;Pe<=q;Pe++)for(let Te=D;Te<=F;Te++){let ke=Te/h*c.a5;Te===-1&&(ke=-El),Te===h+1&&(ke=c.a5+El);let Ne=Pe/h*c.a5;Pe===-1&&(Ne=S.extendToNorthPole?c.br:-El),Pe===h+1&&(Ne=S.extendToSouthPole?c.bs:c.a5+El),_e[be++]=ke,_e[be++]=Ne}const ve=le?new Uint32Array(W):new Uint16Array(W);let Ee=0;for(let Pe=0;Pe<b;Pe++)for(let Te=0;Te<y;Te++){const ke=Te+1+Pe*A,Ne=Te+(Pe+1)*A,ze=Te+1+(Pe+1)*A;ve[Ee++]=Te+Pe*A,ve[Ee++]=Ne,ve[Ee++]=ke,ve[Ee++]=ke,ve[Ee++]=Ne,ve[Ee++]=ze}return{vertices:_e.buffer.slice(0),indices:ve.buffer.slice(0),uses32bitIndices:le}}const Au=new c.aV({fill:new c.bt(128,2),line:new c.bt(512,0),tile:new c.bt(128,32),stencil:new c.bt(128,1),circle:3});class Io{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return li.projectionGlobe}get vertexShaderPreludeCode(){return li.projectionMercator.vertexSource}get subdivisionGranularity(){return Au}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(i){this._errorMeasurement||(this._errorMeasurement=new Tl(i));const h=c.X(this._errorQueryLatitudeDegrees),y=2*Math.atan(Math.exp(Math.PI-h*Math.PI*2))-.5*Math.PI,b=this._errorMeasurement.updateErrorLoop(h,y),A=ee();b!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=b,this._errorMeasurementLastChangeTime=A);const M=Math.min(Math.max((A-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.bv(M))}_getMeshKey(i){return`${i.granularity.toString(36)}_${i.generateBorders?"b":""}${i.extendToNorthPole?"n":""}${i.extendToSouthPole?"s":""}`}getMeshFromTileID(i,h,y,b,A){const M=(A==="stencil"?Au.stencil:Au.tile).getGranularityForZoomLevel(h.z);return this._getMesh(i,{granularity:M,generateBorders:y,extendToNorthPole:h.y===0&&b,extendToSouthPole:h.y===(1<<h.z)-1&&b})}_getMesh(i,h){const y=this._getMeshKey(h);if(y in this._tileMeshCache)return this._tileMeshCache[y];const b=(function(A,M){const D=Eh(M,"16bit"),N=c.aW.deserialize({arrayBuffer:D.vertices,length:D.vertices.byteLength/2/2}),F=c.aY.deserialize({arrayBuffer:D.indices,length:D.indices.byteLength/2/3});return new Mi(A.createVertexBuffer(N,Ja.members),A.createIndexBuffer(F),c.aX.simpleSegment(0,0,N.length,F.length))})(i,h);return this._tileMeshCache[y]=b,b}recalculate(i){}hasTransition(){const i=ee();let h=!1;return h=h||(i-this._errorMeasurementLastChangeTime)/1e3<.7,h=h||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,h}setErrorQueryLatitudeDegrees(i){this._errorQueryLatitudeDegrees=i}}const mp=new c.t({type:new c.D(c.u.projection.type)});class Ah extends c.E{constructor(i){super(),this._transitionable=new c.x(mp,void 0),this.setProjection(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0)),this._mercatorProjection=new Qi,this._verticalPerspectiveProjection=new Io}get transitionState(){const i=this.properties.get("type");if(typeof i=="string"&&i==="mercator")return 0;if(typeof i=="string"&&i==="vertical-perspective")return 1;if(i instanceof c.bw){if(i.from==="vertical-perspective"&&i.to==="mercator")return 1-i.transition;if(i.from==="mercator"&&i.to==="vertical-perspective")return i.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(i){this._mercatorProjection.updateGPUdependent(i),this._verticalPerspectiveProjection.updateGPUdependent(i)}getMeshFromTileID(i,h,y,b,A){return this.currentProjection.getMeshFromTileID(i,h,y,b,A)}setProjection(i){this._transitionable.setValue("type",i?.type||"mercator")}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}setErrorQueryLatitudeDegrees(i){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(i),this._mercatorProjection.setErrorQueryLatitudeDegrees(i)}}function xr(S){const i=Gs(S.worldSize,S.center.lat);return 2*Math.PI*i}function Xo(S,i,h,y,b){const A=1/(1<<b),M=i/c.a5*A+y*A,D=c.by((S/c.a5*A+h*A)*Math.PI*2+Math.PI,2*Math.PI),N=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,F=Math.cos(N),q=new Float64Array(3);return q[0]=Math.sin(D)*F,q[1]=Math.sin(N),q[2]=Math.cos(D)*F,q}function Yi(S){return(function(i,h){const y=Math.cos(h),b=new Float64Array(3);return b[0]=Math.sin(i)*y,b[1]=Math.sin(h),b[2]=Math.cos(i)*y,b})(S.lng*Math.PI/180,S.lat*Math.PI/180)}function Gs(S,i){return S/(2*Math.PI)/Math.cos(i*Math.PI/180)}function Cu(S){const i=Math.asin(S[1])/Math.PI*180,h=Math.sqrt(S[0]*S[0]+S[2]*S[2]);if(h>1e-6){const y=S[0]/h,b=Math.acos(S[2]/h),A=(y>0?b:-b)/Math.PI*180;return new c.V(c.W(A,-180,180),i)}return new c.V(0,i)}function Wc(S){return Math.cos(S*Math.PI/180)}function rr(S,i){const h=Wc(S),y=Wc(i);return c.at(y/h)}function sf(S,i){const h=S.rotate(i.bearingInRadians),y=i.zoom+rr(i.center.lat,0),b=c.bu(1/Wc(i.center.lat),1/Wc(Math.min(Math.abs(i.center.lat),60)),c.bx(y,7,3,0,1)),A=360/xr({worldSize:i.worldSize,center:{lat:i.center.lat}});return new c.V(i.center.lng-h.x*A*b,c.an(i.center.lat+h.y*A,-c.ao,c.ao))}function Ch(S){const i=.5*S,h=Math.sin(i),y=Math.cos(i);return Math.log(h+y)-Math.log(y-h)}function Mh(S,i,h,y){const b=S.lat+h*y;if(Math.abs(h)>1){const A=(Math.sign(S.lat+h)!==Math.sign(S.lat)?-Math.abs(S.lat):Math.abs(S.lat))*Math.PI/180,M=Math.abs(S.lat+h)*Math.PI/180,D=Ch(A+y*(M-A)),N=Ch(A),F=Ch(M);return new c.V(S.lng+i*((D-N)/(F-N)),b)}return new c.V(S.lng+i*y,b)}class gp{constructor(i){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=i}swapBuffers(){if(!this._hadAnyChanges)return;const i=this._cachePrevious;this._cachePrevious=this._cache,this._cache=i,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(i,h,y,b){const A=`${i.z}_${i.x}_${i.y}_${b?.terrain?"t":""}`,M=this._cache.get(A);if(M)return M;const D=this._cachePrevious.get(A);if(D)return this._cache.set(A,D),D;const N=this._boundingVolumeFactory(i,h,y,b);return this._cache.set(A,N),this._hadAnyChanges=!0,N}}class rc{constructor(i,h,y,b){this.min=y,this.max=b,this.points=i,this.planes=h}static fromAabb(i,h){const y=[];for(let b=0;b<8;b++)y.push([1&~b?i[0]:h[0],(b>>1&1)==1?h[1]:i[1],(b>>2&1)==1?h[2]:i[2]]);return new rc(y,[[-1,0,0,h[0]],[1,0,0,-i[0]],[0,-1,0,h[1]],[0,1,0,-i[1]],[0,0,-1,h[2]],[0,0,1,-i[2]]],i,h)}static fromCenterSizeAngles(i,h,y){const b=c.bB([],y[0],y[1],y[2]),A=c.bC([],[h[0],0,0],b),M=c.bC([],[0,h[1],0],b),D=c.bC([],[0,0,h[2]],b),N=[...i],F=[...i];for(let Y=0;Y<8;Y++)for(let W=0;W<3;W++){const ie=i[W]+A[W]*(1&~Y?-1:1)+M[W]*((Y>>1&1)==1?1:-1)+D[W]*((Y>>2&1)==1?1:-1);N[W]=Math.min(N[W],ie),F[W]=Math.max(F[W],ie)}const q=[];for(let Y=0;Y<8;Y++){const W=[...i];c.b0(W,W,c.a$([],A,1&~Y?-1:1)),c.b0(W,W,c.a$([],M,(Y>>1&1)==1?1:-1)),c.b0(W,W,c.a$([],D,(Y>>2&1)==1?1:-1)),q.push(W)}return new rc(q,[[...A,-c.b5(A,q[0])],[...M,-c.b5(M,q[0])],[...D,-c.b5(D,q[0])],[-A[0],-A[1],-A[2],-c.b5(A,q[7])],[-M[0],-M[1],-M[2],-c.b5(M,q[7])],[-D[0],-D[1],-D[2],-c.b5(D,q[7])]],N,F)}intersectsFrustum(i){let h=!0;const y=this.points.length,b=this.planes.length,A=i.planes.length,M=i.points.length;for(let D=0;D<A;D++){const N=i.planes[D];let F=0;for(let q=0;q<y;q++){const Y=this.points[q];N[0]*Y[0]+N[1]*Y[1]+N[2]*Y[2]+N[3]>=0&&F++}if(F===0)return 0;F<y&&(h=!1)}if(h)return 2;for(let D=0;D<b;D++){const N=this.planes[D];let F=0;for(let q=0;q<M;q++){const Y=i.points[q];N[0]*Y[0]+N[1]*Y[1]+N[2]*Y[2]+N[3]>=0&&F++}if(F===0)return 0}return 1}intersectsPlane(i){const h=this.points.length;let y=0;for(let b=0;b<h;b++){const A=this.points[b];i[0]*A[0]+i[1]*A[1]+i[2]*A[2]+i[3]>=0&&y++}return y===h?2:y===0?0:1}}function Mu(S,i,h){const y=S-i;return y<0?-y:Math.max(0,y-h)}function Hs(S,i,h,y,b){const A=S-h;let M;return M=A<0?Math.min(-A,1+A-b):A>1?Math.min(Math.max(A-b,0),1-A):0,Math.max(M,Mu(i,y,b))}class Ws{constructor(){this._boundingVolumeCache=new gp(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(i,h,y,b){const A=1<<y.z,M=1/A,D=y.x/A,N=y.y/A;let F=2;return F=Math.min(F,Hs(i,h,D,N,M)),F=Math.min(F,Hs(i,h,D+.5,-N-M,M)),F=Math.min(F,Hs(i,h,D+.5,2-N-M,M)),F}getWrap(i,h,y){const b=1<<h.z,A=1/b,M=h.x/b,D=Mu(i.x,M,A),N=Mu(i.x,M-1,A),F=Mu(i.x,M+1,A),q=Math.min(D,N,F);return q===F?1:q===N?-1:0}allowVariableZoom(i,h){return xi(i,h)>4}allowWorldCopies(){return!1}getTileBoundingVolume(i,h,y,b){return this._boundingVolumeCache.getTileBoundingVolume(i,h,y,b)}_computeTileBoundingVolume(i,h,y,b){var A,M;let D=0,N=0;if(b?.terrain){const F=new c.a2(i.z,h,i.z,i.x,i.y),q=b.terrain.getMinMaxElevation(F);D=(A=q.minElevation)!==null&&A!==void 0?A:Math.min(0,y),N=(M=q.maxElevation)!==null&&M!==void 0?M:Math.max(0,y)}if(D/=c.bE,N/=c.bE,D+=1,N+=1,i.z<=0)return rc.fromAabb([-N,-N,-N],[N,N,N]);if(i.z===1)return rc.fromAabb([i.x===0?-N:0,i.y===0?0:-N,-N],[i.x===0?0:N,i.y===0?N:0,N]);{const F=[Xo(0,0,i.x,i.y,i.z),Xo(c.a5,0,i.x,i.y,i.z),Xo(c.a5,c.a5,i.x,i.y,i.z),Xo(0,c.a5,i.x,i.y,i.z)],q=[];for(const rt of F)q.push(c.a$([],rt,N));if(N!==D)for(const rt of F)q.push(c.a$([],rt,D));i.y===0&&q.push([0,1,0]),i.y===(1<<i.z)-1&&q.push([0,-1,0]);const Y=[1,1,1],W=[-1,-1,-1];for(const rt of q)for(let at=0;at<3;at++)Y[at]=Math.min(Y[at],rt[at]),W[at]=Math.max(W[at],rt[at]);const ie=Xo(c.a5/2,c.a5/2,i.x,i.y,i.z),le=c.b4([],[0,1,0],ie);c.b3(le,le);const _e=c.b4([],ie,le);c.b3(_e,_e);const be=c.b4([],F[2],F[1]);c.b3(be,be);const ve=c.b4([],F[0],F[3]);c.b3(ve,ve),q.push(c.a$([],ie,N)),i.y>=(1<<i.z)/2&&q.push(c.a$([],Xo(c.a5/2,0,i.x,i.y,i.z),N)),i.y<(1<<i.z)/2&&q.push(c.a$([],Xo(c.a5/2,c.a5,i.x,i.y,i.z),N));const Ee=zu(ie,q),Pe=zu(_e,q),Te=[-ie[0],-ie[1],-ie[2],Ee.max],ke=[ie[0],ie[1],ie[2],-Ee.min],Ne=[-_e[0],-_e[1],-_e[2],Pe.max],ze=[_e[0],_e[1],_e[2],-Pe.min],Ve=[...be,0],st=[...ve,0],Je=[];return i.y===0?Je.push(c.bD(st,Ve,Te),c.bD(st,Ve,ke)):Je.push(c.bD(Ne,Ve,Te),c.bD(Ne,Ve,ke),c.bD(Ne,st,Te),c.bD(Ne,st,ke)),i.y===(1<<i.z)-1?Je.push(c.bD(st,Ve,Te),c.bD(st,Ve,ke)):Je.push(c.bD(ze,Ve,Te),c.bD(ze,Ve,ke),c.bD(ze,st,Te),c.bD(ze,st,ke)),new rc(Je,[Te,ke,Ne,ze,Ve,st],Y,W)}}}function zu(S,i){let h=1/0,y=-1/0;for(const b of i){const A=c.b5(S,b);h=Math.min(h,A),y=Math.max(y,A)}return{min:h,max:y}}class _s{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,h,y){return this._helper.interpolatePadding(i,h,y)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,h){this._helper.resize(i,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}setConstrainOverride(i){this._helper.setConstrainOverride(i)}overrideNearFarZ(i,h){this._helper.overrideNearFarZ(i,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i){}constructor(i){this._cachedClippingPlane=c.bF(),this._projectionMatrix=c.bj(),this._globeViewProjMatrix32f=c.bi(),this._globeViewProjMatrixNoCorrection=c.bj(),this._globeViewProjMatrixNoCorrectionInverted=c.bj(),this._globeProjMatrixInverted=c.bj(),this._cameraPosition=c.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(h,y)=>{const b=c.an(h.lat,-c.ao,c.ao),A=c.an(+y,this.minZoom+rr(0,b),this.maxZoom);return{center:new c.V(h.lng,b),zoom:A}},this.applyConstrain=(h,y)=>this._helper.applyConstrain(h,y),this._helper=new eo({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(h,y)=>this.defaultConstrain(h,y)},i),this._coveringTilesDetailsProvider=new Ws}clone(){const i=new _s;return i.apply(this,!1),i}apply(i,h,y){this._globeLatitudeErrorCorrectionRadians=y||0,this._helper.apply(i,h)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const i=c.bz();return i[0]=this._cameraPosition[0],i[1]=this._cameraPosition[1],i[2]=this._cameraPosition[2],i}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(i){const{overscaledTileID:h,applyGlobeMatrix:y}=i,b=this._helper.getMercatorTileCoordinates(h);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:b,clippingPlane:this._cachedClippingPlane,projectionTransition:y?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(i){const h=this.pitchInRadians,y=this.cameraToCenterDistance/i,b=Math.sin(h)*y,A=Math.cos(h)*y+1,M=1/Math.sqrt(b*b+A*A)*1;let D=-b,N=A;const F=Math.sqrt(D*D+N*N);D/=F,N/=F;const q=[0,D,N];c.bG(q,q,[0,0,0],-this.bearingInRadians),c.bH(q,q,[0,0,0],-1*this.center.lat*Math.PI/180),c.bI(q,q,[0,0,0],this.center.lng*Math.PI/180);const Y=1/c.b7(q);return c.a$(q,q,Y),[...q,-M*Y]}isLocationOccluded(i){return!this.isSurfacePointVisible(Yi(i))}transformLightDirection(i){const h=this._helper._center.lng*Math.PI/180,y=this._helper._center.lat*Math.PI/180,b=Math.cos(y),A=[Math.sin(h)*b,Math.sin(y),Math.cos(h)*b],M=[A[2],0,-A[0]],D=[0,0,0];c.b4(D,M,A),c.b3(M,M),c.b3(D,D);const N=[0,0,0];return c.b3(N,[M[0]*i[0]+D[0]*i[1]+A[0]*i[2],M[1]*i[0]+D[1]*i[1]+A[1]*i[2],M[2]*i[0]+D[2]*i[1]+A[2]*i[2]]),N}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(i,h,y){const b=(function(D,N,F){const q=1/(1<<F.z);return new c.a9(D/c.a5*q+F.x*q,N/c.a5*q+F.y*q)})(i,h,y.canonical),A=(M=b.y,[c.by(b.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(A[1])}projectTileCoordinates(i,h,y,b){const A=y.canonical,M=Xo(i,h,A.x,A.y,A.z),D=1+(b?b(i,h):0)/c.bE,N=[M[0]*D,M[1]*D,M[2]*D,1];c.aH(N,N,this._globeViewProjMatrixNoCorrection);const F=this._cachedClippingPlane,q=F[0]*M[0]+F[1]*M[1]+F[2]*M[2]+F[3]<0;return{point:new c.P(N[0]/N[3],N[1]/N[3]),signedDistanceFromCamera:N[3],isOccluded:q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const i=Gs(this.worldSize,this.center.lat),h=c.bk(),y=c.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*i),c.be(h,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const b=this.centerOffset;h[8]=2*-b.x/this._helper._width,h[9]=2*b.y/this._helper._height,this._projectionMatrix=c.bf(h),this._globeProjMatrixInverted=c.bk(),c.aB(this._globeProjMatrixInverted,h),c.O(h,h,[0,0,-this.cameraToCenterDistance]),c.bg(h,h,this.rollInRadians),c.bh(h,h,-this.pitchInRadians),c.bg(h,h,this.bearingInRadians),c.O(h,h,[0,0,-i]);const A=c.bz();A[0]=i,A[1]=i,A[2]=i,c.bh(y,h,this.center.lat*Math.PI/180),c.bJ(y,y,-this.center.lng*Math.PI/180),c.Q(y,y,A),this._globeViewProjMatrixNoCorrection=y,c.bh(h,h,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bJ(h,h,-this.center.lng*Math.PI/180),c.Q(h,h,A),this._globeViewProjMatrix32f=new Float32Array(h),this._globeViewProjMatrixNoCorrectionInverted=c.bk(),c.aB(this._globeViewProjMatrixNoCorrectionInverted,y);const M=c.bz();this._cameraPosition=c.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/i,c.bG(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),c.bH(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),c.bG(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),c.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bH(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),c.bI(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(i);const D=c.bf(this._globeViewProjMatrixNoCorrectionInverted);c.Q(D,D,[1,1,-1]),this._cachedFrustum=Fa.fromInvProjectionMatrix(D,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(i){c.w("calculateFogMatrix is not supported on globe projection.");const h=c.bk();return c.ar(h),h}getVisibleUnwrappedCoordinates(i){return[new c.bc(0,i)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){i&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,h){if(!this._globeViewProjMatrixNoCorrection)return 1;const y=Yi(i);c.a$(y,y,1+h/c.bE);const b=c.bF();return c.aH(b,[y[0],y[1],y[2],1],this._globeViewProjMatrixNoCorrection),b[2]/b[3]}populateCache(i){}getBounds(){const i=.5*this.width,h=.5*this.height,y=[new c.P(0,0),new c.P(i,0),new c.P(this.width,0),new c.P(this.width,h),new c.P(this.width,this.height),new c.P(i,this.height),new c.P(0,this.height),new c.P(0,h)],b=[];for(const Y of y)b.push(this.unprojectScreenPoint(Y));let A=0,M=0,D=0,N=0;const F=this.center;for(const Y of b){const W=c.bK(F.lng,Y.lng),ie=c.bK(F.lat,Y.lat);W<M&&(M=W),W>A&&(A=W),ie<N&&(N=ie),ie>D&&(D=ie)}const q=[F.lng+M,F.lat+N,F.lng+A,F.lat+D];return this.isSurfacePointOnScreen([0,1,0])&&(q[3]=90,q[0]=-180,q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(q[1]=-90,q[0]=-180,q[2]=180),new Pi(q)}calculateCenterFromCameraLngLatAlt(i,h,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(i,h,y,b)}setLocationAtPoint(i,h){const y=Yi(this.unprojectScreenPoint(h)),b=Yi(i),A=c.bz();c.bL(A);const M=c.bz();c.bI(M,y,A,-this.center.lng*Math.PI/180),c.bH(M,M,A,this.center.lat*Math.PI/180);const D=b[0]*b[0]+b[2]*b[2],N=M[0]*M[0];if(D<N)return;const F=Math.sqrt(D-N),q=-F,Y=c.bM(b[0],b[2],M[0],F),W=c.bM(b[0],b[2],M[0],q),ie=c.bz();c.bI(ie,b,A,-Y);const le=c.bM(ie[1],ie[2],M[1],M[2]),_e=c.bz();c.bI(_e,b,A,-W);const be=c.bM(_e[1],_e[2],M[1],M[2]),ve=.5*Math.PI,Ee=le>=-ve&&le<=ve,Pe=be>=-ve&&be<=ve;let Te,ke;if(Ee&&Pe){const st=this.center.lng*Math.PI/180,Je=this.center.lat*Math.PI/180;c.bN(Y,st)+c.bN(le,Je)<c.bN(W,st)+c.bN(be,Je)?(Te=Y,ke=le):(Te=W,ke=be)}else if(Ee)Te=Y,ke=le;else{if(!Pe)return;Te=W,ke=be}const Ne=Te/Math.PI*180,ze=ke/Math.PI*180,Ve=this.center.lat;this.setCenter(new c.V(Ne,c.an(ze,-90,90))),this.setZoom(this.zoom+rr(Ve,this.center.lat))}locationToScreenPoint(i,h){const y=Yi(i);if(h){const b=h.getElevationForLngLatZoom(i,this._helper._tileZoom);c.a$(y,y,1+b/c.bE)}return this._projectSurfacePointToScreen(y)}_projectSurfacePointToScreen(i){const h=c.bF();return c.aH(h,[...i,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],new c.P((.5*h[0]+.5)*this.width,(.5*-h[1]+.5)*this.height)}screenPointToMercatorCoordinate(i,h){if(h){const y=h.pointCoordinate(i);if(y)return y}return c.a9.fromLngLat(this.unprojectScreenPoint(i))}screenPointToLocation(i,h){var y;return(y=this.screenPointToMercatorCoordinate(i,h))===null||y===void 0?void 0:y.toLngLat()}isPointOnMapSurface(i,h){const y=this._cameraPosition,b=this.getRayDirectionFromPixel(i);return!!this.rayPlanetIntersection(y,b)}getRayDirectionFromPixel(i){const h=c.bF();h[0]=i.x/this.width*2-1,h[1]=-1*(i.y/this.height*2-1),h[2]=1,h[3]=1,c.aH(h,h,this._globeViewProjMatrixNoCorrectionInverted),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3];const y=c.bz();y[0]=h[0]-this._cameraPosition[0],y[1]=h[1]-this._cameraPosition[1],y[2]=h[2]-this._cameraPosition[2];const b=c.bz();return c.b3(b,y),b}isSurfacePointVisible(i){const h=this._cachedClippingPlane;return h[0]*i[0]+h[1]*i[1]+h[2]*i[2]+h[3]>=0}isSurfacePointOnScreen(i){if(!this.isSurfacePointVisible(i))return!1;const h=c.bF();return c.aH(h,[...i,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3],h[0]>-1&&h[0]<1&&h[1]>-1&&h[1]<1&&h[2]>-1&&h[2]<1}rayPlanetIntersection(i,h){const y=c.b5(i,h),b=c.bz(),A=c.bz();c.a$(A,h,y),c.b2(b,i,A);const M=1-c.b5(b,b);if(M<0)return null;const D=c.b5(i,i)-1,N=-y+(y<0?1:-1)*Math.sqrt(M),F=D/N,q=N;return{tMin:Math.min(F,q),tMax:Math.max(F,q)}}unprojectScreenPoint(i){const h=this._cameraPosition,y=this.getRayDirectionFromPixel(i),b=this.rayPlanetIntersection(h,y);if(b){const q=c.bz();c.b0(q,h,[y[0]*b.tMin,y[1]*b.tMin,y[2]*b.tMin]);const Y=c.bz();return c.b3(Y,q),Cu(Y)}const A=this._cachedClippingPlane,M=A[0]*y[0]+A[1]*y[1]+A[2]*y[2],D=-c.bb(A,h)/M,N=c.bz();if(D>0)c.b0(N,h,[y[0]*D,y[1]*D,y[2]*D]);else{const q=c.bz();c.b0(q,h,[2*y[0],2*y[1],2*y[2]]);const Y=c.bb(this._cachedClippingPlane,q);c.b2(N,q,[this._cachedClippingPlane[0]*Y,this._cachedClippingPlane[1]*Y,this._cachedClippingPlane[2]*Y])}const F=(function(q){const Y=c.bz();return Y[0]=q[0]*-q[3],Y[1]=q[1]*-q[3],Y[2]=q[2]*-q[3],{center:Y,radius:Math.sqrt(1-q[3]*q[3])}})(A);return Cu((function(q,Y,W){const ie=c.bz();c.b2(ie,W,q);const le=c.bz();return c.bA(le,q,ie,Y/c.b9(ie)),le})(F.center,F.radius,N))}getMatrixForModel(i,h){const y=c.V.convert(i),b=1/c.bE,A=c.bj();return c.bJ(A,A,y.lng/180*Math.PI),c.bh(A,A,-y.lat/180*Math.PI),c.O(A,A,[0,0,1+h/c.bE]),c.bh(A,A,.5*Math.PI),c.Q(A,A,[b,b,b]),A}getProjectionDataForCustomLayer(i=!0){const h=this.getProjectionData({overscaledTileID:new c.a2(0,0,0,0,0),applyGlobeMatrix:i});return h.tileMercatorCoords=[0,0,1,1],h}getFastPathSimpleProjectionMatrix(i){}}class ya{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,h,y){return this._helper.interpolatePadding(i,h,y)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,h,y=!0){this._helper.resize(i,h,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}setConstrainOverride(i){this._helper.setConstrainOverride(i)}overrideNearFarZ(i,h){this._helper.overrideNearFarZ(i,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(i,h){this._globeness=i,this._globeLatitudeErrorCorrectionRadians=h,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(i){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(h,y)=>this.currentTransform.defaultConstrain(h,y),this.applyConstrain=(h,y)=>this._helper.applyConstrain(h,y),this._helper=new eo({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(h,y)=>this.defaultConstrain(h,y)},i),this._globeness=1,this._mercatorTransform=new Ir,this._verticalPerspectiveTransform=new _s}clone(){const i=new ya;return i._globeness=this._globeness,i._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,i.apply(this,!1),i}apply(i,h){this._helper.apply(i,h),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(i){const h=this._mercatorTransform.getProjectionData(i),y=this._verticalPerspectiveTransform.getProjectionData(i);return{mainMatrix:this.isGlobeRendering?y.mainMatrix:h.mainMatrix,clippingPlane:y.clippingPlane,tileMercatorCoords:y.tileMercatorCoords,projectionTransition:i.applyGlobeMatrix?this._globeness:0,fallbackMatrix:h.fallbackMatrix}}isLocationOccluded(i){return this.currentTransform.isLocationOccluded(i)}transformLightDirection(i){return this.currentTransform.transformLightDirection(i)}getPixelScale(){return c.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(i,h,y){const b=this._mercatorTransform.getPitchedTextCorrection(i,h,y),A=this._verticalPerspectiveTransform.getPitchedTextCorrection(i,h,y);return c.bu(b,A,this._globeness)}projectTileCoordinates(i,h,y,b){return this.currentTransform.projectTileCoordinates(i,h,y,b)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(i){return this.currentTransform.calculateFogMatrix(i)}getVisibleUnwrappedCoordinates(i){return this.currentTransform.getVisibleUnwrappedCoordinates(i)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(i){this._mercatorTransform.recalculateZoomAndCenter(i),this._verticalPerspectiveTransform.recalculateZoomAndCenter(i)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,h){return this.currentTransform.lngLatToCameraDepth(i,h)}populateCache(i){this._mercatorTransform.populateCache(i),this._verticalPerspectiveTransform.populateCache(i)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(i,h,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(i,h,y,b)}setLocationAtPoint(i,h){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(i,h),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(i,h),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(i,h){return this.currentTransform.locationToScreenPoint(i,h)}screenPointToMercatorCoordinate(i,h){return this.currentTransform.screenPointToMercatorCoordinate(i,h)}screenPointToLocation(i,h){return this.currentTransform.screenPointToLocation(i,h)}isPointOnMapSurface(i,h){return this.currentTransform.isPointOnMapSurface(i,h)}getRayDirectionFromPixel(i){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(i)}getMatrixForModel(i,h){return this.currentTransform.getMatrixForModel(i,h)}getProjectionDataForCustomLayer(i=!0){const h=this._mercatorTransform.getProjectionDataForCustomLayer(i);if(!this.isGlobeRendering)return h;const y=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(i);return y.fallbackMatrix=h.mainMatrix,y}getFastPathSimpleProjectionMatrix(i){return this.currentTransform.getFastPathSimpleProjectionMatrix(i)}}class pr{get useGlobeControls(){return!0}handlePanInertia(i,h){const y=sf(i,h);return Math.abs(y.lng-h.center.lng)>180&&(y.lng=h.center.lng+179.5*Math.sign(y.lng-h.center.lng)),{easingCenter:y,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(i,h){const y=i.around,b=h.screenPointToLocation(y);i.bearingDelta&&h.setBearing(h.bearing+i.bearingDelta),i.pitchDelta&&h.setPitch(h.pitch+i.pitchDelta),i.rollDelta&&h.setRoll(h.roll+i.rollDelta);const A=h.zoom;i.zoomDelta&&h.setZoom(h.zoom+i.zoomDelta);const M=h.zoom-A;if(M===0)return;const D=c.bK(h.center.lng,b.lng),N=D/(Math.abs(D/180)+1),F=c.bK(h.center.lat,b.lat),q=h.getRayDirectionFromPixel(y),Y=h.cameraPosition,W=-1*c.b5(Y,q),ie=c.bz();c.b0(ie,Y,[q[0]*W,q[1]*W,q[2]*W]);const le=c.b7(ie)-1,_e=Math.exp(.5*-Math.max(le-.3,0)),be=Gs(h.worldSize,h.center.lat)/Math.min(h.width,h.height),ve=c.bx(be,.9,.5,1,.25),Ee=(1-c.aq(-M))*Math.min(_e,ve),Pe=h.center.lat,Te=h.zoom,ke=new c.V(h.center.lng+N*Ee,c.an(h.center.lat+F*Ee,-c.ao,c.ao));h.setLocationAtPoint(b,y);const Ne=h.center,ze=c.bx(Math.abs(D),45,85,0,1),Ve=c.bx(be,.75,.35,0,1),st=Math.pow(Math.max(ze,Ve),.25),Je=c.bK(Ne.lng,ke.lng),rt=c.bK(Ne.lat,ke.lat);h.setCenter(new c.V(Ne.lng+Je*st,Ne.lat+rt*st).wrap()),h.setZoom(Te+rr(Pe,h.center.lat))}handleMapControlsPan(i,h,y){if(!i.panDelta)return;const b=h.center.lat,A=h.zoom;h.setCenter(sf(i.panDelta,h).wrap()),h.setZoom(A+rr(b,h.center.lat))}cameraForBoxAndBearing(i,h,y,b,A){const M=Sl(i,h,y,b,A),D=h.left/A.width*2-1,N=(A.width-h.right)/A.width*2-1,F=h.top/A.height*-2+1,q=(A.height-h.bottom)/A.height*-2+1,Y=c.bK(y.getWest(),y.getEast())<0,W=Y?y.getEast():y.getWest(),ie=Y?y.getWest():y.getEast(),le=Math.max(y.getNorth(),y.getSouth()),_e=Math.min(y.getNorth(),y.getSouth()),be=W+.5*c.bK(W,ie),ve=le+.5*c.bK(le,_e),Ee=A.clone();Ee.setCenter(M.center),Ee.setBearing(M.bearing),Ee.setPitch(0),Ee.setRoll(0),Ee.setZoom(M.zoom);const Pe=Ee.modelViewProjectionMatrix,Te=[Yi(y.getNorthWest()),Yi(y.getNorthEast()),Yi(y.getSouthWest()),Yi(y.getSouthEast()),Yi(new c.V(ie,ve)),Yi(new c.V(W,ve)),Yi(new c.V(be,le)),Yi(new c.V(be,_e))],ke=Yi(M.center);let Ne=Number.POSITIVE_INFINITY;for(const ze of Te)D<0&&(Ne=pr.getLesserNonNegativeNonNull(Ne,pr.solveVectorScale(ze,ke,Pe,"x",D))),N>0&&(Ne=pr.getLesserNonNegativeNonNull(Ne,pr.solveVectorScale(ze,ke,Pe,"x",N))),F>0&&(Ne=pr.getLesserNonNegativeNonNull(Ne,pr.solveVectorScale(ze,ke,Pe,"y",F))),q<0&&(Ne=pr.getLesserNonNegativeNonNull(Ne,pr.solveVectorScale(ze,ke,Pe,"y",q)));if(Number.isFinite(Ne)&&Ne!==0)return M.zoom=Ee.zoom+c.at(Ne),M;ga()}handleJumpToCenterZoom(i,h){const y=i.center.lat,b=i.applyConstrain(h.center?c.V.convert(h.center):i.center,i.zoom).center;i.setCenter(b.wrap());const A=h.zoom!==void 0?+h.zoom:i.zoom+rr(y,b.lat);i.zoom!==A&&i.setZoom(A)}handleEaseTo(i,h){const y=i.zoom,b=i.center,A=i.padding,M={roll:i.roll,pitch:i.pitch,bearing:i.bearing},D={roll:h.roll===void 0?i.roll:h.roll,pitch:h.pitch===void 0?i.pitch:h.pitch,bearing:h.bearing===void 0?i.bearing:h.bearing},N=h.zoom!==void 0,F=!i.isPaddingEqual(h.padding);let q=!1;const Y=h.center?c.V.convert(h.center):b,W=i.applyConstrain(Y,y).center;Qa(i,W);const ie=i.clone();ie.setCenter(W),ie.setZoom(N?+h.zoom:y+rr(b.lat,Y.lat)),ie.setBearing(h.bearing);const le=new c.P(c.an(i.centerPoint.x+h.offsetAsPoint.x,0,i.width),c.an(i.centerPoint.y+h.offsetAsPoint.y,0,i.height));ie.setLocationAtPoint(W,le);const _e=(h.offset&&h.offsetAsPoint.mag())>0?ie.center:W,be=N?+h.zoom:y+rr(b.lat,_e.lat),ve=y+rr(b.lat,0),Ee=be+rr(_e.lat,0),Pe=c.bK(b.lng,_e.lng),Te=c.bK(b.lat,_e.lat),ke=c.aq(Ee-ve);return q=be!==y,{easeFunc:Ne=>{if(c.bo(M,D)||Tu({startEulerAngles:M,endEulerAngles:D,tr:i,k:Ne,useSlerp:M.roll!=D.roll}),F&&i.interpolatePadding(A,h.padding,Ne),h.around)c.w("Easing around a point is not supported under globe projection."),i.setLocationAtPoint(h.around,h.aroundPoint);else{const ze=Ee>ve?Math.min(2,ke):Math.max(.5,ke),Ve=Math.pow(ze,1-Ne),st=Mh(b,Pe,Te,Ne*Ve);i.setCenter(st.wrap())}if(q){const ze=c.G.number(ve,Ee,Ne)+rr(0,i.center.lat);i.setZoom(ze)}},isZooming:q,elevationCenter:_e}}handleFlyTo(i,h){const y=h.zoom!==void 0,b=i.center,A=i.zoom,M=i.padding,D=!i.isPaddingEqual(h.padding),N=i.applyConstrain(c.V.convert(h.center||h.locationAtOffset),A).center,F=y?+h.zoom:i.zoom+rr(i.center.lat,N.lat),q=i.clone();q.setCenter(N),q.setZoom(F),q.setBearing(h.bearing);const Y=new c.P(c.an(i.centerPoint.x+h.offsetAsPoint.x,0,i.width),c.an(i.centerPoint.y+h.offsetAsPoint.y,0,i.height));q.setLocationAtPoint(N,Y);const W=q.center;Qa(i,W);const ie=(function(Te,ke,Ne){const ze=Yi(ke),Ve=Yi(Ne),st=c.b5(ze,Ve),Je=Math.acos(st),rt=xr(Te);return Je/(2*Math.PI)*rt})(i,b,W),le=A+rr(b.lat,0),_e=F+rr(W.lat,0),be=c.aq(_e-le);let ve;if(typeof h.minZoom=="number"){const Te=+h.minZoom+rr(W.lat,0),ke=Math.min(Te,le,_e)+rr(0,W.lat),Ne=i.applyConstrain(W,ke).zoom+rr(W.lat,0);ve=c.aq(Ne-le)}const Ee=c.bK(b.lng,W.lng),Pe=c.bK(b.lat,W.lat);return{easeFunc:(Te,ke,Ne,ze)=>{const Ve=Mh(b,Ee,Pe,Ne);D&&i.interpolatePadding(M,h.padding,Te);const st=Te===1?W:Ve;i.setCenter(st.wrap());const Je=le+c.at(ke);i.setZoom(Te===1?F:Je+rr(0,st.lat))},scaleOfZoom:be,targetCenter:W,scaleOfMinZoom:ve,pixelPathLength:ie}}static solveVectorScale(i,h,y,b,A){const M=b==="x"?[y[0],y[4],y[8],y[12]]:[y[1],y[5],y[9],y[13]],D=[y[3],y[7],y[11],y[15]],N=i[0]*M[0]+i[1]*M[1]+i[2]*M[2],F=i[0]*D[0]+i[1]*D[1]+i[2]*D[2],q=h[0]*M[0]+h[1]*M[1]+h[2]*M[2],Y=h[0]*D[0]+h[1]*D[1]+h[2]*D[2];return q+A*F===N+A*Y||D[3]*(N-q)+M[3]*(Y-F)+N*Y==q*F?null:(q+M[3]-A*Y-A*D[3])/(q-N-A*Y+A*F)}static getLesserNonNegativeNonNull(i,h){return h!==null&&h>=0&&h<i?h:i}}class ac{constructor(i){this._globe=i,this._mercatorCameraHelper=new Zn,this._verticalPerspectiveCameraHelper=new pr}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(i,h){return this.currentHelper.handlePanInertia(i,h)}handleMapControlsRollPitchBearingZoom(i,h){return this.currentHelper.handleMapControlsRollPitchBearingZoom(i,h)}handleMapControlsPan(i,h,y){this.currentHelper.handleMapControlsPan(i,h,y)}cameraForBoxAndBearing(i,h,y,b,A){return this.currentHelper.cameraForBoxAndBearing(i,h,y,b,A)}handleJumpToCenterZoom(i,h){this.currentHelper.handleJumpToCenterZoom(i,h)}handleEaseTo(i,h){return this.currentHelper.handleEaseTo(i,h)}handleFlyTo(i,h){return this.currentHelper.handleFlyTo(i,h)}}const Xc=(S,i)=>c.B(S,i&&i.filter((h=>h.identifier!=="source.canvas"))),Al=c.bO();class vs extends c.E{constructor(i,h={}){var y,b;super(),this._rtlPluginLoaded=()=>{for(const M in this.tileManagers){const D=this.tileManagers[M].getSource().type;D!=="vector"&&D!=="geojson"||this.tileManagers[M].reload()}},this.map=i,this.dispatcher=new Dn(Cn(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",((M,D)=>this.getGlyphs(M,D))),this.dispatcher.registerMessageHandler("GI",((M,D)=>this.getImages(M,D))),this.dispatcher.registerMessageHandler("GDA",((M,D)=>this.getDashes(M,D))),this.imageManager=new Zt,this.imageManager.setEventedParent(this);const A=((y=i._container)===null||y===void 0?void 0:y.lang)||typeof document<"u"&&((b=document.documentElement)===null||b===void 0?void 0:b.lang)||void 0;this.glyphManager=new mt(i._requestManager,h.localIdeographFontFamily,A),this.lineAtlas=new Mt(256,512),this.crossTileSymbolIndex=new Hr,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",c.bP()),He().on(Re,this._rtlPluginLoaded),this.on("data",(M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const D=this.tileManagers[M.sourceId];if(!D)return;const N=D.getSource();if(N&&N.vectorLayerIds)for(const F in this._layers){const q=this._layers[F];q.source===N.id&&this._validateLayer(q)}}))}_setInitialValues(){var i;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new c.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((i=this.crossTileSymbolIndex)===null||i===void 0?void 0:i.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(i,h){var y,b,A;this._checkLoaded();const M=h===null?(A=(b=(y=this.stylesheet.state)===null||y===void 0?void 0:y[i])===null||b===void 0?void 0:b.default)!==null&&A!==void 0?A:null:h;if(c.bR(M,this._globalState[i]))return this;this._globalState[i]=M,this._applyGlobalStateChanges([i])}getGlobalState(){return this._globalState}setGlobalState(i){this._checkLoaded();const h=[];for(const y in i)!c.bR(this._globalState[y],i[y].default)&&(h.push(y),this._globalState[y]=i[y].default);this._applyGlobalStateChanges(h)}_applyGlobalStateChanges(i){if(i.length===0)return;const h=new Set,y={};for(const b of i){y[b]=this._globalState[b];for(const A in this._layers){const M=this._layers[A],D=M.getLayoutAffectingGlobalStateRefs(),N=M.getPaintAffectingGlobalStateRefs(),F=M.getVisibilityAffectingGlobalStateRefs();if(D.has(b)&&h.add(M.source),N.has(b))for(const{name:q,value:Y}of N.get(b))this._updatePaintProperty(M,q,Y);F?.has(b)&&(M.recalculateVisibility(),this._updateLayer(M))}}this.dispatcher.broadcast("UGS",y);for(const b in this.tileManagers)h.has(b)&&(this._reloadSource(b),this._changed=!0)}loadURL(i,h={},y){this.fire(new c.l("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const b=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const A=this._loadStyleRequest;c.j(b,this._loadStyleRequest).then((M=>{this._loadStyleRequest=null,this._load(M.data,h,y)})).catch((M=>{this._loadStyleRequest=null,M&&!A.signal.aborted&&this.fire(new c.k(M))}))}loadJSON(i,h={},y){this.fire(new c.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,J.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,h.validate=h.validate!==!1,this._load(i,h,y)})).catch((()=>{}))}loadEmpty(){this.fire(new c.l("dataloading",{dataType:"style"})),this._load(Al,{validate:!1})}_load(i,h,y){var b,A;let M=h.transformStyle?h.transformStyle(y,i):i;if(!h.validate||!Xc(this,c.C(M))){M=Object.assign({},M),this._loaded=!0,this.stylesheet=M;for(const D in M.sources)this.addSource(D,M.sources[D],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new jt(this.stylesheet.light),this._setProjectionInternal(((b=this.stylesheet.projection)===null||b===void 0?void 0:b.type)||"mercator"),this.sky=new pt(this.stylesheet.sky),this.map.setTerrain((A=this.stylesheet.terrain)!==null&&A!==void 0?A:null),this.fire(new c.l("data",{dataType:"style"})),this.fire(new c.l("style.load"))}}_createLayers(){var i,h,y;const b=c.bS(this.stylesheet.layers);this.setGlobalState((i=this.stylesheet.state)!==null&&i!==void 0?i:null),this.dispatcher.broadcast("SL",b),this._order=b.map((A=>A.id)),this._layers={},this._serializedLayers=null;for(const A of b){const M=c.bT(A,this._globalState);if(M.setEventedParent(this,{layer:{id:A.id}}),this._layers[A.id]=M,c.bU(M)&&this.tileManagers[M.source]){const D=(y=(h=A.paint)===null||h===void 0?void 0:h["raster-fade-duration"])!==null&&y!==void 0?y:M.paint.get("raster-fade-duration");this.tileManagers[M.source].setRasterFadeDuration(D)}}}_loadSprite(i,h=!1,y=void 0){this.imageManager.setLoaded(!1);const b=new AbortController;let A;this._spriteRequest=b,(function(M,D,N,F){return c._(this,void 0,void 0,(function*(){const q=Rt(M),Y=N>1?"@2x":"",W={},ie={};for(const{id:le,url:_e}of q){const be=D.transformRequest(Pt(_e,Y,".json"),"SpriteJSON");W[le]=c.j(be,F);const ve=D.transformRequest(Pt(_e,Y,".png"),"SpriteImage");ie[le]=Ue.getImage(ve,F)}return yield Promise.all([...Object.values(W),...Object.values(ie)]),(function(le,_e){return c._(this,void 0,void 0,(function*(){const be={};for(const ve in le){be[ve]={};const Ee=J.getImageCanvasContext((yield _e[ve]).data),Pe=(yield le[ve]).data;for(const Te in Pe){const{width:ke,height:Ne,x:ze,y:Ve,sdf:st,pixelRatio:Je,stretchX:rt,stretchY:at,content:Dt,textFitWidth:Ot,textFitHeight:wt}=Pe[Te];be[ve][Te]={data:null,pixelRatio:Je,sdf:st,stretchX:rt,stretchY:at,content:Dt,textFitWidth:Ot,textFitHeight:wt,spriteData:{width:ke,height:Ne,x:ze,y:Ve,context:Ee}}}}return be}))})(W,ie)}))})(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((M=>{if(this._spriteRequest=null,M)for(const D in M){this._spritesImagesIds[D]=[];const N=this._spritesImagesIds[D]?this._spritesImagesIds[D].filter((F=>!(F in M))):[];for(const F of N)this.imageManager.removeImage(F),this._changedImages[F]=!0;for(const F in M[D]){const q=D==="default"?F:`${D}:${F}`;this._spritesImagesIds[D].push(q),q in this.imageManager.images?this.imageManager.updateImage(q,M[D][F],!1):this.imageManager.addImage(q,M[D][F]),h&&(this._changedImages[q]=!0)}}})).catch((M=>{this._spriteRequest=null,A=M,b.signal.aborted||this.fire(new c.k(A))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"})),y&&y(A)}))}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}_validateLayer(i){const h=this.tileManagers[i.source];if(!h)return;const y=i.sourceLayer;if(!y)return;const b=h.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(y)===-1)&&this.fire(new c.k(new Error(`Source layer "${y}" does not exist on source "${b.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.tileManagers)if(!this.tileManagers[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,h=!1){const y=this._serializedAllLayers();if(!i||i.length===0)return Object.values(h?c.bV(y):y);const b=[];for(const A of i)if(y[A]){const M=h?c.bV(y[A]):y[A];b.push(M)}return b}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const h=Object.keys(this._layers);for(const y of h){const b=this._layers[y];b.type!=="custom"&&(i[y]=b.serialize())}return i}hasTransitions(){var i,h,y;if(!((i=this.light)===null||i===void 0)&&i.hasTransition()||!((h=this.sky)===null||h===void 0)&&h.hasTransition()||!((y=this.projection)===null||y===void 0)&&y.hasTransition())return!0;for(const b in this.tileManagers)if(this.tileManagers[b].hasTransition())return!0;for(const b in this._layers)if(this._layers[b].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const h=this._changed;if(h){const b=Object.keys(this._updatedLayers),A=Object.keys(this._removedLayers);(b.length||A.length)&&this._updateWorkerLayers(b,A);for(const M in this._updatedSources){const D=this._updatedSources[M];if(D==="reload")this._reloadSource(M);else{if(D!=="clear")throw new Error(`Invalid action ${D}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const y={};for(const b in this.tileManagers){const A=this.tileManagers[b];y[b]=A.used,A.used=!1}for(const b of this._order){const A=this._layers[b];A.recalculate(i,this._availableImages),!A.isHidden(i.zoom)&&A.source&&(this.tileManagers[A.source].used=!0)}for(const b in y){const A=this.tileManagers[b];!!y[b]!=!!A.used&&A.fire(new c.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(i),this.sky.recalculate(i),this.projection.recalculate(i),this.z=i.zoom,h&&this.fire(new c.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const h in this.tileManagers)this.tileManagers[h].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.tileManagers)this.tileManagers[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,h){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,h={}){var y;this._checkLoaded();const b=this.serialize();if(i=h.transformStyle?h.transformStyle(b,i):i,((y=h.validate)===null||y===void 0||y)&&Xc(this,c.C(i)))return!1;(i=c.bV(i)).layers=c.bS(i.layers);const A=c.bW(b,i),M=this._getOperationsToPerform(A);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(const D of M.operations)D();return this.stylesheet=i,this._serializedLayers=null,this.fire(new c.l("style.load",{style:this})),!0}_getOperationsToPerform(i){const h=[],y=[];for(const b of i)switch(b.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":h.push((()=>this.addLayer.apply(this,b.args)));break;case"removeLayer":h.push((()=>this.removeLayer.apply(this,b.args)));break;case"setPaintProperty":h.push((()=>this.setPaintProperty.apply(this,b.args)));break;case"setLayoutProperty":h.push((()=>this.setLayoutProperty.apply(this,b.args)));break;case"setFilter":h.push((()=>this.setFilter.apply(this,b.args)));break;case"addSource":h.push((()=>this.addSource.apply(this,b.args)));break;case"removeSource":h.push((()=>this.removeSource.apply(this,b.args)));break;case"setLayerZoomRange":h.push((()=>this.setLayerZoomRange.apply(this,b.args)));break;case"setLight":h.push((()=>this.setLight.apply(this,b.args)));break;case"setGeoJSONSourceData":h.push((()=>this.setGeoJSONSourceData.apply(this,b.args)));break;case"setGlyphs":h.push((()=>this.setGlyphs.apply(this,b.args)));break;case"setSprite":h.push((()=>this.setSprite.apply(this,b.args)));break;case"setTerrain":h.push((()=>this.map.setTerrain.apply(this,b.args)));break;case"setSky":h.push((()=>this.setSky.apply(this,b.args)));break;case"setProjection":this.setProjection.apply(this,b.args);break;case"setGlobalState":h.push((()=>this.setGlobalState.apply(this,b.args)));break;case"setTransition":h.push((()=>{}));break;default:y.push(b.command)}return{operations:h,unimplemented:y}}addImage(i,h){if(this.getImage(i))return this.fire(new c.k(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,h),this._afterImageUpdated(i)}updateImage(i,h){this.imageManager.updateImage(i,h)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new c.k(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,h,y={}){if(this._checkLoaded(),this.tileManagers[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(c.C.source,`sources.${i}`,h,null,y))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const b=this.tileManagers[i]=new Li(i,h,this.dispatcher);b.style=this,b.setEventedParent(this,(()=>({isSourceLoaded:b.loaded(),source:b.serialize(),sourceId:i}))),b.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.tileManagers[i]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===i)return this.fire(new c.k(new Error(`Source "${i}" cannot be removed while layer "${y}" is using it.`)));const h=this.tileManagers[i];delete this.tileManagers[i],delete this._updatedSources[i],h.fire(new c.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,h){if(this._checkLoaded(),this.tileManagers[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const y=this.tileManagers[i].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(h),this._changed=!0}getSource(i){return this.tileManagers[i]&&this.tileManagers[i].getSource()}addLayer(i,h,y={}){this._checkLoaded();const b=i.id;if(this.getLayer(b))return void this.fire(new c.k(new Error(`Layer "${b}" already exists on this map.`)));let A;if(i.type==="custom"){if(Xc(this,c.bX(i)))return;A=c.bT(i,this._globalState)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(b,i.source),i=c.bV(i),i=c.e(i,{source:b})),this._validate(c.C.layer,`layers.${b}`,i,{arrayIndex:-1},y))return;A=c.bT(i,this._globalState),this._validateLayer(A),A.setEventedParent(this,{layer:{id:b}})}const M=h?this._order.indexOf(h):this._order.length;if(h&&M===-1)this.fire(new c.k(new Error(`Cannot add layer "${b}" before non-existing layer "${h}".`)));else{if(this._order.splice(M,0,b),this._layerOrderChanged=!0,this._layers[b]=A,this._removedLayers[b]&&A.source&&A.type!=="custom"){const D=this._removedLayers[b];delete this._removedLayers[b],D.type!==A.type?this._updatedSources[A.source]="clear":(this._updatedSources[A.source]="reload",this.tileManagers[A.source].pause())}this._updateLayer(A),A.onAdd&&A.onAdd(this.map)}}moveLayer(i,h){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new c.k(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===h)return;const y=this._order.indexOf(i);this._order.splice(y,1);const b=h?this._order.indexOf(h):this._order.length;h&&b===-1?this.fire(new c.k(new Error(`Cannot move layer "${i}" before non-existing layer "${h}".`))):(this._order.splice(b,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const h=this._layers[i];if(!h)return void this.fire(new c.k(new Error(`Cannot remove non-existing layer "${i}".`)));h.setEventedParent(null);const y=this._order.indexOf(i);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=h,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],h.onRemove&&h.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,h,y){this._checkLoaded();const b=this.getLayer(i);b?b.minzoom===h&&b.maxzoom===y||(h!=null&&(b.minzoom=h),y!=null&&(b.maxzoom=y),this._updateLayer(b)):this.fire(new c.k(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,h,y={}){this._checkLoaded();const b=this.getLayer(i);if(b){if(!c.bR(b.filter,h))return h==null?(b.setFilter(void 0),void this._updateLayer(b)):void(this._validate(c.C.filter,`layers.${b.id}.filter`,h,null,y)||(b.setFilter(c.bV(h)),this._updateLayer(b)))}else this.fire(new c.k(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return c.bV(this.getLayer(i).filter)}setLayoutProperty(i,h,y,b={}){this._checkLoaded();const A=this.getLayer(i);A?c.bR(A.getLayoutProperty(h),y)||(A.setLayoutProperty(h,y,b),this._updateLayer(A)):this.fire(new c.k(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,h){const y=this.getLayer(i);if(y)return y.getLayoutProperty(h);this.fire(new c.k(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,h,y,b={}){this._checkLoaded();const A=this.getLayer(i);A?c.bR(A.getPaintProperty(h),y)||this._updatePaintProperty(A,h,y,b):this.fire(new c.k(new Error(`Cannot style non-existing layer "${i}".`)))}_updatePaintProperty(i,h,y,b={}){i.setPaintProperty(h,y,b)&&this._updateLayer(i),c.bU(i)&&h==="raster-fade-duration"&&this.tileManagers[i.source].setRasterFadeDuration(y),this._changed=!0,this._updatedPaintProps[i.id]=!0,this._serializedLayers=null}getPaintProperty(i,h){return this.getLayer(i).getPaintProperty(h)}setFeatureState(i,h){this._checkLoaded();const y=i.source,b=i.sourceLayer,A=this.tileManagers[y];if(A===void 0)return void this.fire(new c.k(new Error(`The source '${y}' does not exist in the map's style.`)));const M=A.getSource().type;M==="geojson"&&b?this.fire(new c.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||b?(i.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),A.setFeatureState(b,i.id,h)):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,h){this._checkLoaded();const y=i.source,b=this.tileManagers[y];if(b===void 0)return void this.fire(new c.k(new Error(`The source '${y}' does not exist in the map's style.`)));const A=b.getSource().type,M=A==="vector"?i.sourceLayer:void 0;A!=="vector"||M?h&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new c.k(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(M,i.id,h):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const h=i.source,y=i.sourceLayer,b=this.tileManagers[h];if(b!==void 0)return b.getSource().type!=="vector"||y?(i.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),b.getFeatureState(y,i.id)):void this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.k(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=c.bY(this.tileManagers,(A=>A.serialize())),h=this._serializeByIds(this._order,!0),y=this.map.getTerrain()||void 0,b=this.stylesheet;return c.bZ({version:b.version,name:b.name,metadata:b.metadata,light:b.light,sky:b.sky,center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch,sprite:b.sprite,glyphs:b.glyphs,transition:b.transition,projection:b.projection,sources:i,layers:h,terrain:y},(A=>A!==void 0))}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.tileManagers[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.tileManagers[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const h=M=>this._layers[M].type==="fill-extrusion",y={},b=[];for(let M=this._order.length-1;M>=0;M--){const D=this._order[M];if(h(D)){y[D]=M;for(const N of i){const F=N[D];if(F)for(const q of F)b.push(q)}}}b.sort(((M,D)=>D.intersectionZ-M.intersectionZ));const A=[];for(let M=this._order.length-1;M>=0;M--){const D=this._order[M];if(h(D))for(let N=b.length-1;N>=0;N--){const F=b[N].feature;if(y[F.layer.id]<M)break;A.push(F),b.pop()}else for(const N of i){const F=N[D];if(F)for(const q of F)A.push(q.feature)}}return A}queryRenderedFeatures(i,h,y){h&&h.filter&&this._validate(c.C.filter,"queryRenderedFeatures.filter",h.filter,null,h);const b={};if(h&&h.layers){if(!(Array.isArray(h.layers)||h.layers instanceof Set))return this.fire(new c.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const F of h.layers){const q=this._layers[F];if(!q)return this.fire(new c.k(new Error(`The layer '${F}' does not exist in the map's style and cannot be queried for features.`))),[];b[q.source]=!0}}const A=[];h.availableImages=this._availableImages;const M=this._serializedAllLayers(),D=h.layers instanceof Set?h.layers:Array.isArray(h.layers)?new Set(h.layers):null,N=Object.assign(Object.assign({},h),{layers:D,globalState:this._globalState});for(const F in this.tileManagers)h.layers&&!b[F]||A.push(Cr(this.tileManagers[F],this._layers,M,i,N,y,this.map.terrain?(q,Y,W)=>this.map.terrain.getElevation(q,Y,W):void 0));return this.placement&&A.push((function(F,q,Y,W,ie,le,_e){const be={},ve=le.queryRenderedSymbols(W),Ee=[];for(const Pe of Object.keys(ve).map(Number))Ee.push(_e[Pe]);Ee.sort(bi);for(const Pe of Ee){const Te=Pe.featureIndex.lookupSymbolFeatures(ve[Pe.bucketInstanceId],q,Pe.bucketIndex,Pe.sourceLayerIndex,{filterSpec:ie.filter,globalState:ie.globalState},ie.layers,ie.availableImages,F);for(const ke in Te){const Ne=be[ke]=be[ke]||[],ze=Te[ke];ze.sort(((Ve,st)=>{const Je=Pe.featureSortOrder;if(Je){const rt=Je.indexOf(Ve.featureIndex);return Je.indexOf(st.featureIndex)-rt}return st.featureIndex-Ve.featureIndex}));for(const Ve of ze)Ne.push(Ve)}}return(function(Pe,Te,ke){for(const Ne in Pe)for(const ze of Pe[Ne])qr(ze,ke[Te[Ne].source]);return Pe})(be,F,Y)})(this._layers,M,this.tileManagers,i,N,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(A)}querySourceFeatures(i,h){h?.filter&&this._validate(c.C.filter,"querySourceFeatures.filter",h.filter,null,h);const y=this.tileManagers[i];return y?(function(b,A){const M=b.getRenderableIds().map((F=>b.getTileByID(F))),D=[],N={};for(let F=0;F<M.length;F++){const q=M[F],Y=q.tileID.canonical.key;N[Y]||(N[Y]=!0,q.querySourceFeatures(D,A))}return D})(y,h?Object.assign(Object.assign({},h),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(i,h={}){this._checkLoaded();const y=this.light.getLight();let b=!1;for(const M in i)if(!c.bR(i[M],y[M])){b=!0;break}if(!b)return;const A={now:ee(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,h),this.light.updateTransitions(A)}getProjection(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.projection}setProjection(i){if(this._checkLoaded(),this.projection){if(this.projection.name===i.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=i,this._setProjectionInternal(i.type)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,h={}){this._checkLoaded();const y=this.getSky();let b=!1;if(!i&&!y)return;if(i&&!y)b=!0;else if(!i&&y)b=!0;else for(const M in i)if(!c.bR(i[M],y[M])){b=!0;break}if(!b)return;const A={now:ee(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,h),this.sky.updateTransitions(A)}_setProjectionInternal(i){const h=(function(y,b){const A={constrainOverride:b};if(Array.isArray(y)){const M=new Ah({type:y});return{projection:M,transform:new ya(A),cameraHelper:new ac(M)}}switch(y){case"mercator":return{projection:new Qi,transform:new Ir(A),cameraHelper:new Zn};case"globe":{const M=new Ah({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new ya(A),cameraHelper:new ac(M)}}case"vertical-perspective":return{projection:new Io,transform:new _s(A),cameraHelper:new pr};default:return c.w(`Unknown projection name: ${y}. Falling back to mercator projection.`),{projection:new Qi,transform:new Ir(A),cameraHelper:new Zn}}})(i,this.map.transformConstrain);this.projection=h.projection,this.map.migrateProjection(h.transform,h.cameraHelper);for(const y in this.tileManagers)this.tileManagers[y].reload()}_validate(i,h,y,b,A={}){return(!A||A.validate!==!1)&&Xc(this,i.call(c.C,c.e({key:h,style:this.serialize(),value:y,styleSpec:c.u},b)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),He().off(Re,this._rtlPluginLoaded);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.tileManagers){const y=this.tileManagers[h];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.tileManagers[i].clearTiles()}_reloadSource(i){this.tileManagers[i].resume(),this.tileManagers[i].reload()}_updateSources(i){for(const h in this.tileManagers)this.tileManagers[h].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.tileManagers)this._reloadSource(i)}_updatePlacement(i,h,y,b,A=!1){let M=!1,D=!1;const N={};for(const F of this._order){const q=this._layers[F];if(q.type!=="symbol")continue;if(!N[q.source]){const W=this.tileManagers[q.source];N[q.source]=W.getRenderableIds(!0).map((ie=>W.getTileByID(ie))).sort(((ie,le)=>le.tileID.overscaledZ-ie.tileID.overscaledZ||(ie.tileID.isLessThan(le.tileID)?-1:1)))}const Y=this.crossTileSymbolIndex.addLayer(q,N[q.source],i.center.lng);M=M||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((A=A||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(ee(),i.zoom))&&(this.pauseablePlacement=new xl(i,this.map.terrain,this._order,A,h,y,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(ee()),D=!0),M&&this.pauseablePlacement.placement.setStale()),D||M)for(const F of this._order){const q=this._layers[F];q.type==="symbol"&&this.placement.updateLayerOpacities(q,N[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(ee())}_releaseSymbolFadeTiles(){for(const i in this.tileManagers)this.tileManagers[i].releaseSymbolFadeTiles()}getImages(i,h){return c._(this,void 0,void 0,(function*(){const y=yield this.imageManager.getImages(h.icons);this._updateTilesForChangedImages();const b=this.tileManagers[h.source];return b&&b.setDependencies(h.tileID.key,h.type,h.icons),y}))}getGlyphs(i,h){return c._(this,void 0,void 0,(function*(){const y=yield this.glyphManager.getGlyphs(h.stacks),b=this.tileManagers[h.source];return b&&b.setDependencies(h.tileID.key,h.type,[""]),y}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,h={}){this._checkLoaded(),i&&this._validate(c.C.glyphs,"glyphs",i,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}getDashes(i,h){return c._(this,void 0,void 0,(function*(){const y={};for(const[b,A]of Object.entries(h.dashes))y[b]=this.lineAtlas.getDash(A.dasharray,A.round);return y}))}addSprite(i,h,y={},b){this._checkLoaded();const A=[{id:i,url:h}],M=[...Rt(this.stylesheet.sprite),...A];this._validate(c.C.sprite,"sprite",M,null,y)||(this.stylesheet.sprite=M,this._loadSprite(A,!0,b))}removeSprite(i){this._checkLoaded();const h=Rt(this.stylesheet.sprite);if(h.find((y=>y.id===i))){if(this._spritesImagesIds[i])for(const y of this._spritesImagesIds[i])this.imageManager.removeImage(y),this._changedImages[y]=!0;h.splice(h.findIndex((y=>y.id===i)),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}else this.fire(new c.k(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Rt(this.stylesheet.sprite)}setSprite(i,h={},y){this._checkLoaded(),i&&this._validate(c.C.sprite,"sprite",i,null,h)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,y):(this._unloadSprite(),y&&y(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const i in this.tileManagers){const h=this.tileManagers[i];h.setEventedParent(null),h.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const i in this._layers){const h=this._layers[i];h.setEventedParent(null),h.onRemove&&h.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var lf=c.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Iu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,h,y,b,A,M,D,N,F){this.context=i;let q=this.boundPaintVertexBuffers.length!==b.length;for(let Y=0;!q&&Y<b.length;Y++)this.boundPaintVertexBuffers[Y]!==b[Y]&&(q=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==y||q||this.boundIndexBuffer!==A||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==D||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==F?this.freshBind(h,y,b,A,M,D,N,F):(i.bindVertexArray.set(this.vao),D&&D.bind(),A&&A.dynamicDraw&&A.bind(),N&&N.bind(),F&&F.bind())}freshBind(i,h,y,b,A,M,D,N){const F=i.numAttributes,q=this.context,Y=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=b,this.boundVertexOffset=A,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=D,this.boundDynamicVertexBuffer3=N,h.enableAttributes(Y,i);for(const W of y)W.enableAttributes(Y,i);M&&M.enableAttributes(Y,i),D&&D.enableAttributes(Y,i),N&&N.enableAttributes(Y,i),h.bind(),h.setVertexAttribPointers(Y,i,A);for(const W of y)W.bind(),W.setVertexAttribPointers(Y,i,A);M&&(M.bind(),M.setVertexAttribPointers(Y,i,A)),b&&b.bind(),D&&(D.bind(),D.setVertexAttribPointers(Y,i,A)),N&&(N.bind(),N.setVertexAttribPointers(Y,i,A)),q.currentNumAttributes=F}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const vd=(S,i,h,y,b)=>({u_texture:0,u_ele_delta:S,u_fog_matrix:i,u_fog_color:h?h.properties.get("fog-color"):c.bp.white,u_fog_ground_blend:h?h.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:b?0:h?h.calculateFogBlendOpacity(y):0,u_horizon_color:h?h.properties.get("horizon-color"):c.bp.white,u_horizon_fog_blend:h?h.properties.get("horizon-fog-blend"):1,u_is_globe_mode:b?1:0}),Yo={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function no(S){const i=[];for(let h=0;h<S.length;h++){if(S[h]===null)continue;const y=S[h].split(" ");i.push(y.pop())}return i}class oc{constructor(i,h,y,b,A,M,D,N,F=[]){const q=i.gl;this.program=q.createProgram();const Y=no(h.staticAttributes),W=y?y.getBinderAttributes():[],ie=Y.concat(W),le=li.prelude.staticUniforms?no(li.prelude.staticUniforms):[],_e=D.staticUniforms?no(D.staticUniforms):[],be=h.staticUniforms?no(h.staticUniforms):[],ve=y?y.getBinderUniforms():[],Ee=le.concat(_e).concat(be).concat(ve),Pe=[];for(const Je of Ee)Pe.indexOf(Je)<0&&Pe.push(Je);const Te=y?y.defines():[];bo(q)&&Te.unshift("#version 300 es"),A&&Te.push("#define OVERDRAW_INSPECTOR;"),M&&Te.push("#define TERRAIN3D;"),N&&Te.push(N),F&&Te.push(...F);let ke=Te.concat(li.prelude.fragmentSource,D.fragmentSource,h.fragmentSource).join(`
`),Ne=Te.concat(li.prelude.vertexSource,D.vertexSource,h.vertexSource).join(`
`);bo(q)||(ke=(function(Je){return Je.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ke),Ne=(function(Je){return Je.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Ne));const ze=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(ze,ke),q.compileShader(ze),!q.getShaderParameter(ze,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(ze)}`);q.attachShader(this.program,ze);const Ve=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(Ve,Ne),q.compileShader(Ve),!q.getShaderParameter(Ve,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(Ve)}`);q.attachShader(this.program,Ve),this.attributes={};const st={};this.numAttributes=ie.length;for(let Je=0;Je<this.numAttributes;Je++)ie[Je]&&(q.bindAttribLocation(this.program,Je,ie[Je]),this.attributes[ie[Je]]=Je);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(Ve),q.deleteShader(ze);for(let Je=0;Je<Pe.length;Je++){const rt=Pe[Je];if(rt&&!st[rt]){const at=q.getUniformLocation(this.program,rt);at&&(st[rt]=at)}}this.fixedUniforms=b(i,st),this.terrainUniforms=((Je,rt)=>({u_depth:new c.b_(Je,rt.u_depth),u_terrain:new c.b_(Je,rt.u_terrain),u_terrain_dim:new c.bq(Je,rt.u_terrain_dim),u_terrain_matrix:new c.c0(Je,rt.u_terrain_matrix),u_terrain_unpack:new c.c1(Je,rt.u_terrain_unpack),u_terrain_exaggeration:new c.bq(Je,rt.u_terrain_exaggeration)}))(i,st),this.projectionUniforms=((Je,rt)=>({u_projection_matrix:new c.c0(Je,rt.u_projection_matrix),u_projection_tile_mercator_coords:new c.c1(Je,rt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.c1(Je,rt.u_projection_clipping_plane),u_projection_transition:new c.bq(Je,rt.u_projection_transition),u_projection_fallback_matrix:new c.c0(Je,rt.u_projection_fallback_matrix)}))(i,st),this.binderUniforms=y?y.getUniforms(i,st):[]}draw(i,h,y,b,A,M,D,N,F,q,Y,W,ie,le,_e,be,ve,Ee,Pe){const Te=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(y),i.setStencilMode(b),i.setColorMode(A),i.setCullFace(M),N){i.activeTexture.set(Te.TEXTURE2),Te.bindTexture(Te.TEXTURE_2D,N.depthTexture),i.activeTexture.set(Te.TEXTURE3),Te.bindTexture(Te.TEXTURE_2D,N.texture);for(const Ne in this.terrainUniforms)this.terrainUniforms[Ne].set(N[Ne])}if(F)for(const Ne in F)this.projectionUniforms[Yo[Ne]].set(F[Ne]);if(D)for(const Ne in this.fixedUniforms)this.fixedUniforms[Ne].set(D[Ne]);be&&be.setUniforms(i,this.binderUniforms,le,{zoom:_e});let ke=0;switch(h){case Te.LINES:ke=2;break;case Te.TRIANGLES:ke=3;break;case Te.LINE_STRIP:ke=1}for(const Ne of ie.get()){const ze=Ne.vaos||(Ne.vaos={});(ze[q]||(ze[q]=new Iu)).bind(i,this,Y,be?be.getPaintVertexBuffers():[],W,Ne.vertexOffset,ve,Ee,Pe),Te.drawElements(h,Ne.primitiveLength*ke,Te.UNSIGNED_SHORT,Ne.primitiveOffset*ke*2)}}}function cf(S,i,h){const y=1/c.aN(h,1,i.transform.tileZoom),b=Math.pow(2,h.tileID.overscaledZ),A=h.tileSize*Math.pow(2,i.transform.tileZoom)/b,M=A*(h.tileID.canonical.x+h.tileID.wrap*b),D=A*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[y,S.fromScale,S.toScale],u_fade:S.t,u_pixel_coord_upper:[M>>16,D>>16],u_pixel_coord_lower:[65535&M,65535&D]}}const ko=(S,i,h,y)=>{const b=S.style.light,A=b.properties.get("position"),M=[A.x,A.y,A.z],D=c.c4();b.properties.get("anchor")==="viewport"&&c.c5(D,S.transform.bearingInRadians),c.c6(M,M,D);const N=S.transform.transformLightDirection(M),F=b.properties.get("color");return{u_lightpos:M,u_lightpos_globe:N,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[F.r,F.g,F.b],u_vertical_gradient:+i,u_opacity:h,u_fill_translate:y}},zh=(S,i,h,y,b,A,M)=>c.e(ko(S,i,h,y),cf(A,S,M),{u_height_factor:-Math.pow(2,b.overscaledZ)/M.tileSize/8}),Po=(S,i,h,y)=>c.e(cf(i,S,h),{u_fill_translate:y}),Yc=(S,i)=>({u_world:S,u_fill_translate:i}),Kc=(S,i,h,y,b)=>c.e(Po(S,i,h,b),{u_world:y}),Jc=(S,i,h,y,b)=>{const A=S.transform;let M,D,N=0;if(h.paint.get("circle-pitch-alignment")==="map"){const F=c.aN(i,1,A.zoom);M=!0,D=[F,F],N=F/(c.a5*Math.pow(2,i.tileID.overscaledZ))*2*Math.PI*b}else M=!1,D=A.pixelsToGLUnits;return{u_camera_to_center_distance:A.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:S.pixelRatio,u_extrude_scale:D,u_globe_extrude_scale:N,u_translate:y}},Ko=S=>({u_pixel_extrude_scale:[1/S.width,1/S.height]}),bd=S=>({u_viewport_size:[S.width,S.height]}),Do=(S,i=1)=>({u_color:S,u_overlay:0,u_overlay_scale:i}),Jo=(S,i,h,y)=>{const b=c.aN(S,1,i)/(c.a5*Math.pow(2,S.tileID.overscaledZ))*2*Math.PI*y;return{u_extrude_scale:c.aN(S,1,i),u_intensity:h,u_globe_extrude_scale:b}},xd=(S,i,h,y)=>{const b=c.N();c.c7(b,0,S.width,S.height,0,0,1);const A=S.context.gl;return{u_matrix:b,u_world:[A.drawingBufferWidth,A.drawingBufferHeight],u_image:h,u_color_ramp:y,u_opacity:i.paint.get("heatmap-opacity")}},sc=(S,i,h)=>{const y=h.paint.get("hillshade-accent-color");let b;switch(h.paint.get("hillshade-method")){case"basic":b=4;break;case"combined":b=1;break;case"igor":b=2;break;case"multidirectional":b=3;break;default:b=0}const A=h.getIlluminationProperties();for(let M=0;M<A.directionRadians.length;M++)h.paint.get("hillshade-illumination-anchor")==="viewport"&&(A.directionRadians[M]+=S.transform.bearingInRadians);return{u_image:0,u_latrange:Xs(0,i.tileID),u_exaggeration:h.paint.get("hillshade-exaggeration"),u_altitudes:A.altitudeRadians,u_azimuths:A.directionRadians,u_accent:y,u_method:b,u_highlights:A.highlightColor,u_shadows:A.shadowColor}},uf=(S,i)=>{const h=i.stride,y=c.N();return c.c7(y,0,c.a5,-c.a5,0,0,1),c.O(y,y,[0,-c.a5,0]),{u_matrix:y,u_image:1,u_dimension:[h,h],u_zoom:S.overscaledZ,u_unpack:i.getUnpackVector()}};function Xs(S,i){const h=Math.pow(2,i.canonical.z),y=i.canonical.y;return[new c.a9(0,y/h).toLngLat().lat,new c.a9(0,(y+1)/h).toLngLat().lat]}const hf=(S,i,h=0)=>({u_image:0,u_unpack:i.getUnpackVector(),u_dimension:[i.stride,i.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:h,u_opacity:S.paint.get("color-relief-opacity")}),bs=(S,i,h,y)=>{const b=S.transform;return{u_translation:Cl(S,i,h),u_ratio:y/c.aN(i,1,b.zoom),u_device_pixel_ratio:S.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},df=(S,i,h,y,b)=>c.e(bs(S,i,h,y),{u_image:0,u_image_height:b}),Qo=(S,i,h,y,b)=>{const A=S.transform,M=io(i,A);return{u_translation:Cl(S,i,h),u_texsize:i.imageAtlasTexture.size,u_ratio:y/c.aN(i,1,A.zoom),u_device_pixel_ratio:S.pixelRatio,u_image:0,u_scale:[M,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]]}},_a=(S,i,h,y,b)=>{const A=io(i,S.transform);return c.e(bs(S,i,h,y),{u_tileratio:A,u_crossfade_from:b.fromScale,u_crossfade_to:b.toScale,u_image:0,u_mix:b.t,u_lineatlas_width:S.lineAtlas.width,u_lineatlas_height:S.lineAtlas.height})},Ys=(S,i,h,y,b,A)=>{const M=io(i,S.transform);return c.e(bs(S,i,h,y),{u_image:0,u_image_height:A,u_tileratio:M,u_crossfade_from:b.fromScale,u_crossfade_to:b.toScale,u_image_dash:1,u_mix:b.t,u_lineatlas_width:S.lineAtlas.width,u_lineatlas_height:S.lineAtlas.height})};function io(S,i){return 1/c.aN(S,1,i.tileZoom)}function Cl(S,i,h){return c.aO(S.transform,i,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const Qc=(S,i,h,y,b)=>{return{u_tl_parent:S,u_scale_parent:i,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(M=y.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(A=y.paint.get("raster-contrast"),A>0?1/(1-A):1+A),u_spin_weights:lc(y.paint.get("raster-hue-rotate")),u_coords_top:[b[0].x,b[0].y,b[1].x,b[1].y],u_coords_bottom:[b[3].x,b[3].y,b[2].x,b[2].y]};var A,M};function lc(S){S*=Math.PI/180;const i=Math.sin(S),h=Math.cos(S);return[(2*h+1)/3,(-Math.sqrt(3)*i-h+1)/3,(Math.sqrt(3)*i-h+1)/3]}const xs=(S,i,h,y,b,A,M,D,N,F,q,Y,W)=>{const ie=M.transform;return{u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:ie.cameraToCenterDistance,u_pitch:ie.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:ie.width/ie.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:D,u_coord_matrix:N,u_is_text:+q,u_pitch_with_map:+y,u_is_along_line:b,u_is_variable_anchor:A,u_texsize:Y,u_texture:0,u_translation:F,u_pitched_scale:W}},cc=(S,i,h,y,b,A,M,D,N,F,q,Y,W,ie)=>{const le=M.transform;return c.e(xs(S,i,h,y,b,A,M,D,N,F,q,Y,ie),{u_gamma_scale:y?Math.cos(le.pitch*Math.PI/180)*le.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},ro=(S,i,h,y,b,A,M,D,N,F,q,Y,W)=>c.e(cc(S,i,h,y,b,A,M,D,N,F,!0,q,0,W),{u_texsize_icon:Y,u_texture_icon:1}),eu=(S,i)=>({u_opacity:S,u_color:i}),ku=(S,i,h,y,b)=>c.e((function(A,M,D,N){const F=D.imageManager.getPattern(A.from.toString()),q=D.imageManager.getPattern(A.to.toString()),{width:Y,height:W}=D.imageManager.getPixelSize(),ie=Math.pow(2,N.tileID.overscaledZ),le=N.tileSize*Math.pow(2,D.transform.tileZoom)/ie,_e=le*(N.tileID.canonical.x+N.tileID.wrap*ie),be=le*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[Y,W],u_mix:M.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/c.aN(N,1,D.transform.tileZoom),u_pixel_coord_upper:[_e>>16,be>>16],u_pixel_coord_lower:[65535&_e,65535&be]}})(h,b,i,y),{u_opacity:S}),uc=(S,i)=>{},ff={fillExtrusion:(S,i)=>({u_lightpos:new c.c2(S,i.u_lightpos),u_lightpos_globe:new c.c2(S,i.u_lightpos_globe),u_lightintensity:new c.bq(S,i.u_lightintensity),u_lightcolor:new c.c2(S,i.u_lightcolor),u_vertical_gradient:new c.bq(S,i.u_vertical_gradient),u_opacity:new c.bq(S,i.u_opacity),u_fill_translate:new c.c3(S,i.u_fill_translate)}),fillExtrusionPattern:(S,i)=>({u_lightpos:new c.c2(S,i.u_lightpos),u_lightpos_globe:new c.c2(S,i.u_lightpos_globe),u_lightintensity:new c.bq(S,i.u_lightintensity),u_lightcolor:new c.c2(S,i.u_lightcolor),u_vertical_gradient:new c.bq(S,i.u_vertical_gradient),u_height_factor:new c.bq(S,i.u_height_factor),u_opacity:new c.bq(S,i.u_opacity),u_fill_translate:new c.c3(S,i.u_fill_translate),u_image:new c.b_(S,i.u_image),u_texsize:new c.c3(S,i.u_texsize),u_pixel_coord_upper:new c.c3(S,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(S,i.u_pixel_coord_lower),u_scale:new c.c2(S,i.u_scale),u_fade:new c.bq(S,i.u_fade)}),fill:(S,i)=>({u_fill_translate:new c.c3(S,i.u_fill_translate)}),fillPattern:(S,i)=>({u_image:new c.b_(S,i.u_image),u_texsize:new c.c3(S,i.u_texsize),u_pixel_coord_upper:new c.c3(S,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(S,i.u_pixel_coord_lower),u_scale:new c.c2(S,i.u_scale),u_fade:new c.bq(S,i.u_fade),u_fill_translate:new c.c3(S,i.u_fill_translate)}),fillOutline:(S,i)=>({u_world:new c.c3(S,i.u_world),u_fill_translate:new c.c3(S,i.u_fill_translate)}),fillOutlinePattern:(S,i)=>({u_world:new c.c3(S,i.u_world),u_image:new c.b_(S,i.u_image),u_texsize:new c.c3(S,i.u_texsize),u_pixel_coord_upper:new c.c3(S,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(S,i.u_pixel_coord_lower),u_scale:new c.c2(S,i.u_scale),u_fade:new c.bq(S,i.u_fade),u_fill_translate:new c.c3(S,i.u_fill_translate)}),circle:(S,i)=>({u_camera_to_center_distance:new c.bq(S,i.u_camera_to_center_distance),u_scale_with_map:new c.b_(S,i.u_scale_with_map),u_pitch_with_map:new c.b_(S,i.u_pitch_with_map),u_extrude_scale:new c.c3(S,i.u_extrude_scale),u_device_pixel_ratio:new c.bq(S,i.u_device_pixel_ratio),u_globe_extrude_scale:new c.bq(S,i.u_globe_extrude_scale),u_translate:new c.c3(S,i.u_translate)}),collisionBox:(S,i)=>({u_pixel_extrude_scale:new c.c3(S,i.u_pixel_extrude_scale)}),collisionCircle:(S,i)=>({u_viewport_size:new c.c3(S,i.u_viewport_size)}),debug:(S,i)=>({u_color:new c.b$(S,i.u_color),u_overlay:new c.b_(S,i.u_overlay),u_overlay_scale:new c.bq(S,i.u_overlay_scale)}),depth:uc,clippingMask:uc,heatmap:(S,i)=>({u_extrude_scale:new c.bq(S,i.u_extrude_scale),u_intensity:new c.bq(S,i.u_intensity),u_globe_extrude_scale:new c.bq(S,i.u_globe_extrude_scale)}),heatmapTexture:(S,i)=>({u_matrix:new c.c0(S,i.u_matrix),u_world:new c.c3(S,i.u_world),u_image:new c.b_(S,i.u_image),u_color_ramp:new c.b_(S,i.u_color_ramp),u_opacity:new c.bq(S,i.u_opacity)}),hillshade:(S,i)=>({u_image:new c.b_(S,i.u_image),u_latrange:new c.c3(S,i.u_latrange),u_exaggeration:new c.bq(S,i.u_exaggeration),u_altitudes:new c.c9(S,i.u_altitudes),u_azimuths:new c.c9(S,i.u_azimuths),u_accent:new c.b$(S,i.u_accent),u_method:new c.b_(S,i.u_method),u_shadows:new c.c8(S,i.u_shadows),u_highlights:new c.c8(S,i.u_highlights)}),hillshadePrepare:(S,i)=>({u_matrix:new c.c0(S,i.u_matrix),u_image:new c.b_(S,i.u_image),u_dimension:new c.c3(S,i.u_dimension),u_zoom:new c.bq(S,i.u_zoom),u_unpack:new c.c1(S,i.u_unpack)}),colorRelief:(S,i)=>({u_image:new c.b_(S,i.u_image),u_unpack:new c.c1(S,i.u_unpack),u_dimension:new c.c3(S,i.u_dimension),u_elevation_stops:new c.b_(S,i.u_elevation_stops),u_color_stops:new c.b_(S,i.u_color_stops),u_color_ramp_size:new c.b_(S,i.u_color_ramp_size),u_opacity:new c.bq(S,i.u_opacity)}),line:(S,i)=>({u_translation:new c.c3(S,i.u_translation),u_ratio:new c.bq(S,i.u_ratio),u_device_pixel_ratio:new c.bq(S,i.u_device_pixel_ratio),u_units_to_pixels:new c.c3(S,i.u_units_to_pixels)}),lineGradient:(S,i)=>({u_translation:new c.c3(S,i.u_translation),u_ratio:new c.bq(S,i.u_ratio),u_device_pixel_ratio:new c.bq(S,i.u_device_pixel_ratio),u_units_to_pixels:new c.c3(S,i.u_units_to_pixels),u_image:new c.b_(S,i.u_image),u_image_height:new c.bq(S,i.u_image_height)}),linePattern:(S,i)=>({u_translation:new c.c3(S,i.u_translation),u_texsize:new c.c3(S,i.u_texsize),u_ratio:new c.bq(S,i.u_ratio),u_device_pixel_ratio:new c.bq(S,i.u_device_pixel_ratio),u_image:new c.b_(S,i.u_image),u_units_to_pixels:new c.c3(S,i.u_units_to_pixels),u_scale:new c.c2(S,i.u_scale),u_fade:new c.bq(S,i.u_fade)}),lineSDF:(S,i)=>({u_translation:new c.c3(S,i.u_translation),u_ratio:new c.bq(S,i.u_ratio),u_device_pixel_ratio:new c.bq(S,i.u_device_pixel_ratio),u_units_to_pixels:new c.c3(S,i.u_units_to_pixels),u_image:new c.b_(S,i.u_image),u_mix:new c.bq(S,i.u_mix),u_tileratio:new c.bq(S,i.u_tileratio),u_crossfade_from:new c.bq(S,i.u_crossfade_from),u_crossfade_to:new c.bq(S,i.u_crossfade_to),u_lineatlas_width:new c.bq(S,i.u_lineatlas_width),u_lineatlas_height:new c.bq(S,i.u_lineatlas_height)}),lineGradientSDF:(S,i)=>({u_translation:new c.c3(S,i.u_translation),u_ratio:new c.bq(S,i.u_ratio),u_device_pixel_ratio:new c.bq(S,i.u_device_pixel_ratio),u_units_to_pixels:new c.c3(S,i.u_units_to_pixels),u_image:new c.b_(S,i.u_image),u_image_height:new c.bq(S,i.u_image_height),u_tileratio:new c.bq(S,i.u_tileratio),u_crossfade_from:new c.bq(S,i.u_crossfade_from),u_crossfade_to:new c.bq(S,i.u_crossfade_to),u_image_dash:new c.b_(S,i.u_image_dash),u_mix:new c.bq(S,i.u_mix),u_lineatlas_width:new c.bq(S,i.u_lineatlas_width),u_lineatlas_height:new c.bq(S,i.u_lineatlas_height)}),raster:(S,i)=>({u_tl_parent:new c.c3(S,i.u_tl_parent),u_scale_parent:new c.bq(S,i.u_scale_parent),u_buffer_scale:new c.bq(S,i.u_buffer_scale),u_fade_t:new c.bq(S,i.u_fade_t),u_opacity:new c.bq(S,i.u_opacity),u_image0:new c.b_(S,i.u_image0),u_image1:new c.b_(S,i.u_image1),u_brightness_low:new c.bq(S,i.u_brightness_low),u_brightness_high:new c.bq(S,i.u_brightness_high),u_saturation_factor:new c.bq(S,i.u_saturation_factor),u_contrast_factor:new c.bq(S,i.u_contrast_factor),u_spin_weights:new c.c2(S,i.u_spin_weights),u_coords_top:new c.c1(S,i.u_coords_top),u_coords_bottom:new c.c1(S,i.u_coords_bottom)}),symbolIcon:(S,i)=>({u_is_size_zoom_constant:new c.b_(S,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(S,i.u_is_size_feature_constant),u_size_t:new c.bq(S,i.u_size_t),u_size:new c.bq(S,i.u_size),u_camera_to_center_distance:new c.bq(S,i.u_camera_to_center_distance),u_pitch:new c.bq(S,i.u_pitch),u_rotate_symbol:new c.b_(S,i.u_rotate_symbol),u_aspect_ratio:new c.bq(S,i.u_aspect_ratio),u_fade_change:new c.bq(S,i.u_fade_change),u_label_plane_matrix:new c.c0(S,i.u_label_plane_matrix),u_coord_matrix:new c.c0(S,i.u_coord_matrix),u_is_text:new c.b_(S,i.u_is_text),u_pitch_with_map:new c.b_(S,i.u_pitch_with_map),u_is_along_line:new c.b_(S,i.u_is_along_line),u_is_variable_anchor:new c.b_(S,i.u_is_variable_anchor),u_texsize:new c.c3(S,i.u_texsize),u_texture:new c.b_(S,i.u_texture),u_translation:new c.c3(S,i.u_translation),u_pitched_scale:new c.bq(S,i.u_pitched_scale)}),symbolSDF:(S,i)=>({u_is_size_zoom_constant:new c.b_(S,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(S,i.u_is_size_feature_constant),u_size_t:new c.bq(S,i.u_size_t),u_size:new c.bq(S,i.u_size),u_camera_to_center_distance:new c.bq(S,i.u_camera_to_center_distance),u_pitch:new c.bq(S,i.u_pitch),u_rotate_symbol:new c.b_(S,i.u_rotate_symbol),u_aspect_ratio:new c.bq(S,i.u_aspect_ratio),u_fade_change:new c.bq(S,i.u_fade_change),u_label_plane_matrix:new c.c0(S,i.u_label_plane_matrix),u_coord_matrix:new c.c0(S,i.u_coord_matrix),u_is_text:new c.b_(S,i.u_is_text),u_pitch_with_map:new c.b_(S,i.u_pitch_with_map),u_is_along_line:new c.b_(S,i.u_is_along_line),u_is_variable_anchor:new c.b_(S,i.u_is_variable_anchor),u_texsize:new c.c3(S,i.u_texsize),u_texture:new c.b_(S,i.u_texture),u_gamma_scale:new c.bq(S,i.u_gamma_scale),u_device_pixel_ratio:new c.bq(S,i.u_device_pixel_ratio),u_is_halo:new c.b_(S,i.u_is_halo),u_translation:new c.c3(S,i.u_translation),u_pitched_scale:new c.bq(S,i.u_pitched_scale)}),symbolTextAndIcon:(S,i)=>({u_is_size_zoom_constant:new c.b_(S,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(S,i.u_is_size_feature_constant),u_size_t:new c.bq(S,i.u_size_t),u_size:new c.bq(S,i.u_size),u_camera_to_center_distance:new c.bq(S,i.u_camera_to_center_distance),u_pitch:new c.bq(S,i.u_pitch),u_rotate_symbol:new c.b_(S,i.u_rotate_symbol),u_aspect_ratio:new c.bq(S,i.u_aspect_ratio),u_fade_change:new c.bq(S,i.u_fade_change),u_label_plane_matrix:new c.c0(S,i.u_label_plane_matrix),u_coord_matrix:new c.c0(S,i.u_coord_matrix),u_is_text:new c.b_(S,i.u_is_text),u_pitch_with_map:new c.b_(S,i.u_pitch_with_map),u_is_along_line:new c.b_(S,i.u_is_along_line),u_is_variable_anchor:new c.b_(S,i.u_is_variable_anchor),u_texsize:new c.c3(S,i.u_texsize),u_texsize_icon:new c.c3(S,i.u_texsize_icon),u_texture:new c.b_(S,i.u_texture),u_texture_icon:new c.b_(S,i.u_texture_icon),u_gamma_scale:new c.bq(S,i.u_gamma_scale),u_device_pixel_ratio:new c.bq(S,i.u_device_pixel_ratio),u_is_halo:new c.b_(S,i.u_is_halo),u_translation:new c.c3(S,i.u_translation),u_pitched_scale:new c.bq(S,i.u_pitched_scale)}),background:(S,i)=>({u_opacity:new c.bq(S,i.u_opacity),u_color:new c.b$(S,i.u_color)}),backgroundPattern:(S,i)=>({u_opacity:new c.bq(S,i.u_opacity),u_image:new c.b_(S,i.u_image),u_pattern_tl_a:new c.c3(S,i.u_pattern_tl_a),u_pattern_br_a:new c.c3(S,i.u_pattern_br_a),u_pattern_tl_b:new c.c3(S,i.u_pattern_tl_b),u_pattern_br_b:new c.c3(S,i.u_pattern_br_b),u_texsize:new c.c3(S,i.u_texsize),u_mix:new c.bq(S,i.u_mix),u_pattern_size_a:new c.c3(S,i.u_pattern_size_a),u_pattern_size_b:new c.c3(S,i.u_pattern_size_b),u_scale_a:new c.bq(S,i.u_scale_a),u_scale_b:new c.bq(S,i.u_scale_b),u_pixel_coord_upper:new c.c3(S,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(S,i.u_pixel_coord_lower),u_tile_units_to_pixels:new c.bq(S,i.u_tile_units_to_pixels)}),terrain:(S,i)=>({u_texture:new c.b_(S,i.u_texture),u_ele_delta:new c.bq(S,i.u_ele_delta),u_fog_matrix:new c.c0(S,i.u_fog_matrix),u_fog_color:new c.b$(S,i.u_fog_color),u_fog_ground_blend:new c.bq(S,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.bq(S,i.u_fog_ground_blend_opacity),u_horizon_color:new c.b$(S,i.u_horizon_color),u_horizon_fog_blend:new c.bq(S,i.u_horizon_fog_blend),u_is_globe_mode:new c.bq(S,i.u_is_globe_mode)}),terrainDepth:(S,i)=>({u_ele_delta:new c.bq(S,i.u_ele_delta)}),terrainCoords:(S,i)=>({u_texture:new c.b_(S,i.u_texture),u_terrain_coords_id:new c.bq(S,i.u_terrain_coords_id),u_ele_delta:new c.bq(S,i.u_ele_delta)}),projectionErrorMeasurement:(S,i)=>({u_input:new c.bq(S,i.u_input),u_output_expected:new c.bq(S,i.u_output_expected)}),atmosphere:(S,i)=>({u_sun_pos:new c.c2(S,i.u_sun_pos),u_atmosphere_blend:new c.bq(S,i.u_atmosphere_blend),u_globe_position:new c.c2(S,i.u_globe_position),u_globe_radius:new c.bq(S,i.u_globe_radius),u_inv_proj_matrix:new c.c0(S,i.u_inv_proj_matrix)}),sky:(S,i)=>({u_sky_color:new c.b$(S,i.u_sky_color),u_horizon_color:new c.b$(S,i.u_horizon_color),u_horizon:new c.c3(S,i.u_horizon),u_horizon_normal:new c.c3(S,i.u_horizon_normal),u_sky_horizon_blend:new c.bq(S,i.u_sky_horizon_blend),u_sky_blend:new c.bq(S,i.u_sky_blend)})};class Ml{constructor(i,h,y){this.context=i;const b=i.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const hc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ih{constructor(i,h,y,b){this.length=h.length,this.attributes=y,this.itemSize=h.bytesPerElement,this.dynamicDraw=b,this.context=i;const A=i.gl;this.buffer=A.createBuffer(),i.bindVertexBuffer.set(this.buffer),A.bufferData(A.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?A.DYNAMIC_DRAW:A.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,h){for(let y=0;y<this.attributes.length;y++){const b=h.attributes[this.attributes[y].name];b!==void 0&&i.enableVertexAttribArray(b)}}setVertexAttribPointers(i,h,y){for(let b=0;b<this.attributes.length;b++){const A=this.attributes[b],M=h.attributes[A.name];M!==void 0&&i.vertexAttribPointer(M,A.components,i[hc[A.type]],!1,this.itemSize,A.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ci{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Wr extends ci{getDefault(){return c.bp.transparent}set(i){const h=this.current;(i.r!==h.r||i.g!==h.g||i.b!==h.b||i.a!==h.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class zl extends ci{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Pu extends ci{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class dc extends ci{getDefault(){return[!0,!0,!0,!0]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||i[3]!==h[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class fc extends ci{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class tu extends ci{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class nu extends ci{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const h=this.current;(i.func!==h.func||i.ref!==h.ref||i.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class va extends ci{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class wd extends ci{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=i,this.dirty=!1}}class Ks extends ci{getDefault(){return[0,1]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class ao extends ci{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=i,this.dirty=!1}}class es extends ci{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ua extends ci{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.BLEND):h.disable(h.BLEND),this.current=i,this.dirty=!1}}class ba extends ci{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Il extends ci{getDefault(){return c.bp.transparent}set(i){const h=this.current;(i.r!==h.r||i.g!==h.g||i.b!==h.b||i.a!==h.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class kl extends ci{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Js extends ci{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=i,this.dirty=!1}}class Pl extends ci{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Va extends ci{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class pc extends ci{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class mc extends ci{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Rn extends ci{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||i[3]!==h[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class kh extends ci{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class oo extends ci{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Du extends ci{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class so extends ci{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Sd extends ci{getDefault(){return null}set(i){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Lu extends ci{getDefault(){return null}set(i){var h;if(i===this.current&&!this.dirty)return;const y=this.gl;bo(y)?y.bindVertexArray(i):(h=y.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Dl extends ci{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Ph extends ci{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Ru extends ci{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Ll extends ci{constructor(i,h){super(i),this.context=i,this.parent=h}getDefault(){return null}}class g extends Ll{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class T extends Ll{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class P extends Ll{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}const U="Framebuffer is not complete";class K{constructor(i,h,y,b,A){this.context=i,this.width=h,this.height=y;const M=i.gl,D=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new g(i,D),b)this.depthAttachment=A?new P(i,D):new T(i,D);else if(A)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(U)}destroy(){const i=this.context.gl,h=this.colorAttachment.get();if(h&&i.deleteTexture(h),this.depthAttachment){const y=this.depthAttachment.get();y&&i.deleteRenderbuffer(y)}i.deleteFramebuffer(this.framebuffer)}}class he{constructor(i){var h,y;if(this.gl=i,this.clearColor=new Wr(this),this.clearDepth=new zl(this),this.clearStencil=new Pu(this),this.colorMask=new dc(this),this.depthMask=new fc(this),this.stencilMask=new tu(this),this.stencilFunc=new nu(this),this.stencilOp=new va(this),this.stencilTest=new wd(this),this.depthRange=new Ks(this),this.depthTest=new ao(this),this.depthFunc=new es(this),this.blend=new Ua(this),this.blendFunc=new ba(this),this.blendColor=new Il(this),this.blendEquation=new kl(this),this.cullFace=new Js(this),this.cullFaceSide=new Pl(this),this.frontFace=new Va(this),this.program=new pc(this),this.activeTexture=new mc(this),this.viewport=new Rn(this),this.bindFramebuffer=new kh(this),this.bindRenderbuffer=new oo(this),this.bindTexture=new Du(this),this.bindVertexBuffer=new so(this),this.bindElementBuffer=new Sd(this),this.bindVertexArray=new Lu(this),this.pixelStoreUnpack=new Dl(this),this.pixelStoreUnpackPremultiplyAlpha=new Ph(this),this.pixelStoreUnpackFlipY=new Ru(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),bo(i)){this.HALF_FLOAT=i.HALF_FLOAT;const b=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=i.RGBA16F)!==null&&h!==void 0?h:b?.RGBA16F_EXT,this.RGB16F=(y=i.RGB16F)!==null&&y!==void 0?y:b?.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const b=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=b?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,h){return new Ml(this,i,h)}createVertexBuffer(i,h,y){return new Ih(this,i,h,y)}createRenderbuffer(i,h,y){const b=this.gl,A=b.createRenderbuffer();return this.bindRenderbuffer.set(A),b.renderbufferStorage(b.RENDERBUFFER,i,h,y),this.bindRenderbuffer.set(null),A}createFramebuffer(i,h,y,b){return new K(this,i,h,y,b)}clear({color:i,depth:h,stencil:y}){const b=this.gl;let A=0;i&&(A|=b.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(A|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),y!==void 0&&(A|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),b.clear(A)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){c.bR(i.blendFunction,zi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return bo(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var h;return bo(this.gl)?this.gl.deleteVertexArray(i):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}let De;function We(S,i,h,y,b){const A=S.context,M=S.transform,D=A.gl,N=S.useProgram("collisionBox"),F=[];let q=0,Y=0;for(let ve=0;ve<y.length;ve++){const Ee=y[ve],Pe=i.getTile(Ee).getBucket(h);if(!Pe)continue;const Te=b?Pe.textCollisionBox:Pe.iconCollisionBox,ke=Pe.collisionCircleArray;ke.length>0&&(F.push({circleArray:ke,circleOffset:Y,coord:Ee}),q+=ke.length/4,Y=q),Te&&N.draw(A,D.LINES,kn.disabled,Kn.disabled,S.colorModeForRenderPass(),$n.disabled,Ko(S.transform),S.style.map.terrain&&S.style.map.terrain.getTerrainData(Ee),M.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),h.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,null,S.transform.zoom,null,null,Te.collisionVertexBuffer)}if(!b||!F.length)return;const W=S.useProgram("collisionCircle"),ie=new c.ca;ie.resize(4*q),ie._trim();let le=0;for(const ve of F)for(let Ee=0;Ee<ve.circleArray.length/4;Ee++){const Pe=4*Ee,Te=ve.circleArray[Pe+0],ke=ve.circleArray[Pe+1],Ne=ve.circleArray[Pe+2],ze=ve.circleArray[Pe+3];ie.emplace(le++,Te,ke,Ne,ze,0),ie.emplace(le++,Te,ke,Ne,ze,1),ie.emplace(le++,Te,ke,Ne,ze,2),ie.emplace(le++,Te,ke,Ne,ze,3)}(!De||De.length<2*q)&&(De=(function(ve){const Ee=2*ve,Pe=new c.cc;Pe.resize(Ee),Pe._trim();for(let Te=0;Te<Ee;Te++){const ke=6*Te;Pe.uint16[ke+0]=4*Te+0,Pe.uint16[ke+1]=4*Te+1,Pe.uint16[ke+2]=4*Te+2,Pe.uint16[ke+3]=4*Te+2,Pe.uint16[ke+4]=4*Te+3,Pe.uint16[ke+5]=4*Te+0}return Pe})(q));const _e=A.createIndexBuffer(De,!0),be=A.createVertexBuffer(ie,c.cb.members,!0);for(const ve of F){const Ee=bd(S.transform);W.draw(A,D.TRIANGLES,kn.disabled,Kn.disabled,S.colorModeForRenderPass(),$n.disabled,Ee,S.style.map.terrain&&S.style.map.terrain.getTerrainData(ve.coord),null,h.id,be,_e,c.aX.simpleSegment(0,2*ve.circleOffset,ve.circleArray.length,ve.circleArray.length/2),null,S.transform.zoom,null,null,null)}be.destroy(),_e.destroy()}const ht=c.ar(new Float32Array(16));function Ct(S,i,h,y,b,A){const{horizontalAlign:M,verticalAlign:D}=c.aS(S);return new c.P((-(M-.5)*i/b+y[0])*A,(-(D-.5)*h/b+y[1])*A)}function Wt(S,i,h,y,b,A){const M=i.tileAnchorPoint.add(new c.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let D=y.mult(A);h||(D=D.rotate(-b));const N=M.add(D);return In(N.x,N.y,i.pitchedLabelPlaneMatrix,i.getElevation).point}if(h){const D=ri(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(S),N=Math.atan(D.y/D.x)+(D.x<0?Math.PI:0);return S.add(y.rotate(N))}return S.add(y)}function gn(S,i,h,y,b,A,M,D,N,F,q,Y){const W=S.text.placedSymbolArray,ie=S.text.dynamicLayoutVertexArray,le=S.icon.dynamicLayoutVertexArray,_e={};ie.clear();for(let be=0;be<W.length;be++){const ve=W.get(be),Ee=ve.hidden||!ve.crossTileID||S.allowVerticalPlacement&&!ve.placedOrientation?null:y[ve.crossTileID];if(Ee){const Pe=new c.P(ve.anchorX,ve.anchorY),Te={getElevation:Y,width:b.width,height:b.height,pitchedLabelPlaneMatrix:A,pitchWithMap:h,transform:b,tileAnchorPoint:Pe,translation:F,unwrappedTileID:q},ke=h?gs(Pe.x,Pe.y,Te):ri(Pe.x,Pe.y,Te),Ne=Jl(b.cameraToCenterDistance,ke.signedDistanceFromCamera);let ze=c.aA(S.textSizeData,D,ve)*Ne/c.aM;h&&(ze*=S.tilePixelRatio/M);const{width:Ve,height:st,anchor:Je,textOffset:rt,textBoxScale:at}=Ee,Dt=Ct(Je,Ve,st,rt,at,ze),Ot=b.getPitchedTextCorrection(Pe.x+F[0],Pe.y+F[1],q),wt=Wt(ke.point,Te,i,Dt,-b.bearingInRadians,Ot),Ut=S.allowVerticalPlacement&&ve.placedOrientation===c.az.vertical?Math.PI/2:0;for(let On=0;On<ve.numGlyphs;On++)c.aG(ie,wt,Ut);N&&ve.associatedIconIndex>=0&&(_e[ve.associatedIconIndex]={shiftedAnchor:wt,angle:Ut})}else wi(ve.numGlyphs,ie)}if(N){le.clear();const be=S.icon.placedSymbolArray;for(let ve=0;ve<be.length;ve++){const Ee=be.get(ve);if(Ee.hidden)wi(Ee.numGlyphs,le);else{const Pe=_e[ve];if(Pe)for(let Te=0;Te<Ee.numGlyphs;Te++)c.aG(le,Pe.shiftedAnchor,Pe.angle);else wi(Ee.numGlyphs,le)}}S.icon.dynamicLayoutVertexBuffer.updateData(le)}S.text.dynamicLayoutVertexBuffer.updateData(ie)}function qn(S,i,h){return h.iconsInText&&i?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function kr(S,i,h,y,b,A,M,D,N,F,q,Y,W){const ie=S.context,le=ie.gl,_e=S.transform,be=D==="map",ve=N==="map",Ee=D!=="viewport"&&h.layout.get("symbol-placement")!=="point",Pe=be&&!ve&&!Ee,Te=!h.layout.get("symbol-sort-key").isConstant();let ke=!1;const Ne=S.getDepthModeForSublayer(0,kn.ReadOnly),ze=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ve=[],st=_e.getCircleRadiusCorrection();for(const Je of y){const rt=i.getTile(Je),at=rt.getBucket(h);if(!at)continue;const Dt=b?at.text:at.icon;if(!Dt||!Dt.segments.get().length||!Dt.hasVisibleVertices)continue;const Ot=Dt.programConfigurations.get(h.id),wt=b||at.sdfIcons,Ut=b?at.textSizeData:at.iconSizeData,On=ve||_e.pitch!==0,ki=S.useProgram(qn(wt,b,at),Ot),Ki=c.ay(Ut,_e.zoom),Zi=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Je);let sr,$i,Sr,lr,Aa=[0,0],Dr=null;if(b)$i=rt.glyphAtlasTexture,Sr=le.LINEAR,sr=rt.glyphAtlasTexture.size,at.iconsInText&&(Aa=rt.imageAtlasTexture.size,Dr=rt.imageAtlasTexture,lr=On||S.options.rotating||S.options.zooming||Ut.kind==="composite"||Ut.kind==="camera"?le.LINEAR:le.NEAREST);else{const Oi=h.layout.get("icon-size").constantOr(0)!==1||at.iconsNeedLinear;$i=rt.imageAtlasTexture,Sr=wt||S.options.rotating||S.options.zooming||Oi||On?le.LINEAR:le.NEAREST,sr=rt.imageAtlasTexture.size}const Lr=c.aN(rt,1,S.transform.zoom),Ca=Ya(be,S.transform,Lr),Vl=c.N();c.aB(Vl,Ca);const Zl=xh(ve,be,S.transform,Lr),sl=c.aO(_e,rt,A,M),Ro=_e.getProjectionData({overscaledTileID:Je,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),Zu=ze&&at.hasTextData(),Fh=h.layout.get("icon-text-fit")!=="none"&&Zu&&at.hasIconData();if(Ee){const Oi=S.style.map.terrain?(Yr,ra)=>S.style.map.terrain.getElevation(Je,Yr,ra):null,qi=h.layout.get("text-rotation-alignment")==="map";Vs(at,S,b,Ca,Vl,ve,F,qi,Je.toUnwrapped(),_e.width,_e.height,sl,Oi)}const ll=b&&ze||Fh,Oo=Ee||ll?ht:ve?Ca:S.transform.clipSpaceToPixelsMatrix,as=wt&&h.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let zs;zs=wt?at.iconsInText?ro(Ut.kind,Ki,Pe,ve,Ee,ll,S,Oo,Zl,sl,sr,Aa,st):cc(Ut.kind,Ki,Pe,ve,Ee,ll,S,Oo,Zl,sl,b,sr,0,st):xs(Ut.kind,Ki,Pe,ve,Ee,ll,S,Oo,Zl,sl,b,sr,st);const Is={program:ki,buffers:Dt,uniformValues:zs,projectionData:Ro,atlasTexture:$i,atlasTextureIcon:Dr,atlasInterpolation:Sr,atlasInterpolationIcon:lr,isSDF:wt,hasHalo:as};if(Te&&at.canOverlap){ke=!0;const Oi=Dt.segments.get();for(const qi of Oi)Ve.push({segments:new c.aX([qi]),sortKey:qi.sortKey,state:Is,terrainData:Zi})}else Ve.push({segments:Dt.segments,sortKey:0,state:Is,terrainData:Zi})}ke&&Ve.sort(((Je,rt)=>Je.sortKey-rt.sortKey));for(const Je of Ve){const rt=Je.state;if(ie.activeTexture.set(le.TEXTURE0),rt.atlasTexture.bind(rt.atlasInterpolation,le.CLAMP_TO_EDGE),rt.atlasTextureIcon&&(ie.activeTexture.set(le.TEXTURE1),rt.atlasTextureIcon&&rt.atlasTextureIcon.bind(rt.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),rt.isSDF){const at=rt.uniformValues;rt.hasHalo&&(at.u_is_halo=1,mr(rt.buffers,Je.segments,h,S,rt.program,Ne,q,Y,at,rt.projectionData,Je.terrainData)),at.u_is_halo=0}mr(rt.buffers,Je.segments,h,S,rt.program,Ne,q,Y,rt.uniformValues,rt.projectionData,Je.terrainData)}}function mr(S,i,h,y,b,A,M,D,N,F,q){const Y=y.context;b.draw(Y,Y.gl.TRIANGLES,A,M,D,$n.backCCW,N,q,F,h.id,S.layoutVertexBuffer,S.indexBuffer,i,h.paint,y.transform.zoom,S.programConfigurations.get(h.id),S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer)}function lo(S,i,h,y,b){const A=S.context,M=A.gl,D=Kn.disabled,N=new zi([M.ONE,M.ONE],c.bp.transparent,[!0,!0,!0,!0]),F=i.getBucket(h);if(!F)return;const q=y.key;let Y=h.heatmapFbos.get(q);Y||(Y=ui(A,i.tileSize,i.tileSize),h.heatmapFbos.set(q,Y)),A.bindFramebuffer.set(Y.framebuffer),A.viewport.set([0,0,i.tileSize,i.tileSize]),A.clear({color:c.bp.transparent});const W=F.programConfigurations.get(h.id),ie=S.useProgram("heatmap",W,!b),le=S.transform.getProjectionData({overscaledTileID:i.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),_e=S.style.map.terrain.getTerrainData(y);ie.draw(A,M.TRIANGLES,kn.disabled,D,N,$n.disabled,Jo(i,S.transform.zoom,h.paint.get("heatmap-intensity"),1),_e,le,h.id,F.layoutVertexBuffer,F.indexBuffer,F.segments,h.paint,S.transform.zoom,W)}function Ci(S,i,h,y,b){const A=S.context,M=A.gl,D=S.transform;A.setColorMode(S.colorModeForRenderPass());const N=Jn(A,i),F=h.key,q=i.heatmapFbos.get(F);if(!q)return;A.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,q.colorAttachment.get()),A.activeTexture.set(M.TEXTURE1),N.bind(M.LINEAR,M.CLAMP_TO_EDGE);const Y=D.getProjectionData({overscaledTileID:h,applyTerrainMatrix:b,applyGlobeMatrix:!y});S.useProgram("heatmapTexture").draw(A,M.TRIANGLES,kn.disabled,Kn.disabled,S.colorModeForRenderPass(),$n.disabled,xd(S,i,0,1),null,Y,i.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments,i.paint,D.zoom),q.destroy(),i.heatmapFbos.delete(F)}function ui(S,i,h){var y,b;const A=S.gl,M=A.createTexture();A.bindTexture(A.TEXTURE_2D,M),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR);const D=(y=S.HALF_FLOAT)!==null&&y!==void 0?y:A.UNSIGNED_BYTE,N=(b=S.RGBA16F)!==null&&b!==void 0?b:A.RGBA;A.texImage2D(A.TEXTURE_2D,0,N,i,h,0,A.RGBA,D,null);const F=S.createFramebuffer(i,h,!1,!1);return F.colorAttachment.set(M),F}function Jn(S,i){return i.colorRampTexture||(i.colorRampTexture=new c.T(S,i.colorRamp,S.gl.RGBA)),i.colorRampTexture}function Qs(S,i,h,y,b,A,M,D){let N=256;if(b.stepInterpolant){const F=i.getSource().maxzoom,q=M.canonical.z===F?Math.ceil(1<<S.transform.maxZoom-M.canonical.z):1;N=c.an(c.ce(A.maxLineLength/c.a5*1024*q),256,h.maxTextureSize)}return D.gradient=c.cf({expression:b.gradientExpression(),evaluationKey:"lineProgress",resolution:N,image:D.gradient||void 0,clips:A.lineClipsArray}),D.texture?D.texture.update(D.gradient):D.texture=new c.T(h,D.gradient,y.RGBA),D.version=b.gradientVersion,D.texture}function xo(S,i,h,y,b){S.activeTexture.set(i.TEXTURE0),h.imageAtlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE),y.updatePaintBuffers(b)}function er(S,i,h,y,b,A){(b||S.lineAtlas.dirty)&&(i.activeTexture.set(h.TEXTURE0),S.lineAtlas.bind(i)),y.updatePaintBuffers(A)}function co(S,i,h,y,b,A,M){const D=A.gradients[b.id];let N=D.texture;b.gradientVersion!==D.version&&(N=Qs(S,i,h,y,b,A,M,D)),h.activeTexture.set(y.TEXTURE0),N.bind(b.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}function Za(S,i,h,y,b,A,M,D,N){const F=A.gradients[b.id];let q=F.texture;b.gradientVersion!==F.version&&(q=Qs(S,i,h,y,b,A,M,F)),h.activeTexture.set(y.TEXTURE0),q.bind(b.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE),h.activeTexture.set(y.TEXTURE1),S.lineAtlas.bind(h),D.updatePaintBuffers(N)}function ar(S,i,h,y,b){if(!h||!y||!y.imageAtlas)return;const A=y.imageAtlas.patternPositions;let M=A[h.to.toString()],D=A[h.from.toString()];if(!M&&D&&(M=D),!D&&M&&(D=M),!M||!D){const N=b.getPaintProperty(i);M=A[N],D=A[N]}M&&D&&S.setConstantPatternPositions(M,D)}function wo(S,i,h,y,b,A,M,D){const N=S.context.gl,F="fill-pattern",q=h.paint.get(F),Y=q&&q.constantOr(1),W=h.getCrossfadeParameters();let ie,le,_e,be,ve;const Ee=S.transform,Pe=h.paint.get("fill-translate"),Te=h.paint.get("fill-translate-anchor");M?(le=Y&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ie=N.LINES):(le=Y?"fillPattern":"fill",ie=N.TRIANGLES);const ke=q.constantOr(null);for(const Ne of y){const ze=i.getTile(Ne);if(Y&&!ze.patternsLoaded())continue;const Ve=ze.getBucket(h);if(!Ve)continue;const st=Ve.programConfigurations.get(h.id),Je=S.useProgram(le,st),rt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Ne);Y&&(S.context.activeTexture.set(N.TEXTURE0),ze.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),st.updatePaintBuffers(W)),ar(st,F,ke,ze,h);const at=Ee.getProjectionData({overscaledTileID:Ne,applyGlobeMatrix:!D,applyTerrainMatrix:!0}),Dt=c.aO(Ee,ze,Pe,Te);if(M){be=Ve.indexBuffer2,ve=Ve.segments2;const wt=[N.drawingBufferWidth,N.drawingBufferHeight];_e=le==="fillOutlinePattern"&&Y?Kc(S,W,ze,wt,Dt):Yc(wt,Dt)}else be=Ve.indexBuffer,ve=Ve.segments,_e=Y?Po(S,W,ze,Dt):{u_fill_translate:Dt};const Ot=S.stencilModeForClipping(Ne);Je.draw(S.context,ie,b,Ot,A,$n.backCCW,_e,rt,at,h.id,Ve.layoutVertexBuffer,be,ve,h.paint,S.transform.zoom,st)}}function ws(S,i,h,y,b,A,M,D){const N=S.context,F=N.gl,q="fill-extrusion-pattern",Y=h.paint.get(q),W=Y.constantOr(1),ie=h.getCrossfadeParameters(),le=h.paint.get("fill-extrusion-opacity"),_e=Y.constantOr(null),be=S.transform;for(const ve of y){const Ee=i.getTile(ve),Pe=Ee.getBucket(h);if(!Pe)continue;const Te=S.style.map.terrain&&S.style.map.terrain.getTerrainData(ve),ke=Pe.programConfigurations.get(h.id),Ne=S.useProgram(W?"fillExtrusionPattern":"fillExtrusion",ke);W&&(S.context.activeTexture.set(F.TEXTURE0),Ee.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),ke.updatePaintBuffers(ie));const ze=be.getProjectionData({overscaledTileID:ve,applyGlobeMatrix:!D,applyTerrainMatrix:!0});ar(ke,q,_e,Ee,h);const Ve=c.aO(be,Ee,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),st=h.paint.get("fill-extrusion-vertical-gradient"),Je=W?zh(S,st,le,Ve,ve,ie,Ee):ko(S,st,le,Ve);Ne.draw(N,N.gl.TRIANGLES,b,A,M,$n.backCCW,Je,Te,ze,h.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,h.paint,S.transform.zoom,ke,S.style.map.terrain&&Pe.centroidVertexBuffer)}}function Ss(S,i,h,y,b,A,M,D,N){var F;const q=S.style.projection,Y=S.context,W=S.transform,ie=Y.gl,le=[`#define NUM_ILLUMINATION_SOURCES ${h.paint.get("hillshade-highlight-color").values.length}`],_e=S.useProgram("hillshade",null,!1,le),be=!S.options.moving;for(const ve of y){const Ee=i.getTile(ve),Pe=Ee.fbo;if(!Pe)continue;const Te=q.getMeshFromTileID(Y,ve.canonical,D,!0,"raster"),ke=(F=S.style.map.terrain)===null||F===void 0?void 0:F.getTerrainData(ve);Y.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,Pe.colorAttachment.get());const Ne=W.getProjectionData({overscaledTileID:ve,aligned:be,applyGlobeMatrix:!N,applyTerrainMatrix:!0});_e.draw(Y,ie.TRIANGLES,A,b[ve.overscaledZ],M,$n.backCCW,sc(S,Ee,h),ke,Ne,h.id,Te.vertexBuffer,Te.indexBuffer,Te.segments)}}function el(S,i,h,y,b,A,M,D,N){var F;const q=S.style.projection,Y=S.context,W=S.transform,ie=Y.gl,le=S.useProgram("colorRelief"),_e=!S.options.moving;let be=!0,ve=0;for(const Ee of y){const Pe=i.getTile(Ee),Te=Pe.dem;if(be){const Je=ie.getParameter(ie.MAX_TEXTURE_SIZE),{elevationTexture:rt,colorTexture:at}=h.getColorRampTextures(Y,Je,Te.getUnpackVector());Y.activeTexture.set(ie.TEXTURE1),rt.bind(ie.NEAREST,ie.CLAMP_TO_EDGE),Y.activeTexture.set(ie.TEXTURE4),at.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),be=!1,ve=rt.size[0]}if(!Te||!Te.data)continue;const ke=Te.stride,Ne=Te.getPixels();if(Y.activeTexture.set(ie.TEXTURE0),Y.pixelStoreUnpackPremultiplyAlpha.set(!1),Pe.demTexture=Pe.demTexture||S.getTileTexture(ke),Pe.demTexture){const Je=Pe.demTexture;Je.update(Ne,{premultiply:!1}),Je.bind(ie.LINEAR,ie.CLAMP_TO_EDGE)}else Pe.demTexture=new c.T(Y,Ne,ie.RGBA,{premultiply:!1}),Pe.demTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE);const ze=q.getMeshFromTileID(Y,Ee.canonical,D,!0,"raster"),Ve=(F=S.style.map.terrain)===null||F===void 0?void 0:F.getTerrainData(Ee),st=W.getProjectionData({overscaledTileID:Ee,aligned:_e,applyGlobeMatrix:!N,applyTerrainMatrix:!0});le.draw(Y,ie.TRIANGLES,A,b[Ee.overscaledZ],M,$n.backCCW,hf(h,Pe.dem,ve),Ve,st,h.id,ze.vertexBuffer,ze.indexBuffer,ze.segments)}}const ts=[new c.P(0,0),new c.P(c.a5,0),new c.P(c.a5,c.a5),new c.P(0,c.a5)];function So(S,i,h,y,b,A,M,D,N=!1,F=!1){const q=y[y.length-1].overscaledZ,Y=S.context,W=Y.gl,ie=S.useProgram("raster"),le=S.transform,_e=S.style.projection,be=S.colorModeForRenderPass(),ve=!S.options.moving,Ee=h.paint.get("raster-opacity"),Pe=h.paint.get("raster-resampling"),Te=h.paint.get("raster-fade-duration"),ke=!!S.style.map.terrain;for(const Ne of y){const ze=S.getDepthModeForSublayer(Ne.overscaledZ-q,Ee===1?kn.ReadWrite:kn.ReadOnly,W.LESS),Ve=i.getTile(Ne),st=Pe==="nearest"?W.NEAREST:W.LINEAR;Y.activeTexture.set(W.TEXTURE0),Ve.texture.bind(st,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),Y.activeTexture.set(W.TEXTURE1);const{parentTile:Je,parentScaleBy:rt,parentTopLeft:at,fadeValues:Dt}=Ts(Ve,i,Te,ke);Ve.fadeOpacity=Dt.tileOpacity,Je?(Je.fadeOpacity=Dt.parentTileOpacity,Je.texture.bind(st,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST)):Ve.texture.bind(st,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),Ve.texture.useMipmap&&Y.extTextureFilterAnisotropic&&S.transform.pitch>20&&W.texParameterf(W.TEXTURE_2D,Y.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Y.extTextureFilterAnisotropicMax);const Ot=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Ne),wt=le.getProjectionData({overscaledTileID:Ne,aligned:ve,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),Ut=Qc(at,rt,Dt.fadeMix,h,D),On=_e.getMeshFromTileID(Y,Ne.canonical,A,M,"raster");ie.draw(Y,W.TRIANGLES,ze,b?b[Ne.overscaledZ]:Kn.disabled,be,N?$n.frontCCW:$n.backCCW,Ut,Ot,wt,h.id,On.vertexBuffer,On.indexBuffer,On.segments)}}function Ts(S,i,h,y){const b={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(h===0||y)return b;if(S.fadingParentID){const A=i.getLoadedTile(S.fadingParentID);if(!A)return b;const M=Math.pow(2,A.tileID.overscaledZ-S.tileID.overscaledZ),D=[S.tileID.canonical.x*M%1,S.tileID.canonical.y*M%1],N=(function(F,q,Y){const W=ee(),ie=(W-q.timeAdded)/Y,le=F.fadingDirection===tt.Incoming,_e=c.an((W-F.timeAdded)/Y,0,1),be=c.an(1-ie,0,1),ve=le?_e:be;return{tileOpacity:ve,parentTileOpacity:le?be:_e,fadeMix:{opacity:1,mix:1-ve}}})(S,A,h);return{parentTile:A,parentScaleBy:M,parentTopLeft:D,fadeValues:N}}if(S.selfFading){const A=(function(M,D){const N=(ee()-M.timeAdded)/D,F=c.an(N,0,1);return{tileOpacity:F,fadeMix:{opacity:F,mix:0}}})(S,h);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:A}}return b}const gc=new c.bp(1,0,0,1),Rl=new c.bp(0,1,0,1),pf=new c.bp(0,0,1,1),mf=new c.bp(1,0,1,1),ns=new c.bp(0,1,1,1);function Dh(S,i,h,y){Xr(S,0,i+h/2,S.transform.width,h,y)}function yc(S,i,h,y){Xr(S,i-h/2,0,h,S.transform.height,y)}function Xr(S,i,h,y,b,A){const M=S.context,D=M.gl;D.enable(D.SCISSOR_TEST),D.scissor(i*S.pixelRatio,h*S.pixelRatio,y*S.pixelRatio,b*S.pixelRatio),M.clear({color:A}),D.disable(D.SCISSOR_TEST)}function Td(S,i,h){const y=S.context,b=y.gl,A=S.useProgram("debug"),M=kn.disabled,D=Kn.disabled,N=S.colorModeForRenderPass(),F="$debug",q=S.style.map.terrain&&S.style.map.terrain.getTerrainData(h);y.activeTexture.set(b.TEXTURE0);const Y=i.getTileByID(h.key).latestRawTileData,W=Math.floor((Y&&Y.byteLength||0)/1024),ie=i.getTile(h).tileSize,le=512/Math.min(ie,512)*(h.overscaledZ/S.transform.zoom)*.5;let _e=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(_e+=` => ${h.overscaledZ}`),(function(ve,Ee){ve.initDebugOverlayCanvas();const Pe=ve.debugOverlayCanvas,Te=ve.context.gl,ke=ve.debugOverlayCanvas.getContext("2d");ke.clearRect(0,0,Pe.width,Pe.height),ke.shadowColor="white",ke.shadowBlur=2,ke.lineWidth=1.5,ke.strokeStyle="white",ke.textBaseline="top",ke.font="bold 36px Open Sans, sans-serif",ke.fillText(Ee,5,5),ke.strokeText(Ee,5,5),ve.debugOverlayTexture.update(Pe),ve.debugOverlayTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE)})(S,`${_e} ${W}kB`);const be=S.transform.getProjectionData({overscaledTileID:h,applyGlobeMatrix:!0,applyTerrainMatrix:!0});A.draw(y,b.TRIANGLES,M,D,zi.alphaBlended,$n.disabled,Do(c.bp.transparent,le),null,be,F,S.debugBuffer,S.quadTriangleIndexBuffer,S.debugSegments),A.draw(y,b.LINE_STRIP,M,D,N,$n.disabled,Do(c.bp.red),q,be,F,S.debugBuffer,S.tileBorderIndexBuffer,S.debugSegments)}function gf(S,i,h,y){const{isRenderingGlobe:b}=y,A=S.context,M=A.gl,D=S.transform,N=S.colorModeForRenderPass(),F=S.getDepthModeFor3D(),q=S.useProgram("terrain");A.bindFramebuffer.set(null),A.viewport.set([0,0,S.width,S.height]);for(const Y of h){const W=i.getTerrainMesh(Y.tileID),ie=S.renderToTexture.getTexture(Y),le=i.getTerrainData(Y.tileID);A.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,ie.texture);const _e=i.getMeshFrameDelta(D.zoom),be=D.calculateFogMatrix(Y.tileID.toUnwrapped()),ve=vd(_e,be,S.style.sky,D.pitch,b),Ee=D.getProjectionData({overscaledTileID:Y.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});q.draw(A,M.TRIANGLES,F,Kn.disabled,N,$n.backCCW,ve,le,Ee,"terrain",W.vertexBuffer,W.indexBuffer,W.segments)}}function yp(S,i){if(!i.mesh){const h=new c.aW;h.emplaceBack(-1,-1),h.emplaceBack(1,-1),h.emplaceBack(1,1),h.emplaceBack(-1,1);const y=new c.aY;y.emplaceBack(0,1,2),y.emplaceBack(0,2,3),i.mesh=new Mi(S.createVertexBuffer(h,Ja.members),S.createIndexBuffer(y),c.aX.simpleSegment(0,0,h.length,y.length))}return i.mesh}class Um{constructor(i,h){this.context=new he(i),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Li.maxOverzooming+Li.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Hr}resize(i,h,y){if(this.width=Math.floor(i*y),this.height=Math.floor(h*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const i=this.context,h=new c.aW;h.emplaceBack(0,0),h.emplaceBack(c.a5,0),h.emplaceBack(0,c.a5),h.emplaceBack(c.a5,c.a5),this.tileExtentBuffer=i.createVertexBuffer(h,Ja.members),this.tileExtentSegments=c.aX.simpleSegment(0,0,4,2);const y=new c.aW;y.emplaceBack(0,0),y.emplaceBack(c.a5,0),y.emplaceBack(0,c.a5),y.emplaceBack(c.a5,c.a5),this.debugBuffer=i.createVertexBuffer(y,Ja.members),this.debugSegments=c.aX.simpleSegment(0,0,4,5);const b=new c.ch;b.emplaceBack(0,0,0,0),b.emplaceBack(c.a5,0,c.a5,0),b.emplaceBack(0,c.a5,0,c.a5),b.emplaceBack(c.a5,c.a5,c.a5,c.a5),this.rasterBoundsBuffer=i.createVertexBuffer(b,lf.members),this.rasterBoundsSegments=c.aX.simpleSegment(0,0,4,2);const A=new c.aW;A.emplaceBack(0,0),A.emplaceBack(c.a5,0),A.emplaceBack(0,c.a5),A.emplaceBack(c.a5,c.a5),this.rasterBoundsBufferPosOnly=i.createVertexBuffer(A,Ja.members),this.rasterBoundsSegmentsPosOnly=c.aX.simpleSegment(0,0,4,5);const M=new c.aW;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(M,Ja.members),this.viewportSegments=c.aX.simpleSegment(0,0,4,2);const D=new c.ci;D.emplaceBack(0),D.emplaceBack(1),D.emplaceBack(3),D.emplaceBack(2),D.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(D);const N=new c.aY;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(N);const F=this.context.gl;this.stencilClearMode=new Kn({func:F.ALWAYS,mask:0},0,255,F.ZERO,F.ZERO,F.ZERO),this.tileExtentMesh=new Mi(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const i=this.context,h=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=c.N();c.c7(y,0,this.width,this.height,0,0,1),c.Q(y,y,[h.drawingBufferWidth,h.drawingBufferHeight,0]);const b={mainMatrix:y,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:y};this.useProgram("clippingMask",null,!0).draw(i,h.TRIANGLES,kn.disabled,this.stencilClearMode,zi.disabled,$n.disabled,null,null,b,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,h,y){if(this.currentStencilSource===i.source||!i.isTileClipped()||!h||!h.length)return;this.currentStencilSource=i.source,this.nextStencilID+h.length>256&&this.clearStencil();const b=this.context;b.setColorMode(zi.disabled),b.setDepthMode(kn.disabled);const A={};for(const M of h)A[M.key]=this.nextStencilID++;this._renderTileMasks(A,h,y,!0),this._renderTileMasks(A,h,y,!1),this._tileClippingMaskIDs=A}_renderTileMasks(i,h,y,b){const A=this.context,M=A.gl,D=this.style.projection,N=this.transform,F=this.useProgram("clippingMask");for(const q of h){const Y=i[q.key],W=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),ie=D.getMeshFromTileID(this.context,q.canonical,b,!0,"stencil"),le=N.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!y,applyTerrainMatrix:!0});F.draw(A,M.TRIANGLES,kn.disabled,new Kn({func:M.ALWAYS,mask:0},Y,255,M.KEEP,M.KEEP,M.REPLACE),zi.disabled,y?$n.disabled:$n.backCCW,null,W,le,"$clipping",ie.vertexBuffer,ie.indexBuffer,ie.segments)}}_renderTilesDepthBuffer(){const i=this.context,h=i.gl,y=this.style.projection,b=this.transform,A=this.useProgram("depth"),M=this.getDepthModeFor3D(),D=hr(b,{tileSize:b.tileSize});for(const N of D){const F=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),q=y.getMeshFromTileID(this.context,N.canonical,!0,!0,"raster"),Y=b.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!0,applyTerrainMatrix:!0});A.draw(i,h.TRIANGLES,M,Kn.disabled,zi.disabled,$n.backCCW,null,F,Y,"$clipping",q.vertexBuffer,q.indexBuffer,q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,h=this.context.gl;return new Kn({func:h.NOTEQUAL,mask:255},i,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(i){const h=this.context.gl;return new Kn({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,h.KEEP,h.KEEP,h.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(i){const h=this.context.gl,y=i.sort(((M,D)=>D.overscaledZ-M.overscaledZ)),b=y[y.length-1].overscaledZ,A=y[0].overscaledZ-b+1;if(A>1){this.currentStencilSource=void 0,this.nextStencilID+A>256&&this.clearStencil();const M={};for(let D=0;D<A;D++)M[D+b]=new Kn({func:h.GEQUAL,mask:255},D+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=A,[M,y]}return[{[b]:Kn.disabled},y]}stencilConfigForOverlapTwoPass(i){const h=this.context.gl,y=i.sort(((M,D)=>D.overscaledZ-M.overscaledZ)),b=y[y.length-1].overscaledZ,A=y[0].overscaledZ-b+1;if(this.clearStencil(),A>1){const M={},D={};for(let N=0;N<A;N++)M[N+b]=new Kn({func:h.GREATER,mask:255},A+1+N,255,h.KEEP,h.KEEP,h.REPLACE),D[N+b]=new Kn({func:h.GREATER,mask:255},1+N,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID=2*A+1,[M,D,y]}return this.nextStencilID=3,[{[b]:new Kn({func:h.GREATER,mask:255},2,255,h.KEEP,h.KEEP,h.REPLACE)},{[b]:new Kn({func:h.GREATER,mask:255},1,255,h.KEEP,h.KEEP,h.REPLACE)},y]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new zi([i.CONSTANT_COLOR,i.ONE],new c.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?zi.unblended:zi.alphaBlended}getDepthModeForSublayer(i,h,y){if(!this.opaquePassEnabledForLayer())return kn.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new kn(y||this.context.gl.LEQUAL,h,[b,b])}getDepthModeFor3D(){return new kn(this.context.gl.LEQUAL,kn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,h){var y,b;this.style=i,this.options=h,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(ee()),this.imageManager.beginFrame();const A=this.style._order,M=this.style.tileManagers,D={},N={},F={},q={isRenderingToTexture:!1,isRenderingGlobe:((y=i.projection)===null||y===void 0?void 0:y.transitionState)>0};for(const W in M){const ie=M[W];ie.used&&ie.prepare(this.context),D[W]=ie.getVisibleCoordinates(!1),N[W]=D[W].slice().reverse(),F[W]=ie.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let W=0;W<A.length;W++)if(this.style._layers[A[W]].is3D()){this.opaquePassCutoff=W;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const W of A){const ie=this.style._layers[W];if(!ie.hasOffscreenPass()||ie.isHidden(this.transform.zoom))continue;const le=N[ie.source];(ie.type==="custom"||le.length)&&this.renderLayer(this,M[ie.source],ie,le,q)}if((b=this.style.projection)===null||b===void 0||b.updateGPUdependent({context:this.context,useProgram:W=>this.useProgram(W)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?c.bp.black:c.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(W,ie){const le=W.context,_e=le.gl,be=((Ne,ze,Ve)=>{const st=Math.cos(ze.rollInRadians),Je=Math.sin(ze.rollInRadians),rt=pi(ze),at=ze.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ne.properties.get("sky-color"),u_horizon_color:Ne.properties.get("horizon-color"),u_horizon:[(ze.width/2-rt*Je)*Ve,(ze.height/2+rt*st)*Ve],u_horizon_normal:[-Je,st],u_sky_horizon_blend:Ne.properties.get("sky-horizon-blend")*ze.height/2*Ve,u_sky_blend:at}})(ie,W.style.map.transform,W.pixelRatio),ve=new kn(_e.LEQUAL,kn.ReadWrite,[0,1]),Ee=Kn.disabled,Pe=W.colorModeForRenderPass(),Te=W.useProgram("sky"),ke=yp(le,ie);Te.draw(le,_e.TRIANGLES,ve,Ee,Pe,$n.disabled,be,null,void 0,"sky",ke.vertexBuffer,ke.indexBuffer,ke.segments)})(this,this.style.sky),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=A.length-1;this.currentLayer>=0;this.currentLayer--){const W=this.style._layers[A[this.currentLayer]],ie=M[W.source],le=D[W.source];this._renderTileClippingMasks(W,le,!1),this.renderLayer(this,ie,W,le,q)}this.renderPass="translucent";let Y=!1;for(this.currentLayer=0;this.currentLayer<A.length;this.currentLayer++){const W=this.style._layers[A[this.currentLayer]],ie=M[W.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(W,q))continue;this.opaquePassEnabledForLayer()||Y||(Y=!0,q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const le=(W.type==="symbol"?F:N)[W.source];this._renderTileClippingMasks(W,D[W.source],!!this.renderToTexture),this.renderLayer(this,ie,W,le,q)}if(q.isRenderingGlobe&&(function(W,ie,le){const _e=W.context,be=_e.gl,ve=W.useProgram("atmosphere"),Ee=new kn(be.LEQUAL,kn.ReadOnly,[0,1]),Pe=W.transform,Te=(function(at,Dt){const Ot=at.properties.get("position"),wt=[-Ot.x,-Ot.y,-Ot.z],Ut=c.ar(new Float64Array(16));return at.properties.get("anchor")==="map"&&(c.bg(Ut,Ut,Dt.rollInRadians),c.bh(Ut,Ut,-Dt.pitchInRadians),c.bg(Ut,Ut,Dt.bearingInRadians),c.bh(Ut,Ut,Dt.center.lat*Math.PI/180),c.bJ(Ut,Ut,-Dt.center.lng*Math.PI/180)),c.cg(wt,wt,Ut),wt})(le,W.transform),ke=Pe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ne=ie.properties.get("atmosphere-blend")*ke.projectionTransition;if(Ne===0)return;const ze=Gs(Pe.worldSize,Pe.center.lat),Ve=Pe.inverseProjectionMatrix,st=new Float64Array(4);st[3]=1,c.aH(st,st,Pe.modelViewProjectionMatrix),st[0]/=st[3],st[1]/=st[3],st[2]/=st[3],st[3]=1,c.aH(st,st,Ve),st[0]/=st[3],st[1]/=st[3],st[2]/=st[3],st[3]=1;const Je=((at,Dt,Ot,wt,Ut)=>({u_sun_pos:at,u_atmosphere_blend:Dt,u_globe_position:Ot,u_globe_radius:wt,u_inv_proj_matrix:Ut}))(Te,Ne,[st[0],st[1],st[2]],ze,Ve),rt=yp(_e,ie);ve.draw(_e,be.TRIANGLES,Ee,Kn.disabled,zi.alphaBlended,$n.disabled,Je,null,null,"atmosphere",rt.vertexBuffer,rt.indexBuffer,rt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const W=(function(ie,le){let _e=null;const be=Object.values(ie._layers).flatMap((Te=>Te.source&&!Te.isHidden(le)?[ie.tileManagers[Te.source]]:[])),ve=be.filter((Te=>Te.getSource().type==="vector")),Ee=be.filter((Te=>Te.getSource().type!=="vector")),Pe=Te=>{(!_e||_e.getSource().maxzoom<Te.getSource().maxzoom)&&(_e=Te)};return ve.forEach((Te=>Pe(Te))),_e||Ee.forEach((Te=>Pe(Te))),_e})(this.style,this.transform.zoom);W&&(function(ie,le,_e){for(let be=0;be<_e.length;be++)Td(ie,le,_e[be])})(this,W,W.getVisibleCoordinates())}this.options.showPadding&&(function(W){const ie=W.transform.padding;Dh(W,W.transform.height-(ie.top||0),3,gc),Dh(W,ie.bottom||0,3,Rl),yc(W,ie.left||0,3,pf),yc(W,W.transform.width-(ie.right||0),3,mf);const le=W.transform.centerPoint;(function(_e,be,ve,Ee){Xr(_e,be-1,ve-10,2,20,Ee),Xr(_e,be-10,ve-1,20,2,Ee)})(W,le.x,W.transform.height-le.y,ns)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const h=this.terrainFacilitator.matrix,y=this.transform.modelViewProjectionMatrix;let b=this.terrainFacilitator.dirty;b||(b=i?!c.cj(h,y):!c.ck(h,y)),b||(b=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),b&&(c.cl(h,y),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(A,M){const D=A.context,N=D.gl,F=A.transform,q=zi.unblended,Y=new kn(N.LEQUAL,kn.ReadWrite,[0,1]),W=M.tileManager.getRenderableTiles(),ie=A.useProgram("terrainDepth");D.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),D.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),D.clear({color:c.bp.transparent,depth:1});for(const le of W){const _e=M.getTerrainMesh(le.tileID),be=M.getTerrainData(le.tileID),ve=F.getProjectionData({overscaledTileID:le.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ee={u_ele_delta:M.getMeshFrameDelta(F.zoom)};ie.draw(D,N.TRIANGLES,Y,Kn.disabled,q,$n.backCCW,Ee,be,ve,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments)}D.bindFramebuffer.set(null),D.viewport.set([0,0,A.width,A.height])})(this,this.style.map.terrain),(function(A,M){const D=A.context,N=D.gl,F=A.transform,q=zi.unblended,Y=new kn(N.LEQUAL,kn.ReadWrite,[0,1]),W=M.getCoordsTexture(),ie=M.tileManager.getRenderableTiles(),le=A.useProgram("terrainCoords");D.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),D.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),D.clear({color:c.bp.transparent,depth:1}),M.coordsIndex=[];for(const _e of ie){const be=M.getTerrainMesh(_e.tileID),ve=M.getTerrainData(_e.tileID);D.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,W.texture);const Ee={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(F.zoom)},Pe=F.getProjectionData({overscaledTileID:_e.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});le.draw(D,N.TRIANGLES,Y,Kn.disabled,q,$n.backCCW,Ee,ve,Pe,"terrain",be.vertexBuffer,be.indexBuffer,be.segments),M.coordsIndex.push(_e.tileID.key)}D.bindFramebuffer.set(null),D.viewport.set([0,0,A.width,A.height])})(this,this.style.map.terrain))}renderLayer(i,h,y,b,A){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(b||[]).length)&&(this.id=y.id,c.cm(y)?(function(M,D,N,F,q,Y){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:W}=Y,ie=Kn.disabled,le=M.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(_e,be,ve,Ee,Pe,Te,ke,Ne,ze){const Ve=be.transform,st=be.style.map.terrain,Je=Pe==="map",rt=Te==="map";for(const at of _e){const Dt=Ee.getTile(at),Ot=Dt.getBucket(ve);if(!Ot||!Ot.text||!Ot.text.segments.get().length)continue;const wt=c.ay(Ot.textSizeData,Ve.zoom),Ut=c.aN(Dt,1,be.transform.zoom),On=Ya(Je,be.transform,Ut),ki=ve.layout.get("icon-text-fit")!=="none"&&Ot.hasIconData();if(wt){const Ki=Math.pow(2,Ve.zoom-Dt.tileID.overscaledZ),Zi=st?(sr,$i)=>st.getElevation(at,sr,$i):null;gn(Ot,Je,rt,ze,Ve,On,Ki,wt,ki,c.aO(Ve,Dt,ke,Ne),at.toUnwrapped(),Zi)}}})(F,M,N,D,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),q),N.paint.get("icon-opacity").constantOr(1)!==0&&kr(M,D,N,F,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),ie,le,W),N.paint.get("text-opacity").constantOr(1)!==0&&kr(M,D,N,F,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),ie,le,W),D.map.showCollisionBoxes&&(We(M,D,N,F,!0),We(M,D,N,F,!1))})(i,h,y,b,this.style.placement.variableOffsets,A):c.cn(y)?(function(M,D,N,F,q){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=q,W=N.paint.get("circle-opacity"),ie=N.paint.get("circle-stroke-width"),le=N.paint.get("circle-stroke-opacity"),_e=!N.layout.get("circle-sort-key").isConstant();if(W.constantOr(1)===0&&(ie.constantOr(1)===0||le.constantOr(1)===0))return;const be=M.context,ve=be.gl,Ee=M.transform,Pe=M.getDepthModeForSublayer(0,kn.ReadOnly),Te=Kn.disabled,ke=M.colorModeForRenderPass(),Ne=[],ze=Ee.getCircleRadiusCorrection();for(let Ve=0;Ve<F.length;Ve++){const st=F[Ve],Je=D.getTile(st),rt=Je.getBucket(N);if(!rt)continue;const at=N.paint.get("circle-translate"),Dt=N.paint.get("circle-translate-anchor"),Ot=c.aO(Ee,Je,at,Dt),wt=rt.programConfigurations.get(N.id),Ut=M.useProgram("circle",wt),On=rt.layoutVertexBuffer,ki=rt.indexBuffer,Ki=M.style.map.terrain&&M.style.map.terrain.getTerrainData(st),Zi={programConfiguration:wt,program:Ut,layoutVertexBuffer:On,indexBuffer:ki,uniformValues:Jc(M,Je,N,Ot,ze),terrainData:Ki,projectionData:Ee.getProjectionData({overscaledTileID:st,applyGlobeMatrix:!Y,applyTerrainMatrix:!0})};if(_e){const sr=rt.segments.get();for(const $i of sr)Ne.push({segments:new c.aX([$i]),sortKey:$i.sortKey,state:Zi})}else Ne.push({segments:rt.segments,sortKey:0,state:Zi})}_e&&Ne.sort(((Ve,st)=>Ve.sortKey-st.sortKey));for(const Ve of Ne){const{programConfiguration:st,program:Je,layoutVertexBuffer:rt,indexBuffer:at,uniformValues:Dt,terrainData:Ot,projectionData:wt}=Ve.state;Je.draw(be,ve.TRIANGLES,Pe,Te,ke,$n.backCCW,Dt,Ot,wt,N.id,rt,at,Ve.segments,N.paint,M.transform.zoom,st)}})(i,h,y,b,A):c.co(y)?(function(M,D,N,F,q){if(N.paint.get("heatmap-opacity")===0)return;const Y=M.context,{isRenderingToTexture:W,isRenderingGlobe:ie}=q;if(M.style.map.terrain){for(const le of F){const _e=D.getTile(le);D.hasRenderableParent(le)||(M.renderPass==="offscreen"?lo(M,_e,N,le,ie):M.renderPass==="translucent"&&Ci(M,N,le,W,ie))}Y.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?(function(le,_e,be,ve){const Ee=le.context,Pe=Ee.gl,Te=le.transform,ke=Kn.disabled,Ne=new zi([Pe.ONE,Pe.ONE],c.bp.transparent,[!0,!0,!0,!0]);(function(ze,Ve,st){const Je=ze.gl;ze.activeTexture.set(Je.TEXTURE1),ze.viewport.set([0,0,Ve.width/4,Ve.height/4]);let rt=st.heatmapFbos.get(c.cd);rt?(Je.bindTexture(Je.TEXTURE_2D,rt.colorAttachment.get()),ze.bindFramebuffer.set(rt.framebuffer)):(rt=ui(ze,Ve.width/4,Ve.height/4),st.heatmapFbos.set(c.cd,rt))})(Ee,le,be),Ee.clear({color:c.bp.transparent});for(let ze=0;ze<ve.length;ze++){const Ve=ve[ze];if(_e.hasRenderableParent(Ve))continue;const st=_e.getTile(Ve),Je=st.getBucket(be);if(!Je)continue;const rt=Je.programConfigurations.get(be.id),at=le.useProgram("heatmap",rt),Dt=Te.getProjectionData({overscaledTileID:Ve,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ot=Te.getCircleRadiusCorrection();at.draw(Ee,Pe.TRIANGLES,kn.disabled,ke,Ne,$n.backCCW,Jo(st,Te.zoom,be.paint.get("heatmap-intensity"),Ot),null,Dt,be.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,be.paint,Te.zoom,rt)}Ee.viewport.set([0,0,le.width,le.height])})(M,D,N,F):M.renderPass==="translucent"&&(function(le,_e){const be=le.context,ve=be.gl;be.setColorMode(le.colorModeForRenderPass());const Ee=_e.heatmapFbos.get(c.cd);Ee&&(be.activeTexture.set(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_2D,Ee.colorAttachment.get()),be.activeTexture.set(ve.TEXTURE1),Jn(be,_e).bind(ve.LINEAR,ve.CLAMP_TO_EDGE),le.useProgram("heatmapTexture").draw(be,ve.TRIANGLES,kn.disabled,Kn.disabled,le.colorModeForRenderPass(),$n.disabled,xd(le,_e,0,1),null,null,_e.id,le.viewportBuffer,le.quadTriangleIndexBuffer,le.viewportSegments,_e.paint,le.transform.zoom))})(M,N)})(i,h,y,b,A):c.cp(y)?(function(M,D,N,F,q){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=q,W=N.paint.get("line-opacity"),ie=N.paint.get("line-width");if(W.constantOr(1)===0||ie.constantOr(1)===0)return;const le=M.getDepthModeForSublayer(0,kn.ReadOnly),_e=M.colorModeForRenderPass(),be=N.paint.get("line-dasharray"),ve=be.constantOr(1),Ee=N.paint.get("line-pattern"),Pe=Ee.constantOr(1),Te=N.paint.get("line-gradient"),ke=N.getCrossfadeParameters();let Ne;Ne=Pe?"linePattern":ve&&Te?"lineGradientSDF":ve?"lineSDF":Te?"lineGradient":"line";const ze=M.context,Ve=ze.gl,st=M.transform;let Je=!0;for(const rt of F){const at=D.getTile(rt);if(Pe&&!at.patternsLoaded())continue;const Dt=at.getBucket(N);if(!Dt)continue;const Ot=Dt.programConfigurations.get(N.id),wt=M.context.program.get(),Ut=M.useProgram(Ne,Ot),On=Je||Ut.program!==wt,ki=M.style.map.terrain&&M.style.map.terrain.getTerrainData(rt),Ki=Ee.constantOr(null),Zi=be&&be.constantOr(null);if(Ki&&at.imageAtlas){const Aa=at.imageAtlas,Dr=Aa.patternPositions[Ki.to.toString()],Lr=Aa.patternPositions[Ki.from.toString()];Dr&&Lr&&Ot.setConstantPatternPositions(Dr,Lr)}else if(Zi){const Aa=N.layout.get("line-cap")==="round",Dr=M.lineAtlas.getDash(Zi.to,Aa),Lr=M.lineAtlas.getDash(Zi.from,Aa);Ot.setConstantDashPositions(Dr,Lr)}const sr=st.getProjectionData({overscaledTileID:rt,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),$i=st.getPixelScale();let Sr;Pe?(Sr=Qo(M,at,N,$i,ke),xo(ze,Ve,at,Ot,ke)):ve&&Te?(Sr=Ys(M,at,N,$i,ke,Dt.lineClipsArray.length),Za(M,D,ze,Ve,N,Dt,rt,Ot,ke)):ve?(Sr=_a(M,at,N,$i,ke),er(M,ze,Ve,Ot,On,ke)):Te?(Sr=df(M,at,N,$i,Dt.lineClipsArray.length),co(M,D,ze,Ve,N,Dt,rt)):Sr=bs(M,at,N,$i);const lr=M.stencilModeForClipping(rt);Ut.draw(ze,Ve.TRIANGLES,le,lr,_e,$n.disabled,Sr,ki,sr,N.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,N.paint,M.transform.zoom,Ot,Dt.layoutVertexBuffer2),Je=!1}})(i,h,y,b,A):c.cq(y)?(function(M,D,N,F,q){const Y=N.paint.get("fill-color"),W=N.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const{isRenderingToTexture:ie}=q,le=M.colorModeForRenderPass(),_e=N.paint.get("fill-pattern"),be=M.opaquePassEnabledForLayer()&&!_e.constantOr(1)&&Y.constantOr(c.bp.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===be){const ve=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?kn.ReadWrite:kn.ReadOnly);wo(M,D,N,F,ve,le,!1,ie)}if(M.renderPass==="translucent"&&N.paint.get("fill-antialias")){const ve=M.getDepthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,kn.ReadOnly);wo(M,D,N,F,ve,le,!0,ie)}})(i,h,y,b,A):c.cr(y)?(function(M,D,N,F,q){const Y=N.paint.get("fill-extrusion-opacity");if(Y===0)return;const{isRenderingToTexture:W}=q;if(M.renderPass==="translucent"){const ie=new kn(M.context.gl.LEQUAL,kn.ReadWrite,M.depthRangeFor3D);if(Y!==1||N.paint.get("fill-extrusion-pattern").constantOr(1))ws(M,D,N,F,ie,Kn.disabled,zi.disabled,W),ws(M,D,N,F,ie,M.stencilModeFor3D(),M.colorModeForRenderPass(),W);else{const le=M.colorModeForRenderPass();ws(M,D,N,F,ie,Kn.disabled,le,W)}}})(i,h,y,b,A):c.cs(y)?(function(M,D,N,F,q){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=q,W=M.context,ie=M.style.projection.useSubdivision,le=M.getDepthModeForSublayer(0,kn.ReadOnly),_e=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(be,ve,Ee,Pe,Te,ke,Ne){const ze=be.context,Ve=ze.gl;for(const st of Ee){const Je=ve.getTile(st),rt=Je.dem;if(!rt||!rt.data||!Je.needsHillshadePrepare)continue;const at=rt.dim,Dt=rt.stride,Ot=rt.getPixels();if(ze.activeTexture.set(Ve.TEXTURE1),ze.pixelStoreUnpackPremultiplyAlpha.set(!1),Je.demTexture=Je.demTexture||be.getTileTexture(Dt),Je.demTexture){const Ut=Je.demTexture;Ut.update(Ot,{premultiply:!1}),Ut.bind(Ve.NEAREST,Ve.CLAMP_TO_EDGE)}else Je.demTexture=new c.T(ze,Ot,Ve.RGBA,{premultiply:!1}),Je.demTexture.bind(Ve.NEAREST,Ve.CLAMP_TO_EDGE);ze.activeTexture.set(Ve.TEXTURE0);let wt=Je.fbo;if(!wt){const Ut=new c.T(ze,{width:at,height:at,data:null},Ve.RGBA);Ut.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE),wt=Je.fbo=ze.createFramebuffer(at,at,!0,!1),wt.colorAttachment.set(Ut.texture)}ze.bindFramebuffer.set(wt.framebuffer),ze.viewport.set([0,0,at,at]),be.useProgram("hillshadePrepare").draw(ze,Ve.TRIANGLES,Te,ke,Ne,$n.disabled,uf(Je.tileID,rt),null,null,Pe.id,be.rasterBoundsBuffer,be.quadTriangleIndexBuffer,be.rasterBoundsSegments),Je.needsHillshadePrepare=!1}})(M,D,F,N,le,Kn.disabled,_e),W.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(ie){const[be,ve,Ee]=M.stencilConfigForOverlapTwoPass(F);Ss(M,D,N,Ee,be,le,_e,!1,Y),Ss(M,D,N,Ee,ve,le,_e,!0,Y)}else{const[be,ve]=M.getStencilConfigForOverlapAndUpdateStencilID(F);Ss(M,D,N,ve,be,le,_e,!1,Y)}})(i,h,y,b,A):c.ct(y)?(function(M,D,N,F,q){if(M.renderPass!=="translucent"||!F.length)return;const{isRenderingToTexture:Y}=q,W=M.style.projection.useSubdivision,ie=M.getDepthModeForSublayer(0,kn.ReadOnly),le=M.colorModeForRenderPass();if(W){const[_e,be,ve]=M.stencilConfigForOverlapTwoPass(F);el(M,D,N,ve,_e,ie,le,!1,Y),el(M,D,N,ve,be,ie,le,!0,Y)}else{const[_e,be]=M.getStencilConfigForOverlapAndUpdateStencilID(F);el(M,D,N,be,_e,ie,le,!1,Y)}})(i,h,y,b,A):c.bU(y)?(function(M,D,N,F,q){if(M.renderPass!=="translucent"||N.paint.get("raster-opacity")===0||!F.length)return;const{isRenderingToTexture:Y}=q,W=D.getSource(),ie=M.style.projection.useSubdivision;if(W instanceof Xa)So(M,D,N,F,null,!1,!1,W.tileCoords,W.flippedWindingOrder,Y);else if(ie){const[le,_e,be]=M.stencilConfigForOverlapTwoPass(F);So(M,D,N,be,le,!1,!0,ts,!1,Y),So(M,D,N,be,_e,!0,!0,ts,!1,Y)}else{const[le,_e]=M.getStencilConfigForOverlapAndUpdateStencilID(F);So(M,D,N,_e,le,!1,!0,ts,!1,Y)}})(i,h,y,b,A):c.cu(y)?(function(M,D,N,F,q){const Y=N.paint.get("background-color"),W=N.paint.get("background-opacity");if(W===0)return;const{isRenderingToTexture:ie}=q,le=M.context,_e=le.gl,be=M.style.projection,ve=M.transform,Ee=ve.tileSize,Pe=N.paint.get("background-pattern");if(M.isPatternMissing(Pe))return;const Te=!Pe&&Y.a===1&&W===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==Te)return;const ke=Kn.disabled,Ne=M.getDepthModeForSublayer(0,Te==="opaque"?kn.ReadWrite:kn.ReadOnly),ze=M.colorModeForRenderPass(),Ve=M.useProgram(Pe?"backgroundPattern":"background"),st=F||hr(ve,{tileSize:Ee,terrain:M.style.map.terrain});Pe&&(le.activeTexture.set(_e.TEXTURE0),M.imageManager.bind(M.context));const Je=N.getCrossfadeParameters();for(const rt of st){const at=ve.getProjectionData({overscaledTileID:rt,applyGlobeMatrix:!ie,applyTerrainMatrix:!0}),Dt=Pe?ku(W,M,Pe,{tileID:rt,tileSize:Ee},Je):eu(W,Y),Ot=M.style.map.terrain&&M.style.map.terrain.getTerrainData(rt),wt=be.getMeshFromTileID(le,rt.canonical,!1,!0,"raster");Ve.draw(le,_e.TRIANGLES,Ne,ke,ze,$n.backCCW,Dt,Ot,at,N.id,wt.vertexBuffer,wt.indexBuffer,wt.segments)}})(i,0,y,b,A):c.cv(y)&&(function(M,D,N,F){const{isRenderingGlobe:q}=F,Y=M.context,W=N.implementation,ie=M.style.projection,le=M.transform,_e=le.getProjectionDataForCustomLayer(q),be={farZ:le.farZ,nearZ:le.nearZ,fov:le.fov*Math.PI/180,modelViewProjectionMatrix:le.modelViewProjectionMatrix,projectionMatrix:le.projectionMatrix,shaderData:{variantName:ie.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ie.shaderPreludeCode.vertexSource}`,define:ie.shaderDefine},defaultProjectionData:_e},ve=W.renderingMode?W.renderingMode:"2d";if(M.renderPass==="offscreen"){const Ee=W.prerender;Ee&&(M.setCustomLayerDefaults(),Y.setColorMode(M.colorModeForRenderPass()),Ee.call(W,Y.gl,be),Y.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),Y.setColorMode(M.colorModeForRenderPass()),Y.setStencilMode(Kn.disabled);const Ee=ve==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,kn.ReadOnly);Y.setDepthMode(Ee),W.render(Y.gl,be),Y.setDirty(),M.setBaseState(),Y.bindFramebuffer.set(null)}})(i,0,y,A))}saveTileTexture(i){const h=this._tileTextures[i.size[0]];h?h.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const h=this._tileTextures[i];return h&&h.length>0?h.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const h=this.imageManager.getPattern(i.from.toString()),y=this.imageManager.getPattern(i.to.toString());return!h||!y}useProgram(i,h,y=!1,b=[]){this.cache=this.cache||{};const A=!!this.style.map.terrain,M=this.style.projection,D=y?li.projectionMercator:M.shaderPreludeCode,N=y?Ji:M.shaderDefine,F=i+(h?h.cacheKey:"")+`/${y?ma:M.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(A?"/terrain":"")+(b?`/${b.join("/")}`:"");return this.cache[F]||(this.cache[F]=new oc(this.context,li[i],h,ff[i],this._showOverdrawInspector,A,D,N,b)),this.cache[F]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var i,h;if(this._tileTextures){for(const y in this._tileTextures){const b=this._tileTextures[y];if(b)for(const A of b)A.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((i=this.tileExtentMesh.vertexBuffer)===null||i===void 0||i.destroy()),this.tileExtentMesh&&((h=this.tileExtentMesh.indexBuffer)===null||h===void 0||h.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const y in this.cache){const b=this.cache[y];b&&b.program&&this.context.gl.deleteProgram(b.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:h}=this.context.gl;return this.width!==i||this.height!==h}}function _p(S,i){let h,y=!1,b=null,A=null;const M=()=>{b=null,y&&(S.apply(A,h),b=setTimeout(M,i),y=!1)};return(...D)=>(y=!0,A=this,h=D,b||M(),b)}class Br{constructor(i){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let y;return h.split("&").map((b=>b.split("="))).forEach((b=>{b[0]===this._hashName&&(y=b)})),(y&&y[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(!this._isValidHash(h))return!1;const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:y,pitch:+(h[4]||0)}),!0},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,h)},this._removeHash=()=>{const h=this._getCurrentHash();if(h.length===0)return;const y=h.join("/");let b=y;b.split("&").length>0&&(b=b.split("&")[0]),this._hashName&&(b=`${this._hashName}=${y}`);let A=window.location.hash.replace(b,"");A.startsWith("#&")?A=A.slice(0,1)+A.slice(2):A==="#"&&(A="");let M=window.location.href.replace(/(#.+)?$/,A);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=_p(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const h=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,b=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),A=Math.pow(10,b),M=Math.round(h.lng*A)/A,D=Math.round(h.lat*A)/A,N=this._map.getBearing(),F=this._map.getPitch();let q="";if(q+=i?`/${M}/${D}/${y}`:`${y}/${D}/${M}`,(N||F)&&(q+="/"+Math.round(10*N)/10),F&&(q+=`/${Math.round(F)}`),this._hashName){const Y=this._hashName;let W=!1;const ie=window.location.hash.slice(1).split("&").map((le=>{const _e=le.split("=")[0];return _e===Y?(W=!0,`${_e}=${q}`):le})).filter((le=>le));return W||ie.push(`${Y}=${q}`),`#${ie.join("&")}`}return`#${q}`}_isValidHash(i){if(i.length<3||i.some(isNaN))return!1;try{new c.V(+i[2],+i[1])}catch{return!1}const h=+i[0],y=+(i[3]||0),b=+(i[4]||0);return h>=this._map.getMinZoom()&&h<=this._map.getMaxZoom()&&y>=-180&&y<=180&&b>=this._map.getMinPitch()&&b<=this._map.getMaxPitch()}}const Ol={linearity:.3,easing:c.cw(0,0,.3,1)},Lh=c.e({deceleration:2500,maxSpeed:1400},Ol),uo=c.e({deceleration:20,maxSpeed:1400},Ol),is=c.e({deceleration:1e3,maxSpeed:360},Ol),Ou=c.e({deceleration:1e3,maxSpeed:90},Ol),ho=c.e({deceleration:1e3,maxSpeed:360},Ol);class Iy{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:ee(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,h=ee();for(;i.length>0&&h-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:A}of this._inertiaBuffer)h.zoom+=A.zoomDelta||0,h.bearing+=A.bearingDelta||0,h.pitch+=A.pitchDelta||0,h.roll+=A.rollDelta||0,A.panDelta&&h.pan._add(A.panDelta),A.around&&(h.around=A.around),A.pinchAround&&(h.pinchAround=A.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(h.pan.mag()){const A=Ed(h.pan.mag(),y,c.e({},Lh,i||{})),M=h.pan.mult(A.amount/h.pan.mag()),D=this._map.cameraHelper.handlePanInertia(M,this._map.transform);b.center=D.easingCenter,b.offset=D.easingOffset,Rh(b,A)}if(h.zoom){const A=Ed(h.zoom,y,uo);b.zoom=this._map.transform.zoom+A.amount,Rh(b,A)}if(h.bearing){const A=Ed(h.bearing,y,is);b.bearing=this._map.transform.bearing+c.an(A.amount,-179,179),Rh(b,A)}if(h.pitch){const A=Ed(h.pitch,y,Ou);b.pitch=this._map.transform.pitch+A.amount,Rh(b,A)}if(h.roll){const A=Ed(h.roll,y,ho);b.roll=this._map.transform.roll+c.an(A.amount,-179,179),Rh(b,A)}if(b.zoom||b.bearing){const A=h.pinchAround===void 0?h.around:h.pinchAround;b.around=A?this._map.unproject(A):this._map.getCenter()}return this.clear(),c.e(b,{noMoveStart:!0})}}function Rh(S,i){(!S.duration||S.duration<i.duration)&&(S.duration=i.duration,S.easing=i.easing)}function Ed(S,i,h){const{maxSpeed:y,linearity:b,deceleration:A}=h,M=c.an(S*b/(i/1e3),-y,y),D=Math.abs(M)/(A*b);return{easing:h.easing,duration:1e3*D,amount:M*(D/2)}}class xa extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,y,b={}){y=y instanceof MouseEvent?y:new MouseEvent(i,y);const A=ae.mousePos(h.getCanvas(),y),M=h.unproject(A);super(i,c.e({point:A,lngLat:M,originalEvent:y},b)),this._defaultPrevented=!1,this.target=h}}class tl extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,y){const b=i==="touchend"?y.changedTouches:y.touches,A=ae.touchPos(h.getCanvasContainer(),b),M=A.map((N=>h.unproject(N))),D=A.reduce(((N,F,q,Y)=>N.add(F.div(Y.length))),new c.P(0,0));super(i,{points:A,point:D,lngLats:M,lngLat:h.unproject(D),originalEvent:y}),this._defaultPrevented=!1}}class yf extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,y){super(i,{originalEvent:y}),this._defaultPrevented=!1}}class _f{constructor(i,h){this._map=i,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new yf(i.type,this._map,i))}mousedown(i,h){return this._mousedownPos=h,this._firePreventable(new xa(i.type,this._map,i))}mouseup(i){this._map.fire(new xa(i.type,this._map,i))}click(i,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new xa(i.type,this._map,i))}dblclick(i){return this._firePreventable(new xa(i.type,this._map,i))}mouseover(i){this._map.fire(new xa(i.type,this._map,i))}mouseout(i){this._map.fire(new xa(i.type,this._map,i))}touchstart(i){return this._firePreventable(new tl(i.type,this._map,i))}touchmove(i){this._map.fire(new tl(i.type,this._map,i))}touchend(i){this._map.fire(new tl(i.type,this._map,i))}touchcancel(i){this._map.fire(new tl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vm{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new xa(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new xa(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class nl{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.screenPointToLocation(c.P.convert(i),this._map.terrain)}}class iu{constructor(i,h){this._map=i,this._tr=new nl(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,h){this.isEnabled()&&i.shiftKey&&i.button===0&&(ae.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(i,h){if(!this._active)return;const y=h;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=y,this._box||(this._box=ae.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const A=Math.min(b.x,y.x),M=Math.max(b.x,y.x),D=Math.min(b.y,y.y),N=Math.max(b.y,y.y);ae.setTransform(this._box,`translate(${A}px,${D}px)`),this._box.style.width=M-A+"px",this._box.style.height=N-D+"px"}mouseupWindow(i,h){if(!this._active||i.button!==0)return;const y=this._startPos,b=h;if(this.reset(),ae.suppressClick(),y.x!==b.x||y.y!==b.y)return this._map.fire(new c.l("boxzoomend",{originalEvent:i})),{cameraAnimation:A=>A.fitScreenCoordinates(y,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(ae.remove(this._box),this._box=null),ae.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,h){return this._map.fire(new c.l(i,{originalEvent:h}))}}function Lo(S,i){if(S.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${S.length}, points ${i.length}`);const h={};for(let y=0;y<S.length;y++)h[S[y].identifier]=i[y];return h}class Yt{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,h,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),y.length===this.numTouches&&(this.centroid=(function(b){const A=new c.P(0,0);for(const M of b)A._add(M);return A.div(b.length)})(h),this.touches=Lo(y,h)))}touchmove(i,h,y){if(this.aborted||!this.centroid)return;const b=Lo(y,h);for(const A in this.touches){const M=b[A];(!M||M.dist(this.touches[A])>30)&&(this.aborted=!0)}}touchend(i,h,y){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Ad{constructor(i){this.singleTap=new Yt(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,h,y){this.singleTap.touchstart(i,h,y)}touchmove(i,h,y){this.singleTap.touchmove(i,h,y)}touchend(i,h,y){const b=this.singleTap.touchend(i,h,y);if(b){const A=i.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(b)<30;if(A&&M||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class vf{constructor(i){this._tr=new nl(i),this._zoomIn=new Ad({numTouches:1,numTaps:2}),this._zoomOut=new Ad({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,h,y){this._zoomIn.touchstart(i,h,y),this._zoomOut.touchstart(i,h,y)}touchmove(i,h,y){this._zoomIn.touchmove(i,h,y),this._zoomOut.touchmove(i,h,y)}touchend(i,h,y){const b=this._zoomIn.touchend(i,h,y),A=this._zoomOut.touchend(i,h,y),M=this._tr;return b?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(b)},{originalEvent:i})}):A?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(A)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Es{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const h=this._moveFunction(...i);if(h.bearingDelta||h.pitchDelta||h.rollDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(i,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=Array.isArray(h)?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,h){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const b=Array.isArray(h)?h[0]:h;return!this._moved&&b.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(y,b))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&ae.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const il=0,Oh=2,bf={[il]:1,[Oh]:2};class Nl{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const h=ae.mouseButton(i);this._eventButton=h}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!(function(h,y){const b=bf[y];return h.buttons===void 0||(h.buttons&b)!==b})(i,this._eventButton)}isValidEndEvent(i){return ae.mouseButton(i)===this._eventButton}}class Nu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}class Cd{constructor(i=new Nl({checkCorrectEvent:()=>!0}),h=new Nu){this.mouseMoveStateManager=i,this.oneFingerTouchMoveStateManager=h}_executeRelevantHandler(i,h,y){return i instanceof MouseEvent?h(i):typeof TouchEvent<"u"&&i instanceof TouchEvent?y(i):void 0}startMove(i){this._executeRelevantHandler(i,(h=>this.mouseMoveStateManager.startMove(h)),(h=>this.oneFingerTouchMoveStateManager.startMove(h)))}endMove(i){this._executeRelevantHandler(i,(h=>this.mouseMoveStateManager.endMove(h)),(h=>this.oneFingerTouchMoveStateManager.endMove(h)))}isValidStartEvent(i){return this._executeRelevantHandler(i,(h=>this.mouseMoveStateManager.isValidStartEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidStartEvent(h)))}isValidMoveEvent(i){return this._executeRelevantHandler(i,(h=>this.mouseMoveStateManager.isValidMoveEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(h)))}isValidEndEvent(i){return this._executeRelevantHandler(i,(h=>this.mouseMoveStateManager.isValidEndEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidEndEvent(h)))}}const $l=S=>{S.mousedown=S.dragStart,S.mousemoveWindow=S.dragMove,S.mouseup=S.dragEnd,S.contextmenu=i=>{i.preventDefault()}};class xf{constructor(i,h){this._clickTolerance=i.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,h,y){return this._calculateTransform(i,h,y)}touchmove(i,h,y){if(this._active){if(!this._shouldBePrevented(y.length))return i.preventDefault(),this._calculateTransform(i,h,y);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,h,y){this._calculateTransform(i,h,y),this._active&&this._shouldBePrevented(y.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,h,y){y.length>0&&(this._active=!0);const b=Lo(y,h),A=new c.P(0,0),M=new c.P(0,0);let D=0;for(const F in b){const q=b[F],Y=this._touches[F];Y&&(A._add(q),M._add(q.sub(Y)),D++,b[F]=q)}if(this._touches=b,this._shouldBePrevented(D)||!M.mag())return;const N=M.div(D);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:A.div(D),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Md{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,h,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([h[0],h[1]]))}touchmove(i,h,y){if(!this._firstTwoTouches)return;i.preventDefault();const[b,A]=this._firstTwoTouches,M=jl(y,h,b),D=jl(y,h,A);if(!M||!D)return;const N=this._aroundCenter?null:M.add(D).div(2);return this._move([M,D],N,i)}touchend(i,h,y){if(!this._firstTwoTouches)return;const[b,A]=this._firstTwoTouches,M=jl(y,h,b),D=jl(y,h,A);M&&D||(this._active&&ae.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function jl(S,i,h){for(let y=0;y<S.length;y++)if(S[y].identifier===h)return i[y]}function vp(S,i){return Math.log(S/i)/Math.LN2}class Bl extends Md{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,h){const y=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(vp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vp(this._distance,y),pinchAround:h}}}function wf(S,i){return 180*S.angleWith(i)/Math.PI}class zd extends Md{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,h,y){const b=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:wf(this._vector,b),pinchAround:h}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const h=25/(Math.PI*this._minDiameter)*360,y=wf(i,this._startVector);return Math.abs(y)<h}}function Fl(S){return Math.abs(S.y)>Math.abs(S.x)}class _c extends Md{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,h,y){super.touchstart(i,h,y),this._currentTouchCount=y.length}_start(i){this._lastPoints=i,Fl(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,h,y){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const b=i[0].sub(this._lastPoints[0]),A=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,A,y.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(b.y+A.y)/2*-.5}):void 0}gestureBeginsVertically(i,h,y){if(this._valid!==void 0)return this._valid;const b=i.mag()>=2,A=h.mag()>=2;if(!b&&!A)return;if(!b||!A)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const M=i.y>0==h.y>0;return Fl(i)&&Fl(h)&&M}}const As={panStep:100,bearingStep:15,pitchStep:10};class Ri{constructor(i){this._tr=new nl(i);const h=As;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let h=0,y=0,b=0,A=0,M=0;switch(i.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:i.shiftKey?y=-1:(i.preventDefault(),A=-1);break;case 39:i.shiftKey?y=1:(i.preventDefault(),A=1);break;case 38:i.shiftKey?b=1:(i.preventDefault(),M=-1);break;case 40:i.shiftKey?b=-1:(i.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(y=0,b=0),{cameraAnimation:D=>{const N=this._tr;D.easeTo({duration:300,easeId:"keyboardHandler",easing:bp,zoom:h?Math.round(N.zoom)+h*(i.shiftKey?2:1):N.zoom,bearing:N.bearing+y*this._bearingStep,pitch:N.pitch+b*this._pitchStep,offset:[-A*this._panStep,-M*this._panStep],center:N.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function bp(S){return S*(2-S)}const vc=4.000244140625,ru=1/450;class Id{constructor(i,h){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=i,this._tr=new nl(i),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=ru}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let h=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const y=ee(),b=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,h!==0&&h%vc==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(b*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),i.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=i,this._delta-=h,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=ae.mousePos(this._map.getCanvas(),i),y=this._tr;this._aroundPoint=this._aroundCenter?y.transform.locationToScreenPoint(c.V.convert(y.center)):h,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const D=i.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=D),typeof this._targetZoom=="number"&&(this._targetZoom+=D)}if(this._delta!==0){const D=this._type==="wheel"&&Math.abs(this._delta)>vc?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*D)));this._delta<0&&N!==0&&(N=1/N);const F=typeof this._targetZoom!="number"?i.scale:c.aq(this._targetZoom);this._targetZoom=i.applyConstrain(i.getCameraLngLat(),c.at(F*N)).zoom,this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom!="number"?i.zoom:this._targetZoom,y=this._startZoom,b=this._easing;let A,M=!1;if(this._type==="wheel"&&y&&b){const D=ee()-this._lastWheelEventTime,N=Math.min((D+5)/200,1),F=b(N);A=c.G.number(y,h,F),N<1?this._frameId||(this._frameId=!0):M=!0}else A=h,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=A,{noInertia:!0,needsRenderFrame:!M,zoomDelta:A-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let h=c.cy;if(this._prevEase){const y=this._prevEase,b=(ee()-y.start)/y.duration,A=y.easing(b+.01)-y.easing(b),M=.27/Math.sqrt(A*A+1e-4)*.01,D=Math.sqrt(.0729-M*M);h=c.cw(M,D,.25,1)}return this._prevEase={start:ee(),duration:i,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Sf{constructor(i,h){this._clickZoom=i,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class $u{constructor(i){this._tr=new nl(i),this.reset()}reset(){this._active=!1}dblclick(i,h){return i.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kd{constructor(){this._tap=new Ad({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,h,y){if(!this._swipePoint)if(this._tapTime){const b=h[0],A=i.timeStamp-this._tapTime<500,M=this._tapPoint.dist(b)<30;A&&M?y.length>0&&(this._swipePoint=b,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(i,h,y)}touchmove(i,h,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const b=h[0],A=b.y-this._swipePoint.y;return this._swipePoint=b,i.preventDefault(),this._active=!0,{zoomDelta:A/128}}}else this._tap.touchmove(i,h,y)}touchend(i,h,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const b=this._tap.touchend(i,h,y);b&&(this._tapTime=i.timeStamp,this._tapPoint=b)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xp{constructor(i,h,y){this._el=i,this._mousePan=h,this._touchPan=y}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class rs{constructor(i,h,y,b){this._pitchWithRotate=i.pitchWithRotate,this._rollEnabled=i.rollEnabled,this._mouseRotate=h,this._mousePitch=y,this._mouseRoll=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class ju{constructor(i,h,y,b){this._el=i,this._touchZoom=h,this._touchRotate=y,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class en{constructor(i,h){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=h,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=ae.create("div","maplibregl-cooperative-gesture-screen",i);let h=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(h=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const y=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),b=document.createElement("div");b.className="maplibregl-desktop-message",b.textContent=h,this._container.appendChild(b);const A=document.createElement("div");A.className="maplibregl-mobile-message",A.textContent=y,this._container.appendChild(A),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(ae.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,h){this._enabled&&(this._map.fire(new c.l("cooperativegestureprevented",{gestureType:i,originalEvent:h})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const on=S=>S.zoom||S.drag||S.roll||S.pitch||S.rotate;class Cs extends c.l{}function Nh(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta||S.rollDelta}class Pd{constructor(i,h){this.handleWindowEvent=b=>{this.handleEvent(b,`${b.type}Window`)},this.handleEvent=(b,A)=>{if(b.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const M=b.type==="renderFrame"?void 0:b,D={needsRenderFrame:!1},N={},F={};for(const{handlerName:W,handler:ie,allowed:le}of this._handlers){if(!ie.isEnabled())continue;let _e;if(this._blockedByActive(F,le,W))ie.reset();else if(ie[A||b.type]){if(c.cz(b,A||b.type)){const be=ae.mousePos(this._map.getCanvas(),b);_e=ie[A||b.type](b,be)}else if(c.cA(b,A||b.type)){const be=this._getMapTouches(b.touches),ve=ae.touchPos(this._map.getCanvas(),be);_e=ie[A||b.type](b,ve,be)}else c.cB(A||b.type)||(_e=ie[A||b.type](b));this.mergeHandlerResult(D,N,_e,W,M),_e&&_e.needsRenderFrame&&this._triggerRenderFrame()}(_e||ie.isActive())&&(F[W]=ie)}const q={};for(const W in this._previousActiveHandlers)F[W]||(q[W]=M);this._previousActiveHandlers=F,(Object.keys(q).length||Nh(D))&&(this._changes.push([D,N,q]),this._triggerRenderFrame()),(Object.keys(F).length||Nh(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Y}=D;Y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Y(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Iy(i),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,A,M]of this._listeners)ae.addEventListener(b,A,b===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[i,h,y]of this._listeners)ae.removeEventListener(i,h,i===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(i){const h=this._map,y=h.getCanvasContainer();this._add("mapEvent",new _f(h,i));const b=h.boxZoom=new iu(h,i);this._add("boxZoom",b),i.interactive&&i.boxZoom&&b.enable();const A=h.cooperativeGestures=new en(h,i.cooperativeGestures);this._add("cooperativeGestures",A),i.cooperativeGestures&&A.enable();const M=new vf(h),D=new $u(h);h.doubleClickZoom=new Sf(D,M),this._add("tapZoom",M),this._add("clickZoom",D),i.interactive&&i.doubleClickZoom&&h.doubleClickZoom.enable();const N=new kd;this._add("tapDragZoom",N);const F=h.touchPitch=new _c(h);this._add("touchPitch",F),i.interactive&&i.touchPitch&&h.touchPitch.enable(i.touchPitch);const q=()=>h.project(h.getCenter()),Y=(function({enable:Te,clickTolerance:ke,aroundCenter:Ne=!0,minPixelCenterThreshold:ze=100,rotateDegreesPerPixelMoved:Ve=.8},st){const Je=new Nl({checkCorrectEvent:rt=>ae.mouseButton(rt)===0&&rt.ctrlKey||ae.mouseButton(rt)===2&&!rt.ctrlKey});return new Es({clickTolerance:ke,move:(rt,at)=>{const Dt=st();if(Ne&&Math.abs(Dt.y-rt.y)>ze)return{bearingDelta:c.cx(new c.P(rt.x,at.y),at,Dt)};let Ot=(at.x-rt.x)*Ve;return Ne&&at.y<Dt.y&&(Ot=-Ot),{bearingDelta:Ot}},moveStateManager:Je,enable:Te,assignEvents:$l})})(i,q),W=(function({enable:Te,clickTolerance:ke,pitchDegreesPerPixelMoved:Ne=-.5}){const ze=new Nl({checkCorrectEvent:Ve=>ae.mouseButton(Ve)===0&&Ve.ctrlKey||ae.mouseButton(Ve)===2});return new Es({clickTolerance:ke,move:(Ve,st)=>({pitchDelta:(st.y-Ve.y)*Ne}),moveStateManager:ze,enable:Te,assignEvents:$l})})(i),ie=(function({enable:Te,clickTolerance:ke,rollDegreesPerPixelMoved:Ne=.3},ze){const Ve=new Nl({checkCorrectEvent:st=>ae.mouseButton(st)===2&&st.ctrlKey});return new Es({clickTolerance:ke,move:(st,Je)=>{const rt=ze();let at=(Je.x-st.x)*Ne;return Je.y<rt.y&&(at=-at),{rollDelta:at}},moveStateManager:Ve,enable:Te,assignEvents:$l})})(i,q);h.dragRotate=new rs(i,Y,W,ie),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",W,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ie,["mousePitch"]),i.interactive&&i.dragRotate&&h.dragRotate.enable();const le=(function({enable:Te,clickTolerance:ke}){const Ne=new Nl({checkCorrectEvent:ze=>ae.mouseButton(ze)===0&&!ze.ctrlKey});return new Es({clickTolerance:ke,move:(ze,Ve)=>({around:Ve,panDelta:Ve.sub(ze)}),activateOnStart:!0,moveStateManager:Ne,enable:Te,assignEvents:$l})})(i),_e=new xf(i,h);h.dragPan=new xp(y,le,_e),this._add("mousePan",le),this._add("touchPan",_e,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&h.dragPan.enable(i.dragPan);const be=new zd,ve=new Bl;h.touchZoomRotate=new ju(y,ve,be,N),this._add("touchRotate",be,["touchPan","touchZoom"]),this._add("touchZoom",ve,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&h.touchZoomRotate.enable(i.touchZoomRotate),this._add("blockableMapEvent",new Vm(h));const Ee=h.scrollZoom=new Id(h,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Ee,["mousePan"]),i.interactive&&i.scrollZoom&&h.scrollZoom.enable(i.scrollZoom);const Pe=h.keyboard=new Ri(h);this._add("keyboard",Pe),i.interactive&&i.keyboard&&h.keyboard.enable()}_add(i,h,y){this._handlers.push({handlerName:i,handler:h,allowed:y}),this._handlersById[i]=h}stop(i){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!on(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,h,y){for(const b in i)if(b!==y&&(!h||h.indexOf(b)<0))return!0;return!1}_getMapTouches(i){const h=[];for(const y of i)this._el.contains(y.target)&&h.push(y);return h}mergeHandlerResult(i,h,y,b,A){if(!y)return;c.e(i,y);const M={handlerName:b,originalEvent:y.originalEvent||A};y.zoomDelta!==void 0&&(h.zoom=M),y.panDelta!==void 0&&(h.drag=M),y.rollDelta!==void 0&&(h.roll=M),y.pitchDelta!==void 0&&(h.pitch=M),y.bearingDelta!==void 0&&(h.rotate=M)}_applyChanges(){const i={},h={},y={};for(const[b,A,M]of this._changes)b.panDelta&&(i.panDelta=(i.panDelta||new c.P(0,0))._add(b.panDelta)),b.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+b.pitchDelta),b.rollDelta&&(i.rollDelta=(i.rollDelta||0)+b.rollDelta),b.around!==void 0&&(i.around=b.around),b.pinchAround!==void 0&&(i.pinchAround=b.pinchAround),b.noInertia&&(i.noInertia=b.noInertia),c.e(h,A),c.e(y,M);this._updateMapTransform(i,h,y),this._changes=[]}_updateMapTransform(i,h,y){const b=this._map,A=b._getTransformForUpdate(),M=b.terrain;if(!(Nh(i)||M&&this._terrainMovement))return this._fireEvents(h,y,!0);b._stop(!0);let{panDelta:D,zoomDelta:N,bearingDelta:F,pitchDelta:q,rollDelta:Y,around:W,pinchAround:ie}=i;ie!==void 0&&(W=ie),W=W||b.transform.centerPoint,M&&!A.isPointOnMapSurface(W)&&(W=A.centerPoint);const le={panDelta:D,zoomDelta:N,rollDelta:Y,pitchDelta:q,bearingDelta:F,around:W};this._map.cameraHelper.useGlobeControls&&!A.isPointOnMapSurface(W)&&(W=A.centerPoint);const _e=W.distSqr(A.centerPoint)<.01?A.center:A.screenPointToLocation(D?W.sub(D):W);this._handleMapControls({terrain:M,tr:A,deltasForHelper:le,preZoomAroundLoc:_e,combinedEventsInProgress:h,panDelta:D}),b._applyUpdatedTransform(A),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(h,y,!0)}_handleMapControls({terrain:i,tr:h,deltasForHelper:y,preZoomAroundLoc:b,combinedEventsInProgress:A,panDelta:M}){const D=this._map.cameraHelper;if(D.handleMapControlsRollPitchBearingZoom(y,h),i)return D.useGlobeControls?(this._terrainMovement||!A.drag&&!A.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void D.handleMapControlsPan(y,h,b)):this._terrainMovement||!A.drag&&!A.zoom?void(A.drag&&this._terrainMovement&&M?h.setCenter(h.screenPointToLocation(h.centerPoint.sub(M))):D.handleMapControlsPan(y,h,b)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void D.handleMapControlsPan(y,h,b));D.handleMapControlsPan(y,h,b)}_fireEvents(i,h,y){const b=on(this._eventsInProgress),A=on(i),M={};for(const Y in i){const{originalEvent:W}=i[Y];this._eventsInProgress[Y]||(M[`${Y}start`]=W),this._eventsInProgress[Y]=i[Y]}!b&&A&&this._fireEvent("movestart",A.originalEvent);for(const Y in M)this._fireEvent(Y,M[Y]);A&&this._fireEvent("move",A.originalEvent);for(const Y in i){const{originalEvent:W}=i[Y];this._fireEvent(Y,W)}const D={};let N;for(const Y in this._eventsInProgress){const{handlerName:W,originalEvent:ie}=this._eventsInProgress[Y];this._handlersById[W].isActive()||(delete this._eventsInProgress[Y],N=h[W]||ie,D[`${Y}end`]=N)}for(const Y in D)this._fireEvent(Y,D[Y]);const F=on(this._eventsInProgress),q=(b||A)&&!F;if(q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Y=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Y.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Y)}if(y&&q){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=ie=>ie!==0&&-this._bearingSnap<ie&&ie<this._bearingSnap;!Y||!Y.essential&&J.prefersReducedMotion?(this._map.fire(new c.l("moveend",{originalEvent:N})),W(this._map.getBearing())&&this._map.resetNorth()):(W(Y.bearing||this._map.getBearing())&&(Y.bearing=0),Y.freezeElevation=!0,this._map.easeTo(Y,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(i,h){this._map.fire(new c.l(i,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((i=>{delete this._frameId,this.handleEvent(new Cs("renderFrame",{timeStamp:i})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Fr extends c.E{constructor(i,h,y){super(),this._renderFrameCallback=()=>{const b=Math.min((ee()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=y.bearingSnap,this.cameraHelper=h,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(i,h){i.apply(this.transform,!0),this.transform=i,this.cameraHelper=h}getCenter(){return new c.V(this.transform.center.lng,this.transform.center.lat)}setCenter(i,h){return this.jumpTo({center:i},h)}getCenterElevation(){return this.transform.elevation}setCenterElevation(i,h){return this.jumpTo({elevation:i},h),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(i){this._centerClampedToGround=i}panBy(i,h,y){return i=c.P.convert(i).mult(-1),this.panTo(this.transform.center,c.e({offset:i},h),y)}panTo(i,h,y){return this.easeTo(c.e({center:i},h),y)}getZoom(){return this.transform.zoom}setZoom(i,h){return this.jumpTo({zoom:i},h),this}zoomTo(i,h,y){return this.easeTo(c.e({zoom:i},h),y)}zoomIn(i,h){return this.zoomTo(this.getZoom()+1,i,h),this}zoomOut(i,h){return this.zoomTo(this.getZoom()-1,i,h),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(i,h){return i!=this.transform.fov&&(this.transform.setFov(i),this.fire(new c.l("movestart",h)).fire(new c.l("move",h)).fire(new c.l("moveend",h))),this}getBearing(){return this.transform.bearing}setBearing(i,h){return this.jumpTo({bearing:i},h),this}getPadding(){return this.transform.padding}setPadding(i,h){return this.jumpTo({padding:i},h),this}rotateTo(i,h,y){return this.easeTo(c.e({bearing:i},h),y)}resetNorth(i,h){return this.rotateTo(0,c.e({duration:1e3},i),h),this}resetNorthPitch(i,h){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},i),h),this}snapToNorth(i,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,h):this}getPitch(){return this.transform.pitch}setPitch(i,h){return this.jumpTo({pitch:i},h),this}getRoll(){return this.transform.roll}setRoll(i,h){return this.jumpTo({roll:i},h),this}cameraForBounds(i,h){i=Pi.convert(i).adjustAntiMeridian();const y=h&&h.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),y,h)}_cameraForBoxAndBearing(i,h,y,b){const A={top:0,bottom:0,right:0,left:0};if(typeof(b=c.e({padding:A,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){const F=b.padding;b.padding={top:F,bottom:F,right:F,left:F}}const M=c.e(A,b.padding);b.padding=M;const D=this.transform,N=new Pi(i,h);return this.cameraHelper.cameraForBoxAndBearing(b,M,N,y,D)}fitBounds(i,h,y){return this._fitInternal(this.cameraForBounds(i,h),h,y)}fitScreenCoordinates(i,h,y,b,A){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(i)),this.transform.screenPointToLocation(c.P.convert(h)),y,b),b,A)}_fitInternal(i,h,y){return i?(delete(h=c.e(i,h)).padding,h.linear?this.easeTo(h,y):this.flyTo(h,y)):this}jumpTo(i,h){this.stop();const y=this._getTransformForUpdate();let b=!1,A=!1,M=!1;const D=y.zoom;this.cameraHelper.handleJumpToCenterZoom(y,i);const N=y.zoom!==D;return"elevation"in i&&y.elevation!==+i.elevation&&y.setElevation(+i.elevation),"bearing"in i&&y.bearing!==+i.bearing&&(b=!0,y.setBearing(+i.bearing)),"pitch"in i&&y.pitch!==+i.pitch&&(A=!0,y.setPitch(+i.pitch)),"roll"in i&&y.roll!==+i.roll&&(M=!0,y.setRoll(+i.roll)),i.padding==null||y.isPaddingEqual(i.padding)||y.setPadding(i.padding),this._applyUpdatedTransform(y),this.fire(new c.l("movestart",h)).fire(new c.l("move",h)),N&&this.fire(new c.l("zoomstart",h)).fire(new c.l("zoom",h)).fire(new c.l("zoomend",h)),b&&this.fire(new c.l("rotatestart",h)).fire(new c.l("rotate",h)).fire(new c.l("rotateend",h)),A&&this.fire(new c.l("pitchstart",h)).fire(new c.l("pitch",h)).fire(new c.l("pitchend",h)),M&&this.fire(new c.l("rollstart",h)).fire(new c.l("roll",h)).fire(new c.l("rollend",h)),this.fire(new c.l("moveend",h))}calculateCameraOptionsFromTo(i,h,y,b=0){const A=c.a9.fromLngLat(i,h),M=c.a9.fromLngLat(y,b),D=M.x-A.x,N=M.y-A.y,F=M.z-A.z,q=Math.hypot(D,N,F);if(q===0)throw new Error("Can't calculate camera options with same From and To");const Y=Math.hypot(D,N),W=c.at(this.transform.cameraToCenterDistance/q/this.transform.tileSize),ie=180*Math.atan2(D,-N)/Math.PI;let le=180*Math.acos(Y/q)/Math.PI;return le=F<0?90-le:90+le,{center:M.toLngLat(),elevation:b,zoom:W,pitch:le,bearing:ie}}calculateCameraOptionsFromCameraLngLatAltRotation(i,h,y,b,A){const M=this.transform.calculateCenterFromCameraLngLatAlt(i,h,y,b);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:y,pitch:b,roll:A}}easeTo(i,h){this._stop(!1,i.easeId),((i=c.e({offset:[0,0],duration:500,easing:c.cy},i)).animate===!1||!i.essential&&J.prefersReducedMotion)&&(i.duration=0);const y=this._getTransformForUpdate(),b=this.getBearing(),A=y.pitch,M=y.roll,D="bearing"in i?this._normalizeBearing(i.bearing,b):b,N="pitch"in i?+i.pitch:A,F="roll"in i?this._normalizeBearing(i.roll,M):M,q="padding"in i?i.padding:y.padding,Y=c.P.convert(i.offset);let W,ie;i.around&&(W=c.V.convert(i.around),ie=y.locationToScreenPoint(W));const le={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},_e=this.cameraHelper.handleEaseTo(y,{bearing:D,pitch:N,roll:F,padding:q,around:W,aroundPoint:ie,offsetAsPoint:Y,offset:i.offset,zoom:i.zoom,center:i.center});return this._rotating=this._rotating||b!==D,this._pitching=this._pitching||N!==A,this._rolling=this._rolling||F!==M,this._padding=!y.isPaddingEqual(q),this._zooming=this._zooming||_e.isZooming,this._easeId=i.easeId,this._prepareEase(h,i.noMoveStart,le),this.terrain&&this._prepareElevation(_e.elevationCenter),this._ease((be=>{_e.easeFunc(be),this.terrain&&!i.freezeElevation&&this._updateElevation(be),this._applyUpdatedTransform(y),this._fireMoveEvents(h)}),(be=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(h,be)}),i),this}_prepareEase(i,h,y={}){this._moving=!0,h||y.moving||this.fire(new c.l("movestart",i)),this._zooming&&!y.zooming&&this.fire(new c.l("zoomstart",i)),this._rotating&&!y.rotating&&this.fire(new c.l("rotatestart",i)),this._pitching&&!y.pitching&&this.fire(new c.l("pitchstart",i)),this._rolling&&!y.rolling&&this.fire(new c.l("rollstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&h!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(y-(h-(y*i+this._elevationStart))/(1-i)),this._elevationTarget=h}this.transform.setElevation(c.G.number(this._elevationStart,this._elevationTarget,i))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){if(!this.terrain&&i.elevation>=0&&i.pitch<=90)return{};const h=i.getCameraLngLat(),y=i.getCameraAltitude(),b=this.terrain?this.terrain.getElevationForLngLatZoom(h,i.zoom):0;if(y<b){const A=this.calculateCameraOptionsFromTo(h,b,i.center,i.elevation);return{pitch:A.pitch,zoom:A.zoom}}return{}}_applyUpdatedTransform(i){const h=[];if(h.push((b=>this._elevateCameraIfInsideTerrain(b))),this.transformCameraUpdate&&h.push((b=>this.transformCameraUpdate(b))),!h.length)return;const y=i.clone();for(const b of h){const A=y.clone(),{center:M,zoom:D,roll:N,pitch:F,bearing:q,elevation:Y}=b(A);M&&A.setCenter(M),Y!==void 0&&A.setElevation(Y),D!==void 0&&A.setZoom(D),N!==void 0&&A.setRoll(N),F!==void 0&&A.setPitch(F),q!==void 0&&A.setBearing(q),y.apply(A,!1)}this.transform.apply(y,!1)}_fireMoveEvents(i){this.fire(new c.l("move",i)),this._zooming&&this.fire(new c.l("zoom",i)),this._rotating&&this.fire(new c.l("rotate",i)),this._pitching&&this.fire(new c.l("pitch",i)),this._rolling&&this.fire(new c.l("roll",i))}_afterEase(i,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const y=this._zooming,b=this._rotating,A=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,y&&this.fire(new c.l("zoomend",i)),b&&this.fire(new c.l("rotateend",i)),A&&this.fire(new c.l("pitchend",i)),M&&this.fire(new c.l("rollend",i)),this.fire(new c.l("moveend",i))}flyTo(i,h){if(!i.essential&&J.prefersReducedMotion){const at=c.U(i,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(at,h)}this.stop(),i=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.cy},i);const y=this._getTransformForUpdate(),b=y.bearing,A=y.pitch,M=y.roll,D=y.padding,N="bearing"in i?this._normalizeBearing(i.bearing,b):b,F="pitch"in i?+i.pitch:A,q="roll"in i?this._normalizeBearing(i.roll,M):M,Y="padding"in i?i.padding:y.padding,W=c.P.convert(i.offset);let ie=y.centerPoint.add(W);const le=y.screenPointToLocation(ie),_e=this.cameraHelper.handleFlyTo(y,{bearing:N,pitch:F,roll:q,padding:Y,locationAtOffset:le,offsetAsPoint:W,center:i.center,minZoom:i.minZoom,zoom:i.zoom});let be=i.curve;const ve=Math.max(y.width,y.height),Ee=ve/_e.scaleOfZoom,Pe=_e.pixelPathLength;typeof _e.scaleOfMinZoom=="number"&&(be=Math.sqrt(ve/_e.scaleOfMinZoom/Pe*2));const Te=be*be;function ke(at){const Dt=(Ee*Ee-ve*ve+(at?-1:1)*Te*Te*Pe*Pe)/(2*(at?Ee:ve)*Te*Pe);return Math.log(Math.sqrt(Dt*Dt+1)-Dt)}function Ne(at){return(Math.exp(at)-Math.exp(-at))/2}function ze(at){return(Math.exp(at)+Math.exp(-at))/2}const Ve=ke(!1);let st=function(at){return ze(Ve)/ze(Ve+be*at)},Je=function(at){return ve*((ze(Ve)*(Ne(Dt=Ve+be*at)/ze(Dt))-Ne(Ve))/Te)/Pe;var Dt},rt=(ke(!0)-Ve)/be;if(Math.abs(Pe)<2e-6||!isFinite(rt)){if(Math.abs(ve-Ee)<1e-6)return this.easeTo(i,h);const at=Ee<ve?-1:1;rt=Math.abs(Math.log(Ee/ve))/be,Je=()=>0,st=Dt=>Math.exp(at*be*Dt)}return i.duration="duration"in i?+i.duration:1e3*rt/("screenSpeed"in i?+i.screenSpeed/be:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=b!==N,this._pitching=F!==A,this._rolling=q!==M,this._padding=!y.isPaddingEqual(Y),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(_e.targetCenter),this._ease((at=>{const Dt=at*rt,Ot=1/st(Dt),wt=Je(Dt);this._rotating&&y.setBearing(c.G.number(b,N,at)),this._pitching&&y.setPitch(c.G.number(A,F,at)),this._rolling&&y.setRoll(c.G.number(M,q,at)),this._padding&&(y.interpolatePadding(D,Y,at),ie=y.centerPoint.add(W)),_e.easeFunc(at,Ot,wt,ie),this.terrain&&!i.freezeElevation&&this._updateElevation(at),this._applyUpdatedTransform(y),this._fireMoveEvents(h)}),(()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(h)}),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,h){var y;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,h)}return i||(y=this.handlers)===null||y===void 0||y.stop(!1),this}_ease(i,h,y){y.animate===!1||y.duration===0?(i(1),h()):(this._easeStart=ee(),this._easeOptions=y,this._onEaseFrame=i,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,h){i=c.W(i,-180,180);const y=Math.abs(i-h);return Math.abs(i-360-h)<y&&(i-=360),Math.abs(i+360-h)<y&&(i+=360),i}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLat(c.V.convert(i),this.transform):null}}const wr={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Pr{constructor(i=wr){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=ae.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=ae.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ae.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){ae.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,h){const y=this._map._getUIString(`AttributionControl.${h}`);i.title=y,i.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map((b=>typeof b!="string"?"":b))):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const h=this._map.style.tileManagers;for(const b in h){const A=h[b];if(A.used||A.usedForTerrain){const M=A.getSource();M.attribution&&i.indexOf(M.attribution)<0&&i.push(M.attribution)}}i=i.filter((b=>String(b).trim())),i.sort(((b,A)=>b.length-A.length)),i=i.filter(((b,A)=>{for(let M=A+1;M<i.length;M++)if(i[M].indexOf(b)>=0)return!1;return!0}));const y=i.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,i.length?(this._innerContainer.innerHTML=ae.sanitize(y),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Dd{constructor(i={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const y=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=ae.create("div","maplibregl-ctrl");const h=ae.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){ae.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class bc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const h=++this._id;return this._queue.push({callback:i,id:h,cancelled:!1}),h}remove(i){const h=this._currentlyRunning,y=h?this._queue.concat(h):this._queue;for(const b of y)if(b.id===i)return void(b.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const y of h)if(!y.cancelled&&(y.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Gn=c.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Ii extends c.E{constructor(i){super(),this._lastTilesetChange=ee(),this.tileManager=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=i._source.tileSize*2**this.deltaZoom,i.usedForTerrain=!0,i.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(i,h){this.tileManager.update(i,h),this._renderableTilesKeys=[];const y={};for(const b of hr(i,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h,calculateTileZoom:this.tileManager._source.calculateTileZoom}))y[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.terrainRttPosMatrix32f=new Float64Array(16),c.c7(b.terrainRttPosMatrix32f,0,c.a5,c.a5,0,0,1),this._tiles[b.key]=new vt(b,this.tileSize),this._lastTilesetChange=ee());for(const b in this._tiles)y[b]||delete this._tiles[b]}freeRtt(i){for(const h in this._tiles){const y=this._tiles[h];(!i||y.tileID.equals(i)||y.tileID.isChildOf(i)||i.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((i=>this.getTileByID(i)))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i,h){return h?this._getTerrainCoordsForTileRanges(i,h):this._getTerrainCoordsForRegularTile(i)}_getTerrainCoordsForRegularTile(i){const h={};for(const y of this._renderableTilesKeys){const b=this._tiles[y].tileID,A=i.clone(),M=c.bk();if(b.canonical.equals(i.canonical))c.c7(M,0,c.a5,c.a5,0,0,1);else if(b.canonical.isChildOf(i.canonical)){const D=b.canonical.z-i.canonical.z,N=b.canonical.x-(b.canonical.x>>D<<D),F=b.canonical.y-(b.canonical.y>>D<<D),q=c.a5>>D;c.c7(M,0,q,q,0,0,1),c.O(M,M,[-N*q,-F*q,0])}else{if(!i.canonical.isChildOf(b.canonical))continue;{const D=i.canonical.z-b.canonical.z,N=i.canonical.x-(i.canonical.x>>D<<D),F=i.canonical.y-(i.canonical.y>>D<<D),q=c.a5>>D;c.c7(M,0,c.a5,c.a5,0,0,1),c.O(M,M,[N*q,F*q,0]),c.Q(M,M,[1/2**D,1/2**D,0])}}A.terrainRttPosMatrix32f=new Float32Array(M),h[y]=A}return h}_getTerrainCoordsForTileRanges(i,h){const y={};for(const b of this._renderableTilesKeys){const A=this._tiles[b].tileID;if(!this._isWithinTileRanges(A,h))continue;const M=i.clone(),D=c.bk();if(A.canonical.z===i.canonical.z){const N=i.canonical.x-A.canonical.x+i.wrap*(1<<i.canonical.z),F=i.canonical.y-A.canonical.y;c.c7(D,0,c.a5,c.a5,0,0,1),c.O(D,D,[N*c.a5,F*c.a5,0])}else if(A.canonical.z>i.canonical.z){const N=A.canonical.z-i.canonical.z,F=A.canonical.x-(A.canonical.x>>N<<N)+i.wrap*(1<<A.canonical.z),q=A.canonical.y-(A.canonical.y>>N<<N),Y=i.canonical.x-(A.canonical.x>>N),W=i.canonical.y-(A.canonical.y>>N),ie=c.a5>>N;c.c7(D,0,ie,ie,0,0,1),c.O(D,D,[-F*ie+Y*c.a5,-q*ie+W*c.a5,0])}else{const N=i.canonical.z-A.canonical.z,F=i.canonical.x-(i.canonical.x>>N<<N)+i.wrap*(1<<i.canonical.z),q=i.canonical.y-(i.canonical.y>>N<<N),Y=(i.canonical.x>>N)-A.canonical.x,W=(i.canonical.y>>N)-A.canonical.y,ie=c.a5<<N;c.c7(D,0,ie,ie,0,0,1),c.O(D,D,[F*c.a5+Y*ie,q*c.a5+W*ie,0])}M.terrainRttPosMatrix32f=new Float32Array(D),y[b]=M}return y}getSourceTile(i,h){const y=this.tileManager._source;let b=i.overscaledZ-this.deltaZoom;if(b>y.maxzoom&&(b=y.maxzoom),b<y.minzoom)return;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(b).key);let A=this.findTileInCaches(this._sourceTileCache[i.key]);if(!A?.dem&&h)for(;b>=y.minzoom&&!A?.dem;)A=this.findTileInCaches(i.scaledTo(b--).key);return A}findTileInCaches(i){let h=this.tileManager.getTileByID(i);return h||(h=this.tileManager._outOfViewCache.getByKey(i),h)}anyTilesAfterTime(i=Date.now()){return this._lastTilesetChange>=i}_isWithinTileRanges(i,h){const y=h[i.canonical.z];return!!y&&(i.wrap>y.minWrap||i.wrap<y.maxWrap||i.canonical.x>=y.minTileXWrapped&&i.canonical.x<=y.maxTileXWrapped&&i.canonical.y>=y.minTileY&&i.canonical.y<=y.maxTileY)}}class Vn{constructor(i,h,y){this._meshCache={},this.painter=i,this.tileManager=new Ii(h),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,h,y,b=c.a5){var A;if(!(h>=0&&h<b&&y>=0&&y<b))return 0;const M=this.getTerrainData(i),D=(A=M.tile)===null||A===void 0?void 0:A.dem;if(!D)return 0;const N=c.cC([],[h/b*c.a5,y/b*c.a5],M.u_terrain_matrix),F=[N[0]*D.dim,N[1]*D.dim],q=Math.floor(F[0]),Y=Math.floor(F[1]),W=F[0]-q,ie=F[1]-Y;return D.get(q,Y)*(1-W)*(1-ie)+D.get(q+1,Y)*W*(1-ie)+D.get(q,Y+1)*(1-W)*ie+D.get(q+1,Y+1)*W*ie}getElevationForLngLatZoom(i,h){if(!c.cD(h,i.wrap()))return 0;const{tileID:y,mercatorX:b,mercatorY:A}=this._getOverscaledTileIDFromLngLatZoom(i,h);return this.getElevation(y,b%c.a5,A%c.a5,c.a5)}getElevationForLngLat(i,h){const y=hr(h,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let b=0;for(const A of y)A.canonical.z>b&&(b=Math.min(A.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(i,b)}getElevation(i,h,y,b=c.a5){return this.getDEMElevation(i,h,y,b)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const b=this.painter.context,A=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new c.T(b,A,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new c.T(b,new c.R({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ar([])}const h=this.tileManager.getSourceTile(i,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const b=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new c.T(b,h.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),h.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const y=h&&h.toString()+h.tileID.key+i.key;if(y&&!this._demMatrixCache[y]){const b=this.tileManager.getSource().maxzoom;let A=i.canonical.z-h.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=b?A=i.canonical.z-b:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=i.canonical.x-(i.canonical.x>>A<<A),D=i.canonical.y-(i.canonical.y>>A<<A),N=c.cE(new Float64Array(16),[1/(c.a5<<A),1/(c.a5<<A),0]);c.O(N,N,[M*c.a5,D*c.a5,0]),this._demMatrixCache[i.key]={matrix:N,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(i){const h=this.painter,y=h.width/devicePixelRatio,b=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new c.T(h.context,{width:y,height:b,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new c.T(h.context,{width:y,height:b,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(y,b,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,y,b))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let A=0,M=0;A<this._coordsTextureSize;A++)for(let D=0;D<this._coordsTextureSize;D++,M+=4)h[M+0]=255&D,h[M+1]=255&A,h[M+2]=D>>8<<4|A>>8,h[M+3]=0;const y=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),b=new c.T(i,y,i.gl.RGBA,{premultiply:!1});return b.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const h=new Uint8Array(4),y=this.painter.context,b=y.gl,A=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),D=Math.round(this.painter.height/devicePixelRatio);y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(A,D-M-1,1,1,b.RGBA,b.UNSIGNED_BYTE,h),y.bindFramebuffer.set(null);const N=h[0]+(h[2]>>4<<8),F=h[1]+((15&h[2])<<8),q=this.coordsIndex[255-h[3]],Y=q&&this.tileManager.getTileByID(q);if(!Y)return null;const W=this._coordsTextureSize,ie=(1<<Y.tileID.canonical.z)*W;return new c.a9((Y.tileID.canonical.x*W+N)/ie+Y.tileID.wrap,(Y.tileID.canonical.y*W+F)/ie,this.getElevation(Y.tileID,N,F,W))}depthAtPoint(i){const h=new Uint8Array(4),y=this.painter.context,b=y.gl;return y.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),b.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,h),y.bindFramebuffer.set(null),(h[0]/16777216+h[1]/65536+h[2]/256+h[3])/256}getTerrainMesh(i){var h;const y=((h=this.painter.style.projection)===null||h===void 0?void 0:h.transitionState)>0,b=y&&i.canonical.y===0,A=y&&i.canonical.y===(1<<i.canonical.z)-1,M=`m_${b?"n":""}_${A?"s":""}`;if(this._meshCache[M])return this._meshCache[M];const D=this.painter.context,N=new c.cF,F=new c.aY,q=this.meshSize,Y=c.a5/q,W=q*q;for(let ze=0;ze<=q;ze++)for(let Ve=0;Ve<=q;Ve++)N.emplaceBack(Ve*Y,ze*Y,0);for(let ze=0;ze<W;ze+=q+1)for(let Ve=0;Ve<q;Ve++)F.emplaceBack(Ve+ze,q+Ve+ze+1,q+Ve+ze+2),F.emplaceBack(Ve+ze,q+Ve+ze+2,Ve+ze+1);const ie=N.length,le=ie+(q+1),_e=(q+1)*q,be=b?c.br:0,ve=b?0:1,Ee=A?c.bs:c.a5,Pe=A?0:1;for(let ze=0;ze<=q;ze++)N.emplaceBack(ze*Y,be,ve);for(let ze=0;ze<=q;ze++)N.emplaceBack(ze*Y,Ee,Pe);for(let ze=0;ze<q;ze++)F.emplaceBack(_e+ze,le+ze,le+ze+1),F.emplaceBack(_e+ze,le+ze+1,_e+ze+1),F.emplaceBack(0+ze,ie+ze+1,ie+ze),F.emplaceBack(0+ze,0+ze+1,ie+ze+1);const Te=N.length,ke=Te+2*(q+1);for(const ze of[0,1])for(let Ve=0;Ve<=q;Ve++)for(const st of[0,1])N.emplaceBack(ze*c.a5,Ve*Y,st);for(let ze=0;ze<2*q;ze+=2)F.emplaceBack(Te+ze,Te+ze+1,Te+ze+3),F.emplaceBack(Te+ze,Te+ze+3,Te+ze+2),F.emplaceBack(ke+ze,ke+ze+3,ke+ze+1),F.emplaceBack(ke+ze,ke+ze+2,ke+ze+3);const Ne=new Mi(D.createVertexBuffer(N,Gn.members),D.createIndexBuffer(F),c.aX.simpleSegment(0,0,N.length,F.length));return this._meshCache[M]=Ne,Ne}getMeshFrameDelta(i){return 2*Math.PI*c.bE/Math.pow(2,Math.max(i,0))/5}getMinTileElevationForLngLatZoom(i,h){var y;if(!c.cD(h,i.wrap()))return 0;const{tileID:b}=this._getOverscaledTileIDFromLngLatZoom(i,h);return(y=this.getMinMaxElevation(b).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(i){const h=this.getTerrainData(i).tile,y={minElevation:null,maxElevation:null};return h&&h.dem&&(y.minElevation=h.dem.min*this.exaggeration,y.maxElevation=h.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(i,h){const y=c.a9.fromLngLat(i.wrap()),b=(1<<h)*c.a5,A=y.x*b,M=y.y*b,D=Math.floor(A/c.a5),N=Math.floor(M/c.a5);return{tileID:new c.a2(h,0,h,D,N),mercatorX:A,mercatorY:M}}}class gr{constructor(i,h,y){this._context=i,this._size=h,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new c.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(y.texture),{id:i,fbo:h,texture:y,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((h=>i.id!==h)),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((i=>!i.inUse))===!1}}const Ms={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class rl{constructor(i,h){this.painter=i,this.terrain=h,this.pool=new gr(i.context,30,h.tileManager.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=i._order.filter((y=>!i._layers[y].isHidden(h))),this._coordsAscending={};for(const y in i.tileManagers){this._coordsAscending[y]={};const b=i.tileManagers[y].getVisibleCoordinates(),A=i.tileManagers[y].getSource(),M=A instanceof Xa?A.terrainTileRanges:null;for(const D of b){const N=this.terrain.tileManager.getTerrainCoords(D,M);for(const F in N)this._coordsAscending[y][F]||(this._coordsAscending[y][F]=[]),this._coordsAscending[y][F].push(N[F])}}this._coordsAscendingStr={};for(const y of i._order){const b=i._layers[y],A=b.source;if(Ms[b.type]&&!this._coordsAscendingStr[A]){this._coordsAscendingStr[A]={};for(const M in this._coordsAscending[A])this._coordsAscendingStr[A][M]=this._coordsAscending[A][M].map((D=>D.key)).sort().join()}}for(const y of this._renderableTiles)for(const b in this._coordsAscendingStr){const A=this._coordsAscendingStr[b][y.tileID.key];A&&A!==y.rttCoords[b]&&(y.rtt=[])}}renderLayer(i,h){if(i.isHidden(this.painter.transform.zoom))return!1;const y=Object.assign(Object.assign({},h),{isRenderingToTexture:!0}),b=i.type,A=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Ms[b]&&(this._prevType&&Ms[this._prevType]||this._stacks.push([]),this._prevType=b,this._stacks[this._stacks.length-1].push(i.id),!M))return!0;if(Ms[this._prevType]||Ms[b]&&M){this._prevType=b;const D=this._stacks.length-1,N=this._stacks[D]||[];for(const F of this._renderableTiles){if(this.pool.isFull()&&(gf(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(F),F.rtt[D]){const Y=this.pool.getObjectForId(F.rtt[D].id);if(Y.stamp===F.rtt[D].stamp){this.pool.useObject(Y);continue}}const q=this.pool.getOrCreateFreeObject();this.pool.useObject(q),this.pool.stampObject(q),F.rtt[D]={id:q.id,stamp:q.stamp},A.context.bindFramebuffer.set(q.fbo.framebuffer),A.context.clear({color:c.bp.transparent,stencil:0}),A.currentStencilSource=void 0;for(let Y=0;Y<N.length;Y++){const W=A.style._layers[N[Y]],ie=W.source?this._coordsAscending[W.source][F.tileID.key]:[F.tileID];A.context.viewport.set([0,0,q.fbo.width,q.fbo.height]),A._renderTileClippingMasks(W,ie,!0),A.renderLayer(A,A.style.tileManagers[W.source],W,ie,y),W.source&&(F.rttCoords[W.source]=this._coordsAscendingStr[W.source][F.tileID.key])}}return gf(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects(),Ms[b]}return!1}}const Bu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Fu=z,xc={hash:!1,interactive:!0,bearingSnap:7,attributionControl:wr,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},wp={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class or{constructor(i,h,y=!1){this.mousedown=A=>{this.startMove(A,ae.mousePos(this.element,A)),ae.addEventListener(window,"mousemove",this.mousemove),ae.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.move(A,ae.mousePos(this.element,A))},this.mouseup=A=>{this._rotatePitchHandler.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ae.touchPos(this.element,A.targetTouches)[0],this.startMove(A,this._startPos),ae.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),ae.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=ae.touchPos(this.element,A.targetTouches)[0],this.move(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=h;const b=new Cd;this._rotatePitchHandler=new Es({clickTolerance:3,move:(A,M)=>{const D=h.getBoundingClientRect(),N=new c.P((D.bottom-D.top)/2,(D.right-D.left)/2);return{bearingDelta:c.cx(new c.P(A.x,M.y),M,N),pitchDelta:y?-.5*(M.y-A.y):void 0}},moveStateManager:b,enable:!0,assignEvents:()=>{}}),this.map=i,ae.addEventListener(h,"mousedown",this.mousedown),ae.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),ae.addEventListener(h,"touchcancel",this.reset)}startMove(i,h){this._rotatePitchHandler.dragStart(i,h),ae.disableDrag()}move(i,h){const y=this.map,{bearingDelta:b,pitchDelta:A}=this._rotatePitchHandler.dragMove(i,h)||{};b&&y.setBearing(y.getBearing()+b),A&&y.setPitch(y.getPitch()+A)}off(){const i=this.element;ae.removeEventListener(i,"mousedown",this.mousedown),ae.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),ae.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),ae.removeEventListener(window,"touchend",this.touchend),ae.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){ae.enableDrag(),ae.removeEventListener(window,"mousemove",this.mousemove),ae.removeEventListener(window,"mouseup",this.mouseup),ae.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),ae.removeEventListener(window,"touchend",this.touchend)}}let al;function $h(S,i,h,y=!1){if(y||!h.getCoveringTilesDetailsProvider().allowWorldCopies())return S?.wrap();const b=new c.V(S.lng,S.lat);if(S=new c.V(S.lng,S.lat),i){const A=new c.V(S.lng-360,S.lat),M=new c.V(S.lng+360,S.lat),D=h.locationToScreenPoint(S).distSqr(i);h.locationToScreenPoint(A).distSqr(i)<D?S=A:h.locationToScreenPoint(M).distSqr(i)<D&&(S=M)}for(;Math.abs(S.lng-h.center.lng)>180;){const A=h.locationToScreenPoint(S);if(A.x>=0&&A.y>=0&&A.x<=h.width&&A.y<=h.height)break;S.lng>h.center.lng?S.lng-=360:S.lng+=360}return S.lng!==b.lng&&h.isPointOnMapSurface(h.locationToScreenPoint(S))?S:b}const jh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ld(S,i,h){const y=S.classList;for(const b in jh)y.remove(`maplibregl-${h}-anchor-${b}`);y.add(`maplibregl-${h}-anchor-${i}`)}class Rd extends c.E{constructor(i){if(super(),this._onKeyPress=h=>{const y=h.code,b=h.charCode||h.keyCode;y!=="Space"&&y!=="Enter"&&b!==32&&b!==13||this.togglePopup()},this._onMapClick=h=>{const y=h.originalEvent.target,b=this._element;this._popup&&(y===b||b.contains(y))&&this.togglePopup()},this._update=h=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();(h?.type==="terrain"||h?.type==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=$h(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||h&&h.type!=="moveend"||(this._pos=this._pos.round()),ae.setTransform(this._element,`${jh[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${b}`),J.frameAsync(new AbortController).then((()=>{this._updateOpacity(h&&h.type==="moveend")})).catch((()=>{}))},this._onMove=h=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.l("dragstart"))),this.fire(new c.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.l("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(i?.opacity,i?.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=c.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=ae.create("div");const h=ae.createNS("http://www.w3.org/2000/svg","svg"),y=41,b=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${y}px`),h.setAttributeNS(null,"width",`${b}px`),h.setAttributeNS(null,"viewBox",`0 0 ${b} ${y}`);const A=ae.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"stroke","none"),A.setAttributeNS(null,"stroke-width","1"),A.setAttributeNS(null,"fill","none"),A.setAttributeNS(null,"fill-rule","evenodd");const M=ae.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");const D=ae.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(3.0, 29.0)"),D.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ve of N){const Ee=ae.createNS("http://www.w3.org/2000/svg","ellipse");Ee.setAttributeNS(null,"opacity","0.04"),Ee.setAttributeNS(null,"cx","10.5"),Ee.setAttributeNS(null,"cy","5.80029008"),Ee.setAttributeNS(null,"rx",ve.rx),Ee.setAttributeNS(null,"ry",ve.ry),D.appendChild(Ee)}const F=ae.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill",this._color);const q=ae.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),F.appendChild(q);const Y=ae.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");const W=ae.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild(W);const ie=ae.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ie.setAttributeNS(null,"fill","#FFFFFF");const le=ae.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const _e=ae.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#000000"),_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962");const be=ae.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#FFFFFF"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962"),le.appendChild(_e),le.appendChild(be),M.appendChild(D),M.appendChild(F),M.appendChild(Y),M.appendChild(ie),M.appendChild(le),h.appendChild(M),h.setAttributeNS(null,"height",y*this._scale+"px"),h.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(h),this._offset=c.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(h=>{h.preventDefault()})),this._element.addEventListener("mousedown",(h=>{h.preventDefault()})),Ld(this._element,this._anchor,"marker"),i&&i.className)for(const h of i.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),i.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),ae.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=c.V.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const b=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var h,y;const b=(h=this._map)===null||h===void 0?void 0:h.terrain,A=this._map.transform.isLocationOccluded(this._lngLat);if(!b||A){const ie=A?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ie&&(this._element.style.opacity=ie))}if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const M=this._map,D=M.terrain.depthAtPoint(this._pos),N=M.terrain.getElevationForLngLat(this._lngLat,M.transform);if(M.transform.lngLatToCameraDepth(this._lngLat,N)-D<.006)return void(this._element.style.opacity=this._opacity);const F=-this._offset.y/M.transform.pixelsPerMeter,q=Math.sin(M.getPitch()*Math.PI/180)*F,Y=M.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),W=M.transform.lngLatToCameraDepth(this._lngLat,N+q)-Y>.006;!((y=this._popup)===null||y===void 0)&&y.isOpen()&&W&&this._popup.remove(),this._element.style.opacity=W?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=c.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,h){return(this._opacity===void 0||i===void 0&&h===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),h!==void 0&&(this._opacityWhenCovered=h),this._map&&this._updateOpacity(!0),this}}const Od={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let au=0,wc=!1;const qa={maxWidth:100,unit:"metric"};function yr(S,i,h){const y=h&&h.maxWidth||100,b=S._container.clientHeight/2,A=S._container.clientWidth/2,M=S.unproject([A-y/2,b]),D=S.unproject([A+y/2,b]),N=Math.round(S.project(D).x-S.project(M).x),F=Math.min(y,N,S._container.clientWidth),q=M.distanceTo(D);if(h&&h.unit==="imperial"){const Y=3.2808*q;Y>5280?Ul(i,F,Y/5280,S._getUIString("ScaleControl.Miles")):Ul(i,F,Y,S._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?Ul(i,F,q/1852,S._getUIString("ScaleControl.NauticalMiles")):q>=1e3?Ul(i,F,q/1e3,S._getUIString("ScaleControl.Kilometers")):Ul(i,F,q,S._getUIString("ScaleControl.Meters"))}function Ul(S,i,h,y){const b=(function(A){const M=Math.pow(10,`${Math.floor(A)}`.length-1);let D=A/M;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:(function(N){const F=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*F)/F})(D),M*D})(h);S.style.width=i*(b/h)+"px",S.innerHTML=`${b}&nbsp;${y}`}const Uu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},Vu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Bh(S){if(S){if(typeof S=="number"){const i=Math.round(Math.abs(S)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,S),"top-left":new c.P(i,i),"top-right":new c.P(-i,i),bottom:new c.P(0,-S),"bottom-left":new c.P(i,-i),"bottom-right":new c.P(-i,-i),left:new c.P(S,0),right:new c.P(-S,0)}}if(S instanceof c.P||Array.isArray(S)){const i=c.P.convert(S);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:c.P.convert(S.center||[0,0]),top:c.P.convert(S.top||[0,0]),"top-left":c.P.convert(S["top-left"]||[0,0]),"top-right":c.P.convert(S["top-right"]||[0,0]),bottom:c.P.convert(S.bottom||[0,0]),"bottom-left":c.P.convert(S["bottom-left"]||[0,0]),"bottom-right":c.P.convert(S["bottom-right"]||[0,0]),left:c.P.convert(S.left||[0,0]),right:c.P.convert(S.right||[0,0])}}return Bh(new c.P(0,0))}const ol=z;m.AJAXError=c.cI,m.Event=c.l,m.Evented=c.E,m.LngLat=c.V,m.MercatorCoordinate=c.a9,m.Point=c.P,m.addProtocol=c.cJ,m.config=c.c,m.removeProtocol=c.cK,m.AttributionControl=Pr,m.BoxZoomHandler=iu,m.CanvasSource=se,m.CooperativeGesturesHandler=en,m.DoubleClickZoomHandler=Sf,m.DragPanHandler=xp,m.DragRotateHandler=rs,m.EdgeInsets=Ba,m.FullscreenControl=class extends c.E{constructor(S={}){super(),this._onFullscreenChange=()=>{var i;let h=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=h?.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)h=h.shadowRoot.fullscreenElement;h===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,S&&S.container&&(S.container instanceof HTMLElement?this._container=S.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=ae.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){ae.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const S=this._fullscreenButton=ae.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);ae.create("span","maplibregl-ctrl-icon",S).setAttribute("aria-hidden","true"),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.title=S}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=na,m.GeolocateControl=class extends c.E{constructor(S){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new c.l("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.l("geolocate",i)),this._finish()}},this._updateCamera=i=>{const h=new c.V(i.coords.longitude,i.coords.latitude),y=i.coords.accuracy,b=this._map.getBearing(),A=c.e({bearing:b},this.options.fitBoundsOptions),M=Pi.fromLngLat(h,y);this._map.fitBounds(M,A,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const h=new c.V(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=i.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=i=>{if(this._map){if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&wc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.l("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this._geolocateButton=ae.create("button","maplibregl-ctrl-geolocate",this._container),ae.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ae.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Rd({element:this._dotElement}),this._circleElement=ae.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Rd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(h=>{const y=h?.[0]instanceof ResizeObserverEntry;h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.l("trackuserlocationend")),this.fire(new c.l("userlocationlostfocus")))}))}},this.options=c.e({},Od,S)}onAdd(S){return this._map=S,this._container=ae.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return c._(this,arguments,void 0,(function*(i=!1){if(al!==void 0&&!i)return al;if(window.navigator.permissions===void 0)return al=!!window.navigator.geolocation,al;try{al=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{al=!!window.navigator.geolocation}return al}))})().then((i=>this._finishSetupUI(i))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),ae.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,au=0,wc=!1}_isOutOfMapMaxBounds(S){const i=this._map.getMaxBounds(),h=S.coords;return i&&(h.longitude<i.getWest()||h.longitude>i.getEast()||h.latitude<i.getSouth()||h.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const S=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&S))return;const i=this._map.project(S),h=this._map.unproject([i.x+100,i.y]),y=S.distanceTo(h)/100,b=2*this._accuracy/y;this._circleElement.style.width=`${b.toFixed(2)}px`,this._circleElement.style.height=`${b.toFixed(2)}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":au--,wc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.l("trackuserlocationstart")),this.fire(new c.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let S;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),au++,au>1?(S={maximumAge:6e5,timeout:0},wc=!0):(S=this.options.positionOptions,wc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,S)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.GlobeControl=class{constructor(){this._toggleProjection=()=>{var S;const i=(S=this._map.getProjection())===null||S===void 0?void 0:S.type;this._map.setProjection(i!=="mercator"&&i?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var S;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((S=this._map.getProjection())===null||S===void 0?void 0:S.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(S){return this._map=S,this._container=ae.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=ae.create("button","maplibregl-ctrl-globe",this._container),ae.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){ae.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},m.Hash=Br,m.ImageSource=Xa,m.KeyboardHandler=Ri,m.LngLatBounds=Pi,m.LogoControl=Dd,m.Map=class extends Fr{constructor(S){var i,h;c.cG.mark(c.cH.create);const y=Object.assign(Object.assign(Object.assign({},xc),S),{canvasContextAttributes:Object.assign(Object.assign({},xc.canvasContextAttributes),S.canvasContextAttributes)});if(y.minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const b=new Ir,A=new Zn;if(y.minZoom!==void 0&&b.setMinZoom(y.minZoom),y.maxZoom!==void 0&&b.setMaxZoom(y.maxZoom),y.minPitch!==void 0&&b.setMinPitch(y.minPitch),y.maxPitch!==void 0&&b.setMaxPitch(y.maxPitch),y.renderWorldCopies!==void 0&&b.setRenderWorldCopies(y.renderWorldCopies),y.transformConstrain!==null&&b.setConstrainOverride(y.transformConstrain),super(b,A,{bearingSnap:y.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new bc,this._controls=[],this._mapId=c.af(),this._lostContextStyle={style:null,images:null},this._contextLost=D=>{D.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const N of Object.values(this.style._layers))if(N.type==="custom"&&console.warn(`Custom layer with id '${N.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),N._listeners)for(const[F]of Object.entries(N._listeners))console.warn(`Custom layer with id '${N.id}' had event listeners for event '${F}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new c.l("webglcontextlost",{originalEvent:D}))},this._contextRestored=D=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new c.l("webglcontextrestored",{originalEvent:D}))},this._onMapScroll=D=>{if(D.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},y.canvasContextAttributes),this._trackResize=y.trackResize===!0,this._bearingSnap=y.bearingSnap,this._centerClampedToGround=y.centerClampedToGround,this._refreshExpiredTiles=y.refreshExpiredTiles===!0,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions===!0,this._collectResourceTiming=y.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Bu),y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this._zoomLevelsToOverscale=y.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=y.transformCameraUpdate,this.transformConstrain=y.transformConstrain,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming===!0,y.reduceMotion!==void 0&&(J.prefersReducedMotion=y.reduceMotion),this._imageQueueHandle=Ue.addThrottleControl((()=>this.isMoving())),this._requestManager=new it(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let D=!1;const N=_p((F=>{this._trackResize&&!this._removed&&(this.resize(F),this.redraw())}),50);this._resizeObserver=new ResizeObserver((F=>{D?N(F):D=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Pd(this,y),this._hash=y.hash&&new Br(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,roll:y.roll}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,c.e({},y.fitBoundsOptions,{duration:0}))));const M=typeof y.style=="string"||((h=(i=y.style)===null||i===void 0?void 0:i.projection)===null||h===void 0?void 0:h.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Pr(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new Dd,y.logoPosition),this.on("style.load",(()=>{if(M||this._resizeTransform(),this.transform.unmodified){const D=c.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(D)}})),this.on("data",(D=>{this._update(D.dataType==="style"),this.fire(new c.l(`${D.dataType}data`,D))})),this.on("dataloading",(D=>{this.fire(new c.l(`${D.dataType}dataloading`,D))})),this.on("dataabort",(D=>{this.fire(new c.l("sourcedataabort",D))}))}_getMapId(){return this._mapId}setGlobalStateProperty(S,i){return this.style.setGlobalStateProperty(S,i),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(S,i){if(i===void 0&&(i=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new c.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=S.onAdd(this);this._controls.push(S);const y=this._controlPositions[i];return i.indexOf("bottom")!==-1?y.insertBefore(h,y.firstChild):y.appendChild(h),this}removeControl(S){if(!S||!S.onRemove)return this.fire(new c.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(S);return i>-1&&this._controls.splice(i,1),S.onRemove(this),this}hasControl(S){return this._controls.indexOf(S)>-1}coveringTiles(S){return hr(this.transform,S)}calculateCameraOptionsFromTo(S,i,h,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLat(h,this.transform)),super.calculateCameraOptionsFromTo(S,i,h,y)}resize(S,i=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(i);const h=!this._moving;return h&&(this.stop(),this.fire(new c.l("movestart",S)).fire(new c.l("move",S))),this.fire(new c.l("resize",S)),h&&this.fire(new c.l("moveend",S)),this}_resizeInternal(S=!0){const[i,h]=this._containerDimensions(),y=this._getClampedPixelRatio(i,h);if(this._resizeCanvas(i,h,y),this.painter.resize(i,h,y),this.painter.overLimit()){const b=this.painter.context.gl;this._maxCanvasSize=[b.drawingBufferWidth,b.drawingBufferHeight];const A=this._getClampedPixelRatio(i,h);this._resizeCanvas(i,h,A),this.painter.resize(i,h,A)}this._resizeTransform(S)}_resizeTransform(S=!0){var i;const[h,y]=this._containerDimensions();this.transform.resize(h,y,S),(i=this._requestedCameraState)===null||i===void 0||i.resize(h,y,S)}_getClampedPixelRatio(S,i){const{0:h,1:y}=this._maxCanvasSize,b=this.getPixelRatio(),A=S*b,M=i*b;return Math.min(A>h?h/A:1,M>y?y/M:1)*b}getPixelRatio(){var S;return(S=this._overridePixelRatio)!==null&&S!==void 0?S:devicePixelRatio}setPixelRatio(S){this._overridePixelRatio=S,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(S){return this.transform.setMaxBounds(Pi.convert(S)),this._update()}setMinZoom(S){if((S=S??-2)>=-2&&S<=this.transform.maxZoom){const i=this._getTransformForUpdate();return i.setMinZoom(S),this._applyUpdatedTransform(i),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(S){if((S=S??22)>=this.transform.minZoom){const i=this._getTransformForUpdate();return i.setMaxZoom(S),this._applyUpdatedTransform(i),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(S){if((S=S??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.setMinPitch(S),this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(S){if((S=S??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(S>=this.transform.minPitch)return this.transform.setMaxPitch(S),this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(S){return this.transform.setRenderWorldCopies(S),this._update()}setTransformConstrain(S){return this.transform.setConstrainOverride(S),this._update()}project(S){return this.transform.locationToScreenPoint(c.V.convert(S),this.style&&this.terrain)}unproject(S){return this.transform.screenPointToLocation(c.P.convert(S),this.terrain)}isMoving(){var S;return this._moving||((S=this.handlers)===null||S===void 0?void 0:S.isMoving())}isZooming(){var S;return this._zooming||((S=this.handlers)===null||S===void 0?void 0:S.isZooming())}isRotating(){var S;return this._rotating||((S=this.handlers)===null||S===void 0?void 0:S.isRotating())}_createDelegatedListener(S,i,h){if(S==="mouseenter"||S==="mouseover"){let y=!1;return{layers:i,listener:h,delegates:{mousemove:A=>{const M=i.filter((N=>this.getLayer(N))),D=M.length!==0?this.queryRenderedFeatures(A.point,{layers:M}):[];D.length?y||(y=!0,h.call(this,new xa(S,this,A.originalEvent,{features:D}))):y=!1},mouseout:()=>{y=!1}}}}if(S==="mouseleave"||S==="mouseout"){let y=!1;return{layers:i,listener:h,delegates:{mousemove:M=>{const D=i.filter((N=>this.getLayer(N)));(D.length!==0?this.queryRenderedFeatures(M.point,{layers:D}):[]).length?y=!0:y&&(y=!1,h.call(this,new xa(S,this,M.originalEvent)))},mouseout:M=>{y&&(y=!1,h.call(this,new xa(S,this,M.originalEvent)))}}}}{const y=b=>{const A=i.filter((D=>this.getLayer(D))),M=A.length!==0?this.queryRenderedFeatures(b.point,{layers:A}):[];M.length&&(b.features=M,h.call(this,b),delete b.features)};return{layers:i,listener:h,delegates:{[S]:y}}}}_saveDelegatedListener(S,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(i)}_removeDelegatedListener(S,i,h){if(!this._delegatedListeners||!this._delegatedListeners[S])return;const y=this._delegatedListeners[S];for(let b=0;b<y.length;b++){const A=y[b];if(A.listener===h&&A.layers.length===i.length&&A.layers.every((M=>i.includes(M)))){for(const M in A.delegates)this.off(M,A.delegates[M]);return void y.splice(b,1)}}}on(S,i,h){if(h===void 0)return super.on(S,i);const y=typeof i=="string"?[i]:i,b=this._createDelegatedListener(S,y,h);this._saveDelegatedListener(S,b);for(const A in b.delegates)this.on(A,b.delegates[A]);return{unsubscribe:()=>{this._removeDelegatedListener(S,y,h)}}}once(S,i,h){if(h===void 0)return super.once(S,i);const y=typeof i=="string"?[i]:i,b=this._createDelegatedListener(S,y,h);for(const A in b.delegates){const M=b.delegates[A];b.delegates[A]=(...D)=>{this._removeDelegatedListener(S,y,h),M(...D)}}this._saveDelegatedListener(S,b);for(const A in b.delegates)this.once(A,b.delegates[A]);return this}off(S,i,h){return h===void 0?super.off(S,i):(this._removeDelegatedListener(S,typeof i=="string"?[i]:i,h),this)}queryRenderedFeatures(S,i){if(!this.style)return[];let h;const y=S instanceof c.P||Array.isArray(S),b=y?S:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(y?{}:S)||{},b instanceof c.P||typeof b[0]=="number")h=[c.P.convert(b)];else{const A=c.P.convert(b[0]),M=c.P.convert(b[1]);h=[A,new c.P(M.x,A.y),M,new c.P(A.x,M.y),A]}return this.style.queryRenderedFeatures(h,i,this.transform)}querySourceFeatures(S,i){return this.style.querySourceFeatures(S,i)}setStyle(S,i){return(i=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(S,i))}setTransformRequest(S){return this._requestManager.setTransformRequest(S),this}_getUIString(S){const i=this._locale[S];if(i==null)throw new Error(`Missing UI string '${S}'`);return i}_updateStyle(S,i){var h,y;if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(S,i)));const b=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!S)),S?(this.style=new vs(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S,i,b):this.style.loadJSON(S,i,b),this):((y=(h=this.style)===null||h===void 0?void 0:h.projection)===null||y===void 0||y.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new vs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(S,i){if(typeof S=="string"){const h=this._requestManager.transformRequest(S,"Style");c.j(h,new AbortController).then((y=>{this._updateDiff(y.data,i)})).catch((y=>{y&&this.fire(new c.k(y))}))}else typeof S=="object"&&this._updateDiff(S,i)}_updateDiff(S,i){try{this.style.setState(S,i)&&this._update(!0)}catch(h){c.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(S,i)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(S,i){return this._lazyInitEmptyStyle(),this.style.addSource(S,i),this._update(!0)}isSourceLoaded(S){const i=this.style&&this.style.tileManagers[S];if(i!==void 0)return i.loaded();this.fire(new c.k(new Error(`There is no tile manager with ID '${S}'`)))}setTerrain(S){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),S){const i=this.style.tileManagers[S.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${S.source}`);this.terrain===null&&i.reload();for(const h in this.style._layers){const y=this.style._layers[h];y.type==="hillshade"&&y.source===S.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),y.type==="color-relief"&&y.source===S.source&&c.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Vn(this.painter,i,S),this.painter.renderToTexture=new rl(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=h=>{var y;h.dataType==="style"?this.terrain.tileManager.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==S.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((y=h.source)===null||y===void 0?void 0:y.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.l("terrain",{terrain:S})),this}getTerrain(){var S,i;return(i=(S=this.terrain)===null||S===void 0?void 0:S.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const S=this.style&&this.style.tileManagers;for(const i of Object.values(S))if(!i.areTilesLoaded())return!1;return!0}removeSource(S){return this.style.removeSource(S),this._update(!0)}getSource(S){return this.style.getSource(S)}setSourceTileLodParams(S,i,h){if(h){const y=this.getSource(h);if(!y)throw new Error(`There is no source with ID "${h}", cannot set LOD parameters`);y.calculateTileZoom=Ai(Math.max(1,S),Math.max(1,i))}else for(const y in this.style.tileManagers)this.style.tileManagers[y].getSource().calculateTileZoom=Ai(Math.max(1,S),Math.max(1,i));return this._update(!0),this}refreshTiles(S,i){const h=this.style.tileManagers[S];if(!h)throw new Error(`There is no tile manager with ID "${S}", cannot refresh tile`);i===void 0?h.reload(!0):h.refreshTiles(i.map((y=>new c.ac(y.z,y.x,y.y))))}addImage(S,i,h={}){const{pixelRatio:y=1,sdf:b=!1,stretchX:A,stretchY:M,content:D,textFitWidth:N,textFitHeight:F}=h;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||c.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:q,height:Y,data:W}=i,ie=i;return this.style.addImage(S,{data:new c.R({width:q,height:Y},new Uint8Array(W)),pixelRatio:y,stretchX:A,stretchY:M,content:D,textFitWidth:N,textFitHeight:F,sdf:b,version:0,userImage:ie}),ie.onAdd&&ie.onAdd(this,S),this}}{const{width:q,height:Y,data:W}=J.getImageData(i);this.style.addImage(S,{data:new c.R({width:q,height:Y},W),pixelRatio:y,stretchX:A,stretchY:M,content:D,textFitWidth:N,textFitHeight:F,sdf:b,version:0})}}updateImage(S,i){const h=this.style.getImage(S);if(!h)return this.fire(new c.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=i instanceof HTMLImageElement||c.b(i)?J.getImageData(i):i,{width:b,height:A,data:M}=y;if(b===void 0||A===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==h.data.width||A!==h.data.height)return this.fire(new c.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const D=!(i instanceof HTMLImageElement||c.b(i));return h.data.replace(M,D),this.style.updateImage(S,h),this}getImage(S){return this.style.getImage(S)}hasImage(S){return S?!!this.style.getImage(S):(this.fire(new c.k(new Error("Missing required image id"))),!1)}removeImage(S){this.style.removeImage(S)}loadImage(S){return Ue.getImage(this._requestManager.transformRequest(S,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(S,i){return this._lazyInitEmptyStyle(),this.style.addLayer(S,i),this._update(!0)}moveLayer(S,i){return this.style.moveLayer(S,i),this._update(!0)}removeLayer(S){return this.style.removeLayer(S),this._update(!0)}getLayer(S){return this.style.getLayer(S)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(S,i,h){return this.style.setLayerZoomRange(S,i,h),this._update(!0)}setFilter(S,i,h={}){return this.style.setFilter(S,i,h),this._update(!0)}getFilter(S){return this.style.getFilter(S)}setPaintProperty(S,i,h,y={}){return this.style.setPaintProperty(S,i,h,y),this._update(!0)}getPaintProperty(S,i){return this.style.getPaintProperty(S,i)}setLayoutProperty(S,i,h,y={}){return this.style.setLayoutProperty(S,i,h,y),this._update(!0)}getLayoutProperty(S,i){return this.style.getLayoutProperty(S,i)}setGlyphs(S,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(S,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(S,i,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(S,i,h,(y=>{y||this._update(!0)})),this}removeSprite(S){return this._lazyInitEmptyStyle(),this.style.removeSprite(S),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(S,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(S,i,(h=>{h||this._update(!0)})),this}setLight(S,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(S,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(S,i={}){return this._lazyInitEmptyStyle(),this.style.setSky(S,i),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(S,i){return this.style.setFeatureState(S,i),this._update()}removeFeatureState(S,i){return this.style.removeFeatureState(S,i),this._update()}getFeatureState(S){return this.style.getFeatureState(S)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let S=0,i=0;return this._container&&(S=this._container.clientWidth||400,i=this._container.clientHeight||300),[S,i]}_setupContainer(){const S=this._container;S.classList.add("maplibregl-map");const i=this._canvasContainer=ae.create("div","maplibregl-canvas-container",S);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=ae.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),y=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],y);const b=this._controlContainer=ae.create("div","maplibregl-control-container",S),A=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((M=>{A[M]=ae.create("div",`maplibregl-ctrl-${M} `,b)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(S,i,h){this._canvas.width=Math.floor(h*S),this._canvas.height=Math.floor(h*i),this._canvas.style.width=`${S}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const S=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let i=null;this._canvas.addEventListener("webglcontextcreationerror",(y=>{i={requestedAttributes:S},y&&(i.statusMessage=y.statusMessage,i.type=y.type)}),{once:!0});let h=null;if(h=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,S):this._canvas.getContext("webgl2",S)||this._canvas.getContext("webgl",S),!h){const y="Failed to initialize WebGL";throw i?(i.message=y,new Error(JSON.stringify(i))):new Error(y)}this.painter=new Um(h,this.transform),Me.testSupport(h)}migrateProjection(S,i){super.migrateProjection(S,i),this.painter.transform=S,this.fire(new c.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(S){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(S){return this._update(),this._renderTaskQueue.add(S)}_cancelRenderFrame(S){this._renderTaskQueue.remove(S)}_render(S){var i,h,y,b,A;const M=this._idleTriggered?this._fadeDuration:0,D=((i=this.style.projection)===null||i===void 0?void 0:i.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),this._removed)return;let N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Y=this.transform.zoom,W=ee();this.style.zoomHistory.update(Y,W);const ie=new c.H(Y,{now:W,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),le=ie.crossFadingFactor();le===1&&le===this._crossFadingFactor||(N=!0,this._crossFadingFactor=le),this.style.update(ie)}const F=((h=this.style.projection)===null||h===void 0?void 0:h.transitionState)>0!==D;(y=this.style.projection)===null||y===void 0||y.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((b=this.style.projection)===null||b===void 0?void 0:b.transitionState,(A=this.style.projection)===null||A===void 0?void 0:A.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||F)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,F),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new c.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cG.mark(c.cH.load),this.fire(new c.l("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const q=this._sourcesDirty||this._styleDirty||this._placementDirty;return q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.l("idle")),!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,c.cG.mark(c.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var S;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Ue.removeThrottleControl(this._imageQueueHandle),(S=this._resizeObserver)===null||S===void 0||S.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i?.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),ae.remove(this._canvasContainer),ae.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cG.clearMetrics(),this._removed=!0,this.fire(new c.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,J.frame(this._frameRequest,(S=>{c.cG.frame(S),this._frameRequest=null;try{this._render(S)}catch(i){if(!c.Z(i)&&!(function(h){return h.message===U})(i))throw i}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())}get showPadding(){return!!this._showPadding}set showPadding(S){this._showPadding!==S&&(this._showPadding=S,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())}get repaint(){return!!this._repaint}set repaint(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(S){this._vertices=S,this._update()}get version(){return Fu}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(S){return this._lazyInitEmptyStyle(),this.style.setProjection(S),this._update(!0)}},m.MapMouseEvent=xa,m.MapTouchEvent=tl,m.MapWheelEvent=yf,m.Marker=Rd,m.NavigationControl=class{constructor(S){this._updateZoomButtons=()=>{const i=this._map.getZoom(),h=i===this._map.getMaxZoom(),y=i===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(i,h)=>{const y=this._map._getUIString(`NavigationControl.${h}`);i.title=y,i.setAttribute("aria-label",y)},this.options=c.e({},wp,S),this._container=ae.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(i=>this._map.zoomIn({},{originalEvent:i}))),ae.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(i=>this._map.zoomOut({},{originalEvent:i}))),ae.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})})),this._compassIcon=ae.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new or(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){ae.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(S,i){const h=ae.create("button",S,this._container);return h.type="button",h.addEventListener("click",i),h}},m.Popup=class extends c.E{constructor(S){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&ae.remove(this._content),this._container&&(ae.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.l("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=ae.create("div","maplibregl-popup",this._map.getContainer()),this._tip=ae.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=$h(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!i)return;const h=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationToScreenPoint(this._lngLat));let y=this.options.anchor;const b=Bh(this.options.offset);if(!y){const M=this._container.offsetWidth,D=this._container.offsetHeight,N=(function(q){var Y,W,ie,le;return q?{top:(Y=q.top)!==null&&Y!==void 0?Y:0,right:(W=q.right)!==null&&W!==void 0?W:0,bottom:(ie=q.bottom)!==null&&ie!==void 0?ie:0,left:(le=q.left)!==null&&le!==void 0?le:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding);let F;F=h.y+b.bottom.y<D+N.top?["top"]:h.y>this._map.transform.height-D-N.bottom?["bottom"]:[],h.x<M/2+N.left?F.push("left"):h.x>this._map.transform.width-M/2-N.right&&F.push("right"),y=F.length===0?"bottom":F.join("-")}let A=h.add(b[y]);this.options.subpixelPositioning||(A=A.round()),ae.setTransform(this._container,`${jh[y]} translate(${A.x}px,${A.y}px)`),Ld(this._container,y,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Uu),S)}addTo(S){return this._map&&this.remove(),this._map=S,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(S){return this._lngLat=c.V.convert(S),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(S){return this.setDOMContent(document.createTextNode(S))}setHTML(S){const i=document.createDocumentFragment(),h=document.createElement("body");let y;for(h.innerHTML=S;y=h.firstChild,y;)i.appendChild(y);return this.setDOMContent(i)}getMaxWidth(){var S;return(S=this._container)===null||S===void 0?void 0:S.style.maxWidth}setMaxWidth(S){return this.options.maxWidth=S,this._update(),this}setDOMContent(S){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=ae.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(S),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(S){return this._container&&this._container.classList.add(S),this}removeClassName(S){return this._container&&this._container.classList.remove(S),this}setOffset(S){return this.options.offset=S,this._update(),this}toggleClassName(S){if(this._container)return this._container.classList.toggle(S)}setSubpixelPositioning(S){this.options.subpixelPositioning=S}setPadding(S){this.options.padding=S,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=ae.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const S=this._container.querySelector(Vu);S&&S.focus()}},m.RasterDEMTileSource=Co,m.RasterTileSource=Us,m.ScaleControl=class{constructor(S){this._onMove=()=>{yr(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,yr(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},qa),S)}getDefaultPosition(){return"bottom-left"}onAdd(S){return this._map=S,this._container=ae.create("div","maplibregl-ctrl maplibregl-ctrl-scale",S.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){ae.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=Id,m.Style=vs,m.TerrainControl=class{constructor(S){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=S}onAdd(S){return this._map=S,this._container=ae.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=ae.create("button","maplibregl-ctrl-terrain",this._container),ae.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){ae.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=_c,m.TwoFingersTouchRotateHandler=zd,m.TwoFingersTouchZoomHandler=Bl,m.TwoFingersTouchZoomRotateHandler=ju,m.VectorTileSource=Fs,m.VideoSource=Xe,m.addSourceType=(S,i)=>c._(void 0,void 0,void 0,(function*(){if(ge(S))throw new Error(`A source type called "${S}" already exists.`);((h,y)=>{oe[h]=y})(S,i)})),m.clearPrewarmedResources=function(){const S=At;S&&(S.isPreloaded()&&S.numActive()===1?(S.release(It),At=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.createTileMesh=Eh,m.getMaxParallelImageRequests=function(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return He().getRTLTextPluginStatus()},m.getVersion=function(){return ol},m.getWorkerCount=function(){return Nt.workerCount},m.getWorkerUrl=function(){return c.c.WORKER_URL},m.importScriptInWorkers=function(S){return Wn().broadcast("IS",S)},m.isTimeFrozen=function(){return ce.isFrozen()},m.now=ee,m.prewarm=function(){Cn().acquire(It)},m.restoreNow=function(){ce.restoreNow()},m.setMaxParallelImageRequests=function(S){c.c.MAX_PARALLEL_IMAGE_REQUESTS=S},m.setNow=function(S){ce.setNow(S)},m.setRTLTextPlugin=function(S,i){return He().setRTLTextPlugin(S,i)},m.setWorkerCount=function(S){Nt.workerCount=S},m.setWorkerUrl=function(S){c.c.WORKER_URL=S}}));var f=r;return f}))})(vb)),vb.exports}var T$=S$();const mn=gv(T$),x4="3.7.8",E$=x4,wy=typeof Buffer=="function",gA=typeof TextDecoder=="function"?new TextDecoder:void 0,yA=typeof TextEncoder=="function"?new TextEncoder:void 0,A$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",F_=Array.prototype.slice.call(A$),tb=(e=>{let t={};return e.forEach((r,u)=>t[r]=u),t})(F_),C$=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ds=String.fromCharCode.bind(String),_A=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),w4=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),S4=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),T4=e=>{let t,r,u,a,f="";const m=e.length%3;for(let c=0;c<e.length;){if((r=e.charCodeAt(c++))>255||(u=e.charCodeAt(c++))>255||(a=e.charCodeAt(c++))>255)throw new TypeError("invalid character found");t=r<<16|u<<8|a,f+=F_[t>>18&63]+F_[t>>12&63]+F_[t>>6&63]+F_[t&63]}return m?f.slice(0,m-3)+"===".substring(m):f},wT=typeof btoa=="function"?e=>btoa(e):wy?e=>Buffer.from(e,"binary").toString("base64"):T4,Ow=wy?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let u=0,a=e.length;u<a;u+=4096)r.push(ds.apply(null,e.subarray(u,u+4096)));return wT(r.join(""))},bb=(e,t=!1)=>t?w4(Ow(e)):Ow(e),M$=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?ds(192|t>>>6)+ds(128|t&63):ds(224|t>>>12&15)+ds(128|t>>>6&63)+ds(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return ds(240|t>>>18&7)+ds(128|t>>>12&63)+ds(128|t>>>6&63)+ds(128|t&63)}},z$=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,E4=e=>e.replace(z$,M$),vA=wy?e=>Buffer.from(e,"utf8").toString("base64"):yA?e=>Ow(yA.encode(e)):e=>wT(E4(e)),ty=(e,t=!1)=>t?w4(vA(e)):vA(e),bA=e=>ty(e,!0),I$=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,k$=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return ds((r>>>10)+55296)+ds((r&1023)+56320);case 3:return ds((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return ds((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},A4=e=>e.replace(I$,k$),C4=e=>{if(e=e.replace(/\s+/g,""),!C$.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r,u,a=[];for(let f=0;f<e.length;)t=tb[e.charAt(f++)]<<18|tb[e.charAt(f++)]<<12|(r=tb[e.charAt(f++)])<<6|(u=tb[e.charAt(f++)]),r===64?a.push(ds(t>>16&255)):u===64?a.push(ds(t>>16&255,t>>8&255)):a.push(ds(t>>16&255,t>>8&255,t&255));return a.join("")},ST=typeof atob=="function"?e=>atob(S4(e)):wy?e=>Buffer.from(e,"base64").toString("binary"):C4,M4=wy?e=>_A(Buffer.from(e,"base64")):e=>_A(ST(e).split("").map(t=>t.charCodeAt(0))),z4=e=>M4(I4(e)),P$=wy?e=>Buffer.from(e,"base64").toString("utf8"):gA?e=>gA.decode(M4(e)):e=>A4(ST(e)),I4=e=>S4(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Nw=e=>P$(I4(e)),D$=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},k4=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),P4=function(){const e=(t,r)=>Object.defineProperty(String.prototype,t,k4(r));e("fromBase64",function(){return Nw(this)}),e("toBase64",function(t){return ty(this,t)}),e("toBase64URI",function(){return ty(this,!0)}),e("toBase64URL",function(){return ty(this,!0)}),e("toUint8Array",function(){return z4(this)})},D4=function(){const e=(t,r)=>Object.defineProperty(Uint8Array.prototype,t,k4(r));e("toBase64",function(t){return bb(this,t)}),e("toBase64URI",function(){return bb(this,!0)}),e("toBase64URL",function(){return bb(this,!0)})},L$=()=>{P4(),D4()},R$={version:x4,VERSION:E$,atob:ST,atobPolyfill:C4,btoa:wT,btoaPolyfill:T4,fromBase64:Nw,toBase64:ty,encode:ty,encodeURI:bA,encodeURL:bA,utob:E4,btou:A4,decode:Nw,isValid:D$,fromUint8Array:bb,toUint8Array:z4,extendString:P4,extendUint8Array:D4,extendBuiltins:L$};var nb={exports:{}},xA;function O$(){if(xA)return nb.exports;xA=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(Se,Fe,Ue){return Function.prototype.apply.call(Se,Fe,Ue)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(Se){return Object.getOwnPropertyNames(Se).concat(Object.getOwnPropertySymbols(Se))}:r=function(Se){return Object.getOwnPropertyNames(Se)};function u(xe){console&&console.warn&&console.warn(xe)}var a=Number.isNaN||function(Se){return Se!==Se};function f(){f.init.call(this)}nb.exports=f,nb.exports.once=Me,f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var m=10;function c(xe){if(typeof xe!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof xe)}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(xe){if(typeof xe!="number"||xe<0||a(xe))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+xe+".");m=xe}}),f.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(Se){if(typeof Se!="number"||Se<0||a(Se))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Se+".");return this._maxListeners=Se,this};function z(xe){return xe._maxListeners===void 0?f.defaultMaxListeners:xe._maxListeners}f.prototype.getMaxListeners=function(){return z(this)},f.prototype.emit=function(Se){for(var Fe=[],Ue=1;Ue<arguments.length;Ue++)Fe.push(arguments[Ue]);var it=Se==="error",Rt=this._events;if(Rt!==void 0)it=it&&Rt.error===void 0;else if(!it)return!1;if(it){var Pt;if(Fe.length>0&&(Pt=Fe[0]),Pt instanceof Error)throw Pt;var $t=new Error("Unhandled error."+(Pt?" ("+Pt.message+")":""));throw $t.context=Pt,$t}var Zt=Rt[Se];if(Zt===void 0)return!1;if(typeof Zt=="function")t(Zt,this,Fe);else for(var cn=Zt.length,ln=ce(Zt,cn),Ue=0;Ue<cn;++Ue)t(ln[Ue],this,Fe);return!0};function k(xe,Se,Fe,Ue){var it,Rt,Pt;if(c(Fe),Rt=xe._events,Rt===void 0?(Rt=xe._events=Object.create(null),xe._eventsCount=0):(Rt.newListener!==void 0&&(xe.emit("newListener",Se,Fe.listener?Fe.listener:Fe),Rt=xe._events),Pt=Rt[Se]),Pt===void 0)Pt=Rt[Se]=Fe,++xe._eventsCount;else if(typeof Pt=="function"?Pt=Rt[Se]=Ue?[Fe,Pt]:[Pt,Fe]:Ue?Pt.unshift(Fe):Pt.push(Fe),it=z(xe),it>0&&Pt.length>it&&!Pt.warned){Pt.warned=!0;var $t=new Error("Possible EventEmitter memory leak detected. "+Pt.length+" "+String(Se)+" listeners added. Use emitter.setMaxListeners() to increase limit");$t.name="MaxListenersExceededWarning",$t.emitter=xe,$t.type=Se,$t.count=Pt.length,u($t)}return xe}f.prototype.addListener=function(Se,Fe){return k(this,Se,Fe,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(Se,Fe){return k(this,Se,Fe,!0)};function B(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Z(xe,Se,Fe){var Ue={fired:!1,wrapFn:void 0,target:xe,type:Se,listener:Fe},it=B.bind(Ue);return it.listener=Fe,Ue.wrapFn=it,it}f.prototype.once=function(Se,Fe){return c(Fe),this.on(Se,Z(this,Se,Fe)),this},f.prototype.prependOnceListener=function(Se,Fe){return c(Fe),this.prependListener(Se,Z(this,Se,Fe)),this},f.prototype.removeListener=function(Se,Fe){var Ue,it,Rt,Pt,$t;if(c(Fe),it=this._events,it===void 0)return this;if(Ue=it[Se],Ue===void 0)return this;if(Ue===Fe||Ue.listener===Fe)--this._eventsCount===0?this._events=Object.create(null):(delete it[Se],it.removeListener&&this.emit("removeListener",Se,Ue.listener||Fe));else if(typeof Ue!="function"){for(Rt=-1,Pt=Ue.length-1;Pt>=0;Pt--)if(Ue[Pt]===Fe||Ue[Pt].listener===Fe){$t=Ue[Pt].listener,Rt=Pt;break}if(Rt<0)return this;Rt===0?Ue.shift():ee(Ue,Rt),Ue.length===1&&(it[Se]=Ue[0]),it.removeListener!==void 0&&this.emit("removeListener",Se,$t||Fe)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(Se){var Fe,Ue,it;if(Ue=this._events,Ue===void 0)return this;if(Ue.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Ue[Se]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Ue[Se]),this;if(arguments.length===0){var Rt=Object.keys(Ue),Pt;for(it=0;it<Rt.length;++it)Pt=Rt[it],Pt!=="removeListener"&&this.removeAllListeners(Pt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Fe=Ue[Se],typeof Fe=="function")this.removeListener(Se,Fe);else if(Fe!==void 0)for(it=Fe.length-1;it>=0;it--)this.removeListener(Se,Fe[it]);return this};function X(xe,Se,Fe){var Ue=xe._events;if(Ue===void 0)return[];var it=Ue[Se];return it===void 0?[]:typeof it=="function"?Fe?[it.listener||it]:[it]:Fe?ae(it):ce(it,it.length)}f.prototype.listeners=function(Se){return X(this,Se,!0)},f.prototype.rawListeners=function(Se){return X(this,Se,!1)},f.listenerCount=function(xe,Se){return typeof xe.listenerCount=="function"?xe.listenerCount(Se):J.call(xe,Se)},f.prototype.listenerCount=J;function J(xe){var Se=this._events;if(Se!==void 0){var Fe=Se[xe];if(typeof Fe=="function")return 1;if(Fe!==void 0)return Fe.length}return 0}f.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function ce(xe,Se){for(var Fe=new Array(Se),Ue=0;Ue<Se;++Ue)Fe[Ue]=xe[Ue];return Fe}function ee(xe,Se){for(;Se+1<xe.length;Se++)xe[Se]=xe[Se+1];xe.pop()}function ae(xe){for(var Se=new Array(xe.length),Fe=0;Fe<Se.length;++Fe)Se[Fe]=xe[Fe].listener||xe[Fe];return Se}function Me(xe,Se){return new Promise(function(Fe,Ue){function it(Pt){xe.removeListener(Se,Rt),Ue(Pt)}function Rt(){typeof xe.removeListener=="function"&&xe.removeListener("error",it),Fe([].slice.call(arguments))}we(xe,Se,Rt,{once:!0}),Se!=="error"&&Ae(xe,it,{once:!0})})}function Ae(xe,Se,Fe){typeof xe.on=="function"&&we(xe,"error",Se,Fe)}function we(xe,Se,Fe,Ue){if(typeof xe.on=="function")Ue.once?xe.once(Se,Fe):xe.on(Se,Fe);else if(typeof xe.addEventListener=="function")xe.addEventListener(Se,function it(Rt){Ue.once&&xe.removeEventListener(Se,it),Fe(Rt)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof xe)}return nb.exports}var N$=O$();const $$=gv(N$);function j$(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class B${constructor(){this._apiKey="",this._fetch=j$(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const ny=new B$,F$={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1}},U$={ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!0},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!0},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!0},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!0},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!0},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!0},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!0},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!0},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!0},WELSH:{code:"cy",flag:"name:cy",name:"Welsh",latin:!0,isMode:!1,geocoding:!0}},Uv={...F$,...U$};function V$(e,t=Uv){return e in t?e[e]:null}function $w(e,t=Uv){for(const r of Object.values(t))if(r.code===e)return r;return null}function jw(e,t=Uv){for(const r of Object.values(t))if(r.flag===e)return r;return null}function Z$(e){return e!==null&&typeof e=="object"&&"code"in e&&"flag"in e&&"name"in e&&"latin"in e&&"isMode"in e&&"geocoding"in e&&(typeof e.code=="string"||e.code===null)&&typeof e.flag=="string"&&typeof e.name=="string"&&typeof e.latin=="boolean"&&typeof e.isMode=="boolean"&&typeof e.geocoding=="boolean"}function wA(e,t=Uv){return Z$(e)?jw(e.flag,t):typeof e!="string"?null:V$(e,t)||$w(e,t)||jw(e,t)||null}async function q$(e,t={}){if(ny.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return ny.fetch(e,t)}const L4={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(L4);class G$ extends Error{constructor(t,r=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${r}`),this.res=t}}const SA={403:"Key is missing, invalid or restricted"};async function H$(e={}){const t=new URL("geolocation/ip.json",L4.maptilerApiURL);t.searchParams.set("key",e.apiKey??ny.apiKey),"elevation"in e&&t.searchParams.set("elevation",e.elevation?"true":"false");const r=t.toString(),u=await q$(r);if(!u.ok)throw new G$(u,u.status in SA?SA[u.status]:"");return await u.json()}const TA={info:H$};function R4(e){const t=/^maptiler:\/\/(.*)/;let r;const u=e.trim();let a;return u.startsWith("http://")||u.startsWith("https://")?a=u:(r=t.exec(u))!==null?a=`https://api.maptiler.com/maps/${r[1]}/style.json`:a=`https://api.maptiler.com/maps/${u}/style.json`,a}class O4{constructor(t,r,u,a,f,m,c=!1,z){this.name=t,this.variantType=r,this.id=u,this.referenceStyle=a,this.description=f,this.imageURL=m,this.deprecated=c,this.deprecationMessage=z}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){const r=this.referenceStyle.getVariant(t);return this.warnIfDeprecated(r),r}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this).map(t=>(this.warnIfDeprecated(t),t))}getImageURL(){return this.imageURL}getExpandedStyleURL(){return R4(this.getId())}warnIfDeprecated(t=this){if(!t.deprecated)return t;if(t.deprecationMessage)console.warn(t.deprecationMessage);else{const r=t.getFullName();console.warn(`Style "${r}" is deprecated and will be removed in a future version.`)}return t}}class N4{constructor(t,r){this.name=t,this.id=r,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0].warnIfDeprecated()}}const W$=[{referenceStyleID:"STREETS_V2",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default v2",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2" is deprecated, use "streets-v4" instead'},{id:"streets-v2-dark",name:"Dark v2",variantType:"DARK",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-dark" is deprecated, use "streets-v4-dark" instead'},{id:"streets-v2-light",name:"Light v2",variantType:"LIGHT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-light" is deprecated, use "streets-v4-light" instead'},{id:"streets-v2-night",name:"Night v2",variantType:"NIGHT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-night" is deprecated, use "streets-v4-night" instead'},{id:"streets-v2-pastel",name:"Pastel v2",variantType:"PASTEL",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-pastel" is deprecated, use "streets-v4-pastel" instead'}]},{referenceStyleID:"STREETS_V4",name:"Streets",description:"",variants:[{id:"streets-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v4-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"BASE_V4",name:"Base",description:"",variants:[{id:"base-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"base-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"base-v4-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"base-v4-ai",name:"Base AI",variantType:"AI",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"outdoor-v2" is deprecated, use "outdoor-v4" instead'},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"outdoor-v2-dark" is deprecated, use "outdoor-v4-dark" instead'}]},{referenceStyleID:"WINTER_V2",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER_V4",name:"Winter",description:"",variants:[{id:"winter-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE_V2",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"satellite" is deprecated, use "satellite-v4" instead'}]},{referenceStyleID:"HYBRID_V2",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID_V4",name:"Hybrid",description:"",variants:[{id:"hybrid-v4",name:"Default",variantType:"DEFAULT",imageURL:""},{id:"hybrid-v4-dark",name:"Dark",variantType:"DARK",imageURL:""}]},{referenceStyleID:"BASIC_V2",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"basic-v2" is deprecated, use "base-v4" instead'},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:"",deprecationMessage:'"basic-v2" is deprecated, use "base-v4" instead'},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"basic-v2" is deprecated, use "base-v4" instead'}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP_V2",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"openstreetmap-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"TOPO_V2",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"topo-v2" is deprecated, use "topo-v4" instead'},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"topo-v2-dark" is deprecated, use "topo-v4-dark" instead'},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:"",deprecated:!0},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"topo-v2-pastel" is deprecated, use "topo-v4-pastel" instead'},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"topo-v2-topographique" is deprecated, use "topo-v4-topographique" instead'}]},{referenceStyleID:"VOYAGER_V2",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",deprecated:!0,variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",deprecated:!0,variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",deprecated:!0,variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",deprecated:!0,variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER_V2",name:"Toner",description:"",deprecated:!0,deprecationMessage:'"toner-v2" is deprecated, and will be no longer be a default style in the future',variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"toner-v2" is deprecated, and may be removed in future versions.'},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",deprecated:!0,description:"",imageURL:"",deprecationMessage:'"toner-v2-background" is deprecated, and may be removed in future versions.'},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"toner-v2-lite" is deprecated, and may be removed in future versions.'},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"toner-v2-lines" is deprecated, and may be removed in future versions.'}]},{referenceStyleID:"DATAVIZ_V2",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"dataviz" is deprecated, use "dataviz-v4" instead'},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"dataviz-dark" is deprecated, use "dataviz-v4-dark" instead'},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"dataviz-light" is deprecated, use "dataviz-v4-light" instead'}]},{referenceStyleID:"BACKDROP_V2",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"backdrop" is deprecated, use "backdrop-v4" instead'},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"backdrop-dark" is deprecated, use "backdrop-v4-dark" instead'},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"backdrop-light" is deprecated, use "backdrop-v4-light" instead'}]},{referenceStyleID:"OCEAN_V2",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"ocean" is deprecated, use "ocean-v4" instead'}]},{referenceStyleID:"AQUARELLE_V2",name:"Aquarelle",description:"Watercolor map for creative use",variants:[{id:"aquarelle",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"aquarelle" is deprecated, use "aquarelle-v4" instead'},{id:"aquarelle-dark",name:"Dark",variantType:"DARK",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"aquarelle-dark" is deprecated, use "aquarelle-v4-dark" instead'},{id:"aquarelle-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"aquarelle-vivid" is deprecated, use "aquarelle-v4-vivid" instead'}]},{referenceStyleID:"LANDSCAPE_V2",name:"Landscape",description:"Terrain map for data overlays and visualisations",variants:[{id:"landscape",name:"Default",variantType:"DEFAULT",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"landscape" is deprecated, use "landscape-v4" instead'},{id:"landscape-dark",name:"Dark",variantType:"DARK",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"landscape-dark" is deprecated, use "landscape-v4-dark" instead'},{id:"landscape-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"landscape-vivid" is deprecated, use "landscape-v4-vivid" instead'}]},{referenceStyleID:"LANDSCAPE_V4",name:"Landscape",description:"Terrain map for data overlays and visualisations",variants:[{id:"landscape-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"landscape-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"landscape-v4-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE_V4",name:"Satellite v4",description:"",variants:[{id:"satellite-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"satellite-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ_V4",name:"Dataviz",description:"",variants:[{id:"dataviz-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-v4-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR_V4",name:"Outdoor",description:"",variants:[{id:"outdoor-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP_V4",name:"Backdrop",description:"",variants:[{id:"backdrop-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-v4-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"AQUARELLE_V4",name:"Aquarelle",description:"Watercolor map for creative use",variants:[{id:"aquarelle-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"aquarelle-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"aquarelle-v4-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]},{referenceStyleID:"OCEAN_V4",name:"Ocean",description:"",variants:[{id:"ocean-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"ocean-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"TOPO_V4",name:"Topo",description:"",variants:[{id:"topo-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v4-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v4-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]}],X$={STREETS:"STREETS_V2",BASIC:"BASIC_V2",LANDSCAPE:"LANDSCAPE_V2",AQUARELLE:"AQUARELLE_V2",SATELLITE:"SATELLITE_V2",WINTER:"WINTER_V2",HYBRID:"HYBRID_V2",OCEAN:"OCEAN_V2",TONER:"TONER_V2",TOPO:"TOPO_V2",OPENSTREETMAP:"OPENSTREETMAP_V2",DATAVIZ:"DATAVIZ_V2",BACKDROP:"BACKDROP_V2",VOYAGER:"VOYAGER_V2"},tp=[...W$];function Y$(e,t){tp.find(a=>a.referenceStyleID===e)&&console.warn(`Default reference style ${e} already exists, it will be overwritten...`);const r=tp.find(a=>a.referenceStyleID===t);if(!r)throw new Error(`Versioned map style not found for reference style: ${t}`);const u={...r,referenceStyleID:e};tp.push(u)}Object.entries(X$).forEach(([e,t])=>{Y$(e,t)});function K$(e){return new Proxy(e,{get(t,r,u){return t.hasVariant(r)?t.getVariant(r):r.toString().toUpperCase()===r?e.getDefaultVariant():Reflect.get(t,r,u)}})}function J$(){const e={};for(let t=0;t<tp.length;t+=1){const r=tp[t],u=K$(new N4(r.name,r.referenceStyleID));for(let a=0;a<r.variants.length;a+=1){const f=r.variants[a],m=new O4(f.name,f.variantType,f.id,u,f.description,f.imageURL,f.deprecated);u.addVariant(m)}e[r.referenceStyleID]=u}return e}const G_=J$(),hs=[];for(let e=0;e<256;++e)hs.push((e+256).toString(16).slice(1));function Q$(e,t=0){return(hs[e[t+0]]+hs[e[t+1]]+hs[e[t+2]]+hs[e[t+3]]+"-"+hs[e[t+4]]+hs[e[t+5]]+"-"+hs[e[t+6]]+hs[e[t+7]]+"-"+hs[e[t+8]]+hs[e[t+9]]+"-"+hs[e[t+10]]+hs[e[t+11]]+hs[e[t+12]]+hs[e[t+13]]+hs[e[t+14]]+hs[e[t+15]]).toLowerCase()}let J1;const ej=new Uint8Array(16);function tj(){if(!J1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");J1=crypto.getRandomValues.bind(crypto)}return J1(ej)}const nj=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),EA={randomUUID:nj};function ij(e,t,r){if(EA.randomUUID&&!e)return EA.randomUUID();e=e||{};const u=e.random??e.rng?.()??tj();if(u.length<16)throw new Error("Random bytes length must be >= 16");return u[6]=u[6]&15|64,u[8]=u[8]&63|128,Q$(u)}var rj=Object.defineProperty,$4=e=>{throw TypeError(e)},aj=(e,t,r)=>t in e?rj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rn=(e,t,r)=>aj(e,typeof t!="symbol"?t+"":t,r),TT=(e,t,r)=>t.has(e)||$4("Cannot "+r),bn=(e,t,r)=>(TT(e,t,"read from private field"),r?r.call(e):t.get(e)),Xl=(e,t,r)=>t.has(e)?$4("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Rc=(e,t,r,u)=>(TT(e,t,"write to private field"),t.set(e,r),r),Dc=(e,t,r)=>(TT(e,t,"access private method"),r);(function(){typeof window>"u"||(window.requestIdleCallback=window.requestIdleCallback||function(e){const t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)})})();(class extends mn.Marker{addTo(e){return super.addTo(e)}});class nH extends mn.Popup{addTo(t){return super.addTo(t)}}class iH extends mn.Style{constructor(t,r={}){super(t,r)}}class rH extends mn.CanvasSource{onAdd(t){super.onAdd(t)}}class aH extends mn.GeoJSONSource{onAdd(t){super.onAdd(t)}}class oH extends mn.ImageSource{onAdd(t){super.onAdd(t)}}class sH extends mn.RasterTileSource{onAdd(t){super.onAdd(t)}}class lH extends mn.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class cH extends mn.VectorTileSource{onAdd(t){super.onAdd(t)}}class uH extends mn.VideoSource{onAdd(t){super.onAdd(t)}}class oj extends mn.NavigationControl{onAdd(t){return super.onAdd(t)}}class sj extends mn.GeolocateControl{onAdd(t){return super.onAdd(t)}}class hH extends mn.AttributionControl{onAdd(t){return super.onAdd(t)}}class lj extends mn.LogoControl{onAdd(t){return super.onAdd(t)}}class cj extends mn.ScaleControl{onAdd(t){return super.onAdd(t)}}class uj extends mn.FullscreenControl{onAdd(t){return super.onAdd(t)}}class dH extends mn.TerrainControl{onAdd(t){return super.onAdd(t)}}class fH extends mn.BoxZoomHandler{constructor(t,r){super(t,r)}}class pH extends mn.ScrollZoomHandler{constructor(t,r){super(t,r)}}class mH extends mn.CooperativeGesturesHandler{constructor(t,r){super(t,r)}}class gH extends mn.KeyboardHandler{constructor(t){super(t)}}class yH extends mn.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class _H extends mn.MapWheelEvent{constructor(t,r,u){super(t,r,u)}}class vH extends mn.MapTouchEvent{constructor(t,r,u){super(t,r,u)}}class bH extends mn.MapMouseEvent{constructor(t,r,u,a={}){super(t,r,u,a)}}const Ui={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...Uv};function AA(){if(typeof navigator>"u"){const e=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return $w(e)||Ui.ENGLISH}return Array.from(new Set(navigator.languages.map(e=>e.split("-")[0]))).map(e=>$w(e)).filter(e=>e)[0]??Ui.LOCAL}const _l={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",telemetryURL:"https://api.maptiler.com/metrics",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:Ui.STYLE,secondaryLanguage:Ui.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(_l);const ET=ij();class hj extends $${constructor(){super(...arguments),rn(this,"primaryLanguage",_l.primaryLanguage),rn(this,"secondaryLanguage"),rn(this,"session",!0),rn(this,"caching",!0),rn(this,"telemetry",!0),rn(this,"_unit","metric"),rn(this,"_apiKey","")}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,ny.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){ny.fetch=t}get fetch(){return ny.fetch}}const Oa=new hj;class CA extends lj{constructor(t={}){super(t),rn(this,"logoURL",""),rn(this,"linkURL",""),this.logoURL=t.logoURL??_l.maptilerLogoURL,this.linkURL=t.linkURL??_l.maptilerURL}onAdd(t){this._map=t,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const r=window.document.createElement("a");return r.style.backgroundRepeat="no-repeat",r.style.cursor="pointer",r.style.display="block",r.style.height="23px",r.style.margin="0 0 -4px -4px",r.style.overflow="hidden",r.style.width="88px",r.style.backgroundImage=`url(${this.logoURL})`,r.style.backgroundSize="100px 30px",r.style.width="100px",r.style.height="30px",r.target="_blank",r.rel="noopener",r.href=this.linkURL,r.setAttribute("aria-label","MapTiler logo"),r.setAttribute("rel","noopener"),this._container.appendChild(r),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}const Bw="localcache_source",Fw="localcache",dj="maptiler_sdk",fj=1e3,pj=100,Uw=typeof caches<"u",{addProtocol:MA}=mn;function mj(e,t){if(Uw&&Oa.caching&&Oa.session&&e.host===_l.maptilerApiHost){if(t==="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${Bw}://`);if(t==="Tile"||t==="Glyphs")return e.href.replace("https://",`${Fw}://`)}return e.href}let Q1;async function j4(){return Q1||(Q1=await caches.open(dj)),Q1}let zA=0;async function gj(){const e=await j4(),t=await e.keys(),r=t.slice(0,Math.max(t.length-fj,0));for(const u of r)e.delete(u)}function yj(){MA(Bw,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${Bw}://`,"https://");const r=e;r.signal=t.signal;const u=await fetch(e.url,r),a=await u.json();return a.tiles&&a.tiles.length>0&&(a.tiles[0]+=`&last-modified=${u.headers.get("Last-Modified")}`),{data:a,cacheControl:u.headers.get("Cache-Control"),expires:u.headers.get("Expires")}}),MA(Fw,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${Fw}://`,"https://");const r=new URL(e.url),u=new URL(r);u.searchParams.delete("mtsid"),u.searchParams.delete("key");const a=u.toString(),f=new URL(r);f.searchParams.delete("last-modified");const m=f.toString(),c=async X=>({data:await X.arrayBuffer(),cacheControl:X.headers.get("Cache-Control"),expires:X.headers.get("Expires")}),z=await j4(),k=await z.match(a);if(k)return c(k);const B=e;B.signal=t.signal;const Z=await fetch(m,B);return Z.status>=200&&Z.status<300&&(z.put(a,Z.clone()).catch(()=>{}),++zA>pj&&(gj(),zA=0)),c(Z)})}async function _j(e){if(typeof window>"u")return;const t=mn.getRTLTextPluginStatus();if(t==="unavailable"||t==="requested")try{await mn.setRTLTextPlugin(e??_l.rtlPluginURL,!0)}catch(r){console.error("Error enabling RTL plugin. It is enabled by default and cannot be unset after. Are you attempting to enable it twice?",r)}}function vj(e,t){for(const r of e)typeof t[r]=="function"&&(t[r]=t[r].bind(t))}function IA(e,t){let r=null;try{r=new URL(e)}catch{return{url:e}}return r.host===_l.maptilerApiHost&&(r.searchParams.has("key")||r.searchParams.append("key",Oa.apiKey),Oa.session&&r.searchParams.append("mtsid",ET)),{url:mj(r,t)}}function kA(e){return(t,r)=>{if(e!=null){const u=e(t,r),a=IA(u?.url??"",r);return{...u,...a}}return IA(t,r)}}function B4(){return Math.random().toString(36).substring(2)}function Kx(e){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e)}function bj(e){try{return JSON.parse(e)}catch{}return null}function xj(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function wj(e){const t=xj();if(!t)return;let r=null;if(typeof e=="string"?r=document.getElementById(e):e instanceof HTMLElement&&(r=e),!r)throw new Error("The Map container must be provided.");const u=document.createElement("div");throw u.innerHTML=t,u.classList.add("webgl-warning-div"),r.appendChild(u),new Error(t)}function PA(e,t){return!(!Array.isArray(e)||e.length!==2||e[0]!=="get"||typeof e[1]!="string"||t&&!e[1].startsWith("name:")||!t&&e[1]!=="name")}function Sj(e,t,r){const u=structuredClone(e),a=f=>{if(typeof f!="string")for(let m=0;m<f.length;m+=1)PA(f[m],r)?f[m]=structuredClone(t):a(f[m])};return PA(u,r)?t:(a(u),u)}function Tj(e,t){const r=t?/\{name:\S+\}/:/\{name\}/;return{contains:r.test(e),exactMatch:new RegExp(`^${r.source}$`).test(e)}}function Ej(e,t,r){const u=r?/\{name:\S+\}/:/\{name\}/,a=e.split(u);return["concat",...a.flatMap((f,m)=>m===a.length-1?[f]:[f,t])]}function Aj(e){var t;const r=/\{name(?::(?<language>\S+))?\}/g,u=[];for(;;){const a=r.exec(e);if(!a)break;const f=((t=a.groups)==null?void 0:t.language)??null;u.push(f)}return u}function Cj(e){return!Array.isArray(e)||e.length!==2||e[0]!=="get"||typeof e[1]!="string"?null:e[1].trim()==="name"?{isLanguage:!0,localization:null}:e[1].trim().startsWith("name:")?{isLanguage:!0,localization:e[1].trim().split(":").pop()}:null}function Mj(e){const t=[],r=structuredClone(e),u=a=>{if(typeof a!="string")for(let f=0;f<a.length;f+=1){const m=Cj(a[f]);m?t.push(m.localization):u(a[f])}};return u([r]),t}function zj(e,t){const r=[];for(const f of e){if(f.type!=="symbol")continue;const m=f,{id:c,layout:z}=m;if(!z||!("text-field"in z))continue;const k=t.getLayoutProperty(c,"text-field");if(k)if(typeof k=="string"){const B=Aj(k);r.push(B)}else{const B=Mj(k);r.push(B)}}const u=r.flat(),a={unlocalized:0,localized:{}};for(const f of u)f===null?a.unlocalized+=1:(f in a.localized||(a.localized[f]=0),a.localized[f]+=1);return a}var Ij=8,kj={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Pj={"*":{type:"source"}},Dj=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Lj={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},Rj={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Oj={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Nj={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},$j={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},jj={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Bj={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Fj=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Uj={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Vj={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Zj={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},qj={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Gj={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Hj={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Wj={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Xj={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},Yj={type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},Kj={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Jj={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Qj={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},eB={type:"array",value:"expression_name",minimum:1},tB={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},nB={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},iB={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},rB={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},aB=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],oB={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},sB={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},lB={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},cB={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},uB={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},hB={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},dB={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},fB={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},pB={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},mB={"*":{type:"string"}},gB={type:"array",value:"interpolation_name",minimum:1},yB={type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}},_B={$version:Ij,$root:kj,sources:Pj,source:Dj,source_vector:Lj,source_raster:Rj,source_raster_dem:Oj,source_geojson:Nj,source_video:$j,source_image:jj,layer:Bj,layout:Fj,layout_background:Uj,layout_fill:Vj,layout_circle:Zj,layout_heatmap:qj,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:Gj,layout_symbol:Hj,layout_raster:Wj,layout_hillshade:Xj,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:Yj,filter_operator:Kj,geometry_type:Jj,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Qj,expression:eB,light:tB,sky:nB,terrain:iB,projection:rB,paint:aB,paint_fill:oB,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:sB,paint_circle:lB,paint_heatmap:cB,paint_symbol:uB,paint_raster:hB,paint_hillshade:dB,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:fB,transition:pB,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:mB,interpolation:gB,interpolation_name:yB};class qt{constructor(t,r,u,a){this.message=(t?`${t}: `:"")+u,a&&(this.identifier=a),r!=null&&r.__line__&&(this.line=r.__line__)}}function $b(e,...t){for(const r of t)for(const u in r)e[u]=r[u];return e}class od extends Error{constructor(t,r){super(r),this.message=r,this.key=t}}class AT{constructor(t,r=[]){this.parent=t,this.bindings={};for(const[u,a]of r)this.bindings[u]=a}concat(t){return new AT(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}}const Jx={kind:"null"},Qt={kind:"number"},di={kind:"string"},oi={kind:"boolean"},ud={kind:"color"},Qx={kind:"projectionDefinition"},Tm={kind:"object"},ii={kind:"value"},vB={kind:"error"},e1={kind:"collator"},t1={kind:"formatted"},n1={kind:"padding"},iv={kind:"colorArray"},i1={kind:"numberArray"},Vv={kind:"resolvedImage"},r1={kind:"variableAnchorOffsetCollection"};function Nc(e,t){return{kind:"array",itemType:e,N:t}}function sa(e){if(e.kind==="array"){const t=sa(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}else return e.kind}const bB=[Jx,Qt,di,oi,ud,Qx,t1,Tm,Nc(ii),n1,i1,iv,Vv,r1];function rv(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!rv(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(const r of bB)if(!rv(r,t))return null}}return`Expected ${sa(e)} but found ${sa(t)} instead.`}function CT(e,t){return t.some(r=>r.kind===e.kind)}function Em(e,t){return t.some(r=>r==="null"?e===null:r==="array"?Array.isArray(e):r==="object"?e&&!Array.isArray(e)&&typeof e=="object":r===typeof e)}function Xf(e,t){return e.kind==="array"&&t.kind==="array"?e.itemType.kind===t.itemType.kind&&typeof e.N=="number":e.kind===t.kind}const F4=.96422,U4=1,V4=.82521,Z4=4/29,iy=6/29,q4=3*iy*iy,xB=iy*iy*iy,wB=Math.PI/180,SB=180/Math.PI;function G4(e){return e=e%360,e<0&&(e+=360),e}function H4([e,t,r,u]){e=ew(e),t=ew(t),r=ew(r);let a,f;const m=tw((.2225045*e+.7168786*t+.0606169*r)/U4);e===t&&t===r?a=f=m:(a=tw((.4360747*e+.3850649*t+.1430804*r)/F4),f=tw((.0139322*e+.0971045*t+.7141733*r)/V4));const c=116*m-16;return[c<0?0:c,500*(a-m),200*(m-f),u]}function ew(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function tw(e){return e>xB?Math.pow(e,1/3):e/q4+Z4}function W4([e,t,r,u]){let a=(e+16)/116,f=isNaN(t)?a:a+t/500,m=isNaN(r)?a:a-r/200;return a=U4*iw(a),f=F4*iw(f),m=V4*iw(m),[nw(3.1338561*f-1.6168667*a-.4906146*m),nw(-.9787684*f+1.9161415*a+.033454*m),nw(.0719453*f-.2289914*a+1.4052427*m),u]}function nw(e){return e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055,e<0?0:e>1?1:e}function iw(e){return e>iy?e*e*e:q4*(e-Z4)}function TB(e){const[t,r,u,a]=H4(e),f=Math.sqrt(r*r+u*u);return[Math.round(f*1e4)?G4(Math.atan2(u,r)*SB):NaN,f,t,a]}function EB([e,t,r,u]){return e=isNaN(e)?0:e*wB,W4([r,Math.cos(e)*t,Math.sin(e)*t,u])}function AB([e,t,r,u]){e=G4(e),t/=100,r/=100;function a(f){const m=(f+e/30)%12,c=t*Math.min(r,1-r);return r-c*Math.max(-1,Math.min(m-3,9-m,1))}return[a(0),a(8),a(4),u]}const CB=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function H_(e,t){return CB(e,t)?e[t]:void 0}function MB(e){if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];const t=H_(zB,e);if(t){const[a,f,m]=t;return[a/255,f/255,m/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const a=e.length<6?1:2;let f=1;return[ib(e.slice(f,f+=a)),ib(e.slice(f,f+=a)),ib(e.slice(f,f+=a)),ib(e.slice(f,f+a)||"ff")]}if(e.startsWith("rgb")){const a=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,f=e.match(a);if(f){const[m,c,z,k,B,Z,X,J,ce,ee,ae,Me]=f,Ae=[k||" ",X||" ",ee].join("");if(Ae==="  "||Ae==="  /"||Ae===",,"||Ae===",,,"){const we=[z,Z,ce].join(""),xe=we==="%%%"?100:we===""?255:0;if(xe){const Se=[Jg(+c/xe,0,1),Jg(+B/xe,0,1),Jg(+J/xe,0,1),ae?DA(+ae,Me):1];if(LA(Se))return Se}}return}}const r=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,u=e.match(r);if(u){const[a,f,m,c,z,k,B,Z,X]=u,J=[m||" ",z||" ",B].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){const ce=[+f,Jg(+c,0,100),Jg(+k,0,100),Z?DA(+Z,X):1];if(LA(ce))return AB(ce)}}}function ib(e){return parseInt(e.padEnd(2,e),16)/255}function DA(e,t){return Jg(t?e/100:e,0,1)}function Jg(e,t,r){return Math.min(Math.max(t,e),r)}function LA(e){return!e.some(Number.isNaN)}const zB={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Am(e,t,r){return e+r*(t-e)}function av(e,t,r){return e.map((u,a)=>Am(u,t[a],r))}class ur{constructor(t,r,u,a=1,f=!0){this.r=t,this.g=r,this.b=u,this.a=a,f||(this.r*=a,this.g*=a,this.b*=a,a||this.overwriteGetter("rgb",[t,r,u,a]))}static parse(t){if(t instanceof ur)return t;if(typeof t!="string")return;const r=MB(t);if(r)return new ur(...r,!1)}get rgb(){const{r:t,g:r,b:u,a}=this,f=a||1/0;return this.overwriteGetter("rgb",[t/f,r/f,u/f,a])}get hcl(){return this.overwriteGetter("hcl",TB(this.rgb))}get lab(){return this.overwriteGetter("lab",H4(this.rgb))}overwriteGetter(t,r){return Object.defineProperty(this,t,{value:r}),r}toString(){const[t,r,u,a]=this.rgb;return`rgba(${[t,r,u].map(f=>Math.round(f*255)).join(",")},${a})`}static interpolate(t,r,u,a="rgb"){switch(a){case"rgb":{const[f,m,c,z]=av(t.rgb,r.rgb,u);return new ur(f,m,c,z,!1)}case"hcl":{const[f,m,c,z]=t.hcl,[k,B,Z,X]=r.hcl;let J,ce;if(!isNaN(f)&&!isNaN(k)){let we=k-f;k>f&&we>180?we-=360:k<f&&f-k>180&&(we+=360),J=f+u*we}else isNaN(f)?isNaN(k)?J=NaN:(J=k,(c===1||c===0)&&(ce=B)):(J=f,(Z===1||Z===0)&&(ce=m));const[ee,ae,Me,Ae]=EB([J,ce??Am(m,B,u),Am(c,Z,u),Am(z,X,u)]);return new ur(ee,ae,Me,Ae,!1)}case"lab":{const[f,m,c,z]=W4(av(t.lab,r.lab,u));return new ur(f,m,c,z,!1)}}}}ur.black=new ur(0,0,0,1);ur.white=new ur(1,1,1,1);ur.transparent=new ur(0,0,0,0);ur.red=new ur(1,0,0,1);class MT{constructor(t,r,u){t?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,r){return this.collator.compare(t,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const IB=["bottom","center","top"];class Vw{constructor(t,r,u,a,f,m){this.text=t,this.image=r,this.scale=u,this.fontStack=a,this.textColor=f,this.verticalAlign=m}}class Qd{constructor(t){this.sections=t}static fromString(t){return new Qd([new Vw(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Qd?t:Qd.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class ph{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ph)return t;if(typeof t=="number")return new ph([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const r of t)if(typeof r!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];break}return new ph(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,r,u){return new ph(av(t.values,r.values,u))}}class mh{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof mh)return t;if(typeof t=="number")return new mh([t]);if(Array.isArray(t)){for(const r of t)if(typeof r!="number")return;return new mh(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,r,u){return new mh(av(t.values,r.values,u))}}class $c{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof $c)return t;if(typeof t=="string"){const u=ur.parse(t);return u?new $c([u]):void 0}if(!Array.isArray(t))return;const r=[];for(const u of t){if(typeof u!="string")return;const a=ur.parse(u);if(!a)return;r.push(a)}return new $c(r)}toString(){return JSON.stringify(this.values)}static interpolate(t,r,u,a="rgb"){const f=[];if(t.values.length!=r.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${r.values.length}), cannot interpolate.`);for(let m=0;m<t.values.length;m++)f.push(ur.interpolate(t.values[m],r.values[m],u,a));return new $c(f)}}class Sa extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const kB=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class hd{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof hd)return t;if(!(!Array.isArray(t)||t.length<1||t.length%2!==0)){for(let r=0;r<t.length;r+=2){const u=t[r],a=t[r+1];if(typeof u!="string"||!kB.has(u)||!Array.isArray(a)||a.length!==2||typeof a[0]!="number"||typeof a[1]!="number")return}return new hd(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,r,u){const a=t.values,f=r.values;if(a.length!==f.length)throw new Sa(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${r.toString()}`);const m=[];for(let c=0;c<a.length;c+=2){if(a[c]!==f[c])throw new Sa(`Cannot interpolate values containing mismatched anchors. from[${c}]: ${a[c]}, to[${c}]: ${f[c]}`);m.push(a[c]);const[z,k]=a[c+1],[B,Z]=f[c+1];m.push([Am(z,B,u),Am(k,Z,u)])}return new hd(m)}}class hp{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new hp({name:t,available:!1}):null}}class hh{constructor(t,r,u){this.from=t,this.to=r,this.transition=u}static interpolate(t,r,u){return new hh(t,r,u)}static parse(t){if(t instanceof hh)return t;if(Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number")return new hh(t[0],t[1],t[2]);if(typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number")return new hh(t.from,t.to,t.transition);if(typeof t=="string")return new hh(t,t,1)}}function X4(e,t,r,u){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?typeof u>"u"||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[e,t,r,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[e,t,r,u]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ov(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof hh||e instanceof ur||e instanceof MT||e instanceof Qd||e instanceof ph||e instanceof mh||e instanceof $c||e instanceof hd||e instanceof hp)return!0;if(Array.isArray(e)){for(const t of e)if(!ov(t))return!1;return!0}else if(typeof e=="object"){for(const t in e)if(!ov(e[t]))return!1;return!0}else return!1}function yo(e){if(e===null)return Jx;if(typeof e=="string")return di;if(typeof e=="boolean")return oi;if(typeof e=="number")return Qt;if(e instanceof ur)return ud;if(e instanceof hh)return Qx;if(e instanceof MT)return e1;if(e instanceof Qd)return t1;if(e instanceof ph)return n1;if(e instanceof mh)return i1;if(e instanceof $c)return iv;if(e instanceof hd)return r1;if(e instanceof hp)return Vv;if(Array.isArray(e)){const t=e.length;let r;for(const u of e){const a=yo(u);if(!r)r=a;else{if(r===a)continue;r=ii;break}}return Nc(r||ii,t)}else return Tm}function W_(e){const t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof ur||e instanceof hh||e instanceof Qd||e instanceof ph||e instanceof mh||e instanceof $c||e instanceof hd||e instanceof hp?e.toString():JSON.stringify(e)}class my{constructor(t,r){this.type=t,this.value=r}static parse(t,r){if(t.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!ov(t[1]))return r.error("invalid value");const u=t[1];let a=yo(u);const f=r.expectedType;return a.kind==="array"&&a.N===0&&f&&f.kind==="array"&&(typeof f.N!="number"||f.N===0)&&(a=f),new my(a,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const rb={string:di,number:Qt,boolean:oi,object:Tm};class dh{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let u=1,a;const f=t[0];if(f==="array"){let c;if(t.length>2){const k=t[1];if(typeof k!="string"||!(k in rb)||k==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);c=rb[k],u++}else c=ii;let z;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);z=t[2],u++}a=Nc(c,z)}else{if(!rb[f])throw new Error(`Types doesn't contain name = ${f}`);a=rb[f]}const m=[];for(;u<t.length;u++){const c=r.parse(t[u],u,ii);if(!c)return null;m.push(c)}return new dh(a,m)}evaluate(t){for(let r=0;r<this.args.length;r++){const u=this.args[r].evaluate(t);if(rv(this.type,yo(u))){if(r===this.args.length-1)throw new Sa(`Expected value to be of type ${sa(this.type)}, but found ${sa(yo(u))} instead.`)}else return u}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const RA={"to-boolean":oi,"to-color":ud,"to-number":Qt,"to-string":di};class Jf{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const u=t[0];if(!RA[u])throw new Error(`Can't parse ${u} as it is not part of the known types`);if((u==="to-boolean"||u==="to-string")&&t.length!==2)return r.error("Expected one argument.");const a=RA[u],f=[];for(let m=1;m<t.length;m++){const c=r.parse(t[m],m,ii);if(!c)return null;f.push(c)}return new Jf(a,f)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let r,u;for(const a of this.args){if(r=a.evaluate(t),u=null,r instanceof ur)return r;if(typeof r=="string"){const f=t.parseColor(r);if(f)return f}else if(Array.isArray(r)&&(r.length<3||r.length>4?u=`Invalid rgba value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:u=X4(r[0],r[1],r[2],r[3]),!u))return new ur(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Sa(u||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const u of this.args){r=u.evaluate(t);const a=ph.parse(r);if(a)return a}throw new Sa(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"numberArray":{let r;for(const u of this.args){r=u.evaluate(t);const a=mh.parse(r);if(a)return a}throw new Sa(`Could not parse numberArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"colorArray":{let r;for(const u of this.args){r=u.evaluate(t);const a=$c.parse(r);if(a)return a}throw new Sa(`Could not parse colorArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const u of this.args){r=u.evaluate(t);const a=hd.parse(r);if(a)return a}throw new Sa(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const u of this.args){if(r=u.evaluate(t),r===null)return 0;const a=Number(r);if(!isNaN(a))return a}throw new Sa(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Qd.fromString(W_(this.args[0].evaluate(t)));case"resolvedImage":return hp.fromString(W_(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return W_(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const PB=["Unknown","Point","LineString","Polygon"];class Y4{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?PB[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let r=this._parseColorCache.get(t);return r||(r=ur.parse(t),this._parseColorCache.set(t,r)),r}}class a1{constructor(t,r,u=[],a,f=new AT,m=[]){this.registry=t,this.path=u,this.key=u.map(c=>`[${c}]`).join(""),this.scope=f,this.errors=m,this.expectedType=a,this._isConstant=r}parse(t,r,u,a,f={}){return r?this.concat(r,u,a)._parse(t,f):this._parse(t,f)}_parse(t,r){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function u(a,f,m){return m==="assert"?new dh(f,[a]):m==="coerce"?new Jf(f,[a]):a}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const a=t[0];if(typeof a!="string")return this.error(`Expression name must be a string, but found ${typeof a} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const f=this.registry[a];if(f){let m=f.parse(t,this);if(!m)return null;if(this.expectedType){const c=this.expectedType,z=m.type;if((c.kind==="string"||c.kind==="number"||c.kind==="boolean"||c.kind==="object"||c.kind==="array")&&z.kind==="value")m=u(m,c,r.typeAnnotation||"assert");else if(c.kind==="projectionDefinition"&&["string","array"].includes(z.kind)||["color","formatted","resolvedImage"].includes(c.kind)&&["value","string"].includes(z.kind)||["padding","numberArray"].includes(c.kind)&&["value","number","array"].includes(z.kind)||c.kind==="colorArray"&&["value","string","array"].includes(z.kind)||c.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(z.kind))m=u(m,c,r.typeAnnotation||"coerce");else if(this.checkSubtype(c,z))return null}if(!(m instanceof my)&&m.type.kind!=="resolvedImage"&&this._isConstant(m)){const c=new Y4;try{m=new my(m.type,m.evaluate(c))}catch(z){return this.error(z.message),null}}return m}return this.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,r,u){const a=typeof t=="number"?this.path.concat(t):this.path,f=u?this.scope.concat(u):this.scope;return new a1(this.registry,this._isConstant,a,r||null,f,this.errors)}error(t,...r){const u=`${this.key}${r.map(a=>`[${a}]`).join("")}`;this.errors.push(new od(u,t))}checkSubtype(t,r){const u=rv(t,r);return u&&this.error(u),u}}class o1{constructor(t,r){this.type=r.type,this.bindings=[].concat(t),this.result=r}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const r of this.bindings)t(r[1]);t(this.result)}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const u=[];for(let f=1;f<t.length-1;f+=2){const m=t[f];if(typeof m!="string")return r.error(`Expected string, but found ${typeof m} instead.`,f);if(/[^a-zA-Z0-9_]/.test(m))return r.error("Variable names must contain only alphanumeric characters or '_'.",f);const c=r.parse(t[f+1],f+1);if(!c)return null;u.push([m,c])}const a=r.parse(t[t.length-1],t.length-1,r.expectedType,u);return a?new o1(u,a):null}outputDefined(){return this.result.outputDefined()}}class s1{constructor(t,r){this.type=r.type,this.name=t,this.boundExpression=r}static parse(t,r){if(t.length!==2||typeof t[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const u=t[1];return r.scope.has(u)?new s1(u,r.scope.get(u)):r.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class zT{constructor(t,r,u){this.type=t,this.index=r,this.input=u}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=r.parse(t[1],1,Qt),a=r.parse(t[2],2,Nc(r.expectedType||ii));if(!u||!a)return null;const f=a.type;return new zT(f.itemType,u,a)}evaluate(t){const r=this.index.evaluate(t),u=this.input.evaluate(t);if(r<0)throw new Sa(`Array index out of bounds: ${r} < 0.`);if(r>=u.length)throw new Sa(`Array index out of bounds: ${r} > ${u.length-1}.`);if(r!==Math.floor(r))throw new Sa(`Array index must be an integer, but found ${r} instead.`);return u[r]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class IT{constructor(t,r){this.type=oi,this.needle=t,this.haystack=r}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=r.parse(t[1],1,ii),a=r.parse(t[2],2,ii);return!u||!a?null:CT(u.type,[oi,di,Qt,Jx,ii])?new IT(u,a):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${sa(u.type)} instead`)}evaluate(t){const r=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!u)return!1;if(!Em(r,["boolean","string","number","null"]))throw new Sa(`Expected first argument to be of type boolean, string, number or null, but found ${sa(yo(r))} instead.`);if(!Em(u,["string","array"]))throw new Sa(`Expected second argument to be of type array or string, but found ${sa(yo(u))} instead.`);return u.indexOf(r)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class jb{constructor(t,r,u){this.type=Qt,this.needle=t,this.haystack=r,this.fromIndex=u}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const u=r.parse(t[1],1,ii),a=r.parse(t[2],2,ii);if(!u||!a)return null;if(!CT(u.type,[oi,di,Qt,Jx,ii]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${sa(u.type)} instead`);if(t.length===4){const f=r.parse(t[3],3,Qt);return f?new jb(u,a,f):null}else return new jb(u,a)}evaluate(t){const r=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!Em(r,["boolean","string","number","null"]))throw new Sa(`Expected first argument to be of type boolean, string, number or null, but found ${sa(yo(r))} instead.`);let a;if(this.fromIndex&&(a=this.fromIndex.evaluate(t)),Em(u,["string"])){const f=u.indexOf(r,a);return f===-1?-1:[...u.slice(0,f)].length}else{if(Em(u,["array"]))return u.indexOf(r,a);throw new Sa(`Expected second argument to be of type array or string, but found ${sa(yo(u))} instead.`)}}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class kT{constructor(t,r,u,a,f,m){this.inputType=t,this.type=r,this.input=u,this.cases=a,this.outputs=f,this.otherwise=m}static parse(t,r){if(t.length<5)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return r.error("Expected an even number of arguments.");let u,a;r.expectedType&&r.expectedType.kind!=="value"&&(a=r.expectedType);const f={},m=[];for(let k=2;k<t.length-1;k+=2){let B=t[k];const Z=t[k+1];Array.isArray(B)||(B=[B]);const X=r.concat(k);if(B.length===0)return X.error("Expected at least one branch label.");for(const ce of B){if(typeof ce!="number"&&typeof ce!="string")return X.error("Branch labels must be numbers or strings.");if(typeof ce=="number"&&Math.abs(ce)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ce=="number"&&Math.floor(ce)!==ce)return X.error("Numeric branch labels must be integer values.");if(!u)u=yo(ce);else if(X.checkSubtype(u,yo(ce)))return null;if(typeof f[String(ce)]<"u")return X.error("Branch labels must be unique.");f[String(ce)]=m.length}const J=r.parse(Z,k,a);if(!J)return null;a=a||J.type,m.push(J)}const c=r.parse(t[1],1,ii);if(!c)return null;const z=r.parse(t[t.length-1],t.length-1,a);return!z||c.type.kind!=="value"&&r.concat(1).checkSubtype(u,c.type)?null:new kT(u,a,c,f,m,z)}evaluate(t){const r=this.input.evaluate(t);return(yo(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class PT{constructor(t,r,u){this.type=t,this.branches=r,this.otherwise=u}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return r.error("Expected an odd number of arguments.");let u;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);const a=[];for(let m=1;m<t.length-1;m+=2){const c=r.parse(t[m],m,oi);if(!c)return null;const z=r.parse(t[m+1],m+1,u);if(!z)return null;a.push([c,z]),u=u||z.type}const f=r.parse(t[t.length-1],t.length-1,u);if(!f)return null;if(!u)throw new Error("Can't infer output type");return new PT(u,a,f)}evaluate(t){for(const[r,u]of this.branches)if(r.evaluate(t))return u.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[r,u]of this.branches)t(r),t(u);t(this.otherwise)}outputDefined(){return this.branches.every(([t,r])=>r.outputDefined())&&this.otherwise.outputDefined()}}class Bb{constructor(t,r,u,a){this.type=t,this.input=r,this.beginIndex=u,this.endIndex=a}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const u=r.parse(t[1],1,ii),a=r.parse(t[2],2,Qt);if(!u||!a)return null;if(!CT(u.type,[Nc(ii),di,ii]))return r.error(`Expected first argument to be of type array or string, but found ${sa(u.type)} instead`);if(t.length===4){const f=r.parse(t[3],3,Qt);return f?new Bb(u.type,u,a,f):null}else return new Bb(u.type,u,a)}evaluate(t){const r=this.input.evaluate(t),u=this.beginIndex.evaluate(t);let a;if(this.endIndex&&(a=this.endIndex.evaluate(t)),Em(r,["string"]))return[...r].slice(u,a).join("");if(Em(r,["array"]))return r.slice(u,a);throw new Sa(`Expected first argument to be of type array or string, but found ${sa(yo(r))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function K4(e,t){const r=e.length-1;let u=0,a=r,f=0,m,c;for(;u<=a;)if(f=Math.floor((u+a)/2),m=e[f],c=e[f+1],m<=t){if(f===r||t<c)return f;u=f+1}else if(m>t)a=f-1;else throw new Sa("Input is not a number.");return 0}class l1{constructor(t,r,u){this.type=t,this.input=r,this.labels=[],this.outputs=[];for(const[a,f]of u)this.labels.push(a),this.outputs.push(f)}static parse(t,r){if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return r.error("Expected an even number of arguments.");const u=r.parse(t[1],1,Qt);if(!u)return null;const a=[];let f=null;r.expectedType&&r.expectedType.kind!=="value"&&(f=r.expectedType);for(let m=1;m<t.length;m+=2){const c=m===1?-1/0:t[m],z=t[m+1],k=m,B=m+1;if(typeof c!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(a.length&&a[a.length-1][0]>=c)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const Z=r.parse(z,B,f);if(!Z)return null;f=f||Z.type,a.push([c,Z])}return new l1(f,u,a)}evaluate(t){const r=this.labels,u=this.outputs;if(r.length===1)return u[0].evaluate(t);const a=this.input.evaluate(t);if(a<=r[0])return u[0].evaluate(t);const f=r.length;if(a>=r[f-1])return u[f-1].evaluate(t);const m=K4(r,a);return u[m].evaluate(t)}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function DB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rw,OA;function LB(){if(OA)return rw;OA=1,rw=e;function e(t,r,u,a){this.cx=3*t,this.bx=3*(u-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(a-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=u,this.p2y=a}return e.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,r){if(r===void 0&&(r=1e-6),t<0)return 0;if(t>1)return 1;for(var u=t,a=0;a<8;a++){var f=this.sampleCurveX(u)-t;if(Math.abs(f)<r)return u;var m=this.sampleCurveDerivativeX(u);if(Math.abs(m)<1e-6)break;u=u-f/m}var c=0,z=1;for(u=t,a=0;a<20&&(f=this.sampleCurveX(u),!(Math.abs(f-t)<r));a++)t>f?c=u:z=u,u=(z-c)*.5+c;return u},solve:function(t,r){return this.sampleCurveY(this.solveCurveX(t,r))}},rw}var RB=LB(),OB=DB(RB);class dd{constructor(t,r,u,a,f){this.type=t,this.operator=r,this.interpolation=u,this.input=a,this.labels=[],this.outputs=[];for(const[m,c]of f)this.labels.push(m),this.outputs.push(c)}static interpolationFactor(t,r,u,a){let f=0;if(t.name==="exponential")f=aw(r,t.base,u,a);else if(t.name==="linear")f=aw(r,1,u,a);else if(t.name==="cubic-bezier"){const m=t.controlPoints;f=new OB(m[0],m[1],m[2],m[3]).solve(aw(r,1,u,a))}return f}static parse(t,r){let[u,a,f,...m]=t;if(!Array.isArray(a)||a.length===0)return r.error("Expected an interpolation type expression.",1);if(a[0]==="linear")a={name:"linear"};else if(a[0]==="exponential"){const k=a[1];if(typeof k!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:k}}else if(a[0]==="cubic-bezier"){const k=a.slice(1);if(k.length!==4||k.some(B=>typeof B!="number"||B<0||B>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:k}}else return r.error(`Unknown interpolation type ${String(a[0])}`,1,0);if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(f=r.parse(f,2,Qt),!f)return null;const c=[];let z=null;(u==="interpolate-hcl"||u==="interpolate-lab")&&r.expectedType!=iv?z=ud:r.expectedType&&r.expectedType.kind!=="value"&&(z=r.expectedType);for(let k=0;k<m.length;k+=2){const B=m[k],Z=m[k+1],X=k+3,J=k+4;if(typeof B!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(c.length&&c[c.length-1][0]>=B)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',X);const ce=r.parse(Z,J,z);if(!ce)return null;z=z||ce.type,c.push([B,ce])}return!Xf(z,Qt)&&!Xf(z,Qx)&&!Xf(z,ud)&&!Xf(z,n1)&&!Xf(z,i1)&&!Xf(z,iv)&&!Xf(z,r1)&&!Xf(z,Nc(Qt))?r.error(`Type ${sa(z)} is not interpolatable.`):new dd(z,u,a,f,c)}evaluate(t){const r=this.labels,u=this.outputs;if(r.length===1)return u[0].evaluate(t);const a=this.input.evaluate(t);if(a<=r[0])return u[0].evaluate(t);const f=r.length;if(a>=r[f-1])return u[f-1].evaluate(t);const m=K4(r,a),c=r[m],z=r[m+1],k=dd.interpolationFactor(this.interpolation,a,c,z),B=u[m].evaluate(t),Z=u[m+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Am(B,Z,k);case"color":return ur.interpolate(B,Z,k);case"padding":return ph.interpolate(B,Z,k);case"colorArray":return $c.interpolate(B,Z,k);case"numberArray":return mh.interpolate(B,Z,k);case"variableAnchorOffsetCollection":return hd.interpolate(B,Z,k);case"array":return av(B,Z,k);case"projectionDefinition":return hh.interpolate(B,Z,k)}case"interpolate-hcl":switch(this.type.kind){case"color":return ur.interpolate(B,Z,k,"hcl");case"colorArray":return $c.interpolate(B,Z,k,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ur.interpolate(B,Z,k,"lab");case"colorArray":return $c.interpolate(B,Z,k,"lab")}}}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function aw(e,t,r,u){const a=u-r,f=e-r;return a===0?0:t===1?f/a:(Math.pow(t,f)-1)/(Math.pow(t,a)-1)}class sv{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let u=null;const a=r.expectedType;a&&a.kind!=="value"&&(u=a);const f=[];for(const m of t.slice(1)){const c=r.parse(m,1+f.length,u,void 0,{typeAnnotation:"omit"});if(!c)return null;u=u||c.type,f.push(c)}if(!u)throw new Error("No output type");return a&&f.some(m=>rv(a,m.type))?new sv(ii,f):new sv(u,f)}evaluate(t){let r=null,u=0,a;for(const f of this.args)if(u++,r=f.evaluate(t),r&&r instanceof hp&&!r.available&&(a||(a=r.name),r=null,u===this.args.length&&(r=a)),r!==null)break;return r}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function NA(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function NB(e,t,r){return t===r}function $B(e,t,r){return t!==r}function jB(e,t,r){return t<r}function BB(e,t,r){return t>r}function FB(e,t,r){return t<=r}function UB(e,t,r){return t>=r}function J4(e,t,r,u){return u.compare(t,r)===0}function VB(e,t,r,u){return!J4(e,t,r,u)}function ZB(e,t,r,u){return u.compare(t,r)<0}function qB(e,t,r,u){return u.compare(t,r)>0}function GB(e,t,r,u){return u.compare(t,r)<=0}function HB(e,t,r,u){return u.compare(t,r)>=0}function Sy(e,t,r){const u=e!=="=="&&e!=="!=";return class Q4{constructor(f,m,c){this.type=oi,this.lhs=f,this.rhs=m,this.collator=c,this.hasUntypedArgument=f.type.kind==="value"||m.type.kind==="value"}static parse(f,m){if(f.length!==3&&f.length!==4)return m.error("Expected two or three arguments.");const c=f[0];let z=m.parse(f[1],1,ii);if(!z)return null;if(!NA(c,z.type))return m.concat(1).error(`"${c}" comparisons are not supported for type '${sa(z.type)}'.`);let k=m.parse(f[2],2,ii);if(!k)return null;if(!NA(c,k.type))return m.concat(2).error(`"${c}" comparisons are not supported for type '${sa(k.type)}'.`);if(z.type.kind!==k.type.kind&&z.type.kind!=="value"&&k.type.kind!=="value")return m.error(`Cannot compare types '${sa(z.type)}' and '${sa(k.type)}'.`);u&&(z.type.kind==="value"&&k.type.kind!=="value"?z=new dh(k.type,[z]):z.type.kind!=="value"&&k.type.kind==="value"&&(k=new dh(z.type,[k])));let B=null;if(f.length===4){if(z.type.kind!=="string"&&k.type.kind!=="string"&&z.type.kind!=="value"&&k.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(B=m.parse(f[3],3,e1),!B)return null}return new Q4(z,k,B)}evaluate(f){const m=this.lhs.evaluate(f),c=this.rhs.evaluate(f);if(u&&this.hasUntypedArgument){const z=yo(m),k=yo(c);if(z.kind!==k.kind||!(z.kind==="string"||z.kind==="number"))throw new Sa(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${z.kind}, ${k.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const z=yo(m),k=yo(c);if(z.kind!=="string"||k.kind!=="string")return t(f,m,c)}return this.collator?r(f,m,c,this.collator.evaluate(f)):t(f,m,c)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}}}const WB=Sy("==",NB,J4),XB=Sy("!=",$B,VB),YB=Sy("<",jB,ZB),KB=Sy(">",BB,qB),JB=Sy("<=",FB,GB),QB=Sy(">=",UB,HB);class c1{constructor(t,r,u){this.type=e1,this.locale=u,this.caseSensitive=t,this.diacriticSensitive=r}static parse(t,r){if(t.length!==2)return r.error("Expected one argument.");const u=t[1];if(typeof u!="object"||Array.isArray(u))return r.error("Collator options argument must be an object.");const a=r.parse(u["case-sensitive"]===void 0?!1:u["case-sensitive"],1,oi);if(!a)return null;const f=r.parse(u["diacritic-sensitive"]===void 0?!1:u["diacritic-sensitive"],1,oi);if(!f)return null;let m=null;return u.locale&&(m=r.parse(u.locale,1,di),!m)?null:new c1(a,f,m)}evaluate(t){return new MT(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class DT{constructor(t,r,u,a,f){this.type=di,this.number=t,this.locale=r,this.currency=u,this.minFractionDigits=a,this.maxFractionDigits=f}static parse(t,r){if(t.length!==3)return r.error("Expected two arguments.");const u=r.parse(t[1],1,Qt);if(!u)return null;const a=t[2];if(typeof a!="object"||Array.isArray(a))return r.error("NumberFormat options argument must be an object.");let f=null;if(a.locale&&(f=r.parse(a.locale,1,di),!f))return null;let m=null;if(a.currency&&(m=r.parse(a.currency,1,di),!m))return null;let c=null;if(a["min-fraction-digits"]&&(c=r.parse(a["min-fraction-digits"],1,Qt),!c))return null;let z=null;return a["max-fraction-digits"]&&(z=r.parse(a["max-fraction-digits"],1,Qt),!z)?null:new DT(u,f,m,c,z)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class LT{constructor(t){this.type=t1,this.sections=t}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const u=t[1];if(!Array.isArray(u)&&typeof u=="object")return r.error("First argument must be an image or text section.");const a=[];let f=!1;for(let m=1;m<=t.length-1;++m){const c=t[m];if(f&&typeof c=="object"&&!Array.isArray(c)){f=!1;let z=null;if(c["font-scale"]&&(z=r.parse(c["font-scale"],1,Qt),!z))return null;let k=null;if(c["text-font"]&&(k=r.parse(c["text-font"],1,Nc(di)),!k))return null;let B=null;if(c["text-color"]&&(B=r.parse(c["text-color"],1,ud),!B))return null;let Z=null;if(c["vertical-align"]){if(typeof c["vertical-align"]=="string"&&!IB.includes(c["vertical-align"]))return r.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${c["vertical-align"]}' instead.`);if(Z=r.parse(c["vertical-align"],1,di),!Z)return null}const X=a[a.length-1];X.scale=z,X.font=k,X.textColor=B,X.verticalAlign=Z}else{const z=r.parse(t[m],1,ii);if(!z)return null;const k=z.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,a.push({content:z,scale:null,font:null,textColor:null,verticalAlign:null})}}return new LT(a)}evaluate(t){const r=u=>{const a=u.content.evaluate(t);return yo(a)===Vv?new Vw("",a,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(t):null):new Vw(W_(a),null,u.scale?u.scale.evaluate(t):null,u.font?u.font.evaluate(t).join(","):null,u.textColor?u.textColor.evaluate(t):null,u.verticalAlign?u.verticalAlign.evaluate(t):null)};return new Qd(this.sections.map(r))}eachChild(t){for(const r of this.sections)t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor),r.verticalAlign&&t(r.verticalAlign)}outputDefined(){return!1}}class RT{constructor(t){this.type=Vv,this.input=t}static parse(t,r){if(t.length!==2)return r.error("Expected two arguments.");const u=r.parse(t[1],1,di);return u?new RT(u):r.error("No image name provided.")}evaluate(t){const r=this.input.evaluate(t),u=hp.fromString(r);return u&&t.availableImages&&(u.available=t.availableImages.indexOf(r)>-1),u}eachChild(t){t(this.input)}outputDefined(){return!1}}class OT{constructor(t){this.type=Qt,this.input=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=r.parse(t[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${sa(u.type)} instead.`):new OT(u):null}evaluate(t){const r=this.input.evaluate(t);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new Sa(`Expected value to be of type string or array, but found ${sa(yo(r))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const fd=8192;function eF(e,t){const r=tF(e[0]),u=iF(e[1]),a=Math.pow(2,t.z);return[Math.round(r*a*fd),Math.round(u*a*fd)]}function NT(e,t){const r=Math.pow(2,t.z),u=(e[0]/fd+t.x)/r,a=(e[1]/fd+t.y)/r;return[nF(u),rF(a)]}function tF(e){return(180+e)/360}function nF(e){return e*360-180}function iF(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function rF(e){return 360/Math.PI*Math.atan(Math.exp((180-e*360)*Math.PI/180))-90}function Zv(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function lv(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function aF(e,t,r){return t[1]>e[1]!=r[1]>e[1]&&e[0]<(r[0]-t[0])*(e[1]-t[1])/(r[1]-t[1])+t[0]}function oF(e,t,r){const u=e[0]-t[0],a=e[1]-t[1],f=e[0]-r[0],m=e[1]-r[1];return u*m-f*a===0&&u*f<=0&&a*m<=0}function u1(e,t,r,u){const a=[t[0]-e[0],t[1]-e[1]],f=[u[0]-r[0],u[1]-r[1]];return uF(f,a)===0?!1:!!($A(e,t,r,u)&&$A(r,u,e,t))}function sF(e,t,r){for(const u of r)for(let a=0;a<u.length-1;++a)if(u1(e,t,u[a],u[a+1]))return!0;return!1}function Ty(e,t,r=!1){let u=!1;for(const a of t)for(let f=0;f<a.length-1;f++){if(oF(e,a[f],a[f+1]))return r;aF(e,a[f],a[f+1])&&(u=!u)}return u}function lF(e,t){for(const r of t)if(Ty(e,r))return!0;return!1}function e3(e,t){for(const r of e)if(!Ty(r,t))return!1;for(let r=0;r<e.length-1;++r)if(sF(e[r],e[r+1],t))return!1;return!0}function cF(e,t){for(const r of t)if(e3(e,r))return!0;return!1}function uF(e,t){return e[0]*t[1]-e[1]*t[0]}function $A(e,t,r,u){const a=e[0]-r[0],f=e[1]-r[1],m=t[0]-r[0],c=t[1]-r[1],z=u[0]-r[0],k=u[1]-r[1],B=a*k-z*f,Z=m*k-z*c;return B>0&&Z<0||B<0&&Z>0}function $T(e,t,r){const u=[];for(let a=0;a<e.length;a++){const f=[];for(let m=0;m<e[a].length;m++){const c=eF(e[a][m],r);Zv(t,c),f.push(c)}u.push(f)}return u}function t3(e,t,r){const u=[];for(let a=0;a<e.length;a++){const f=$T(e[a],t,r);u.push(f)}return u}function n3(e,t,r,u){if(e[0]<r[0]||e[0]>r[2]){const a=u*.5;let f=e[0]-r[0]>a?-u:r[0]-e[0]>a?u:0;f===0&&(f=e[0]-r[2]>a?-u:r[2]-e[0]>a?u:0),e[0]+=f}Zv(t,e)}function hF(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function jA(e,t,r,u){const a=Math.pow(2,u.z)*fd,f=[u.x*fd,u.y*fd],m=[];for(const c of e)for(const z of c){const k=[z.x+f[0],z.y+f[1]];n3(k,t,r,a),m.push(k)}return m}function BA(e,t,r,u){const a=Math.pow(2,u.z)*fd,f=[u.x*fd,u.y*fd],m=[];for(const c of e){const z=[];for(const k of c){const B=[k.x+f[0],k.y+f[1]];Zv(t,B),z.push(B)}m.push(z)}if(t[2]-t[0]<=a/2){hF(t);for(const c of m)for(const z of c)n3(z,t,r,a)}return m}function dF(e,t){const r=[1/0,1/0,-1/0,-1/0],u=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(t.type==="Polygon"){const f=$T(t.coordinates,u,a),m=jA(e.geometry(),r,u,a);if(!lv(r,u))return!1;for(const c of m)if(!Ty(c,f))return!1}if(t.type==="MultiPolygon"){const f=t3(t.coordinates,u,a),m=jA(e.geometry(),r,u,a);if(!lv(r,u))return!1;for(const c of m)if(!lF(c,f))return!1}return!0}function fF(e,t){const r=[1/0,1/0,-1/0,-1/0],u=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(t.type==="Polygon"){const f=$T(t.coordinates,u,a),m=BA(e.geometry(),r,u,a);if(!lv(r,u))return!1;for(const c of m)if(!e3(c,f))return!1}if(t.type==="MultiPolygon"){const f=t3(t.coordinates,u,a),m=BA(e.geometry(),r,u,a);if(!lv(r,u))return!1;for(const c of m)if(!cF(c,f))return!1}return!0}class Cm{constructor(t,r){this.type=oi,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ov(t[1])){const u=t[1];if(u.type==="FeatureCollection"){const a=[];for(const f of u.features){const{type:m,coordinates:c}=f.geometry;m==="Polygon"&&a.push(c),m==="MultiPolygon"&&a.push(...c)}if(a.length){const f={type:"MultiPolygon",coordinates:a};return new Cm(u,f)}}else if(u.type==="Feature"){const a=u.geometry.type;if(a==="Polygon"||a==="MultiPolygon")return new Cm(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new Cm(u,u)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return dF(t,this.geometries);if(t.geometryType()==="LineString")return fF(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class i3{constructor(t=[],r=(u,a)=>u<a?-1:u>a?1:0){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:u}=this,a=r[t];for(;t>0;){const f=t-1>>1,m=r[f];if(u(a,m)>=0)break;r[t]=m,t=f}r[t]=a}_down(t){const{data:r,compare:u}=this,a=this.length>>1,f=r[t];for(;t<a;){let m=(t<<1)+1;const c=m+1;if(c<this.length&&u(r[c],r[m])<0&&(m=c),u(r[m],f)>=0)break;r[t]=r[m],t=m}r[t]=f}}function pF(e,t){if(e.length<=1)return[e];const r=[];let u,a;for(const f of e){const m=mF(f);m!==0&&(f.area=Math.abs(m),a===void 0&&(a=m<0),a===m<0?(u&&r.push(u),u=[f]):u.push(f))}return u&&r.push(u),r}function mF(e){let t=0;for(let r=0,u=e.length,a=u-1,f,m;r<u;a=r++)f=e[r],m=e[a],t+=(m.x-f.x)*(f.y+m.y);return t}const gF=6378.137,FA=1/298.257223563,UA=FA*(2-FA),VA=Math.PI/180;class jT{constructor(t){const r=VA*gF*1e3,u=Math.cos(t*VA),a=1/(1-UA*(1-u*u)),f=Math.sqrt(a);this.kx=r*f*u,this.ky=r*f*a*(1-UA)}distance(t,r){const u=this.wrap(t[0]-r[0])*this.kx,a=(t[1]-r[1])*this.ky;return Math.sqrt(u*u+a*a)}pointOnLine(t,r){let u=1/0,a,f,m,c;for(let z=0;z<t.length-1;z++){let k=t[z][0],B=t[z][1],Z=this.wrap(t[z+1][0]-k)*this.kx,X=(t[z+1][1]-B)*this.ky,J=0;(Z!==0||X!==0)&&(J=(this.wrap(r[0]-k)*this.kx*Z+(r[1]-B)*this.ky*X)/(Z*Z+X*X),J>1?(k=t[z+1][0],B=t[z+1][1]):J>0&&(k+=Z/this.kx*J,B+=X/this.ky*J)),Z=this.wrap(r[0]-k)*this.kx,X=(r[1]-B)*this.ky;const ce=Z*Z+X*X;ce<u&&(u=ce,a=k,f=B,m=z,c=J)}return{point:[a,f],index:m,t:Math.max(0,Math.min(1,c))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}const Zw=100,qw=50;function r3(e,t){return t[0]-e[0]}function Fb(e){return e[1]-e[0]+1}function nf(e,t){return e[1]>=e[0]&&e[1]<t}function Gw(e,t){if(e[0]>e[1])return[null,null];const r=Fb(e);if(t){if(r===2)return[e,null];const a=Math.floor(r/2);return[[e[0],e[0]+a],[e[0]+a,e[1]]]}if(r===1)return[e,null];const u=Math.floor(r/2)-1;return[[e[0],e[0]+u],[e[0]+u+1,e[1]]]}function Hw(e,t){if(!nf(t,e.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let u=t[0];u<=t[1];++u)Zv(r,e[u]);return r}function Ww(e){const t=[1/0,1/0,-1/0,-1/0];for(const r of e)for(const u of r)Zv(t,u);return t}function ZA(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function BT(e,t,r){if(!ZA(e)||!ZA(t))return NaN;let u=0,a=0;return e[2]<t[0]&&(u=t[0]-e[2]),e[0]>t[2]&&(u=e[0]-t[2]),e[1]>t[3]&&(a=e[1]-t[3]),e[3]<t[1]&&(a=t[1]-e[3]),r.distance([0,0],[u,a])}function wm(e,t,r){const u=r.pointOnLine(t,e);return r.distance(e,u.point)}function FT(e,t,r,u,a){const f=Math.min(wm(e,[r,u],a),wm(t,[r,u],a)),m=Math.min(wm(r,[e,t],a),wm(u,[e,t],a));return Math.min(f,m)}function yF(e,t,r,u,a){if(!(nf(t,e.length)&&nf(u,r.length)))return 1/0;let f=1/0;for(let m=t[0];m<t[1];++m){const c=e[m],z=e[m+1];for(let k=u[0];k<u[1];++k){const B=r[k],Z=r[k+1];if(u1(c,z,B,Z))return 0;f=Math.min(f,FT(c,z,B,Z,a))}}return f}function _F(e,t,r,u,a){if(!(nf(t,e.length)&&nf(u,r.length)))return NaN;let f=1/0;for(let m=t[0];m<=t[1];++m)for(let c=u[0];c<=u[1];++c)if(f=Math.min(f,a.distance(e[m],r[c])),f===0)return f;return f}function vF(e,t,r){if(Ty(e,t,!0))return 0;let u=1/0;for(const a of t){const f=a[0],m=a[a.length-1];if(f!==m&&(u=Math.min(u,wm(e,[m,f],r)),u===0))return u;const c=r.pointOnLine(a,e);if(u=Math.min(u,r.distance(e,c.point)),u===0)return u}return u}function bF(e,t,r,u){if(!nf(t,e.length))return NaN;for(let f=t[0];f<=t[1];++f)if(Ty(e[f],r,!0))return 0;let a=1/0;for(let f=t[0];f<t[1];++f){const m=e[f],c=e[f+1];for(const z of r)for(let k=0,B=z.length,Z=B-1;k<B;Z=k++){const X=z[Z],J=z[k];if(u1(m,c,X,J))return 0;a=Math.min(a,FT(m,c,X,J,u))}}return a}function qA(e,t){for(const r of e)for(const u of r)if(Ty(u,t,!0))return!0;return!1}function xF(e,t,r,u=1/0){const a=Ww(e),f=Ww(t);if(u!==1/0&&BT(a,f,r)>=u)return u;if(lv(a,f)){if(qA(e,t))return 0}else if(qA(t,e))return 0;let m=1/0;for(const c of e)for(let z=0,k=c.length,B=k-1;z<k;B=z++){const Z=c[B],X=c[z];for(const J of t)for(let ce=0,ee=J.length,ae=ee-1;ce<ee;ae=ce++){const Me=J[ae],Ae=J[ce];if(u1(Z,X,Me,Ae))return 0;m=Math.min(m,FT(Z,X,Me,Ae,r))}}return m}function GA(e,t,r,u,a,f){if(!f)return;const m=BT(Hw(u,f),a,r);m<t&&e.push([m,f,[0,0]])}function ab(e,t,r,u,a,f,m){if(!f||!m)return;const c=BT(Hw(u,f),Hw(a,m),r);c<t&&e.push([c,f,m])}function Ub(e,t,r,u,a=1/0){let f=Math.min(u.distance(e[0],r[0][0]),a);if(f===0)return f;const m=new i3([[0,[0,e.length-1],[0,0]]],r3),c=Ww(r);for(;m.length>0;){const z=m.pop();if(z[0]>=f)continue;const k=z[1],B=t?qw:Zw;if(Fb(k)<=B){if(!nf(k,e.length))return NaN;if(t){const Z=bF(e,k,r,u);if(isNaN(Z)||Z===0)return Z;f=Math.min(f,Z)}else for(let Z=k[0];Z<=k[1];++Z){const X=vF(e[Z],r,u);if(f=Math.min(f,X),f===0)return 0}}else{const Z=Gw(k,t);GA(m,f,u,e,c,Z[0]),GA(m,f,u,e,c,Z[1])}}return f}function Vb(e,t,r,u,a,f=1/0){let m=Math.min(f,a.distance(e[0],r[0]));if(m===0)return m;const c=new i3([[0,[0,e.length-1],[0,r.length-1]]],r3);for(;c.length>0;){const z=c.pop();if(z[0]>=m)continue;const k=z[1],B=z[2],Z=t?qw:Zw,X=u?qw:Zw;if(Fb(k)<=Z&&Fb(B)<=X){if(!nf(k,e.length)&&nf(B,r.length))return NaN;let J;if(t&&u)J=yF(e,k,r,B,a),m=Math.min(m,J);else if(t&&!u){const ce=e.slice(k[0],k[1]+1);for(let ee=B[0];ee<=B[1];++ee)if(J=wm(r[ee],ce,a),m=Math.min(m,J),m===0)return m}else if(!t&&u){const ce=r.slice(B[0],B[1]+1);for(let ee=k[0];ee<=k[1];++ee)if(J=wm(e[ee],ce,a),m=Math.min(m,J),m===0)return m}else J=_F(e,k,r,B,a),m=Math.min(m,J)}else{const J=Gw(k,t),ce=Gw(B,u);ab(c,m,a,e,r,J[0],ce[0]),ab(c,m,a,e,r,J[0],ce[1]),ab(c,m,a,e,r,J[1],ce[0]),ab(c,m,a,e,r,J[1],ce[1])}}return m}function wF(e,t){const r=e.geometry(),u=r.flat().map(m=>NT([m.x,m.y],e.canonical));if(r.length===0)return NaN;const a=new jT(u[0][1]);let f=1/0;for(const m of t){switch(m.type){case"Point":f=Math.min(f,Vb(u,!1,[m.coordinates],!1,a,f));break;case"LineString":f=Math.min(f,Vb(u,!1,m.coordinates,!0,a,f));break;case"Polygon":f=Math.min(f,Ub(u,!1,m.coordinates,a,f));break}if(f===0)return f}return f}function SF(e,t){const r=e.geometry(),u=r.flat().map(m=>NT([m.x,m.y],e.canonical));if(r.length===0)return NaN;const a=new jT(u[0][1]);let f=1/0;for(const m of t){switch(m.type){case"Point":f=Math.min(f,Vb(u,!0,[m.coordinates],!1,a,f));break;case"LineString":f=Math.min(f,Vb(u,!0,m.coordinates,!0,a,f));break;case"Polygon":f=Math.min(f,Ub(u,!0,m.coordinates,a,f));break}if(f===0)return f}return f}function TF(e,t){const r=e.geometry();if(r.length===0||r[0].length===0)return NaN;const u=pF(r).map(m=>m.map(c=>c.map(z=>NT([z.x,z.y],e.canonical)))),a=new jT(u[0][0][0][1]);let f=1/0;for(const m of t)for(const c of u){switch(m.type){case"Point":f=Math.min(f,Ub([m.coordinates],!1,c,a,f));break;case"LineString":f=Math.min(f,Ub(m.coordinates,!0,c,a,f));break;case"Polygon":f=Math.min(f,xF(c,m.coordinates,a,f));break}if(f===0)return f}return f}function ow(e){return e.type==="MultiPolygon"?e.coordinates.map(t=>({type:"Polygon",coordinates:t})):e.type==="MultiLineString"?e.coordinates.map(t=>({type:"LineString",coordinates:t})):e.type==="MultiPoint"?e.coordinates.map(t=>({type:"Point",coordinates:t})):[e]}class Mm{constructor(t,r){this.type=Qt,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ov(t[1])){const u=t[1];if(u.type==="FeatureCollection")return new Mm(u,u.features.map(a=>ow(a.geometry)).flat());if(u.type==="Feature")return new Mm(u,ow(u.geometry));if("type"in u&&"coordinates"in u)return new Mm(u,ow(u))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return wF(t,this.geometries);if(t.geometryType()==="LineString")return SF(t,this.geometries);if(t.geometryType()==="Polygon")return TF(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class qv{constructor(t){this.type=ii,this.key=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=t[1];return u==null?r.error("Global state property must be defined."):typeof u!="string"?r.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new qv(u)}evaluate(t){var r;const u=(r=t.globals)===null||r===void 0?void 0:r.globalState;return!u||Object.keys(u).length===0?null:H_(u,this.key)}eachChild(){}outputDefined(){return!1}}const UT={"==":WB,"!=":XB,">":KB,"<":YB,">=":QB,"<=":JB,array:dh,at:zT,boolean:dh,case:PT,coalesce:sv,collator:c1,format:LT,image:RT,in:IT,"index-of":jb,interpolate:dd,"interpolate-hcl":dd,"interpolate-lab":dd,length:OT,let:o1,literal:my,match:kT,number:dh,"number-format":DT,object:dh,slice:Bb,step:l1,string:dh,"to-boolean":Jf,"to-color":Jf,"to-number":Jf,"to-string":Jf,var:s1,within:Cm,distance:Mm,"global-state":qv};class gh{constructor(t,r,u,a){this.name=t,this.type=r,this._evaluate=u,this.args=a}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,r){const u=t[0],a=gh.definitions[u];if(!a)return r.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(a)?a[0]:a.type,m=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,c=m.filter(([k])=>!Array.isArray(k)||k.length===t.length-1);let z=null;for(const[k,B]of c){z=new a1(r.registry,Zb,r.path,null,r.scope);const Z=[];let X=!1;for(let J=1;J<t.length;J++){const ce=t[J],ee=Array.isArray(k)?k[J-1]:k.type,ae=z.parse(ce,1+Z.length,ee);if(!ae){X=!0;break}Z.push(ae)}if(!X){if(Array.isArray(k)&&k.length!==Z.length){z.error(`Expected ${k.length} arguments, but found ${Z.length} instead.`);continue}for(let J=0;J<Z.length;J++){const ce=Array.isArray(k)?k[J]:k.type,ee=Z[J];z.concat(J+1).checkSubtype(ce,ee.type)}if(z.errors.length===0)return new gh(u,f,B,Z)}}if(c.length===1)r.errors.push(...z.errors);else{const k=(c.length?c:m).map(([Z])=>AF(Z)).join(" | "),B=[];for(let Z=1;Z<t.length;Z++){const X=r.parse(t[Z],1+B.length);if(!X)return null;B.push(sa(X.type))}r.error(`Expected arguments of type ${k}, but found (${B.join(", ")}) instead.`)}return null}static register(t,r){gh.definitions=r;for(const u in r)t[u]=gh}}function HA(e,[t,r,u,a]){t=t.evaluate(e),r=r.evaluate(e),u=u.evaluate(e);const f=a?a.evaluate(e):1,m=X4(t,r,u,f);if(m)throw new Sa(m);return new ur(t/255,r/255,u/255,f,!1)}function WA(e,t){return e in t}function sw(e,t){const r=t[e];return typeof r>"u"?null:r}function EF(e,t,r,u){for(;r<=u;){const a=r+u>>1;if(t[a]===e)return!0;t[a]>e?u=a-1:r=a+1}return!1}function dm(e){return{type:e}}gh.register(UT,{error:[vB,[di],(e,[t])=>{throw new Sa(t.evaluate(e))}],typeof:[di,[ii],(e,[t])=>sa(yo(t.evaluate(e)))],"to-rgba":[Nc(Qt,4),[ud],(e,[t])=>{const[r,u,a,f]=t.evaluate(e).rgb;return[r*255,u*255,a*255,f]}],rgb:[ud,[Qt,Qt,Qt],HA],rgba:[ud,[Qt,Qt,Qt,Qt],HA],has:{type:oi,overloads:[[[di],(e,[t])=>WA(t.evaluate(e),e.properties())],[[di,Tm],(e,[t,r])=>WA(t.evaluate(e),r.evaluate(e))]]},get:{type:ii,overloads:[[[di],(e,[t])=>sw(t.evaluate(e),e.properties())],[[di,Tm],(e,[t,r])=>sw(t.evaluate(e),r.evaluate(e))]]},"feature-state":[ii,[di],(e,[t])=>sw(t.evaluate(e),e.featureState||{})],properties:[Tm,[],e=>e.properties()],"geometry-type":[di,[],e=>e.geometryType()],id:[ii,[],e=>e.id()],zoom:[Qt,[],e=>e.globals.zoom],"heatmap-density":[Qt,[],e=>e.globals.heatmapDensity||0],elevation:[Qt,[],e=>e.globals.elevation||0],"line-progress":[Qt,[],e=>e.globals.lineProgress||0],accumulated:[ii,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[Qt,dm(Qt),(e,t)=>{let r=0;for(const u of t)r+=u.evaluate(e);return r}],"*":[Qt,dm(Qt),(e,t)=>{let r=1;for(const u of t)r*=u.evaluate(e);return r}],"-":{type:Qt,overloads:[[[Qt,Qt],(e,[t,r])=>t.evaluate(e)-r.evaluate(e)],[[Qt],(e,[t])=>-t.evaluate(e)]]},"/":[Qt,[Qt,Qt],(e,[t,r])=>t.evaluate(e)/r.evaluate(e)],"%":[Qt,[Qt,Qt],(e,[t,r])=>t.evaluate(e)%r.evaluate(e)],ln2:[Qt,[],()=>Math.LN2],pi:[Qt,[],()=>Math.PI],e:[Qt,[],()=>Math.E],"^":[Qt,[Qt,Qt],(e,[t,r])=>Math.pow(t.evaluate(e),r.evaluate(e))],sqrt:[Qt,[Qt],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[Qt,[Qt],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[Qt,[Qt],(e,[t])=>Math.log(t.evaluate(e))],log2:[Qt,[Qt],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[Qt,[Qt],(e,[t])=>Math.sin(t.evaluate(e))],cos:[Qt,[Qt],(e,[t])=>Math.cos(t.evaluate(e))],tan:[Qt,[Qt],(e,[t])=>Math.tan(t.evaluate(e))],asin:[Qt,[Qt],(e,[t])=>Math.asin(t.evaluate(e))],acos:[Qt,[Qt],(e,[t])=>Math.acos(t.evaluate(e))],atan:[Qt,[Qt],(e,[t])=>Math.atan(t.evaluate(e))],min:[Qt,dm(Qt),(e,t)=>Math.min(...t.map(r=>r.evaluate(e)))],max:[Qt,dm(Qt),(e,t)=>Math.max(...t.map(r=>r.evaluate(e)))],abs:[Qt,[Qt],(e,[t])=>Math.abs(t.evaluate(e))],round:[Qt,[Qt],(e,[t])=>{const r=t.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[Qt,[Qt],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[Qt,[Qt],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[oi,[di,ii],(e,[t,r])=>e.properties()[t.value]===r.value],"filter-id-==":[oi,[ii],(e,[t])=>e.id()===t.value],"filter-type-==":[oi,[di],(e,[t])=>e.geometryType()===t.value],"filter-<":[oi,[di,ii],(e,[t,r])=>{const u=e.properties()[t.value],a=r.value;return typeof u==typeof a&&u<a}],"filter-id-<":[oi,[ii],(e,[t])=>{const r=e.id(),u=t.value;return typeof r==typeof u&&r<u}],"filter->":[oi,[di,ii],(e,[t,r])=>{const u=e.properties()[t.value],a=r.value;return typeof u==typeof a&&u>a}],"filter-id->":[oi,[ii],(e,[t])=>{const r=e.id(),u=t.value;return typeof r==typeof u&&r>u}],"filter-<=":[oi,[di,ii],(e,[t,r])=>{const u=e.properties()[t.value],a=r.value;return typeof u==typeof a&&u<=a}],"filter-id-<=":[oi,[ii],(e,[t])=>{const r=e.id(),u=t.value;return typeof r==typeof u&&r<=u}],"filter->=":[oi,[di,ii],(e,[t,r])=>{const u=e.properties()[t.value],a=r.value;return typeof u==typeof a&&u>=a}],"filter-id->=":[oi,[ii],(e,[t])=>{const r=e.id(),u=t.value;return typeof r==typeof u&&r>=u}],"filter-has":[oi,[ii],(e,[t])=>t.value in e.properties()],"filter-has-id":[oi,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[oi,[Nc(di)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[oi,[Nc(ii)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[oi,[di,Nc(ii)],(e,[t,r])=>r.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[oi,[di,Nc(ii)],(e,[t,r])=>EF(e.properties()[t.value],r.value,0,r.value.length-1)],all:{type:oi,overloads:[[[oi,oi],(e,[t,r])=>t.evaluate(e)&&r.evaluate(e)],[dm(oi),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:oi,overloads:[[[oi,oi],(e,[t,r])=>t.evaluate(e)||r.evaluate(e)],[dm(oi),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[oi,[oi],(e,[t])=>!t.evaluate(e)],"is-supported-script":[oi,[di],(e,[t])=>{const r=e.globals&&e.globals.isSupportedScript;return r?r(t.evaluate(e)):!0}],upcase:[di,[di],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[di,[di],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[di,dm(ii),(e,t)=>t.map(r=>W_(r.evaluate(e))).join("")],"resolved-locale":[di,[e1],(e,[t])=>t.evaluate(e).resolvedLocale()]});function AF(e){return Array.isArray(e)?`(${e.map(sa).join(", ")})`:`(${sa(e.type)}...)`}function Zb(e){if(e instanceof s1)return Zb(e.boundExpression);if(e instanceof gh&&e.name==="error"||e instanceof c1||e instanceof Cm||e instanceof Mm||e instanceof qv)return!1;const t=e instanceof Jf||e instanceof dh;let r=!0;return e.eachChild(u=>{t?r=r&&Zb(u):r=r&&u instanceof my}),r?h1(e)&&d1(e,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function h1(e){if(e instanceof gh&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Cm||e instanceof Mm)return!1;let t=!0;return e.eachChild(r=>{t&&!h1(r)&&(t=!1)}),t}function cv(e){if(e instanceof gh&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(r=>{t&&!cv(r)&&(t=!1)}),t}function d1(e,t){if(e instanceof gh&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild(u=>{r&&!d1(u,t)&&(r=!1)}),r}function Xw(e){return{result:"success",value:e}}function Qg(e){return{result:"error",value:e}}function qb(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function a3(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function o3(e){return!!e.expression&&e.expression.interpolated}function vi(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function VT(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&yo(e)===Tm}class CF{constructor(t,r,u){this.expression=t,this._warningHistory={},this._evaluator=new Y4,this._defaultValue=r?IF(r):null,this._enumValues=r&&r.type==="enum"?r.values:null,this._globalState=u}evaluateWithoutErrorHandling(t,r,u,a,f,m){return this._globalState&&(t=gy(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=r,this._evaluator.featureState=u,this._evaluator.canonical=a,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m,this.expression.evaluate(this._evaluator)}evaluate(t,r,u,a,f,m){this._globalState&&(t=gy(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=r||null,this._evaluator.featureState=u||null,this._evaluator.canonical=a,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m||null;try{const c=this.expression.evaluate(this._evaluator);if(c==null||typeof c=="number"&&c!==c)return this._defaultValue;if(this._enumValues&&!(c in this._enumValues))throw new Sa(`Expected value to be one of ${Object.keys(this._enumValues).map(z=>JSON.stringify(z)).join(", ")}, but found ${JSON.stringify(c)} instead.`);return c}catch(c){return this._warningHistory[c.message]||(this._warningHistory[c.message]=!0,typeof console<"u"&&console.warn(c.message)),this._defaultValue}}}function s3(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in UT}function l3(e,t,r){const u=new a1(UT,Zb,[],t?zF(t):void 0),a=u.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return a?Xw(new CF(a,t,r)):Qg(u.errors)}class XA{constructor(t,r,u){this.kind=t,this._styleExpression=r,this.isStateDependent=t!=="constant"&&!cv(r.expression),this.globalStateRefs=ZT(r.expression),this._globalState=u}evaluateWithoutErrorHandling(t,r,u,a,f,m){return this._globalState&&(t=gy(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,r,u,a,f,m)}evaluate(t,r,u,a,f,m){return this._globalState&&(t=gy(t,this._globalState)),this._styleExpression.evaluate(t,r,u,a,f,m)}}class YA{constructor(t,r,u,a,f){this.kind=t,this.zoomStops=u,this._styleExpression=r,this.isStateDependent=t!=="camera"&&!cv(r.expression),this.globalStateRefs=ZT(r.expression),this.interpolationType=a,this._globalState=f}evaluateWithoutErrorHandling(t,r,u,a,f,m){return this._globalState&&(t=gy(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,r,u,a,f,m)}evaluate(t,r,u,a,f,m){return this._globalState&&(t=gy(t,this._globalState)),this._styleExpression.evaluate(t,r,u,a,f,m)}interpolationFactor(t,r,u){return this.interpolationType?dd.interpolationFactor(this.interpolationType,t,r,u):0}}function MF(e,t,r){const u=l3(e,t,r);if(u.result==="error")return u;const a=u.value.expression,f=h1(a);if(!f&&!qb(t))return Qg([new od("","data expressions not supported")]);const m=d1(a,["zoom"]);if(!m&&!a3(t))return Qg([new od("","zoom expressions not supported")]);const c=xb(a);if(!c&&!m)return Qg([new od("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(c instanceof od)return Qg([c]);if(c instanceof dd&&!o3(t))return Qg([new od("",'"interpolate" expressions cannot be used with this property')]);if(!c)return Xw(f?new XA("constant",u.value,r):new XA("source",u.value,r));const z=c instanceof dd?c.interpolation:void 0;return Xw(f?new YA("camera",u.value,c.labels,z,r):new YA("composite",u.value,c.labels,z,r))}function xb(e){let t=null;if(e instanceof o1)t=xb(e.result);else if(e instanceof sv){for(const r of e.args)if(t=xb(r),t)break}else(e instanceof l1||e instanceof dd)&&e.input instanceof gh&&e.input.name==="zoom"&&(t=e);return t instanceof od||e.eachChild(r=>{const u=xb(r);u instanceof od?t=u:!t&&u?t=new od("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&u&&t!==u&&(t=new od("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function ZT(e,t=new Set){return e instanceof qv&&t.add(e.key),e.eachChild(r=>{ZT(r,t)}),t}function zF(e){const t={color:ud,string:di,number:Qt,enum:di,boolean:oi,formatted:t1,padding:n1,numberArray:i1,colorArray:iv,projectionDefinition:Qx,resolvedImage:Vv,variableAnchorOffsetCollection:r1};return e.type==="array"?Nc(t[e.value]||ii,e.length):t[e.type]}function IF(e){if(e.type==="color"&&VT(e.default))return new ur(0,0,0,0);switch(e.type){case"color":return ur.parse(e.default)||null;case"padding":return ph.parse(e.default)||null;case"numberArray":return mh.parse(e.default)||null;case"colorArray":return $c.parse(e.default)||null;case"variableAnchorOffsetCollection":return hd.parse(e.default)||null;case"projectionDefinition":return hh.parse(e.default)||null;default:return e.default===void 0?null:e.default}}function gy(e,t){const{zoom:r,heatmapDensity:u,elevation:a,lineProgress:f,isSupportedScript:m,accumulated:c}=e??{};return{zoom:r,heatmapDensity:u,elevation:a,lineProgress:f,isSupportedScript:m,accumulated:c,globalState:t}}function c3(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!c3(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function u3(e){const t=e.key,r=e.value;return r?[new qt(t,r,"constants have been deprecated as of v8")]:[]}function Na(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Lm(e){if(Array.isArray(e))return e.map(Lm);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const r in e)t[r]=Lm(e[r]);return t}return Na(e)}function jc(e){const t=e.key,r=e.value,u=e.valueSpec||{},a=e.objectElementValidators||{},f=e.style,m=e.styleSpec,c=e.validateSpec;let z=[];const k=vi(r);if(k!=="object")return[new qt(t,r,`object expected, ${k} found`)];for(const B in r){const Z=B.split(".")[0],X=H_(u,Z)||u["*"];let J;if(H_(a,Z))J=a[Z];else if(H_(u,Z)){if(r[B]===void 0)continue;J=c}else if(a["*"])J=a["*"];else if(u["*"])J=c;else{z.push(new qt(t,r[B],`unknown property "${B}"`));continue}z=z.concat(J({key:(t&&`${t}.`)+B,value:r[B],valueSpec:X,style:f,styleSpec:m,object:r,objectKey:B,validateSpec:c},r))}for(const B in u)a[B]||u[B].required&&u[B].default===void 0&&r[B]===void 0&&z.push(new qt(t,r,`missing required property "${B}"`));return z}function qT(e){const t=e.value,r=e.valueSpec,u=e.validateSpec,a=e.style,f=e.styleSpec,m=e.key,c=e.arrayElementValidator||u;if(vi(t)!=="array")return[new qt(m,t,`array expected, ${vi(t)} found`)];if(r.length&&t.length!==r.length)return[new qt(m,t,`array length ${r.length} expected, length ${t.length} found`)];let z={type:r.value,values:r.values};f.$version<7&&(z.function=r.function),vi(r.value)==="object"&&(z=r.value);let k=[];for(let B=0;B<t.length;B++)k=k.concat(c({array:t,arrayIndex:B,value:t[B],valueSpec:z,validateSpec:e.validateSpec,style:a,styleSpec:f,key:`${m}[${B}]`}));return k}function f1(e){const t=e.key,r=e.value,u=e.valueSpec;let a=vi(r);return a==="number"&&r!==r&&(a="NaN"),a!=="number"?[new qt(t,r,`number expected, ${a} found`)]:"minimum"in u&&r<u.minimum?[new qt(t,r,`${r} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&r>u.maximum?[new qt(t,r,`${r} is greater than the maximum value ${u.maximum}`)]:[]}function h3(e){const t=e.valueSpec,r=Na(e.value.type);let u,a={},f,m;const c=r!=="categorical"&&e.value.property===void 0,z=!c,k=vi(e.value.stops)==="array"&&vi(e.value.stops[0])==="array"&&vi(e.value.stops[0][0])==="object",B=jc({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:Z,default:ce}});return r==="identity"&&c&&B.push(new qt(e.key,e.value,'missing required property "property"')),r!=="identity"&&!e.value.stops&&B.push(new qt(e.key,e.value,'missing required property "stops"')),r==="exponential"&&e.valueSpec.expression&&!o3(e.valueSpec)&&B.push(new qt(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(z&&!qb(e.valueSpec)?B.push(new qt(e.key,e.value,"property functions not supported")):c&&!a3(e.valueSpec)&&B.push(new qt(e.key,e.value,"zoom functions not supported"))),(r==="categorical"||k)&&e.value.property===void 0&&B.push(new qt(e.key,e.value,'"property" property is required')),B;function Z(ee){if(r==="identity")return[new qt(ee.key,ee.value,'identity function may not have a "stops" property')];let ae=[];const Me=ee.value;return ae=ae.concat(qT({key:ee.key,value:Me,valueSpec:ee.valueSpec,validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec,arrayElementValidator:X})),vi(Me)==="array"&&Me.length===0&&ae.push(new qt(ee.key,Me,"array must have at least one stop")),ae}function X(ee){let ae=[];const Me=ee.value,Ae=ee.key;if(vi(Me)!=="array")return[new qt(Ae,Me,`array expected, ${vi(Me)} found`)];if(Me.length!==2)return[new qt(Ae,Me,`array length 2 expected, length ${Me.length} found`)];if(k){if(vi(Me[0])!=="object")return[new qt(Ae,Me,`object expected, ${vi(Me[0])} found`)];if(Me[0].zoom===void 0)return[new qt(Ae,Me,"object stop key must have zoom")];if(Me[0].value===void 0)return[new qt(Ae,Me,"object stop key must have value")];if(m&&m>Na(Me[0].zoom))return[new qt(Ae,Me[0].zoom,"stop zoom values must appear in ascending order")];Na(Me[0].zoom)!==m&&(m=Na(Me[0].zoom),f=void 0,a={}),ae=ae.concat(jc({key:`${Ae}[0]`,value:Me[0],valueSpec:{zoom:{}},validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec,objectElementValidators:{zoom:f1,value:J}}))}else ae=ae.concat(J({key:`${Ae}[0]`,value:Me[0],validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec},Me));return s3(Lm(Me[1]))?ae.concat([new qt(`${Ae}[1]`,Me[1],"expressions are not allowed in function stops.")]):ae.concat(ee.validateSpec({key:`${Ae}[1]`,value:Me[1],valueSpec:t,validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec}))}function J(ee,ae){const Me=vi(ee.value),Ae=Na(ee.value),we=ee.value!==null?ee.value:ae;if(!u)u=Me;else if(Me!==u)return[new qt(ee.key,we,`${Me} stop domain type must match previous stop domain type ${u}`)];if(Me!=="number"&&Me!=="string"&&Me!=="boolean")return[new qt(ee.key,we,"stop domain value must be a number, string, or boolean")];if(Me!=="number"&&r!=="categorical"){let xe=`number expected, ${Me} found`;return qb(t)&&r===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qt(ee.key,we,xe)]}return r==="categorical"&&Me==="number"&&(!isFinite(Ae)||Math.floor(Ae)!==Ae)?[new qt(ee.key,we,`integer expected, found ${Ae}`)]:r!=="categorical"&&Me==="number"&&f!==void 0&&Ae<f?[new qt(ee.key,we,"stop domain values must appear in ascending order")]:(f=Ae,r==="categorical"&&Ae in a?[new qt(ee.key,we,"stop domain values must be unique")]:(a[Ae]=!0,[]))}function ce(ee){return ee.validateSpec({key:ee.key,value:ee.value,valueSpec:t,validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec})}}function yy(e){const t=(e.expressionContext==="property"?MF:l3)(Lm(e.value),e.valueSpec);if(t.result==="error")return t.value.map(u=>new qt(`${e.key}${u.key}`,e.value,u.message));const r=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!r.outputDefined())return[new qt(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!cv(r))return[new qt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!cv(r))return[new qt(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!d1(r,["zoom","feature-state"]))return[new qt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!h1(r))return[new qt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function kF(e){const t=e.value,r=e.key,u=vi(t);return u!=="boolean"?[new qt(r,t,`boolean expected, ${u} found`)]:[]}function Yw(e){const t=e.key,r=e.value,u=vi(r);return u!=="string"?[new qt(t,r,`color expected, ${u} found`)]:ur.parse(String(r))?[]:[new qt(t,r,`color expected, "${r}" found`)]}function uv(e){const t=e.key,r=e.value,u=e.valueSpec,a=[];return Array.isArray(u.values)?u.values.indexOf(Na(r))===-1&&a.push(new qt(t,r,`expected one of [${u.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(u.values).indexOf(Na(r))===-1&&a.push(new qt(t,r,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(r)} found`)),a}function GT(e){return c3(Lm(e.value))?yy($b({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):d3(e)}function d3(e){const t=e.value,r=e.key;if(vi(t)!=="array")return[new qt(r,t,`array expected, ${vi(t)} found`)];const u=e.styleSpec;let a,f=[];if(t.length<1)return[new qt(r,t,"filter array must have at least 1 element")];switch(f=f.concat(uv({key:`${r}[0]`,value:t[0],valueSpec:u.filter_operator,style:e.style,styleSpec:e.styleSpec})),Na(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Na(t[1])==="$type"&&f.push(new qt(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&f.push(new qt(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(a=vi(t[1]),a!=="string"&&f.push(new qt(`${r}[1]`,t[1],`string expected, ${a} found`)));for(let m=2;m<t.length;m++)a=vi(t[m]),Na(t[1])==="$type"?f=f.concat(uv({key:`${r}[${m}]`,value:t[m],valueSpec:u.geometry_type,style:e.style,styleSpec:e.styleSpec})):a!=="string"&&a!=="number"&&a!=="boolean"&&f.push(new qt(`${r}[${m}]`,t[m],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let m=1;m<t.length;m++)f=f.concat(d3({key:`${r}[${m}]`,value:t[m],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=vi(t[1]),t.length!==2?f.push(new qt(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):a!=="string"&&f.push(new qt(`${r}[1]`,t[1],`string expected, ${a} found`));break}return f}function f3(e,t){const r=e.key,u=e.validateSpec,a=e.style,f=e.styleSpec,m=e.value,c=e.objectKey,z=f[`${t}_${e.layerType}`];if(!z)return[];const k=c.match(/^(.*)-transition$/);if(t==="paint"&&k&&z[k[1]]&&z[k[1]].transition)return u({key:r,value:m,valueSpec:f.transition,style:a,styleSpec:f});const B=e.valueSpec||z[c];if(!B)return[new qt(r,m,`unknown property "${c}"`)];let Z;if(vi(m)==="string"&&qb(B)&&!B.tokens&&(Z=/^{([^}]+)}$/.exec(m)))return[new qt(r,m,`"${c}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Z[1])} }\`.`)];const X=[];return e.layerType==="symbol"&&c==="text-font"&&VT(Lm(m))&&Na(m.type)==="identity"&&X.push(new qt(r,m,'"text-font" does not support identity functions')),X.concat(u({key:e.key,value:m,valueSpec:B,style:a,styleSpec:f,expressionContext:"property",propertyType:t,propertyKey:c}))}function p3(e){return f3(e,"paint")}function m3(e){return f3(e,"layout")}function g3(e){let t=[];const r=e.value,u=e.key,a=e.style,f=e.styleSpec;if(vi(r)!=="object")return[new qt(u,r,`object expected, ${vi(r)} found`)];!r.type&&!r.ref&&t.push(new qt(u,r,'either "type" or "ref" is required'));let m=Na(r.type);const c=Na(r.ref);if(r.id){const z=Na(r.id);for(let k=0;k<e.arrayIndex;k++){const B=a.layers[k];Na(B.id)===z&&t.push(new qt(u,r.id,`duplicate layer id "${r.id}", previously used at line ${B.id.__line__}`))}}if("ref"in r){["type","source","source-layer","filter","layout"].forEach(k=>{k in r&&t.push(new qt(u,r[k],`"${k}" is prohibited for ref layers`))});let z;a.layers.forEach(k=>{Na(k.id)===c&&(z=k)}),z?z.ref?t.push(new qt(u,r.ref,"ref cannot reference another ref layer")):m=Na(z.type):t.push(new qt(u,r.ref,`ref layer "${c}" not found`))}else if(m!=="background")if(!r.source)t.push(new qt(u,r,'missing required property "source"'));else{const z=a.sources&&a.sources[r.source],k=z&&Na(z.type);z?k==="vector"&&m==="raster"?t.push(new qt(u,r.source,`layer "${r.id}" requires a raster source`)):k!=="raster-dem"&&m==="hillshade"?t.push(new qt(u,r.source,`layer "${r.id}" requires a raster-dem source`)):k!=="raster-dem"&&m==="color-relief"?t.push(new qt(u,r.source,`layer "${r.id}" requires a raster-dem source`)):k==="raster"&&m!=="raster"?t.push(new qt(u,r.source,`layer "${r.id}" requires a vector source`)):k==="vector"&&!r["source-layer"]?t.push(new qt(u,r,`layer "${r.id}" must specify a "source-layer"`)):k==="raster-dem"&&m!=="hillshade"&&m!=="color-relief"?t.push(new qt(u,r.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):m==="line"&&r.paint&&r.paint["line-gradient"]&&(k!=="geojson"||!z.lineMetrics)&&t.push(new qt(u,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new qt(u,r.source,`source "${r.source}" not found`))}return t=t.concat(jc({key:u,value:r,valueSpec:f.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*"(){return[]},type(){return e.validateSpec({key:`${u}.type`,value:r.type,valueSpec:f.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:r,objectKey:"type"})},filter:GT,layout(z){return jc({layer:r,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*"(k){return m3($b({layerType:m},k))}}})},paint(z){return jc({layer:r,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*"(k){return p3($b({layerType:m},k))}}})}}})),t}function sp(e){const t=e.value,r=e.key,u=vi(t);return u!=="string"?[new qt(r,t,`string expected, ${u} found`)]:[]}function PF(e){var t;const r=(t=e.sourceName)!==null&&t!==void 0?t:"",u=e.value,a=e.styleSpec,f=a.source_raster_dem,m=e.style;let c=[];const z=vi(u);if(u===void 0)return c;if(z!=="object")return c.push(new qt("source_raster_dem",u,`object expected, ${z} found`)),c;const k=Na(u.encoding)==="custom",B=["redFactor","greenFactor","blueFactor","baseShift"],Z=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const X in u)!k&&B.includes(X)?c.push(new qt(X,u[X],`In "${r}": "${X}" is only valid when "encoding" is set to "custom". ${Z} encoding found`)):f[X]?c=c.concat(e.validateSpec({key:X,value:u[X],valueSpec:f[X],validateSpec:e.validateSpec,style:m,styleSpec:a})):c.push(new qt(X,u[X],`unknown property "${X}"`));return c}const KA={promoteId:DF};function y3(e){const t=e.value,r=e.key,u=e.styleSpec,a=e.style,f=e.validateSpec;if(!t.type)return[new qt(r,t,'"type" is required')];const m=Na(t.type);let c;switch(m){case"vector":case"raster":return c=jc({key:r,value:t,valueSpec:u[`source_${m.replace("-","_")}`],style:e.style,styleSpec:u,objectElementValidators:KA,validateSpec:f}),c;case"raster-dem":return c=PF({sourceName:r,value:t,style:e.style,styleSpec:u,validateSpec:f}),c;case"geojson":if(c=jc({key:r,value:t,valueSpec:u.source_geojson,style:a,styleSpec:u,validateSpec:f,objectElementValidators:KA}),t.cluster)for(const z in t.clusterProperties){const[k,B]=t.clusterProperties[z],Z=typeof k=="string"?[k,["accumulated"],["get",z]]:k;c.push(...yy({key:`${r}.${z}.map`,value:B,expressionContext:"cluster-map"})),c.push(...yy({key:`${r}.${z}.reduce`,value:Z,expressionContext:"cluster-reduce"}))}return c;case"video":return jc({key:r,value:t,valueSpec:u.source_video,style:a,validateSpec:f,styleSpec:u});case"image":return jc({key:r,value:t,valueSpec:u.source_image,style:a,validateSpec:f,styleSpec:u});case"canvas":return[new qt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return uv({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function DF({key:e,value:t}){if(vi(t)==="string")return sp({key:e,value:t});{const r=[];for(const u in t)r.push(...sp({key:`${e}.${u}`,value:t[u]}));return r}}function _3(e){const t=e.value,r=e.styleSpec,u=r.light,a=e.style;let f=[];const m=vi(t);if(t===void 0)return f;if(m!=="object")return f=f.concat([new qt("light",t,`object expected, ${m} found`)]),f;for(const c in t){const z=c.match(/^(.*)-transition$/);z&&u[z[1]]&&u[z[1]].transition?f=f.concat(e.validateSpec({key:c,value:t[c],valueSpec:r.transition,validateSpec:e.validateSpec,style:a,styleSpec:r})):u[c]?f=f.concat(e.validateSpec({key:c,value:t[c],valueSpec:u[c],validateSpec:e.validateSpec,style:a,styleSpec:r})):f=f.concat([new qt(c,t[c],`unknown property "${c}"`)])}return f}function v3(e){const t=e.value,r=e.styleSpec,u=r.sky,a=e.style,f=vi(t);if(t===void 0)return[];if(f!=="object")return[new qt("sky",t,`object expected, ${f} found`)];let m=[];for(const c in t)u[c]?m=m.concat(e.validateSpec({key:c,value:t[c],valueSpec:u[c],style:a,styleSpec:r})):m=m.concat([new qt(c,t[c],`unknown property "${c}"`)]);return m}function b3(e){const t=e.value,r=e.styleSpec,u=r.terrain,a=e.style;let f=[];const m=vi(t);if(t===void 0)return f;if(m!=="object")return f=f.concat([new qt("terrain",t,`object expected, ${m} found`)]),f;for(const c in t)u[c]?f=f.concat(e.validateSpec({key:c,value:t[c],valueSpec:u[c],validateSpec:e.validateSpec,style:a,styleSpec:r})):f=f.concat([new qt(c,t[c],`unknown property "${c}"`)]);return f}function LF(e){return sp(e).length===0?[]:yy(e)}function RF(e){return sp(e).length===0?[]:yy(e)}function OF(e){const t=e.key,r=e.value;if(vi(r)==="array"){if(r.length<1||r.length>4)return[new qt(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const u={type:"number"};let a=[];for(let f=0;f<r.length;f++)a=a.concat(e.validateSpec({key:`${t}[${f}]`,value:r[f],validateSpec:e.validateSpec,valueSpec:u}));return a}else return f1({key:t,value:r,valueSpec:{}})}function NF(e){const t=e.key,r=e.value;if(vi(r)==="array"){const u={type:"number"};if(r.length<1)return[new qt(t,r,"array length at least 1 expected, length 0 found")];let a=[];for(let f=0;f<r.length;f++)a=a.concat(e.validateSpec({key:`${t}[${f}]`,value:r[f],validateSpec:e.validateSpec,valueSpec:u}));return a}else return f1({key:t,value:r,valueSpec:{}})}function $F(e){const t=e.key,r=e.value;if(vi(r)==="array"){if(r.length<1)return[new qt(t,r,"array length at least 1 expected, length 0 found")];let u=[];for(let a=0;a<r.length;a++)u=u.concat(Yw({key:`${t}[${a}]`,value:r[a]}));return u}else return Yw({key:t,value:r})}function jF(e){const t=e.key,r=e.value,u=vi(r),a=e.styleSpec;if(u!=="array"||r.length<1||r.length%2!==0)return[new qt(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let f=[];for(let m=0;m<r.length;m+=2)f=f.concat(uv({key:`${t}[${m}]`,value:r[m],valueSpec:a.layout_symbol["text-anchor"]})),f=f.concat(qT({key:`${t}[${m+1}]`,value:r[m+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:a}));return f}function x3(e){let t=[];const r=e.value,u=e.key;if(Array.isArray(r)){const a=[],f=[];for(const m in r){r[m].id&&a.includes(r[m].id)&&t.push(new qt(u,r,`all the sprites' ids must be unique, but ${r[m].id} is duplicated`)),a.push(r[m].id),r[m].url&&f.includes(r[m].url)&&t.push(new qt(u,r,`all the sprites' URLs must be unique, but ${r[m].url} is duplicated`)),f.push(r[m].url);const c={id:{type:"string",required:!0},url:{type:"string",required:!0}};t=t.concat(jc({key:`${u}[${m}]`,value:r[m],valueSpec:c,validateSpec:e.validateSpec}))}return t}else return sp({key:u,value:r})}function BF(e){const t=e.value,r=e.styleSpec,u=r.projection,a=e.style,f=vi(t);if(t===void 0)return[];if(f!=="object")return[new qt("projection",t,`object expected, ${f} found`)];let m=[];for(const c in t)u[c]?m=m.concat(e.validateSpec({key:c,value:t[c],valueSpec:u[c],style:a,styleSpec:r})):m=m.concat([new qt(c,t[c],`unknown property "${c}"`)]);return m}function FF(e){const t=e.key;let r=e.value;r=r instanceof String?r.valueOf():r;const u=vi(r);return u==="array"&&!VF(r)&&!UF(r)?[new qt(t,r,`projection expected, invalid array ${JSON.stringify(r)} found`)]:["array","string"].includes(u)?[]:[new qt(t,r,`projection expected, invalid type "${u}" found`)]}function UF(e){return!!["interpolate","step","literal"].includes(e[0])}function VF(e){return Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"}function w3(e){return!!e&&e.constructor===Object}function S3(e){return w3(e.value)?[]:[new qt(e.key,e.value,`object expected, ${vi(e.value)} found`)]}function ZF(e){const t=e.key,r=e.value,u=e.validateSpec,a=e.styleSpec,f=e.style;if(!w3(r))return[new qt(t,r,`object expected, ${vi(r)} found`)];const m=[];for(const c in r){const z=r[c],k=vi(z);if(k==="string")m.push(...sp({key:`${t}.${c}`,value:z}));else if(k==="array"){const B={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[Z,X]of z.entries())m.push(...jc({key:`${t}.${c}[${Z}]`,value:X,valueSpec:B,styleSpec:a,style:f,validateSpec:u}))}else m.push(new qt(`${t}.${c}`,z,`string or array expected, ${k} found`))}return m}const JA={"*"(){return[]},array:qT,boolean:kF,number:f1,color:Yw,constants:u3,enum:uv,filter:GT,function:h3,layer:g3,object:jc,source:y3,light:_3,sky:v3,terrain:b3,projection:BF,projectionDefinition:FF,string:sp,formatted:LF,resolvedImage:RF,padding:OF,numberArray:NF,colorArray:$F,variableAnchorOffsetCollection:jF,sprite:x3,state:S3,fontFaces:ZF};function Gb(e){const t=e.value,r=e.valueSpec,u=e.styleSpec;return e.validateSpec=Gb,r.expression&&VT(Na(t))?h3(e):r.expression&&s3(Lm(t))?yy(e):r.type&&JA[r.type]?JA[r.type](e):jc($b({},e,{valueSpec:r.type?u[r.type]:r}))}function T3(e){const t=e.value,r=e.key,u=sp(e);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new qt(r,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new qt(r,t,'"glyphs" url must include a "{range}" token'))),u}function Zc(e,t=_B){let r=[];return r=r.concat(Gb({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:Gb,objectElementValidators:{glyphs:T3,"*"(){return[]}}})),e.constants&&(r=r.concat(u3({key:"constants",value:e.constants}))),E3(r)}Zc.source=bh(vh(y3));Zc.sprite=bh(vh(x3));Zc.glyphs=bh(vh(T3));Zc.light=bh(vh(_3));Zc.sky=bh(vh(v3));Zc.terrain=bh(vh(b3));Zc.state=bh(vh(S3));Zc.layer=bh(vh(g3));Zc.filter=bh(vh(GT));Zc.paintProperty=bh(vh(p3));Zc.layoutProperty=bh(vh(m3));function vh(e){return function(t){return e(Object.assign({},t,{validateSpec:Gb}))}}function E3(e){return[].concat(e).sort((t,r)=>t.line-r.line)}function bh(e){return function(...t){return E3(e.apply(this,t))}}function QA(e){if(!e)return{style:G_[tp[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0};if(typeof e=="string"){const t=GF(e);return t.isValidStyle?{style:t.styleObject,requiresUrlMonitoring:!1,isFallback:!1}:t.isValidJSON?{style:G_[tp[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}:e.startsWith("http")?{style:e,requiresUrlMonitoring:!0,isFallback:!1}:e.toLowerCase().includes(".json")?{style:qF(e),requiresUrlMonitoring:!0,isFallback:!1}:{style:R4(e),requiresUrlMonitoring:!0,isFallback:!1}}return e instanceof O4?{style:e.getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:e instanceof N4?{style:e.getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:Zc(e).length===0?{style:e,requiresUrlMonitoring:!1,isFallback:!1,isJSON:!0}:{style:G_[tp[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}}function qF(e){try{return new URL(e).href}catch{}return new URL(e,location.origin).href}function GF(e){try{const t=JSON.parse(e),r=Zc(t);return{isValidJSON:!0,isValidStyle:r.length===0,styleObject:r.length===0?t:null}}catch{return{isValidJSON:!1,isValidStyle:!1,styleObject:null}}}function ef(e,t,r){const u=window.document.createElement(e);return t!==void 0&&(u.className=t),r&&r.appendChild(u),u}function hv(e){e.parentNode&&e.parentNode.removeChild(e)}class HF{constructor(){rn(this,"_map"),rn(this,"_container"),rn(this,"_terrainButton"),vj(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=ef("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=ef("button","maplibregl-ctrl-terrain",this._container),ef("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){hv(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){A3(this._map),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}function A3(e){e.hasTerrain()?e.disableTerrain():e.enableTerrain()}class WF extends oj{constructor(t={}){super({showCompass:t.showCompass??!0,showZoom:t.showZoom??!0,visualizePitch:t.visualizePitch??!0}),rn(this,"_rotateCompassArrow",()=>{const r=this._map.getBearing(),u=this._map.getPitch(),a=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(u*(Math.PI/180))**.5)}) rotateX(${Math.min(70,u)}deg) rotateZ(${-r}deg)`:`rotate(${-r}deg)`;this._compassIcon.style.transform=a}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",r=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}))}_createButton(t,r){const u=super._createButton(t,r);return u.clickFunction=r,u}}const eC=mn.Marker,tC=mn.LngLat,XF=mn.LngLatBounds;class YF extends sj{constructor(){super(...arguments),rn(this,"lastUpdatedCenter",new tC(0,0)),rn(this,"_updateCamera",t=>{var r;const u=new tC(t.coords.longitude,t.coords.latitude),a=t.coords.accuracy,f={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},m=this._map.getZoom();m>(((r=this.options.fitBoundsOptions)==null?void 0:r.maxZoom)??30)&&(f.zoom=m),this._map.fitBounds(XF.fromLngLat(u,a),f,{geolocateSource:!0});let c=!1;const z=()=>{c=!0};this._map.once("click",z),this._map.once("dblclick",z),this._map.once("dragstart",z),this._map.once("mousedown",z),this._map.once("touchstart",z),this._map.once("wheel",z),this._map.once("moveend",()=>{this._map.off("click",z),this._map.off("dblclick",z),this._map.off("dragstart",z),this._map.off("mousedown",z),this._map.off("touchstart",z),this._map.off("wheel",z),!c&&(this.lastUpdatedCenter=this._map.getCenter())})}),rn(this,"_finishSetupUI",t=>{if(this._map){if(t===!1){const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ef("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new eC({element:this._dotElement}),this._circleElement=ef("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new eC({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",r=>{const u=r.originalEvent&&r.originalEvent.type==="resize",a=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!r.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!u&&a>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),rn(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],r=this._map.project(t),u=this._map.unproject([r.x,r.y]),a=this._map.unproject([r.x+20,r.y]),f=u.distanceTo(a)/20,m=Math.ceil(2*this._accuracy/f);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;case"BACKGROUND_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}}var pm,Pc,mm,gm,U_;class KF{constructor(t,r,u){if(Xl(this,pm),Xl(this,Pc),Xl(this,mm),Xl(this,gm),Xl(this,U_),typeof t=="string"){const a=document.querySelector(t);if(!a)throw new Error(`No element has been found with selector "${t}" when creating an external control.`);Rc(this,Pc,a)}else Rc(this,Pc,t);r&&Rc(this,mm,a=>{r(bn(this,pm),bn(this,Pc),a)}),u&&Rc(this,gm,a=>{u(bn(this,pm),bn(this,Pc),a)}),Rc(this,U_,bn(this,Pc).parentElement)}onAdd(t){return Rc(this,pm,t),bn(this,mm)&&bn(this,Pc).addEventListener("click",bn(this,mm)),bn(this,gm)&&bn(this,pm).on("render",bn(this,gm)),hv(bn(this,Pc)),bn(this,Pc)}onRemove(){bn(this,mm)&&bn(this,Pc).removeEventListener("click",bn(this,mm)),bn(this,gm)&&bn(this,pm).off("render",bn(this,gm)),bn(this,U_)?bn(this,U_).appendChild(bn(this,Pc)):hv(bn(this,Pc))}}pm=new WeakMap,Pc=new WeakMap,mm=new WeakMap,gm=new WeakMap,U_=new WeakMap;class JF{constructor(){rn(this,"map"),rn(this,"container"),rn(this,"projectionButton")}onAdd(t){return this.map=t,this.container=ef("div","maplibregl-ctrl maplibregl-ctrl-group"),this.projectionButton=ef("button","maplibregl-ctrl-projection",this.container),ef("span","maplibregl-ctrl-icon",this.projectionButton).setAttribute("aria-hidden","true"),this.projectionButton.type="button",this.projectionButton.addEventListener("click",this.toggleProjection.bind(this)),t.on("projectiontransition",this.updateProjectionIcon.bind(this)),this.updateProjectionIcon(),this.container}onRemove(){hv(this.container),this.map.off("projectiontransition",this.updateProjectionIcon),this.map=void 0}toggleProjection(){C3(this.map),this.updateProjectionIcon()}updateProjectionIcon(){this.projectionButton.classList.remove("maplibregl-ctrl-projection-globe"),this.projectionButton.classList.remove("maplibregl-ctrl-projection-mercator"),this.map.isGlobeProjection()?(this.projectionButton.classList.add("maplibregl-ctrl-projection-mercator"),this.projectionButton.title="Enable Mercator projection"):(this.projectionButton.classList.add("maplibregl-ctrl-projection-globe"),this.projectionButton.title="Enable Globe projection")}}function C3(e){e.getProjection()===void 0&&e.setProjection({type:"mercator"}),e.isGlobeProjection()?e.setProjection("mercator",{persist:!0}):e.setProjection("globe",{persist:!0})}const V_={"zoom-in":e=>e.zoomIn(),"zoom-out":e=>e.zoomOut(),"toggle-projection":C3,"toggle-terrain":A3,"reset-view":e=>{e.getPitch()===0?e.easeTo({pitch:Math.min(e.getMaxPitch(),80)}):e.resetNorthPitch()},"reset-bearing":e=>{e.rotateTo(0)},"reset-pitch":e=>{e.setPitch(0)},"reset-roll":e=>{e.setRoll(0)}};var wb,Z_;class Kw extends KF{constructor(t,r){if(r&&!(r in V_))throw new Error(`data-maptiler-control value "${r}" is invalid.`);super(t,r&&V_[r]),Xl(this,wb),Xl(this,Z_,new Map)}onAdd(t){return Rc(this,wb,t),super.onAdd(t)}onRemove(){for(const[t,r]of bn(this,Z_)){const u=t.deref();u&&u.removeEventListener("click",r)}bn(this,Z_).clear(),super.onRemove()}configureGroupItem(t,r){if(!r)return;if(!(r in V_))throw new Error(`data-maptiler-control value "${r}" is invalid.`);const u=a=>{V_[r](bn(this,wb),t,a)};t.addEventListener("click",u),bn(this,Z_).set(new WeakRef(t),u)}}wb=new WeakMap,Z_=new WeakMap,rn(Kw,"controlCallbacks",V_);var Lc,rd,ym,_m,mu,Sb,gl,M3,gu,z3;class lw{constructor(t,r){Xl(this,gl),Xl(this,Lc),rn(this,"map"),Xl(this,rd),Xl(this,ym),Xl(this,_m),Xl(this,mu,!1),Xl(this,Sb),t.style!==void 0&&Rc(this,mu,!0),Rc(this,Lc,{zoomAdjust:-4,position:"top-right",...r,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...t,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...t.containerStyle??{}}}),t.lockZoom!==void 0&&(bn(this,Lc).minZoom=t.lockZoom,bn(this,Lc).maxZoom=t.lockZoom)}setStyle(t,r){bn(this,mu)||this.map.setStyle(t,r),Dc(this,gl,gu).call(this)}addLayer(t,r){return bn(this,mu)||this.map.addLayer(t,r),Dc(this,gl,gu).call(this),this.map}moveLayer(t,r){return bn(this,mu)||this.map.moveLayer(t,r),Dc(this,gl,gu).call(this),this.map}removeLayer(t){return bn(this,mu)||this.map.removeLayer(t),Dc(this,gl,gu).call(this),this}setLayerZoomRange(t,r,u){return bn(this,mu)||this.map.setLayerZoomRange(t,r,u),Dc(this,gl,gu).call(this),this}setFilter(t,r,u){return bn(this,mu)||this.map.setFilter(t,r,u),Dc(this,gl,gu).call(this),this}setPaintProperty(t,r,u,a){return bn(this,mu)||this.map.setPaintProperty(t,r,u,a),Dc(this,gl,gu).call(this),this}setLayoutProperty(t,r,u,a){return bn(this,mu)||this.map.setLayoutProperty(t,r,u,a),Dc(this,gl,gu).call(this),this}setGlyphs(t,r){return bn(this,mu)||this.map.setGlyphs(t,r),Dc(this,gl,gu).call(this),this}onAdd(t){Rc(this,rd,t),Rc(this,ym,ef("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[r,u]of Object.entries(bn(this,Lc).containerStyle))bn(this,ym).style.setProperty(r,u);return bn(this,Lc).container=bn(this,ym),bn(this,Lc).zoom=t.getZoom()+bn(this,Lc).zoomAdjust,this.map=new P3(bn(this,Lc)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{Dc(this,gl,M3).call(this,bn(this,Lc).parentRect),Rc(this,Sb,Dc(this,gl,z3).call(this))}),bn(this,ym)}onRemove(){var t;(t=bn(this,Sb))==null||t.call(this),hv(bn(this,ym))}}Lc=new WeakMap,rd=new WeakMap,ym=new WeakMap,_m=new WeakMap,mu=new WeakMap,Sb=new WeakMap,gl=new WeakSet,M3=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(Rc(this,_m,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:bn(this,_m)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),Dc(this,gl,gu).call(this))},gu=function(){if(bn(this,_m)===void 0)return;const{devicePixelRatio:e}=window,t=bn(this,rd).getCanvas(),r=t.width/e,u=t.height/e,a=bn(this,rd).unproject.bind(bn(this,rd)),f=a([0,0]),m=a([r,0]),c=a([0,u]),z=a([r,u]);bn(this,_m).geometry.coordinates=[[c.toArray(),z.toArray(),m.toArray(),f.toArray(),c.toArray()]];const k=this.map.getSource("parentRect");k!==void 0&&k.setData(bn(this,_m))},z3=function(){const{pitchAdjust:e}=bn(this,Lc),t=()=>{f("parent")},r=()=>{f("minimap")},u=()=>{bn(this,rd).on("move",t),this.map.on("move",r)},a=()=>{bn(this,rd).off("move",t),this.map.off("move",r)},f=m=>{a();const c=m==="parent"?bn(this,rd):this.map,z=m==="parent"?this.map:bn(this,rd),k=c.getCenter(),B=c.getZoom()+bn(this,Lc).zoomAdjust*(m==="parent"?1:-1),Z=c.getBearing(),X=c.getPitch();z.jumpTo({center:k,zoom:B,bearing:Z,pitch:e?X:0}),Dc(this,gl,gu).call(this),u()};return u(),()=>{a()}};class QF{constructor(t,r=2e3){rn(this,"map"),rn(this,"registeredModules",new Set),rn(this,"viewerType"),this.map=t,this.viewerType="Map",setTimeout(async()=>{if(!Oa.telemetry)return;const u=this.preparePayload();try{(await fetch(u,{method:"POST"})).ok||console.warn("The metrics could not be sent to MapTiler Cloud")}catch(a){console.warn("The metrics could not be sent to MapTiler Cloud",a)}},Math.max(1e3,r))}registerModule(t,r){this.registeredModules.add(`${t}:${r}`)}registerViewerType(t="Map"){this.viewerType=t}preparePayload(){const t=new URL(_l.telemetryURL);return t.searchParams.append("sdk",H3()),t.searchParams.append("key",Oa.apiKey),t.searchParams.append("mtsid",ET),t.searchParams.append("session",Oa.session?"1":"0"),t.searchParams.append("caching",Oa.caching?"1":"0"),t.searchParams.append("lang-updated",this.map.isLanguageUpdated()?"1":"0"),t.searchParams.append("terrain",this.map.getTerrain()?"1":"0"),t.searchParams.append("globe",this.map.isGlobeProjection()?"1":"0"),t.searchParams.append("viewerType",this.viewerType),this.registeredModules.size>0&&t.searchParams.append("modules",Array.from(this.registeredModules).join("|")),t.href}}var dv=typeof Float32Array<"u"?Float32Array:Array;function X_(){var e=new dv(16);return dv!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function e9(e,t,r,u,a,f,m,c,z,k,B,Z,X,J,ce,ee,ae){return e[0]=t,e[1]=r,e[2]=u,e[3]=a,e[4]=f,e[5]=m,e[6]=c,e[7]=z,e[8]=k,e[9]=B,e[10]=Z,e[11]=X,e[12]=J,e[13]=ce,e[14]=ee,e[15]=ae,e}function t9(e,t,r){var u=t[0],a=t[1],f=t[2],m=t[3],c=t[4],z=t[5],k=t[6],B=t[7],Z=t[8],X=t[9],J=t[10],ce=t[11],ee=t[12],ae=t[13],Me=t[14],Ae=t[15],we=r[0],xe=r[1],Se=r[2],Fe=r[3];return e[0]=we*u+xe*c+Se*Z+Fe*ee,e[1]=we*a+xe*z+Se*X+Fe*ae,e[2]=we*f+xe*k+Se*J+Fe*Me,e[3]=we*m+xe*B+Se*ce+Fe*Ae,we=r[4],xe=r[5],Se=r[6],Fe=r[7],e[4]=we*u+xe*c+Se*Z+Fe*ee,e[5]=we*a+xe*z+Se*X+Fe*ae,e[6]=we*f+xe*k+Se*J+Fe*Me,e[7]=we*m+xe*B+Se*ce+Fe*Ae,we=r[8],xe=r[9],Se=r[10],Fe=r[11],e[8]=we*u+xe*c+Se*Z+Fe*ee,e[9]=we*a+xe*z+Se*X+Fe*ae,e[10]=we*f+xe*k+Se*J+Fe*Me,e[11]=we*m+xe*B+Se*ce+Fe*Ae,we=r[12],xe=r[13],Se=r[14],Fe=r[15],e[12]=we*u+xe*c+Se*Z+Fe*ee,e[13]=we*a+xe*z+Se*X+Fe*ae,e[14]=we*f+xe*k+Se*J+Fe*Me,e[15]=we*m+xe*B+Se*ce+Fe*Ae,e}function n9(e,t,r){var u=r[0],a=r[1],f=r[2];return e[0]=t[0]*u,e[1]=t[1]*u,e[2]=t[2]*u,e[3]=t[3]*u,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*f,e[9]=t[9]*f,e[10]=t[10]*f,e[11]=t[11]*f,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function nC(e,t,r){var u=Math.sin(r),a=Math.cos(r),f=t[4],m=t[5],c=t[6],z=t[7],k=t[8],B=t[9],Z=t[10],X=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=f*a+k*u,e[5]=m*a+B*u,e[6]=c*a+Z*u,e[7]=z*a+X*u,e[8]=k*a-f*u,e[9]=B*a-m*u,e[10]=Z*a-c*u,e[11]=X*a-z*u,e}function i9(e,t,r){var u=Math.sin(r),a=Math.cos(r),f=t[0],m=t[1],c=t[2],z=t[3],k=t[8],B=t[9],Z=t[10],X=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=f*a-k*u,e[1]=m*a-B*u,e[2]=c*a-Z*u,e[3]=z*a-X*u,e[8]=f*u+k*a,e[9]=m*u+B*a,e[10]=c*u+Z*a,e[11]=z*u+X*a,e}function iC(e,t,r){var u=Math.sin(r),a=Math.cos(r),f=t[0],m=t[1],c=t[2],z=t[3],k=t[4],B=t[5],Z=t[6],X=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=f*a+k*u,e[1]=m*a+B*u,e[2]=c*a+Z*u,e[3]=z*a+X*u,e[4]=k*a-f*u,e[5]=B*a-m*u,e[6]=Z*a-c*u,e[7]=X*a-z*u,e}function r9(e,t,r,u,a){var f=1/Math.tan(t/2);if(e[0]=f/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0){var m=1/(u-a);e[10]=(a+u)*m,e[14]=2*a*u*m}else e[10]=-1,e[14]=-2*u;return e}var a9=r9;function Tb(){var e=new dv(3);return dv!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function o9(e,t,r){var u=new dv(3);return u[0]=e,u[1]=t,u[2]=r,u}function cw(e,t){var r=t[0],u=t[1],a=t[2],f=r*r+u*u+a*a;return f>0&&(f=1/Math.sqrt(f)),e[0]=t[0]*f,e[1]=t[1]*f,e[2]=t[2]*f,e}function rC(e,t,r){var u=t[0],a=t[1],f=t[2],m=r[0],c=r[1],z=r[2];return e[0]=a*z-f*c,e[1]=f*m-u*z,e[2]=u*c-a*m,e}(function(){var e=Tb();return function(t,r,u,a,f,m){var c,z;for(r||(r=3),u||(u=0),a?z=Math.min(a*r+u,t.length):z=t.length,c=u;c<z;c+=r)e[0]=t[c],e[1]=t[c+1],e[2]=t[c+2],f(e,e,m),t[c]=e[0],t[c+1]=e[1],t[c+2]=e[2];return t}})();function s9(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var aC,oC;function l9(){return oC||(oC=1,aC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),aC}var uw,sC;function I3(){if(sC)return uw;sC=1;const e=l9(),t={};for(const a of Object.keys(e))t[e[a]]=a;const r={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};uw=r;for(const a of Object.keys(r)){if(!("channels"in r[a]))throw new Error("missing channels property: "+a);if(!("labels"in r[a]))throw new Error("missing channel labels property: "+a);if(r[a].labels.length!==r[a].channels)throw new Error("channel and label counts mismatch: "+a);const{channels:f,labels:m}=r[a];delete r[a].channels,delete r[a].labels,Object.defineProperty(r[a],"channels",{value:f}),Object.defineProperty(r[a],"labels",{value:m})}r.rgb.hsl=function(a){const f=a[0]/255,m=a[1]/255,c=a[2]/255,z=Math.min(f,m,c),k=Math.max(f,m,c),B=k-z;let Z,X;k===z?Z=0:f===k?Z=(m-c)/B:m===k?Z=2+(c-f)/B:c===k&&(Z=4+(f-m)/B),Z=Math.min(Z*60,360),Z<0&&(Z+=360);const J=(z+k)/2;return k===z?X=0:J<=.5?X=B/(k+z):X=B/(2-k-z),[Z,X*100,J*100]},r.rgb.hsv=function(a){let f,m,c,z,k;const B=a[0]/255,Z=a[1]/255,X=a[2]/255,J=Math.max(B,Z,X),ce=J-Math.min(B,Z,X),ee=function(ae){return(J-ae)/6/ce+1/2};return ce===0?(z=0,k=0):(k=ce/J,f=ee(B),m=ee(Z),c=ee(X),B===J?z=c-m:Z===J?z=1/3+f-c:X===J&&(z=2/3+m-f),z<0?z+=1:z>1&&(z-=1)),[z*360,k*100,J*100]},r.rgb.hwb=function(a){const f=a[0],m=a[1];let c=a[2];const z=r.rgb.hsl(a)[0],k=1/255*Math.min(f,Math.min(m,c));return c=1-1/255*Math.max(f,Math.max(m,c)),[z,k*100,c*100]},r.rgb.cmyk=function(a){const f=a[0]/255,m=a[1]/255,c=a[2]/255,z=Math.min(1-f,1-m,1-c),k=(1-f-z)/(1-z)||0,B=(1-m-z)/(1-z)||0,Z=(1-c-z)/(1-z)||0;return[k*100,B*100,Z*100,z*100]};function u(a,f){return(a[0]-f[0])**2+(a[1]-f[1])**2+(a[2]-f[2])**2}return r.rgb.keyword=function(a){const f=t[a];if(f)return f;let m=1/0,c;for(const z of Object.keys(e)){const k=e[z],B=u(a,k);B<m&&(m=B,c=z)}return c},r.keyword.rgb=function(a){return e[a]},r.rgb.xyz=function(a){let f=a[0]/255,m=a[1]/255,c=a[2]/255;f=f>.04045?((f+.055)/1.055)**2.4:f/12.92,m=m>.04045?((m+.055)/1.055)**2.4:m/12.92,c=c>.04045?((c+.055)/1.055)**2.4:c/12.92;const z=f*.4124+m*.3576+c*.1805,k=f*.2126+m*.7152+c*.0722,B=f*.0193+m*.1192+c*.9505;return[z*100,k*100,B*100]},r.rgb.lab=function(a){const f=r.rgb.xyz(a);let m=f[0],c=f[1],z=f[2];m/=95.047,c/=100,z/=108.883,m=m>.008856?m**(1/3):7.787*m+16/116,c=c>.008856?c**(1/3):7.787*c+16/116,z=z>.008856?z**(1/3):7.787*z+16/116;const k=116*c-16,B=500*(m-c),Z=200*(c-z);return[k,B,Z]},r.hsl.rgb=function(a){const f=a[0]/360,m=a[1]/100,c=a[2]/100;let z,k,B;if(m===0)return B=c*255,[B,B,B];c<.5?z=c*(1+m):z=c+m-c*m;const Z=2*c-z,X=[0,0,0];for(let J=0;J<3;J++)k=f+1/3*-(J-1),k<0&&k++,k>1&&k--,6*k<1?B=Z+(z-Z)*6*k:2*k<1?B=z:3*k<2?B=Z+(z-Z)*(2/3-k)*6:B=Z,X[J]=B*255;return X},r.hsl.hsv=function(a){const f=a[0];let m=a[1]/100,c=a[2]/100,z=m;const k=Math.max(c,.01);c*=2,m*=c<=1?c:2-c,z*=k<=1?k:2-k;const B=(c+m)/2,Z=c===0?2*z/(k+z):2*m/(c+m);return[f,Z*100,B*100]},r.hsv.rgb=function(a){const f=a[0]/60,m=a[1]/100;let c=a[2]/100;const z=Math.floor(f)%6,k=f-Math.floor(f),B=255*c*(1-m),Z=255*c*(1-m*k),X=255*c*(1-m*(1-k));switch(c*=255,z){case 0:return[c,X,B];case 1:return[Z,c,B];case 2:return[B,c,X];case 3:return[B,Z,c];case 4:return[X,B,c];case 5:return[c,B,Z]}},r.hsv.hsl=function(a){const f=a[0],m=a[1]/100,c=a[2]/100,z=Math.max(c,.01);let k,B;B=(2-m)*c;const Z=(2-m)*z;return k=m*z,k/=Z<=1?Z:2-Z,k=k||0,B/=2,[f,k*100,B*100]},r.hwb.rgb=function(a){const f=a[0]/360;let m=a[1]/100,c=a[2]/100;const z=m+c;let k;z>1&&(m/=z,c/=z);const B=Math.floor(6*f),Z=1-c;k=6*f-B,(B&1)!==0&&(k=1-k);const X=m+k*(Z-m);let J,ce,ee;switch(B){default:case 6:case 0:J=Z,ce=X,ee=m;break;case 1:J=X,ce=Z,ee=m;break;case 2:J=m,ce=Z,ee=X;break;case 3:J=m,ce=X,ee=Z;break;case 4:J=X,ce=m,ee=Z;break;case 5:J=Z,ce=m,ee=X;break}return[J*255,ce*255,ee*255]},r.cmyk.rgb=function(a){const f=a[0]/100,m=a[1]/100,c=a[2]/100,z=a[3]/100,k=1-Math.min(1,f*(1-z)+z),B=1-Math.min(1,m*(1-z)+z),Z=1-Math.min(1,c*(1-z)+z);return[k*255,B*255,Z*255]},r.xyz.rgb=function(a){const f=a[0]/100,m=a[1]/100,c=a[2]/100;let z,k,B;return z=f*3.2406+m*-1.5372+c*-.4986,k=f*-.9689+m*1.8758+c*.0415,B=f*.0557+m*-.204+c*1.057,z=z>.0031308?1.055*z**(1/2.4)-.055:z*12.92,k=k>.0031308?1.055*k**(1/2.4)-.055:k*12.92,B=B>.0031308?1.055*B**(1/2.4)-.055:B*12.92,z=Math.min(Math.max(0,z),1),k=Math.min(Math.max(0,k),1),B=Math.min(Math.max(0,B),1),[z*255,k*255,B*255]},r.xyz.lab=function(a){let f=a[0],m=a[1],c=a[2];f/=95.047,m/=100,c/=108.883,f=f>.008856?f**(1/3):7.787*f+16/116,m=m>.008856?m**(1/3):7.787*m+16/116,c=c>.008856?c**(1/3):7.787*c+16/116;const z=116*m-16,k=500*(f-m),B=200*(m-c);return[z,k,B]},r.lab.xyz=function(a){const f=a[0],m=a[1],c=a[2];let z,k,B;k=(f+16)/116,z=m/500+k,B=k-c/200;const Z=k**3,X=z**3,J=B**3;return k=Z>.008856?Z:(k-16/116)/7.787,z=X>.008856?X:(z-16/116)/7.787,B=J>.008856?J:(B-16/116)/7.787,z*=95.047,k*=100,B*=108.883,[z,k,B]},r.lab.lch=function(a){const f=a[0],m=a[1],c=a[2];let z;z=Math.atan2(c,m)*360/2/Math.PI,z<0&&(z+=360);const k=Math.sqrt(m*m+c*c);return[f,k,z]},r.lch.lab=function(a){const f=a[0],m=a[1],c=a[2]/360*2*Math.PI,z=m*Math.cos(c),k=m*Math.sin(c);return[f,z,k]},r.rgb.ansi16=function(a,f=null){const[m,c,z]=a;let k=f===null?r.rgb.hsv(a)[2]:f;if(k=Math.round(k/50),k===0)return 30;let B=30+(Math.round(z/255)<<2|Math.round(c/255)<<1|Math.round(m/255));return k===2&&(B+=60),B},r.hsv.ansi16=function(a){return r.rgb.ansi16(r.hsv.rgb(a),a[2])},r.rgb.ansi256=function(a){const f=a[0],m=a[1],c=a[2];return f===m&&m===c?f<8?16:f>248?231:Math.round((f-8)/247*24)+232:16+36*Math.round(f/255*5)+6*Math.round(m/255*5)+Math.round(c/255*5)},r.ansi16.rgb=function(a){let f=a%10;if(f===0||f===7)return a>50&&(f+=3.5),f=f/10.5*255,[f,f,f];const m=(~~(a>50)+1)*.5,c=(f&1)*m*255,z=(f>>1&1)*m*255,k=(f>>2&1)*m*255;return[c,z,k]},r.ansi256.rgb=function(a){if(a>=232){const k=(a-232)*10+8;return[k,k,k]}a-=16;let f;const m=Math.floor(a/36)/5*255,c=Math.floor((f=a%36)/6)/5*255,z=f%6/5*255;return[m,c,z]},r.rgb.hex=function(a){const f=(((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255)).toString(16).toUpperCase();return"000000".substring(f.length)+f},r.hex.rgb=function(a){const f=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!f)return[0,0,0];let m=f[0];f[0].length===3&&(m=m.split("").map(Z=>Z+Z).join(""));const c=parseInt(m,16),z=c>>16&255,k=c>>8&255,B=c&255;return[z,k,B]},r.rgb.hcg=function(a){const f=a[0]/255,m=a[1]/255,c=a[2]/255,z=Math.max(Math.max(f,m),c),k=Math.min(Math.min(f,m),c),B=z-k;let Z,X;return B<1?Z=k/(1-B):Z=0,B<=0?X=0:z===f?X=(m-c)/B%6:z===m?X=2+(c-f)/B:X=4+(f-m)/B,X/=6,X%=1,[X*360,B*100,Z*100]},r.hsl.hcg=function(a){const f=a[1]/100,m=a[2]/100,c=m<.5?2*f*m:2*f*(1-m);let z=0;return c<1&&(z=(m-.5*c)/(1-c)),[a[0],c*100,z*100]},r.hsv.hcg=function(a){const f=a[1]/100,m=a[2]/100,c=f*m;let z=0;return c<1&&(z=(m-c)/(1-c)),[a[0],c*100,z*100]},r.hcg.rgb=function(a){const f=a[0]/360,m=a[1]/100,c=a[2]/100;if(m===0)return[c*255,c*255,c*255];const z=[0,0,0],k=f%1*6,B=k%1,Z=1-B;let X=0;switch(Math.floor(k)){case 0:z[0]=1,z[1]=B,z[2]=0;break;case 1:z[0]=Z,z[1]=1,z[2]=0;break;case 2:z[0]=0,z[1]=1,z[2]=B;break;case 3:z[0]=0,z[1]=Z,z[2]=1;break;case 4:z[0]=B,z[1]=0,z[2]=1;break;default:z[0]=1,z[1]=0,z[2]=Z}return X=(1-m)*c,[(m*z[0]+X)*255,(m*z[1]+X)*255,(m*z[2]+X)*255]},r.hcg.hsv=function(a){const f=a[1]/100,m=a[2]/100,c=f+m*(1-f);let z=0;return c>0&&(z=f/c),[a[0],z*100,c*100]},r.hcg.hsl=function(a){const f=a[1]/100,m=a[2]/100*(1-f)+.5*f;let c=0;return m>0&&m<.5?c=f/(2*m):m>=.5&&m<1&&(c=f/(2*(1-m))),[a[0],c*100,m*100]},r.hcg.hwb=function(a){const f=a[1]/100,m=a[2]/100,c=f+m*(1-f);return[a[0],(c-f)*100,(1-c)*100]},r.hwb.hcg=function(a){const f=a[1]/100,m=1-a[2]/100,c=m-f;let z=0;return c<1&&(z=(m-c)/(1-c)),[a[0],c*100,z*100]},r.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]},r.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]},r.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]},r.gray.hsl=function(a){return[0,0,a[0]]},r.gray.hsv=r.gray.hsl,r.gray.hwb=function(a){return[0,100,a[0]]},r.gray.cmyk=function(a){return[0,0,0,a[0]]},r.gray.lab=function(a){return[a[0],0,0]},r.gray.hex=function(a){const f=Math.round(a[0]/100*255)&255,m=((f<<16)+(f<<8)+f).toString(16).toUpperCase();return"000000".substring(m.length)+m},r.rgb.gray=function(a){return[(a[0]+a[1]+a[2])/3/255*100]},uw}var hw,lC;function c9(){if(lC)return hw;lC=1;const e=I3();function t(){const f={},m=Object.keys(e);for(let c=m.length,z=0;z<c;z++)f[m[z]]={distance:-1,parent:null};return f}function r(f){const m=t(),c=[f];for(m[f].distance=0;c.length;){const z=c.pop(),k=Object.keys(e[z]);for(let B=k.length,Z=0;Z<B;Z++){const X=k[Z],J=m[X];J.distance===-1&&(J.distance=m[z].distance+1,J.parent=z,c.unshift(X))}}return m}function u(f,m){return function(c){return m(f(c))}}function a(f,m){const c=[m[f].parent,f];let z=e[m[f].parent][f],k=m[f].parent;for(;m[k].parent;)c.unshift(m[k].parent),z=u(e[m[k].parent][k],z),k=m[k].parent;return z.conversion=c,z}return hw=function(f){const m=r(f),c={},z=Object.keys(m);for(let k=z.length,B=0;B<k;B++){const Z=z[B];m[Z].parent!==null&&(c[Z]=a(Z,m))}return c},hw}var dw,cC;function u9(){if(cC)return dw;cC=1;const e=I3(),t=c9(),r={},u=Object.keys(e);function a(m){const c=function(...z){const k=z[0];return k==null?k:(k.length>1&&(z=k),m(z))};return"conversion"in m&&(c.conversion=m.conversion),c}function f(m){const c=function(...z){const k=z[0];if(k==null)return k;k.length>1&&(z=k);const B=m(z);if(typeof B=="object")for(let Z=B.length,X=0;X<Z;X++)B[X]=Math.round(B[X]);return B};return"conversion"in m&&(c.conversion=m.conversion),c}return u.forEach(m=>{r[m]={},Object.defineProperty(r[m],"channels",{value:e[m].channels}),Object.defineProperty(r[m],"labels",{value:e[m].labels});const c=t(m);Object.keys(c).forEach(z=>{const k=c[z];r[m][z]=f(k),r[m][z].raw=a(k)})}),dw=r,dw}var h9=u9();const d9=s9(h9);function uC({gl:e,type:t,source:r}){const u=e.createShader(t);if(u===null)throw new Error("Cannot create shader");if(e.shaderSource(u,r),e.compileShader(u),!e.getShaderParameter(u,e.COMPILE_STATUS))throw console.error("Shader compilation error:",e.getShaderInfoLog(u)),e.deleteShader(u),new Error("Cannot compile shader");return u}function f9({gl:e,vertexShaderSource:t,fragmentShaderSource:r}){const u=uC({gl:e,type:e.VERTEX_SHADER,source:t}),a=uC({gl:e,type:e.FRAGMENT_SHADER,source:r}),f=e.createProgram();if(e.attachShader(f,u),e.attachShader(f,a),e.linkProgram(f),!e.getProgramParameter(f,e.LINK_STATUS))throw console.error("Error: ",e.getProgramInfoLog(f)),new Error("Cannot link shader program");return f}function p9(e,t,r){const u=e.getUniformLocation(t,r);if(u===null)throw new Error(`Cannot get uniform location for ${r}`);return u}function k3({gl:e,vertexShaderSource:t,fragmentShaderSource:r,attributesKeys:u,uniformsKeys:a,vertices:f,indices:m}){const c=f9({gl:e,vertexShaderSource:t,fragmentShaderSource:r}),z=u.reduce((J,ce)=>(J[ce]=e.getAttribLocation(c,`a_${ce}`),J),{}),k=a.reduce((J,ce)=>(J[ce]=p9(e,c,`u_${ce}`),J),{}),B=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,B),e.bufferData(e.ARRAY_BUFFER,new Float32Array(f),e.STATIC_DRAW);let Z,X;return m!==void 0&&(Z=e.createBuffer(),X=m.length,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,Z),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(m),e.STATIC_DRAW)),{shaderProgram:c,programInfo:{attributesLocations:z,uniformsLocations:k},positionBuffer:B,indexBuffer:Z,indexBufferLength:X}}function Eb(e){if(!e)return[1,1,1,0];if(e==="transparent")return[1,1,1,0];try{const t=m9(e),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(t);if(r!=null&&r.length){const a=!!r[4];return[...d9.hex.rgb(t).map(f=>f/255),a?parseInt(r[4],16)/255:1]}const u=t.match(/(\d\.\d(\d+)?|\d{3}|\d{2}|\d{1})/gi)??["0","0","0"];if(t.includes("rgb")){const a=t.includes("rgba"),f=[...u.map(m=>parseFloat(m)).map((m,c)=>c<3?m/255:m)];return a||f.push(1),f}}catch{}return console.warn([`[parseColorStringToVec4]: Color ${e} is either not a valid color or its type is not supported, defaulting to black`]),[0,0,0,1]}let O_;function m9(e){return O_=O_??document.createElement("canvas").getContext("2d"),O_?(O_.fillStyle=e,O_.fillStyle):"#000000"}const HT=1,la=HT/2,ca=HT/2,ua=HT/2,g9=[-la,-ca,ua,la,-ca,ua,la,ca,ua,-la,ca,ua],y9=[-la,-ca,-ua,-la,ca,-ua,la,ca,-ua,la,-ca,-ua],_9=[-la,ca,-ua,-la,ca,ua,la,ca,ua,la,ca,-ua],v9=[-la,-ca,-ua,la,-ca,-ua,la,-ca,ua,-la,-ca,ua],b9=[la,-ca,-ua,la,ca,-ua,la,ca,ua,la,-ca,ua],x9=[-la,-ca,-ua,-la,-ca,ua,-la,ca,ua,-la,ca,-ua],w9=[...g9,...y9,..._9,...v9,...b9,...x9],S9=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],T9=`attribute vec3 a_vertexPosition;
varying vec3 vTextureCoord;

uniform mat4 u_projectionMatrix;
uniform mat4 u_modelViewMatrix;
  
void main(void) {
  vTextureCoord = vec3(-a_vertexPosition.x, a_vertexPosition.y, a_vertexPosition.z);
  gl_Position = u_projectionMatrix * u_modelViewMatrix * vec4(a_vertexPosition, 1.0);
}
`,hC=`precision mediump float;

varying vec3 vTextureCoord;

%USE_TEXTURE_MACRO_MARKER%

# ifdef USE_TEXTURE
uniform samplerCube u_cubeSampler;
uniform float u_fadeOpacity;
# endif

uniform vec4 u_bgColor;

void main(void) {
  #ifdef USE_TEXTURE
  vec4 texColor = textureCube(u_cubeSampler, vTextureCoord);

    gl_FragColor = mix(
      u_bgColor,
      texColor,
      min(texColor.a, u_fadeOpacity)
    );

    gl_FragColor.a = max(gl_FragColor.a, u_fadeOpacity);

  #else
  gl_FragColor = u_bgColor;
  #endif
}
`,np={stars:{color:"hsl(233,100%,92%)",preset:"stars"},space:{color:"hsl(210, 100%, 4%)",preset:"space"},milkyway:{color:"hsl(233,100%,92%)",preset:"milkyway"},"milkyway-subtle":{color:"hsl(233,100%,92%)",preset:"milkyway-subtle"},"milkyway-bright":{color:"hsl(233,100%,92%)",preset:"milkyway-bright"},"milkyway-colored":{color:"black",preset:"milkyway-colored"}};var vm=(e=>(e.POSITIVE_X="pX",e.NEGATIVE_X="nX",e.POSITIVE_Y="pY",e.NEGATIVE_Y="nY",e.POSITIVE_Z="pZ",e.NEGATIVE_Z="nZ",e))(vm||{});const ey=new Map;function E9(e){const t=ey.get(e);t&&(ey.delete(e),e.deleteTexture(t))}const dC=new Map;let fC;function A9({gl:e,faces:t,onReady:r,forceRefresh:u}){if(ey.get(e)&&!u&&fC===JSON.stringify(t)){r(ey.get(e),dC.get(e));return}fC=JSON.stringify(t);const a=ey.get(e)??e.createTexture();if(e.bindTexture(e.TEXTURE_CUBE_MAP,a),!t){console.warn("[CubemapLayer][loadCubemapTexture]: Faces are null");return}const f=Object.keys(t).length;if(f!==6){console.warn(`[CubemapLayer][loadCubemapTexture]: Faces should contain exactly 6 images, but found ${f}`);return}const m=Object.entries(t).map(([c,z])=>new Promise((k,B)=>{const Z=c;if(z===void 0){B(new Error(`[CubemapLayer][loadCubemapTexture]: Face ${c} is undefined`));return}const X=new Image;X.crossOrigin="anonymous";const J=()=>{k({image:X,key:Z})};X.src=z,X.complete&&X.naturalWidth>0?J():X.onload=J,X.onerror=()=>{B(new Error(`[CubemapLayer][loadCubemapTexture]: Error loading image ${z}`))}}));Promise.all(m).then(c=>{for(let k=0;k<c.length;k++){const B=e.RGBA,Z=e.RGBA,X=e.UNSIGNED_BYTE,{image:J,key:ce}=c[k]??{};if(!J||!ce){console.warn("[CubemapLayer][loadCubemapTexture]: Image or key is null");continue}const ee=C9(e,ce);e.bindTexture(e.TEXTURE_CUBE_MAP,a),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(ee,0,B,Z,X,J)}e.bindTexture(e.TEXTURE_CUBE_MAP,a),e.generateMipmap(e.TEXTURE_CUBE_MAP),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR);const z=c.map(k=>k.image);r(a,z),dC.set(e,z),ey.set(e,a)}).catch(c=>{console.error("[CubemapLayer][loadCubemapTexture]: Error loading cubemap texture",c)})}function C9(e,t){if(t===vm.POSITIVE_X)return e.TEXTURE_CUBE_MAP_POSITIVE_X;if(t===vm.NEGATIVE_X)return e.TEXTURE_CUBE_MAP_NEGATIVE_X;if(t===vm.POSITIVE_Y)return e.TEXTURE_CUBE_MAP_POSITIVE_Y;if(t===vm.NEGATIVE_Y)return e.TEXTURE_CUBE_MAP_NEGATIVE_Y;if(t===vm.POSITIVE_Z)return e.TEXTURE_CUBE_MAP_POSITIVE_Z;if(t===vm.NEGATIVE_Z)return e.TEXTURE_CUBE_MAP_NEGATIVE_Z;throw new Error(`[CubemapLayer][loadCubemapTexture]: Invalid key ${t}`)}function M9(e,t,r){return[Qf(e[0],t[0],r),Qf(e[1],t[1],r),Qf(e[2],t[2],r),Qf(e[3],t[3],r)]}function Qf(e,t,r){return e+(t-e)*r}function Hb(e){if(!e)return{};const t=Object.keys(e).sort().map(r=>[r,e[r]]);return Object.fromEntries(t)}const Hg="https://api.maptiler.com/resources/space",z9=["vertexPosition"],I9=["projectionMatrix","modelViewMatrix","cubeSampler","bgColor","fadeOpacity"],pC="%USE_TEXTURE_MACRO_MARKER%",k9="#define USE_TEXTURE",mC=np.stars;function P9(e,t){if(!Jw(e))return{color:"transparent"};if(e===!0)return t;const r={...e};if(e.faces||e.path)return delete r.preset,r;const u=e.preset;if(u!==void 0&&!(u in np))throw new Error(`[CubemapLayer]: Invalid preset "${u}". Available presets: ${Object.keys(np).join(", ")}`);return{...r,color:r.color??np[u].color??"hsl(233,100%,92%)"}}class ob{constructor(t){rn(this,"id","Cubemap Layer"),rn(this,"type","custom"),rn(this,"renderingMode","3d"),rn(this,"map"),rn(this,"faces"),rn(this,"useCubemapTexture",!0),rn(this,"currentFadeOpacity",0),rn(this,"cubeMapNeedsUpdate",!1),rn(this,"bgColor"),rn(this,"previousBgColor",[0,0,0,0]),rn(this,"targetBgColor",[0,0,0,0]),rn(this,"transitionDelta",0),rn(this,"gl"),rn(this,"cubemap"),rn(this,"texture"),rn(this,"currentFacesDefinitionKey",""),rn(this,"options"),rn(this,"animationActive",!0),rn(this,"imageIsAnimating",!1),rn(this,"imageFadeInDelta",0);const r=Jw(t);if(r.length>0)throw new Error(`[CubemapLayer]: Invalid cubemap specification:
- ${r.join(`
 - `)}`);const u=P9(t,mC);this.options=u,this.currentFacesDefinitionKey=JSON.stringify(u.faces??u.preset??u.path),this.bgColor=[0,0,0,0],this.targetBgColor=Eb(u.color),this.faces=gC(u),this.useCubemapTexture=this.faces!==null}updateCubemap({facesNeedUpdate:t}={facesNeedUpdate:!0}){this.useCubemapTexture=this.faces!==null;const r=I9.filter(u=>u==="cubeSampler"||u==="fadeOpacity"?this.useCubemapTexture:!0);this.cubemap=k3({gl:this.gl,vertexShaderSource:T9,fragmentShaderSource:this.useCubemapTexture?hC.replace(pC,k9):hC.replace(pC,""),attributesKeys:z9,uniformsKeys:r,vertices:w9,indices:S9}),this.cubeMapNeedsUpdate=t,this.useCubemapTexture&&this.updateTexture(this.gl,this.faces),this.animateColorChange()}onAdd(t,r){this.map=t,this.gl=r,this.updateCubemap()}onRemove(t,r){this.cubemap&&(this.texture&&(E9(r),this.texture=void 0),r.deleteProgram(this.cubemap.shaderProgram),r.deleteBuffer(this.cubemap.positionBuffer))}updateTexture(t,r){if(this.cubeMapNeedsUpdate===!0&&!this.imageIsAnimating){if(this.cubeMapNeedsUpdate=!1,!this.useCubemapTexture)return;A9({gl:t,faces:r,onReady:u=>{this.texture=u,this.animateIn()}})}}prerender(t,r){this.faces&&this.updateTexture(this.gl,this.faces)}animateColorChange(){const t=()=>{this.transitionDelta<1&&(requestAnimationFrame(t),this.bgColor=M9(this.previousBgColor,this.targetBgColor,this.transitionDelta),this.transitionDelta+=.075,this.map.triggerRepaint())};requestAnimationFrame(t)}async animateIn(){if(!this.imageIsAnimating){if(!this.animationActive){this.currentFadeOpacity=1,this.imageFadeInDelta=1,this.map.triggerRepaint();return}return new Promise(t=>{this.imageIsAnimating=!0;const r=()=>{if(this.imageFadeInDelta=Math.min(this.imageFadeInDelta+.05,1),this.currentFadeOpacity=Qf(0,1,this.imageFadeInDelta),this.map.triggerRepaint(),this.imageFadeInDelta<1){requestAnimationFrame(r);return}this.imageIsAnimating=!1,this.imageFadeInDelta=0,t()};requestAnimationFrame(r)})}}async animateOut(){if(!(this.imageIsAnimating||!this.animationActive))return new Promise(t=>{const r=()=>{if(this.imageFadeInDelta=Math.min(this.imageFadeInDelta+.05,1),this.currentFadeOpacity=Qf(1,0,this.imageFadeInDelta),this.map.triggerRepaint(),this.imageFadeInDelta>=1){this.imageIsAnimating=!1,this.imageFadeInDelta=0,t();return}requestAnimationFrame(r)};requestAnimationFrame(r)})}setAnimationActive(t){this.animationActive=t}render(t,r){if(!this.map.isGlobeProjection())return;if(this.map===void 0)throw new Error("[CubemapLayer]: Map is undefined");if(this.cubemap===void 0)throw new Error("[CubemapLayer]: Cubemap is undefined");this.texture,t.disable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.DST_ALPHA),t.useProgram(this.cubemap.shaderProgram),t.bindBuffer(t.ARRAY_BUFFER,this.cubemap.positionBuffer),t.vertexAttribPointer(this.cubemap.programInfo.attributesLocations.vertexPosition,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(this.cubemap.programInfo.attributesLocations.vertexPosition);const u=.1,a=1e4,f=t.canvas,m=f.clientWidth/f.clientHeight,c=this.map.transform,z=c.fov*(Math.PI/180),k=X_();a9(k,z,m,u,a),iC(k,k,c.rollInRadians),nC(k,k,-c.pitchInRadians),iC(k,k,c.bearingInRadians);const B=c.center.lat*Math.PI/180,Z=c.center.lng*Math.PI/180;nC(k,k,B),i9(k,k,-Z),t.uniformMatrix4fv(this.cubemap.programInfo.uniformsLocations.projectionMatrix,!1,k);const X=X_();if(t.uniformMatrix4fv(this.cubemap.programInfo.uniformsLocations.modelViewMatrix,!1,X),t.uniform4fv(this.cubemap.programInfo.uniformsLocations.bgColor,new Float32Array(this.bgColor)),t.uniform1f(this.cubemap.programInfo.uniformsLocations.fadeOpacity,this.currentFadeOpacity),this.useCubemapTexture&&this.texture&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture),t.uniform1i(this.cubemap.programInfo.uniformsLocations.cubeSampler,0)),this.cubemap.indexBuffer===void 0)throw new Error("Index buffer is undefined");if(this.cubemap.indexBufferLength===void 0)throw new Error("Index buffer length is undefined");t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.cubemap.indexBuffer),t.drawElements(t.TRIANGLES,this.cubemap.indexBufferLength,t.UNSIGNED_SHORT,0)}setBgColor(t){this.targetBgColor=t,this.previousBgColor=this.bgColor,this.transitionDelta=0}getConfig(){return this.options}shouldUpdate(t){const r=this.getConfig();if(t===void 0&&r)return!0;const u=typeof t=="boolean"?t:Hb(t),a=Hb(r);return JSON.stringify(u)!==JSON.stringify(a)}async setCubemapFaces(t){if(await this.animateOut(),!t.faces&&!t.preset&&!t.path){this.faces=null,this.useCubemapTexture=!1,this.currentFacesDefinitionKey="empty",await this.animateIn();return}this.faces=gC(t),this.currentFacesDefinitionKey=JSON.stringify(t.faces??t.preset??t.path)}async setCubemap(t){const r=Jw(t);if(r.length>0)throw new Error(`[CubemapLayer]: Invalid cubemap specification:
- ${r.join(`
 - `)}`);const u=typeof t=="boolean"?mC:t;this.options=u;const a=JSON.stringify(u.faces??u.preset??u.path),f=this.currentFacesDefinitionKey!==a;f&&(await this.setCubemapFaces(u),this.cubeMapNeedsUpdate=!0);const m=Eb(u.color);if(u.color&&this.targetBgColor.toString()!==m.toString())this.setBgColor(m);else if(!u.color&&u.preset&&u.preset in np){const c=np[u.preset];this.setBgColor(Eb(c.color))}this.updateCubemap({facesNeedUpdate:f})}show(){this.map.setLayoutProperty(this.id,"visibility","visible")}hide(){this.map.setLayoutProperty(this.id,"visibility","none")}}function Jw(e){const t=[];if(typeof e>"u")return t.push("Space specification is undefined."),t;if(typeof e=="boolean")return[];if(Object.keys(e).length===0)return t.push("Space specification is an empty object."),t;const r=["color","preset","path","faces"],u=Object.keys(e).filter(f=>!r.includes(f));if(u.length>0)return t.push(`Space specification contains unsupported properties: ${u.map(f=>`\`${f}\``).join(", ")}. Supported properties: \`color\`, \`preset\`, \`path\`, \`faces\`.`),t;if(!e.path&&!e.preset&&!e.faces&&!e.color)return t.push("Space specification contains neither a path, preset, faces, nor color."),t;e.preset&&!(e.preset in np)&&t.push(`Space preset "${e.preset}" is not a valid preset. Available presets: ${Object.keys(np).join(", ")}`);const a=Object.keys(e).filter(f=>f!=="color").filter(f=>f==="preset"||f==="path"||f==="faces");return a.length>1&&t.push(`Space specification contains multiple properties for cubemap definition: ${a.join(", ")}. Only one of \`path\`, \`preset\`, or \`faces\` should be defined.`),e.faces&&(!e.faces.pX||!e.faces.nX||!e.faces.pY||!e.faces.nY||!e.faces.pZ||!e.faces.nZ)&&t.push("Space specification contains faces but one or more of the faces are undefined."),e.faces&&Object.values(e.faces).every(f=>typeof f!="string")&&t.push("Space specification contains faces but one or more of the faces are not strings."),t}function gC(e){if(e.faces)return e.faces;if(e.preset)return{pX:`${Hg}/${e.preset}/px.webp`,nX:`${Hg}/${e.preset}/nx.webp`,pY:`${Hg}/${e.preset}/py.webp`,nY:`${Hg}/${e.preset}/ny.webp`,pZ:`${Hg}/${e.preset}/pz.webp`,nZ:`${Hg}/${e.preset}/nz.webp`};if(e.path){const t=e.path.baseUrl,r=e.path.format??"png";return{pX:`${t}/px.${r}`,nX:`${t}/nx.${r}`,pY:`${t}/py.${r}`,nY:`${t}/ny.${r}`,pZ:`${t}/pz.${r}`,nZ:`${t}/nz.${r}`}}return null}const D9=`attribute vec3 a_position;

uniform mat4 u_matrix;
uniform mat4 u_rotationMatrix;

uniform float u_scale;

varying vec2 v_pos;
varying float v_scale;

void main() {
  v_scale = u_scale;
  v_pos = a_position.xy * u_scale;
  gl_Position = u_matrix * u_rotationMatrix * vec4(a_position, 1.0);
}
`,L9=`precision mediump float;
varying vec2 v_pos;
      
uniform int u_stopsNumber;
uniform float u_stops[100];
uniform vec4 u_colors[100];
uniform float u_maxDistance;

varying float v_scale;

const float EPSILON = 0.000001;

vec2 center = vec2(0.0, 0.0);
void main() {
  float rawDistance = distance(center, v_pos);
  float distanceFromGlobeEdge = rawDistance - 1.0;

    vec4 color = u_colors[0];

  // if we're further than the max distance, we should not render anything.
  // This is to always render a circle, otherwise we end up rendering
  // to the corners of the plane.
  if (distance(center, v_pos) > u_maxDistance * v_scale) {
    discard;
  }

  for (int i = 1; i < 100; i++) {
    // if we're past the last stop
    // we should fill to the end with the last stop color
    if (i >= u_stopsNumber) {
      color = u_colors[i - 1];
      break;
    }

    float scaledStopPosition = u_stops[i] * pow(v_scale, 1.6);
    float lastStopValue = u_stops[i - 1];
    float thisStopValue = u_stops[i];

    // this is to avoid blending errors when the stops are the same
    // eg when you would want a sharp edge between two stops.
    // \`numbersAreEqual\` will be 1.0 if the numbers are equal, 0.0 if they are not.
    // We then subtract EPSILON from the last stop making the stop value _almost_ equal
    // to the next stop but not enough to cause blending issues.
    // It's more efficient to do this than an if / else statement.
    float numbersAreEqual = 1.0 - step(EPSILON, abs(lastStopValue - thisStopValue));
    lastStopValue = lastStopValue - numbersAreEqual * EPSILON;

    float lastScaledStopPosition = lastStopValue * pow(v_scale, 1.6);

    if (distanceFromGlobeEdge <= scaledStopPosition) {
      float stopBlendFactor = (distanceFromGlobeEdge - lastScaledStopPosition) / (scaledStopPosition - lastScaledStopPosition);
      color = mix(u_colors[i - 1], u_colors[i], stopBlendFactor);
      break;
    }
  }
  
  // gl_FragColor = color;
  gl_FragColor = vec4(color.rgb * color.a, color.a);
}
`,Jd=2,R9=["position"],O9=["matrix","rotationMatrix","stopsNumber","stops","colors","maxDistance","scale"],N9=[-Jd,-Jd,0,Jd,-Jd,0,-Jd,Jd,0,Jd,Jd,0],sb=[[0,"rgba(176, 208, 240, 1)"],[.1,"rgba(98, 168, 229, 0.3)"],[.2,"rgba(98, 168, 229, 0.0)"]],lb=.9,yC=.06;class cb{constructor(t){if(rn(this,"id","Halo Layer"),rn(this,"type","custom"),rn(this,"renderingMode","3d"),rn(this,"gradient"),rn(this,"scale",0),rn(this,"animationDelta",0),rn(this,"map"),rn(this,"plane"),rn(this,"animationActive",!0),typeof t=="boolean"){this.gradient={scale:lb,stops:sb};return}const r=_C(t);if(r.length>0)throw new Error(`[RadialGradientLayer]: Invalid Halo specification:
 - ${r.join(`
 - `)}
    `);this.gradient={scale:t.scale??lb,stops:t.stops??sb}}onAdd(t,r){this.map=t,this.plane=k3({gl:r,vertexShaderSource:D9,fragmentShaderSource:L9,attributesKeys:R9,uniformsKeys:O9,vertices:N9}),this.animateIn()}getConfig(){return this.gradient}shouldUpdate(t){const r=this.getConfig();if(t===void 0&&r)return!0;const u=typeof t=="boolean"?t:Hb(t),a=Hb(r);return JSON.stringify(u)!==JSON.stringify(a)}async animateIn(){if(!this.animationActive){this.scale=this.gradient.scale,this.animationDelta=1,this.map.triggerRepaint();return}return new Promise(t=>{this.animationDelta=0;const r=()=>{if(this.animationDelta<=1){this.scale=Qf(0,this.gradient.scale,this.animationDelta),this.animationDelta+=yC,this.map.triggerRepaint(),requestAnimationFrame(r);return}t()};requestAnimationFrame(r)})}async animateOut(){if(this.animationActive)return this.animationDelta=0,new Promise(t=>{const r=()=>{if(this.animationDelta<1){this.scale=Qf(this.gradient.scale,0,this.animationDelta),this.animationDelta+=yC,this.map.triggerRepaint(),requestAnimationFrame(r);return}t()};r()})}onRemove(t,r){this.plane!==void 0&&(r.deleteProgram(this.plane.shaderProgram),r.deleteBuffer(this.plane.positionBuffer))}prerender(t,r){}render(t,r){if(this.map===void 0)throw new Error("[RadialGradientLayer]: Map is undefined");if(!this.map.isGlobeProjection())return;if(this.plane===void 0)throw new Error("[RadialGradientLayer]: Plane is undefined");t.disable(t.DEPTH_TEST),t.enable(t.BLEND),t.useProgram(this.plane.shaderProgram),t.bindBuffer(t.ARRAY_BUFFER,this.plane.positionBuffer);const u=this.plane.programInfo.attributesLocations.position;t.enableVertexAttribArray(u),t.vertexAttribPointer(u,3,t.FLOAT,!1,0,0);const a=X_(),f=this.scale;n9(a,a,[f,f,f]);const m=X_();t9(m,r.defaultProjectionData.mainMatrix,a);const c=this.plane.programInfo.uniformsLocations.matrix;t.uniformMatrix4fv(c,!1,m);const z=X_(),k=this.map.transform.cameraPosition,B=cw(Tb(),k),Z=o9(0,1,0),X=Tb();rC(X,Z,B),cw(X,X);const J=Tb();rC(J,B,X),cw(J,J),e9(z,X[0],X[1],X[2],0,J[0],J[1],J[2],0,B[0],B[1],B[2],0,0,0,0,1);const ce=this.plane.programInfo.uniformsLocations.rotationMatrix;t.uniformMatrix4fv(ce,!1,z);const ee=this.gradient.stops.length,ae=[],Me=[];for(let Ae=0;Ae<=ee;Ae++)if(Ae<ee){ae[Ae]=this.gradient.stops[Ae][0];const we=Eb(this.gradient.stops[Ae][1]);Me.push(...we)}t.uniform1i(this.plane.programInfo.uniformsLocations.stopsNumber,ee),t.uniform1fv(this.plane.programInfo.uniformsLocations.stops,new Float32Array(ae)),t.uniform4fv(this.plane.programInfo.uniformsLocations.colors,new Float32Array(Me)),t.uniform1f(this.plane.programInfo.uniformsLocations.maxDistance,Jd),t.uniform1f(this.plane.programInfo.uniformsLocations.scale,f),t.drawArrays(t.TRIANGLE_STRIP,0,4)}async setGradient(t){if(t===!1){await this.animateOut();return}await this.animateOut();const r=_C(t);if(r.length>0)throw new Error(`[RadialGradientLayer]: Invalid Halo specification:
 - ${r.join(`
 - `)}
    `);t===!0?(this.gradient.scale=lb,this.gradient.stops=sb):(this.gradient.scale=t.scale??lb,this.gradient.stops=t.stops??sb),await this.animateIn()}setAnimationActive(t){this.animationActive=t}show(){this.map.setLayoutProperty(this.id,"visibility","visible")}hide(){this.map.setLayoutProperty(this.id,"visibility","none")}}const $9=["scale","stops"];function _C(e){var t;const r=[];if(typeof e=="boolean")return[];try{const u=Object.keys(e).filter(a=>!$9.includes(a));u.length>0&&r.push(`Properties ${u.map(a=>`\`${a}\``).join(", ")} are not supported.`)}catch{r.push("Halo specification is not an object.")}return typeof e.scale!="number"&&r.push("Halo `scale` property is not a number."),!e.stops||e.stops.length===0||!Array.isArray(e.stops)?(r.push("Halo `stops` property is not an array."),r):((t=e.stops)!=null&&t.some(u=>typeof u[0]!="number"||typeof u[1]!="string")&&r.push("Halo `stops` property is not an array of [number, string]"),r)}function j9(){const e="color: #3A1888; background: white; padding: 5px 0; font-weight: bold;",t="color: #FBC935; background: white; padding: 5px; font-weight: bold;",r="color: #F1175D; background: white; padding: 5px 0; font-weight: bold;";console.info(`%c%c%c %cMapTiler SDK JS v${H3()} %c%c%c`,t+"padding-right: 0;",e,r,"color: #333; background: white; padding: 5px 0; font-weight: bold;",r,e,t+"padding-left: 0;")}const B9={POINT:"POINT",COUNTRY:"COUNTRY"};let P3=class D3 extends mn.Map{constructor(t){t.logSDKVersion!==!1&&j9(),wj(t.container),t.apiKey&&(Oa.apiKey=t.apiKey);const{style:r,requiresUrlMonitoring:u,isFallback:a}=QA(t.style);a&&console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style."),Oa.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");const f=location.hash;let m={compact:!1};t.customAttribution?m.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(m={...m,...t.attributionControl});const c={...t,style:r,maplibreLogo:!1,transformRequest:kA(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:m};delete c.style,super(c),rn(this,"telemetry"),rn(this,"space"),rn(this,"halo"),rn(this,"options"),rn(this,"isTerrainEnabled",!1),rn(this,"terrainExaggeration",1),rn(this,"primaryLanguage"),rn(this,"terrainGrowing",!1),rn(this,"terrainFlattening",!1),rn(this,"minimap"),rn(this,"forceLanguageUpdate"),rn(this,"languageAlwaysBeenStyle"),rn(this,"isReady",!1),rn(this,"terrainAnimationDuration",1e3),rn(this,"monitoredStyleUrls"),rn(this,"styleInProcess",!1),rn(this,"curentProjection"),rn(this,"originalLabelStyle",new window.Map),rn(this,"isStyleLocalized",!1),rn(this,"languageIsUpdated",!1),rn(this,"spaceboxLoadingState",{styleLoadCallbackSet:!1,styleLoadedCallbackFired:!1}),this.options=t,this.setStyle(r),u&&this.monitorStyleUrl(r);const z=()=>{let J="The distant style could not be loaded.";this.getStyle()?J+=" Leaving the style as is.":(this.setStyle(G_.STREETS),J+=`Loading default MapTiler Cloud style "${G_.STREETS.getDefaultVariant().getId()}" as a fallback.`),console.warn(J)};if(this.on("style.load",()=>{this.styleInProcess=!1,(typeof t.rtlTextPlugin=="string"||typeof t.rtlTextPlugin>"u")&&_j(t.rtlTextPlugin)}),this.on("error",J=>{if(J.error instanceof mn.AJAXError){const ce=J.error.url,ee=new URL(ce);ee.search="";const ae=ee.href;this.monitoredStyleUrls&&this.monitoredStyleUrls.has(ae)&&(this.monitoredStyleUrls.delete(ae),z());return}if(this.styleInProcess){z();return}}),Oa.caching&&!Uw&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),Oa.caching&&Uw&&yj(),typeof t.language>"u")this.primaryLanguage=Oa.primaryLanguage;else{const J=wA(t.language,Ui);this.primaryLanguage=J??Oa.primaryLanguage}this.forceLanguageUpdate=!(this.primaryLanguage===Ui.STYLE||this.primaryLanguage===Ui.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===Ui.STYLE,this.terrainExaggeration=t.terrainExaggeration??this.terrainExaggeration,this.curentProjection=t.projection,this.on("style.load",J=>{this.curentProjection==="mercator"?this.setProjection({type:"mercator"}):this.curentProjection==="globe"&&this.setProjection({type:"globe"})}),this.once("styledata",async()=>{if(!t.geolocate||t.center||t.hash&&f)return;try{if(t.geolocate===B9.COUNTRY){await this.fitToIpBounds();return}}catch(ce){console.warn(ce.message)}let J;try{await this.centerOnIpPoint(t.zoom),J=this.getCameraHash()}catch(ce){console.warn(ce.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(ce=>{J===this.getCameraHash()&&(this.terrain?this.easeTo({center:[ce.coords.longitude,ce.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[ce.coords.longitude,ce.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let J={logo:null};try{const ce=Object.keys(this.style.tileManagers).map(ae=>this.getSource(ae)).filter(ae=>ae&&"url"in ae&&typeof ae.url=="string"&&ae.url.includes("tiles.json")),ee=new URL(ce[0].url);ee.searchParams.has("key")||ee.searchParams.append("key",Oa.apiKey),J=await(await fetch(ee.href)).json()}catch{}if(t.customControls){const ce="[data-maptiler-control-group]",ee="[data-maptiler-control]",ae=Se=>{let Fe=Se.dataset.maptilerControl;return(Fe==="true"||Fe==="")&&(Fe=void 0),Fe},Me=Se=>Se.dataset.maptilerPosition;let Ae=[...this._container.ownerDocument.querySelectorAll(ce)],we=[...this._container.ownerDocument.querySelectorAll(ee)].filter(Se=>Se.closest(ce)===null);if(typeof t.customControls=="string"){const Se=t.customControls;Ae=Ae.filter(Fe=>Fe.matches(Se)||Fe.closest(Se)!==null),we=we.filter(Fe=>Fe.matches(Se)||Fe.closest(Se)!==null)}for(const Se of Ae){const Fe=new Kw(Se);this.addControl(Fe,Me(Se));for(const Ue of Se.querySelectorAll(ee))Fe.configureGroupItem(Ue,ae(Ue))}for(const Se of we)this.addControl(new Kw(Se,ae(Se)),Me(Se));const xe=()=>{const{lng:Se,lat:Fe}=this.getCenter();this._container.style.setProperty("--maptiler-center-lng",String(Se)),this._container.style.setProperty("--maptiler-center-lat",String(Fe)),this._container.style.setProperty("--maptiler-zoom",String(this.getZoom())),this._container.style.setProperty("--maptiler-bearing",String(this.getBearing())),this._container.style.setProperty("--maptiler-pitch",String(this.getPitch())),this._container.style.setProperty("--maptiler-roll",String(this.getRoll())),this._container.style.setProperty("--maptiler-is-globe-projection",String(this.isGlobeProjection())),this._container.style.setProperty("--maptiler-has-terrain",String(this.hasTerrain()))};xe(),this.on("render",xe)}if(t.forceNoAttributionControl!==!0)if("logo"in J&&J.logo){const ce=J.logo;this.addControl(new CA({logoURL:ce}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new CA,t.logoPosition);if(t.scaleControl){const ce=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,ee=new cj({unit:Oa.unit});this.addControl(ee,ce),Oa.on("unit",ae=>{ee.setUnit(ae)})}if(t.navigationControl!==!1){const ce=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new WF,ce)}if(t.geolocateControl!==!1){const ce=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new YF({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),ce)}if(t.terrainControl){const ce=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new HF,ce)}if(t.projectionControl){const ce=t.projectionControl===!0||t.projectionControl===void 0?"top-right":t.projectionControl;this.addControl(new JF,ce)}if(t.fullscreenControl){const ce=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new uj({}),ce)}this.isReady=!0,this.fire("ready",{target:this})});let k=!1,B=!1,Z;this.once("ready",()=>{k=!0,B&&this.fire("loadWithTerrain",Z)}),this.once("style.load",()=>{const{minimap:J}=t;if(typeof J=="object"){const{zoom:ce,center:ee,style:ae,language:Me,apiKey:Ae,maptilerLogo:we,canvasContextAttributes:xe,refreshExpiredTiles:Se,maxBounds:Fe,scrollZoom:Ue,minZoom:it,maxZoom:Rt,boxZoom:Pt,locale:$t,fadeDuration:Zt,crossSourceCollisions:cn,clickTolerance:ln,bounds:xn,fitBoundsOptions:Ge,pixelRatio:mt,validateStyle:qe}=t;this.minimap=new lw(J,{zoom:ce,center:ee,style:ae,language:Me,apiKey:Ae,container:"null",maptilerLogo:we,canvasContextAttributes:xe,refreshExpiredTiles:Se,maxBounds:Fe,scrollZoom:Ue,minZoom:it,maxZoom:Rt,boxZoom:Pt,locale:$t,fadeDuration:Zt,crossSourceCollisions:cn,clickTolerance:ln,bounds:xn,fitBoundsOptions:Ge,pixelRatio:mt,validateStyle:qe}),this.addControl(this.minimap,J.position??"bottom-left")}else J===!0?(this.minimap=new lw({},t),this.addControl(this.minimap,"bottom-left")):J!==void 0&&J!==!1&&(this.minimap=new lw({},t),this.addControl(this.minimap,J))});const X=J=>{J.terrain&&(B=!0,Z={type:"loadWithTerrain",target:this,terrain:J.terrain},this.off("terrain",X),k&&this.fire("loadWithTerrain",Z))};this.on("terrain",X),t.terrain&&this.enableTerrain(t.terrainExaggeration??this.terrainExaggeration),this.once("load",()=>{this.getCanvas().addEventListener("webglcontextlost",ce=>{if(this._removed===!0){console.warn("[webglcontextlost]","WebGL context lost after map removal. This is harmless.");return}console.warn("[webglcontextlost]","Unexpected loss of WebGL context!"),this.fire("webglContextLost",ce)});const J=this.getLayersOrder()[0];t.space&&this.initSpace({options:t,before:J}),t.halo&&this.initHalo({options:t,before:J})}),this.telemetry=new QF(this)}getSpace(){return this.space}setSpace(t,r=!0){if(r&&(this.options.space=t),t===!1){this.space=void 0;return}if(this.space){this.space.setCubemap(t),this.getLayer(this.space.id)||this.addLayer(this.space,this.getLayersOrder()[0]);return}this.space=new ob(t),this.once("load",()=>{const u=this.getLayersOrder()[0];this.space&&this.addLayer(this.space,u)})}enableSpaceAnimations(){this.setSpaceAnimationActive(!0)}disableSpaceAnimations(){this.setSpaceAnimationActive(!1)}enableHaloAnimations(){this.setHaloAnimationActive(!0)}disableHaloAnimations(){this.setHaloAnimationActive(!1)}setHaloAnimationActive(t){this.halo?this.halo.setAnimationActive(t):this.once("load",()=>{var r;(r=this.halo)==null||r.setAnimationActive(t)})}setSpaceAnimationActive(t){this.space?this.space.setAnimationActive(t):this.once("load",()=>{var r;(r=this.space)==null||r.setAnimationActive(t)})}setSpaceFromStyle({style:t}){var r,u,a;if(this.options.space!==!0&&typeof this.options.space<"u"){this.setSpace(this.options.space);return}const f=(u=(r=t.metadata)==null?void 0:r.maptiler)==null?void 0:u.space;if(!this.options.space&&!f){this.setSpace(!1,!1);return}if(JSON.stringify((a=this.space)==null?void 0:a.getConfig())===JSON.stringify(f)){if(this.space&&!this.getLayer(this.space.id)){const m=this.getLayersOrder()[0];this.addLayer(this.space,m)}return}if(this.options.space===!0){this.setSpace(f??!0);return}if(this.space&&this.isGlobeProjection()){if(!this.getLayer(this.space.id)){const m=this.getLayersOrder()[0];this.addLayer(this.space,m)}this.space.setCubemap(f)}}setHaloFromStyle({style:t}){var r,u,a;if(this.options.halo===!1)return;const f=(r=t.metadata)==null?void 0:r.maptiler;if(JSON.stringify((u=this.halo)==null?void 0:u.getConfig())===JSON.stringify(f?.halo)){if(this.halo&&!this.getLayer(this.halo.id)){const m=this.getLayersOrder().indexOf(((a=this.space)==null?void 0:a.id)??"")+1,c=this.getLayersOrder()[m];this.addLayer(this.halo,c)}return}if(!(f!=null&&f.halo)&&!this.options.halo){this.setHalo({stops:[[0,"transparent"],[.01,"transparent"]],scale:1});return}(()=>{var m;if(this.halo){if(!this.getLayer(this.halo.id)){const z=this.getLayersOrder().indexOf(((m=this.space)==null?void 0:m.id)??"")+1,k=this.getLayersOrder()[z];this.addLayer(this.halo,k)}const c=f?.halo??this.options.halo;c&&this.halo.setGradient(c)}})()}initSpace({options:t=this.options,before:r,spec:u}){if(this.space){this.getLayer(this.space.id)||this.addLayer(this.space,r);return}if(t.space===!1)return;if(t.space&&t.space!==!0){this.space=new ob(t.space),this.addLayer(this.space,r);return}const a=u;a&&(this.space=new ob(a),this.addLayer(this.space,r)),this.options.space===!0&&(this.space=new ob(!0),this.addLayer(this.space,r))}initHalo({options:t=this.options,before:r,spec:u}){if(this.halo&&this.getLayer(this.halo.id)||t.halo===!1)return;const a=u;if(t.halo&&t.halo!==!0){this.halo=new cb(t.halo),this.addLayer(this.halo,r);return}if(a&&(this.halo=new cb(a),this.addLayer(this.halo,r)),this.options.halo===!0){this.halo=new cb(!0),this.addLayer(this.halo,r);return}}getHalo(){return this.halo}setHalo(t){if(this.options.halo=t,!!this.isGlobeProjection()){if(this.halo){this.halo.setGradient(t);return}this.halo=new cb(t),this.once("load",()=>{var r;const u=this.getLayersOrder(),a=u[0],f=u.indexOf(((r=this.space)==null?void 0:r.id)??"")+2,m=u[f];this.halo&&this.addLayer(this.halo,this.space?m:a)})}}recreate(){const t={center:this.getCenter(),zoom:this.getZoom(),bearing:this.getBearing(),pitch:this.getPitch()};this.remove(),Object.assign(this,new D3({...this.options})),this.once("load",()=>{this.jumpTo(t)})}setTerrainAnimationDuration(t){this.terrainAnimationDuration=Math.max(t,0)}async onLoadAsync(){return new Promise(t=>{if(this.loaded()){t(this);return}this.once("load",()=>{t(this)})})}async onReadyAsync(){return new Promise(t=>{if(this.isReady){t(this);return}this.once("ready",()=>{t(this)})})}async onLoadWithTerrainAsync(){return new Promise(t=>{if(this.isReady&&this.terrain){t(this);return}this.once("loadWithTerrain",()=>{t(this)})})}monitorStyleUrl(t){typeof this.monitoredStyleUrls>"u"&&(this.monitoredStyleUrls=new Set);const r=new URL(t);r.search="",this.monitoredStyleUrls.add(r.href)}setStyle(t,r){var u,a,f,m,c;this.originalLabelStyle.clear(),(u=this.minimap)==null||u.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1});const z=QA(t);if(z.requiresUrlMonitoring&&this.monitorStyleUrl(z.style),z.isFallback){if(this.getStyle())return console.warn("[Map.setStyle]: Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Keeping the curent style instead."),this;console.warn("[Map.setStyle]: Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style.")}this.spaceboxLoadingState.styleLoadedCallbackFired=!1,this.spaceboxLoadingState.styleLoadCallbackSet=!1;const k=this.getStyle(),B=z.style;try{super.setStyle(z.style,{...r,diff:typeof z.style!="string"}),this.styleInProcess=!0}catch(J){this.styleInProcess=!1,console.error("[Map.setStyle]: Error while setting style:",J)}const Z=()=>{const J=z.style;if(!J.projection||J.projection.type==="mercator"){console.warn("[Map.setStyle]: Neither space nor halo is supported for mercator projection. Ignoring...");return}this.setSpaceFromStyle({style:z.style}),this.setHaloFromStyle({style:z.style})},X=J=>{var ce,ee,ae,Me;const Ae=J?.target.getStyle()??z.style;if(!this.spaceboxLoadingState.styleLoadedCallbackFired&&(this.spaceboxLoadingState.styleLoadedCallbackFired=!0,this.spaceboxLoadingState.styleLoadCallbackSet=!1,typeof Ae!="string"))try{const we=this.getLayersOrder()[0];this.space?this.setSpaceFromStyle({style:Ae}):this.initSpace({before:we,spec:(ee=(ce=Ae.metadata)==null?void 0:ce.maptiler)==null?void 0:ee.space}),this.halo?this.setHaloFromStyle({style:Ae}):this.initHalo({before:we,spec:(Me=(ae=Ae.metadata)==null?void 0:ae.maptiler)==null?void 0:Me.halo})}catch(we){console.error(we)}};return typeof z.style=="string"||z.requiresUrlMonitoring?(this.once("style.load",X),this):(requestIdleCallback(()=>{try{X()}catch(J){console.error(J)}}),this.spaceboxLoadingState.styleLoadCallbackSet?((a=k?.terrain)==null?void 0:a.source)!==((f=B?.terrain)==null?void 0:f.source)||((m=k?.terrain)==null?void 0:m.exaggeration)!==((c=B?.terrain)==null?void 0:c.exaggeration)?(this.once("terrain",Z),this):this:(this.once("style.load",X),this.once("projection.change",X),this.spaceboxLoadingState.styleLoadCallbackSet=!0,this))}addLayer(t,r){var u;return(u=this.minimap)==null||u.addLayer(t,r),super.addLayer(t,r)}moveLayer(t,r){var u;return(u=this.minimap)==null||u.moveLayer(t,r),super.moveLayer(t,r)}removeLayer(t){var r;return(r=this.minimap)==null||r.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,r,u){var a;return(a=this.minimap)==null||a.setLayerZoomRange(t,r,u),super.setLayerZoomRange(t,r,u)}setFilter(t,r,u){var a;return(a=this.minimap)==null||a.setFilter(t,r,u),super.setFilter(t,r,u)}setPaintProperty(t,r,u,a){var f;return(f=this.minimap)==null||f.setPaintProperty(t,r,u,a),super.setPaintProperty(t,r,u,a)}setLayoutProperty(t,r,u,a){var f;return(f=this.minimap)==null||f.setLayoutProperty(t,r,u,a),super.setLayoutProperty(t,r,u,a)}setGlyphs(t,r){var u;return(u=this.minimap)==null||u.setGlyphs(t,r),super.setGlyphs(t,r)}getStyleLanguage(){return!this.style||!this.style.stylesheet||!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?jw(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(t){var r;(r=this.minimap)==null||r.map.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const r=this.getStyleLanguage(),u=wA(t,Ui);if(!u){console.warn(`The language "${u}" is not supported.`);return}if(!(u.flag===Ui.STYLE.flag&&r&&(r.flag===Ui.AUTO.flag||r.flag===Ui.VISITOR.flag))&&(u.flag!==Ui.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===u&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===Ui.STYLE_LOCK.flag){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=u;let a=u;if(u.flag===Ui.STYLE.flag){if(!r){console.warn("The style has no default languages or has an invalid one.");return}a=r}let f=Ui.LOCAL.flag,m=["get",f];a.flag===Ui.VISITOR.flag?(f=AA().flag,m=["case",["all",["has",f],["has",Ui.LOCAL.flag]],["case",["==",["get",f],["get",Ui.LOCAL.flag]],["get",Ui.LOCAL.flag],["format",["get",f],{"font-scale":.8},`
`,["get",Ui.LOCAL.flag],{"font-scale":1.1}]],["get",Ui.LOCAL.flag]]):a.flag===Ui.VISITOR_ENGLISH.flag?(f=Ui.ENGLISH.flag,m=["case",["all",["has",f],["has",Ui.LOCAL.flag]],["case",["==",["get",f],["get",Ui.LOCAL.flag]],["get",Ui.LOCAL.flag],["format",["get",f],{"font-scale":.8},`
`,["get",Ui.LOCAL.flag],{"font-scale":1.1}]],["get",Ui.LOCAL.flag]]):a.flag===Ui.AUTO.flag?(f=AA().flag,m=["coalesce",["get",f],["get",Ui.LOCAL.flag]]):a===Ui.LOCAL?(f=Ui.LOCAL.flag,m=["get",f]):(f=a.flag,m=["coalesce",["get",f],["get",Ui.LOCAL.flag]]);const{layers:c}=this.getStyle(),z=this.originalLabelStyle.size===0;if(z){const k=zj(c,this);this.isStyleLocalized=Object.keys(k.localized).length>0}for(const k of c){if(k.type!=="symbol")continue;const B=k,Z=this.getSource(B.source);if(!Z||!("url"in Z&&typeof Z.url=="string")||new URL(Z.url).host!==_l.maptilerApiHost)continue;const{id:X,layout:J}=B;if(!J||!("text-field"in J))continue;let ce;if(z?(ce=this.getLayoutProperty(X,"text-field"),this.originalLabelStyle.set(X,ce)):ce=this.originalLabelStyle.get(X),typeof ce=="string"){const{contains:ee,exactMatch:ae}=Tj(ce,this.isStyleLocalized);if(!ee)continue;if(ae)this.setLayoutProperty(X,"text-field",m);else{const Me=Ej(ce,m,this.isStyleLocalized);this.setLayoutProperty(X,"text-field",Me)}}else{const ee=Sj(ce,m,this.isStyleLocalized);this.setLayoutProperty(X,"text-field",ee)}}this.languageIsUpdated=!0}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t){if(!this.terrain)return;const r=performance.now(),u=this.terrain.exaggeration,a=t-u,f=()=>{if(!this.terrain||this.terrainFlattening)return;const m=(performance.now()-r)/this.terrainAnimationDuration;if(m<.99){const c=1-(1-m)**4,z=u+c*a;this.terrain.exaggeration=z,requestAnimationFrame(f)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t,this.fire("terrainAnimationStop",{terrain:this.terrain});this._elevationFreeze=!1,this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(f)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const r=a=>{!this.terrain||a.type!=="data"||a.dataType!=="source"||!("source"in a)||a.sourceId!=="maptiler-terrain"||a.source.type!=="raster-dem"||a.isSourceLoaded&&(this.off("data",r),this.growTerrain(t))},u=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",r),this.addSource(_l.terrainSourceId,{type:"raster-dem",url:_l.terrainSourceURL}),this.setTerrain({source:_l.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}if(this.loaded()||this.isTerrainEnabled)u();else{const a=()=>{this.getTerrain()&&this.getSource(_l.terrainSourceId)||u()};this.once("load",()=>{a()}),this.once("moveend",()=>{a()})}}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=performance.now(),r=this.terrain.exaggeration,u=()=>{if(!this.terrain||this.terrainGrowing)return;const a=(performance.now()-t)/this.terrainAnimationDuration;if(this._elevationFreeze=!1,a<.99){const f=(1-a)**4,m=r*f;this.terrain.exaggeration=m,requestAnimationFrame(u)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(_l.terrainSourceId)&&this.removeSource(_l.terrainSourceId),this.fire("terrainAnimationStop",{terrain:null});this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(u)}setTerrainExaggeration(t,r=!0){!r&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}async fitToIpBounds(){const t=await TA.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(t){const r=await TA.info();this.jumpTo({center:[r.longitude??0,r.latitude??0],zoom:t||11})}getCameraHash(){const t=new Float32Array(5),r=this.getCenter();return t[0]=r.lng,t[1]=r.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),R$.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return Oa}getMaptilerSessionId(){return ET}setTransformRequest(t){return super.setTransformRequest(kA(t)),this}getProjection(){const t=this.style.getProjection();return t===void 0&&this.style.projection?{type:this.style.projection.name}:t}isGlobeProjection(){const t=this.getProjection();return t?t.type==="globe":!1}enableGlobeProjection(){this.curentProjection="globe",this.isGlobeProjection()!==!0&&this.setProjection({type:"globe"})}enableMercatorProjection(){this.curentProjection="mercator",this.isGlobeProjection()!==!1&&this.setProjection({type:"mercator"})}setProjection(t,r){return typeof t=="string"&&(t={type:t}),(t.type==="mercator"||t.type==="globe")&&r!=null&&r.persist&&(this.curentProjection=t.type),this.fire("projection.change",{target:this,projection:t}),super.setProjection(t)}forgetPersistedProjection(){return this.curentProjection=void 0,this}isLanguageUpdated(){return this.languageIsUpdated}};const{Evented:xH}=mn,{Evented:wH}=mn;function WT(e){if(typeof DOMParser<"u"){const t=new DOMParser().parseFromString(e,"application/xml");if(t.querySelector("parsererror"))throw new Error("The provided string is not valid XML");return t}throw new Error("No XML parser found")}function L3(e,t){if(!e.hasChildNodes())return!1;for(const r of Array.from(e.childNodes)){const u=r.nodeName;if(typeof u=="string"&&u.trim().toLowerCase()===t.toLowerCase())return!0}return!1}function vC(e){if(typeof XMLSerializer<"u")return new XMLSerializer().serializeToString(e);throw new Error("No XML serializer found")}function R3(e){const t=typeof e=="string"?WT(e):e;if(!L3(t,"gpx"))throw new Error("The XML document is not valid GPX");const r=Vo(t,"trk"),u=Vo(t,"rte"),a=Vo(t,"wpt"),f={type:"FeatureCollection",features:[]};for(const m of Array.from(r)){const c=Z9(m);c&&f.features.push(c)}for(const m of Array.from(u)){const c=q9(m);c&&f.features.push(c)}for(const m of Array.from(a))f.features.push(G9(m));return f}function O3(e,t){let r=e;if(typeof r=="string"&&(r=WT(r)),!L3(r,"kml"))throw new Error("The XML document is not valid KML");const u={type:"FeatureCollection",features:[]},a={},f={},m={},c=Vo(r,"Placemark"),z=Vo(r,"Style"),k=Vo(r,"StyleMap");for(const B of Array.from(z)){const Z=xC(vC(B)).toString(16);a[`#${zm(B,"id")}`]=Z,f[Z]=B}for(const B of Array.from(k)){a[`#${zm(B,"id")}`]=xC(vC(B)).toString(16);const Z=Vo(B,"Pair"),X={};for(const J of Array.from(Z))X[cr(Hn(J,"key"))??""]=cr(Hn(J,"styleUrl"));m[`#${zm(B,"id")}`]=X}for(const B of Array.from(c))u.features=u.features.concat(V9(B,a,f,m));return u}function bC(e){if(e===null)return["#000000",1];let t="",r=1,u=e;return u.startsWith("#")&&(u=u.substring(1)),(u.length===6||u.length===3)&&(t=u),u.length===8&&(r=Number.parseInt(u.substring(0,2),16)/255,t=`#${u.substring(6,8)}${u.substring(4,6)}${u.substring(2,4)}`),[t??"#000000",r??1]}function F9(e){return j3(e.split(" "))}function U9(e){let t=Vo(e,"coord");const r=[],u=[];t.length===0&&(t=Vo(e,"gx:coord"));for(const f of Array.from(t))r.push(F9(cr(f)??""));const a=Vo(e,"when");for(const f of Array.from(a))u.push(cr(f));return{coords:r,times:u}}function Ab(e){const t=["Polygon","LineString","Point","Track","gx:Track"];let r,u,a,f,m;const c=[],z=[];if(Hn(e,"MultiGeometry")!==null)return Ab(Hn(e,"MultiGeometry"));if(Hn(e,"MultiTrack")!==null)return Ab(Hn(e,"MultiTrack"));if(Hn(e,"gx:MultiTrack")!==null)return Ab(Hn(e,"gx:MultiTrack"));for(a=0;a<t.length;a++)if(u=Vo(e,t[a]),u){for(f=0;f<u.length;f++)if(r=u[f],t[a]==="Point")c.push({type:"Point",coordinates:B3(cr(Hn(r,"coordinates"))??"")});else if(t[a]==="LineString")c.push({type:"LineString",coordinates:SC(cr(Hn(r,"coordinates"))??"")});else if(t[a]==="Polygon"){const k=Vo(r,"LinearRing"),B=[];for(m=0;m<k.length;m++)B.push(SC(cr(Hn(k[m],"coordinates"))??""));c.push({type:"Polygon",coordinates:B})}else if(t[a]==="Track"||t[a]==="gx:Track"){const k=U9(r);c.push({type:"LineString",coordinates:k.coords}),k.times.length&&z.push(k.times)}}return{geoms:c,coordTimes:z}}function V9(e,t,r,u){const a=Ab(e),f={},m=cr(Hn(e,"name")),c=cr(Hn(e,"address")),z=cr(Hn(e,"description")),k=Hn(e,"TimeSpan"),B=Hn(e,"TimeStamp"),Z=Hn(e,"ExtendedData"),X=Hn(e,"visibility");let J,ce=cr(Hn(e,"styleUrl")),ee=Hn(e,"LineStyle"),ae=Hn(e,"PolyStyle");if(!a.geoms.length)return[];if(m&&(f.name=m),c&&(f.address=c),ce){ce.startsWith("#")||(ce=`#${ce}`),f.styleUrl=ce,t[ce]&&(f.styleHash=t[ce]),u[ce]&&(f.styleMapHash=u[ce],f.styleHash=t[u[ce].normal??""]);const Ae=r[f.styleHash??""];if(Ae){ee||(ee=Hn(Ae,"LineStyle")),ae||(ae=Hn(Ae,"PolyStyle"));const we=Hn(Ae,"IconStyle");if(we){const xe=Hn(we,"Icon");if(xe){const Se=cr(Hn(xe,"href"));Se&&(f.icon=Se)}}}}if(z&&(f.description=z),k){const Ae=cr(Hn(k,"begin")),we=cr(Hn(k,"end"));Ae&&we&&(f.timespan={begin:Ae,end:we})}if(B!==null&&(f.timestamp=cr(Hn(B,"when"))??new Date().toISOString()),ee!==null){const Ae=bC(cr(Hn(ee,"color"))),we=Ae[0],xe=Ae[1],Se=Number.parseFloat(cr(Hn(ee,"width"))??"");we&&(f.stroke=we),Number.isNaN(xe)||(f["stroke-opacity"]=xe),Number.isNaN(Se)||(f["stroke-width"]=Se)}if(ae){const Ae=bC(cr(Hn(ae,"color"))),we=Ae[0],xe=Ae[1],Se=cr(Hn(ae,"fill")),Fe=cr(Hn(ae,"outline"));we&&(f.fill=we),Number.isNaN(xe)||(f["fill-opacity"]=xe),Se&&(f["fill-opacity"]=Se==="1"?f["fill-opacity"]||1:0),Fe&&(f["stroke-opacity"]=Fe==="1"?f["stroke-opacity"]||1:0)}if(Z){const Ae=Vo(Z,"Data"),we=Vo(Z,"SimpleData");for(J=0;J<Ae.length;J++)f[Ae[J].getAttribute("name")??""]=cr(Hn(Ae[J],"value"))??"";for(J=0;J<we.length;J++)f[we[J].getAttribute("name")??""]=cr(we[J])??""}X!==null&&(f.visibility=cr(X)??""),a.coordTimes.length!==0&&(f.coordTimes=a.coordTimes.length===1?a.coordTimes[0]:a.coordTimes);const Me={type:"Feature",geometry:a.geoms.length===1?a.geoms[0]:{type:"GeometryCollection",geometries:a.geoms},properties:f};return zm(e,"id")&&(Me.id=zm(e,"id")??void 0),[Me]}function N3(e,t){const r=Vo(e,t),u=[],a=[];let f=[];const m=r.length;if(!(m<2)){for(let c=0;c<m;c++){const z=F3(r[c]);u.push(z.coordinates),z.time&&a.push(z.time),(z.heartRate||f.length)&&(f.length===0&&(f=new Array(c).fill(null)),f.push(z.heartRate))}return{line:u,times:a,heartRates:f}}}function Z9(e){const t=Vo(e,"trkseg"),r=[],u=[],a=[];let f;for(let c=0;c<t.length;c++)if(f=N3(t[c],"trkpt"),f!==void 0&&(f.line&&r.push(f.line),f.times&&f.times.length&&u.push(f.times),a.length||f.heartRates&&f.heartRates.length)){if(!a.length)for(let z=0;z<c;z++)a.push(new Array(r[z].length).fill(null));f.heartRates&&f.heartRates.length?a.push(f.heartRates):a.push(new Array(f.line.length).fill(null))}if(r.length===0)return;const m={...XT(e),...$3(Hn(e,"extensions"))};return u.length!==0&&(m.coordTimes=r.length===1?u[0]:u),a.length!==0&&(m.heartRates=r.length===1?a[0]:a),r.length===1?{type:"Feature",properties:m,geometry:{type:"LineString",coordinates:r[0]}}:{type:"Feature",properties:m,geometry:{type:"MultiLineString",coordinates:r}}}function q9(e){const t=N3(e,"rtept");return t===void 0?void 0:{type:"Feature",properties:{...XT(e),...$3(Hn(e,"extensions"))},geometry:{type:"LineString",coordinates:t.line}}}function G9(e){return{type:"Feature",properties:{...XT(e),...Qw(e,["sym"])},geometry:{type:"Point",coordinates:F3(e).coordinates}}}function $3(e){const t={};if(e){const r=Hn(e,"line");if(r){const u=cr(Hn(r,"color")),a=Number.parseFloat(cr(Hn(r,"opacity"))??"0"),f=Number.parseFloat(cr(Hn(r,"width"))??"0");u&&(t.stroke=u),Number.isNaN(a)||(t["stroke-opacity"]=a),Number.isNaN(f)||(t["stroke-width"]=f*96/25.4)}}return t}function XT(e){const t=Qw(e,["name","cmt","desc","type","time","keywords"]),r=Vo(e,"link");if(r.length!==0){t.links=[];for(const u of Array.from(r)){const a={href:zm(u,"href"),...Qw(u,["text","type"])};t.links.push(a)}}return t}function xC(e){let t=0;if(!e||!e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}function Vo(e,t){return e.getElementsByTagName(t)}function zm(e,t){return e.getAttribute(t)}function wC(e,t){return Number.parseFloat(zm(e,t)??"0")}function Hn(e,t){const r=Vo(e,t);return r.length?r[0]:null}function H9(e){return e.normalize&&e.normalize(),e}function j3(e){return e.map(Number.parseFloat).map(t=>Number.isNaN(t)?null:t)}function cr(e){return e&&H9(e),e&&e.textContent}function Qw(e,t){const r={};let u,a;for(a=0;a<t.length;a++)u=Hn(e,t[a]),u&&(r[t[a]]=cr(u)??"");return r}function B3(e){return j3(e.replace(/\s*/g,"").split(","))}function SC(e){const t=e.replace(/^\s*|\s*$/g,"").split(/\s+/),r=[];for(const u of t)r.push(B3(u));return r}function F3(e){const t=[wC(e,"lon"),wC(e,"lat")],r=Hn(e,"ele"),u=Hn(e,"gpxtpx:hr")||Hn(e,"hr"),a=Hn(e,"time");let f;return r&&(f=Number.parseFloat(cr(r)??"0"),Number.isNaN(f)||t.push(f)),{coordinates:t,time:a?cr(a):null,heartRate:u!==null?Number.parseFloat(cr(u)??"0"):null}}function W9(e){let t=e;try{typeof t=="string"&&(t=WT(t))}catch{return null}try{return R3(t)}catch{}try{return O3(t)}catch{}return null}async function X9(e,t={}){const r=t.download??!1,u=await Y9(e);if(r){const a=t.filename??"maptiler_screenshot.png",f=document.createElement("a");f.style.display="none",document.body.appendChild(f),f.href=URL.createObjectURL(u),f.download=a,f.click(),setTimeout(()=>{document.body.removeChild(f),URL.revokeObjectURL(f.href)},0)}return u}function Y9(e){return new Promise((t,r)=>{e.redraw(),e.once("idle",()=>{e.getCanvas().toBlob(u=>{if(!u){r(Error("Screenshot could not be created."));return}t(u)},"image/png")})})}const e2=[["#1D5B79","#468B97","#EF6262","#F3AA60"],["#614BC3","#33BBC5","#85E6C5","#C8FFE0"],["#461959","#7A316F","#CD6688","#AED8CC"],["#0079FF","#00DFA2","#F6FA70","#FF0060"],["#39B5E0","#A31ACB","#FF78F0","#F5EA5A"],["#37E2D5","#590696","#C70A80","#FBCB0A"],["#FFD36E","#FFF56D","#99FFCD","#9FB4FF"],["#00EAD3","#FFF5B7","#FF449F","#005F99"],["#10A19D","#540375","#FF7000","#FFBF00"]];function p1(){return e2[~~(Math.random()*e2.length)][~~(Math.random()*4)]}function Gv(){return`maptiler_source_${B4()}`}function Hv(){return`maptiler_layer_${B4()}`}function t2(e,t){if(t<=e[0].zoom)return e[0].value;if(t>=e[e.length-1].zoom)return e[e.length-1].value;for(let r=0;r<e.length-1;r+=1)if(t>=e[r].zoom&&t<e[r+1].zoom){const u=e[r+1].zoom-e[r].zoom,a=(t-e[r].zoom)/u;return a*e[r+1].value+(1-a)*e[r].value}return 0}function ip(e){return["interpolate",["linear"],["zoom"],...e.flatMap(t=>[t.zoom,t.value])]}function ir(e){return["interpolate",["linear"],["zoom"],...e.flatMap(t=>[t.zoom,t.value])]}function U3(e,t){if(typeof t=="number"&&typeof e=="number")return 2*t+e;if(typeof t=="number"&&Array.isArray(e))return["interpolate",["linear"],["zoom"],...e.flatMap(r=>[r.zoom,2*t+r.value])];if(typeof e=="number"&&Array.isArray(t))return["interpolate",["linear"],["zoom"],...t.flatMap(r=>[r.zoom,2*r.value+e])];if(Array.isArray(e)&&Array.isArray(t)){const r=Array.from(new Set([...e.map(u=>u.zoom),...t.map(u=>u.zoom)])).sort((u,a)=>u<a?-1:1);return["interpolate",["linear"],["zoom"],...r.flatMap(u=>[u,2*t2(t,u)+t2(e,u)])]}return 0}function V3(e,t){return["interpolate",["linear"],["get",t],...e.flatMap(r=>[r.propertyValue,r.value])]}function YT(e){const t=e.trimStart(),r=`${t}${" ".repeat(e.length-t.length)}`,u=Array.from(r);if(!u.every(f=>f===" "||f==="_"))throw new Error("A dash pattern must be composed only of whitespace and underscore characters.");if(!(u.some(f=>f==="_")&&u.some(f=>f===" ")))throw new Error("A dash pattern must contain at least one underscore and one whitespace character");const a=[1];for(let f=1;f<u.length;f+=1){const m=u[f-1],c=u[f];m===c?a[a.length-1]+=1:a.push(1)}return a}function n2(e,t){return["interpolate",["linear"],["get",t],...e.flatMap(r=>[r.value,r.color])]}function i2(e,t,r=!0){return r?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.value,u.pointRadius*.025])],2,["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.value,u.pointRadius*.05])],4,["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.value,u.pointRadius*.1])],8,["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.value,u.pointRadius*.25])],16,["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.value,u.pointRadius])]]:["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.value,u.pointRadius])]}function Z3(e,t,r=!0){return r?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.propertyValue,u.value*.025])],2,["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.propertyValue,u.value*.05])],4,["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.propertyValue,u.value*.1])],8,["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.propertyValue,u.value*.25])],16,["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.propertyValue,u.value])]]:["interpolate",["linear"],["get",t],...e.flatMap(u=>[u.propertyValue,u.value])]}function r2(e,t){return e.every(r=>r.color[3]===e[0].color[3])?e[0].color[3]?e[0].color[3]/255:1:["interpolate",["linear"],["get",t],...e.getRawColorStops().flatMap(r=>{const u=r.value,a=r.color;return[u,a.length===4?a[3]/255:1]})]}function q3(e,t=10){return["interpolate",["linear"],["heatmap-density"],...Array.from({length:t+1},(r,u)=>{const a=u/t;return[a,e.getColorHex(a)]}).flat()]}function ub(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function K9(e){return`#${ub(e[0])}${ub(e[1])}${ub(e[2])}${e.length===4?ub(e[3]):""}`}class Pn extends Array{constructor(t={}){super(),rn(this,"min",0),rn(this,"max",1),"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new Pn({stops:t.map(r=>({value:r[0],color:r[1]}))})}setStops(t,r={clone:!0}){const u=r.clone?this.clone():this;u.length=0;let a=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY;for(let m=0;m<t.length;m+=1)a=Math.min(a,t[m].value),f=Math.max(f,t[m].value),u.push({value:t[m].value,color:t[m].color.slice()});return u.sort((m,c)=>m.value<c.value?-1:1),this.min=a,this.max=f,u}scale(t,r,u={clone:!0}){const a=u.clone,f=this[0].value,m=this.at(-1).value-f,c=r-t,z=[];for(let k=0;k<this.length;k+=1){const B=(this[k].value-f)/m*c+t;a?z.push({value:B,color:this[k].color.slice()}):this[k].value=B}return a?new Pn({stops:z}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new Pn({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let r=0;r<this.length;r+=1)t.push({value:this[r].value,color:this[r].color});return t}reverse(t={clone:!0}){const r=t.clone?this.clone():this;for(let u=0;u<~~(r.length/2);u+=1){const a=r[u].color;r[u].color=r.at(-(u+1)).color,r.at(-(u+1)).color=a}return r}getBounds(){return{min:this.min,max:this.max}}getColor(t,r={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let u=0;u<this.length-1;u+=1){if(t>this[u+1].value)continue;const a=this[u].color;if(!r.smooth)return a.slice();const f=this[u].value,m=this[u+1].value,c=this[u+1].color,z=(m-t)/(m-f);return a.map((k,B)=>Math.round(k*z+c[B]*(1-z)))}return[0,0,0]}getColorHex(t,r={smooth:!0,withAlpha:!1}){return K9(this.getColor(t,r))}getColorRelative(t,r={smooth:!0}){const u=this.getBounds();return this.getColor(u.min+t*(u.max-u.min),r)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const r=document.createElement("canvas");r.width=t.horizontal?t.size:1,r.height=t.horizontal?1:t.size;const u=r.getContext("2d");if(!u)throw new Error("Canvs context is missing");const a=u.getImageData(0,0,r.width,r.height),f=a.data,m=t.size,c=this[0].value,z=(this.at(-1).value-c)/m;for(let k=0;k<m;k+=1){const B=this.getColor(c+k*z,{smooth:t.smooth});f[k*4]=B[0],f[k*4+1]=B[1],f[k*4+2]=B[2],f[k*4+3]=B.length>3?B[3]:255}return u.putImageData(a,0,0),r}resample(t,r=15){const u=this.getBounds(),a=this.scale(0,1),f=1/(r-1);let m;if(t==="ease-in-square")m=Array.from({length:r},(c,z)=>{const k=z*f,B=k**2,Z=a.getColor(B);return{value:k,color:Z}});else if(t==="ease-out-square")m=Array.from({length:r},(c,z)=>{const k=z*f,B=1-(1-k)**2,Z=a.getColor(B);return{value:k,color:Z}});else if(t==="ease-out-sqrt")m=Array.from({length:r},(c,z)=>{const k=z*f,B=k**.5,Z=a.getColor(B);return{value:k,color:Z}});else if(t==="ease-in-sqrt")m=Array.from({length:r},(c,z)=>{const k=z*f,B=1-(1-k)**.5,Z=a.getColor(B);return{value:k,color:Z}});else if(t==="ease-out-exp")m=Array.from({length:r},(c,z)=>{const k=z*f,B=1-2**(-10*k),Z=a.getColor(B);return{value:k,color:Z}});else if(t==="ease-in-exp")m=Array.from({length:r},(c,z)=>{const k=z*f,B=2**(10*k-10),Z=a.getColor(B);return{value:k,color:Z}});else throw new Error("Invalid ressampling method.");return new Pn({stops:m}).scale(u.min,u.max)}transparentStart(){const t=this.getRawColorStops();t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001;for(const r of t)r.color.length===3&&r.color.push(255);return t[0].color[3]=0,new Pn({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}const G3={NULL:new Pn({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),GRAY:new Pn({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),JET:new Pn({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),HSV:new Pn({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),HOT:new Pn({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),SPRING:new Pn({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),SUMMER:new Pn({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),AUTOMN:new Pn({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),WINTER:new Pn({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),BONE:new Pn({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),COPPER:new Pn({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),GREYS:new Pn({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),YIGNBU:new Pn({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),GREENS:new Pn({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),YIORRD:new Pn({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),BLUERED:new Pn({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),RDBU:new Pn({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),PICNIC:new Pn({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),RAINBOW:new Pn({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),PORTLAND:new Pn({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),BLACKBODY:new Pn({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),EARTH:new Pn({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),ELECTRIC:new Pn({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),VIRIDIS:new Pn({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),INFERNO:new Pn({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),MAGMA:new Pn({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),PLASMA:new Pn({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),WARM:new Pn({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),COOL:new Pn({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),RAINBOW_SOFT:new Pn({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),BATHYMETRY:new Pn({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),CDOM:new Pn({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),CHLOROPHYLL:new Pn({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),DENSITY:new Pn({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),FREESURFACE_BLUE:new Pn({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),FREESURFACE_RED:new Pn({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),OXYGEN:new Pn({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),PAR:new Pn({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),PHASE:new Pn({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),SALINITY:new Pn({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),TEMPERATURE:new Pn({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),TURBIDITY:new Pn({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),VELOCITY_BLUE:new Pn({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),VELOCITY_GREEN:new Pn({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),CUBEHELIX:new Pn({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),CIVIDIS:new Pn({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),TURBO:new Pn({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),ROCKET:new Pn({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),MAKO:new Pn({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]})};async function J9(e,t,r={}){var u,a;if(!t.sourceId&&!t.data)throw new Error("Creating a polyline layer requires an existing .sourceId or a valid .data property");let f=t.data;if(typeof f=="string"){if(Kx(f))f=`https://api.maptiler.com/data/${t.data}/features.json?key=${Oa.apiKey}`;else if(((u=f.split(".").pop())==null?void 0:u.toLowerCase().trim())==="gpx"){const m=await(await fetch(f,r)).text();f=R3(m)}else if(((a=f.split(".").pop())==null?void 0:a.toLowerCase().trim())==="kml"){const m=await(await fetch(f,r)).text();f=O3(m)}else{const m=bj(f)??W9(f);m&&(f=m)}if(!f)throw new Error("Polyline data was provided as string but is incompatible with valid formats.")}return Q9(e,{...t,data:f})}function Q9(e,t){if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const r=t.sourceId??Gv(),u=t.layerId??Hv(),a={polylineLayerId:u,polylineOutlineLayerId:"",polylineSourceId:r};t.data&&!e.getSource(r)&&e.addSource(r,{type:"geojson",data:t.data});const f=t.lineWidth??3,m=t.lineColor??p1(),c=t.lineOpacity??1,z=t.lineBlur??0,k=t.lineGapWidth??0;let B=t.lineDashArray??null;const Z=t.outlineWidth??1,X=t.outlineColor??"#FFFFFF",J=t.outlineOpacity??1,ce=t.outlineBlur??0;if(typeof B=="string"&&(B=YT(B)),t.outline===!0){const ee=`${u}_outline`;a.polylineOutlineLayerId=ee,e.addLayer({id:ee,type:"line",source:r,layout:{"line-join":t.lineJoin??"round","line-cap":t.lineCap??"round"},minzoom:t.minzoom??0,maxzoom:t.maxzoom??23,paint:{"line-opacity":typeof J=="number"?J:ir(J),"line-color":typeof X=="string"?X:ip(X),"line-width":U3(f,Z),"line-blur":typeof ce=="number"?ce:ir(ce)}},t.beforeId)}return e.addLayer({id:u,type:"line",source:r,layout:{"line-join":t.lineJoin??"round","line-cap":t.lineCap??"round"},minzoom:t.minzoom??0,maxzoom:t.maxzoom??23,paint:{"line-opacity":typeof c=="number"?c:ir(c),"line-color":typeof m=="string"?m:ip(m),"line-width":typeof f=="number"?f:ir(f),"line-blur":typeof z=="number"?z:ir(z),"line-gap-width":typeof k=="number"?k:ir(k),...B&&{"line-dasharray":B}}},t.beforeId),a}function eU(e,t){if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const r=t.sourceId??Gv(),u=t.layerId??Hv(),a={polygonLayerId:u,polygonOutlineLayerId:t.outline?`${u}_outline`:"",polygonSourceId:r};if(t.data&&!e.getSource(r)){let ee=t.data;typeof ee=="string"&&Kx(ee)&&(ee=`https://api.maptiler.com/data/${ee}/features.json?key=${Oa.apiKey}`),e.addSource(r,{type:"geojson",data:ee})}let f=t.outlineDashArray??null;const m=t.outlineWidth??1,c=t.outlineColor??"#FFFFFF",z=t.outlineOpacity??1,k=t.outlineBlur??0,B=t.fillColor??p1(),Z=t.fillOpacity??1,X=t.outlinePosition??"center",J=t.pattern??null;typeof f=="string"&&(f=YT(f));const ce=(ee=null)=>{if(e.addLayer({id:u,type:"fill",source:r,minzoom:t.minzoom??0,maxzoom:t.maxzoom??23,paint:{"fill-color":typeof B=="string"?B:ip(B),"fill-opacity":typeof Z=="number"?Z:ir(Z),...ee&&{"fill-pattern":ee}}},t.beforeId),t.outline===!0){let ae;X==="inside"?typeof m=="number"?ae=.5*m:ae=ir(m.map(({zoom:Me,value:Ae})=>({zoom:Me,value:.5*Ae}))):X==="outside"?typeof m=="number"?ae=-.5*m:ae=ir(m.map(Me=>({zoom:Me.zoom,value:-.5*Me.value}))):ae=0,e.addLayer({id:a.polygonOutlineLayerId,type:"line",source:r,layout:{"line-join":t.outlineJoin??"round","line-cap":t.outlineCap??"butt"},minzoom:t.minzoom??0,maxzoom:t.maxzoom??23,paint:{"line-opacity":typeof z=="number"?z:ir(z),"line-color":typeof c=="string"?c:ip(c),"line-width":typeof m=="number"?m:ir(m),"line-blur":typeof k=="number"?k:ir(k),"line-offset":ae,...f&&{"line-dasharray":f}}},t.beforeId)}};return J?e.hasImage(J)?ce(J):e.loadImage(J).then(ee=>{e.addImage(J,ee.data),ce(J)}).catch(ee=>{console.error("Could not load the pattern image.",ee.message),ce()}):ce(),a}function tU(e,t){if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const r=t.minPointRadius??10,u=t.maxPointRadius??50,a=t.cluster??!1,f=20,m=Array.isArray(t.pointColor)?t.pointColor:G3.TURBO.scale(10,t.cluster?1e4:1e3).resample("ease-out-square"),c=m.getBounds(),z=t.sourceId??Gv(),k=t.layerId??Hv(),B=t.showLabel??a,Z=t.alignOnViewport??!0,X=t.outline??!1,J=t.outlineOpacity??1,ce=t.outlineWidth??1,ee=t.outlineColor??"#FFFFFF";let ae;const Me=t.zoomCompensation??!0,Ae=t.minzoom??0,we=t.maxzoom??23;typeof t.pointOpacity=="number"?ae=t.pointOpacity:Array.isArray(t.pointOpacity)?ae=ir(t.pointOpacity):t.cluster?ae=r2(m,"point_count"):t.property?ae=r2(m,t.property):ae=ir([{zoom:Ae,value:0},{zoom:Ae+.25,value:1},{zoom:we-.25,value:1},{zoom:we,value:0}]);const xe={pointLayerId:k,clusterLayerId:"",labelLayerId:"",pointSourceId:z};if(t.data&&!e.getSource(z)){let Se=t.data;typeof Se=="string"&&Kx(Se)&&(Se=`https://api.maptiler.com/data/${Se}/features.json?key=${Oa.apiKey}`),e.addSource(z,{type:"geojson",data:Se,cluster:a})}if(a){xe.clusterLayerId=`${k}_cluster`;const Se=Array.from({length:f},(Fe,Ue)=>{const it=c.min+Ue*(c.max-c.min)/(f-1);return{value:it,pointRadius:r+(u-r)*(Ue/(f-1))**.5,color:m.getColorHex(it)}});e.addLayer({id:xe.clusterLayerId,type:"circle",source:z,filter:["has","point_count"],paint:{"circle-color":typeof t.pointColor=="string"?t.pointColor:n2(Se,"point_count"),"circle-radius":typeof t.pointRadius=="number"?t.pointRadius:Array.isArray(t.pointRadius)?ir(t.pointRadius):i2(Se,"point_count",!1),"circle-pitch-alignment":Z?"viewport":"map","circle-pitch-scale":"map","circle-opacity":ae,...X&&{"circle-stroke-opacity":typeof J=="number"?J:ir(J),"circle-stroke-width":typeof ce=="number"?ce:ir(ce),"circle-stroke-color":typeof ee=="string"?ee:ip(ee)}},minzoom:Ae,maxzoom:we},t.beforeId),e.addLayer({id:xe.pointLayerId,type:"circle",source:z,filter:["!",["has","point_count"]],paint:{"circle-pitch-alignment":Z?"viewport":"map","circle-pitch-scale":"map","circle-color":typeof t.pointColor=="string"?t.pointColor:m.getColorHex(m.getBounds().min),"circle-radius":typeof t.pointRadius=="number"?t.pointRadius:Array.isArray(t.pointRadius)?ir(t.pointRadius):Se[0].pointRadius*.75,"circle-opacity":ae,...X&&{"circle-stroke-opacity":typeof J=="number"?J:ir(J),"circle-stroke-width":typeof ce=="number"?ce:ir(ce),"circle-stroke-color":typeof ee=="string"?ee:ip(ee)}},minzoom:Ae,maxzoom:we},t.beforeId)}else{let Se=typeof t.pointColor=="string"?t.pointColor:Array.isArray(t.pointColor)?t.pointColor.getColorHex(t.pointColor.getBounds().min):p1(),Fe=typeof t.pointRadius=="number"?Me?ir([{zoom:0,value:t.pointRadius*.025},{zoom:2,value:t.pointRadius*.05},{zoom:4,value:t.pointRadius*.1},{zoom:8,value:t.pointRadius*.25},{zoom:16,value:t.pointRadius*1}]):t.pointRadius:Array.isArray(t.pointRadius)?ir(t.pointRadius):Me?ir([{zoom:0,value:r*.05},{zoom:2,value:r*.1},{zoom:4,value:r*.2},{zoom:8,value:r*.5},{zoom:16,value:r*1}]):r;if(t.property&&Array.isArray(t.pointColor)){const Ue=Array.from({length:f},(it,Rt)=>{const Pt=c.min+Rt*(c.max-c.min)/(f-1);return{value:Pt,pointRadius:typeof t.pointRadius=="number"?t.pointRadius:r+(u-r)*(Rt/(f-1))**.5,color:typeof t.pointColor=="string"?t.pointColor:m.getColorHex(Pt)}});Se=n2(Ue,t.property),Fe=i2(Ue,t.property,Me)}e.addLayer({id:xe.pointLayerId,type:"circle",source:z,layout:{"circle-sort-key":t.property?["/",1,["get",t.property]]:0},paint:{"circle-pitch-alignment":Z?"viewport":"map","circle-pitch-scale":"map","circle-color":Se,"circle-opacity":ae,"circle-radius":Fe,...X&&{"circle-stroke-opacity":typeof J=="number"?J:ir(J),"circle-stroke-width":typeof ce=="number"?ce:ir(ce),"circle-stroke-color":typeof ee=="string"?ee:ip(ee)}},minzoom:Ae,maxzoom:we},t.beforeId)}if(B!==!1&&(t.cluster||t.property)){xe.labelLayerId=`${k}_label`;const Se=t.labelColor??"#fff",Fe=t.labelSize??12;e.addLayer({id:xe.labelLayerId,type:"symbol",source:z,filter:["has",t.cluster?"point_count":t.property],layout:{"text-field":t.cluster?"{point_count_abbreviated}":`{${t.property}}`,"text-font":["Noto Sans Regular"],"text-size":Fe,"text-pitch-alignment":Z?"viewport":"map","symbol-sort-key":["/",1,["get",t.cluster?"point_count":t.property]]},paint:{"text-color":Se,"text-opacity":ae},minzoom:Ae,maxzoom:we},t.beforeId)}return xe}function nU(e,t){if(t.layerId&&e.getLayer(t.layerId))throw new Error(`A layer already exists with the layer id: ${t.layerId}`);const r=t.sourceId??Gv(),u=t.layerId??Hv(),a=t.minzoom??0,f=t.maxzoom??23,m=t.zoomCompensation??!0,c=t.opacity??[{zoom:a,value:0},{zoom:a+.25,value:1},{zoom:f-.25,value:1},{zoom:f,value:0}];let z=Array.isArray(t.colorRamp)?t.colorRamp:G3.TURBO.transparentStart();const k=z.getBounds();(k.min!==0||k.max!==1)&&(z=z.scale(0,1)),z.hasTransparentStart()||(z=z.transparentStart());const B=t.intensity??[{zoom:0,value:.01},{zoom:4,value:.2},{zoom:16,value:1}],Z=t.property??null,X=t.weight??1;let J=1;Z?typeof X=="number"?(J=X,typeof t.weight=="number"&&console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`")):Array.isArray(X)?J=V3(X,Z):console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`"):typeof X=="number"?J=X:Array.isArray(X)&&console.warn("The options `.propertyValueWeights` can only be used when `.property` is provided.");const ce=[{zoom:0,value:50*.025},{zoom:2,value:50*.05},{zoom:4,value:50*.1},{zoom:8,value:50*.25},{zoom:16,value:50}],ee=t.radius??(m?ce:10);let ae=1;typeof ee=="number"?ae=ee:Array.isArray(ee)&&"zoom"in ee[0]?ae=ir(ee):Z&&Array.isArray(ee)&&"propertyValue"in ee[0]?ae=Z3(ee,Z,m):!Z&&Array.isArray(ee)&&"propertyValue"in ee[0]?(ae=ir(ce),console.warn("The option `.radius` can only be property-driven if the option `.property` is provided.")):ae=ir(ce);const Me={heatmapLayerId:u,heatmapSourceId:r};if(t.data&&!e.getSource(r)){let Ae=t.data;typeof Ae=="string"&&Kx(Ae)&&(Ae=`https://api.maptiler.com/data/${Ae}/features.json?key=${Oa.apiKey}`),e.addSource(r,{type:"geojson",data:Ae})}return e.addLayer({id:u,type:"heatmap",source:r,minzoom:a,maxzoom:f,paint:{"heatmap-weight":J,"heatmap-intensity":typeof B=="number"?B:ir(B),"heatmap-color":q3(z),"heatmap-radius":ae,"heatmap-opacity":typeof c=="number"?c:ir(c)}},t.beforeId),Me}const N_=Object.freeze(Object.defineProperty({__proto__:null,addHeatmap:nU,addPoint:tU,addPolygon:eU,addPolyline:J9,colorDrivenByProperty:n2,colorPalettes:e2,computeRampedOutlineWidth:U3,dashArrayMaker:YT,generateRandomLayerName:Hv,generateRandomSourceName:Gv,getRandomColor:p1,heatmapIntensityFromColorRamp:q3,lerpZoomNumberValues:t2,opacityDrivenByProperty:r2,paintColorOptionsToPaintSpec:ip,radiusDrivenByProperty:i2,radiusDrivenByPropertyHeatmap:Z3,rampedOptionsToLayerPaintSpec:ir,rampedPropertyValueWeight:V3,takeScreenshot:X9},Symbol.toStringTag,{value:"Module"}));new Array;function H3(){return"3.11.1"}mn.Map;mn.Marker;mn.Popup;mn.Style;mn.CanvasSource;mn.GeoJSONSource;mn.ImageSource;mn.RasterTileSource;mn.RasterDEMTileSource;mn.VectorTileSource;mn.VideoSource;mn.NavigationControl;mn.GeolocateControl;mn.AttributionControl;mn.LogoControl;mn.ScaleControl;mn.FullscreenControl;mn.TerrainControl;mn.BoxZoomHandler;mn.ScrollZoomHandler;mn.CooperativeGesturesHandler;mn.KeyboardHandler;mn.TwoFingersTouchPitchHandler;mn.MapWheelEvent;mn.MapTouchEvent;mn.MapMouseEvent;mn.config;mn.getVersion;const{setRTLTextPlugin:SH,getRTLTextPluginStatus:TH,LngLat:EH,LngLatBounds:AH,MercatorCoordinate:CH,Evented:MH,AJAXError:zH,prewarm:IH,clearPrewarmedResources:kH,Hash:PH,Point:DH,EdgeInsets:LH,DragRotateHandler:RH,DragPanHandler:OH,TwoFingersTouchZoomRotateHandler:NH,DoubleClickZoomHandler:$H,TwoFingersTouchZoomHandler:jH,TwoFingersTouchRotateHandler:BH,getWorkerCount:FH,setWorkerCount:UH,getMaxParallelImageRequests:VH,setMaxParallelImageRequests:ZH,getWorkerUrl:qH,setWorkerUrl:GH,addSourceType:HH,importScriptInWorkers:WH,addProtocol:XH,removeProtocol:YH}=mn,iU="@maptiler/leaflet-maptilersdk",rU="4.1.1",aU=Zr.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},map:null,initialize:function(e){Zr.setOptions(this,e),this._throttledUpdate=Zr.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(e){var t;this._container||this._initContainer();const r=this.getPaneName();(t=e.getPane(r))==null||t.appendChild(this._container),this._initMaptilerSDK(),this._offset=this._map.containerPointToLayerPoint([0,0]),e.options.zoomAnimation&&Zr.DomEvent.on(e._proxy,Zr.DomUtil.TRANSITION_END,this._transitionEnd,this),e.attributionControl.addAttribution('<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>')},onRemove:function(e){var t;this._map._proxy&&this._map.options.zoomAnimation&&Zr.DomEvent.off(this._map._proxy,Zr.DomUtil.TRANSITION_END,this._transitionEnd,this);const r=this.getPaneName();(t=e.getPane(r))==null||t.removeChild(this._container),this._maptilerMap.remove(),this._maptilerMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaptilerSDKMap:function(){return this._maptilerMap},getCanvas:function(){return this._maptilerMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+this.options.padding*2)},getBounds:function(){const e=this.getSize().multiplyBy(.5),t=this._map.latLngToContainerPoint(this._map.getCenter());return Zr.latLngBounds(this._map.containerPointToLatLng(t.subtract(e)),this._map.containerPointToLatLng(t.add(e)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},setStyle:function(e){this._maptilerMap.setStyle(e)},setLanguage:function(e){this._maptilerMap.setLanguage(e)},_roundPoint:e=>({x:Math.round(e.x),y:Math.round(e.y)}),_initContainer:function(){this._container=Zr.DomUtil.create("div","leaflet-gl-layer");const e=this.getSize(),t=this._map.getSize().multiplyBy(this.options.padding);this._container.style.width=`${e.x}px`,this._container.style.height=`${e.y}px`;const r=this._map.containerPointToLayerPoint([0,0]).subtract(t);Zr.DomUtil.setPosition(this._container,this._roundPoint(r))},_initMaptilerSDK:function(){const e=this._map.getCenter(),t=this.options.maxBounds?this.options.maxBounds:[[Number.NEGATIVE_INFINITY,-90],[Number.POSITIVE_INFINITY,90]];this._map.setMaxBounds(Zr.latLngBounds(Zr.latLng(t[0][1],t[0][0]),Zr.latLng(t[1][1],t[1][0])));const r={maxBounds:t,...this.options,projection:"mercator",container:this._container,center:[e.lng,e.lat],zoom:this._map.getZoom()-1,attributionControl:!1};this.options.geolocate&&(r.center=void 0,r.zoom=void 0),this._maptilerMap=new P3(r),this._maptilerMap.telemetry.registerModule(iU,rU),this._maptilerMap.once("load",()=>{this.fire("ready")}),this._maptilerMap.once("load",async()=>{let a={logo:null};try{const f=Object.keys(this._maptilerMap.style.sourceCaches).map(c=>this._maptilerMap.getSource(c)).filter(c=>c&&"url"in c&&typeof c.url=="string"&&c?.url.includes("tiles.json")),m=new URL(f[0].url);m.searchParams.has("key")||m.searchParams.append("key",r.apiKey),a=await(await fetch(m.href)).json()}catch{}if(a.logo||r.maptilerLogo){const f=a.logo??"https://api.maptiler.com/resources/logo.svg",m=document.createElement("a");m.href="https://www.maptiler.com",m.style.setProperty("position","absolute"),m.style.setProperty("left","10px"),m.style.setProperty("bottom","2px"),m.style.setProperty("z-index","999");const c=document.createElement("img");c.src=f,c.alt="MapTiler logo",c.width=100,c.height=30,m.appendChild(c),this._map.getContainer().appendChild(m)}}),this._maptilerMap.transform.freezeElevation=!0,this.options.geolocate&&this._maptilerMap.on("load",()=>{this._map.setView(this._maptilerMap.getCenter(),this._maptilerMap.getZoom()+1)}),this._transformGL(),this._maptilerMap._actualCanvas=this._maptilerMap._canvas;const u=this._maptilerMap._actualCanvas;Zr.DomUtil.addClass(u,"leaflet-image-layer"),Zr.DomUtil.addClass(u,"leaflet-zoom-animated"),this.options.interactive&&Zr.DomUtil.addClass(u,"leaflet-interactive"),this.options.className&&Zr.DomUtil.addClass(u,this.options.className),this.addHeatmap=a=>N_.addHeatmap(this._maptilerMap,a),this.addPolygon=a=>N_.addPolygon(this._maptilerMap,a),this.addPoint=a=>N_.addPoint(this._maptilerMap,a),this.addPolyline=a=>N_.addPolyline(this._maptilerMap,a),this.takeScreenshot=a=>N_.takeScreenshot(this._maptilerMap,a)},_update:function(){if(this._offset=this._map.containerPointToLayerPoint([0,0]),this._zooming)return;const e=this.getSize(),t=this._map.getSize().multiplyBy(this.options.padding),r=this._map.containerPointToLayerPoint([0,0]).subtract(t);Zr.DomUtil.setPosition(this._container,this._roundPoint(r)),this._transformGL(),this._maptilerMap.transform.width!==e.x||this._maptilerMap.transform.height!==e.y?(this._container.style.width=`${e.x}px`,this._container.style.height=`${e.y}px`,this._maptilerMap._resize!==null&&this._maptilerMap._resize!==void 0?this._maptilerMap._resize():this._maptilerMap.resize()):this._maptilerMap._update!==null&&this._maptilerMap._update!==void 0?this._maptilerMap._update():this._maptilerMap.update()},_transformGL:function(){this._maptilerMap.setCenter(this._map.getCenter()),this._maptilerMap.setZoom(this._map.getZoom()-1)},_pinchZoom:function(){this._maptilerMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(e){const t=this._map.getZoomScale(e.zoom),r=this._map.getSize().multiplyBy(this.options.padding*t),u=this.getSize()._divideBy(2),a=this._map.project(e.center,e.zoom)._subtract(u)._add(this._map._getMapPanePos().add(r))._round(),f=this._map.project(this._map.getBounds().getNorthWest(),e.zoom)._subtract(a);Zr.DomUtil.setTransform(this._maptilerMap.getCanvas(),f.subtract(this._offset),t)},_zoomStart:function(){this._zooming=!0},_zoomEnd:function(){const e=this._map.getZoomScale(this._map.getZoom());Zr.DomUtil.setTransform(this._maptilerMap.getCanvas(),new Zr.Point(0,0),e),this._zooming=!1,this._update()},_transitionEnd:function(){Zr.Util.requestAnimFrame(()=>{const e=this._map.getZoom(),t=this._map.getCenter(),r=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());Zr.DomUtil.setTransform(this._maptilerMap._actualCanvas,r,1),this._maptilerMap.once("moveend",Zr.Util.bind(()=>{this._zoomEnd()},this)),this._maptilerMap.jumpTo({center:t,zoom:e-1})},this)},_resize:function(e){this._transitionEnd(e)}});function oU({coords:{lat:e,lon:t},onMapClick:r,mapType:u}){return me.jsxs(v$,{center:[e,t],zoom:5,style:{width:"100%",height:"100%"},children:[me.jsx(sU,{onMapClick:r,coords:{lat:e,lon:t}}),me.jsx(lU,{}),me.jsx(x$,{opacity:.5,attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:`https://tile.openweathermap.org/map/${u}/{z}/{x}/{y}.png?appid=${Wx}`}),me.jsx(b$,{position:[e,t]})]})}function sU({onMapClick:e,coords:t}){const r=v4();return r.panTo([t.lat,t.lon]),r.on("click",u=>{const{lat:a,lng:f}=u.latlng;e(a,f)}),null}function lU(){const e=v4();return de.useEffect(()=>{const t=new aU({style:"basic-dark",apiKey:"7n9qkVm5bwvWbij2BHh6"});return t.addTo(e),()=>{e.removeLayer(t)}},[e]),null}const W3=(...e)=>e.filter((t,r,u)=>!!t&&t.trim()!==""&&u.indexOf(t)===r).join(" ").trim();const cU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const uU=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,u)=>u?u.toUpperCase():r.toLowerCase());const TC=e=>{const t=uU(e);return t.charAt(0).toUpperCase()+t.slice(1)};var hU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dU=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const fU=de.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:u,className:a="",children:f,iconNode:m,...c},z)=>de.createElement("svg",{ref:z,...hU,width:t,height:t,stroke:e,strokeWidth:u?Number(r)*24/Number(t):r,className:W3("lucide",a),...!f&&!dU(c)&&{"aria-hidden":"true"},...c},[...m.map(([k,B])=>de.createElement(k,B)),...Array.isArray(f)?f:[f]]));const KT=(e,t)=>{const r=de.forwardRef(({className:u,...a},f)=>de.createElement(fU,{ref:f,iconNode:t,className:W3(`lucide-${cU(TC(e))}`,`lucide-${e}`,u),...a}));return r.displayName=TC(e),r};const pU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mU=KT("check",pU);const gU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],X3=KT("chevron-down",gU);const yU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],_U=KT("chevron-up",yU);function EC(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Y3(...e){return t=>{let r=!1;const u=e.map(a=>{const f=EC(a,t);return!r&&typeof f=="function"&&(r=!0),f});if(r)return()=>{for(let a=0;a<u.length;a++){const f=u[a];typeof f=="function"?f():EC(e[a],null)}}}}function Ar(...e){return de.useCallback(Y3(...e),e)}function Wb(e){const t=vU(e),r=de.forwardRef((u,a)=>{const{children:f,...m}=u,c=de.Children.toArray(f),z=c.find(xU);if(z){const k=z.props.children,B=c.map(Z=>Z===z?de.Children.count(k)>1?de.Children.only(null):de.isValidElement(k)?k.props.children:null:Z);return me.jsx(t,{...m,ref:a,children:de.isValidElement(k)?de.cloneElement(k,void 0,B):null})}return me.jsx(t,{...m,ref:a,children:f})});return r.displayName=`${e}.Slot`,r}function vU(e){const t=de.forwardRef((r,u)=>{const{children:a,...f}=r;if(de.isValidElement(a)){const m=SU(a),c=wU(f,a.props);return a.type!==de.Fragment&&(c.ref=u?Y3(u,m):m),de.cloneElement(a,c)}return de.Children.count(a)>1?de.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var K3=Symbol("radix.slottable");function bU(e){const t=({children:r})=>me.jsx(me.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=K3,t}function xU(e){return de.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===K3}function wU(e,t){const r={...t};for(const u in t){const a=e[u],f=t[u];/^on[A-Z]/.test(u)?a&&f?r[u]=(...c)=>{const z=f(...c);return a(...c),z}:a&&(r[u]=a):u==="style"?r[u]={...a,...f}:u==="className"&&(r[u]=[a,f].filter(Boolean).join(" "))}return{...e,...r}}function SU(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var TU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],br=TU.reduce((e,t)=>{const r=Wb(`Primitive.${t}`),u=de.forwardRef((a,f)=>{const{asChild:m,...c}=a,z=m?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),me.jsx(z,{...c,ref:f})});return u.displayName=`Primitive.${t}`,{...e,[t]:u}},{});function EU(e,t){e&&Fv.flushSync(()=>e.dispatchEvent(t))}var J3=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),AU="VisuallyHidden",Q3=de.forwardRef((e,t)=>me.jsx(br.span,{...e,ref:t,style:{...J3,...e.style}}));Q3.displayName=AU;var CU=Q3;function Ey(e,t=[]){let r=[];function u(f,m){const c=de.createContext(m),z=r.length;r=[...r,m];const k=Z=>{const{scope:X,children:J,...ce}=Z,ee=X?.[e]?.[z]||c,ae=de.useMemo(()=>ce,Object.values(ce));return me.jsx(ee.Provider,{value:ae,children:J})};k.displayName=f+"Provider";function B(Z,X){const J=X?.[e]?.[z]||c,ce=de.useContext(J);if(ce)return ce;if(m!==void 0)return m;throw new Error(`\`${Z}\` must be used within \`${f}\``)}return[k,B]}const a=()=>{const f=r.map(m=>de.createContext(m));return function(c){const z=c?.[e]||f;return de.useMemo(()=>({[`__scope${e}`]:{...c,[e]:z}}),[c,z])}};return a.scopeName=e,[u,MU(a,...t)]}function MU(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const u=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(f){const m=u.reduce((c,{useScope:z,scopeName:k})=>{const Z=z(f)[`__scope${k}`];return{...c,...Z}},{});return de.useMemo(()=>({[`__scope${t.scopeName}`]:m}),[m])}};return r.scopeName=t.scopeName,r}function eD(e){const t=e+"CollectionProvider",[r,u]=Ey(t),[a,f]=r(t,{collectionRef:{current:null},itemMap:new Map}),m=ee=>{const{scope:ae,children:Me}=ee,Ae=uh.useRef(null),we=uh.useRef(new Map).current;return me.jsx(a,{scope:ae,itemMap:we,collectionRef:Ae,children:Me})};m.displayName=t;const c=e+"CollectionSlot",z=Wb(c),k=uh.forwardRef((ee,ae)=>{const{scope:Me,children:Ae}=ee,we=f(c,Me),xe=Ar(ae,we.collectionRef);return me.jsx(z,{ref:xe,children:Ae})});k.displayName=c;const B=e+"CollectionItemSlot",Z="data-radix-collection-item",X=Wb(B),J=uh.forwardRef((ee,ae)=>{const{scope:Me,children:Ae,...we}=ee,xe=uh.useRef(null),Se=Ar(ae,xe),Fe=f(B,Me);return uh.useEffect(()=>(Fe.itemMap.set(xe,{ref:xe,...we}),()=>{Fe.itemMap.delete(xe)})),me.jsx(X,{[Z]:"",ref:Se,children:Ae})});J.displayName=B;function ce(ee){const ae=f(e+"CollectionConsumer",ee);return uh.useCallback(()=>{const Ae=ae.collectionRef.current;if(!Ae)return[];const we=Array.from(Ae.querySelectorAll(`[${Z}]`));return Array.from(ae.itemMap.values()).sort((Fe,Ue)=>we.indexOf(Fe.ref.current)-we.indexOf(Ue.ref.current))},[ae.collectionRef,ae.itemMap])}return[{Provider:m,Slot:k,ItemSlot:J},ce,u]}function Wi(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),r===!1||!a.defaultPrevented)return t?.(a)}}var Bs=globalThis?.document?de.useLayoutEffect:()=>{},zU=aM[" useInsertionEffect ".trim().toString()]||Bs;function fv({prop:e,defaultProp:t,onChange:r=()=>{},caller:u}){const[a,f,m]=IU({defaultProp:t,onChange:r}),c=e!==void 0,z=c?e:a;{const B=de.useRef(e!==void 0);de.useEffect(()=>{const Z=B.current;Z!==c&&console.warn(`${u} is changing from ${Z?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),B.current=c},[c,u])}const k=de.useCallback(B=>{if(c){const Z=kU(B)?B(e):B;Z!==e&&m.current?.(Z)}else f(B)},[c,e,f,m]);return[z,k]}function IU({defaultProp:e,onChange:t}){const[r,u]=de.useState(e),a=de.useRef(r),f=de.useRef(t);return zU(()=>{f.current=t},[t]),de.useEffect(()=>{a.current!==r&&(f.current?.(r),a.current=r)},[r,a]),[r,u,f]}function kU(e){return typeof e=="function"}function PU(e,t){return de.useReducer((r,u)=>t[r][u]??r,e)}var JT=e=>{const{present:t,children:r}=e,u=DU(t),a=typeof r=="function"?r({present:u.isPresent}):de.Children.only(r),f=Ar(u.ref,LU(a));return typeof r=="function"||u.isPresent?de.cloneElement(a,{ref:f}):null};JT.displayName="Presence";function DU(e){const[t,r]=de.useState(),u=de.useRef(null),a=de.useRef(e),f=de.useRef("none"),m=e?"mounted":"unmounted",[c,z]=PU(m,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return de.useEffect(()=>{const k=hb(u.current);f.current=c==="mounted"?k:"none"},[c]),Bs(()=>{const k=u.current,B=a.current;if(B!==e){const X=f.current,J=hb(k);e?z("MOUNT"):J==="none"||k?.display==="none"?z("UNMOUNT"):z(B&&X!==J?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,z]),Bs(()=>{if(t){let k;const B=t.ownerDocument.defaultView??window,Z=J=>{const ee=hb(u.current).includes(CSS.escape(J.animationName));if(J.target===t&&ee&&(z("ANIMATION_END"),!a.current)){const ae=t.style.animationFillMode;t.style.animationFillMode="forwards",k=B.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=ae)})}},X=J=>{J.target===t&&(f.current=hb(u.current))};return t.addEventListener("animationstart",X),t.addEventListener("animationcancel",Z),t.addEventListener("animationend",Z),()=>{B.clearTimeout(k),t.removeEventListener("animationstart",X),t.removeEventListener("animationcancel",Z),t.removeEventListener("animationend",Z)}}else z("ANIMATION_END")},[t,z]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:de.useCallback(k=>{u.current=k?getComputedStyle(k):null,r(k)},[])}}function hb(e){return e?.animationName||"none"}function LU(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var RU=aM[" useId ".trim().toString()]||(()=>{}),OU=0;function m1(e){const[t,r]=de.useState(RU());return Bs(()=>{r(u=>u??String(OU++))},[e]),e||(t?`radix-${t}`:"")}var NU=de.createContext(void 0);function tD(e){const t=de.useContext(NU);return e||t||"ltr"}function Rm(e){const t=de.useRef(e);return de.useEffect(()=>{t.current=e}),de.useMemo(()=>(...r)=>t.current?.(...r),[])}function $U(e,t=globalThis?.document){const r=Rm(e);de.useEffect(()=>{const u=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",u,{capture:!0}),()=>t.removeEventListener("keydown",u,{capture:!0})},[r,t])}var jU="DismissableLayer",a2="dismissableLayer.update",BU="dismissableLayer.pointerDownOutside",FU="dismissableLayer.focusOutside",AC,nD=de.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),QT=de.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:u,onPointerDownOutside:a,onFocusOutside:f,onInteractOutside:m,onDismiss:c,...z}=e,k=de.useContext(nD),[B,Z]=de.useState(null),X=B?.ownerDocument??globalThis?.document,[,J]=de.useState({}),ce=Ar(t,Ue=>Z(Ue)),ee=Array.from(k.layers),[ae]=[...k.layersWithOutsidePointerEventsDisabled].slice(-1),Me=ee.indexOf(ae),Ae=B?ee.indexOf(B):-1,we=k.layersWithOutsidePointerEventsDisabled.size>0,xe=Ae>=Me,Se=ZU(Ue=>{const it=Ue.target,Rt=[...k.branches].some(Pt=>Pt.contains(it));!xe||Rt||(a?.(Ue),m?.(Ue),Ue.defaultPrevented||c?.())},X),Fe=qU(Ue=>{const it=Ue.target;[...k.branches].some(Pt=>Pt.contains(it))||(f?.(Ue),m?.(Ue),Ue.defaultPrevented||c?.())},X);return $U(Ue=>{Ae===k.layers.size-1&&(u?.(Ue),!Ue.defaultPrevented&&c&&(Ue.preventDefault(),c()))},X),de.useEffect(()=>{if(B)return r&&(k.layersWithOutsidePointerEventsDisabled.size===0&&(AC=X.body.style.pointerEvents,X.body.style.pointerEvents="none"),k.layersWithOutsidePointerEventsDisabled.add(B)),k.layers.add(B),CC(),()=>{r&&k.layersWithOutsidePointerEventsDisabled.size===1&&(X.body.style.pointerEvents=AC)}},[B,X,r,k]),de.useEffect(()=>()=>{B&&(k.layers.delete(B),k.layersWithOutsidePointerEventsDisabled.delete(B),CC())},[B,k]),de.useEffect(()=>{const Ue=()=>J({});return document.addEventListener(a2,Ue),()=>document.removeEventListener(a2,Ue)},[]),me.jsx(br.div,{...z,ref:ce,style:{pointerEvents:we?xe?"auto":"none":void 0,...e.style},onFocusCapture:Wi(e.onFocusCapture,Fe.onFocusCapture),onBlurCapture:Wi(e.onBlurCapture,Fe.onBlurCapture),onPointerDownCapture:Wi(e.onPointerDownCapture,Se.onPointerDownCapture)})});QT.displayName=jU;var UU="DismissableLayerBranch",VU=de.forwardRef((e,t)=>{const r=de.useContext(nD),u=de.useRef(null),a=Ar(t,u);return de.useEffect(()=>{const f=u.current;if(f)return r.branches.add(f),()=>{r.branches.delete(f)}},[r.branches]),me.jsx(br.div,{...e,ref:a})});VU.displayName=UU;function ZU(e,t=globalThis?.document){const r=Rm(e),u=de.useRef(!1),a=de.useRef(()=>{});return de.useEffect(()=>{const f=c=>{if(c.target&&!u.current){let z=function(){iD(BU,r,k,{discrete:!0})};const k={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=z,t.addEventListener("click",a.current,{once:!0})):z()}else t.removeEventListener("click",a.current);u.current=!1},m=window.setTimeout(()=>{t.addEventListener("pointerdown",f)},0);return()=>{window.clearTimeout(m),t.removeEventListener("pointerdown",f),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>u.current=!0}}function qU(e,t=globalThis?.document){const r=Rm(e),u=de.useRef(!1);return de.useEffect(()=>{const a=f=>{f.target&&!u.current&&iD(FU,r,{originalEvent:f},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>u.current=!0,onBlurCapture:()=>u.current=!1}}function CC(){const e=new CustomEvent(a2);document.dispatchEvent(e)}function iD(e,t,r,{discrete:u}){const a=r.originalEvent.target,f=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),u?EU(a,f):a.dispatchEvent(f)}var fw="focusScope.autoFocusOnMount",pw="focusScope.autoFocusOnUnmount",MC={bubbles:!1,cancelable:!0},GU="FocusScope",rD=de.forwardRef((e,t)=>{const{loop:r=!1,trapped:u=!1,onMountAutoFocus:a,onUnmountAutoFocus:f,...m}=e,[c,z]=de.useState(null),k=Rm(a),B=Rm(f),Z=de.useRef(null),X=Ar(t,ee=>z(ee)),J=de.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;de.useEffect(()=>{if(u){let ee=function(we){if(J.paused||!c)return;const xe=we.target;c.contains(xe)?Z.current=xe:Kf(Z.current,{select:!0})},ae=function(we){if(J.paused||!c)return;const xe=we.relatedTarget;xe!==null&&(c.contains(xe)||Kf(Z.current,{select:!0}))},Me=function(we){if(document.activeElement===document.body)for(const Se of we)Se.removedNodes.length>0&&Kf(c)};document.addEventListener("focusin",ee),document.addEventListener("focusout",ae);const Ae=new MutationObserver(Me);return c&&Ae.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",ee),document.removeEventListener("focusout",ae),Ae.disconnect()}}},[u,c,J.paused]),de.useEffect(()=>{if(c){IC.add(J);const ee=document.activeElement;if(!c.contains(ee)){const Me=new CustomEvent(fw,MC);c.addEventListener(fw,k),c.dispatchEvent(Me),Me.defaultPrevented||(HU(JU(aD(c)),{select:!0}),document.activeElement===ee&&Kf(c))}return()=>{c.removeEventListener(fw,k),setTimeout(()=>{const Me=new CustomEvent(pw,MC);c.addEventListener(pw,B),c.dispatchEvent(Me),Me.defaultPrevented||Kf(ee??document.body,{select:!0}),c.removeEventListener(pw,B),IC.remove(J)},0)}}},[c,k,B,J]);const ce=de.useCallback(ee=>{if(!r&&!u||J.paused)return;const ae=ee.key==="Tab"&&!ee.altKey&&!ee.ctrlKey&&!ee.metaKey,Me=document.activeElement;if(ae&&Me){const Ae=ee.currentTarget,[we,xe]=WU(Ae);we&&xe?!ee.shiftKey&&Me===xe?(ee.preventDefault(),r&&Kf(we,{select:!0})):ee.shiftKey&&Me===we&&(ee.preventDefault(),r&&Kf(xe,{select:!0})):Me===Ae&&ee.preventDefault()}},[r,u,J.paused]);return me.jsx(br.div,{tabIndex:-1,...m,ref:X,onKeyDown:ce})});rD.displayName=GU;function HU(e,{select:t=!1}={}){const r=document.activeElement;for(const u of e)if(Kf(u,{select:t}),document.activeElement!==r)return}function WU(e){const t=aD(e),r=zC(t,e),u=zC(t.reverse(),e);return[r,u]}function aD(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:u=>{const a=u.tagName==="INPUT"&&u.type==="hidden";return u.disabled||u.hidden||a?NodeFilter.FILTER_SKIP:u.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function zC(e,t){for(const r of e)if(!XU(r,{upTo:t}))return r}function XU(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function YU(e){return e instanceof HTMLInputElement&&"select"in e}function Kf(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&YU(e)&&t&&e.select()}}var IC=KU();function KU(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=kC(e,t),e.unshift(t)},remove(t){e=kC(e,t),e[0]?.resume()}}}function kC(e,t){const r=[...e],u=r.indexOf(t);return u!==-1&&r.splice(u,1),r}function JU(e){return e.filter(t=>t.tagName!=="A")}var QU="Portal",eE=de.forwardRef((e,t)=>{const{container:r,...u}=e,[a,f]=de.useState(!1);Bs(()=>f(!0),[]);const m=r||a&&globalThis?.document?.body;return m?a$.createPortal(me.jsx(br.div,{...u,ref:t}),m):null});eE.displayName=QU;var mw=0;function e7(){de.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??PC()),document.body.insertAdjacentElement("beforeend",e[1]??PC()),mw++,()=>{mw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),mw--}},[])}function PC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var sd=function(){return sd=Object.assign||function(t){for(var r,u=1,a=arguments.length;u<a;u++){r=arguments[u];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(t[f]=r[f])}return t},sd.apply(this,arguments)};function oD(e,t){var r={};for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&t.indexOf(u)<0&&(r[u]=e[u]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,u=Object.getOwnPropertySymbols(e);a<u.length;a++)t.indexOf(u[a])<0&&Object.prototype.propertyIsEnumerable.call(e,u[a])&&(r[u[a]]=e[u[a]]);return r}function t7(e,t,r){if(r||arguments.length===2)for(var u=0,a=t.length,f;u<a;u++)(f||!(u in t))&&(f||(f=Array.prototype.slice.call(t,0,u)),f[u]=t[u]);return e.concat(f||Array.prototype.slice.call(t))}var Cb="right-scroll-bar-position",Mb="width-before-scroll-bar",n7="with-scroll-bars-hidden",i7="--removed-body-scroll-bar-size";function gw(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function r7(e,t){var r=de.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(u){var a=r.value;a!==u&&(r.value=u,r.callback(u,a))}}}})[0];return r.callback=t,r.facade}var a7=typeof window<"u"?de.useLayoutEffect:de.useEffect,DC=new WeakMap;function o7(e,t){var r=r7(null,function(u){return e.forEach(function(a){return gw(a,u)})});return a7(function(){var u=DC.get(r);if(u){var a=new Set(u),f=new Set(e),m=r.current;a.forEach(function(c){f.has(c)||gw(c,null)}),f.forEach(function(c){a.has(c)||gw(c,m)})}DC.set(r,e)},[e]),r}function s7(e){return e}function l7(e,t){t===void 0&&(t=s7);var r=[],u=!1,a={read:function(){if(u)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(f){var m=t(f,u);return r.push(m),function(){r=r.filter(function(c){return c!==m})}},assignSyncMedium:function(f){for(u=!0;r.length;){var m=r;r=[],m.forEach(f)}r={push:function(c){return f(c)},filter:function(){return r}}},assignMedium:function(f){u=!0;var m=[];if(r.length){var c=r;r=[],c.forEach(f),m=r}var z=function(){var B=m;m=[],B.forEach(f)},k=function(){return Promise.resolve().then(z)};k(),r={push:function(B){m.push(B),k()},filter:function(B){return m=m.filter(B),r}}}};return a}function c7(e){e===void 0&&(e={});var t=l7(null);return t.options=sd({async:!0,ssr:!1},e),t}var sD=function(e){var t=e.sideCar,r=oD(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var u=t.read();if(!u)throw new Error("Sidecar medium not found");return de.createElement(u,sd({},r))};sD.isSideCarExport=!0;function u7(e,t){return e.useMedium(t),sD}var lD=c7(),yw=function(){},g1=de.forwardRef(function(e,t){var r=de.useRef(null),u=de.useState({onScrollCapture:yw,onWheelCapture:yw,onTouchMoveCapture:yw}),a=u[0],f=u[1],m=e.forwardProps,c=e.children,z=e.className,k=e.removeScrollBar,B=e.enabled,Z=e.shards,X=e.sideCar,J=e.noRelative,ce=e.noIsolation,ee=e.inert,ae=e.allowPinchZoom,Me=e.as,Ae=Me===void 0?"div":Me,we=e.gapMode,xe=oD(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Se=X,Fe=o7([r,t]),Ue=sd(sd({},xe),a);return de.createElement(de.Fragment,null,B&&de.createElement(Se,{sideCar:lD,removeScrollBar:k,shards:Z,noRelative:J,noIsolation:ce,inert:ee,setCallbacks:f,allowPinchZoom:!!ae,lockRef:r,gapMode:we}),m?de.cloneElement(de.Children.only(c),sd(sd({},Ue),{ref:Fe})):de.createElement(Ae,sd({},Ue,{className:z,ref:Fe}),c))});g1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};g1.classNames={fullWidth:Mb,zeroRight:Cb};var h7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function d7(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=h7();return t&&e.setAttribute("nonce",t),e}function f7(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function p7(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var m7=function(){var e=0,t=null;return{add:function(r){e==0&&(t=d7())&&(f7(t,r),p7(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},g7=function(){var e=m7();return function(t,r){de.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},cD=function(){var e=g7(),t=function(r){var u=r.styles,a=r.dynamic;return e(u,a),null};return t},y7={left:0,top:0,right:0,gap:0},_w=function(e){return parseInt(e||"",10)||0},_7=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],u=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[_w(r),_w(u),_w(a)]},v7=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return y7;var t=_7(e),r=document.documentElement.clientWidth,u=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,u-r+t[2]-t[0])}},b7=cD(),ry="data-scroll-locked",x7=function(e,t,r,u){var a=e.left,f=e.top,m=e.right,c=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(n7,` {
   overflow: hidden `).concat(u,`;
   padding-right: `).concat(c,"px ").concat(u,`;
  }
  body[`).concat(ry,`] {
    overflow: hidden `).concat(u,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(u,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(f,`px;
    padding-right: `).concat(m,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(u,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(u,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Cb,` {
    right: `).concat(c,"px ").concat(u,`;
  }
  
  .`).concat(Mb,` {
    margin-right: `).concat(c,"px ").concat(u,`;
  }
  
  .`).concat(Cb," .").concat(Cb,` {
    right: 0 `).concat(u,`;
  }
  
  .`).concat(Mb," .").concat(Mb,` {
    margin-right: 0 `).concat(u,`;
  }
  
  body[`).concat(ry,`] {
    `).concat(i7,": ").concat(c,`px;
  }
`)},LC=function(){var e=parseInt(document.body.getAttribute(ry)||"0",10);return isFinite(e)?e:0},w7=function(){de.useEffect(function(){return document.body.setAttribute(ry,(LC()+1).toString()),function(){var e=LC()-1;e<=0?document.body.removeAttribute(ry):document.body.setAttribute(ry,e.toString())}},[])},S7=function(e){var t=e.noRelative,r=e.noImportant,u=e.gapMode,a=u===void 0?"margin":u;w7();var f=de.useMemo(function(){return v7(a)},[a]);return de.createElement(b7,{styles:x7(f,!t,a,r?"":"!important")})},o2=!1;if(typeof window<"u")try{var db=Object.defineProperty({},"passive",{get:function(){return o2=!0,!0}});window.addEventListener("test",db,db),window.removeEventListener("test",db,db)}catch{o2=!1}var Wg=o2?{passive:!1}:!1,T7=function(e){return e.tagName==="TEXTAREA"},uD=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!T7(e)&&r[t]==="visible")},E7=function(e){return uD(e,"overflowY")},A7=function(e){return uD(e,"overflowX")},RC=function(e,t){var r=t.ownerDocument,u=t;do{typeof ShadowRoot<"u"&&u instanceof ShadowRoot&&(u=u.host);var a=hD(e,u);if(a){var f=dD(e,u),m=f[1],c=f[2];if(m>c)return!0}u=u.parentNode}while(u&&u!==r.body);return!1},C7=function(e){var t=e.scrollTop,r=e.scrollHeight,u=e.clientHeight;return[t,r,u]},M7=function(e){var t=e.scrollLeft,r=e.scrollWidth,u=e.clientWidth;return[t,r,u]},hD=function(e,t){return e==="v"?E7(t):A7(t)},dD=function(e,t){return e==="v"?C7(t):M7(t)},z7=function(e,t){return e==="h"&&t==="rtl"?-1:1},I7=function(e,t,r,u,a){var f=z7(e,window.getComputedStyle(t).direction),m=f*u,c=r.target,z=t.contains(c),k=!1,B=m>0,Z=0,X=0;do{if(!c)break;var J=dD(e,c),ce=J[0],ee=J[1],ae=J[2],Me=ee-ae-f*ce;(ce||Me)&&hD(e,c)&&(Z+=Me,X+=ce);var Ae=c.parentNode;c=Ae&&Ae.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Ae.host:Ae}while(!z&&c!==document.body||z&&(t.contains(c)||t===c));return(B&&Math.abs(Z)<1||!B&&Math.abs(X)<1)&&(k=!0),k},fb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},OC=function(e){return[e.deltaX,e.deltaY]},NC=function(e){return e&&"current"in e?e.current:e},k7=function(e,t){return e[0]===t[0]&&e[1]===t[1]},P7=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},D7=0,Xg=[];function L7(e){var t=de.useRef([]),r=de.useRef([0,0]),u=de.useRef(),a=de.useState(D7++)[0],f=de.useState(cD)[0],m=de.useRef(e);de.useEffect(function(){m.current=e},[e]),de.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var ee=t7([e.lockRef.current],(e.shards||[]).map(NC),!0).filter(Boolean);return ee.forEach(function(ae){return ae.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),ee.forEach(function(ae){return ae.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var c=de.useCallback(function(ee,ae){if("touches"in ee&&ee.touches.length===2||ee.type==="wheel"&&ee.ctrlKey)return!m.current.allowPinchZoom;var Me=fb(ee),Ae=r.current,we="deltaX"in ee?ee.deltaX:Ae[0]-Me[0],xe="deltaY"in ee?ee.deltaY:Ae[1]-Me[1],Se,Fe=ee.target,Ue=Math.abs(we)>Math.abs(xe)?"h":"v";if("touches"in ee&&Ue==="h"&&Fe.type==="range")return!1;var it=window.getSelection(),Rt=it&&it.anchorNode,Pt=Rt?Rt===Fe||Rt.contains(Fe):!1;if(Pt)return!1;var $t=RC(Ue,Fe);if(!$t)return!0;if($t?Se=Ue:(Se=Ue==="v"?"h":"v",$t=RC(Ue,Fe)),!$t)return!1;if(!u.current&&"changedTouches"in ee&&(we||xe)&&(u.current=Se),!Se)return!0;var Zt=u.current||Se;return I7(Zt,ae,ee,Zt==="h"?we:xe)},[]),z=de.useCallback(function(ee){var ae=ee;if(!(!Xg.length||Xg[Xg.length-1]!==f)){var Me="deltaY"in ae?OC(ae):fb(ae),Ae=t.current.filter(function(Se){return Se.name===ae.type&&(Se.target===ae.target||ae.target===Se.shadowParent)&&k7(Se.delta,Me)})[0];if(Ae&&Ae.should){ae.cancelable&&ae.preventDefault();return}if(!Ae){var we=(m.current.shards||[]).map(NC).filter(Boolean).filter(function(Se){return Se.contains(ae.target)}),xe=we.length>0?c(ae,we[0]):!m.current.noIsolation;xe&&ae.cancelable&&ae.preventDefault()}}},[]),k=de.useCallback(function(ee,ae,Me,Ae){var we={name:ee,delta:ae,target:Me,should:Ae,shadowParent:R7(Me)};t.current.push(we),setTimeout(function(){t.current=t.current.filter(function(xe){return xe!==we})},1)},[]),B=de.useCallback(function(ee){r.current=fb(ee),u.current=void 0},[]),Z=de.useCallback(function(ee){k(ee.type,OC(ee),ee.target,c(ee,e.lockRef.current))},[]),X=de.useCallback(function(ee){k(ee.type,fb(ee),ee.target,c(ee,e.lockRef.current))},[]);de.useEffect(function(){return Xg.push(f),e.setCallbacks({onScrollCapture:Z,onWheelCapture:Z,onTouchMoveCapture:X}),document.addEventListener("wheel",z,Wg),document.addEventListener("touchmove",z,Wg),document.addEventListener("touchstart",B,Wg),function(){Xg=Xg.filter(function(ee){return ee!==f}),document.removeEventListener("wheel",z,Wg),document.removeEventListener("touchmove",z,Wg),document.removeEventListener("touchstart",B,Wg)}},[]);var J=e.removeScrollBar,ce=e.inert;return de.createElement(de.Fragment,null,ce?de.createElement(f,{styles:P7(a)}):null,J?de.createElement(S7,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function R7(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const O7=u7(lD,L7);var fD=de.forwardRef(function(e,t){return de.createElement(g1,sd({},e,{ref:t,sideCar:O7}))});fD.classNames=g1.classNames;var N7=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Yg=new WeakMap,pb=new WeakMap,mb={},vw=0,pD=function(e){return e&&(e.host||pD(e.parentNode))},$7=function(e,t){return t.map(function(r){if(e.contains(r))return r;var u=pD(r);return u&&e.contains(u)?u:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},j7=function(e,t,r,u){var a=$7(t,Array.isArray(e)?e:[e]);mb[r]||(mb[r]=new WeakMap);var f=mb[r],m=[],c=new Set,z=new Set(a),k=function(Z){!Z||c.has(Z)||(c.add(Z),k(Z.parentNode))};a.forEach(k);var B=function(Z){!Z||z.has(Z)||Array.prototype.forEach.call(Z.children,function(X){if(c.has(X))B(X);else try{var J=X.getAttribute(u),ce=J!==null&&J!=="false",ee=(Yg.get(X)||0)+1,ae=(f.get(X)||0)+1;Yg.set(X,ee),f.set(X,ae),m.push(X),ee===1&&ce&&pb.set(X,!0),ae===1&&X.setAttribute(r,"true"),ce||X.setAttribute(u,"true")}catch(Me){console.error("aria-hidden: cannot operate on ",X,Me)}})};return B(t),c.clear(),vw++,function(){m.forEach(function(Z){var X=Yg.get(Z)-1,J=f.get(Z)-1;Yg.set(Z,X),f.set(Z,J),X||(pb.has(Z)||Z.removeAttribute(u),pb.delete(Z)),J||Z.removeAttribute(r)}),vw--,vw||(Yg=new WeakMap,Yg=new WeakMap,pb=new WeakMap,mb={})}},B7=function(e,t,r){r===void 0&&(r="data-aria-hidden");var u=Array.from(Array.isArray(e)?e:[e]),a=N7(e);return a?(u.push.apply(u,Array.from(a.querySelectorAll("[aria-live], script"))),j7(u,a,r,"aria-hidden")):function(){return null}};function tE(e){const t=de.useRef({value:e,previous:e});return de.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function nE(e){const[t,r]=de.useState(void 0);return Bs(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const u=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const f=a[0];let m,c;if("borderBoxSize"in f){const z=f.borderBoxSize,k=Array.isArray(z)?z[0]:z;m=k.inlineSize,c=k.blockSize}else m=e.offsetWidth,c=e.offsetHeight;r({width:m,height:c})});return u.observe(e,{box:"border-box"}),()=>u.unobserve(e)}else r(void 0)},[e]),t}const F7=["top","right","bottom","left"],lp=Math.min,Oc=Math.max,Xb=Math.round,gb=Math.floor,pd=e=>({x:e,y:e}),U7={left:"right",right:"left",bottom:"top",top:"bottom"},V7={start:"end",end:"start"};function s2(e,t,r){return Oc(e,lp(t,r))}function rf(e,t){return typeof e=="function"?e(t):e}function af(e){return e.split("-")[0]}function Ay(e){return e.split("-")[1]}function iE(e){return e==="x"?"y":"x"}function rE(e){return e==="y"?"height":"width"}const Z7=new Set(["top","bottom"]);function cd(e){return Z7.has(af(e))?"y":"x"}function aE(e){return iE(cd(e))}function q7(e,t,r){r===void 0&&(r=!1);const u=Ay(e),a=aE(e),f=rE(a);let m=a==="x"?u===(r?"end":"start")?"right":"left":u==="start"?"bottom":"top";return t.reference[f]>t.floating[f]&&(m=Yb(m)),[m,Yb(m)]}function G7(e){const t=Yb(e);return[l2(e),t,l2(t)]}function l2(e){return e.replace(/start|end/g,t=>V7[t])}const $C=["left","right"],jC=["right","left"],H7=["top","bottom"],W7=["bottom","top"];function X7(e,t,r){switch(e){case"top":case"bottom":return r?t?jC:$C:t?$C:jC;case"left":case"right":return t?H7:W7;default:return[]}}function Y7(e,t,r,u){const a=Ay(e);let f=X7(af(e),r==="start",u);return a&&(f=f.map(m=>m+"-"+a),t&&(f=f.concat(f.map(l2)))),f}function Yb(e){return e.replace(/left|right|bottom|top/g,t=>U7[t])}function K7(e){return{top:0,right:0,bottom:0,left:0,...e}}function mD(e){return typeof e!="number"?K7(e):{top:e,right:e,bottom:e,left:e}}function Kb(e){const{x:t,y:r,width:u,height:a}=e;return{width:u,height:a,top:r,left:t,right:t+u,bottom:r+a,x:t,y:r}}function BC(e,t,r){let{reference:u,floating:a}=e;const f=cd(t),m=aE(t),c=rE(m),z=af(t),k=f==="y",B=u.x+u.width/2-a.width/2,Z=u.y+u.height/2-a.height/2,X=u[c]/2-a[c]/2;let J;switch(z){case"top":J={x:B,y:u.y-a.height};break;case"bottom":J={x:B,y:u.y+u.height};break;case"right":J={x:u.x+u.width,y:Z};break;case"left":J={x:u.x-a.width,y:Z};break;default:J={x:u.x,y:u.y}}switch(Ay(t)){case"start":J[m]-=X*(r&&k?-1:1);break;case"end":J[m]+=X*(r&&k?-1:1);break}return J}async function J7(e,t){var r;t===void 0&&(t={});const{x:u,y:a,platform:f,rects:m,elements:c,strategy:z}=e,{boundary:k="clippingAncestors",rootBoundary:B="viewport",elementContext:Z="floating",altBoundary:X=!1,padding:J=0}=rf(t,e),ce=mD(J),ae=c[X?Z==="floating"?"reference":"floating":Z],Me=Kb(await f.getClippingRect({element:(r=await(f.isElement==null?void 0:f.isElement(ae)))==null||r?ae:ae.contextElement||await(f.getDocumentElement==null?void 0:f.getDocumentElement(c.floating)),boundary:k,rootBoundary:B,strategy:z})),Ae=Z==="floating"?{x:u,y:a,width:m.floating.width,height:m.floating.height}:m.reference,we=await(f.getOffsetParent==null?void 0:f.getOffsetParent(c.floating)),xe=await(f.isElement==null?void 0:f.isElement(we))?await(f.getScale==null?void 0:f.getScale(we))||{x:1,y:1}:{x:1,y:1},Se=Kb(f.convertOffsetParentRelativeRectToViewportRelativeRect?await f.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:Ae,offsetParent:we,strategy:z}):Ae);return{top:(Me.top-Se.top+ce.top)/xe.y,bottom:(Se.bottom-Me.bottom+ce.bottom)/xe.y,left:(Me.left-Se.left+ce.left)/xe.x,right:(Se.right-Me.right+ce.right)/xe.x}}const Q7=async(e,t,r)=>{const{placement:u="bottom",strategy:a="absolute",middleware:f=[],platform:m}=r,c=f.filter(Boolean),z=await(m.isRTL==null?void 0:m.isRTL(t));let k=await m.getElementRects({reference:e,floating:t,strategy:a}),{x:B,y:Z}=BC(k,u,z),X=u,J={},ce=0;for(let ae=0;ae<c.length;ae++){var ee;const{name:Me,fn:Ae}=c[ae],{x:we,y:xe,data:Se,reset:Fe}=await Ae({x:B,y:Z,initialPlacement:u,placement:X,strategy:a,middlewareData:J,rects:k,platform:{...m,detectOverflow:(ee=m.detectOverflow)!=null?ee:J7},elements:{reference:e,floating:t}});B=we??B,Z=xe??Z,J={...J,[Me]:{...J[Me],...Se}},Fe&&ce<=50&&(ce++,typeof Fe=="object"&&(Fe.placement&&(X=Fe.placement),Fe.rects&&(k=Fe.rects===!0?await m.getElementRects({reference:e,floating:t,strategy:a}):Fe.rects),{x:B,y:Z}=BC(k,X,z)),ae=-1)}return{x:B,y:Z,placement:X,strategy:a,middlewareData:J}},eV=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:u,placement:a,rects:f,platform:m,elements:c,middlewareData:z}=t,{element:k,padding:B=0}=rf(e,t)||{};if(k==null)return{};const Z=mD(B),X={x:r,y:u},J=aE(a),ce=rE(J),ee=await m.getDimensions(k),ae=J==="y",Me=ae?"top":"left",Ae=ae?"bottom":"right",we=ae?"clientHeight":"clientWidth",xe=f.reference[ce]+f.reference[J]-X[J]-f.floating[ce],Se=X[J]-f.reference[J],Fe=await(m.getOffsetParent==null?void 0:m.getOffsetParent(k));let Ue=Fe?Fe[we]:0;(!Ue||!await(m.isElement==null?void 0:m.isElement(Fe)))&&(Ue=c.floating[we]||f.floating[ce]);const it=xe/2-Se/2,Rt=Ue/2-ee[ce]/2-1,Pt=lp(Z[Me],Rt),$t=lp(Z[Ae],Rt),Zt=Pt,cn=Ue-ee[ce]-$t,ln=Ue/2-ee[ce]/2+it,xn=s2(Zt,ln,cn),Ge=!z.arrow&&Ay(a)!=null&&ln!==xn&&f.reference[ce]/2-(ln<Zt?Pt:$t)-ee[ce]/2<0,mt=Ge?ln<Zt?ln-Zt:ln-cn:0;return{[J]:X[J]+mt,data:{[J]:xn,centerOffset:ln-xn-mt,...Ge&&{alignmentOffset:mt}},reset:Ge}}}),tV=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,u;const{placement:a,middlewareData:f,rects:m,initialPlacement:c,platform:z,elements:k}=t,{mainAxis:B=!0,crossAxis:Z=!0,fallbackPlacements:X,fallbackStrategy:J="bestFit",fallbackAxisSideDirection:ce="none",flipAlignment:ee=!0,...ae}=rf(e,t);if((r=f.arrow)!=null&&r.alignmentOffset)return{};const Me=af(a),Ae=cd(c),we=af(c)===c,xe=await(z.isRTL==null?void 0:z.isRTL(k.floating)),Se=X||(we||!ee?[Yb(c)]:G7(c)),Fe=ce!=="none";!X&&Fe&&Se.push(...Y7(c,ee,ce,xe));const Ue=[c,...Se],it=await z.detectOverflow(t,ae),Rt=[];let Pt=((u=f.flip)==null?void 0:u.overflows)||[];if(B&&Rt.push(it[Me]),Z){const ln=q7(a,m,xe);Rt.push(it[ln[0]],it[ln[1]])}if(Pt=[...Pt,{placement:a,overflows:Rt}],!Rt.every(ln=>ln<=0)){var $t,Zt;const ln=((($t=f.flip)==null?void 0:$t.index)||0)+1,xn=Ue[ln];if(xn&&(!(Z==="alignment"?Ae!==cd(xn):!1)||Pt.every(qe=>cd(qe.placement)===Ae?qe.overflows[0]>0:!0)))return{data:{index:ln,overflows:Pt},reset:{placement:xn}};let Ge=(Zt=Pt.filter(mt=>mt.overflows[0]<=0).sort((mt,qe)=>mt.overflows[1]-qe.overflows[1])[0])==null?void 0:Zt.placement;if(!Ge)switch(J){case"bestFit":{var cn;const mt=(cn=Pt.filter(qe=>{if(Fe){const Bt=cd(qe.placement);return Bt===Ae||Bt==="y"}return!0}).map(qe=>[qe.placement,qe.overflows.filter(Bt=>Bt>0).reduce((Bt,jt)=>Bt+jt,0)]).sort((qe,Bt)=>qe[1]-Bt[1])[0])==null?void 0:cn[0];mt&&(Ge=mt);break}case"initialPlacement":Ge=c;break}if(a!==Ge)return{reset:{placement:Ge}}}return{}}}};function FC(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function UC(e){return F7.some(t=>e[t]>=0)}const nV=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r,platform:u}=t,{strategy:a="referenceHidden",...f}=rf(e,t);switch(a){case"referenceHidden":{const m=await u.detectOverflow(t,{...f,elementContext:"reference"}),c=FC(m,r.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:UC(c)}}}case"escaped":{const m=await u.detectOverflow(t,{...f,altBoundary:!0}),c=FC(m,r.floating);return{data:{escapedOffsets:c,escaped:UC(c)}}}default:return{}}}}},gD=new Set(["left","top"]);async function iV(e,t){const{placement:r,platform:u,elements:a}=e,f=await(u.isRTL==null?void 0:u.isRTL(a.floating)),m=af(r),c=Ay(r),z=cd(r)==="y",k=gD.has(m)?-1:1,B=f&&z?-1:1,Z=rf(t,e);let{mainAxis:X,crossAxis:J,alignmentAxis:ce}=typeof Z=="number"?{mainAxis:Z,crossAxis:0,alignmentAxis:null}:{mainAxis:Z.mainAxis||0,crossAxis:Z.crossAxis||0,alignmentAxis:Z.alignmentAxis};return c&&typeof ce=="number"&&(J=c==="end"?ce*-1:ce),z?{x:J*B,y:X*k}:{x:X*k,y:J*B}}const rV=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,u;const{x:a,y:f,placement:m,middlewareData:c}=t,z=await iV(t,e);return m===((r=c.offset)==null?void 0:r.placement)&&(u=c.arrow)!=null&&u.alignmentOffset?{}:{x:a+z.x,y:f+z.y,data:{...z,placement:m}}}}},aV=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:u,placement:a,platform:f}=t,{mainAxis:m=!0,crossAxis:c=!1,limiter:z={fn:Me=>{let{x:Ae,y:we}=Me;return{x:Ae,y:we}}},...k}=rf(e,t),B={x:r,y:u},Z=await f.detectOverflow(t,k),X=cd(af(a)),J=iE(X);let ce=B[J],ee=B[X];if(m){const Me=J==="y"?"top":"left",Ae=J==="y"?"bottom":"right",we=ce+Z[Me],xe=ce-Z[Ae];ce=s2(we,ce,xe)}if(c){const Me=X==="y"?"top":"left",Ae=X==="y"?"bottom":"right",we=ee+Z[Me],xe=ee-Z[Ae];ee=s2(we,ee,xe)}const ae=z.fn({...t,[J]:ce,[X]:ee});return{...ae,data:{x:ae.x-r,y:ae.y-u,enabled:{[J]:m,[X]:c}}}}}},oV=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:u,placement:a,rects:f,middlewareData:m}=t,{offset:c=0,mainAxis:z=!0,crossAxis:k=!0}=rf(e,t),B={x:r,y:u},Z=cd(a),X=iE(Z);let J=B[X],ce=B[Z];const ee=rf(c,t),ae=typeof ee=="number"?{mainAxis:ee,crossAxis:0}:{mainAxis:0,crossAxis:0,...ee};if(z){const we=X==="y"?"height":"width",xe=f.reference[X]-f.floating[we]+ae.mainAxis,Se=f.reference[X]+f.reference[we]-ae.mainAxis;J<xe?J=xe:J>Se&&(J=Se)}if(k){var Me,Ae;const we=X==="y"?"width":"height",xe=gD.has(af(a)),Se=f.reference[Z]-f.floating[we]+(xe&&((Me=m.offset)==null?void 0:Me[Z])||0)+(xe?0:ae.crossAxis),Fe=f.reference[Z]+f.reference[we]+(xe?0:((Ae=m.offset)==null?void 0:Ae[Z])||0)-(xe?ae.crossAxis:0);ce<Se?ce=Se:ce>Fe&&(ce=Fe)}return{[X]:J,[Z]:ce}}}},sV=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,u;const{placement:a,rects:f,platform:m,elements:c}=t,{apply:z=()=>{},...k}=rf(e,t),B=await m.detectOverflow(t,k),Z=af(a),X=Ay(a),J=cd(a)==="y",{width:ce,height:ee}=f.floating;let ae,Me;Z==="top"||Z==="bottom"?(ae=Z,Me=X===(await(m.isRTL==null?void 0:m.isRTL(c.floating))?"start":"end")?"left":"right"):(Me=Z,ae=X==="end"?"top":"bottom");const Ae=ee-B.top-B.bottom,we=ce-B.left-B.right,xe=lp(ee-B[ae],Ae),Se=lp(ce-B[Me],we),Fe=!t.middlewareData.shift;let Ue=xe,it=Se;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(it=we),(u=t.middlewareData.shift)!=null&&u.enabled.y&&(Ue=Ae),Fe&&!X){const Pt=Oc(B.left,0),$t=Oc(B.right,0),Zt=Oc(B.top,0),cn=Oc(B.bottom,0);J?it=ce-2*(Pt!==0||$t!==0?Pt+$t:Oc(B.left,B.right)):Ue=ee-2*(Zt!==0||cn!==0?Zt+cn:Oc(B.top,B.bottom))}await z({...t,availableWidth:it,availableHeight:Ue});const Rt=await m.getDimensions(c.floating);return ce!==Rt.width||ee!==Rt.height?{reset:{rects:!0}}:{}}}};function y1(){return typeof window<"u"}function Cy(e){return yD(e)?(e.nodeName||"").toLowerCase():"#document"}function Bc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function _d(e){var t;return(t=(yD(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function yD(e){return y1()?e instanceof Node||e instanceof Bc(e).Node:!1}function yh(e){return y1()?e instanceof Element||e instanceof Bc(e).Element:!1}function md(e){return y1()?e instanceof HTMLElement||e instanceof Bc(e).HTMLElement:!1}function VC(e){return!y1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Bc(e).ShadowRoot}const lV=new Set(["inline","contents"]);function Wv(e){const{overflow:t,overflowX:r,overflowY:u,display:a}=_h(e);return/auto|scroll|overlay|hidden|clip/.test(t+u+r)&&!lV.has(a)}const cV=new Set(["table","td","th"]);function uV(e){return cV.has(Cy(e))}const hV=[":popover-open",":modal"];function _1(e){return hV.some(t=>{try{return e.matches(t)}catch{return!1}})}const dV=["transform","translate","scale","rotate","perspective"],fV=["transform","translate","scale","rotate","perspective","filter"],pV=["paint","layout","strict","content"];function oE(e){const t=sE(),r=yh(e)?_h(e):e;return dV.some(u=>r[u]?r[u]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||fV.some(u=>(r.willChange||"").includes(u))||pV.some(u=>(r.contain||"").includes(u))}function mV(e){let t=cp(e);for(;md(t)&&!_y(t);){if(oE(t))return t;if(_1(t))return null;t=cp(t)}return null}function sE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const gV=new Set(["html","body","#document"]);function _y(e){return gV.has(Cy(e))}function _h(e){return Bc(e).getComputedStyle(e)}function v1(e){return yh(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function cp(e){if(Cy(e)==="html")return e;const t=e.assignedSlot||e.parentNode||VC(e)&&e.host||_d(e);return VC(t)?t.host:t}function _D(e){const t=cp(e);return _y(t)?e.ownerDocument?e.ownerDocument.body:e.body:md(t)&&Wv(t)?t:_D(t)}function pv(e,t,r){var u;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=_D(e),f=a===((u=e.ownerDocument)==null?void 0:u.body),m=Bc(a);if(f){const c=c2(m);return t.concat(m,m.visualViewport||[],Wv(a)?a:[],c&&r?pv(c):[])}return t.concat(a,pv(a,[],r))}function c2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function vD(e){const t=_h(e);let r=parseFloat(t.width)||0,u=parseFloat(t.height)||0;const a=md(e),f=a?e.offsetWidth:r,m=a?e.offsetHeight:u,c=Xb(r)!==f||Xb(u)!==m;return c&&(r=f,u=m),{width:r,height:u,$:c}}function lE(e){return yh(e)?e:e.contextElement}function ay(e){const t=lE(e);if(!md(t))return pd(1);const r=t.getBoundingClientRect(),{width:u,height:a,$:f}=vD(t);let m=(f?Xb(r.width):r.width)/u,c=(f?Xb(r.height):r.height)/a;return(!m||!Number.isFinite(m))&&(m=1),(!c||!Number.isFinite(c))&&(c=1),{x:m,y:c}}const yV=pd(0);function bD(e){const t=Bc(e);return!sE()||!t.visualViewport?yV:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _V(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Bc(e)?!1:t}function Om(e,t,r,u){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),f=lE(e);let m=pd(1);t&&(u?yh(u)&&(m=ay(u)):m=ay(e));const c=_V(f,r,u)?bD(f):pd(0);let z=(a.left+c.x)/m.x,k=(a.top+c.y)/m.y,B=a.width/m.x,Z=a.height/m.y;if(f){const X=Bc(f),J=u&&yh(u)?Bc(u):u;let ce=X,ee=c2(ce);for(;ee&&u&&J!==ce;){const ae=ay(ee),Me=ee.getBoundingClientRect(),Ae=_h(ee),we=Me.left+(ee.clientLeft+parseFloat(Ae.paddingLeft))*ae.x,xe=Me.top+(ee.clientTop+parseFloat(Ae.paddingTop))*ae.y;z*=ae.x,k*=ae.y,B*=ae.x,Z*=ae.y,z+=we,k+=xe,ce=Bc(ee),ee=c2(ce)}}return Kb({width:B,height:Z,x:z,y:k})}function b1(e,t){const r=v1(e).scrollLeft;return t?t.left+r:Om(_d(e)).left+r}function xD(e,t){const r=e.getBoundingClientRect(),u=r.left+t.scrollLeft-b1(e,r),a=r.top+t.scrollTop;return{x:u,y:a}}function vV(e){let{elements:t,rect:r,offsetParent:u,strategy:a}=e;const f=a==="fixed",m=_d(u),c=t?_1(t.floating):!1;if(u===m||c&&f)return r;let z={scrollLeft:0,scrollTop:0},k=pd(1);const B=pd(0),Z=md(u);if((Z||!Z&&!f)&&((Cy(u)!=="body"||Wv(m))&&(z=v1(u)),md(u))){const J=Om(u);k=ay(u),B.x=J.x+u.clientLeft,B.y=J.y+u.clientTop}const X=m&&!Z&&!f?xD(m,z):pd(0);return{width:r.width*k.x,height:r.height*k.y,x:r.x*k.x-z.scrollLeft*k.x+B.x+X.x,y:r.y*k.y-z.scrollTop*k.y+B.y+X.y}}function bV(e){return Array.from(e.getClientRects())}function xV(e){const t=_d(e),r=v1(e),u=e.ownerDocument.body,a=Oc(t.scrollWidth,t.clientWidth,u.scrollWidth,u.clientWidth),f=Oc(t.scrollHeight,t.clientHeight,u.scrollHeight,u.clientHeight);let m=-r.scrollLeft+b1(e);const c=-r.scrollTop;return _h(u).direction==="rtl"&&(m+=Oc(t.clientWidth,u.clientWidth)-a),{width:a,height:f,x:m,y:c}}const ZC=25;function wV(e,t){const r=Bc(e),u=_d(e),a=r.visualViewport;let f=u.clientWidth,m=u.clientHeight,c=0,z=0;if(a){f=a.width,m=a.height;const B=sE();(!B||B&&t==="fixed")&&(c=a.offsetLeft,z=a.offsetTop)}const k=b1(u);if(k<=0){const B=u.ownerDocument,Z=B.body,X=getComputedStyle(Z),J=B.compatMode==="CSS1Compat"&&parseFloat(X.marginLeft)+parseFloat(X.marginRight)||0,ce=Math.abs(u.clientWidth-Z.clientWidth-J);ce<=ZC&&(f-=ce)}else k<=ZC&&(f+=k);return{width:f,height:m,x:c,y:z}}const SV=new Set(["absolute","fixed"]);function TV(e,t){const r=Om(e,!0,t==="fixed"),u=r.top+e.clientTop,a=r.left+e.clientLeft,f=md(e)?ay(e):pd(1),m=e.clientWidth*f.x,c=e.clientHeight*f.y,z=a*f.x,k=u*f.y;return{width:m,height:c,x:z,y:k}}function qC(e,t,r){let u;if(t==="viewport")u=wV(e,r);else if(t==="document")u=xV(_d(e));else if(yh(t))u=TV(t,r);else{const a=bD(e);u={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Kb(u)}function wD(e,t){const r=cp(e);return r===t||!yh(r)||_y(r)?!1:_h(r).position==="fixed"||wD(r,t)}function EV(e,t){const r=t.get(e);if(r)return r;let u=pv(e,[],!1).filter(c=>yh(c)&&Cy(c)!=="body"),a=null;const f=_h(e).position==="fixed";let m=f?cp(e):e;for(;yh(m)&&!_y(m);){const c=_h(m),z=oE(m);!z&&c.position==="fixed"&&(a=null),(f?!z&&!a:!z&&c.position==="static"&&!!a&&SV.has(a.position)||Wv(m)&&!z&&wD(e,m))?u=u.filter(B=>B!==m):a=c,m=cp(m)}return t.set(e,u),u}function AV(e){let{element:t,boundary:r,rootBoundary:u,strategy:a}=e;const m=[...r==="clippingAncestors"?_1(t)?[]:EV(t,this._c):[].concat(r),u],c=m[0],z=m.reduce((k,B)=>{const Z=qC(t,B,a);return k.top=Oc(Z.top,k.top),k.right=lp(Z.right,k.right),k.bottom=lp(Z.bottom,k.bottom),k.left=Oc(Z.left,k.left),k},qC(t,c,a));return{width:z.right-z.left,height:z.bottom-z.top,x:z.left,y:z.top}}function CV(e){const{width:t,height:r}=vD(e);return{width:t,height:r}}function MV(e,t,r){const u=md(t),a=_d(t),f=r==="fixed",m=Om(e,!0,f,t);let c={scrollLeft:0,scrollTop:0};const z=pd(0);function k(){z.x=b1(a)}if(u||!u&&!f)if((Cy(t)!=="body"||Wv(a))&&(c=v1(t)),u){const J=Om(t,!0,f,t);z.x=J.x+t.clientLeft,z.y=J.y+t.clientTop}else a&&k();f&&!u&&a&&k();const B=a&&!u&&!f?xD(a,c):pd(0),Z=m.left+c.scrollLeft-z.x-B.x,X=m.top+c.scrollTop-z.y-B.y;return{x:Z,y:X,width:m.width,height:m.height}}function bw(e){return _h(e).position==="static"}function GC(e,t){if(!md(e)||_h(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return _d(e)===r&&(r=r.ownerDocument.body),r}function SD(e,t){const r=Bc(e);if(_1(e))return r;if(!md(e)){let a=cp(e);for(;a&&!_y(a);){if(yh(a)&&!bw(a))return a;a=cp(a)}return r}let u=GC(e,t);for(;u&&uV(u)&&bw(u);)u=GC(u,t);return u&&_y(u)&&bw(u)&&!oE(u)?r:u||mV(e)||r}const zV=async function(e){const t=this.getOffsetParent||SD,r=this.getDimensions,u=await r(e.floating);return{reference:MV(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:u.width,height:u.height}}};function IV(e){return _h(e).direction==="rtl"}const kV={convertOffsetParentRelativeRectToViewportRelativeRect:vV,getDocumentElement:_d,getClippingRect:AV,getOffsetParent:SD,getElementRects:zV,getClientRects:bV,getDimensions:CV,getScale:ay,isElement:yh,isRTL:IV};function TD(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function PV(e,t){let r=null,u;const a=_d(e);function f(){var c;clearTimeout(u),(c=r)==null||c.disconnect(),r=null}function m(c,z){c===void 0&&(c=!1),z===void 0&&(z=1),f();const k=e.getBoundingClientRect(),{left:B,top:Z,width:X,height:J}=k;if(c||t(),!X||!J)return;const ce=gb(Z),ee=gb(a.clientWidth-(B+X)),ae=gb(a.clientHeight-(Z+J)),Me=gb(B),we={rootMargin:-ce+"px "+-ee+"px "+-ae+"px "+-Me+"px",threshold:Oc(0,lp(1,z))||1};let xe=!0;function Se(Fe){const Ue=Fe[0].intersectionRatio;if(Ue!==z){if(!xe)return m();Ue?m(!1,Ue):u=setTimeout(()=>{m(!1,1e-7)},1e3)}Ue===1&&!TD(k,e.getBoundingClientRect())&&m(),xe=!1}try{r=new IntersectionObserver(Se,{...we,root:a.ownerDocument})}catch{r=new IntersectionObserver(Se,we)}r.observe(e)}return m(!0),f}function DV(e,t,r,u){u===void 0&&(u={});const{ancestorScroll:a=!0,ancestorResize:f=!0,elementResize:m=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:z=!1}=u,k=lE(e),B=a||f?[...k?pv(k):[],...pv(t)]:[];B.forEach(Me=>{a&&Me.addEventListener("scroll",r,{passive:!0}),f&&Me.addEventListener("resize",r)});const Z=k&&c?PV(k,r):null;let X=-1,J=null;m&&(J=new ResizeObserver(Me=>{let[Ae]=Me;Ae&&Ae.target===k&&J&&(J.unobserve(t),cancelAnimationFrame(X),X=requestAnimationFrame(()=>{var we;(we=J)==null||we.observe(t)})),r()}),k&&!z&&J.observe(k),J.observe(t));let ce,ee=z?Om(e):null;z&&ae();function ae(){const Me=Om(e);ee&&!TD(ee,Me)&&r(),ee=Me,ce=requestAnimationFrame(ae)}return r(),()=>{var Me;B.forEach(Ae=>{a&&Ae.removeEventListener("scroll",r),f&&Ae.removeEventListener("resize",r)}),Z?.(),(Me=J)==null||Me.disconnect(),J=null,z&&cancelAnimationFrame(ce)}}const LV=rV,RV=aV,OV=tV,NV=sV,$V=nV,HC=eV,jV=oV,BV=(e,t,r)=>{const u=new Map,a={platform:kV,...r},f={...a.platform,_c:u};return Q7(e,t,{...a,platform:f})};var FV=typeof document<"u",UV=function(){},zb=FV?de.useLayoutEffect:UV;function Jb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,u,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(u=r;u--!==0;)if(!Jb(e[u],t[u]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(u=r;u--!==0;)if(!{}.hasOwnProperty.call(t,a[u]))return!1;for(u=r;u--!==0;){const f=a[u];if(!(f==="_owner"&&e.$$typeof)&&!Jb(e[f],t[f]))return!1}return!0}return e!==e&&t!==t}function ED(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function WC(e,t){const r=ED(e);return Math.round(t*r)/r}function xw(e){const t=de.useRef(e);return zb(()=>{t.current=e}),t}function VV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:u=[],platform:a,elements:{reference:f,floating:m}={},transform:c=!0,whileElementsMounted:z,open:k}=e,[B,Z]=de.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[X,J]=de.useState(u);Jb(X,u)||J(u);const[ce,ee]=de.useState(null),[ae,Me]=de.useState(null),Ae=de.useCallback(qe=>{qe!==Fe.current&&(Fe.current=qe,ee(qe))},[]),we=de.useCallback(qe=>{qe!==Ue.current&&(Ue.current=qe,Me(qe))},[]),xe=f||ce,Se=m||ae,Fe=de.useRef(null),Ue=de.useRef(null),it=de.useRef(B),Rt=z!=null,Pt=xw(z),$t=xw(a),Zt=xw(k),cn=de.useCallback(()=>{if(!Fe.current||!Ue.current)return;const qe={placement:t,strategy:r,middleware:X};$t.current&&(qe.platform=$t.current),BV(Fe.current,Ue.current,qe).then(Bt=>{const jt={...Bt,isPositioned:Zt.current!==!1};ln.current&&!Jb(it.current,jt)&&(it.current=jt,Fv.flushSync(()=>{Z(jt)}))})},[X,t,r,$t,Zt]);zb(()=>{k===!1&&it.current.isPositioned&&(it.current.isPositioned=!1,Z(qe=>({...qe,isPositioned:!1})))},[k]);const ln=de.useRef(!1);zb(()=>(ln.current=!0,()=>{ln.current=!1}),[]),zb(()=>{if(xe&&(Fe.current=xe),Se&&(Ue.current=Se),xe&&Se){if(Pt.current)return Pt.current(xe,Se,cn);cn()}},[xe,Se,cn,Pt,Rt]);const xn=de.useMemo(()=>({reference:Fe,floating:Ue,setReference:Ae,setFloating:we}),[Ae,we]),Ge=de.useMemo(()=>({reference:xe,floating:Se}),[xe,Se]),mt=de.useMemo(()=>{const qe={position:r,left:0,top:0};if(!Ge.floating)return qe;const Bt=WC(Ge.floating,B.x),jt=WC(Ge.floating,B.y);return c?{...qe,transform:"translate("+Bt+"px, "+jt+"px)",...ED(Ge.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Bt,top:jt}},[r,c,Ge.floating,B.x,B.y]);return de.useMemo(()=>({...B,update:cn,refs:xn,elements:Ge,floatingStyles:mt}),[B,cn,xn,Ge,mt])}const ZV=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:u,padding:a}=typeof e=="function"?e(r):e;return u&&t(u)?u.current!=null?HC({element:u.current,padding:a}).fn(r):{}:u?HC({element:u,padding:a}).fn(r):{}}}},qV=(e,t)=>({...LV(e),options:[e,t]}),GV=(e,t)=>({...RV(e),options:[e,t]}),HV=(e,t)=>({...jV(e),options:[e,t]}),WV=(e,t)=>({...OV(e),options:[e,t]}),XV=(e,t)=>({...NV(e),options:[e,t]}),YV=(e,t)=>({...$V(e),options:[e,t]}),KV=(e,t)=>({...ZV(e),options:[e,t]});var JV="Arrow",AD=de.forwardRef((e,t)=>{const{children:r,width:u=10,height:a=5,...f}=e;return me.jsx(br.svg,{...f,ref:t,width:u,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:me.jsx("polygon",{points:"0,0 30,0 15,10"})})});AD.displayName=JV;var QV=AD,cE="Popper",[CD,x1]=Ey(cE),[eZ,MD]=CD(cE),zD=e=>{const{__scopePopper:t,children:r}=e,[u,a]=de.useState(null);return me.jsx(eZ,{scope:t,anchor:u,onAnchorChange:a,children:r})};zD.displayName=cE;var ID="PopperAnchor",kD=de.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:u,...a}=e,f=MD(ID,r),m=de.useRef(null),c=Ar(t,m),z=de.useRef(null);return de.useEffect(()=>{const k=z.current;z.current=u?.current||m.current,k!==z.current&&f.onAnchorChange(z.current)}),u?null:me.jsx(br.div,{...a,ref:c})});kD.displayName=ID;var uE="PopperContent",[tZ,nZ]=CD(uE),PD=de.forwardRef((e,t)=>{const{__scopePopper:r,side:u="bottom",sideOffset:a=0,align:f="center",alignOffset:m=0,arrowPadding:c=0,avoidCollisions:z=!0,collisionBoundary:k=[],collisionPadding:B=0,sticky:Z="partial",hideWhenDetached:X=!1,updatePositionStrategy:J="optimized",onPlaced:ce,...ee}=e,ae=MD(uE,r),[Me,Ae]=de.useState(null),we=Ar(t,At=>Ae(At)),[xe,Se]=de.useState(null),Fe=nE(xe),Ue=Fe?.width??0,it=Fe?.height??0,Rt=u+(f!=="center"?"-"+f:""),Pt=typeof B=="number"?B:{top:0,right:0,bottom:0,left:0,...B},$t=Array.isArray(k)?k:[k],Zt=$t.length>0,cn={padding:Pt,boundary:$t.filter(rZ),altBoundary:Zt},{refs:ln,floatingStyles:xn,placement:Ge,isPositioned:mt,middlewareData:qe}=VV({strategy:"fixed",placement:Rt,whileElementsMounted:(...At)=>DV(...At,{animationFrame:J==="always"}),elements:{reference:ae.anchor},middleware:[qV({mainAxis:a+it,alignmentAxis:m}),z&&GV({mainAxis:!0,crossAxis:!1,limiter:Z==="partial"?HV():void 0,...cn}),z&&WV({...cn}),XV({...cn,apply:({elements:At,rects:un,availableWidth:Cn,availableHeight:Dn})=>{const{width:Wn,height:Bn}=un.reference,Cr=At.floating.style;Cr.setProperty("--radix-popper-available-width",`${Cn}px`),Cr.setProperty("--radix-popper-available-height",`${Dn}px`),Cr.setProperty("--radix-popper-anchor-width",`${Wn}px`),Cr.setProperty("--radix-popper-anchor-height",`${Bn}px`)}}),xe&&KV({element:xe,padding:c}),aZ({arrowWidth:Ue,arrowHeight:it}),X&&YV({strategy:"referenceHidden",...cn})]}),[Bt,jt]=RD(Ge),Oe=Rm(ce);Bs(()=>{mt&&Oe?.()},[mt,Oe]);const pt=qe.arrow?.x,Mt=qe.arrow?.y,It=qe.arrow?.centerOffset!==0,[Nt,Ft]=de.useState();return Bs(()=>{Me&&Ft(window.getComputedStyle(Me).zIndex)},[Me]),me.jsx("div",{ref:ln.setFloating,"data-radix-popper-content-wrapper":"",style:{...xn,transform:mt?xn.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Nt,"--radix-popper-transform-origin":[qe.transformOrigin?.x,qe.transformOrigin?.y].join(" "),...qe.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:me.jsx(tZ,{scope:r,placedSide:Bt,onArrowChange:Se,arrowX:pt,arrowY:Mt,shouldHideArrow:It,children:me.jsx(br.div,{"data-side":Bt,"data-align":jt,...ee,ref:we,style:{...ee.style,animation:mt?void 0:"none"}})})})});PD.displayName=uE;var DD="PopperArrow",iZ={top:"bottom",right:"left",bottom:"top",left:"right"},LD=de.forwardRef(function(t,r){const{__scopePopper:u,...a}=t,f=nZ(DD,u),m=iZ[f.placedSide];return me.jsx("span",{ref:f.onArrowChange,style:{position:"absolute",left:f.arrowX,top:f.arrowY,[m]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[f.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[f.placedSide],visibility:f.shouldHideArrow?"hidden":void 0},children:me.jsx(QV,{...a,ref:r,style:{...a.style,display:"block"}})})});LD.displayName=DD;function rZ(e){return e!==null}var aZ=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:u,middlewareData:a}=t,m=a.arrow?.centerOffset!==0,c=m?0:e.arrowWidth,z=m?0:e.arrowHeight,[k,B]=RD(r),Z={start:"0%",center:"50%",end:"100%"}[B],X=(a.arrow?.x??0)+c/2,J=(a.arrow?.y??0)+z/2;let ce="",ee="";return k==="bottom"?(ce=m?Z:`${X}px`,ee=`${-z}px`):k==="top"?(ce=m?Z:`${X}px`,ee=`${u.floating.height+z}px`):k==="right"?(ce=`${-z}px`,ee=m?Z:`${J}px`):k==="left"&&(ce=`${u.floating.width+z}px`,ee=m?Z:`${J}px`),{data:{x:ce,y:ee}}}});function RD(e){const[t,r="center"]=e.split("-");return[t,r]}var OD=zD,ND=kD,$D=PD,jD=LD;function Qb(e,[t,r]){return Math.min(r,Math.max(t,e))}var oZ=[" ","Enter","ArrowUp","ArrowDown"],sZ=[" ","Enter"],Nm="Select",[w1,S1,lZ]=eD(Nm),[My]=Ey(Nm,[lZ,x1]),T1=x1(),[cZ,dp]=My(Nm),[uZ,hZ]=My(Nm),BD=e=>{const{__scopeSelect:t,children:r,open:u,defaultOpen:a,onOpenChange:f,value:m,defaultValue:c,onValueChange:z,dir:k,name:B,autoComplete:Z,disabled:X,required:J,form:ce}=e,ee=T1(t),[ae,Me]=de.useState(null),[Ae,we]=de.useState(null),[xe,Se]=de.useState(!1),Fe=tD(k),[Ue,it]=fv({prop:u,defaultProp:a??!1,onChange:f,caller:Nm}),[Rt,Pt]=fv({prop:m,defaultProp:c,onChange:z,caller:Nm}),$t=de.useRef(null),Zt=ae?ce||!!ae.closest("form"):!0,[cn,ln]=de.useState(new Set),xn=Array.from(cn).map(Ge=>Ge.props.value).join(";");return me.jsx(OD,{...ee,children:me.jsxs(cZ,{required:J,scope:t,trigger:ae,onTriggerChange:Me,valueNode:Ae,onValueNodeChange:we,valueNodeHasChildren:xe,onValueNodeHasChildrenChange:Se,contentId:m1(),value:Rt,onValueChange:Pt,open:Ue,onOpenChange:it,dir:Fe,triggerPointerDownPosRef:$t,disabled:X,children:[me.jsx(w1.Provider,{scope:t,children:me.jsx(uZ,{scope:e.__scopeSelect,onNativeOptionAdd:de.useCallback(Ge=>{ln(mt=>new Set(mt).add(Ge))},[]),onNativeOptionRemove:de.useCallback(Ge=>{ln(mt=>{const qe=new Set(mt);return qe.delete(Ge),qe})},[]),children:r})}),Zt?me.jsxs(cL,{"aria-hidden":!0,required:J,tabIndex:-1,name:B,autoComplete:Z,value:Rt,onChange:Ge=>Pt(Ge.target.value),disabled:X,form:ce,children:[Rt===void 0?me.jsx("option",{value:""}):null,Array.from(cn)]},xn):null]})})};BD.displayName=Nm;var FD="SelectTrigger",UD=de.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:u=!1,...a}=e,f=T1(r),m=dp(FD,r),c=m.disabled||u,z=Ar(t,m.onTriggerChange),k=S1(r),B=de.useRef("touch"),[Z,X,J]=hL(ee=>{const ae=k().filter(we=>!we.disabled),Me=ae.find(we=>we.value===m.value),Ae=dL(ae,ee,Me);Ae!==void 0&&m.onValueChange(Ae.value)}),ce=ee=>{c||(m.onOpenChange(!0),J()),ee&&(m.triggerPointerDownPosRef.current={x:Math.round(ee.pageX),y:Math.round(ee.pageY)})};return me.jsx(ND,{asChild:!0,...f,children:me.jsx(br.button,{type:"button",role:"combobox","aria-controls":m.contentId,"aria-expanded":m.open,"aria-required":m.required,"aria-autocomplete":"none",dir:m.dir,"data-state":m.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":uL(m.value)?"":void 0,...a,ref:z,onClick:Wi(a.onClick,ee=>{ee.currentTarget.focus(),B.current!=="mouse"&&ce(ee)}),onPointerDown:Wi(a.onPointerDown,ee=>{B.current=ee.pointerType;const ae=ee.target;ae.hasPointerCapture(ee.pointerId)&&ae.releasePointerCapture(ee.pointerId),ee.button===0&&ee.ctrlKey===!1&&ee.pointerType==="mouse"&&(ce(ee),ee.preventDefault())}),onKeyDown:Wi(a.onKeyDown,ee=>{const ae=Z.current!=="";!(ee.ctrlKey||ee.altKey||ee.metaKey)&&ee.key.length===1&&X(ee.key),!(ae&&ee.key===" ")&&oZ.includes(ee.key)&&(ce(),ee.preventDefault())})})})});UD.displayName=FD;var VD="SelectValue",ZD=de.forwardRef((e,t)=>{const{__scopeSelect:r,className:u,style:a,children:f,placeholder:m="",...c}=e,z=dp(VD,r),{onValueNodeHasChildrenChange:k}=z,B=f!==void 0,Z=Ar(t,z.onValueNodeChange);return Bs(()=>{k(B)},[k,B]),me.jsx(br.span,{...c,ref:Z,style:{pointerEvents:"none"},children:uL(z.value)?me.jsx(me.Fragment,{children:m}):f})});ZD.displayName=VD;var dZ="SelectIcon",qD=de.forwardRef((e,t)=>{const{__scopeSelect:r,children:u,...a}=e;return me.jsx(br.span,{"aria-hidden":!0,...a,ref:t,children:u||""})});qD.displayName=dZ;var fZ="SelectPortal",GD=e=>me.jsx(eE,{asChild:!0,...e});GD.displayName=fZ;var $m="SelectContent",HD=de.forwardRef((e,t)=>{const r=dp($m,e.__scopeSelect),[u,a]=de.useState();if(Bs(()=>{a(new DocumentFragment)},[]),!r.open){const f=u;return f?Fv.createPortal(me.jsx(WD,{scope:e.__scopeSelect,children:me.jsx(w1.Slot,{scope:e.__scopeSelect,children:me.jsx("div",{children:e.children})})}),f):null}return me.jsx(XD,{...e,ref:t})});HD.displayName=$m;var ch=10,[WD,fp]=My($m),pZ="SelectContentImpl",mZ=Wb("SelectContent.RemoveScroll"),XD=de.forwardRef((e,t)=>{const{__scopeSelect:r,position:u="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:f,onPointerDownOutside:m,side:c,sideOffset:z,align:k,alignOffset:B,arrowPadding:Z,collisionBoundary:X,collisionPadding:J,sticky:ce,hideWhenDetached:ee,avoidCollisions:ae,...Me}=e,Ae=dp($m,r),[we,xe]=de.useState(null),[Se,Fe]=de.useState(null),Ue=Ar(t,At=>xe(At)),[it,Rt]=de.useState(null),[Pt,$t]=de.useState(null),Zt=S1(r),[cn,ln]=de.useState(!1),xn=de.useRef(!1);de.useEffect(()=>{if(we)return B7(we)},[we]),e7();const Ge=de.useCallback(At=>{const[un,...Cn]=Zt().map(Bn=>Bn.ref.current),[Dn]=Cn.slice(-1),Wn=document.activeElement;for(const Bn of At)if(Bn===Wn||(Bn?.scrollIntoView({block:"nearest"}),Bn===un&&Se&&(Se.scrollTop=0),Bn===Dn&&Se&&(Se.scrollTop=Se.scrollHeight),Bn?.focus(),document.activeElement!==Wn))return},[Zt,Se]),mt=de.useCallback(()=>Ge([it,we]),[Ge,it,we]);de.useEffect(()=>{cn&&mt()},[cn,mt]);const{onOpenChange:qe,triggerPointerDownPosRef:Bt}=Ae;de.useEffect(()=>{if(we){let At={x:0,y:0};const un=Dn=>{At={x:Math.abs(Math.round(Dn.pageX)-(Bt.current?.x??0)),y:Math.abs(Math.round(Dn.pageY)-(Bt.current?.y??0))}},Cn=Dn=>{At.x<=10&&At.y<=10?Dn.preventDefault():we.contains(Dn.target)||qe(!1),document.removeEventListener("pointermove",un),Bt.current=null};return Bt.current!==null&&(document.addEventListener("pointermove",un),document.addEventListener("pointerup",Cn,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",un),document.removeEventListener("pointerup",Cn,{capture:!0})}}},[we,qe,Bt]),de.useEffect(()=>{const At=()=>qe(!1);return window.addEventListener("blur",At),window.addEventListener("resize",At),()=>{window.removeEventListener("blur",At),window.removeEventListener("resize",At)}},[qe]);const[jt,Oe]=hL(At=>{const un=Zt().filter(Wn=>!Wn.disabled),Cn=un.find(Wn=>Wn.ref.current===document.activeElement),Dn=dL(un,At,Cn);Dn&&setTimeout(()=>Dn.ref.current.focus())}),pt=de.useCallback((At,un,Cn)=>{const Dn=!xn.current&&!Cn;(Ae.value!==void 0&&Ae.value===un||Dn)&&(Rt(At),Dn&&(xn.current=!0))},[Ae.value]),Mt=de.useCallback(()=>we?.focus(),[we]),It=de.useCallback((At,un,Cn)=>{const Dn=!xn.current&&!Cn;(Ae.value!==void 0&&Ae.value===un||Dn)&&$t(At)},[Ae.value]),Nt=u==="popper"?u2:YD,Ft=Nt===u2?{side:c,sideOffset:z,align:k,alignOffset:B,arrowPadding:Z,collisionBoundary:X,collisionPadding:J,sticky:ce,hideWhenDetached:ee,avoidCollisions:ae}:{};return me.jsx(WD,{scope:r,content:we,viewport:Se,onViewportChange:Fe,itemRefCallback:pt,selectedItem:it,onItemLeave:Mt,itemTextRefCallback:It,focusSelectedItem:mt,selectedItemText:Pt,position:u,isPositioned:cn,searchRef:jt,children:me.jsx(fD,{as:mZ,allowPinchZoom:!0,children:me.jsx(rD,{asChild:!0,trapped:Ae.open,onMountAutoFocus:At=>{At.preventDefault()},onUnmountAutoFocus:Wi(a,At=>{Ae.trigger?.focus({preventScroll:!0}),At.preventDefault()}),children:me.jsx(QT,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:At=>At.preventDefault(),onDismiss:()=>Ae.onOpenChange(!1),children:me.jsx(Nt,{role:"listbox",id:Ae.contentId,"data-state":Ae.open?"open":"closed",dir:Ae.dir,onContextMenu:At=>At.preventDefault(),...Me,...Ft,onPlaced:()=>ln(!0),ref:Ue,style:{display:"flex",flexDirection:"column",outline:"none",...Me.style},onKeyDown:Wi(Me.onKeyDown,At=>{const un=At.ctrlKey||At.altKey||At.metaKey;if(At.key==="Tab"&&At.preventDefault(),!un&&At.key.length===1&&Oe(At.key),["ArrowUp","ArrowDown","Home","End"].includes(At.key)){let Dn=Zt().filter(Wn=>!Wn.disabled).map(Wn=>Wn.ref.current);if(["ArrowUp","End"].includes(At.key)&&(Dn=Dn.slice().reverse()),["ArrowUp","ArrowDown"].includes(At.key)){const Wn=At.target,Bn=Dn.indexOf(Wn);Dn=Dn.slice(Bn+1)}setTimeout(()=>Ge(Dn)),At.preventDefault()}})})})})})})});XD.displayName=pZ;var gZ="SelectItemAlignedPosition",YD=de.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:u,...a}=e,f=dp($m,r),m=fp($m,r),[c,z]=de.useState(null),[k,B]=de.useState(null),Z=Ar(t,Ue=>B(Ue)),X=S1(r),J=de.useRef(!1),ce=de.useRef(!0),{viewport:ee,selectedItem:ae,selectedItemText:Me,focusSelectedItem:Ae}=m,we=de.useCallback(()=>{if(f.trigger&&f.valueNode&&c&&k&&ee&&ae&&Me){const Ue=f.trigger.getBoundingClientRect(),it=k.getBoundingClientRect(),Rt=f.valueNode.getBoundingClientRect(),Pt=Me.getBoundingClientRect();if(f.dir!=="rtl"){const Wn=Pt.left-it.left,Bn=Rt.left-Wn,Cr=Ue.left-Bn,bi=Ue.width+Cr,qr=Math.max(bi,it.width),da=window.innerWidth-ch,Pi=Qb(Bn,[ch,Math.max(ch,da-qr)]);c.style.minWidth=bi+"px",c.style.left=Pi+"px"}else{const Wn=it.right-Pt.right,Bn=window.innerWidth-Rt.right-Wn,Cr=window.innerWidth-Ue.right-Bn,bi=Ue.width+Cr,qr=Math.max(bi,it.width),da=window.innerWidth-ch,Pi=Qb(Bn,[ch,Math.max(ch,da-qr)]);c.style.minWidth=bi+"px",c.style.right=Pi+"px"}const $t=X(),Zt=window.innerHeight-ch*2,cn=ee.scrollHeight,ln=window.getComputedStyle(k),xn=parseInt(ln.borderTopWidth,10),Ge=parseInt(ln.paddingTop,10),mt=parseInt(ln.borderBottomWidth,10),qe=parseInt(ln.paddingBottom,10),Bt=xn+Ge+cn+qe+mt,jt=Math.min(ae.offsetHeight*5,Bt),Oe=window.getComputedStyle(ee),pt=parseInt(Oe.paddingTop,10),Mt=parseInt(Oe.paddingBottom,10),It=Ue.top+Ue.height/2-ch,Nt=Zt-It,Ft=ae.offsetHeight/2,At=ae.offsetTop+Ft,un=xn+Ge+At,Cn=Bt-un;if(un<=It){const Wn=$t.length>0&&ae===$t[$t.length-1].ref.current;c.style.bottom="0px";const Bn=k.clientHeight-ee.offsetTop-ee.offsetHeight,Cr=Math.max(Nt,Ft+(Wn?Mt:0)+Bn+mt),bi=un+Cr;c.style.height=bi+"px"}else{const Wn=$t.length>0&&ae===$t[0].ref.current;c.style.top="0px";const Cr=Math.max(It,xn+ee.offsetTop+(Wn?pt:0)+Ft)+Cn;c.style.height=Cr+"px",ee.scrollTop=un-It+ee.offsetTop}c.style.margin=`${ch}px 0`,c.style.minHeight=jt+"px",c.style.maxHeight=Zt+"px",u?.(),requestAnimationFrame(()=>J.current=!0)}},[X,f.trigger,f.valueNode,c,k,ee,ae,Me,f.dir,u]);Bs(()=>we(),[we]);const[xe,Se]=de.useState();Bs(()=>{k&&Se(window.getComputedStyle(k).zIndex)},[k]);const Fe=de.useCallback(Ue=>{Ue&&ce.current===!0&&(we(),Ae?.(),ce.current=!1)},[we,Ae]);return me.jsx(_Z,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:J,onScrollButtonChange:Fe,children:me.jsx("div",{ref:z,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:xe},children:me.jsx(br.div,{...a,ref:Z,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});YD.displayName=gZ;var yZ="SelectPopperPosition",u2=de.forwardRef((e,t)=>{const{__scopeSelect:r,align:u="start",collisionPadding:a=ch,...f}=e,m=T1(r);return me.jsx($D,{...m,...f,ref:t,align:u,collisionPadding:a,style:{boxSizing:"border-box",...f.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});u2.displayName=yZ;var[_Z,hE]=My($m,{}),h2="SelectViewport",KD=de.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:u,...a}=e,f=fp(h2,r),m=hE(h2,r),c=Ar(t,f.onViewportChange),z=de.useRef(0);return me.jsxs(me.Fragment,{children:[me.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:u}),me.jsx(w1.Slot,{scope:r,children:me.jsx(br.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Wi(a.onScroll,k=>{const B=k.currentTarget,{contentWrapper:Z,shouldExpandOnScrollRef:X}=m;if(X?.current&&Z){const J=Math.abs(z.current-B.scrollTop);if(J>0){const ce=window.innerHeight-ch*2,ee=parseFloat(Z.style.minHeight),ae=parseFloat(Z.style.height),Me=Math.max(ee,ae);if(Me<ce){const Ae=Me+J,we=Math.min(ce,Ae),xe=Ae-we;Z.style.height=we+"px",Z.style.bottom==="0px"&&(B.scrollTop=xe>0?xe:0,Z.style.justifyContent="flex-end")}}}z.current=B.scrollTop})})})]})});KD.displayName=h2;var JD="SelectGroup",[vZ,bZ]=My(JD),QD=de.forwardRef((e,t)=>{const{__scopeSelect:r,...u}=e,a=m1();return me.jsx(vZ,{scope:r,id:a,children:me.jsx(br.div,{role:"group","aria-labelledby":a,...u,ref:t})})});QD.displayName=JD;var eL="SelectLabel",xZ=de.forwardRef((e,t)=>{const{__scopeSelect:r,...u}=e,a=bZ(eL,r);return me.jsx(br.div,{id:a.id,...u,ref:t})});xZ.displayName=eL;var ex="SelectItem",[wZ,tL]=My(ex),nL=de.forwardRef((e,t)=>{const{__scopeSelect:r,value:u,disabled:a=!1,textValue:f,...m}=e,c=dp(ex,r),z=fp(ex,r),k=c.value===u,[B,Z]=de.useState(f??""),[X,J]=de.useState(!1),ce=Ar(t,Ae=>z.itemRefCallback?.(Ae,u,a)),ee=m1(),ae=de.useRef("touch"),Me=()=>{a||(c.onValueChange(u),c.onOpenChange(!1))};if(u==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return me.jsx(wZ,{scope:r,value:u,disabled:a,textId:ee,isSelected:k,onItemTextChange:de.useCallback(Ae=>{Z(we=>we||(Ae?.textContent??"").trim())},[]),children:me.jsx(w1.ItemSlot,{scope:r,value:u,disabled:a,textValue:B,children:me.jsx(br.div,{role:"option","aria-labelledby":ee,"data-highlighted":X?"":void 0,"aria-selected":k&&X,"data-state":k?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...m,ref:ce,onFocus:Wi(m.onFocus,()=>J(!0)),onBlur:Wi(m.onBlur,()=>J(!1)),onClick:Wi(m.onClick,()=>{ae.current!=="mouse"&&Me()}),onPointerUp:Wi(m.onPointerUp,()=>{ae.current==="mouse"&&Me()}),onPointerDown:Wi(m.onPointerDown,Ae=>{ae.current=Ae.pointerType}),onPointerMove:Wi(m.onPointerMove,Ae=>{ae.current=Ae.pointerType,a?z.onItemLeave?.():ae.current==="mouse"&&Ae.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Wi(m.onPointerLeave,Ae=>{Ae.currentTarget===document.activeElement&&z.onItemLeave?.()}),onKeyDown:Wi(m.onKeyDown,Ae=>{z.searchRef?.current!==""&&Ae.key===" "||(sZ.includes(Ae.key)&&Me(),Ae.key===" "&&Ae.preventDefault())})})})})});nL.displayName=ex;var q_="SelectItemText",iL=de.forwardRef((e,t)=>{const{__scopeSelect:r,className:u,style:a,...f}=e,m=dp(q_,r),c=fp(q_,r),z=tL(q_,r),k=hZ(q_,r),[B,Z]=de.useState(null),X=Ar(t,Me=>Z(Me),z.onItemTextChange,Me=>c.itemTextRefCallback?.(Me,z.value,z.disabled)),J=B?.textContent,ce=de.useMemo(()=>me.jsx("option",{value:z.value,disabled:z.disabled,children:J},z.value),[z.disabled,z.value,J]),{onNativeOptionAdd:ee,onNativeOptionRemove:ae}=k;return Bs(()=>(ee(ce),()=>ae(ce)),[ee,ae,ce]),me.jsxs(me.Fragment,{children:[me.jsx(br.span,{id:z.textId,...f,ref:X}),z.isSelected&&m.valueNode&&!m.valueNodeHasChildren?Fv.createPortal(f.children,m.valueNode):null]})});iL.displayName=q_;var rL="SelectItemIndicator",aL=de.forwardRef((e,t)=>{const{__scopeSelect:r,...u}=e;return tL(rL,r).isSelected?me.jsx(br.span,{"aria-hidden":!0,...u,ref:t}):null});aL.displayName=rL;var d2="SelectScrollUpButton",oL=de.forwardRef((e,t)=>{const r=fp(d2,e.__scopeSelect),u=hE(d2,e.__scopeSelect),[a,f]=de.useState(!1),m=Ar(t,u.onScrollButtonChange);return Bs(()=>{if(r.viewport&&r.isPositioned){let c=function(){const k=z.scrollTop>0;f(k)};const z=r.viewport;return c(),z.addEventListener("scroll",c),()=>z.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?me.jsx(lL,{...e,ref:m,onAutoScroll:()=>{const{viewport:c,selectedItem:z}=r;c&&z&&(c.scrollTop=c.scrollTop-z.offsetHeight)}}):null});oL.displayName=d2;var f2="SelectScrollDownButton",sL=de.forwardRef((e,t)=>{const r=fp(f2,e.__scopeSelect),u=hE(f2,e.__scopeSelect),[a,f]=de.useState(!1),m=Ar(t,u.onScrollButtonChange);return Bs(()=>{if(r.viewport&&r.isPositioned){let c=function(){const k=z.scrollHeight-z.clientHeight,B=Math.ceil(z.scrollTop)<k;f(B)};const z=r.viewport;return c(),z.addEventListener("scroll",c),()=>z.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?me.jsx(lL,{...e,ref:m,onAutoScroll:()=>{const{viewport:c,selectedItem:z}=r;c&&z&&(c.scrollTop=c.scrollTop+z.offsetHeight)}}):null});sL.displayName=f2;var lL=de.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:u,...a}=e,f=fp("SelectScrollButton",r),m=de.useRef(null),c=S1(r),z=de.useCallback(()=>{m.current!==null&&(window.clearInterval(m.current),m.current=null)},[]);return de.useEffect(()=>()=>z(),[z]),Bs(()=>{c().find(B=>B.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),me.jsx(br.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Wi(a.onPointerDown,()=>{m.current===null&&(m.current=window.setInterval(u,50))}),onPointerMove:Wi(a.onPointerMove,()=>{f.onItemLeave?.(),m.current===null&&(m.current=window.setInterval(u,50))}),onPointerLeave:Wi(a.onPointerLeave,()=>{z()})})}),SZ="SelectSeparator",TZ=de.forwardRef((e,t)=>{const{__scopeSelect:r,...u}=e;return me.jsx(br.div,{"aria-hidden":!0,...u,ref:t})});TZ.displayName=SZ;var p2="SelectArrow",EZ=de.forwardRef((e,t)=>{const{__scopeSelect:r,...u}=e,a=T1(r),f=dp(p2,r),m=fp(p2,r);return f.open&&m.position==="popper"?me.jsx(jD,{...a,...u,ref:t}):null});EZ.displayName=p2;var AZ="SelectBubbleInput",cL=de.forwardRef(({__scopeSelect:e,value:t,...r},u)=>{const a=de.useRef(null),f=Ar(u,a),m=tE(t);return de.useEffect(()=>{const c=a.current;if(!c)return;const z=window.HTMLSelectElement.prototype,B=Object.getOwnPropertyDescriptor(z,"value").set;if(m!==t&&B){const Z=new Event("change",{bubbles:!0});B.call(c,t),c.dispatchEvent(Z)}},[m,t]),me.jsx(br.select,{...r,style:{...J3,...r.style},ref:f,defaultValue:t})});cL.displayName=AZ;function uL(e){return e===""||e===void 0}function hL(e){const t=Rm(e),r=de.useRef(""),u=de.useRef(0),a=de.useCallback(m=>{const c=r.current+m;t(c),(function z(k){r.current=k,window.clearTimeout(u.current),k!==""&&(u.current=window.setTimeout(()=>z(""),1e3))})(c)},[t]),f=de.useCallback(()=>{r.current="",window.clearTimeout(u.current)},[]);return de.useEffect(()=>()=>window.clearTimeout(u.current),[]),[r,a,f]}function dL(e,t,r){const a=t.length>1&&Array.from(t).every(k=>k===t[0])?t[0]:t,f=r?e.indexOf(r):-1;let m=CZ(e,Math.max(f,0));a.length===1&&(m=m.filter(k=>k!==r));const z=m.find(k=>k.textValue.toLowerCase().startsWith(a.toLowerCase()));return z!==r?z:void 0}function CZ(e,t){return e.map((r,u)=>e[(t+u)%e.length])}var MZ=BD,zZ=UD,IZ=ZD,kZ=qD,PZ=GD,DZ=HD,LZ=KD,RZ=QD,OZ=nL,NZ=iL,$Z=aL,jZ=oL,BZ=sL,fL=["PageUp","PageDown"],pL=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],mL={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},zy="Slider",[m2,FZ,UZ]=eD(zy),[gL]=Ey(zy,[UZ]),[VZ,E1]=gL(zy),yL=de.forwardRef((e,t)=>{const{name:r,min:u=0,max:a=100,step:f=1,orientation:m="horizontal",disabled:c=!1,minStepsBetweenThumbs:z=0,defaultValue:k=[u],value:B,onValueChange:Z=()=>{},onValueCommit:X=()=>{},inverted:J=!1,form:ce,...ee}=e,ae=de.useRef(new Set),Me=de.useRef(0),we=m==="horizontal"?ZZ:qZ,[xe=[],Se]=fv({prop:B,defaultProp:k,onChange:$t=>{[...ae.current][Me.current]?.focus(),Z($t)}}),Fe=de.useRef(xe);function Ue($t){const Zt=YZ(xe,$t);Pt($t,Zt)}function it($t){Pt($t,Me.current)}function Rt(){const $t=Fe.current[Me.current];xe[Me.current]!==$t&&X(xe)}function Pt($t,Zt,{commit:cn}={commit:!1}){const ln=eq(f),xn=tq(Math.round(($t-u)/f)*f+u,ln),Ge=Qb(xn,[u,a]);Se((mt=[])=>{const qe=WZ(mt,Ge,Zt);if(QZ(qe,z*f)){Me.current=qe.indexOf(Ge);const Bt=String(qe)!==String(mt);return Bt&&cn&&X(qe),Bt?qe:mt}else return mt})}return me.jsx(VZ,{scope:e.__scopeSlider,name:r,disabled:c,min:u,max:a,valueIndexToChangeRef:Me,thumbs:ae.current,values:xe,orientation:m,form:ce,children:me.jsx(m2.Provider,{scope:e.__scopeSlider,children:me.jsx(m2.Slot,{scope:e.__scopeSlider,children:me.jsx(we,{"aria-disabled":c,"data-disabled":c?"":void 0,...ee,ref:t,onPointerDown:Wi(ee.onPointerDown,()=>{c||(Fe.current=xe)}),min:u,max:a,inverted:J,onSlideStart:c?void 0:Ue,onSlideMove:c?void 0:it,onSlideEnd:c?void 0:Rt,onHomeKeyDown:()=>!c&&Pt(u,0,{commit:!0}),onEndKeyDown:()=>!c&&Pt(a,xe.length-1,{commit:!0}),onStepKeyDown:({event:$t,direction:Zt})=>{if(!c){const xn=fL.includes($t.key)||$t.shiftKey&&pL.includes($t.key)?10:1,Ge=Me.current,mt=xe[Ge],qe=f*xn*Zt;Pt(mt+qe,Ge,{commit:!0})}}})})})})});yL.displayName=zy;var[_L,vL]=gL(zy,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ZZ=de.forwardRef((e,t)=>{const{min:r,max:u,dir:a,inverted:f,onSlideStart:m,onSlideMove:c,onSlideEnd:z,onStepKeyDown:k,...B}=e,[Z,X]=de.useState(null),J=Ar(t,we=>X(we)),ce=de.useRef(void 0),ee=tD(a),ae=ee==="ltr",Me=ae&&!f||!ae&&f;function Ae(we){const xe=ce.current||Z.getBoundingClientRect(),Se=[0,xe.width],Ue=dE(Se,Me?[r,u]:[u,r]);return ce.current=xe,Ue(we-xe.left)}return me.jsx(_L,{scope:e.__scopeSlider,startEdge:Me?"left":"right",endEdge:Me?"right":"left",direction:Me?1:-1,size:"width",children:me.jsx(bL,{dir:ee,"data-orientation":"horizontal",...B,ref:J,style:{...B.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:we=>{const xe=Ae(we.clientX);m?.(xe)},onSlideMove:we=>{const xe=Ae(we.clientX);c?.(xe)},onSlideEnd:()=>{ce.current=void 0,z?.()},onStepKeyDown:we=>{const Se=mL[Me?"from-left":"from-right"].includes(we.key);k?.({event:we,direction:Se?-1:1})}})})}),qZ=de.forwardRef((e,t)=>{const{min:r,max:u,inverted:a,onSlideStart:f,onSlideMove:m,onSlideEnd:c,onStepKeyDown:z,...k}=e,B=de.useRef(null),Z=Ar(t,B),X=de.useRef(void 0),J=!a;function ce(ee){const ae=X.current||B.current.getBoundingClientRect(),Me=[0,ae.height],we=dE(Me,J?[u,r]:[r,u]);return X.current=ae,we(ee-ae.top)}return me.jsx(_L,{scope:e.__scopeSlider,startEdge:J?"bottom":"top",endEdge:J?"top":"bottom",size:"height",direction:J?1:-1,children:me.jsx(bL,{"data-orientation":"vertical",...k,ref:Z,style:{...k.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:ee=>{const ae=ce(ee.clientY);f?.(ae)},onSlideMove:ee=>{const ae=ce(ee.clientY);m?.(ae)},onSlideEnd:()=>{X.current=void 0,c?.()},onStepKeyDown:ee=>{const Me=mL[J?"from-bottom":"from-top"].includes(ee.key);z?.({event:ee,direction:Me?-1:1})}})})}),bL=de.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:u,onSlideMove:a,onSlideEnd:f,onHomeKeyDown:m,onEndKeyDown:c,onStepKeyDown:z,...k}=e,B=E1(zy,r);return me.jsx(br.span,{...k,ref:t,onKeyDown:Wi(e.onKeyDown,Z=>{Z.key==="Home"?(m(Z),Z.preventDefault()):Z.key==="End"?(c(Z),Z.preventDefault()):fL.concat(pL).includes(Z.key)&&(z(Z),Z.preventDefault())}),onPointerDown:Wi(e.onPointerDown,Z=>{const X=Z.target;X.setPointerCapture(Z.pointerId),Z.preventDefault(),B.thumbs.has(X)?X.focus():u(Z)}),onPointerMove:Wi(e.onPointerMove,Z=>{Z.target.hasPointerCapture(Z.pointerId)&&a(Z)}),onPointerUp:Wi(e.onPointerUp,Z=>{const X=Z.target;X.hasPointerCapture(Z.pointerId)&&(X.releasePointerCapture(Z.pointerId),f(Z))})})}),xL="SliderTrack",wL=de.forwardRef((e,t)=>{const{__scopeSlider:r,...u}=e,a=E1(xL,r);return me.jsx(br.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...u,ref:t})});wL.displayName=xL;var g2="SliderRange",SL=de.forwardRef((e,t)=>{const{__scopeSlider:r,...u}=e,a=E1(g2,r),f=vL(g2,r),m=de.useRef(null),c=Ar(t,m),z=a.values.length,k=a.values.map(X=>AL(X,a.min,a.max)),B=z>1?Math.min(...k):0,Z=100-Math.max(...k);return me.jsx(br.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...u,ref:c,style:{...e.style,[f.startEdge]:B+"%",[f.endEdge]:Z+"%"}})});SL.displayName=g2;var y2="SliderThumb",TL=de.forwardRef((e,t)=>{const r=FZ(e.__scopeSlider),[u,a]=de.useState(null),f=Ar(t,c=>a(c)),m=de.useMemo(()=>u?r().findIndex(c=>c.ref.current===u):-1,[r,u]);return me.jsx(GZ,{...e,ref:f,index:m})}),GZ=de.forwardRef((e,t)=>{const{__scopeSlider:r,index:u,name:a,...f}=e,m=E1(y2,r),c=vL(y2,r),[z,k]=de.useState(null),B=Ar(t,Ae=>k(Ae)),Z=z?m.form||!!z.closest("form"):!0,X=nE(z),J=m.values[u],ce=J===void 0?0:AL(J,m.min,m.max),ee=XZ(u,m.values.length),ae=X?.[c.size],Me=ae?KZ(ae,ce,c.direction):0;return de.useEffect(()=>{if(z)return m.thumbs.add(z),()=>{m.thumbs.delete(z)}},[z,m.thumbs]),me.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${ce}% + ${Me}px)`},children:[me.jsx(m2.ItemSlot,{scope:e.__scopeSlider,children:me.jsx(br.span,{role:"slider","aria-label":e["aria-label"]||ee,"aria-valuemin":m.min,"aria-valuenow":J,"aria-valuemax":m.max,"aria-orientation":m.orientation,"data-orientation":m.orientation,"data-disabled":m.disabled?"":void 0,tabIndex:m.disabled?void 0:0,...f,ref:B,style:J===void 0?{display:"none"}:e.style,onFocus:Wi(e.onFocus,()=>{m.valueIndexToChangeRef.current=u})})}),Z&&me.jsx(EL,{name:a??(m.name?m.name+(m.values.length>1?"[]":""):void 0),form:m.form,value:J},u)]})});TL.displayName=y2;var HZ="RadioBubbleInput",EL=de.forwardRef(({__scopeSlider:e,value:t,...r},u)=>{const a=de.useRef(null),f=Ar(a,u),m=tE(t);return de.useEffect(()=>{const c=a.current;if(!c)return;const z=window.HTMLInputElement.prototype,B=Object.getOwnPropertyDescriptor(z,"value").set;if(m!==t&&B){const Z=new Event("input",{bubbles:!0});B.call(c,t),c.dispatchEvent(Z)}},[m,t]),me.jsx(br.input,{style:{display:"none"},...r,ref:f,defaultValue:t})});EL.displayName=HZ;function WZ(e=[],t,r){const u=[...e];return u[r]=t,u.sort((a,f)=>a-f)}function AL(e,t,r){const f=100/(r-t)*(e-t);return Qb(f,[0,100])}function XZ(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function YZ(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),u=Math.min(...r);return r.indexOf(u)}function KZ(e,t,r){const u=e/2,f=dE([0,50],[0,u]);return(u-f(t)*r)*r}function JZ(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function QZ(e,t){if(t>0){const r=JZ(e);return Math.min(...r)>=t}return!0}function dE(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const u=(t[1]-t[0])/(e[1]-e[0]);return t[0]+u*(r-e[0])}}function eq(e){return(String(e).split(".")[1]||"").length}function tq(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var nq=yL,iq=wL,rq=SL,aq=TL,A1="Switch",[oq]=Ey(A1),[sq,lq]=oq(A1),CL=de.forwardRef((e,t)=>{const{__scopeSwitch:r,name:u,checked:a,defaultChecked:f,required:m,disabled:c,value:z="on",onCheckedChange:k,form:B,...Z}=e,[X,J]=de.useState(null),ce=Ar(t,we=>J(we)),ee=de.useRef(!1),ae=X?B||!!X.closest("form"):!0,[Me,Ae]=fv({prop:a,defaultProp:f??!1,onChange:k,caller:A1});return me.jsxs(sq,{scope:r,checked:Me,disabled:c,children:[me.jsx(br.button,{type:"button",role:"switch","aria-checked":Me,"aria-required":m,"data-state":kL(Me),"data-disabled":c?"":void 0,disabled:c,value:z,...Z,ref:ce,onClick:Wi(e.onClick,we=>{Ae(xe=>!xe),ae&&(ee.current=we.isPropagationStopped(),ee.current||we.stopPropagation())})}),ae&&me.jsx(IL,{control:X,bubbles:!ee.current,name:u,value:z,checked:Me,required:m,disabled:c,form:B,style:{transform:"translateX(-100%)"}})]})});CL.displayName=A1;var ML="SwitchThumb",zL=de.forwardRef((e,t)=>{const{__scopeSwitch:r,...u}=e,a=lq(ML,r);return me.jsx(br.span,{"data-state":kL(a.checked),"data-disabled":a.disabled?"":void 0,...u,ref:t})});zL.displayName=ML;var cq="SwitchBubbleInput",IL=de.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:u=!0,...a},f)=>{const m=de.useRef(null),c=Ar(m,f),z=tE(r),k=nE(t);return de.useEffect(()=>{const B=m.current;if(!B)return;const Z=window.HTMLInputElement.prototype,J=Object.getOwnPropertyDescriptor(Z,"checked").set;if(z!==r&&J){const ce=new Event("click",{bubbles:u});J.call(B,r),B.dispatchEvent(ce)}},[z,r,u]),me.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:c,style:{...a.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});IL.displayName=cq;function kL(e){return e?"checked":"unchecked"}var uq=CL,hq=zL,[C1]=Ey("Tooltip",[x1]),M1=x1(),PL="TooltipProvider",dq=700,_2="tooltip.open",[fq,fE]=C1(PL),DL=e=>{const{__scopeTooltip:t,delayDuration:r=dq,skipDelayDuration:u=300,disableHoverableContent:a=!1,children:f}=e,m=de.useRef(!0),c=de.useRef(!1),z=de.useRef(0);return de.useEffect(()=>{const k=z.current;return()=>window.clearTimeout(k)},[]),me.jsx(fq,{scope:t,isOpenDelayedRef:m,delayDuration:r,onOpen:de.useCallback(()=>{window.clearTimeout(z.current),m.current=!1},[]),onClose:de.useCallback(()=>{window.clearTimeout(z.current),z.current=window.setTimeout(()=>m.current=!0,u)},[u]),isPointerInTransitRef:c,onPointerInTransitChange:de.useCallback(k=>{c.current=k},[]),disableHoverableContent:a,children:f})};DL.displayName=PL;var mv="Tooltip",[pq,Xv]=C1(mv),LL=e=>{const{__scopeTooltip:t,children:r,open:u,defaultOpen:a,onOpenChange:f,disableHoverableContent:m,delayDuration:c}=e,z=fE(mv,e.__scopeTooltip),k=M1(t),[B,Z]=de.useState(null),X=m1(),J=de.useRef(0),ce=m??z.disableHoverableContent,ee=c??z.delayDuration,ae=de.useRef(!1),[Me,Ae]=fv({prop:u,defaultProp:a??!1,onChange:Ue=>{Ue?(z.onOpen(),document.dispatchEvent(new CustomEvent(_2))):z.onClose(),f?.(Ue)},caller:mv}),we=de.useMemo(()=>Me?ae.current?"delayed-open":"instant-open":"closed",[Me]),xe=de.useCallback(()=>{window.clearTimeout(J.current),J.current=0,ae.current=!1,Ae(!0)},[Ae]),Se=de.useCallback(()=>{window.clearTimeout(J.current),J.current=0,Ae(!1)},[Ae]),Fe=de.useCallback(()=>{window.clearTimeout(J.current),J.current=window.setTimeout(()=>{ae.current=!0,Ae(!0),J.current=0},ee)},[ee,Ae]);return de.useEffect(()=>()=>{J.current&&(window.clearTimeout(J.current),J.current=0)},[]),me.jsx(OD,{...k,children:me.jsx(pq,{scope:t,contentId:X,open:Me,stateAttribute:we,trigger:B,onTriggerChange:Z,onTriggerEnter:de.useCallback(()=>{z.isOpenDelayedRef.current?Fe():xe()},[z.isOpenDelayedRef,Fe,xe]),onTriggerLeave:de.useCallback(()=>{ce?Se():(window.clearTimeout(J.current),J.current=0)},[Se,ce]),onOpen:xe,onClose:Se,disableHoverableContent:ce,children:r})})};LL.displayName=mv;var v2="TooltipTrigger",RL=de.forwardRef((e,t)=>{const{__scopeTooltip:r,...u}=e,a=Xv(v2,r),f=fE(v2,r),m=M1(r),c=de.useRef(null),z=Ar(t,c,a.onTriggerChange),k=de.useRef(!1),B=de.useRef(!1),Z=de.useCallback(()=>k.current=!1,[]);return de.useEffect(()=>()=>document.removeEventListener("pointerup",Z),[Z]),me.jsx(ND,{asChild:!0,...m,children:me.jsx(br.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...u,ref:z,onPointerMove:Wi(e.onPointerMove,X=>{X.pointerType!=="touch"&&!B.current&&!f.isPointerInTransitRef.current&&(a.onTriggerEnter(),B.current=!0)}),onPointerLeave:Wi(e.onPointerLeave,()=>{a.onTriggerLeave(),B.current=!1}),onPointerDown:Wi(e.onPointerDown,()=>{a.open&&a.onClose(),k.current=!0,document.addEventListener("pointerup",Z,{once:!0})}),onFocus:Wi(e.onFocus,()=>{k.current||a.onOpen()}),onBlur:Wi(e.onBlur,a.onClose),onClick:Wi(e.onClick,a.onClose)})})});RL.displayName=v2;var pE="TooltipPortal",[mq,gq]=C1(pE,{forceMount:void 0}),OL=e=>{const{__scopeTooltip:t,forceMount:r,children:u,container:a}=e,f=Xv(pE,t);return me.jsx(mq,{scope:t,forceMount:r,children:me.jsx(JT,{present:r||f.open,children:me.jsx(eE,{asChild:!0,container:a,children:u})})})};OL.displayName=pE;var vy="TooltipContent",NL=de.forwardRef((e,t)=>{const r=gq(vy,e.__scopeTooltip),{forceMount:u=r.forceMount,side:a="top",...f}=e,m=Xv(vy,e.__scopeTooltip);return me.jsx(JT,{present:u||m.open,children:m.disableHoverableContent?me.jsx($L,{side:a,...f,ref:t}):me.jsx(yq,{side:a,...f,ref:t})})}),yq=de.forwardRef((e,t)=>{const r=Xv(vy,e.__scopeTooltip),u=fE(vy,e.__scopeTooltip),a=de.useRef(null),f=Ar(t,a),[m,c]=de.useState(null),{trigger:z,onClose:k}=r,B=a.current,{onPointerInTransitChange:Z}=u,X=de.useCallback(()=>{c(null),Z(!1)},[Z]),J=de.useCallback((ce,ee)=>{const ae=ce.currentTarget,Me={x:ce.clientX,y:ce.clientY},Ae=wq(Me,ae.getBoundingClientRect()),we=Sq(Me,Ae),xe=Tq(ee.getBoundingClientRect()),Se=Aq([...we,...xe]);c(Se),Z(!0)},[Z]);return de.useEffect(()=>()=>X(),[X]),de.useEffect(()=>{if(z&&B){const ce=ae=>J(ae,B),ee=ae=>J(ae,z);return z.addEventListener("pointerleave",ce),B.addEventListener("pointerleave",ee),()=>{z.removeEventListener("pointerleave",ce),B.removeEventListener("pointerleave",ee)}}},[z,B,J,X]),de.useEffect(()=>{if(m){const ce=ee=>{const ae=ee.target,Me={x:ee.clientX,y:ee.clientY},Ae=z?.contains(ae)||B?.contains(ae),we=!Eq(Me,m);Ae?X():we&&(X(),k())};return document.addEventListener("pointermove",ce),()=>document.removeEventListener("pointermove",ce)}},[z,B,m,k,X]),me.jsx($L,{...e,ref:f})}),[_q,vq]=C1(mv,{isInside:!1}),bq=bU("TooltipContent"),$L=de.forwardRef((e,t)=>{const{__scopeTooltip:r,children:u,"aria-label":a,onEscapeKeyDown:f,onPointerDownOutside:m,...c}=e,z=Xv(vy,r),k=M1(r),{onClose:B}=z;return de.useEffect(()=>(document.addEventListener(_2,B),()=>document.removeEventListener(_2,B)),[B]),de.useEffect(()=>{if(z.trigger){const Z=X=>{X.target?.contains(z.trigger)&&B()};return window.addEventListener("scroll",Z,{capture:!0}),()=>window.removeEventListener("scroll",Z,{capture:!0})}},[z.trigger,B]),me.jsx(QT,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:Z=>Z.preventDefault(),onDismiss:B,children:me.jsxs($D,{"data-state":z.stateAttribute,...k,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[me.jsx(bq,{children:u}),me.jsx(_q,{scope:r,isInside:!0,children:me.jsx(CU,{id:z.contentId,role:"tooltip",children:a||u})})]})})});NL.displayName=vy;var jL="TooltipArrow",xq=de.forwardRef((e,t)=>{const{__scopeTooltip:r,...u}=e,a=M1(r);return vq(jL,r).isInside?null:me.jsx(jD,{...a,...u,ref:t})});xq.displayName=jL;function wq(e,t){const r=Math.abs(t.top-e.y),u=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),f=Math.abs(t.left-e.x);switch(Math.min(r,u,a,f)){case f:return"left";case a:return"right";case r:return"top";case u:return"bottom";default:throw new Error("unreachable")}}function Sq(e,t,r=5){const u=[];switch(t){case"top":u.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":u.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":u.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":u.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return u}function Tq(e){const{top:t,right:r,bottom:u,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:u},{x:a,y:u}]}function Eq(e,t){const{x:r,y:u}=e;let a=!1;for(let f=0,m=t.length-1;f<t.length;m=f++){const c=t[f],z=t[m],k=c.x,B=c.y,Z=z.x,X=z.y;B>u!=X>u&&r<(Z-k)*(u-B)/(X-B)+k&&(a=!a)}return a}function Aq(e){const t=e.slice();return t.sort((r,u)=>r.x<u.x?-1:r.x>u.x?1:r.y<u.y?-1:r.y>u.y?1:0),Cq(t)}function Cq(e){if(e.length<=1)return e.slice();const t=[];for(let u=0;u<e.length;u++){const a=e[u];for(;t.length>=2;){const f=t[t.length-1],m=t[t.length-2];if((f.x-m.x)*(a.y-m.y)>=(f.y-m.y)*(a.x-m.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let u=e.length-1;u>=0;u--){const a=e[u];for(;r.length>=2;){const f=r[r.length-1],m=r[r.length-2];if((f.x-m.x)*(a.y-m.y)>=(f.y-m.y)*(a.x-m.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Mq=DL,zq=LL,Iq=RL,kq=OL,Pq=NL;const Dq=(e,t)=>{const r=new Array(e.length+t.length);for(let u=0;u<e.length;u++)r[u]=e[u];for(let u=0;u<t.length;u++)r[e.length+u]=t[u];return r},Lq=(e,t)=>({classGroupId:e,validator:t}),BL=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),tx="-",XC=[],Rq="arbitrary..",Oq=e=>{const t=$q(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:u}=e;return{getClassGroupId:m=>{if(m.startsWith("[")&&m.endsWith("]"))return Nq(m);const c=m.split(tx),z=c[0]===""&&c.length>1?1:0;return FL(c,z,t)},getConflictingClassGroupIds:(m,c)=>{if(c){const z=u[m],k=r[m];return z?k?Dq(k,z):z:k||XC}return r[m]||XC}}},FL=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const a=e[t],f=r.nextPart.get(a);if(f){const k=FL(e,t+1,f);if(k)return k}const m=r.validators;if(m===null)return;const c=t===0?e.join(tx):e.slice(t).join(tx),z=m.length;for(let k=0;k<z;k++){const B=m[k];if(B.validator(c))return B.classGroupId}},Nq=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),u=t.slice(0,r);return u?Rq+u:void 0})(),$q=e=>{const{theme:t,classGroups:r}=e;return jq(r,t)},jq=(e,t)=>{const r=BL();for(const u in e){const a=e[u];mE(a,r,u,t)}return r},mE=(e,t,r,u)=>{const a=e.length;for(let f=0;f<a;f++){const m=e[f];Bq(m,t,r,u)}},Bq=(e,t,r,u)=>{if(typeof e=="string"){Fq(e,t,r);return}if(typeof e=="function"){Uq(e,t,r,u);return}Vq(e,t,r,u)},Fq=(e,t,r)=>{const u=e===""?t:UL(t,e);u.classGroupId=r},Uq=(e,t,r,u)=>{if(Zq(e)){mE(e(u),t,r,u);return}t.validators===null&&(t.validators=[]),t.validators.push(Lq(r,e))},Vq=(e,t,r,u)=>{const a=Object.entries(e),f=a.length;for(let m=0;m<f;m++){const[c,z]=a[m];mE(z,UL(t,c),r,u)}},UL=(e,t)=>{let r=e;const u=t.split(tx),a=u.length;for(let f=0;f<a;f++){const m=u[f];let c=r.nextPart.get(m);c||(c=BL(),r.nextPart.set(m,c)),r=c}return r},Zq=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,qq=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),u=Object.create(null);const a=(f,m)=>{r[f]=m,t++,t>e&&(t=0,u=r,r=Object.create(null))};return{get(f){let m=r[f];if(m!==void 0)return m;if((m=u[f])!==void 0)return a(f,m),m},set(f,m){f in r?r[f]=m:a(f,m)}}},b2="!",YC=":",Gq=[],KC=(e,t,r,u,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:u,isExternal:a}),Hq=e=>{const{prefix:t,experimentalParseClassName:r}=e;let u=a=>{const f=[];let m=0,c=0,z=0,k;const B=a.length;for(let ee=0;ee<B;ee++){const ae=a[ee];if(m===0&&c===0){if(ae===YC){f.push(a.slice(z,ee)),z=ee+1;continue}if(ae==="/"){k=ee;continue}}ae==="["?m++:ae==="]"?m--:ae==="("?c++:ae===")"&&c--}const Z=f.length===0?a:a.slice(z);let X=Z,J=!1;Z.endsWith(b2)?(X=Z.slice(0,-1),J=!0):Z.startsWith(b2)&&(X=Z.slice(1),J=!0);const ce=k&&k>z?k-z:void 0;return KC(f,J,X,ce)};if(t){const a=t+YC,f=u;u=m=>m.startsWith(a)?f(m.slice(a.length)):KC(Gq,!1,m,void 0,!0)}if(r){const a=u;u=f=>r({className:f,parseClassName:a})}return u},Wq=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,u)=>{t.set(r,1e6+u)}),r=>{const u=[];let a=[];for(let f=0;f<r.length;f++){const m=r[f],c=m[0]==="[",z=t.has(m);c||z?(a.length>0&&(a.sort(),u.push(...a),a=[]),u.push(m)):a.push(m)}return a.length>0&&(a.sort(),u.push(...a)),u}},Xq=e=>({cache:qq(e.cacheSize),parseClassName:Hq(e),sortModifiers:Wq(e),...Oq(e)}),Yq=/\s+/,Kq=(e,t)=>{const{parseClassName:r,getClassGroupId:u,getConflictingClassGroupIds:a,sortModifiers:f}=t,m=[],c=e.trim().split(Yq);let z="";for(let k=c.length-1;k>=0;k-=1){const B=c[k],{isExternal:Z,modifiers:X,hasImportantModifier:J,baseClassName:ce,maybePostfixModifierPosition:ee}=r(B);if(Z){z=B+(z.length>0?" "+z:z);continue}let ae=!!ee,Me=u(ae?ce.substring(0,ee):ce);if(!Me){if(!ae){z=B+(z.length>0?" "+z:z);continue}if(Me=u(ce),!Me){z=B+(z.length>0?" "+z:z);continue}ae=!1}const Ae=X.length===0?"":X.length===1?X[0]:f(X).join(":"),we=J?Ae+b2:Ae,xe=we+Me;if(m.indexOf(xe)>-1)continue;m.push(xe);const Se=a(Me,ae);for(let Fe=0;Fe<Se.length;++Fe){const Ue=Se[Fe];m.push(we+Ue)}z=B+(z.length>0?" "+z:z)}return z},Jq=(...e)=>{let t=0,r,u,a="";for(;t<e.length;)(r=e[t++])&&(u=VL(r))&&(a&&(a+=" "),a+=u);return a},VL=e=>{if(typeof e=="string")return e;let t,r="";for(let u=0;u<e.length;u++)e[u]&&(t=VL(e[u]))&&(r&&(r+=" "),r+=t);return r},Qq=(e,...t)=>{let r,u,a,f;const m=z=>{const k=t.reduce((B,Z)=>Z(B),e());return r=Xq(k),u=r.cache.get,a=r.cache.set,f=c,c(z)},c=z=>{const k=u(z);if(k)return k;const B=Kq(z,r);return a(z,B),B};return f=m,(...z)=>f(Jq(...z))},eG=[],Eo=e=>{const t=r=>r[e]||eG;return t.isThemeGetter=!0,t},ZL=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,qL=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tG=/^\d+\/\d+$/,nG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,aG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kg=e=>tG.test(e),_i=e=>!!e&&!Number.isNaN(Number(e)),Yf=e=>!!e&&Number.isInteger(Number(e)),ww=e=>e.endsWith("%")&&_i(e.slice(0,-1)),Kd=e=>nG.test(e),GL=()=>!0,sG=e=>iG.test(e)&&!rG.test(e),gE=()=>!1,lG=e=>aG.test(e),cG=e=>oG.test(e),uG=e=>!yn(e)&&!_n(e),hG=e=>pp(e,XL,gE),yn=e=>ZL.test(e),fm=e=>pp(e,YL,sG),JC=e=>pp(e,vG,_i),dG=e=>pp(e,JL,GL),fG=e=>pp(e,KL,gE),QC=e=>pp(e,HL,gE),pG=e=>pp(e,WL,cG),yb=e=>pp(e,QL,lG),_n=e=>qL.test(e),$_=e=>Fm(e,YL),mG=e=>Fm(e,KL),eM=e=>Fm(e,HL),gG=e=>Fm(e,XL),yG=e=>Fm(e,WL),_b=e=>Fm(e,QL,!0),_G=e=>Fm(e,JL,!0),pp=(e,t,r)=>{const u=ZL.exec(e);return u?u[1]?t(u[1]):r(u[2]):!1},Fm=(e,t,r=!1)=>{const u=qL.exec(e);return u?u[1]?t(u[1]):r:!1},HL=e=>e==="position"||e==="percentage",WL=e=>e==="image"||e==="url",XL=e=>e==="length"||e==="size"||e==="bg-size",YL=e=>e==="length",vG=e=>e==="number",KL=e=>e==="family-name",JL=e=>e==="number"||e==="weight",QL=e=>e==="shadow",bG=()=>{const e=Eo("color"),t=Eo("font"),r=Eo("text"),u=Eo("font-weight"),a=Eo("tracking"),f=Eo("leading"),m=Eo("breakpoint"),c=Eo("container"),z=Eo("spacing"),k=Eo("radius"),B=Eo("shadow"),Z=Eo("inset-shadow"),X=Eo("text-shadow"),J=Eo("drop-shadow"),ce=Eo("blur"),ee=Eo("perspective"),ae=Eo("aspect"),Me=Eo("ease"),Ae=Eo("animate"),we=()=>["auto","avoid","all","avoid-page","page","left","right","column"],xe=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Se=()=>[...xe(),_n,yn],Fe=()=>["auto","hidden","clip","visible","scroll"],Ue=()=>["auto","contain","none"],it=()=>[_n,yn,z],Rt=()=>[Kg,"full","auto",...it()],Pt=()=>[Yf,"none","subgrid",_n,yn],$t=()=>["auto",{span:["full",Yf,_n,yn]},Yf,_n,yn],Zt=()=>[Yf,"auto",_n,yn],cn=()=>["auto","min","max","fr",_n,yn],ln=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],xn=()=>["start","end","center","stretch","center-safe","end-safe"],Ge=()=>["auto",...it()],mt=()=>[Kg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...it()],qe=()=>[e,_n,yn],Bt=()=>[...xe(),eM,QC,{position:[_n,yn]}],jt=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Oe=()=>["auto","cover","contain",gG,hG,{size:[_n,yn]}],pt=()=>[ww,$_,fm],Mt=()=>["","none","full",k,_n,yn],It=()=>["",_i,$_,fm],Nt=()=>["solid","dashed","dotted","double"],Ft=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],At=()=>[_i,ww,eM,QC],un=()=>["","none",ce,_n,yn],Cn=()=>["none",_i,_n,yn],Dn=()=>["none",_i,_n,yn],Wn=()=>[_i,_n,yn],Bn=()=>[Kg,"full",...it()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Kd],breakpoint:[Kd],color:[GL],container:[Kd],"drop-shadow":[Kd],ease:["in","out","in-out"],font:[uG],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Kd],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Kd],shadow:[Kd],spacing:["px",_i],text:[Kd],"text-shadow":[Kd],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Kg,yn,_n,ae]}],container:["container"],columns:[{columns:[_i,yn,_n,c]}],"break-after":[{"break-after":we()}],"break-before":[{"break-before":we()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Se()}],overflow:[{overflow:Fe()}],"overflow-x":[{"overflow-x":Fe()}],"overflow-y":[{"overflow-y":Fe()}],overscroll:[{overscroll:Ue()}],"overscroll-x":[{"overscroll-x":Ue()}],"overscroll-y":[{"overscroll-y":Ue()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Rt()}],"inset-x":[{"inset-x":Rt()}],"inset-y":[{"inset-y":Rt()}],start:[{start:Rt()}],end:[{end:Rt()}],top:[{top:Rt()}],right:[{right:Rt()}],bottom:[{bottom:Rt()}],left:[{left:Rt()}],visibility:["visible","invisible","collapse"],z:[{z:[Yf,"auto",_n,yn]}],basis:[{basis:[Kg,"full","auto",c,...it()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[_i,Kg,"auto","initial","none",yn]}],grow:[{grow:["",_i,_n,yn]}],shrink:[{shrink:["",_i,_n,yn]}],order:[{order:[Yf,"first","last","none",_n,yn]}],"grid-cols":[{"grid-cols":Pt()}],"col-start-end":[{col:$t()}],"col-start":[{"col-start":Zt()}],"col-end":[{"col-end":Zt()}],"grid-rows":[{"grid-rows":Pt()}],"row-start-end":[{row:$t()}],"row-start":[{"row-start":Zt()}],"row-end":[{"row-end":Zt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":cn()}],"auto-rows":[{"auto-rows":cn()}],gap:[{gap:it()}],"gap-x":[{"gap-x":it()}],"gap-y":[{"gap-y":it()}],"justify-content":[{justify:[...ln(),"normal"]}],"justify-items":[{"justify-items":[...xn(),"normal"]}],"justify-self":[{"justify-self":["auto",...xn()]}],"align-content":[{content:["normal",...ln()]}],"align-items":[{items:[...xn(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...xn(),{baseline:["","last"]}]}],"place-content":[{"place-content":ln()}],"place-items":[{"place-items":[...xn(),"baseline"]}],"place-self":[{"place-self":["auto",...xn()]}],p:[{p:it()}],px:[{px:it()}],py:[{py:it()}],ps:[{ps:it()}],pe:[{pe:it()}],pt:[{pt:it()}],pr:[{pr:it()}],pb:[{pb:it()}],pl:[{pl:it()}],m:[{m:Ge()}],mx:[{mx:Ge()}],my:[{my:Ge()}],ms:[{ms:Ge()}],me:[{me:Ge()}],mt:[{mt:Ge()}],mr:[{mr:Ge()}],mb:[{mb:Ge()}],ml:[{ml:Ge()}],"space-x":[{"space-x":it()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":it()}],"space-y-reverse":["space-y-reverse"],size:[{size:mt()}],w:[{w:[c,"screen",...mt()]}],"min-w":[{"min-w":[c,"screen","none",...mt()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[m]},...mt()]}],h:[{h:["screen","lh",...mt()]}],"min-h":[{"min-h":["screen","lh","none",...mt()]}],"max-h":[{"max-h":["screen","lh",...mt()]}],"font-size":[{text:["base",r,$_,fm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[u,_G,dG]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ww,yn]}],"font-family":[{font:[mG,fG,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,_n,yn]}],"line-clamp":[{"line-clamp":[_i,"none",_n,JC]}],leading:[{leading:[f,...it()]}],"list-image":[{"list-image":["none",_n,yn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",_n,yn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:qe()}],"text-color":[{text:qe()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Nt(),"wavy"]}],"text-decoration-thickness":[{decoration:[_i,"from-font","auto",_n,fm]}],"text-decoration-color":[{decoration:qe()}],"underline-offset":[{"underline-offset":[_i,"auto",_n,yn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:it()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_n,yn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_n,yn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Bt()}],"bg-repeat":[{bg:jt()}],"bg-size":[{bg:Oe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Yf,_n,yn],radial:["",_n,yn],conic:[Yf,_n,yn]},yG,pG]}],"bg-color":[{bg:qe()}],"gradient-from-pos":[{from:pt()}],"gradient-via-pos":[{via:pt()}],"gradient-to-pos":[{to:pt()}],"gradient-from":[{from:qe()}],"gradient-via":[{via:qe()}],"gradient-to":[{to:qe()}],rounded:[{rounded:Mt()}],"rounded-s":[{"rounded-s":Mt()}],"rounded-e":[{"rounded-e":Mt()}],"rounded-t":[{"rounded-t":Mt()}],"rounded-r":[{"rounded-r":Mt()}],"rounded-b":[{"rounded-b":Mt()}],"rounded-l":[{"rounded-l":Mt()}],"rounded-ss":[{"rounded-ss":Mt()}],"rounded-se":[{"rounded-se":Mt()}],"rounded-ee":[{"rounded-ee":Mt()}],"rounded-es":[{"rounded-es":Mt()}],"rounded-tl":[{"rounded-tl":Mt()}],"rounded-tr":[{"rounded-tr":Mt()}],"rounded-br":[{"rounded-br":Mt()}],"rounded-bl":[{"rounded-bl":Mt()}],"border-w":[{border:It()}],"border-w-x":[{"border-x":It()}],"border-w-y":[{"border-y":It()}],"border-w-s":[{"border-s":It()}],"border-w-e":[{"border-e":It()}],"border-w-t":[{"border-t":It()}],"border-w-r":[{"border-r":It()}],"border-w-b":[{"border-b":It()}],"border-w-l":[{"border-l":It()}],"divide-x":[{"divide-x":It()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":It()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Nt(),"hidden","none"]}],"divide-style":[{divide:[...Nt(),"hidden","none"]}],"border-color":[{border:qe()}],"border-color-x":[{"border-x":qe()}],"border-color-y":[{"border-y":qe()}],"border-color-s":[{"border-s":qe()}],"border-color-e":[{"border-e":qe()}],"border-color-t":[{"border-t":qe()}],"border-color-r":[{"border-r":qe()}],"border-color-b":[{"border-b":qe()}],"border-color-l":[{"border-l":qe()}],"divide-color":[{divide:qe()}],"outline-style":[{outline:[...Nt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[_i,_n,yn]}],"outline-w":[{outline:["",_i,$_,fm]}],"outline-color":[{outline:qe()}],shadow:[{shadow:["","none",B,_b,yb]}],"shadow-color":[{shadow:qe()}],"inset-shadow":[{"inset-shadow":["none",Z,_b,yb]}],"inset-shadow-color":[{"inset-shadow":qe()}],"ring-w":[{ring:It()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:qe()}],"ring-offset-w":[{"ring-offset":[_i,fm]}],"ring-offset-color":[{"ring-offset":qe()}],"inset-ring-w":[{"inset-ring":It()}],"inset-ring-color":[{"inset-ring":qe()}],"text-shadow":[{"text-shadow":["none",X,_b,yb]}],"text-shadow-color":[{"text-shadow":qe()}],opacity:[{opacity:[_i,_n,yn]}],"mix-blend":[{"mix-blend":[...Ft(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ft()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[_i]}],"mask-image-linear-from-pos":[{"mask-linear-from":At()}],"mask-image-linear-to-pos":[{"mask-linear-to":At()}],"mask-image-linear-from-color":[{"mask-linear-from":qe()}],"mask-image-linear-to-color":[{"mask-linear-to":qe()}],"mask-image-t-from-pos":[{"mask-t-from":At()}],"mask-image-t-to-pos":[{"mask-t-to":At()}],"mask-image-t-from-color":[{"mask-t-from":qe()}],"mask-image-t-to-color":[{"mask-t-to":qe()}],"mask-image-r-from-pos":[{"mask-r-from":At()}],"mask-image-r-to-pos":[{"mask-r-to":At()}],"mask-image-r-from-color":[{"mask-r-from":qe()}],"mask-image-r-to-color":[{"mask-r-to":qe()}],"mask-image-b-from-pos":[{"mask-b-from":At()}],"mask-image-b-to-pos":[{"mask-b-to":At()}],"mask-image-b-from-color":[{"mask-b-from":qe()}],"mask-image-b-to-color":[{"mask-b-to":qe()}],"mask-image-l-from-pos":[{"mask-l-from":At()}],"mask-image-l-to-pos":[{"mask-l-to":At()}],"mask-image-l-from-color":[{"mask-l-from":qe()}],"mask-image-l-to-color":[{"mask-l-to":qe()}],"mask-image-x-from-pos":[{"mask-x-from":At()}],"mask-image-x-to-pos":[{"mask-x-to":At()}],"mask-image-x-from-color":[{"mask-x-from":qe()}],"mask-image-x-to-color":[{"mask-x-to":qe()}],"mask-image-y-from-pos":[{"mask-y-from":At()}],"mask-image-y-to-pos":[{"mask-y-to":At()}],"mask-image-y-from-color":[{"mask-y-from":qe()}],"mask-image-y-to-color":[{"mask-y-to":qe()}],"mask-image-radial":[{"mask-radial":[_n,yn]}],"mask-image-radial-from-pos":[{"mask-radial-from":At()}],"mask-image-radial-to-pos":[{"mask-radial-to":At()}],"mask-image-radial-from-color":[{"mask-radial-from":qe()}],"mask-image-radial-to-color":[{"mask-radial-to":qe()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":xe()}],"mask-image-conic-pos":[{"mask-conic":[_i]}],"mask-image-conic-from-pos":[{"mask-conic-from":At()}],"mask-image-conic-to-pos":[{"mask-conic-to":At()}],"mask-image-conic-from-color":[{"mask-conic-from":qe()}],"mask-image-conic-to-color":[{"mask-conic-to":qe()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Bt()}],"mask-repeat":[{mask:jt()}],"mask-size":[{mask:Oe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",_n,yn]}],filter:[{filter:["","none",_n,yn]}],blur:[{blur:un()}],brightness:[{brightness:[_i,_n,yn]}],contrast:[{contrast:[_i,_n,yn]}],"drop-shadow":[{"drop-shadow":["","none",J,_b,yb]}],"drop-shadow-color":[{"drop-shadow":qe()}],grayscale:[{grayscale:["",_i,_n,yn]}],"hue-rotate":[{"hue-rotate":[_i,_n,yn]}],invert:[{invert:["",_i,_n,yn]}],saturate:[{saturate:[_i,_n,yn]}],sepia:[{sepia:["",_i,_n,yn]}],"backdrop-filter":[{"backdrop-filter":["","none",_n,yn]}],"backdrop-blur":[{"backdrop-blur":un()}],"backdrop-brightness":[{"backdrop-brightness":[_i,_n,yn]}],"backdrop-contrast":[{"backdrop-contrast":[_i,_n,yn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",_i,_n,yn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_i,_n,yn]}],"backdrop-invert":[{"backdrop-invert":["",_i,_n,yn]}],"backdrop-opacity":[{"backdrop-opacity":[_i,_n,yn]}],"backdrop-saturate":[{"backdrop-saturate":[_i,_n,yn]}],"backdrop-sepia":[{"backdrop-sepia":["",_i,_n,yn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":it()}],"border-spacing-x":[{"border-spacing-x":it()}],"border-spacing-y":[{"border-spacing-y":it()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",_n,yn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[_i,"initial",_n,yn]}],ease:[{ease:["linear","initial",Me,_n,yn]}],delay:[{delay:[_i,_n,yn]}],animate:[{animate:["none",Ae,_n,yn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[ee,_n,yn]}],"perspective-origin":[{"perspective-origin":Se()}],rotate:[{rotate:Cn()}],"rotate-x":[{"rotate-x":Cn()}],"rotate-y":[{"rotate-y":Cn()}],"rotate-z":[{"rotate-z":Cn()}],scale:[{scale:Dn()}],"scale-x":[{"scale-x":Dn()}],"scale-y":[{"scale-y":Dn()}],"scale-z":[{"scale-z":Dn()}],"scale-3d":["scale-3d"],skew:[{skew:Wn()}],"skew-x":[{"skew-x":Wn()}],"skew-y":[{"skew-y":Wn()}],transform:[{transform:[_n,yn,"","none","gpu","cpu"]}],"transform-origin":[{origin:Se()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Bn()}],"translate-x":[{"translate-x":Bn()}],"translate-y":[{"translate-y":Bn()}],"translate-z":[{"translate-z":Bn()}],"translate-none":["translate-none"],accent:[{accent:qe()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:qe()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_n,yn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":it()}],"scroll-mx":[{"scroll-mx":it()}],"scroll-my":[{"scroll-my":it()}],"scroll-ms":[{"scroll-ms":it()}],"scroll-me":[{"scroll-me":it()}],"scroll-mt":[{"scroll-mt":it()}],"scroll-mr":[{"scroll-mr":it()}],"scroll-mb":[{"scroll-mb":it()}],"scroll-ml":[{"scroll-ml":it()}],"scroll-p":[{"scroll-p":it()}],"scroll-px":[{"scroll-px":it()}],"scroll-py":[{"scroll-py":it()}],"scroll-ps":[{"scroll-ps":it()}],"scroll-pe":[{"scroll-pe":it()}],"scroll-pt":[{"scroll-pt":it()}],"scroll-pr":[{"scroll-pr":it()}],"scroll-pb":[{"scroll-pb":it()}],"scroll-pl":[{"scroll-pl":it()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_n,yn]}],fill:[{fill:["none",...qe()]}],"stroke-w":[{stroke:[_i,$_,fm,JC]}],stroke:[{stroke:["none",...qe()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},xG=Qq(bG);function Fc(...e){return xG(oy(e))}function eR({...e}){return me.jsx(MZ,{"data-slot":"select",...e})}function tR({...e}){return me.jsx(RZ,{"data-slot":"select-group",...e})}function nR({...e}){return me.jsx(IZ,{"data-slot":"select-value",...e})}function iR({className:e,size:t="default",children:r,...u}){return me.jsxs(zZ,{"data-slot":"select-trigger","data-size":t,className:Fc("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...u,children:[r,me.jsx(kZ,{asChild:!0,children:me.jsx(X3,{className:"size-4 opacity-50"})})]})}function rR({className:e,children:t,position:r="item-aligned",align:u="center",...a}){return me.jsx(PZ,{children:me.jsxs(DZ,{"data-slot":"select-content",className:Fc("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,align:u,...a,children:[me.jsx(wG,{}),me.jsx(LZ,{className:Fc("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),me.jsx(SG,{})]})})}function x2({className:e,children:t,...r}){return me.jsxs(OZ,{"data-slot":"select-item",className:Fc("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...r,children:[me.jsx("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:me.jsx($Z,{children:me.jsx(mU,{className:"size-4"})})}),me.jsx(NZ,{children:t})]})}function wG({className:e,...t}){return me.jsx(jZ,{"data-slot":"select-scroll-up-button",className:Fc("flex cursor-default items-center justify-center py-1",e),...t,children:me.jsx(_U,{className:"size-4"})})}function SG({className:e,...t}){return me.jsx(BZ,{"data-slot":"select-scroll-down-button",className:Fc("flex cursor-default items-center justify-center py-1",e),...t,children:me.jsx(X3,{className:"size-4"})})}function TG({location:e,setLocation:t}){return me.jsxs(eR,{value:e,onValueChange:r=>t(r),children:[me.jsx(iR,{className:"w-full sm:w-[150px] xl:w-[180px]",children:me.jsx(nR,{placeholder:"Theme"})}),me.jsxs(rR,{className:"z-1001",children:[me.jsx(de.Activity,{mode:e==="custom"?"hidden":"visible",children:me.jsx(x2,{value:"custom",children:"Custom"})}),me.jsx(tR,{children:EG.map(r=>me.jsx(x2,{value:r,children:r},r))})]})]})}const EG=["Bangkok","Tokyo","Seoul","Dubai","Manila","London","New York","Paris","Berlin","Madrid","Rome","Lisbon"];function AG({mapType:e,setMapType:t}){return me.jsxs(eR,{value:e,onValueChange:r=>t(r),children:[me.jsx(iR,{className:"w-full sm:w-[150px] xl:w-[180px]",children:me.jsx(nR,{placeholder:"Theme"})}),me.jsx(rR,{className:"z-1001",children:me.jsx(tR,{children:CG.map(r=>me.jsx(x2,{value:r,className:"capitalize",children:r.replace("_new","")},r))})})]})}const CG=["clouds_new","precipitation_new","pressure_new","wind_new","temp_new"];function MG({mapType:e}){const t=zG[e],r=t.stops[t.stops.length-1].value,u=t.stops.map(a=>`${a.color} ${a.value/r*100}%`).join(",");return me.jsxs("div",{className:"flex flex-col gap-3 absolute top-4 right-4 z-1000 xs:w-96 w-48 rounded-xl shadow p-4 bg-background/50 border-accent/70",children:[me.jsx("h3",{className:"text-sm font-semibold text-foreground",children:t.title}),me.jsx("div",{className:"w-full rounded-xl border-accent/70 h-6",style:{background:`linear-gradient(to right, ${u})`}}),me.jsxs("div",{className:"flex justify-between text-xs text-foreground",children:[me.jsxs("span",{children:[t.stops[0].value," ",t.unit]}),me.jsxs("span",{children:[t.stops[t.stops.length-1].value," ",t.unit]})]})]})}const zG={precipitation_new:{title:"Rain (mm)",unit:"mm",stops:[{value:0,color:"rgba(225, 200, 100, 0)"},{value:.1,color:"rgba(200, 150, 150, 0)"},{value:.2,color:"rgba(150, 150, 170, 0)"},{value:.5,color:"rgba(120, 120, 190, 0)"},{value:1,color:"rgba(110, 110, 205, 0.3)"},{value:10,color:"rgba(80, 80, 225, 0.7)"},{value:140,color:"rgba(20, 20, 255, 0.9)"}]},temp_new:{title:"Temperature (C)",unit:"C",stops:[{value:-65,color:"rgba(130, 22, 146, 1)"},{value:-55,color:"rgba(130, 22, 146, 1)"},{value:-45,color:"rgba(130, 22, 146, 1)"},{value:-40,color:"rgba(130, 22, 146, 1)"},{value:-30,color:"rgba(130, 87, 219, 1)"},{value:-20,color:"rgba(32, 140, 236, 1)"},{value:-10,color:"rgba(32, 196, 232, 1)"},{value:0,color:"rgba(35, 221, 221, 1)"},{value:10,color:"rgba(194, 255, 40, 1)"},{value:20,color:"rgba(255, 240, 40, 1)"},{value:25,color:"rgba(255, 194, 40, 1)"},{value:30,color:"rgba(252, 128, 20, 1)"}]},clouds_new:{title:"Clouds (%)",unit:"%",stops:[{value:0,color:"rgba(255, 255, 255, 0.0)"},{value:10,color:"rgba(253, 253, 255, 0.1)"},{value:20,color:"rgba(252, 251, 255, 0.2)"},{value:30,color:"rgba(250, 250, 255, 0.3)"},{value:40,color:"rgba(249, 248, 255, 0.4)"},{value:50,color:"rgba(247, 247, 255, 0.5)"},{value:60,color:"rgba(246, 245, 255, 0.75)"},{value:70,color:"rgba(244, 244, 255, 1)"},{value:80,color:"rgba(243, 242, 255, 1)"},{value:90,color:"rgba(242, 241, 255, 1)"},{value:100,color:"rgba(240, 240, 255, 1)"}]},pressure_new:{title:"Pressure (Pa)",unit:"Pa",stops:[{value:94e3,color:"rgba(0, 115, 255, 1)"},{value:96e3,color:"rgba(0, 170, 255, 1)"},{value:98e3,color:"rgba(75, 208, 214, 1)"},{value:1e5,color:"rgba(141, 231, 199, 1)"},{value:101e3,color:"rgba(176, 247, 32, 1)"},{value:102e3,color:"rgba(240, 184, 0, 1)"},{value:104e3,color:"rgba(251, 85, 21, 1)"},{value:106e3,color:"rgba(243, 54, 59, 1)"},{value:108e3,color:"rgba(198, 0, 0, 1)"}]},wind_new:{title:"Wind (m/s)",unit:"m/s",stops:[{value:1,color:"rgba(255, 255, 255, 0)"},{value:5,color:"rgba(238, 206, 206, 0.4)"},{value:15,color:"rgba(179, 100, 188, 0.7)"},{value:25,color:"rgba(63, 33, 59, 0.8)"},{value:50,color:"rgba(116, 76, 172, 0.9)"},{value:100,color:"rgba(70, 0, 175, 1)"},{value:200,color:"rgba(13, 17, 38, 1)"}]}};function ta({className:e,...t}){return me.jsx("div",{"data-slot":"skeleton",className:Fc("dark:bg-accent bg-foreground/25 animate-pulse rounded-md ",e),...t})}function IG(){return me.jsxs(gd,{title:"Current Weather",className:"md:pb-11",childrenClassName:"flex flex-col items-center gap-6 2xl:justify-between",children:[me.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[me.jsx(ta,{className:"w-30 h-15"}),me.jsx(ta,{className:"rounded-full size-14"}),me.jsx(ta,{className:"w-36 h-7"})]}),me.jsxs("div",{className:"flex flex-col gap-2",children:[me.jsx("p",{className:"text-xl text-center",children:"Local time: "}),me.jsx(ta,{className:"w-36 h-10"})]}),me.jsxs("div",{className:"flex justify-between w-full",children:[me.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[me.jsx("p",{className:"text-gray-500",children:"Feels like"}),me.jsx(ta,{className:"w-16 h-6"})]}),me.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[me.jsx("p",{className:"text-gray-500",children:"Humidity"}),me.jsx(ta,{className:"w-16 h-6"})]}),me.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[me.jsx("p",{className:"text-gray-500",children:"Wind speed"}),me.jsx(ta,{className:"w-16 h-6"})]})]})]})}function kG(){return me.jsx(gd,{childrenClassName:"flex flex-col gap-4 ",title:"Daily forecast",children:Array.from({length:8}).map((e,t)=>me.jsxs("div",{className:"grid grid-cols-5 gap-4 items-left 2xl:justify-between",children:[me.jsx(ta,{className:"w-9 h-8"}),me.jsx(ta,{className:"size-8 rounded-full"}),me.jsx(ta,{className:"size-8"}),me.jsx(ta,{className:"size-8"}),me.jsx(ta,{className:"size-8"})]},t))})}function PG(){return me.jsx(gd,{childrenClassName:"flex gap-6 overflow-x-scroll",title:"Hourly forecast(48 hours)",children:Array.from({length:48}).map((e,t)=>me.jsxs("div",{className:"flex flex-col gap-2 items-center p-2 2xl:justify-between",children:[me.jsx(ta,{className:"w-15 h-6 2xl:scale-110"}),me.jsx(ta,{className:"size-8 2xl:size-10 rounded-full"}),me.jsx(ta,{className:"w-8 h-6 2xl:scale-110"})]},t))})}function DG(){return me.jsx(gd,{childrenClassName:"grid grid-cols-1 md:grid-cols-2 gap-8",title:"Additional weather info",children:Array.from({length:6}).map((e,t)=>me.jsxs("div",{className:"flex justify-between",children:[me.jsxs("div",{className:"flex",children:[me.jsx(ta,{className:"h-8 w-20 mr-4"}),me.jsx(ta,{className:"size-8 rounded-full"})]}),me.jsx(ta,{className:"size-8"})]},t))})}function LG({className:e,defaultValue:t,value:r,min:u=0,max:a=100,...f}){const m=de.useMemo(()=>Array.isArray(r)?r:Array.isArray(t)?t:[u,a],[r,t,u,a]);return me.jsxs(nq,{"data-slot":"slider",defaultValue:t,value:r,min:u,max:a,className:Fc("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...f,children:[me.jsx(iq,{"data-slot":"slider-track",className:Fc("dark:bg-sidebar bg-foreground/25 relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:me.jsx(rq,{"data-slot":"slider-range",className:Fc("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:m.length},(c,z)=>me.jsx(aq,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},z))]})}function RG({delayDuration:e=0,...t}){return me.jsx(Mq,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function tM({...e}){return me.jsx(zq,{"data-slot":"tooltip",...e})}function nM({...e}){return me.jsx(Iq,{"data-slot":"tooltip-trigger",...e})}function iM({className:e,sideOffset:t=0,children:r,...u}){return me.jsx(kq,{children:me.jsx(Pq,{"data-slot":"tooltip-content",sideOffset:t,className:Fc("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...u,children:r})})}const rM=e=>de.createElement("svg",{width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},de.createElement("circle",{cx:12,cy:12,r:9,stroke:"#292929",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),de.createElement("rect",{height:.01,stroke:"#292929",strokeLinejoin:"round",strokeWidth:3,width:.01,x:12,y:8}),de.createElement("path",{d:"M12 12V16",stroke:"#292929",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})),OG=e=>de.createElement("svg",{width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},de.createElement("path",{d:"M9 19L16 12L9 5",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));function NG(){return me.jsxs(gd,{childrenClassName:"flex flex-col gap-3",className:"hover:scale-105 cursor-pointer transition-transform duration-300 from-sidebar-accent to-sidebar-accent/60 gap-0!",children:[me.jsxs("div",{className:"flex justify-between",children:[me.jsx(ta,{className:"w-12 h-7 dark:bg-sidebar"}),me.jsx(ta,{className:"h-7 w-12 dark:bg-sidebar"})]}),me.jsx(ta,{className:"w-full h-1.5 dark:bg-sidebar"}),me.jsxs("div",{className:"flex justify-between text-xs",children:[me.jsx(ta,{className:"w-2 h-4 dark:bg-sidebar"}),me.jsx(ta,{className:"w-2 h-4 dark:bg-sidebar"})]}),me.jsx("div",{className:"flex justify-between ",children:Array.from({length:5}).map((e,t)=>me.jsx(ta,{className:"h-6 w-14 dark:bg-sidebar"},t))})]})}function $G(){return me.jsxs("div",{className:"flex flex-col gap-4",children:[me.jsx("h1",{className:"text-2xl font-semibold ",children:"Air pollution"}),me.jsx(ta,{className:"size-12"}),me.jsx("div",{className:"flex items-center gap-2",children:me.jsx("h1",{className:"text-2xl font-semibold ",children:"AQI"})}),Array.from({length:8}).map((e,t)=>me.jsx(NG,{},t))]})}function jG(e){const{isSidePanelOpen:t,setIsSidePanelOpen:r}=e;return me.jsxs("div",{className:oy(" overflow-scroll fixed top-0 right-0 h-screen w-(--sidebar-width) shadow-md bg-sidebar z-1001 px-4 py-8 transition-transform duration-300 lg:translate-x-0",t?"translate-x-0":"translate-x-full"),children:[me.jsx("button",{onClick:()=>r(!1),children:me.jsx(OG,{className:"size-8  cursor-pointer -ml-2 lg:hidden"})}),me.jsx(de.Suspense,{fallback:me.jsx($G,{}),children:me.jsx(UG,{...e})})]})}const BG=(e,t)=>{for(const[r,u]of Object.entries(t))if(e>=u.min&&(u.max===null||e<=u.max))return r;return"Very Poor"},FG=e=>({Good:"bg-green-500",Fair:"bg-yellow-500",Moderate:"bg-orange-500",Poor:"bg-red-500","Very Poor":"bg-purple-500"})[e]||"bg-zinc-500";function UG({coords:e}){const{data:t}=_v({queryKey:["pollution",e],queryFn:()=>ZN(e)});return me.jsxs("div",{className:"flex flex-col gap-4",children:[me.jsx("h1",{className:"text-2xl font-semibold ",children:"Air pollution"}),me.jsx("h1",{className:"text-5xl font-semibold ",children:t.list[0].main.aqi}),me.jsxs("div",{className:"flex items-center gap-2",children:[me.jsx("h1",{className:"text-2xl font-semibold ",children:"AQI"}),me.jsxs(tM,{children:[me.jsx(nM,{children:me.jsx(rM,{className:"size-4"})}),me.jsx(iM,{className:"z-2000 bg-white!",children:me.jsx("p",{className:"max-w-xs",children:"Air Quality Index. Possible values: 1, 2, 3, 4, 5. Where 1 = Good, 2 = Fair, 3 = Moderate, 4 = Poor, 5 = Very Poor."})})]})]}),Object.entries(t.list[0].components).map(([r,u])=>{const a=VG[r.toUpperCase()],f=Math.max(a["Very Poor"].min,u),m=BG(u,a),c=FG(m);return me.jsxs(gd,{childrenClassName:"flex flex-col gap-3",className:"hover:scale-105 cursor-pointer transition-transform duration-300 from-sidebar-accent to-sidebar-accent/60 gap-0!",children:[me.jsxs("div",{className:"flex justify-between",children:[me.jsxs("div",{className:"flex items-center gap-2",children:[me.jsx("span",{className:"text-lg font-bold capitalize",children:r}),me.jsxs(tM,{children:[me.jsx(nM,{children:me.jsx(rM,{className:"size-4"})}),me.jsx(iM,{className:"z-2000 bg-white!",children:me.jsxs("p",{className:"max-w-xs",children:["Concentration of"," ",ZG[r.toUpperCase()]]})})]})]}),me.jsx("span",{className:"text-lg font-semibold",children:u})]}),me.jsx(LG,{disabled:!0,min:0,max:f,value:[u]}),me.jsxs("div",{className:"flex justify-between text-xs",children:[me.jsx("p",{children:"0"}),me.jsx("p",{children:f})]}),me.jsx("div",{className:"flex justify-between ",children:Object.keys(a).map(z=>me.jsx("span",{className:oy("px-2 py-1 rounded-md text-xs font-medium",z===m?c:"bg-muted text-muted-foreground"),children:z},z))})]},r)})]})}const VG={SO2:{Good:{min:0,max:20},Fair:{min:20,max:80},Moderate:{min:80,max:250},Poor:{min:250,max:350},"Very Poor":{min:350,max:null}},NO2:{Good:{min:0,max:40},Fair:{min:40,max:70},Moderate:{min:70,max:150},Poor:{min:150,max:200},"Very Poor":{min:200,max:null}},PM10:{Good:{min:0,max:20},Fair:{min:20,max:50},Moderate:{min:50,max:100},Poor:{min:100,max:200},"Very Poor":{min:200,max:null}},PM2_5:{Good:{min:0,max:10},Fair:{min:10,max:25},Moderate:{min:25,max:50},Poor:{min:50,max:75},"Very Poor":{min:75,max:null}},O3:{Good:{min:0,max:60},Fair:{min:60,max:100},Moderate:{min:100,max:140},Poor:{min:140,max:180},"Very Poor":{min:180,max:null}},CO:{Good:{min:0,max:4400},Fair:{min:4400,max:9400},Moderate:{min:9400,max:12400},Poor:{min:12400,max:15400},"Very Poor":{min:15400,max:null}},NO:{Good:{min:0,max:20},Fair:{min:20,max:40},Moderate:{min:40,max:60},Poor:{min:60,max:80},"Very Poor":{min:80,max:null}},NH3:{Good:{min:0,max:40},Fair:{min:40,max:70},Moderate:{min:70,max:150},Poor:{min:150,max:200},"Very Poor":{min:200,max:null}}},ZG={SO2:"Sulfur dioxide",NO2:"Nitrogen dioxide",PM10:"Particulate matter 10",PM2_5:"Fine particles matter",O3:"Ozone",CO:"Carbon monoxide",NO:"Nitrogen monoxide",NH3:"Ammonia"},aR=e=>de.createElement("svg",{width:"800px",height:"800px",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},de.createElement("path",{d:"M4 7C4 6.44771 4.44772 6 5 6H24C24.5523 6 25 6.44771 25 7C25 7.55229 24.5523 8 24 8H5C4.44772 8 4 7.55229 4 7Z",fill:"#000000"}),de.createElement("path",{d:"M4 13.9998C4 13.4475 4.44772 12.9997 5 12.9997L16 13C16.5523 13 17 13.4477 17 14C17 14.5523 16.5523 15 16 15L5 14.9998C4.44772 14.9998 4 14.552 4 13.9998Z",fill:"#000000"}),de.createElement("path",{d:"M5 19.9998C4.44772 19.9998 4 20.4475 4 20.9998C4 21.552 4.44772 21.9997 5 21.9997H22C22.5523 21.9997 23 21.552 23 20.9998C23 20.4475 22.5523 19.9998 22 19.9998H5Z",fill:"#000000"}));function qG({className:e,size:t="default",...r}){return me.jsx(uq,{"data-slot":"switch","data-size":t,className:Fc("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 group/switch inline-flex shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-[1.15rem] data-[size=default]:w-8 data-[size=sm]:h-3.5 data-[size=sm]:w-6",e),...r,children:me.jsx(hq,{"data-slot":"switch-thumb",className:Fc("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block rounded-full ring-0 transition-transform group-data-[size=default]/switch:size-4 group-data-[size=sm]/switch:size-3 data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const GG=e=>de.createElement("svg",{width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},de.createElement("path",{d:"M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),HG=e=>de.createElement("svg",{width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},de.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.39703 11.6315C3.39703 16.602 7.42647 20.6315 12.397 20.6315C15.6858 20.6315 18.5656 18.8664 20.1358 16.23C16.7285 17.3289 12.6922 16.7548 9.98282 14.0455C7.25201 11.3146 6.72603 7.28415 7.86703 3.89293C5.20697 5.47927 3.39703 8.38932 3.39703 11.6315ZM21.187 13.5851C22.0125 13.1021 23.255 13.6488 23 14.5706C21.7144 19.2187 17.4543 22.6315 12.397 22.6315C6.3219 22.6315 1.39703 17.7066 1.39703 11.6315C1.39703 6.58874 4.93533 2.25845 9.61528 0.999986C10.5393 0.751502 11.0645 1.99378 10.5641 2.80935C8.70026 5.84656 8.83194 10.0661 11.397 12.6312C13.9319 15.1662 18.1365 15.3702 21.187 13.5851Z",fill:"#0F0F0F"})),oR=de.createContext(null),WG=()=>{const e=de.useContext(oR);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e};function sR({}){const{theme:e,toggleTheme:t}=WG();return me.jsxs("div",{className:"flex items-center gap-2",children:[me.jsx(GG,{className:"size-5 "}),me.jsx(qG,{checked:e==="dark",onCheckedChange:t}),me.jsx(HG,{className:"size-5 "})]})}function XG({setIsSidePanelOpen:e}){return me.jsxs("div",{className:"w-full h-16 p-4 bg-background sticky flex justify-end z-1001 top-0 sm:hidden gap-8",children:[me.jsx(sR,{}),me.jsx("button",{onClick:()=>e(!0),children:me.jsx(aR,{className:"size-8  cursor-pointer"})})]})}function YG(){const[e,t]=de.useState({lat:50.46,lon:30.46}),[r,u]=de.useState("Tokyo"),[a,f]=de.useState("clouds_new"),[m,c]=de.useState(!1),{data:z}=pO({queryKey:["geocode",r],queryFn:()=>VN(r)}),k=(Z,X)=>{t({lat:Z,lon:X}),u("custom")},B=r==="custom"?e:{lat:z?.[0].lat??0,lon:z?.[0].lon??0};return me.jsxs(me.Fragment,{children:[me.jsx(XG,{setIsSidePanelOpen:c}),me.jsxs("div",{className:"flex flex-col gap-8 p-8 pt-4 xs:pt-8 w-full lg:w-[calc(100dvw-var(--sidebar-width))] 2xl:h-screen 2xl:min-h-[1200px]",children:[me.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row xs:gap-4 justify-between",children:[me.jsxs("div",{className:"flex gap-2 md:gap-4 flex-col md:flex-row md:items-center",children:[me.jsx("h1",{className:"text-lg font-semibold",children:"Location"}),me.jsx(TG,{location:r,setLocation:u})]}),me.jsxs("div",{className:"flex gap-2 md:gap-4 flex-col md:flex-row md:items-center",children:[me.jsx("h1",{className:"text-lg font-semibold whitespace-nowrap",children:"Map type"}),me.jsx(AG,{mapType:a,setMapType:f})]}),me.jsxs("div",{className:"ml-auto items-center gap-4 hidden sm:flex",children:[me.jsx(sR,{}),me.jsx("button",{onClick:()=>c(!0),className:"hidden xs:block",children:me.jsx(aR,{className:"size-8  cursor-pointer ml-auto lg:hidden"})})]})]}),me.jsxs("div",{className:"grid grid-cols-1 2xl:flex-1 2xl:min-h-0 gap-4 md:grid-cols-2 2xl:grid-cols-4 2xl:grid-rows-4",children:[me.jsxs("div",{className:"relative h-120 2xl:h-auto col-span-1 md:col-span-2 2xl:col-span-4 2xl:row-span-2 order-1",children:[me.jsx(oU,{mapType:a,coords:B,onMapClick:k}),me.jsx(MG,{mapType:a})]}),me.jsx("div",{className:"col-span-1 2xl:row-span-2 order-2",children:me.jsx(de.Suspense,{fallback:me.jsx(IG,{}),children:me.jsx(HN,{coords:B})})}),me.jsx("div",{className:"col-span-1 order-3 2xl:order-4 2xl:row-span-2",children:me.jsx(de.Suspense,{fallback:me.jsx(kG,{}),children:me.jsx(qN,{coords:B})})}),me.jsx("div",{className:"col-span-1 md:col-span-2 2xl:row-span-1 order-4 2xl:order-3",children:me.jsx(de.Suspense,{fallback:me.jsx(PG,{}),children:me.jsx(GN,{coords:B})})}),me.jsx("div",{className:"col-span-1 md:col-span-2 2xl:row-span-1 order-5",children:me.jsx(de.Suspense,{fallback:me.jsx(DG,{}),children:me.jsx(t$,{coords:B})})})]})]}),me.jsx(jG,{coords:B,isSidePanelOpen:m,setIsSidePanelOpen:c})]})}function KG({children:e}){const[t,r]=de.useState("dark");de.useEffect(()=>{const a=document.body;t==="dark"?a.classList.add("dark"):a.classList.remove("dark")},[t]);const u=()=>r(a=>a==="dark"?"light":"dark");return me.jsx(oR,{value:{theme:t,toggleTheme:u},children:e})}const JG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",QG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",eH="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==";delete Zr.Icon.Default.prototype._getIconUrl;Zr.Icon.Default.mergeOptions({iconUrl:JG,iconRetinaUrl:eH,shadowUrl:QG});const tH=new eO;kR.createRoot(document.getElementById("root")).render(me.jsx(de.StrictMode,{children:me.jsx(nO,{client:tH,children:me.jsx(RG,{children:me.jsx(KG,{children:me.jsx(YG,{})})})})}));
